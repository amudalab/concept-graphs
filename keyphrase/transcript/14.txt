COMPUTER NETWORKS 
	Prof. Sujoy Ghosh	
Dept of Computer Science & Engineering 
IIT Kharagpur 
Lecture - 14
Token-Based MAC
(Refer slide time: 00:45)
Good day. In the last lecture, we talked about various multiple access schemes and one of this set of schemes is token bus DQD etc. We will see two other variants of it, namely, token ring and FDDI. (Refer slide time: 01:08-01:15) 

We are going to talk about token-based MAC. (Refer slide time: 01:15 ? 01:34)

They are some kind of round robin MACs. That means the chance to transmit comes to each of the stations in a round robin fashion. This can be done as I mentioned earlier through polling or token passing. Here we will be specifically talking about token passing. (Refer slide time: 01:34 ? 02:07)

The first system that we will talk about is the token ring. As the name itself suggests, it has a ring topology. A token ring MAC works with a special pattern or token, which is 3 bytes long, called token, which moves from one computer to the next. Priority indicators are placed within the token. We will see later how the priority indicators are used. (Refer slide time: 02:07 - 02:42)

Data rate may be 14, 16 or 100 Mbps. Medium may be UTP, STP or fiber. Signaling is usually differential Manchester; we mentioned this earlier. Differential Manchester is how you represent your 0s and 1s by electrical signals or optical signals as the case may be; and the maximum frame size would be 4550 bytes or right up to 18.2 KB. (Refer slide time: 02:42 ? 03:11)

In token ring, like a token bus, a token is passed around the ring, and within the token is an indicator that senses the ring as free or busy. If the token is busy that means some frame is being communicated. At that time, the token circles continuously around the ring are passing each station. Each station is required to examine the token. (Refer slide time: 03:11 ? 03:38)   

If a station wishes to transmit data and the token is empty, it seizes or captures the ring by modifying the token to a start of user frame indicator, appending the data and control fields and sending the frame around the ring to the next station. The next station will now get the token as well as the frame, which will pass on till we get (Refer slide time: 03:38 ? 05:41)

to the node where the data is copied only if it is to be passed to the end user application attached to the node. That means there is a destination address. When the destination node sees that data, it knows that this is for him. So he absorbs, that means, he copies it back. He makes a copy of it and sends it to the application layer in that particular node through all the other layers; we are not concerned about that at the moment. But the token and the frame continue circulating in the ring till it comes back to the center. When the token arrives back at the original site, the token is once again made free and placed onto the network. You see in this scheme only one frame ? I mean if the ring busy at all then one frame ? is traveling along it. It has left the source station, then it has been copied by the intermediate nodes on to the frame as well as the token with the busy indicator over there. Then it finally comes to the end station and at the destination station, it makes the copy of the data for its own use and keeps on circulating this frame and the token right up to it. When it comes back to the original sender, the original sender will now strip all these data, make the token free, and put it on the ring. Now, some body else who ever wants to transmit next, will capture the token and send it in this fashion. This shared medium, namely the ring, is shared by all these nodes attached to it. (Refer slide time: 05:41 ? 06:05)

When a station wants to transmit, it has to wait for the token, then it has to seizes it, and then it transmits the frame. When the station seizes token and begins transmission, there is no token on the ring. Nobody else can transmit. There is no  contention or collision as such, because only the station that has got the token can transmit; so all others do not transmit. (Refer slide time: 06:05 ? 06:44)

What is the expected performance of token passing? First of all, it is fair because it is going in a round robin fashion. So everybody will have his chance; each computer is given in turn an opportunity to transmit even when the traffic is high. However, even if only one computer needs to transmit a message, it has to wait till the time that it receives back the token. Until it receives the token, it cannot start the transmission, so it has to wait. Again, long messages should not be allowed because otherwise one computer may hold the token for too long. (Refer slide time: 06:44 ? 07:49)

Several  tokens are there. Some variations of it use slotted rings, where several tokens or slots are used. These may be more useful and make it more efficient because if it is a very long ring and only one frame is traveling down it, it is rather inefficient way of using the system. So what we can do is that we may allow multiple frames, that means multiple slots, which are sort of distributed over the space. For example, if the speed is 200 m/?s of the frame, the data rate is 10 Mbps. These ten bits will span over 200 m over the ring. So a 2 km ring can hold 100 bits; that is the kind of performance with a single frame. (Refer slide time: 07:49 ? 08:42)

Let us look at how the priority works in the token ring; because what we can do is that we can do differential priorities to the nodes in the network and this is how it works. Let us go through one example; assume a token ring has five stations attached to a priority ring. Station A has priority access of 1. 1 is, let us assume, the lowest priority; stations B and D have priority of 2; and stations C and E have priorities of 3. So C and E have the highest priorities. Once again, assume that A had already seized the ring and is transmitting data frames. The token has a bit set to indicate that the token is busy. And that means because A has already put a frame in it, it is being sent from A. (Refer slide time: 08:42 ? 09:36)

Station B receives the frame it has data to transmit. Let us say that all of them also transmit some data to station B, which receives the frame. It has data to transmit but it cannot transmit at the moment because the ring is busy. But it places its priority of 2 in a reservation field within the token; it puts 2 over there in that reservation field, and sends the token and the frame sent by A along to C. It then passes the token to C. Station C also determines the ring is busy; it has data to send, so it places 3 in the reservation field, thus displacing the 2, which was inserted by B; 2 gets replaced by 3 in the reservation field, other thing remains as it is. It is still A?s frame, which is moving along. (Refer slide time: 09:36 - )  

Station C then passes the frame to D. D must defer because, if you remember, we had   the priority of 1 to A, 2 to B and D, and 3 to C and E. So it came from A to B, B put a reservation and its priority of 2, then C over wrote this with its priority of 3. Now D sees that there is a priority 3 that is waiting and D has only has its priority of 2; so it has to defer. It cannot do anything. So D must defer; it cannot place its priority of 2 into the field because the priority of 3 is already there. Consequently, it passes the frame to E, which examines the reservation field upon seeing the 3 in the field. It does nothing because since its priority is also 3, E is also a priority of 3, so E cannot do anything. So E simply sends it along. (Refer slide time: 10:39 ? 11:11)

Station A receives the frame back; it makes the ring free by resetting the token and passing the token to B. B is not allowed to use the token because the reservation field inside the token is equal to 3, one higher that the priority of B. Although B wants to transmit and the ring is free, B cannot start really transmitting because somebody with a priority 3 is waiting (Refer slide time: 11:11 ? 12:07)

C is allowed to seize the token because the priority field in the token says 3 and C    has the priority of 3, which means that C is the first node with that level of priority, which has got the token. So this sort of seizes the token; it places the data on the ring and sends the transmission to D. Now D is allowed to place its priority of 2. Although C is sending, C has already put its frame and D sees that naturally the reservation field is reset. Now D can place its priority of 2 into the reservation field. It does so and passes the frame to E. E also wants to send; so E replaces D?s priority of 2 with its priority of 3, and passes the frame to A. (Refer slide time: 12:07 ? 12:25)

A also wants to send again, but A must defer any reservation placement since its priority is 1. B must also forego any priority allocation since its priority is 2. C   receives its transmission back; it is required to make the ring free it does so and transmits the token to D. (Refer slide time: 12:25 ? 12:42)

D is not allowed to seize the ring, since its priority of 2 is less than the reserved priority, which has been put there by C. This is the priority indicator of 3; so it passes the token to E. E seizes the ring because its priority of 3 is equal to or greater than the reservation of 3. This is the way the priority ring works ? if you see, whoever put the reservation earlier at the same level, it come backs to him. So he puts the frame out there, but if the higher priority nodes have finished reservation, transmission, etc., then the lower parity nodes can start transmitting and so on. So you can set these priority levels in the token. This is how not only you can have a pure simple round robin, where everybody has the same priority, but you can have priority based token ring also. (Refer slide time: 13:28 ? 13:49)

There is a variation of this dedicated token ring, which is called dedicated token ring.  There is a central hub; there is a more centralized system, which acts like a switch and it?s more like a full duplex, a point-to-point link and the concentrator acts as frame level repeater, and there is no token passing.(Refer slide time: 13:49 ? 15:09)

Next we will take up another system called FDDI. This is still in use in some places where some specific applications are there, but then again FDDI is also sort of going out because other new technology is taking its place. FDDI was originally conceived as a high-speed network and this network could be used in a LAN, WAN or backbone as high-speed data. When it was conceived, at that time, 100 Mbps was considered very high speed; of course technology has changed, but still it is instructive to look at  these technologies. First of all, we?ll see how different MAC schemes can work, and new MAC schemes for new technology, etc. are also coming up all the time. We will, just as an instructive thing, will look into FDDI in some detail. (Refer slide time: 15:11 ? 16:04)

So FDDI was conceived as a high-speed backbone technology. It has a dual ring topology as just like the SONET rings; we talked about dual ring topologies in the   optical networks. By the way, this is based on fibers. This is fiber distributed data interface that forms the acronym FDDI. It uses dual ring topology, using fiber optic cable used to transmit light pulses. Optical fiber channel operates at a rate of 100 Mbps. Well, we can say 100 Mbps only today, but at one point of time, it was the standard in 1980s, which was proposed to be very high speed. It is frequently used in LANs to connect buildings together. (Refer slide time: 16:04 ? 16:27)

So ring circumference can extend to 200 kms; the distance between nodes can be up to 200 kms. FDDI network can host up to 1000 nodes on one optical fiber. That is how it was conceived. This optical fiber is not just continuous optical fiber. This optical fiber goes from hub to hub, that is, from node to node. (Refer slide time: 16:29 ? 17:54)

 This is an FDDI topology; we have two rings. A is known as the primary ring, which is shown in black. The primary ring is the one, which usually carries all the data, and then, there is a secondary ring, which is used for fault tolerance purpose. As matter of fact, this is one reason FDDI is still used in some places where the reliability of the network is of very high concern. We cannot allow it to remain down for any length of time. FDDI can quickly switch from the primary to the secondary ring. This is a production kind of system as you can see, because there is one ring fully dedicated as a secondary ring, which is there. In case of a fault either of a link or particular node, we can quickly have another ring in its place. (Refer slide time: 17:54 ? 20:14)

The FDDI standard specification came up in the 1980s. This has various parts: one is the media access control, MAC part, which deals with how the medium is accessed, the frame format, token handling, addressing, and error recovery. FDDI has a somewhat more complex MAC protocol because FDDI allows both synchronous as well as asynchronous traffic. If some traffic is synchronous, that means, if it is carrying some kind of voice or something, then you know that is 125 microsecond  length; it is very sacred and sacrosanct over there. Every 125 microseconds, some channel may have to send something, as well as we can have packets or data flowing in the network, may be with some kind of lower priority. So this can handle a mixture of both synchronous and asynchronous traffic. That is a peculiarity of FDDI system, which makes its MAC somewhat more complex than a plain vanilla token ring. So we will see details of this MAC later on. The physical layer protocol defines the data encoding and decoding, how data is encoded and decoded. We will see later the clocking requirements and framing. Under the physical layer, we will see medium characteristics of transmission medium, fiber optic link, power levels, bit error rates, optical components, connectors, etc. that is also a part of the standard for the physical layer medium. There is a standard for the station management, which defines station and ring configurations, initialization, scheduling, collection of statistics, fault isolation, and recovery from faults. As I said, the recovery from faults was and still is a very strong point of FDDI ? one reason FDDI may be preferred for some applications. (Refer slide time: 20:14 ? 20:36)

So, as mentioned earlier, the topology of FDDI network consists of two independent rings ? primary ring A is used for data transmission, while secondary ring B provides an alternative data path; this has already been shown. And secondary ring remains idle, unless primary ring fails. (Refer slide time: 20:36 ? 22:37)   

Optical fiber rings are counter rotating; that means one is moving in one direction while the other is moving in the other direction. Two signal paths are provided, one in each direction. Why do you make the rings counter  rotating? Well, we had seen this in our recovery lecture also; the reason is that if there is a node failure what you can do is that suppose you are a station and there are two counter rotating rings passing through you. That means in one, the signal will pass in this direction and in the other the signal will pass in this direction. In optical fiber, this is quite fixed because you want to have proper transmitter on one side and the receiver on the other side. So one ring is moving like this, the other ring is moving like this. Now what might happen is that suppose the next station has failed and this station understands that there is something wrong either with the link or with the next station. So what it might do is that it might make a quick connection over here so that the ring coming in this direction may take this other path and still we can make one ring. This ring will not have any  fault tolerance; there will be one ring by using part of the two rings A and B. So we can get a recovery through that; that is why we have two counter rotating rings with two signal paths provided, one in each direction. A station is a computer, workstation, or node connected to FDDI network. There are some network nodes also; we will talk about this. Or a station must be connected to both in order to use secondary ring as an alternate data path. If it is connected to only one of them, it cannot use the alternate path. (Refer slide time: 22:37 ? 23:05)

Media is, as I said, 1300 nanometer optical fibers, transmission method is base band; that means, there is no modulation. Only the pulses in the raw form travel down the ring; data rate is 100 Mbps and topology is a physical ring of trees and a logical ring. Why is it a ring of trees where do the trees come from ? we will talk about that. (Refer slide time: 23:05 ? 23:41)

Now let us talk about the type of network stations, which may be connected to an FDDI ring. One is a dual attached station, which is connected to both the rings. That means, it is a station, which is connected to both the rings. That is why it is called dual attached.  We have dual attached concentrator, DAC, which is connected to both rings and provides connection for additional stations and concentrators. It is actually the root of a tree. This is where the tree comes from. (Refer slide time: 23:41 ? 25:33)

We have this picture of an FDDI concentrator, so you can see that this is the main part of concentrator. The two rings are there; They are counter rotating ? this is the primary ring and this is the secondary ring. So the primary ring is coming like this from A to B and secondary ring is going like this. It has some additional ports from which other stations may hang and, actually, what might happen is that we may have a tree hanging from a concentrator. We have a tree of nodes here; so that is why this main FDDI ring may be a ring of trees. The way FDDI is actually deployed is also interesting in the sense that you may have a large ring; that is possible. What is done is that we make a very small ring in the core of the system, like wherever your main server is. We make a very small ring just within a room and what happens is that we have concentrators connected to this ring and from this concentrators, a tree spans out to all the other, may be near by buildings or whatever, so that all of them are connected to this FDDI backbone, but the backbone has got two rings. This backbone is fault tolerant. So that is a good thing about FDDI; that is one way FDDI may be deployed so we have a very small ring and tree is spanning out and going out of the building, may be to other building, and so on. Or alternatively, you can have a large ring also. (Refer slide time: 25:33 ? 25:42)

So we have this dual attached stations and dual attached concentrators; concentrators could be the roots of trees. (Refer slide time: 25:42 ? 26:15)

Dual attached stations and dual attached concentrators are more costly. we have a cheaper variety you think that it is good enough which is a single attached station which is attached only to the primary ring. We have single attached concentrators which is connected to only the primary ring through a tree, a double attached station or concentrator can reconfigure the dual ring as mentioned earlier into a single ring in the event of a failure. (Refer slide time: 26:15 ? 27:03)

What are the physical interfaces like ? as opposed to a basic token ring network, in which at any instant there is a single active ring monitor, which supplies the master clock for the ring, in FDDI, this approach is not suitable because of the high data rates. That is one thing; and the other thing is that the ring could be very large. So if the ring is quite large then having the central clock becomes difficult. Each interface has its own local clock and the outgoing data are transmitted using this clock. (Refer slide time: 27:03 ? 27:43)

All data to be transmitted are encoded, as I mentioned earlier, prior to transmission using a 4 of 5 group code, which means there are nearly 32 possibilities. So, for 4 bits of data, we actually have 5 bits, which are going over there. The additional capacity is used in some other way for control purpose; that we will see later. This means, for each 4 bits of data, a corresponding 5 bit code word or symbol is generated by the encoder. Some of these symbols or combinations are used for link control functions. (Refer slide time: 27:43 ? 29:13)

Now let us go through the ring operation ? there are two aspects to it. One aspect is similar to the token ring, which we have already discussed. The sending station waits for a token; sending station captures and strips token and then transmits frames; sending station issues token at the end of transmission. Now this is one point where the FDDI is different from a token ring. In a token ring, if you remember, only when the  transmitted frame with that busy ring etc., comes all the way back to the sender, the sender makes this token free and puts it back on the ring. Since FDDI was perceived as a high-speed ring, what was proposed was that as soon as its transmission of its frame is over, it can put a new token on the ring. Multiple frames may be circulating in the ring at the same time bringing up the speed. So sending station issues token at the end of transmission, destination station copies the transmitted frame and sets the A and C, which is the address recognized by the frame copied indicators. That means it has already copied the frame like what we have in a token ring. (Refer slide time: 29:13 ? 29:46)

The sending station removes the data from the ring by stripping the sent and acknowledged frame, etc. So it takes out the frame; the first few bytes of the frame are not stripped ? this is for some technical reason, we need not go into the details here ? and continue to circulate on the ring as a fragment. Each repeating station  strips 1 byte from the fragment and the transmitting station completely strips it. So there are some fragments also apart from the frames; some fragments are also moving around in the ring. (Refer slide time: 29:46 ? 30:52)  

Now we come to token passing scheme. It uses token passing protocol to move data around; the ring uses another protocol based on timers. We will look at this protocol later on. Timing is very critical to token passing scheme, as it is designed for delay sensitive synchronous data. As I mentioned earlier, the FDDI ring carries a mixture of data. It may carry lower priority packet data kind of thing, which we have been talking about, in the token ring. It may also carry synchronous data, which is time sensitive and which has somewhat higher priority than this other one. This is based on some timing protocol. We will go into timing protocol now. FDDI allows for high data rates, where each ring interface has its own clock. All outgoing data are transmitted using this clock. (Refer slide time: 30:52 ? 31:15)

A node will get packets within a specified amount of time. We are discussing the  timing part of it. A node will get packets within a specified amount of time. As a packet circles the ring with a token behind, each station retimes and regenerates the packets. (Refer slide time: 31:15 ? 31:35)

So this increases probability frame fragments, which will be propagated on the ring ? how fragments are eliminated. Early token release is required because of the high speed and extensive distance provided by FDDI. (Refer slide time: 31:35 ? 32:00)

FDDI rotation time: FDDI uses time to ensure equal access to the ring; measures rotation time by calculating distance of segments, processing time, and number of stations. This is the time you expect a packet to move around the entire ring. Rotation time refers to how it takes a signal to propagate around the ring. (Refer slide time: 32:00 ? 33:36)

So rotation time is used to control the priority operation of FDDI ring. We have several timings: one is measured by the clock that times the period between the receipt of tokens called the token rotation time, that means, how long is it that the token takes to come around the ring. The operation of MAC layer is governed by a MAC receiver and is calculated by target token rotation timer. That means there is a target rotation time, which is  prefixed and there is a TRT, which is measured. Usually you would expect under the normal conditions, when the load is moderate, the token rotation time would be less than the TTRT. When the node is moderately noted by comparing TRT with TTRT, we can find out how loaded the system is. If you have a synchronous link going through the synchronous traffic that is going through this FDDI ring, the synchronous traffic will have to be given the first priority and the asynchronous traffic of some lower priority data traffic, will be put on the ring or will not be put on the ring, depending on how loaded it is and this is how it is calculated. (Refer slide time: 33:36 ? 33:56)

There is a pre-negotiated target time called PTT. PTT is coordinated for the arrival of a transmission. Each node measures time it takes for the token to return to it; that is the TRT. It compares time to a pre-negotiated target time PTT for its arrival. (Refer slide time: 34:01 ? 34:36)

A node is allowed to transmit as long as its full transmission stream does not exceed the PTT. So there is a pre-negotiated target time, which is allowed, and the node is allowed to transmit as long as its full transmission stream does not exceed the PTT. If the token comes back sooner than PTT threshold, it is deemed as a light network load. If the token comes back later than PTT, it indicates the heavy traffic load. Low priority traffic must then be deferred until load on the network becomes lighter. (Refer slide time: 34:36 ? 35:26)

There is a token holding time, THT. If you look at the last point THT is actually equal to TTRT minus TRT. It is used to calculate maximum length of time a station can hold the token to initiate asynchronous transmissions. The point is that there is a target time and there is an actual measured time, by which the token has come back. If the actual measured time is low, that means the network is lightly loaded, you can put some asynchronous traffic. That is why THT is calculated. It calculates the difference between the arrival of the token and the TTRT. It keeps track of the amount of time a host can transmit. This is the formula, and then you have the following rules (Refer slide time: 35:26 ? 36:21)

If THT is less than zero that means traffic is heavy, the total rotation time is actually  more than the expected time, which was expected earlier. This means that all asynchronous traffic has to wait. The synchronous traffic will go through. So if the THT is less than zero, it is a heavily loaded station. Stations can only transmit synchronous traffic. If THT is greater than zero stations can transmit both synchronous and asynchronous traffic during THT. So it first sends the synchronous traffic and then sends the asynchronous traffic till THT falls to zero. If THT is equal to zero, the host cannot start any new packet. THT increases and number of stations  decreases.(Refer slide time: 36:21 ? 39:59)

The FDDI frame format: FDDI is a technology, which is not moving forward very much these days. As the matter of fact, it may be slowly on its way out because we have other ways of achieving the main point of FDDI, which is its fault tolerance.  The speed of FDDI has become 100 Mbps, which is rather not very fast as far as the backbone is concerned; it is taken as a very low speed these days. So FDDI may be on its way out. It is also expensive and the support to it is also dwindling. The reason we are looking at how different issues are handled by a typical MAC protocol is that this business about framing is common to all kinds of data link protocol. So later on, when we talk about Ethernet, which is the most common kind of network in the world today, we will see that it has some frame format. And if you remember our first day?s discussion, when we were talking about these different layers, we said that they are at the same level ? that means a network layer to network layer; network layer in this node to network layer in this node; similarly the transmission layer in this node to transmission layer in that node, etc. ? and have some protocol running. How do these protocols run? These protocols run by adding some header and in some cases a trailer also to the main payload. So whatever it gets from the upper layer is the payload to it for running its own protocol. It adds some header; that means, adds some information to the beginning of the frame and adds some information to the end of the frame to make a complete frame. The corresponding layer in the other node strips this particular information, does whatever it has to do, because it is also running the same protocol. So it knows what to do and then may be either it goes up or it goes down again to the next station and so on. This is an example frame format of FDDI. FDDI frame format has some preamble. We will not going to the details of this because this is not very important any more, but we will just mention that such fields are common in many frames. We have a start delimiter; we have a frame control; and we have a destination address. This has to be there because otherwise the destination will not know that this particular packet is meant for him. We have a source address field, so we have a DA and then an SA field; we have the data, frame check sequence for some error control. By the way, error is not handled by FDDI; error allows other layers to handle the error if there is an error. But we have to check the error; so there is frame check sequence, end delimiter, and frame status. (Refer slide time: 39:59 ? 40:30)

FDDI encodes all data prior to transmission, uses a 4 or 5 group code method, which was mentioned earlier. The encoder generates a corresponding 5 bit word or symbol. For every 4 bits transmitted, FDDI creates a 5 bit code. Bits provide clocking for the signal itself. The status of bit reflects a change of state of the light on the other side. (Refer slide time: 40:30 ? 41:57)

Symbols are light; taken with another symbol they form one byte. So there are 16 data symbols issued with 5 bits. You can have 32 different symbols; out of it, 16 data symbols are reserved for data. This is for 0 to F. so if you write your scheme of bytes in hex, that means in groups of 4 bits each, each of these 4 bits has got its corresponding code in the FDDI symbol. And then, we have 16 other symbols, which are left; so 8 are used as control symbols and 8 as violation symbols. The control symbols are called Q, H, I, J, K, etc. Coding the symbols prevents the occurrence of 4 consecutive 0s in a row. This is necessary to ensure each station?s clock is in sync with other stations for the transition that takes place. When you go from a 0 to 1,  that transition?s edge is used for synchronizing the clock. This is the very common method of synchronization; that is why we have the codes in such a manner, so that we do not have a long string of 0s because then the synchronization might drift.  (Refer slide time: 41:57 ? 42:16)

Token has the following fields: we have a preamble; we have a start delimiter; we have a frame control; and we have an ending delimiter. As I said, one of the main points of  FDDI is the (Refer slide time: 42:26 ? 44:14)

fault tolerance that it provides. There is a ring wrap. I mentioned this earlier that in a dual attached concentrator, if it senses that on the other side the node has failed, it can make a connection between the primary and the secondary ring within itself, so that the ring, while coming like this, starts traveling like this and completes its round. That is because if you have the node on the other side, the corresponding concentrator will also make a connection between the primary and the secondary ring. The failed node is essentially isolated on both the sides. There are connections within the concentrator, and instead of a single ring, you have two rings. Now the primary and secondary ring are fused together and then, suppose this was the primary ring coming, then it goes back to the secondary ring and then to the other concentrator on the other side and the connection is completed. You have one ring; that is why the physical diameter of an FDDI ring is kept within 100 miles. If there is a failure, the total ring diameter does not exceed 200 miles, which is the standard. Ring wrap technique is the technique that we mentioned earlier when we talked about protection and restoration; the technique is used to manage failures. When a station fails or a cable is damaged, dual ring is automatically wrapped. Two adjacent ports connecting to a broken link will be removed from the ring and both stations enter wrap state. (Refer slide time: 44:14 ? 44:33)

FDDI concentrator switches to a wrap state and the ring is doubled back onto itself. Data continue to be transmitted on FDDI single ring. Performance is not negatively impacted during wrap state. So this is the good thing about FDDI. When you have very mission-critical situations, FDDI is kept as a strength for very critical situations like, may be, stock exchange or may be some thing else, where even few seconds of network down time is not acceptable to anybody. So there you could deploy this kind of technology with its inherent fault tolerance. So this is the another picture of FDDI ring wrap.  (Refer slide time: 45:13 -  45:33)

As shown over here, you have one station 4, which has gone down so that 2 adjacent stations, namely, 2 and 3 wrap around and we have a single ring now going around. So this is clear. (Refer slide time: 45:33 ? 47:40)

We have discussed earlier how this is done. We have optical bypass switches used for two or more failures to occur. By the way, what would happen if more failures occur? Suppose there was a one single failure, one single node failure, and the two rings primary and secondary and the two adjacent concentrators were wrapped back and we had a single ring like this, what would happen if another node fails in-between? What would happen is its adjacent concentrators once again wrap around. But now, instead of only one single ring, which we had earlier in the case of a single failure, now with this double failure we may have two rings. These two rings are not connected to each other. So these two rings individually would still keep working. There is a part of the protocol, which I have not covered. It is that if there is a single token, which was on the other side, and now the token is lost; there is no token. There is a protocol for reclaiming and regenerating a token. Now what would happen is that, two individual rings will come into operation on the two sides, but they will not be able to do so. The nodes, which are connecting to this sub-ring and the nodes, which are connected to the other sub-ring, will not be able to communicate with each other across, but within themselves, they will very well communicate as usual. So rings are segmented back into two independent rings incapable of communicating with each other. Additional failures can cause further ring segmentation. Optical bypass switches can eliminate failed stations to prevent ring segmentation. We have all seen how this is done ? actually this is all done with mirrors. (Refer slide time: 47:45 - )

So optical bypass switch has optional optical mirrors that pass light from ring directly to DAS station during normal operation. DAS station experiences a power loss; optical bypass switch will pass the light through itself. It uses internal mirrors to maintain ring integrity. (Refer slide time: 48:04 ? 48:54)

The other technique of this protection, etc., which we had seen earlier is dual homing. This dual homing is also used in an FDDI context; a router or a DAS ? DAS you remember is a dual attached station ? is connected to two concentrator ports on FDDI concentrator. One port provides a connection to active fiber link, while the other port is in hot standby mode. Actually there are two nodes, A and B; usually the A node is in hot standby mode and B node is operating. So the port is in hot standby or passive mode; hot standby is constantly tested and will take over if the primary link fails. (Refer slide time: 48:54 ? 49:08)

A typical DAS configuration has a B port; it is designated as active port; and a port is configured as the hot standby. When the primary link fails, passive link automatically activates and hot standby becomes operational. So this is the same dual homing principle, which we had seen earlier when we were talking about recovery and protection. With this, we come to an end of the discussion about token bus and token ring and FDDI. We have discussed the number of these token-based protocols, namely, token bus, DQDB, token ring, and FDDI. The FDDI was quite good. Only thing was that FDDI was also quite costly. These technologies are actually going out in some sense. If you remember, when we were talking about DQDB, we said it can handle 53 byte cells; that came down to ATM and ATM is that sort of the technology that is still quite alive today. We will have an extensive discussion about ATM. Regarding the WAN technology, two other technologies, which are once again on their way out, are X 25 and frame relay. Well, frame relay is still there in many parts; X 25 is sort of going on but still we will just have a quick look at these. Then we have to consider these MAC levels. This is how the next set of lectures will go. What will happen is that once we finish this, then we will talk about the data link layer and specifically about the MAC sub-layer of the data link layer. Then we will have to talk about the LLC, that is, the logical link control. So we will discuss that and the other  important functionality of this data link layer, which is the error and flow controls.  Because whenever you have a transmission, somehow you have to assume that errors may occur. Depending on the medium and the technology, errors may be more or less frequent; for example, in a fiber, the error may be very low, error probability may be very low. When you are using wireless, the error probability is high. But, anyway, you have to consider the possibility of some error and how errors are handled. That means, we are talking about bit errors, which may come in due to noise and other things into the data in a particular link. That is one thing. And if there is a flow control to be done, that means, if there is a congestion or not because you are sending from one side whether the other side is receiving it or not, that you have to some how make out. We will take up these things next. Thank you. 
Preview
COMPUTER NETWORKS
Prof. Sujoy Ghosh
Dept of Computer Science & Engineering 
IIT Kharagpur 
Lecture - 15
Data Link Protocols 
(Refer slide time: 52:17 ? 52:18)

(Refer slide time: 52:18 ? 52:20)

Good day so today we will start  our discussion on data link layer as a matter of fact we have discussed a part of data link layer namely  the Mac sub layer(Refer slide time:52:30 ? 53:16)

we will see how that all fix in but to fit it into the broader picture if you remember when we were discussing  the seven layer OSI protocol starting from the application layer the bottom most layer was the physical layer  so we have finished our discussion on physical layer and just above the physical layer we have the data link layer so  we will look at the different components of data link layer and how they will be used different protocols etc  so that is what we will do  so our this main thing is data link protocols which are the protocols which are used in the data link layer (Refer slide time: 53:16 ? 54:03)

now what are the main tasks of data link layer it transfers data from the network layer of one machine to the network layer of another machine so  actually this is the part of the service it gives to the upper layer do  you remember that above the data link layer we have the network layer  so below the network layer we have the data link layer so the data link layer gives some service to the network layer and this service is the transfer of data from one network layer to another network layer so that is the service it gives it to the network layer and this in its turn uses the physical layer so it converts raw bit streams of the physical layer into groups of bits etc  or frames (Refer slide time: 54:03 ? 55:07)

so this is how we can look at it  so this is one node and this is another node above this   there may be other layers we are not concerned about this upper layers at the moment so this gets  some data to be sent from the network layer and this data link layer sends it to the next data link  layer remember once again that the network layer is concerned with transfer of data etc  across the network that means it may take several such hubs but  data link layer is just concerned with the single hub so this is how we simply the problem the problem of going  multi  hub  so this multi hub part we leave it to the network layer for this single hub so multi hub will naturally constitute the number of such single hubs and data link layer would  handle  the transfer of data from one  from one node to the next (Refer slide time: 55:08 ? 56:34)

so what are the kinds of services types of services that  the data link layer gives one is unacknowledged  connectionless so no attempt  to recover lost frame if some frame is lost due to noise error etc etc  there is no attempt to recover this and because there is no acknowledgement from the other side it is a connectionless system suited for low error rate network or for fault tolerant applications such as voice  what you mean that voice is a fault tolerant application  we mean that even if some of the bits in a voice stream digitized voice stream that is even if some of bits  drop obviously there will be some degradation on the other side if your are do not doing any kind of correction etc but to the human ear it may not be very perceptible  for example I am talking even if there is a momentary glitch you will more or less make out what I am talking about  so that is why in that sense it is more inherently fault tolerant so that is un acknowledgement unacknowledged connectionless service that is one kind of service acknowledged connectionless service this is another kind of service so each frame is acknowledged by the receiver so this is suited for unreliable channel  so require this acknowledgement for the special reliability  (Refer slide time: 56:36 ? 56:49)

 acknowledged connection oriented service ensures that all  frames are received  and each is received exactly once  and these services are accomplished using as I said simplex not usual but half duplex or full duplex channels(Refer slide time: 56:49 ? 57:33)

so this is some examples not very important  sorry so is a reliable message stream it may be connection oriented service or it may connection less service and it may be a reliable message stream or reliable byte stream  so reliable message stream sequence of page reliable byte stream they say remote login so they are coming byte by byte here it is coming page by page unreliable connection like digital voice unreliable datagram so these are but when you come to datagram this becomes connectionless service unreliable datagram acknowledged datagram request reply etc (Refer slide time: 57:32 ? 57:40)

now  let us look at just one thing  that where does this all these data link layer exact exactly where does it exist physical medium we understand it is a cable or it is this  electromagnetic field this free space etc  or fiber so we can see it we can fell it but where does the data link layer resides so to say(Refer slide time: 58:00 ? 58:25)

now frames could be fixed length like ATM  so ATM cells are of fixed length so you know once you have synchronized you know that  they are going to come with  fifty three byte kind of  regularity but frames could be variable length also in which case we use this byte count byte stuffing bit stuffing generic framing procedure Manchester encoding etc  
