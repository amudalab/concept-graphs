however/RB/however /,/, the/DT/the cost/NN/cost of/IN/of this/DT/this compaction/NN/compaction is/VBZ/is time/NN/time and/CC/and it/PRP/it can/MD/can be/VB/be particularly/RB/particularly severe/JJ/severe for/IN/for large/JJ/large hard/JJ/hard disks/NNS/disks that/WDT/that use/NN/use contiguous/VBZ/contiguous allocation/NN/allocation /,/, where/WRB/where compacting/VBG/compacting all/DT/all the/DT/the space/NN/space 11.4/CD/11.4 473/CD/473 may/MD/may take/VB/take hours/NNS/hours and/CC/and may/MD/may be/VB/be necessary/JJ/necessary on/IN/on a/DT/a weekly/JJ/weekly basis/NNP/basis. some/DT/some systems/NNS/systems require/VBP/require that/IN/that this/DT/this function/NN/function be/VB/be done/VBN/done with/IN/with the/DT/the file/NN/file system/NN/system unmounted/NNP/unmounted. during/IN/during this/DT/this normal/JJ/normal system/NN/system operation/NN/operation generally/RB/generally can/MD/can not/RB/not be/VB/be permitted/VBN/permitted /,/, so/RB/so such/JJ/such compaction/NN/compaction is/VBZ/is avoided/VBN/avoided at/IN/at all/DT/all costs/NNS/costs on/IN/on production/NN/production machines/NNP/machines. most/JJS/most modern/JJ/modern systems/NNS/systems that/WDT/that need/VBP/need defragmentation/NN/defragmentation can/MD/can perform/VB/perform it/PRP/it during/IN/during normal/JJ/normal system/NN/system operations/NNS/operations /,/, but/CC/but the/DT/the performance/NN/performance penalty/NN/penalty can/MD/can be/VB/be substantial/JJ/substantial /./. another/DT/another problem/NN/problem with/IN/with contiguous/JJ/contiguous allocation/NN/allocation is/VBZ/is determining/VBG/determining how/WRB/how much/JJ/much space/NN/space is/VBZ/is needed/VBN/needed for/IN/for a/DT/a file/NNP/file. when/WRB/when the/DT/the file/NN/file is/VBZ/is created/VBN/created /,/, the/DT/the total/JJ/total amount/NN/amount of/IN/of space/NN/space it/PRP/it will/MD/will need/VB/need must/MD/must be/VB/be found/VBN/found and/CC/and allocated/NNP/allocated. how/WRB/how does/VBZ/does the/DT/the creator/NN/creator /:/( program/NN/program or/CC/or person/NN/person /:/) know/NN/know the/DT/the size/NN/size of/IN/of the/DT/the file/NN/file to/TO/to be/VB/be created/VBN/created in/IN/in some/DT/some cases/NNS/cases /,/, this/DT/this detennination/NN/detennination may/MD/may be/VB/be fairly/RB/fairly simple/JJ/simple /NN/( copying/VBG/copying an/DT/an existing/VBG/existing file/NN/file /,/, for/IN/for example/NN/example /:/) ;/:/; in/IN/in general/JJ/general /,/, however/RB/however /,/, the/DT/the size/NN/size of/IN/of an/DT/an output/NN/output file/NN/file may/MD/may be/VB/be difficult/JJ/difficult to/TO/to estimate/VB/estimate /./. if/IN/if we/PRP/we allocate/VBP/allocate too/RB/too little/RB/little space/NN/space to/TO/to a/DT/a file/NN/file /,/, we/PRP/we may/MD/may find/VB/find that/IN/that the/DT/the file/NN/file can/MD/can not/RB/not be/VB/be extended/NNP/extended. especially/RB/especially with/IN/with a/DT/a best-fit/JJ/best-fit allocation/NN/allocation strategy/NN/strategy /,/, the/DT/the space/NN/space on/IN/on both/DT/both sides/NNS/sides of/IN/of the/DT/the file/NN/file may/MD/may be/VB/be in/IN/in use/NNP/use. hence/NN/hence /,/, we/PRP/we can/MD/can not/RB/not make/VB/make the/DT/the file/NN/file larger/NN/larger in/IN/in place/NN/place /./. two/CD/two possibilities/NNS/possibilities then/RB/then exist/NNP/exist. first/RB/first /,/, the/DT/the user/NN/user program/NN/program can/MD/can be/VB/be terminated/VBN/terminated /,/, with/IN/with an/DT/an appropriate/JJ/appropriate error/NN/error message/NNP/message. the/DT/the user/NN/user must/MD/must then/RB/then allocate/VB/allocate more/JJR/more space/NN/space and/CC/and run/VBP/run the/DT/the program/NN/program again/NNP/again. these/DT/these repeated/JJ/repeated runs/NNS/runs may/MD/may be/VB/be costly/NNP/costly. to/TO/to prevent/VB/prevent them/PRP/them /,/, the/DT/the user/NN/user will/MD/will normally/RB/normally overestimate/VB/overestimate the/DT/the amount/NN/amount of/IN/of space/NN/space needed/VBN/needed /,/, resulting/VBG/resulting in/IN/in considerable/JJ/considerable wasted/VBN/wasted space/NNP/space. the/DT/the other/JJ/other possibility/NN/possibility is/VBZ/is to/TO/to find/VB/find a/DT/a larger/JJR/larger hole/NN/hole /,/, copy/NN/copy the/DT/the contents/NNS/contents of/IN/of the/DT/the file/NN/file to/TO/to the/DT/the new/JJ/new space/NN/space /,/, and/CC/and release/VB/release the/DT/the previous/JJ/previous space/NNP/space. this/DT/this series/NN/series of/IN/of actions/NNS/actions can/MD/can be/VB/be repeated/VBN/repeated as/IN/as long/RB/long as/IN/as space/NN/space exists/NNS/exists /,/, although/IN/although it/PRP/it can/MD/can be/VB/be time/NN/time consuming/NNP/consuming. however/RB/however /,/, the/DT/the user/NN/user need/VBP/need never/RB/never be/VB/be informed/VBN/informed explicitly/RB/explicitly about/IN/about what/WP/what is/VBZ/is happening/VBG/happening ;/:/; the/DT/the system/NN/system continues/VBZ/continues despite/IN/despite the/DT/the problem/NN/problem /,/, although/IN/although more/JJR/more and/CC/and more/JJR/more slowly/RB/slowly /./. even/RB/even if/IN/if the/DT/the total/JJ/total amount/NN/amount of/IN/of space/NN/space needed/VBN/needed for/IN/for a/DT/a file/NN/file is/VBZ/is known/VBN/known in/IN/in advance/NN/advance /,/, preallocation/NN/preallocation may/MD/may be/VB/be inefficient/NNP/inefficient. a/DT/a file/NN/file that/WDT/that will/MD/will grow/VB/grow slowly/RB/slowly over/IN/over a/DT/a long/JJ/long period/NN/period /:/( months/NNS/months or/CC/or years/NNS/years /:/) must/MD/must be/VB/be allocated/VBN/allocated enough/JJ/enough space/NN/space for/IN/for its/PRP$/its final/JJ/final size/NN/size /,/, even/RB/even though/IN/though much/RB/much of/IN/of that/DT/that space/NN/space will/MD/will be/VB/be unused/VBN/unused for/IN/for a/DT/a long/JJ/long time/NNP/time. the/DT/the file/NN/file therefore/NN/therefore has/VBZ/has a/DT/a large/JJ/large amount/NN/amount of/IN/of internal/JJ/internal fragmentation/NN/fragmentation /./. to/TO/to minimize/VB/minimize these/DT/these drawbacks/NNS/drawbacks /,/, some/DT/some operating/NN/operating systems/NNS/systems use/VBP/use a/DT/a modified/VBN/modified contiguous-allocation/NN/contiguous-allocation scheme/NNP/scheme. here/RB/here /,/, a/DT/a contiguous/JJ/contiguous chunk/NN/chunk of/IN/of space/NN/space is/VBZ/is allocated/VBN/allocated initially/RB/initially ;/:/; then/RB/then /,/, if/IN/if that/DT/that amount/NN/amount proves/VBZ/proves not/RB/not to/TO/to be/VB/be large/JJ/large enough/RB/enough /,/, another/DT/another chunk/NN/chunk of/IN/of contiguous/JJ/contiguous space/NN/space /,/, known/VBN/known as/IN/as an/DT/an is/VBZ/is added/NNP/added. the/DT/the location/NN/location of/IN/of a/DT/a file/NN/file 's/POS/'s blocks/NNS/blocks is/VBZ/is then/RB/then recorded/VBN/recorded as/IN/as a/DT/a location/NN/location and/CC/and a/DT/a block/NN/block count/NN/count /,/, plus/CC/plus a/DT/a link/NN/link to/TO/to the/DT/the first/JJ/first block/NN/block of/IN/of the/DT/the next/JJ/next extent/NNP/extent. on/IN/on some/DT/some systems/NNS/systems /,/, the/DT/the owner/NN/owner of/IN/of the/DT/the file/NN/file can/MD/can set/VB/set the/DT/the extent/NN/extent size/NN/size /,/, but/CC/but this/DT/this setting/NN/setting results/NNS/results in/IN/in inefficiencies/NNS/inefficiencies if/IN/if the/DT/the owner/NN/owner is/VBZ/is incorrect/NNP/incorrect. internal/JJ/internal fragm.entation/NN/fragm.entation can/MD/can still/RB/still be/VB/be a/DT/a problem/NN/problem if/IN/if the/DT/the extents/NNS/extents are/VBP/are too/RB/too large/JJ/large /,/, and/CC/and external/JJ/external fragmentation/NN/fragmentation can/MD/can become/VB/become a/DT/a problem/NN/problem as/IN/as extents/NNS/extents of/IN/of varying/VBG/varying sizes/NNS/sizes are/VBP/are allocated/VBN/allocated and/CC/and deallocated/NNP/deallocated. the/DT/the commercial/JJ/commercial veritas/NNS/veritas file/IN/file system/NN/system uses/NNS/uses extents/NNS/extents to/TO/to optimize/VB/optimize performance/NNP/performance. it/PRP/it is/VBZ/is a/DT/a high-performance/NN/high-performance replacement/NN/replacement for/IN/for the/DT/the standard/JJ/standard unix/NN/unix ufs/NNS/ufs /./. 11.4.2/CD/11.4.2 linked/VBD/linked allocation/NN/allocation solves/NNS/solves all/DT/all problems/NNS/problems of/IN/of contiguous/JJ/contiguous allocation/NNP/allocation. with/IN/with linked/JJ/linked allocation/NN/allocation /,/, each/DT/each file/NN/file is/VBZ/is a/DT/a linked/VBN/linked list/NN/list of/IN/of disk/NN/disk blocks/NNS/blocks ;/:/; the/DT/the disk/NN/disk blocks/NNS/blocks may/MD/may be/VB/be scattered/VBN/scattered anywhere/RB/anywhere on/IN/on the/DT/the disk/NNP/disk. the/DT/the directory/NN/directory contains/VBZ/contains a/DT/a pointer/NN/pointer to/TO/to the/DT/the first/JJ/first and/CC/and last/JJ/last blocks/NNS/blocks of/IN/of the/DT/the file/NNP/file. for/IN/for example/NN/example /,/, a/DT/a file/NN/file of/IN/of five/CD/five blocks/NNS/blocks might/MD/might start/VB/start at/IN/at block/NN/block 9/CD/9 and/CC/and continue/VB/continue at/IN/at block/NN/block 16/CD/16 /,/, then/RB/then block/VB/block 1/CD/1 /,/, then/RB/then block/VB/block 10/CD/10 /,/, and/CC/and finally/RB/finally block/VB/block 25/CD/25 /CD/( figure/NN/figure 11.6/CD/11.6 /CD/) /./. each/DT/each block/NN/block contains/VBZ/contains a/DT/a pointer/NN/pointer to/TO/to the/DT/the next/JJ/next block/NNP/block. these/DT/these pointers/NNS/pointers 474/CD/474 chapter/NN/chapter 11/CD/11 directory/NN/directory 12/CD/12 16/CD/16 170180190/CD/170180190 20021/CD/20021 ~/CD/~ _20_/NNP/_20_. ~/NNP/~ 23_0-4/CD/23_0-4------------ ~/CD/~ 2402sc.51/CD/2402sc.51 /:/: 260270/CD/260270 280290300310/CD/280290300310 figure/NN/figure i/PRP/i 1.6/CD/1.6 linked/VBD/linked allocation/NN/allocation of/IN/of disk/NN/disk space/NN/space /./. are/VBP/are not/RB/not made/VBN/made available/JJ/available to/TO/to the/DT/the user/NNP/user. thus/RB/thus /,/, if/IN/if each/DT/each block/NN/block is/VBZ/is 512/CD/512 bytes/NNS/bytes in/IN/in size/NN/size /,/, and/CC/and a/DT/a disk/NN/disk address/NN/address /:/( the/DT/the poileter/NN/poileter /:/) requires/NNS/requires 4/CD/4 bytes/NNS/bytes /,/, then/RB/then the/DT/the user/NN/user sees/VBZ/sees blocks/NNS/blocks of/IN/of 508/CD/508 bytes/NNS/bytes /./. to/TO/to create/VB/create a/DT/a new/JJ/new file/NN/file /,/, we/PRP/we simply/RB/simply create/VBP/create a/DT/a new/JJ/new entry/NN/entry ile/NN/ile the/DT/the directory/NNP/directory. with/IN/with linked/JJ/linked allocation/NN/allocation /,/, each/DT/each directory/NN/directory entry/NN/entry has/VBZ/has a/DT/a pointer/NN/pointer to/TO/to the/DT/the first/JJ/first disk/NN/disk block/NN/block of/IN/of the/DT/the file/NNP/file. this/DT/this pointer/NN/pointer is/VBZ/is initialized/VBN/initialized to/TO/to nil/VB/nil /:/( the/DT/the end-of-list/JJ/end-of-list pointer/NN/pointer value/NN/value /:/) to/TO/to signify/VB/signify an/DT/an empty/NN/empty file/NNP/file. the/DT/the size/NN/size field/NN/field is/VBZ/is also/RB/also set/VBN/set to/TO/to 0/CD/0. a/DT/a write/JJ/write to/TO/to the/DT/the file/NN/file causes/NNS/causes the/DT/the free-space/NN/free-space management/NN/management system/NN/system to/TO/to filed/VBN/filed a/DT/a free/JJ/free block/NN/block /,/, and/CC/and this/DT/this new/JJ/new block/NN/block is/VBZ/is written/VBN/written to/TO/to and/CC/and is/VBZ/is linked/VBN/linked to/TO/to the/DT/the end/NN/end of/IN/of the/DT/the file/NNP/file. to/TO/to read/VB/read a/DT/a file/NN/file /,/, we/PRP/we simply/RB/simply read/VB/read blocks/NNS/blocks by/IN/by following/VBG/following the/DT/the pointers/NNS/pointers from/IN/from block/NN/block to/TO/to block/NNP/block. there/RB/there is/VBZ/is no/DT/no external/JJ/external fragmentation/NN/fragmentation with/IN/with linked/JJ/linked allocation/NN/allocation /,/, and/CC/and any/DT/any free/JJ/free block/NN/block on/IN/on the/DT/the free-space/NN/free-space list/NN/list can/MD/can be/VB/be used/VBN/used to/TO/to satisfy/VB/satisfy a/DT/a request/NNP/request. the/DT/the size/NN/size of/IN/of a/DT/a file/NN/file need/NN/need not/RB/not be/VB/be declared/VBN/declared when/WRB/when that/IN/that file/JJ/file is/VBZ/is created/VBN/created /./. a/DT/a file/NN/file can/MD/can continue/VB/continue to/TO/to grow/VB/grow as/IN/as long/RB/long as/IN/as free/JJ/free blocks/NNS/blocks are/VBP/are available/NNP/available. consequently/RB/consequently /,/, it/PRP/it is/VBZ/is never/RB/never necessary/JJ/necessary to/TO/to compact/VB/compact disk/NN/disk space/NN/space /./. linked/VBN/linked allocation/NN/allocation does/VBZ/does have/VB/have disadvantages/NNS/disadvantages /,/, however/NNP/however. the/DT/the major/JJ/major problem/NN/problem is/VBZ/is that/IN/that it/PRP/it can/MD/can be/VB/be used/VBN/used effectively/RB/effectively only/RB/only for/IN/for sequential-access/JJ/sequential-access files/NNP/files. to/TO/to filed/VBD/filed the/DT/the ith/NN/ith block/NN/block of/IN/of a/DT/a file/NN/file /,/, we/PRP/we must/MD/must start/VB/start at/IN/at the/DT/the begirueing/NN/begirueing of/IN/of that/DT/that file/NN/file and/CC/and follow/NN/follow the/DT/the pointers/NNS/pointers rnetil/IN/rnetil we/PRP/we get/VBP/get to/TO/to the/DT/the ith/NN/ith block/NNP/block. each/DT/each access/NN/access to/TO/to a/DT/a pointer/NN/pointer requires/VBZ/requires a/DT/a disk/NN/disk read/NN/read /,/, and/CC/and some/DT/some require/NN/require a/DT/a disk/NN/disk seek/NNP/seek. consequently/RB/consequently /,/, it/PRP/it is/VBZ/is inefficient/JJ/inefficient to/TO/to support/VB/support a/DT/a direct-access/JJ/direct-access capability/NN/capability for/IN/for linked-allocation/NN/linked-allocation files/NNS/files /./. another/DT/another disadvantage/NN/disadvantage is/VBZ/is the/DT/the space/NN/space required/VBN/required for/IN/for the/DT/the pointers/NNP/pointers. if/IN/if a/DT/a pointer/NN/pointer requires/VBZ/requires 4/CD/4 bytes/NNS/bytes out/IN/out of/IN/of a/DT/a 512-byte/JJ/512-byte block/NN/block /,/, then/RB/then 0.78/CD/0.78 percent/NN/percent of/IN/of the/DT/the disk/NN/disk is/VBZ/is being/VBG/being used/VBN/used for/IN/for pointers/NNS/pointers /,/, rather/RB/rather than/IN/than for/IN/for information/NNP/information. each/DT/each file/NN/file requires/VBZ/requires slightly/RB/slightly more/JJR/more space/NN/space than/IN/than it/PRP/it would/MD/would otherwise/VB/otherwise /./. the/DT/the usual/JJ/usual solution/NN/solution to/TO/to this/DT/this problem/NN/problem is/VBZ/is to/TO/to collect/VB/collect blocks/NNS/blocks into/IN/into multiples/NNS/multiples /,/, called/VBN/called and/CC/and to/TO/to allocate/VB/allocate clusters/NNS/clusters rather/RB/rather than/IN/than blocks/NNP/blocks. for/IN/for instance/NN/instance /,/, the/DT/the file/NN/file system/NN/system may/MD/may define/VB/define a/DT/a cluster/NN/cluster as/IN/as four/CD/four blocks/NNS/blocks and/CC/and operate/VB/operate on/IN/on the/DT/the disk/NN/disk only/RB/only in/IN/in cluster/NN/cluster units/NNP/units. pointers/NNS/pointers then/RB/then use/VB/use a/DT/a much/RB/much smaller/JJR/smaller percentage/NN/percentage of/IN/of the/DT/the file/NN/file 's/POS/'s disk/NN/disk space/NN/space /./. this/DT/this method/NN/method allows/VBZ/allows the/DT/the logical-to-physical/JJ/logical-to-physical block/NN/block mapping/VBG/mapping to/TO/to remain/VB/remain simple/JJ/simple 11.4/CD/11.4 475/CD/475 but/CC/but improves/VBZ/improves disk/NN/disk throughput/NN/throughput /:/( because/IN/because fewer/JJR/fewer disk-head/JJ/disk-head seeks/NNS/seeks are/VBP/are required/VBN/required /-NONE-/) and/CC/and decreases/NNS/decreases the/DT/the space/NN/space needed/VBD/needed for/IN/for block/NN/block allocation/NN/allocation and/CC/and free-list/JJ/free-list management/NN/management /./. the/DT/the cost/NN/cost of/IN/of this/DT/this approach/NN/approach is/VBZ/is an/DT/an increase/NN/increase in/IN/in internal/JJ/internal fragmentation/NN/fragmentation /,/, because/IN/because more/JJR/more space/NN/space is/VBZ/is wasted/VBN/wasted when/WRB/when a/DT/a cluster/NN/cluster is/VBZ/is partially/RB/partially full/JJ/full than/IN/than when/WRB/when a/DT/a block/NN/block is/VBZ/is partially/RB/partially full/NNP/full. clusters/NNS/clusters can/MD/can be/VB/be used/VBN/used to/TO/to improve/VB/improve the/DT/the disk-access/JJ/disk-access time/NN/time for/IN/for many/JJ/many other/JJ/other algorithms/NNS/algorithms as/IN/as welt/NN/welt so/IN/so they/PRP/they are/VBP/are used/VBN/used in/IN/in most/JJS/most file/JJ/file systems/NNS/systems /./. yet/RB/yet another/DT/another problem/NN/problem of/IN/of linked/VBN/linked allocation/NN/allocation is/VBZ/is reliability/NNP/reliability. recall/NN/recall that/WDT/that the/DT/the files/NNS/files are/VBP/are linked/VBN/linked together/RB/together by/IN/by pointers/NNS/pointers scattered/VBN/scattered all/DT/all over/IN/over the/DT/the disk/NN/disk /,/, and/CC/and consider/NN/consider what/WP/what would/MD/would happen/VB/happen if/IN/if a/DT/a pointer/NN/pointer were/VBD/were lost/VBN/lost or/CC/or damaged/NNP/damaged. a/DT/a bug/NN/bug in/IN/in the/DT/the operating-system/JJ/operating-system software/NN/software or/CC/or a/DT/a disk/NN/disk hardware/NN/hardware failure/NN/failure might/MD/might result/VB/result in/IN/in picking/NN/picking up/IN/up the/DT/the wrong/JJ/wrong pointer/NNP/pointer. this/DT/this error/NN/error could/MD/could in/IN/in turn/NN/turn result/NN/result in/IN/in linking/NN/linking into/IN/into the/DT/the free-space/JJ/free-space list/NN/list or/CC/or into/IN/into another/DT/another file/NNP/file. one/CD/one partial/JJ/partial solution/NN/solution is/VBZ/is to/TO/to use/VB/use doubly/RB/doubly linked/VBN/linked lists/NNS/lists /,/, and/CC/and another/DT/another is/VBZ/is to/TO/to store/VB/store the/DT/the file/NN/file name/NN/name and/CC/and relative/JJ/relative block/NN/block number/NN/number in/IN/in each/DT/each block/NN/block ;/:/; however/RB/however /,/, these/DT/these schemes/NNS/schemes require/VBP/require even/RB/even more/RBR/more overhead/JJ/overhead for/IN/for each/DT/each file/NN/file /./. an/DT/an important/JJ/important variation/NN/variation on/IN/on linked/VBN/linked allocation/NN/allocation is/VBZ/is the/DT/the use/NN/use of/IN/of a/DT/a /NN/( fat/NN/fat !/./! /./. this/DT/this simple/NN/simple but/CC/but efficient/NN/efficient method/NN/method of/IN/of disk-space/NN/disk-space allocation/NN/allocation is/VBZ/is used/VBN/used by/IN/by the/DT/the ms-dos/NNP/ms-dos and/CC/and os/2/-NONE-/os/2 operating/VBG/operating systems/NNP/systems. a/DT/a section/NN/section of/IN/of disk/NN/disk at/IN/at the/DT/the beginning/NN/beginning of/IN/of each/DT/each volume/NN/volume is/VBZ/is set/VBN/set aside/NN/aside to/TO/to contain/VB/contain the/DT/the table/NNP/table. the/DT/the table/NN/table has/VBZ/has one/CD/one entry/NN/entry for/IN/for each/DT/each disk/NN/disk block/NN/block and/CC/and is/VBZ/is indexed/VBN/indexed by/IN/by block/NN/block number/NNP/number. the/DT/the fat/JJ/fat is/VBZ/is used/VBN/used in/IN/in much/JJ/much the/DT/the same/JJ/same way/NN/way as/IN/as a/DT/a linked/VBN/linked list/NNP/list. the/DT/the directory/NN/directory entry/NN/entry contains/VBZ/contains the/DT/the block/NN/block number/NN/number of/IN/of the/DT/the first/JJ/first block/NN/block of/IN/of the/DT/the file/NNP/file. the/DT/the table/NN/table entry/NN/entry indexed/VBD/indexed by/IN/by that/DT/that block/NN/block number/NN/number contains/VBZ/contains the/DT/the block/NN/block number/NN/number of/IN/of the/DT/the next/JJ/next block/NN/block in/IN/in the/DT/the file/NNP/file. this/DT/this chain/NN/chain continues/VBZ/continues until/IN/until it/PRP/it reaches/VBZ/reaches the/DT/the last/JJ/last block/NN/block /,/, which/WDT/which has/VBZ/has a/DT/a special/JJ/special end-of-file/JJ/end-of-file value/NN/value as/IN/as the/DT/the table/NN/table entry/NN/entry /./. an/DT/an unused/VBN/unused block/NN/block is/VBZ/is indicated/VBN/indicated by/IN/by a/DT/a table/JJ/table value/NN/value of/IN/of 0/CD/0. allocating/VBG/allocating a/DT/a new/JJ/new block/NN/block to/TO/to a/DT/a file/NN/file is/VBZ/is a/DT/a simple/JJ/simple matter/NN/matter of/IN/of finding/NN/finding the/DT/the first/JJ/first 0-valued/CD/0-valued table/NN/table entry/NN/entry and/CC/and replacing/VBG/replacing the/DT/the previous/JJ/previous end-of-file/JJ/end-of-file value/NN/value with/IN/with the/DT/the address/NN/address of/IN/of the/DT/the new/JJ/new block/NNP/block. the/DT/the 0/-NONE-/0 is/VBZ/is then/RB/then replaced/VBN/replaced with/IN/with the/DT/the end-of-file/JJ/end-of-file value/NNP/value. an/DT/an illustrative/JJ/illustrative example/NN/example is/VBZ/is the/DT/the fat/JJ/fat structure/NN/structure shown/NN/shown in/IN/in figure/NN/figure 11.7/CD/11.7 for/IN/for a/DT/a file/NN/file consisting/VBG/consisting of/IN/of disk/NN/disk blocks/NNS/blocks 217/CD/217 /,/, 618/CD/618 /,/, and/CC/and 339/CD/339 /./. directory/NN/directory entry/NN/entry name/NN/name start/NN/start block/NN/block 0/-NONE-/0 217/CD/217 618/CD/618 339/CD/339 /:/- 618/CD/618 339/CD/339 number/NN/number of/IN/of disk/NN/disk blocks/NNS/blocks -1/-NONE-/-1 fat/JJ/fat figure/NN/figure 11.7/CD/11.7 file-allocation/NN/file-allocation table/JJ/table /./. 476/CD/476 chapter/NN/chapter 11/CD/11 the/DT/the fat/JJ/fat allocation/NN/allocation scheme/NN/scheme can/MD/can result/VB/result in/IN/in a/DT/a significant/JJ/significant number/NN/number of/IN/of disk/NN/disk head/NN/head seeks/VBZ/seeks /,/, unless/IN/unless the/DT/the fat/JJ/fat is/VBZ/is cached/NNP/cached. the/DT/the disk/NN/disk head/NN/head must/MD/must move/VB/move to/TO/to the/DT/the start/NN/start of/IN/of the/DT/the volume/NN/volume to/TO/to read/VB/read the/DT/the fat/JJ/fat and/CC/and find/NN/find the/DT/the location/NN/location of/IN/of the/DT/the block/NN/block in/IN/in question/NN/question /,/, then/RB/then move/VB/move to/TO/to the/DT/the location/NN/location of/IN/of the/DT/the block/NN/block itself/NNP/itself. in/IN/in the/DT/the worst/JJS/worst case/NN/case /,/, both/DT/both moves/NNS/moves occur/VBP/occur for/IN/for each/DT/each of/IN/of the/DT/the blocks/NNP/blocks. a/DT/a benefit/NN/benefit is/VBZ/is that/IN/that random-access/JJ/random-access time/NN/time is/VBZ/is improved/VBN/improved /,/, because/IN/because the/DT/the disk/NN/disk head/NN/head can/MD/can find/VB/find the/DT/the location/NN/location of/IN/of any/DT/any block/NN/block by/IN/by reading/NN/reading the/DT/the information/NN/information in/IN/in the/DT/the fat/JJ/fat /./. 11.4.3/CD/11.4.3 indexed/VBD/indexed allocation/NN/allocation linked/VBN/linked allocation/NN/allocation solves/NNS/solves the/DT/the external-fragmentation/NN/external-fragmentation and/CC/and size-declaration/NN/size-declaration problems/NNS/problems of/IN/of contiguous/JJ/contiguous allocation/NNP/allocation. however/RB/however /,/, in/IN/in the/DT/the absence/NN/absence of/IN/of a/DT/a fat/JJ/fat /,/, linked/VBN/linked allocation/NN/allocation can/MD/can not/RB/not support/VB/support efficient/JJ/efficient direct/JJ/direct access/NN/access /,/, since/IN/since the/DT/the pointers/NNS/pointers to/TO/to the/DT/the blocks/NNS/blocks are/VBP/are scattered/VBN/scattered with/IN/with the/DT/the blocks/NNS/blocks themselves/PRP/themselves all/DT/all over/IN/over the/DT/the disk/NN/disk and/CC/and must/MD/must be/VB/be retrieved/VBN/retrieved in/IN/in order/NNP/order. solves/NNS/solves this/DT/this problem/NN/problem by/IN/by bringil1.g/JJ/bringil1.g all/DT/all the/DT/the pointers/NNS/pointers together/RB/together into/IN/into one/CD/one location/NN/location /:/: the/DT/the blo/NN/blo ;/:/; ct/NN/ct /:/: /./. each/DT/each file/NN/file has/VBZ/has its/PRP$/its own/JJ/own index/NN/index block/NN/block /,/, which/WDT/which is/VBZ/is an/DT/an array/NN/array of/IN/of disk-block/JJ/disk-block addresses/NNS/addresses /./. the/DT/the i/PRP/i th/VBP/th entry/NN/entry in/IN/in the/DT/the index/NN/index block/NN/block points/NNS/points to/TO/to the/DT/the i/PRP/i 111/CD/111 block/NN/block of/IN/of the/DT/the file/NNP/file. the/DT/the directory/NN/directory contains/VBZ/contains the/DT/the address/NN/address of/IN/of the/DT/the index/NN/index block/NN/block /:/( figure/NN/figure 11.8/CD/11.8 /CD/) /./. to/TO/to find/VB/find and/CC/and read/VB/read the/DT/the i/PRP/i 1jz/CD/1jz block/NN/block /,/, we/PRP/we use/VBP/use the/DT/the pointer/NN/pointer in/IN/in the/DT/the i/NN/i 1lz/CD/1lz index-block/JJ/index-block entry/NNP/entry. this/DT/this scheme/NN/scheme is/VBZ/is similar/JJ/similar to/TO/to the/DT/the paging/NN/paging scheme/NN/scheme described/VBD/described il1/NNP/il1. section/NN/section 8.4/CD/8.4 /./. when/WRB/when the/DT/the file/NN/file is/VBZ/is created/VBN/created /,/, all/DT/all pointers/NNS/pointers in/IN/in the/DT/the index/NN/index block/NN/block are/VBP/are set/VBN/set to/TO/to nil/NNP/nil. when/WRB/when the/DT/the ith/NN/ith block/NN/block is/VBZ/is first/JJ/first written/VBN/written /,/, a/DT/a block/NN/block is/VBZ/is obtained/VBN/obtained from/IN/from the/DT/the free-space/NN/free-space manage1/NNP/manage1 ~/NNP/~ and/CC/and its/PRP$/its address/NN/address is/VBZ/is put/VBN/put in/RP/in the/DT/the ith/NN/ith index-block/NN/index-block entry/NN/entry /./. indexed/VBN/indexed allocation/NN/allocation supports/NNS/supports direct/JJ/direct access/NN/access /,/, without/IN/without suffering/NN/suffering from/IN/from external/JJ/external fragmentation/NN/fragmentation /,/, because/IN/because any/DT/any free/JJ/free block/NN/block on/IN/on the/DT/the disk/NN/disk can/MD/can satisfy/VB/satisfy a/DT/a request/NN/request for/IN/for more/JJR/more space/NNP/space. indexed/VBD/indexed allocation/NN/allocation does/VBZ/does suffer/NN/suffer from/IN/from wasted/VBN/wasted space/NN/space /,/, however/NNP/however. the/DT/the pointer/NN/pointer overhead/NN/overhead of/IN/of the/DT/the index/NN/index block/NN/block is/VBZ/is generally/RB/generally greater/JJR/greater than/IN/than the/DT/the pointer/NN/pointer overhead/NN/overhead of/IN/of linked/VBN/linked allocation/NNP/allocation. consider/NN/consider a/DT/a common/JJ/common case/NN/case in/IN/in which/WDT/which we/PRP/we have/VBP/have a/DT/a file/NN/file of/IN/of only/RB/only one/CD/one or/CC/or two/CD/two blocks/NNP/blocks. with/IN/with linked/JJ/linked allocation/NN/allocation /,/, we/PRP/we lose/VBP/lose the/DT/the space/NN/space of/IN/of only/RB/only one/CD/one pointer/NN/pointer per/IN/per directory/NN/directory file/NN/file jeep/NN/jeep 16/CD/16 figure/NN/figure 11.8/CD/11.8 indexed/VBN/indexed allocation/NN/allocation of/IN/of disk/NN/disk space/NN/space /./. 11.4/CD/11.4 allocation/NN/allocation methods/NNS/methods 477/CD/477 block/NNP/block. with/IN/with indexed/VBN/indexed allocation/NN/allocation /,/, an/DT/an entire/JJ/entire index/NN/index block/NN/block must/MD/must be/VB/be allocated/VBN/allocated /,/, even/RB/even if/IN/if only/RB/only one/CD/one or/CC/or two/CD/two pointers/NNS/pointers will/MD/will be/VB/be non-nil/JJ/non-nil /./. this/DT/this point/NN/point raises/VBZ/raises the/DT/the question/NN/question of/IN/of how/WRB/how large/JJ/large the/DT/the index/NN/index block/NN/block should/MD/should be/NNP/be. every/DT/every file/NN/file must/MD/must have/VB/have an/DT/an index/NN/index block/NN/block /,/, so/RB/so we/PRP/we want/VBP/want the/DT/the index/NN/index block/NN/block to/TO/to be/VB/be as/RB/as small/JJ/small as/IN/as possible/NNP/possible. if/IN/if the/DT/the index/NN/index block/NN/block is/VBZ/is too/RB/too small/JJ/small /,/, however/RB/however /,/, it/PRP/it will/MD/will not/RB/not be/VB/be able/JJ/able to/TO/to hold/VB/hold enough/JJ/enough pointers/NNS/pointers for/IN/for a/DT/a large/JJ/large file/NN/file /,/, and/CC/and a/DT/a mechanism/NN/mechanism will/MD/will have/VB/have to/TO/to be/VB/be available/JJ/available to/TO/to deal/NN/deal with/IN/with this/DT/this issue/NNP/issue. mechanisms/VBZ/mechanisms for/IN/for this/DT/this purpose/NN/purpose include/VBP/include the/DT/the following/VBG/following /:/: c/NN/c linked/VBD/linked scheme/NNP/scheme. an/DT/an index/NN/index block/NN/block is/VBZ/is normally/RB/normally one/CD/one disk/NN/disk block/NNP/block. thus/RB/thus /,/, it/PRP/it can/MD/can be/VB/be read/VBN/read and/CC/and written/VBN/written directly/RB/directly by/IN/by itself/NNP/itself. to/TO/to allow/VB/allow for/IN/for large/JJ/large files/NNS/files /,/, we/PRP/we can/MD/can link/VB/link together/RP/together several/JJ/several index/NN/index blocks/NNP/blocks. for/IN/for example/NN/example /,/, an/DT/an index/NN/index block/NN/block might/MD/might contain/VB/contain a/DT/a small/JJ/small header/NN/header giving/VBG/giving the/DT/the name/NN/name of/IN/of the/DT/the file/NN/file and/CC/and a/DT/a set/NN/set of/IN/of the/DT/the first/JJ/first 100/CD/100 disk-block/NN/disk-block addresses/NNP/addresses. the/DT/the next/JJ/next address/NN/address /:/( the/DT/the last/JJ/last word/NN/word in/IN/in the/DT/the index/NN/index block/NN/block /:/) is/VBZ/is nil/NN/nil /:/( for/IN/for a/DT/a small/JJ/small file/NN/file /:/) or/CC/or is/VBZ/is a/DT/a pointer/NN/pointer to/TO/to another/DT/another index/NN/index block/NN/block /:/( for/IN/for a/DT/a large/JJ/large file/NN/file /:/) /./. multilevel/NN/multilevel index/NNP/index. a/DT/a variant/NN/variant of/IN/of linked/VBN/linked representation/NN/representation uses/NNS/uses a/DT/a first-level/JJ/first-level index/NN/index block/NN/block to/TO/to point/NN/point to/TO/to a/DT/a set/NN/set of/IN/of second-level/JJ/second-level index/NN/index blocks/NNS/blocks /,/, which/WDT/which in/IN/in tum/NN/tum point/NN/point to/TO/to the/DT/the file/NN/file blocks/NNP/blocks. to/TO/to access/NN/access a/DT/a block/NN/block /,/, the/DT/the operating/NN/operating system/NN/system uses/NNS/uses the/DT/the first-level/JJ/first-level index/NN/index to/TO/to find/VB/find a/DT/a second-level/JJ/second-level index/NN/index block/NN/block and/CC/and then/RB/then uses/VBZ/uses that/IN/that block/NN/block to/TO/to find/VB/find the/DT/the desired/VBN/desired data/NNS/data block/NNP/block. this/DT/this approach/NN/approach could/MD/could be/VB/be continued/VBN/continued to/TO/to a/DT/a third/JJ/third or/CC/or fourth/JJ/fourth level/NN/level /,/, depending/VBG/depending on/IN/on the/DT/the desired/VBN/desired maximum/NN/maximum file/NN/file size/NNP/size. with/IN/with 4,096-byte/JJ/4,096-byte blocks/NNS/blocks /,/, we/PRP/we could/MD/could store/VB/store 1,024/CD/1,024 four-byte/JJ/four-byte pointers/NNS/pointers in/IN/in an/DT/an index/NN/index block/NNP/block. two/CD/two levels/NNS/levels of/IN/of indexes/NNS/indexes allow/VBP/allow 1,048,576/CD/1,048,576 data/NNS/data blocks/NNS/blocks and/CC/and a/DT/a file/NN/file size/NN/size of/IN/of up/IN/up to/TO/to 4gb/CD/4gb /./. combined/VBN/combined scheme/NNP/scheme. another/DT/another alternative/NN/alternative /,/, used/VBN/used in/IN/in the/DT/the ufs/NNS/ufs /,/, is/VBZ/is to/TO/to keep/VB/keep the/DT/the first/JJ/first /,/, say/VBP/say /,/, 15/CD/15 pointers/NNS/pointers of/IN/of the/DT/the index/NN/index block/NN/block in/IN/in the/DT/the file/NN/file 's/POS/'s inode/NNP/inode. the/DT/the first/JJ/first 12/CD/12 of/IN/of these/DT/these pointers/NNS/pointers point/VBP/point to/TO/to direct/VB/direct blocks/NNS/blocks ;/:/; that/DT/that is/VBZ/is /,/, they/PRP/they contain/VBP/contain addresses/NNS/addresses of/IN/of blocks/NNS/blocks that/WDT/that contain/NN/contain data/NNS/data of/IN/of the/DT/the file/NNP/file. thus/RB/thus /,/, the/DT/the data/NNS/data for/IN/for small/JJ/small files/NNS/files /:/( of/IN/of no/DT/no more/RBR/more than/IN/than 12/CD/12 blocks/NNS/blocks /:/) do/VBP/do not/RB/not need/VB/need a/DT/a separate/JJ/separate index/NN/index block/NNP/block. if/IN/if the/DT/the block/NN/block size/NN/size is/VBZ/is 4/CD/4 kb/NN/kb /,/, then/RB/then up/RB/up to/TO/to 48/CD/48 kb/NN/kb of/IN/of data/NNS/data can/MD/can be/VB/be accessed/VBN/accessed directly/-NONE-/directly. the/DT/the next/JJ/next three/CD/three pointers/NNS/pointers point/NN/point to/TO/to indirect/VB/indirect blocks/NNP/blocks. the/DT/the first/JJ/first points/NNS/points to/TO/to a/DT/a single/JJ/single indirect/NN/indirect block/NN/block /,/, which/WDT/which is/VBZ/is an/DT/an index/NN/index block/NN/block containing/VBG/containing not/RB/not data/NNS/data but/CC/but the/DT/the addresses/NNS/addresses of/IN/of blocks/NNS/blocks that/WDT/that do/VBP/do contain/VBP/contain data/NNP/data. the/DT/the second/JJ/second points/NNS/points to/TO/to a/DT/a double/JJ/double indirect/NN/indirect block/NN/block /,/, which/WDT/which contains/VBZ/contains the/DT/the address/NN/address of/IN/of a/DT/a block/NN/block that/WDT/that contains/VBZ/contains the/DT/the addresses/NNS/addresses of/IN/of blocks/NNS/blocks that/WDT/that contain/NN/contain pointers/NNS/pointers to/TO/to the/DT/the actual/JJ/actual data/NNS/data blocks/NNP/blocks. the/DT/the last/JJ/last pointer/NN/pointer contains/VBZ/contains the/DT/the address/NN/address of/IN/of a/DT/a triple/NN/triple indirect/NN/indirect block/NNP/block. under/IN/under this/DT/this method/NN/method /,/, the/DT/the number/NN/number of/IN/of blocks/NNS/blocks that/WDT/that can/MD/can be/VB/be allocated/VBN/allocated to/TO/to a/DT/a file/NN/file exceeds/VBZ/exceeds the/DT/the amount/NN/amount of/IN/of space/NN/space addressable/JJ/addressable by/IN/by the/DT/the four-byte/JJ/four-byte file/NN/file pointers/NNS/pointers used/VBN/used by/IN/by many/JJ/many operating/VBG/operating systems/NNP/systems. a/DT/a 32-bit/JJ/32-bit file/NN/file pointer/NN/pointer reaches/NNS/reaches only/RB/only 232/CD/232 bytes/NNS/bytes /,/, or/CC/or 4gb/CD/4gb. many/JJ/many unix/CD/unix implementations/NNS/implementations /,/, including/VBG/including solaris/NNS/solaris and/CC/and ibm/NN/ibm 's/POS/'s aix/NN/aix /,/, now/RB/now support/NN/support up/RP/up to/TO/to 64-bit/CD/64-bit file/NN/file pointers/NNP/pointers. pointers/NNS/pointers of/IN/of this/DT/this size/NN/size allow/VBP/allow files/NNS/files and/CC/and file/JJ/file systems/NNS/systems to/TO/to be/VB/be terabytes/NNS/terabytes in/IN/in size/NNP/size. a/DT/a unix/NN/unix inode/NN/inode is/VBZ/is shown/VBN/shown in/IN/in figure/NN/figure 11.9/CD/11.9 /./. indexed-allocation/NN/indexed-allocation schemes/NNS/schemes suffer/VBP/suffer from/IN/from some/DT/some of/IN/of the/DT/the same/JJ/same performance/NN/performance problems/NNS/problems as/IN/as does/VBZ/does linked/VBN/linked allocation/NNP/allocation. specifically/RB/specifically /,/, the/DT/the index/NN/index blocks/NNS/blocks can/MD/can be/VB/be cached/VBN/cached in/IN/in memory/NN/memory /,/, but/CC/but the/DT/the data/NNS/data blocks/VBZ/blocks may/MD/may be/VB/be spread/VBN/spread all/DT/all over/IN/over a/DT/a volume/NN/volume /./. 11.4.4/CD/11.4.4 performance/NN/performance the/DT/the allocation/NN/allocation methods/NNS/methods that/WDT/that we/PRP/we have/VBP/have discussed/VBN/discussed vary/JJ/vary in/IN/in their/PRP$/their storage/NN/storage efficiency/NN/efficiency and/CC/and data-block/JJ/data-block access/NN/access times/NNP/times. both/DT/both are/VBP/are important/JJ/important criteria/NNS/criteria in/IN/in selecting/VBG/selecting the/DT/the proper/NN/proper method/NN/method or/CC/or methods/NNS/methods for/IN/for an/DT/an operating/NN/operating system/NN/system to/TO/to implement/VB/implement /./. 478/CD/478 chapter/NN/chapter 11/CD/11 implementing/VBG/implementing file/JJ/file systems/NNS/systems figure/NN/figure 11.9/CD/11.9 the/DT/the unix/NN/unix inode/NN/inode /./. before/IN/before selecting/VBG/selecting an/DT/an allocation/NN/allocation method/NN/method /,/, we/PRP/we need/VBP/need to/TO/to determine/VB/determine how/WRB/how the/DT/the systems/NNS/systems will/MD/will be/VB/be used/NNP/used. a/DT/a system/NN/system with/IN/with mostly/RB/mostly sequential/JJ/sequential access/NN/access should/MD/should not/RB/not use/VB/use the/DT/the same/JJ/same method/NN/method as/IN/as a/DT/a system/NN/system with/IN/with mostly/RB/mostly random/IN/random access/NN/access /./. for/IN/for any/DT/any type/NN/type of/IN/of access/NN/access /,/, contiguous/JJ/contiguous allocation/NN/allocation requires/VBZ/requires only/RB/only one/CD/one access/NN/access to/TO/to get/VB/get a/DT/a disk/NN/disk block/NNP/block. since/IN/since we/PRP/we can/MD/can easily/RB/easily keep/VB/keep the/DT/the initial/JJ/initial address/NN/address of/IN/of the/DT/the file/NN/file in/IN/in memory/NN/memory /,/, we/PRP/we can/MD/can calculate/VB/calculate immediately/RB/immediately the/DT/the disk/NN/disk address/NN/address of/IN/of the/DT/the ith/NN/ith block/NN/block /:/( or/CC/or the/DT/the next/JJ/next block/NN/block /:/) and/CC/and read/VB/read it/PRP/it directly/RB/directly /./. for/IN/for linked/VBN/linked allocation/NN/allocation /,/, we/PRP/we can/MD/can also/RB/also keep/VB/keep the/DT/the address/NN/address of/IN/of the/DT/the next/JJ/next block/NN/block in/IN/in memory/NN/memory and/CC/and read/VB/read it/PRP/it directly/NNP/directly. this/DT/this method/NN/method is/VBZ/is fine/NN/fine for/IN/for sequential/JJ/sequential access/NN/access ;/:/; for/IN/for direct/JJ/direct access/NN/access /,/, however/RB/however /,/, an/DT/an access/NN/access to/TO/to the/DT/the ith/NN/ith block/NN/block might/MD/might require/VB/require i/PRP/i disk/VB/disk reads/NNP/reads. this/DT/this problem/NN/problem indicates/VBZ/indicates why/WRB/why linked/VBN/linked allocation/NN/allocation should/MD/should not/RB/not be/VB/be used/VBN/used for/IN/for an/DT/an application/NN/application requiring/VBG/requiring direct/JJ/direct access/NN/access /./. as/IN/as a/DT/a result/NN/result /,/, some/DT/some systems/NNS/systems support/NN/support direct-access/NN/direct-access files/NNS/files by/IN/by using/VBG/using contiguous/JJ/contiguous allocation/NN/allocation and/CC/and sequential-access/JJ/sequential-access files/NNS/files by/IN/by using/VBG/using linked/VBN/linked allocation/NNP/allocation. for/IN/for these/DT/these systems/NNS/systems /,/, the/DT/the type/NN/type of/IN/of access/NN/access to/TO/to be/VB/be made/VBN/made must/MD/must be/VB/be declared/VBN/declared when/WRB/when the/DT/the file/NN/file is/VBZ/is created/NNP/created. a/DT/a file/NN/file created/VBN/created for/IN/for sequential/JJ/sequential access/NN/access will/MD/will be/VB/be linked/VBN/linked and/CC/and can/MD/can not/RB/not be/VB/be used/VBN/used for/IN/for direct/JJ/direct access/NNP/access. a/DT/a file/NN/file created/VBN/created for/IN/for direct/JJ/direct access/NN/access will/MD/will be/VB/be contiguous/JJ/contiguous and/CC/and can/MD/can support/VB/support both/DT/both direct/JJ/direct access/NN/access and/CC/and sequential/JJ/sequential access/NN/access /,/, but/CC/but its/PRP$/its maximum/NN/maximum length/NN/length must/MD/must be/VB/be declared/VBN/declared when/WRB/when it/PRP/it is/VBZ/is created/NNP/created. in/IN/in this/DT/this case/NN/case /,/, the/DT/the operating/NN/operating system/NN/system must/MD/must have/VB/have appropriate/JJ/appropriate data/NNS/data structures/NNS/structures and/CC/and algorithms/NNS/algorithms to/TO/to support/VB/support both/DT/both allocation/NN/allocation methods/NNS/methods /./. files/NNS/files can/MD/can be/VB/be converted/VBN/converted from/IN/from one/CD/one type/NN/type to/TO/to another/DT/another by/IN/by the/DT/the creation/NN/creation of/IN/of a/DT/a new/JJ/new file/NN/file of/IN/of the/DT/the desired/VBN/desired type/NN/type /,/, into/IN/into which/WDT/which the/DT/the contents/NNS/contents of/IN/of the/DT/the old/JJ/old file/NN/file are/VBP/are copied/NNP/copied. the/DT/the old/JJ/old file/NN/file may/MD/may then/RB/then be/VB/be deleted/VBN/deleted and/CC/and the/DT/the new/JJ/new file/NN/file renamed/VBN/renamed /./. indexed/VBN/indexed allocation/NN/allocation is/VBZ/is more/RBR/more complex/NNP/complex. if/IN/if the/DT/the index/NN/index block/NN/block is/VBZ/is already/RB/already in/IN/in memory/NN/memory /,/, then/RB/then the/DT/the access/NN/access can/MD/can be/VB/be made/VBN/made directly/-NONE-/directly. however/RB/however /,/, keeping/VBG/keeping the/DT/the index/NN/index block/NN/block in/IN/in memory/NN/memory requires/VBZ/requires considerable/JJ/considerable space/NNP/space. if/IN/if this/DT/this memory/NN/memory space/NN/space is/VBZ/is not/RB/not available/JJ/available /,/, then/RB/then we/PRP/we may/MD/may have/VB/have to/TO/to read/VB/read first/RB/first the/DT/the index/NN/index block/NN/block and/CC/and then/RB/then the/DT/the desired/VBN/desired data/NNS/data block/NNP/block. for/IN/for a/DT/a two-level/JJ/two-level index/NN/index /,/, two/CD/two index-block/JJ/index-block reads/NNS/reads might/MD/might be/VB/be necessary/NNP/necessary. for/IN/for an/DT/an 11.5/CD/11.5 11.5/CD/11.5 479/CD/479 extremely/RB/extremely large/JJ/large file/NN/file /,/, accessing/VBG/accessing a/DT/a block/NN/block near/IN/near the/DT/the end/NN/end of/IN/of the/DT/the file/NN/file would/MD/would require/VB/require reading/NN/reading in/IN/in all/DT/all the/DT/the index/NN/index blocks/NNS/blocks before/IN/before the/DT/the needed/VBN/needed data/NNS/data block/VBP/block finally/RB/finally could/MD/could be/VB/be read/NNP/read. thus/RB/thus /,/, the/DT/the performance/NN/performance of/IN/of indexed/VBN/indexed allocation/NN/allocation depends/NNS/depends on/IN/on the/DT/the index/NN/index structure/NN/structure /,/, on/IN/on the/DT/the size/NN/size of/IN/of the/DT/the file/NN/file /,/, and/CC/and on/IN/on the/DT/the position/NN/position of/IN/of the/DT/the block/NN/block desired/VBD/desired /./. some/DT/some systems/NNS/systems combine/VBP/combine contiguous/JJ/contiguous allocation/NN/allocation with/IN/with indexed/VBN/indexed allocation/NN/allocation by/IN/by using/VBG/using contiguous/JJ/contiguous allocation/NN/allocation for/IN/for small/JJ/small files/NNS/files /:/( up/IN/up to/TO/to three/CD/three or/CC/or four/CD/four blocks/NNS/blocks /:/) and/CC/and automatically/RB/automatically switching/VBG/switching to/TO/to an/DT/an indexed/VBN/indexed allocation/NN/allocation if/IN/if the/DT/the file/NN/file grows/VBZ/grows large/NNP/large. since/IN/since most/JJS/most files/NNS/files are/VBP/are small/JJ/small /,/, and/CC/and contiguous/JJ/contiguous allocation/NN/allocation is/VBZ/is efficient/JJ/efficient for/IN/for small/JJ/small files/NNS/files /,/, average/JJ/average performance/NN/performance can/MD/can be/VB/be quite/RB/quite good/JJ/good /./. for/IN/for instance/NN/instance /,/, the/DT/the version/NN/version of/IN/of the/DT/the unix/NN/unix operating/NN/operating system/NN/system from/IN/from sun/NN/sun microsystems/NNS/microsystems was/VBD/was changed/VBN/changed in/IN/in 1991/CD/1991 to/TO/to improve/VB/improve performance/NN/performance in/IN/in the/DT/the file-system/JJ/file-system allocation/NN/allocation algorithm/NNP/algorithm. the/DT/the performance/NN/performance measurements/NNS/measurements indicated/VBD/indicated that/IN/that the/DT/the maximum/NN/maximum disk/NN/disk throughput/NN/throughput on/IN/on a/DT/a typical/JJ/typical workstation/NN/workstation /:/( a/DT/a 12-mips/CD/12-mips sparcstation1/NNP/sparcstation1 /NNP/) took/VBD/took 50/CD/50 percent/NN/percent of/IN/of the/DT/the cpu/NN/cpu and/CC/and produced/VBN/produced a/DT/a disk/NN/disk bandwidth/NN/bandwidth of/IN/of only/RB/only 1.5/CD/1.5 me/PRP/me per/IN/per second/NNP/second. to/TO/to improve/VB/improve performance/NN/performance /,/, sun/NN/sun made/VBD/made changes/NNS/changes to/TO/to allocate/VB/allocate space/NN/space in/IN/in clusters/NNS/clusters of/IN/of 56/CD/56 kb/NN/kb whenever/NN/whenever possible/JJ/possible /NN/( 56/CD/56 kb/NN/kb was/VBD/was the/DT/the maximum/NN/maximum size/NN/size of/IN/of a/DT/a dma/NN/dma transfer/NN/transfer on/IN/on sun/NN/sun systems/NNS/systems at/IN/at that/DT/that time/NN/time /:/) /./. this/DT/this allocation/NN/allocation reduced/VBD/reduced external/JJ/external fragmentation/NN/fragmentation /,/, and/CC/and thus/RB/thus seek/VB/seek and/CC/and latency/NN/latency times/NNP/times. in/IN/in addition/NN/addition /,/, the/DT/the disk-reading/JJ/disk-reading routines/NNS/routines were/VBD/were optimized/VBN/optimized to/TO/to read/VB/read in/IN/in these/DT/these large/JJ/large clusters/NNP/clusters. the/DT/the inode/NN/inode structure/NN/structure was/VBD/was left/VBN/left unchanged/NNP/unchanged. as/IN/as a/DT/a result/NN/result of/IN/of these/DT/these changes/NNS/changes /,/, plus/CC/plus the/DT/the use/NN/use of/IN/of read-ahead/JJ/read-ahead and/CC/and free-behind/JJ/free-behind /NN/( discussed/VBD/discussed in/IN/in section/NN/section 11.6.2/CD/11.6.2 /CD/) /,/, 25/CD/25 percent/NN/percent less/RBR/less cpu/NN/cpu was/VBD/was used/VBN/used /,/, and/CC/and throughput/VBD/throughput substantially/RB/substantially improved/VBN/improved /./. many/JJ/many other/JJ/other optimizations/NNS/optimizations are/VBP/are in/IN/in use/NNP/use. given/VBN/given the/DT/the disparity/NN/disparity between/IN/between cpu/NN/cpu speed/NN/speed and/CC/and disk/NN/disk speed/NN/speed /,/, it/PRP/it is/VBZ/is not/RB/not unreasonable/JJ/unreasonable to/TO/to add/VB/add thousands/NNS/thousands of/IN/of extra/JJ/extra instructions/NNS/instructions to/TO/to the/DT/the operating/NN/operating system/NN/system to/TO/to save/VB/save just/RB/just a/DT/a few/JJ/few disk-head/JJ/disk-head movements/NNS/movements /./. furthermore/NN/furthermore /,/, this/DT/this disparity/NN/disparity is/VBZ/is increasing/VBG/increasing over/IN/over time/NN/time /,/, to/TO/to the/DT/the point/NN/point where/WRB/where hundreds/NNS/hundreds of/IN/of thousands/NNS/thousands of/IN/of instructions/NNS/instructions reasonably/RB/reasonably could/MD/could be/VB/be used/VBN/used to/TO/to optimize/VB/optimize head/NN/head movements/NNS/movements /./. since/IN/since disk/NN/disk space/NN/space is/VBZ/is limited/VBN/limited /,/, we/PRP/we need/VBP/need to/TO/to reuse/VB/reuse the/DT/the space/NN/space from/IN/from deleted/VBN/deleted files/NNS/files for/IN/for new/JJ/new files/NNS/files /,/, if/IN/if possible/NNP/possible. /NNP/( write-once/NNP/write-once optical/JJ/optical disks/NNS/disks only/RB/only allow/VBP/allow one/CD/one write/JJ/write to/TO/to any/DT/any given/VBN/given sector/NN/sector /,/, and/CC/and thus/RB/thus such/JJ/such reuse/NN/reuse is/VBZ/is not/RB/not physically/RB/physically possible/NNP/possible. /:/) to/TO/to keep/VB/keep track/NN/track of/IN/of free/JJ/free disk/NN/disk space/NN/space /,/, the/DT/the system/NN/system maintains/VBZ/maintains a/DT/a the/DT/the free-space/NN/free-space list/NN/list records/NNS/records all/DT/all free/JJ/free disk/NN/disk blocks-those/JJ/blocks-those not/RB/not allocated/VBN/allocated to/TO/to some/DT/some file/NN/file or/CC/or directory/NNP/directory. to/TO/to create/VB/create a/DT/a file/NN/file /,/, we/PRP/we search/VBP/search the/DT/the free-space/NN/free-space list/NN/list for/IN/for the/DT/the required/VBN/required amount/NN/amount of/IN/of space/NN/space and/CC/and allocate/VB/allocate that/IN/that space/NN/space to/TO/to the/DT/the new/JJ/new file/NNP/file. this/DT/this space/NN/space is/VBZ/is then/RB/then removed/VBN/removed from/IN/from the/DT/the free-space/NN/free-space list/NNP/list. when/WRB/when a/DT/a file/NN/file is/VBZ/is deleted/VBN/deleted /,/, its/PRP$/its disk/NN/disk space/NN/space is/VBZ/is added/VBN/added to/TO/to the/DT/the free-space/NN/free-space list/NNP/list. the/DT/the free-space/NN/free-space list/NN/list /,/, despite/IN/despite its/PRP$/its name/NN/name /,/, might/MD/might not/RB/not be/VB/be implemented/VBN/implemented as/IN/as a/DT/a list/NN/list /,/, as/IN/as we/PRP/we discuss/VBP/discuss next/JJ/next /./. 11.5.1/CD/11.5.1 bit/NN/bit vector/NN/vector frequently/RB/frequently /,/, the/DT/the free-space/NN/free-space list/NN/list is/VBZ/is implemented/VBN/implemented as/RB/as a/DT/a or/CC/or each/DT/each block/NN/block is/VBZ/is represented/VBN/represented by/IN/by 1/CD/1 bit/NNP/bit. if/IN/if the/DT/the block/NN/block is/VBZ/is free/JJ/free /,/, the/DT/the bit/NN/bit is/VBZ/is 1/CD/1 ;/:/; if/IN/if the/DT/the block/NN/block is/VBZ/is allocated/VBN/allocated /,/, the/DT/the bit/NN/bit is/VBZ/is 0/-NONE-/0 /./. for/IN/for example/NN/example /,/, consider/NN/consider a/DT/a disk/NN/disk where/WRB/where blocks/NNS/blocks 2/CD/2 /,/, 3/CD/3 /,/, 4/CD/4 /,/, 5/CD/5 /,/, 8/CD/8 /,/, 9/CD/9 /,/, 10/CD/10 /,/, 11/CD/11 /,/, 12/CD/12 /,/, 13/CD/13 /,/, 17/CD/17 /,/, 18/CD/18 /,/, 25/CD/25 /,/, 26/CD/26 /,/, and/CC/and 27/CD/27 are/VBP/are free/JJ/free and/CC/and the/DT/the rest/NN/rest of/IN/of the/DT/the blocks/NNS/blocks are/VBP/are allocated/NNP/allocated. the/DT/the free-space/NN/free-space bit/NN/bit map/NN/map would/MD/would be/VB/be 480/CD/480 chapter/NN/chapter 11/CD/11 001111001111110001100000011100000/CD/001111001111110001100000011100000 /:/.. /./. the/DT/the main/JJ/main advantage/NN/advantage of/IN/of this/DT/this approach/NN/approach is/VBZ/is its/PRP$/its relative/JJ/relative simplicity/NN/simplicity and/CC/and its/PRP$/its efficiency/NN/efficiency in/IN/in finding/NN/finding the/DT/the first/JJ/first free/JJ/free block/NN/block or/CC/or n/NN/n consecutive/JJ/consecutive free/JJ/free blocks/NNS/blocks on/IN/on the/DT/the disk/NNP/disk. indeed/RB/indeed /,/, many/JJ/many computers/NNS/computers supply/RB/supply bit-manipulation/JJ/bit-manipulation instructions/NNS/instructions that/WDT/that can/MD/can be/VB/be used/VBN/used effectively/RB/effectively for/IN/for that/DT/that purpose/NNP/purpose. for/IN/for example/NN/example /,/, the/DT/the intel/NN/intel family/NN/family starting/VBG/starting with/IN/with the/DT/the 80386/CD/80386 and/CC/and the/DT/the motorola/NN/motorola family/NN/family starting/VBG/starting with/IN/with the/DT/the 68020/CD/68020 have/VBP/have instructions/NNS/instructions that/IN/that return/NN/return the/DT/the offset/NN/offset in/IN/in a/DT/a word/NN/word of/IN/of the/DT/the first/JJ/first bit/NN/bit with/IN/with the/DT/the value/NN/value 1/CD/1 /CD/( these/DT/these processors/NNS/processors have/VBP/have powered/VBN/powered pcs/NNS/pcs and/CC/and macintosh/JJ/macintosh systems/NNS/systems /,/, respectively/RB/respectively /:/) /./. one/CD/one technique/NN/technique for/IN/for finding/NN/finding the/DT/the first/JJ/first free/JJ/free block/NN/block on/IN/on a/DT/a system/NN/system that/WDT/that uses/VBZ/uses a/DT/a bit-vector/NN/bit-vector to/TO/to allocate/VB/allocate disk/NN/disk space/NN/space is/VBZ/is to/TO/to sequentially/RB/sequentially check/VB/check each/DT/each word/NN/word in/IN/in the/DT/the bit/NN/bit map/NN/map to/TO/to see/VB/see whether/IN/whether that/DT/that value/NN/value is/VBZ/is not/RB/not 0/-NONE-/0 /,/, since/IN/since a/DT/a 0-valued/JJ/0-valued word/NN/word contains/VBZ/contains only/RB/only 0/-NONE-/0 bits/NNS/bits and/CC/and represents/NNS/represents a/DT/a set/NN/set of/IN/of allocated/VBN/allocated blocks/NNP/blocks. the/DT/the first/JJ/first non-0/-NONE-/non-0 word/NN/word is/VBZ/is scanned/VBN/scanned for/IN/for the/DT/the first/JJ/first 1/CD/1 bit/NN/bit /,/, which/WDT/which is/VBZ/is the/DT/the location/NN/location of/IN/of the/DT/the first/JJ/first free/JJ/free block/NNP/block. the/DT/the calculation/NN/calculation of/IN/of the/DT/the block/NN/block number/NN/number is/VBZ/is /NNP/( number/NN/number of/IN/of bits/NNS/bits per/IN/per word/NN/word /:/) x/NN/x /:/( number/NN/number of/IN/of 0-value/JJ/0-value words/NNS/words /:/) +/:/+ offset/NN/offset of/IN/of first/JJ/first 1/CD/1 bit/NN/bit /./. again/RB/again /,/, we/PRP/we see/VBP/see hardware/NN/hardware features/NNS/features driving/VBG/driving software/NN/software functionality/NNP/functionality. unfortunately/RB/unfortunately /,/, bit/NN/bit vectors/NNS/vectors are/VBP/are inefficient/JJ/inefficient unless/IN/unless the/DT/the entire/JJ/entire vector/NN/vector is/VBZ/is kept/VBN/kept in/IN/in main/JJ/main memory/NN/memory /:/( and/CC/and is/VBZ/is written/VBN/written to/TO/to disk/VB/disk occasionally/RB/occasionally for/IN/for recovery/NN/recovery needs/VBZ/needs /:/) /./. keeping/VBG/keeping it/PRP/it in/IN/in main/JJ/main memory/NN/memory is/VBZ/is possible/JJ/possible for/IN/for smaller/JJR/smaller disks/NNS/disks but/CC/but not/RB/not necessarily/RB/necessarily for/IN/for larger/JJR/larger ones/NNS/ones /./. a/DT/a 1.3-gb/CD/1.3-gb disk/NN/disk with/IN/with 512-byte/JJ/512-byte blocks/NNS/blocks would/MD/would need/VB/need a/DT/a bit/NN/bit map/NN/map of/IN/of over/IN/over 332/CD/332 kb/NN/kb to/TO/to track/VB/track its/PRP$/its free/JJ/free blocks/NNS/blocks /,/, although/IN/although clustering/NN/clustering the/DT/the blocks/NNS/blocks in/IN/in groups/NNS/groups of/IN/of four/CD/four reduces/NNS/reduces this/DT/this number/NN/number to/TO/to around/IN/around 83/CD/83 kb/NN/kb per/IN/per disk/NNP/disk. a/DT/a 1-tb/CD/1-tb disk/NN/disk with/IN/with 4-kb/CD/4-kb blocks/NNS/blocks requires/VBZ/requires 32/CD/32 mb/NN/mb to/TO/to store/VB/store its/PRP$/its bit/NN/bit map/NNP/map. given/NN/given that/WDT/that disk/NN/disk size/VBP/size constantly/RB/constantly increases/NNS/increases /,/, the/DT/the problem/NN/problem with/IN/with bit/NN/bit vectors/NNS/vectors will/MD/will continue/VB/continue to/TO/to escalate/NNP/escalate. a/DT/a 1-pb/CD/1-pb file/NN/file system/NN/system would/MD/would take/VB/take a/DT/a 32-gb/CD/32-gb bitmap/NN/bitmap just/RB/just to/TO/to manage/VB/manage its/PRP$/its free/JJ/free space/NN/space /./. 11.5.2/CD/11.5.2 linked/VBD/linked list/NN/list another/DT/another approach/NN/approach to/TO/to free-space/NN/free-space management/NN/management is/VBZ/is to/TO/to link/VB/link together/RP/together all/DT/all the/DT/the free/JJ/free disk/NN/disk blocks/NNS/blocks /,/, keeping/VBG/keeping a/DT/a pointer/NN/pointer to/TO/to the/DT/the first/JJ/first free/JJ/free block/NN/block in/IN/in a/DT/a special/JJ/special location/NN/location on/IN/on the/DT/the disk/NN/disk and/CC/and caching/VBG/caching it/PRP/it in/IN/in memory/NNP/memory. this/DT/this first/JJ/first block/NN/block contains/NNS/contains a/DT/a pointer/NN/pointer to/TO/to the/DT/the next/JJ/next free/JJ/free disk/NN/disk block/NN/block /,/, and/CC/and so/RB/so on/NNP/on. recall/NN/recall our/PRP$/our earlier/JJR/earlier example/NN/example /:/( section/NN/section 11.5.1/CD/11.5.1 /CD/) /,/, in/IN/in which/WDT/which blocks/NNS/blocks 2/CD/2 /,/, 3/CD/3 /,/, 4/CD/4 /,/, 5/CD/5 /,/, 8/CD/8 /,/, 9/CD/9 /,/, 10/CD/10 /,/, 11/CD/11 /,/, 12/CD/12 /,/, 13/CD/13 /,/, 17/CD/17 /,/, 18/CD/18 /,/, 25/CD/25 /,/, 26/CD/26 /,/, and/CC/and 27/CD/27 were/VBD/were free/JJ/free and/CC/and the/DT/the rest/NN/rest of/IN/of the/DT/the blocks/NNS/blocks were/VBD/were allocated/NNP/allocated. in/IN/in this/DT/this situation/NN/situation /,/, we/PRP/we would/MD/would keep/VB/keep a/DT/a pointer/NN/pointer to/TO/to block/VB/block 2/CD/2 as/IN/as the/DT/the first/JJ/first free/JJ/free block/NNP/block. block/NN/block 2/CD/2 would/MD/would contain/VB/contain a/DT/a pointer/NN/pointer to/TO/to block/VB/block 3/CD/3 /,/, which/WDT/which would/MD/would point/VB/point to/TO/to block/VB/block 4/CD/4 /,/, which/WDT/which would/MD/would point/VB/point to/TO/to block/VB/block 5/CD/5 /,/, which/WDT/which would/MD/would point/VB/point to/TO/to block/VB/block 8/CD/8 /,/, and/CC/and so/RB/so on/IN/on /NNP/( figure/NN/figure 11.10/CD/11.10 /CD/) /./. this/DT/this scheme/NN/scheme is/VBZ/is not/RB/not efficient/JJ/efficient ;/:/; to/TO/to traverse/VB/traverse the/DT/the list/NN/list /,/, we/PRP/we must/MD/must read/VB/read each/DT/each block/NN/block /,/, which/WDT/which requires/VBZ/requires substantial/JJ/substantial i/0/-NONE-/i/0 time/NNP/time. fortunately/RB/fortunately /,/, however/RB/however /,/, traversing/VBG/traversing the/DT/the free/JJ/free list/NN/list is/VBZ/is not/RB/not a/DT/a frequent/NN/frequent action/NNP/action. usually/RB/usually /,/, the/DT/the operating/NN/operating system/NN/system simply/RB/simply needs/VBZ/needs a/DT/a free/JJ/free block/NN/block so/IN/so that/IN/that it/PRP/it can/MD/can allocate/VB/allocate that/IN/that block/NN/block to/TO/to a/DT/a file/NN/file /,/, so/RB/so the/DT/the first/JJ/first block/NN/block in/IN/in the/DT/the free/JJ/free list/NN/list is/VBZ/is used/NNP/used. the/DT/the fat/JJ/fat method/NN/method incorporates/NNS/incorporates free-block/JJ/free-block accounting/NN/accounting into/IN/into the/DT/the allocation/NN/allocation data/NNS/data structure/NNP/structure. no/DT/no separate/JJ/separate method/NN/method is/VBZ/is needed/VBN/needed /./. 11.5.3/CD/11.5.3 grouping/VBG/grouping a/DT/a modification/NN/modification of/IN/of the/DT/the free-list/JJ/free-list approach/NN/approach stores/NNS/stores the/DT/the addresses/NNS/addresses of/IN/of n/NN/n free/JJ/free blocks/NNS/blocks in/IN/in the/DT/the first/JJ/first free/JJ/free block/NNP/block. the/DT/the first/JJ/first n-1/-NONE-/n-1 of/IN/of these/DT/these blocks/NNS/blocks are/VBP/are actually/RB/actually free/NNP/free. the/DT/the last/JJ/last block/NN/block contains/VBZ/contains the/DT/the addresses/NNS/addresses of/IN/of another/DT/another n/NN/n free/JJ/free blocks/NNS/blocks /,/, and/CC/and so/RB/so on/NNP/on. the/DT/the addresses/NNS/addresses 11.5/CD/11.5 481/CD/481 figure/NN/figure 11.10/CD/11.10 linked/VBN/linked free-space/NN/free-space list/NN/list on/IN/on disk/NN/disk /./. of/IN/of a/DT/a large/JJ/large number/NN/number of/IN/of free/JJ/free blocks/NNS/blocks can/MD/can now/RB/now be/VB/be found/VBN/found quickly/RB/quickly /,/, unlike/IN/unlike the/DT/the situation/NN/situation when/WRB/when the/DT/the standard/JJ/standard linked-list/JJ/linked-list approach/NN/approach is/VBZ/is used/VBN/used /./. 11.5.4/CD/11.5.4 counting/VBG/counting another/DT/another approach/NN/approach takes/VBZ/takes advantage/NN/advantage of/IN/of the/DT/the fact/NN/fact that/IN/that /,/, generally/RB/generally /,/, several/JJ/several contiguous/JJ/contiguous blocks/NNS/blocks may/MD/may be/VB/be allocated/VBN/allocated or/CC/or freed/VBN/freed simultaneously/RB/simultaneously /,/, particularly/RB/particularly when/WRB/when space/NN/space is/VBZ/is allocated/VBN/allocated with/IN/with the/DT/the contiguous-allocation/NN/contiguous-allocation algorithm/NN/algorithm or/CC/or through/IN/through clustering/NNP/clustering. thus/RB/thus /,/, rather/RB/rather than/IN/than keeping/VBG/keeping a/DT/a list/NN/list of/IN/of n/NN/n free/JJ/free disk/NN/disk addresses/NNS/addresses /,/, we/PRP/we can/MD/can keep/VB/keep the/DT/the address/NN/address of/IN/of the/DT/the first/JJ/first free/JJ/free block/NN/block and/CC/and the/DT/the number/NN/number /:/( n/NN/n /:/) of/IN/of free/JJ/free contiguous/JJ/contiguous blocks/NNS/blocks that/WDT/that follow/VBP/follow the/DT/the first/JJ/first block/NNP/block. each/DT/each entry/NN/entry in/IN/in the/DT/the free-space/NN/free-space list/NN/list then/RB/then consists/VBZ/consists of/IN/of a/DT/a disk/NN/disk address/NN/address and/CC/and a/DT/a count/NNP/count. although/IN/although each/DT/each entry/NN/entry requires/VBZ/requires more/JJR/more space/NN/space than/IN/than would/MD/would a/DT/a simple/JJ/simple disk/NN/disk address/NN/address /,/, the/DT/the overall/JJ/overall list/NN/list is/VBZ/is shorter/NN/shorter /,/, as/IN/as long/RB/long as/IN/as the/DT/the count/NN/count is/VBZ/is generally/RB/generally greater/JJR/greater than/IN/than 1/CD/1. note/NN/note that/IN/that this/DT/this method/NN/method of/IN/of tracking/VBG/tracking free/JJ/free space/NN/space is/VBZ/is similar/JJ/similar to/TO/to the/DT/the extent/NN/extent method/NN/method of/IN/of allocating/VBG/allocating blocks/NNP/blocks. these/DT/these entries/NNS/entries can/MD/can be/VB/be stored/VBN/stored in/IN/in a/DT/a b-tree/JJ/b-tree /,/, rather/RB/rather than/IN/than a/DT/a linked/VBN/linked list/NN/list for/IN/for efficient/NN/efficient lookup/NN/lookup /,/, insertion/NN/insertion /,/, and/CC/and deletion/NN/deletion /./. 11.5.5/CD/11.5.5 space/NN/space maps/NNS/maps sun/VBP/sun 's/POS/'s zfs/NNS/zfs file/IN/file system/NN/system was/VBD/was designed/VBN/designed to/TO/to encompass/NN/encompass huge/JJ/huge numbers/NNS/numbers of/IN/of files/NNS/files /,/, directories/NNS/directories /,/, and/CC/and even/RB/even file/JJ/file systems/NNS/systems /:/( in/IN/in zfs/NNS/zfs /,/, we/PRP/we can/MD/can create/VB/create file-system/JJ/file-system hierarchies/NNS/hierarchies /:/) /./. the/DT/the resulting/VBG/resulting data/NNS/data structures/NNS/structures could/MD/could have/VB/have been/VBN/been large/JJ/large and/CC/and inefficient/NN/inefficient if/IN/if they/PRP/they had/VBD/had not/RB/not been/VBN/been designed/VBN/designed and/CC/and implemented/VBN/implemented properly/NNP/properly. on/IN/on these/DT/these scales/NNS/scales /,/, metadata/NNS/metadata i/0/-NONE-/i/0 can/MD/can have/VB/have a/DT/a large/JJ/large performance/NN/performance impact/NNP/impact. conside1/NNP/conside1 ~/NNP/~ for/IN/for example/NN/example /,/, that/IN/that if/IN/if the/DT/the freespace/NN/freespace list/NN/list is/VBZ/is implemented/VBN/implemented as/RB/as a/DT/a bit/NN/bit map/NN/map /,/, bit/NN/bit maps/NNS/maps must/MD/must be/VB/be modified/VBN/modified both/DT/both when/WRB/when blocks/NNS/blocks are/VBP/are allocated/VBN/allocated and/CC/and when/WRB/when they/PRP/they are/VBP/are freed/NNP/freed. freeing/VBG/freeing 1gb/CD/1gb of/IN/of data/NNS/data on/IN/on a/DT/a 1-tb/CD/1-tb disk/NN/disk could/MD/could cause/VB/cause thousands/NNS/thousands of/IN/of blocks/NNS/blocks of/IN/of bit/NN/bit maps/NNS/maps to/TO/to be/VB/be updated/VBN/updated /,/, because/IN/because those/DT/those data/NNS/data blocks/NNS/blocks could/MD/could be/VB/be scattered/VBN/scattered over/RP/over the/DT/the entire/JJ/entire disk/NN/disk /./. 482/CD/482 chapter/NN/chapter 11/CD/11 11.6/CD/11.6 zfs/NNS/zfs uses/NNS/uses a/DT/a combination/NN/combination of/IN/of techniques/NNS/techniques in/IN/in its/PRP$/its free-space/NN/free-space managem.ent/JJ/managem.ent algorithm/NN/algorithm to/TO/to control/NN/control the/DT/the size/NN/size of/IN/of data/NNS/data structures/NNS/structures and/CC/and minimize/VB/minimize the/DT/the i/0/-NONE-/i/0 needed/VBN/needed to/TO/to manage/NN/manage those/DT/those structures/NNP/structures. first/RB/first /,/, zfs/NNS/zfs creates/VBZ/creates to/TO/to divide/VB/divide the/DT/the space/NN/space on/IN/on the/DT/the device/NN/device into/IN/into chucks/NNS/chucks of/IN/of manageable/JJ/manageable size/NNP/size. a/DT/a given/VBN/given volume/NN/volume may/MD/may contain/VB/contain hundreds/NNS/hundreds of/IN/of metaslabs/NNP/metaslabs. each/DT/each metaslab/NN/metaslab has/VBZ/has an/DT/an associated/VBN/associated space/NN/space map/NNP/map. zfs/VBZ/zfs uses/NNS/uses the/DT/the counting/VBG/counting algorithm/NN/algorithm to/TO/to store/VB/store information/NN/information about/IN/about free/JJ/free blocks/NNP/blocks. rather/RB/rather than/IN/than write/JJ/write count/NN/count structures/NNS/structures to/TO/to disk/VB/disk /,/, it/PRP/it uses/VBZ/uses log-structured/JJ/log-structured file/NN/file- system/NN/system techniques/NNS/techniques to/TO/to record/VB/record them/NNP/them. the/DT/the space/NN/space map/NN/map is/VBZ/is a/DT/a log/NN/log of/IN/of all/DT/all block/NN/block activity/NN/activity /:/( allocatil/NN/allocatil g/NN/g and/CC/and freemg/NN/freemg /:/) /,/, in/IN/in time/NN/time order/NN/order /,/, in/IN/in countil/NN/countil g/NN/g format/NNP/format. when/WRB/when zfs/NNS/zfs decides/VBZ/decides to/TO/to allocate/VB/allocate or/CC/or free/JJ/free space/NN/space from/IN/from a/DT/a metaslab/NN/metaslab /,/, it/PRP/it loads/VBZ/loads the/DT/the associated/VBN/associated space/NN/space map/NN/map into/IN/into memory/NN/memory in/IN/in a/DT/a balanced-tree/JJ/balanced-tree structure/NN/structure /:/( for/IN/for very/RB/very efficient/JJ/efficient operation/NN/operation /:/) /,/, indexed/VBD/indexed by/IN/by offset/VBN/offset /,/, and/CC/and replays/NNS/replays the/DT/the log/NN/log into/IN/into that/DT/that structure/NNP/structure. the/DT/the in-memory/JJ/in-memory space/NN/space map/NN/map is/VBZ/is then/RB/then an/DT/an accurate/JJ/accurate representation/NN/representation of/IN/of the/DT/the allocated/VBN/allocated and/CC/and free/JJ/free space/NN/space in/IN/in the/DT/the metaslab/NNP/metaslab. zfs/VBZ/zfs also/RB/also condenses/VBZ/condenses the/DT/the map/NN/map as/IN/as much/JJ/much as/IN/as possible/JJ/possible by/IN/by combining/NN/combining contiguous/JJ/contiguous free/JJ/free blocks/NNS/blocks into/IN/into a/DT/a sil/NN/sil gle/NN/gle entry/NNP/entry. finally/RB/finally /,/, the/DT/the free-space/NN/free-space list/NN/list is/VBZ/is updated/VBN/updated on/IN/on disk/NN/disk as/IN/as part/NN/part of/IN/of the/DT/the transaction-oriented/JJ/transaction-oriented operations/NNS/operations of/IN/of zfs/NNP/zfs. during/IN/during the/DT/the collection/NN/collection and/CC/and sortmg/NN/sortmg phase/NN/phase /,/, block/NN/block requests/NNS/requests can/MD/can still/RB/still occur/VB/occur /,/, and/CC/and zfs/NNS/zfs satisfies/NNS/satisfies these/DT/these requests/NNS/requests from/IN/from the/DT/the log/NNP/log. in/IN/in essence/NN/essence /,/, the/DT/the log/NN/log plus/VBZ/plus the/DT/the balanced/VBN/balanced tree/NN/tree is/VBZ/is the/DT/the free/JJ/free list/NN/list /./. now/RB/now that/IN/that we/PRP/we have/VBP/have discussed/VBN/discussed various/JJ/various block-allocation/NN/block-allocation and/CC/and directorymanagement/NN/directorymanagement options/NNS/options /,/, we/PRP/we can/MD/can further/RB/further consider/VB/consider their/PRP$/their effect/NN/effect on/IN/on performance/NN/performance and/CC/and efficient/NN/efficient disk/NN/disk use/NNP/use. disks/VBZ/disks tend/NN/tend to/TO/to represent/VB/represent a/DT/a major/JJ/major bottleneck/NN/bottleneck in/IN/in system/NN/system performance/NN/performance /,/, since/IN/since they/PRP/they are/VBP/are the/DT/the slowest/JJS/slowest main/JJ/main computer/NN/computer component/NNP/component. in/IN/in this/DT/this section/NN/section /,/, we/PRP/we discuss/VBP/discuss a/DT/a variety/NN/variety of/IN/of techniques/NNS/techniques used/VBN/used to/TO/to improve/VB/improve the/DT/the efficiency/NN/efficiency and/CC/and performance/NN/performance of/IN/of secondary/JJ/secondary storage/NN/storage /./. 11.6.1/CD/11.6.1 efficiency/NN/efficiency the/DT/the efficient/NN/efficient use/NN/use of/IN/of disk/NN/disk space/NN/space depends/NNS/depends heavily/RB/heavily on/IN/on the/DT/the disk/NN/disk allocation/NN/allocation and/CC/and directory/NN/directory algorithms/NNS/algorithms in/IN/in use/NNP/use. for/IN/for instance/NN/instance /,/, unix/NN/unix inodes/VBZ/inodes are/VBP/are preallocated/VBN/preallocated on/IN/on a/DT/a volume/NNP/volume. even/RB/even an/DT/an empty/NN/empty disk/NN/disk has/VBZ/has a/DT/a percentage/NN/percentage of/IN/of its/PRP$/its space/NN/space lost/VBD/lost to/TO/to inodes/NNS/inodes /./. however/RB/however /,/, by/IN/by preallocating/NN/preallocating the/DT/the inodes/NNS/inodes and/CC/and spreading/VBG/spreading them/PRP/them across/IN/across the/DT/the volume/NN/volume /,/, we/PRP/we improve/VBP/improve the/DT/the file/NN/file system/NN/system 's/POS/'s performance/NNP/performance. this/DT/this improved/VBN/improved performance/NN/performance results/NNS/results from/IN/from the/DT/the unix/NN/unix allocation/NN/allocation and/CC/and free-space/NN/free-space algorithms/NNS/algorithms /,/, which/WDT/which try/NN/try to/TO/to keep/VB/keep a/DT/a file/NN/file 's/POS/'s data/NNS/data blocks/NNS/blocks near/IN/near that/DT/that file/NN/file 's/POS/'s inode/NN/inode block/NN/block to/TO/to reduce/VB/reduce seek/NN/seek time/NN/time /./. as/IN/as another/DT/another example/NN/example /,/, let/VB/let 's/POS/'s reconsider/NN/reconsider the/DT/the clustermg/NN/clustermg scheme/NN/scheme discussed/VBD/discussed in/IN/in section/NN/section 11.4/CD/11.4 /,/, which/WDT/which aids/NNS/aids in/IN/in file-seek/JJ/file-seek and/CC/and file-transfer/JJ/file-transfer performance/NN/performance at/IN/at the/DT/the cost/NN/cost of/IN/of internal/JJ/internal fragmentation/NNP/fragmentation. to/TO/to reduce/VB/reduce this/DT/this fragmentation/NN/fragmentation /,/, bsd/VBD/bsd unix/NN/unix varies/NNS/varies the/DT/the cluster/NN/cluster size/NN/size as/IN/as a/DT/a file/NN/file grows/NNP/grows. large/JJ/large clusters/NNS/clusters are/VBP/are used/VBN/used where/WRB/where they/PRP/they can/MD/can be/VB/be filled/VBN/filled /,/, and/CC/and small/JJ/small clusters/NNS/clusters are/VBP/are used/VBN/used for/IN/for small/JJ/small files/NNS/files and/CC/and the/DT/the last/JJ/last cluster/NN/cluster of/IN/of a/DT/a file/NNP/file. this/DT/this system/NN/system is/VBZ/is described/VBN/described in/IN/in appendix/NN/appendix a/DT/a /./. the/DT/the types/NNS/types of/IN/of data/NNS/data normally/RB/normally kept/VBD/kept in/IN/in a/DT/a file/NN/file 's/POS/'s directory/NN/directory /:/( or/CC/or inode/VB/inode /CD/) entry/NN/entry also/RB/also require/VB/require consideration/NNP/consideration. commonly/RB/commonly /,/, a/DT/a last/JJ/last write/NN/write date/NN/date is/VBZ/is recorded/VBN/recorded to/TO/to supply/RB/supply information/NN/information to/TO/to the/DT/the user/NN/user and/CC/and to/TO/to determine/VB/determine whether/IN/whether the/DT/the file/NN/file needs/VBZ/needs to/TO/to be/VB/be backed/VBN/backed up/NNP/up. some/DT/some systems/NNS/systems also/RB/also keep/VB/keep a/DT/a last/JJ/last access/NN/access date/NN/date /,/, so/RB/so that/IN/that a/DT/a user/NN/user can/MD/can determine/VB/determine when/WRB/when the/DT/the file/NN/file was/VBD/was last/JJ/last read/NNP/read. the/DT/the result/NN/result of/IN/of keeping/NN/keeping this/DT/this information/NN/information is/VBZ/is that/IN/that /,/, whenever/RB/whenever the/DT/the file/NN/file is/VBZ/is read/VBN/read /,/, a/DT/a field/NN/field in/IN/in the/DT/the directory/NN/directory structure/NN/structure must/MD/must be/VB/be written/VBN/written 11.6/CD/11.6 483/CD/483 to/NNP/to. that/IN/that means/VBZ/means the/DT/the block/NN/block must/MD/must be/VB/be read/VBN/read into/IN/into memory/NN/memory /,/, a/DT/a section/NN/section changed/VBN/changed /,/, and/CC/and the/DT/the block/NN/block written/VBN/written back/RB/back out/IN/out to/TO/to disk/VB/disk /,/, because/IN/because operations/NNS/operations on/IN/on disks/NNS/disks occur/VBP/occur only/RB/only in/IN/in block/NN/block /:/( or/CC/or cluster/JJR/cluster /:/) chunks/NNP/chunks. so/RB/so any/DT/any time/NN/time a/DT/a file/NN/file is/VBZ/is opened/VBN/opened for/IN/for reading/NN/reading /,/, its/PRP$/its directory/NN/directory entry/NN/entry must/MD/must be/VB/be read/VBN/read and/CC/and written/VBN/written as/IN/as well/NNP/well. this/DT/this requirement/NN/requirement can/MD/can be/VB/be inefficient/VBN/inefficient for/IN/for frequently/RB/frequently accessed/VBN/accessed files/NNS/files /,/, so/RB/so we/PRP/we must/MD/must weigh/VB/weigh its/PRP$/its benefit/NN/benefit against/IN/against its/PRP$/its performance/NN/performance cost/NN/cost when/WRB/when designing/VBG/designing a/DT/a file/NN/file system/NNP/system. generally/RB/generally /,/, every/DT/every data/NN/data item/NN/item associated/VBN/associated with/IN/with a/DT/a file/JJ/file needs/NNS/needs to/TO/to be/VB/be considered/VBN/considered for/IN/for its/PRP$/its effect/NN/effect on/IN/on efficiency/NN/efficiency and/CC/and performance/NN/performance /./. as/IN/as an/DT/an example/NN/example /,/, consider/NN/consider how/WRB/how efficiency/NN/efficiency is/VBZ/is affected/VBN/affected by/IN/by the/DT/the size/NN/size of/IN/of the/DT/the pointers/NNS/pointers used/VBN/used to/TO/to access/NN/access data/NNP/data. most/JJS/most systems/NNS/systems use/VBP/use either/DT/either 16/CD/16- or/CC/or 32-bit/CD/32-bit pointers/NNS/pointers throughout/IN/throughout the/DT/the operating/NN/operating system/NNP/system. these/DT/these pointer/NN/pointer sizes/VBZ/sizes limit/NN/limit the/DT/the length/NN/length of/IN/of a/DT/a file/NN/file to/TO/to either/DT/either 216/CD/216 /CD/( 64/CD/64 kb/NN/kb /:/) or/CC/or 232/CD/232 bytes/NNS/bytes /:/( 4/CD/4 gb/NN/gb /:/) /./. some/DT/some systems/NNS/systems implement/VBP/implement 64-bit/JJ/64-bit pointers/NNS/pointers to/TO/to increase/VB/increase this/DT/this limit/NN/limit to/TO/to 264/CD/264 bytes/NNS/bytes /,/, which/WDT/which is/VBZ/is a/DT/a very/RB/very large/JJ/large number/NN/number indeed/NNP/indeed. however/RB/however /,/, 64-bit/JJ/64-bit pointers/NNS/pointers take/VBP/take more/JJR/more space/NN/space to/TO/to store/VB/store and/CC/and in/IN/in turn/NN/turn make/NN/make the/DT/the allocation/NN/allocation and/CC/and free-space-management/JJ/free-space-management methods/NNS/methods /:/( linked/VBN/linked lists/NNS/lists /,/, indexes/NNS/indexes /,/, and/CC/and so/RB/so on/IN/on /NNP/) use/NN/use more/JJR/more disk/NN/disk space/NN/space /./. one/CD/one of/IN/of the/DT/the difficulties/NNS/difficulties in/IN/in choosing/NN/choosing a/DT/a pointer/NN/pointer size/NN/size /,/, or/CC/or indeed/RB/indeed any/DT/any fixed/VBN/fixed allocation/NN/allocation size/NN/size within/IN/within an/DT/an operating/NN/operating system/NN/system /,/, is/VBZ/is planning/VBG/planning for/IN/for the/DT/the effects/NNS/effects of/IN/of changing/VBG/changing technology/NNP/technology. consider/NN/consider that/WDT/that the/DT/the ibm/NN/ibm pc/NN/pc xt/NN/xt had/VBD/had a/DT/a 10-mb/CD/10-mb hard/JJ/hard drive/JJ/drive and/CC/and an/DT/an ms-dos/JJ/ms-dos file/NN/file system/NN/system that/WDT/that could/MD/could support/VB/support only/RB/only 32/CD/32 mb/NNP/mb. /NNP/( each/DT/each fat/JJ/fat entry/NN/entry was/VBD/was 12/CD/12 bits/NNS/bits /,/, pointing/VBG/pointing to/TO/to an/DT/an 8-kb/CD/8-kb cluster/NNP/cluster. /NNP/) as/IN/as disk/NN/disk capacities/NNS/capacities increased/VBD/increased /,/, larger/JJR/larger disks/NNS/disks had/VBD/had to/TO/to be/VB/be split/VBN/split into/IN/into 32-mb/CD/32-mb partitions/NNS/partitions /,/, because/IN/because the/DT/the file/NN/file system/NN/system could/MD/could not/RB/not track/VB/track blocks/NNS/blocks beyond/IN/beyond 32mb/CD/32mb. as/IN/as hard/JJ/hard disks/NNS/disks with/IN/with capacities/NNS/capacities of/IN/of over/IN/over 100mb/CD/100mb became/VBD/became common/JJ/common /,/, the/DT/the disk/NN/disk data/NNS/data structures/NNS/structures and/CC/and algorithms/NNS/algorithms in/IN/in ms-dos/NNP/ms-dos had/VBD/had to/TO/to be/VB/be modified/VBN/modified to/TO/to allow/VB/allow larger/JJR/larger file/NN/file systems/NNP/systems. /NNP/( each/DT/each fat/JJ/fat entry/NN/entry was/VBD/was expanded/VBN/expanded to/TO/to 16/CD/16 bits/NNS/bits and/CC/and later/JJ/later to/TO/to 32/CD/32 bits/NNP/bits. /NNP/) the/DT/the initial/JJ/initial file-system/NN/file-system decisions/NNS/decisions were/VBD/were made/VBN/made for/IN/for efficiency/NN/efficiency reasons/NNS/reasons ;/:/; however/RB/however /,/, with/IN/with the/DT/the advent/NN/advent of/IN/of ms-dos/NNS/ms-dos version/NN/version 4/CD/4 /,/, millions/NNS/millions of/IN/of computer/NN/computer users/NNS/users were/VBD/were inconvenienced/VBN/inconvenienced when/WRB/when they/PRP/they had/VBD/had to/TO/to switch/VB/switch to/TO/to the/DT/the new/JJ/new /,/, larger/JJR/larger file/NN/file system/NNP/system. sun/NN/sun 's/POS/'s zfs/NNS/zfs file/IN/file system/NN/system uses/NNS/uses 128-bit/CD/128-bit pointers/NNS/pointers /,/, which/WDT/which theoretically/RB/theoretically should/MD/should never/RB/never need/VB/need to/TO/to be/VB/be extended/NNP/extended. /NNP/( the/DT/the minimum/JJ/minimum mass/NN/mass of/IN/of a/DT/a device/NN/device capable/JJ/capable of/IN/of storing/NN/storing 2128/CD/2128 bytes/NNS/bytes using/VBG/using atomic-level/JJ/atomic-level storage/NN/storage would/MD/would be/VB/be about/RB/about 272/CD/272 trillion/NN/trillion kilograms/NNP/kilograms. /NNP/) as/IN/as another/DT/another example/NN/example /,/, consider/NN/consider the/DT/the evolution/NN/evolution of/IN/of sun/NN/sun 's/POS/'s solaris/NNS/solaris operating/VBG/operating system/NNP/system. originally/RB/originally /,/, many/JJ/many data/NNS/data structures/NNS/structures were/VBD/were of/IN/of fixed/VBN/fixed length/NN/length /,/, allocated/VBD/allocated at/IN/at system/NN/system startup/NNP/startup. these/DT/these structures/NNS/structures included/VBD/included the/DT/the process/NN/process table/NN/table and/CC/and the/DT/the open-file/JJ/open-file table/NNP/table. when/WRB/when the/DT/the process/NN/process table/NN/table became/VBD/became full/JJ/full /,/, no/DT/no more/RBR/more processes/NNS/processes could/MD/could be/VB/be created/VBN/created /./. when/WRB/when the/DT/the file/NN/file table/NN/table became/VBD/became full/JJ/full /,/, no/DT/no more/RBR/more files/NNS/files could/MD/could be/VB/be opened/NNP/opened. the/DT/the system/NN/system would/MD/would fail/VB/fail to/TO/to provide/VB/provide services/NNS/services to/TO/to users/NNP/users. table/JJ/table sizes/NNS/sizes could/MD/could be/VB/be increased/VBN/increased only/RB/only by/IN/by recompiling/NN/recompiling the/DT/the kernel/NN/kernel and/CC/and rebooting/VBG/rebooting the/DT/the system/NNP/system. since/IN/since the/DT/the release/NN/release of/IN/of solaris/NNS/solaris 2/CD/2 /,/, almost/RB/almost all/DT/all kernel/NN/kernel structures/NNS/structures have/VBP/have been/VBN/been allocated/VBN/allocated dynamically/RB/dynamically /,/, eliminating/VBG/eliminating these/DT/these artificial/JJ/artificial limits/NNS/limits on/IN/on system/NN/system performance/NNP/performance. of/IN/of course/NN/course /,/, the/DT/the algorithms/NNS/algorithms that/WDT/that manipulate/NN/manipulate these/DT/these tables/NNS/tables are/VBP/are more/RBR/more complicated/JJ/complicated /,/, and/CC/and the/DT/the operating/NN/operating system/NN/system is/VBZ/is a/DT/a little/RB/little slower/JJR/slower because/IN/because it/PRP/it must/MD/must dynamically/RB/dynamically allocate/VB/allocate and/CC/and deallocate/VB/deallocate table/JJ/table entries/NNS/entries ;/:/; but/CC/but that/IN/that price/NN/price is/VBZ/is the/DT/the usual/JJ/usual one/CD/one for/IN/for more/JJR/more general/JJ/general functionality/NN/functionality /./. 11.6.2/CD/11.6.2 performance/NN/performance even/RB/even after/IN/after the/DT/the basic/JJ/basic file-system/NN/file-system algorithms/NNS/algorithms have/VBP/have been/VBN/been selected/VBN/selected /,/, we/PRP/we can/MD/can still/RB/still improve/VB/improve performance/NN/performance in/IN/in several/JJ/several ways/NNP/ways. as/IN/as will/MD/will be/VB/be discussed/VBN/discussed in/IN/in chapter/NN/chapter 13/CD/13 /,/, most/RBS/most disk/JJ/disk controllers/NNS/controllers include/VBP/include local/JJ/local memory/NN/memory to/TO/to form/NN/form an/DT/an on-board/JJ/on-board cache/NN/cache that/WDT/that is/VBZ/is large/JJ/large enough/RB/enough to/TO/to store/VB/store entire/JJ/entire tracks/NNS/tracks at/IN/at a/DT/a time/NNP/time. once/RB/once a/DT/a seek/NN/seek is/VBZ/is performed/VBN/performed /,/, the/DT/the track/NN/track is/VBZ/is read/VBN/read into/IN/into the/DT/the disk/NN/disk cache/NN/cache starting/VBG/starting at/IN/at the/DT/the sector/NN/sector under/IN/under the/DT/the disk/NN/disk head/NN/head 484/CD/484 chapter/NN/chapter 11/CD/11 1/0/CD/1/0 using/VBG/using read/NN/read /:/( /:/) and/CC/and write/JJ/write /NN/( /:/) tile/NN/tile system/NN/system figure/NN/figure 11.11/CD/11.11 1/0/CD/1/0 without/IN/without a/DT/a unified/JJ/unified buffer/NN/buffer cache/NN/cache /./. /NN/( reducing/VBG/reducing latency/NN/latency time/NN/time /:/) /./. the/DT/the disk/NN/disk controller/NN/controller then/RB/then transfers/VBZ/transfers any/DT/any sector/NN/sector requests/NNS/requests to/TO/to the/DT/the operating/NN/operating system/NNP/system. once/RB/once blocks/VBZ/blocks make/VB/make it/PRP/it from/IN/from the/DT/the disk/NN/disk controller/NN/controller into/IN/into main/JJ/main memory/NN/memory /,/, the/DT/the operating/NN/operating system/NN/system may/MD/may cache/VB/cache the/DT/the blocks/NNS/blocks there/RB/there /./. some/DT/some systems/NNS/systems maintain/VBP/maintain a/DT/a separate/JJ/separate section/NN/section of/IN/of main/JJ/main memory/NN/memory for/IN/for a/DT/a where/WRB/where blocks/NNS/blocks are/VBP/are kept/VBN/kept under/IN/under the/DT/the assumption/NN/assumption that/IN/that will/MD/will be/VB/be used/VBN/used again/RB/again shortly/NNP/shortly. other/JJ/other systems/NNS/systems cache/PRP/cache file/VBP/file data/NNS/data using/VBG/using a/DT/a the/DT/the page/NN/page cache/NN/cache uses/NNS/uses virtual/JJ/virtual memory/NN/memory techniques/NNS/techniques to/TO/to cache/VB/cache file/JJ/file data/NNS/data as/IN/as pages/NNS/pages rather/RB/rather than/IN/than as/IN/as file-system-oriented/JJ/file-system-oriented blocks/NNP/blocks. cachii/NN/cachii lg/NN/lg file/NN/file data/NNS/data using/VBG/using virtual/JJ/virtual addresses/NNS/addresses is/VBZ/is far/RB/far more/RBR/more efficient/JJ/efficient than/IN/than caching/NN/caching through/IN/through physical/JJ/physical disk/NN/disk blocks/NNS/blocks /,/, as/IN/as accesses/NNS/accesses interface/NN/interface with/IN/with virtual/JJ/virtual memory/NN/memory rather/RB/rather than/IN/than the/DT/the file/NN/file system/NNP/system. several/JJ/several systems-including/JJ/systems-including solaris/NNS/solaris /,/, linux/NN/linux /,/, and/CC/and windows/VBZ/windows nt/NN/nt /,/, 2000/CD/2000 /,/, and/CC/and xp-use/JJ/xp-use caching/NN/caching to/TO/to cache/VB/cache both/DT/both process/NN/process pages/NNS/pages and/CC/and file/JJ/file data/NNP/data. this/DT/this is/VBZ/is known/VBN/known as/IN/as some/DT/some versions/NNS/versions of/IN/of unix/NN/unix and/CC/and linux/NN/linux provide/VB/provide a/DT/a to/TO/to illustrate/VB/illustrate the/DT/the benefits/NNS/benefits of/IN/of the/DT/the unified/JJ/unified buffer/NN/buffer cache/NN/cache /,/, consider/NN/consider the/DT/the two/CD/two alternatives/NNS/alternatives for/IN/for opening/VBG/opening and/CC/and accessing/VBG/accessing a/DT/a file/NNP/file. one/CD/one approach/NN/approach is/VBZ/is to/TO/to use/VB/use memory/NN/memory mapping/VBG/mapping /NN/( section/NN/section 9.7/CD/9.7 /CD/) ;/:/; the/DT/the second/JJ/second is/VBZ/is to/TO/to use/VB/use the/DT/the standard/JJ/standard system/NN/system calls/VBZ/calls read/NN/read /:/( /:/) and/CC/and write/JJ/write /NN/( /:/) /./. without/IN/without a/DT/a unified/JJ/unified buffer/NN/buffer cache/NN/cache /,/, we/PRP/we have/VBP/have a/DT/a situation/NN/situation similar/JJ/similar to/TO/to figure/VB/figure 11.11/CD/11.11. here/RB/here /,/, the/DT/the read/NN/read /:/( /:/) and/CC/and write/JJ/write /NN/( /:/) system/NN/system calls/VBZ/calls go/NN/go through/IN/through the/DT/the buffer/NN/buffer cache/NN/cache /./. the/DT/the memory-mapping/JJ/memory-mapping call/NN/call /,/, however/RB/however /,/, requires/VBZ/requires using/VBG/using two/CD/two caches-the/JJ/caches-the page/NN/page cache/NN/cache and/CC/and the/DT/the buffer/NN/buffer cache/NNP/cache. a/DT/a memory/NN/memory mapping/VBG/mapping proceeds/NNS/proceeds by/IN/by reading/NN/reading in/IN/in disk/NN/disk blocks/NNS/blocks from/IN/from the/DT/the file/NN/file system/NN/system and/CC/and storing/VBG/storing them/PRP/them in/IN/in the/DT/the buffer/NN/buffer cache/NNP/cache. because/IN/because the/DT/the virtual/JJ/virtual memory/NN/memory system/NN/system does/VBZ/does not/RB/not interface/VB/interface with/IN/with the/DT/the buffer/NN/buffer cache/NN/cache /,/, the/DT/the contents/NNS/contents of/IN/of the/DT/the file/NN/file in/IN/in the/DT/the buffer/NN/buffer cache/NN/cache must/MD/must be/VB/be copied/VBN/copied into/IN/into the/DT/the page/NN/page cache/NNP/cache. this/DT/this situation/NN/situation is/VBZ/is known/VBN/known as/IN/as and/CC/and requires/NNS/requires caching/VBG/caching file-system/JJ/file-system data/NNS/data twice/NNP/twice. not/RB/not only/RB/only does/VBZ/does it/PRP/it waste/VB/waste memory/NN/memory but/CC/but it/PRP/it also/RB/also wastes/VBZ/wastes significant/JJ/significant cpu/NN/cpu and/CC/and i/o/NNP/i/o cycles/NNS/cycles due/JJ/due to/TO/to the/DT/the extra/JJ/extra data/NNS/data movement/NN/movement within/IN/within system/NN/system memory/NNP/memory. in/IN/in addition/NN/addition /,/, inconsistencies/NNS/inconsistencies between/IN/between the/DT/the two/CD/two caches/NNS/caches can/MD/can result/VB/result in/IN/in corrupt/JJ/corrupt files/NNP/files. in/IN/in contrast/NN/contrast /,/, when/WRB/when a/DT/a unified/JJ/unified buffer/NN/buffer cache/NN/cache is/VBZ/is provided/VBN/provided /,/, both/DT/both memory/NN/memory mapping/VBG/mapping and/CC/and the/DT/the read/NN/read /:/( /:/) and/CC/and write/JJ/write /NN/( /:/) system/NN/system calls/VBZ/calls use/NN/use the/DT/the same/JJ/same page/NN/page cache/NNP/cache. this/DT/this has/VBZ/has the/DT/the benefit/NN/benefit of/IN/of a/DT/a voiding/NN/voiding double/JJ/double 11.6/CD/11.6 485/CD/485 memory-mapped/JJ/memory-mapped 1/0/CD/1/0 buffer/NN/buffer cache/NN/cache file/NN/file system/NN/system figure/NN/figure 11.12/CD/11.12 1/0/CD/1/0 using/VBG/using a/DT/a unified/JJ/unified buffer/NN/buffer cache/NN/cache /./. caching/VBG/caching /,/, and/CC/and it/PRP/it allows/VBZ/allows the/DT/the virtual/JJ/virtual memory/NN/memory system/NN/system to/TO/to manage/NN/manage file-system/NN/file-system data/NNS/data /./. the/DT/the unified/JJ/unified buffer/NN/buffer cache/NN/cache is/VBZ/is shown/VBN/shown in/IN/in figure/NN/figure 11.12/CD/11.12 /./. regardless/NN/regardless of/IN/of whether/IN/whether we/PRP/we are/VBP/are caching/VBG/caching disk/NN/disk blocks/NNS/blocks or/CC/or pages/NNS/pages /:/( or/CC/or both/DT/both /NN/) /,/, lru/NN/lru /:/( section/NN/section 9.4.4/CD/9.4.4 /CD/) seems/NNS/seems a/DT/a reasonable/JJ/reasonable general-purpose/JJ/general-purpose algorithm/NN/algorithm for/IN/for block/NN/block or/CC/or page/NN/page replacement/NNP/replacement. however/RB/however /,/, the/DT/the evolution/NN/evolution of/IN/of the/DT/the solaris/NNS/solaris page-caching/JJ/page-caching algorithms/NNS/algorithms reveals/NNS/reveals the/DT/the difficulty/NN/difficulty in/IN/in choosil1.g/JJ/choosil1.g an/DT/an algorithm/NNP/algorithm. solaris/VBZ/solaris allows/VBZ/allows processes/NNS/processes and/CC/and the/DT/the page/NN/page cache/NN/cache to/TO/to share/VB/share unused/VBN/unused memory/NNP/memory. versions/NNS/versions earlier/JJR/earlier than/IN/than solaris/NNS/solaris 2.5.1/CD/2.5.1 made/VBN/made no/DT/no distmction/NN/distmction between/IN/between allocatmg/NN/allocatmg pages/NNS/pages to/TO/to a/DT/a process/NN/process and/CC/and allocating/VBG/allocating them/PRP/them to/TO/to the/DT/the page/NN/page cache/NNP/cache. as/IN/as a/DT/a result/NN/result /,/, a/DT/a system/NN/system performing/VBG/performing many/JJ/many i/0/-NONE-/i/0 operations/NNS/operations used/VBN/used most/JJS/most of/IN/of the/DT/the available/JJ/available memory/NN/memory for/IN/for caching/NN/caching pages/NNP/pages. because/IN/because of/IN/of the/DT/the high/JJ/high rates/NNS/rates of/IN/of i/0/-NONE-/i/0 /,/, the/DT/the page/NN/page scanner/NN/scanner /:/( section/NN/section 9.10.2/CD/9.10.2 /CD/) reclaimed/VBN/reclaimed pages/NNS/pages from/IN/from processesrather/DT/processesrather than/IN/than from/IN/from the/DT/the page/NN/page cache-when/-NONE-/cache-when free/JJ/free memory/NN/memory ran/VBD/ran low/NNP/low. solaris/NN/solaris 2.6/CD/2.6 and/CC/and solaris/NNS/solaris 7/CD/7 optionally/RB/optionally implemented/VBN/implemented priority/NN/priority paging/NN/paging /,/, in/IN/in which/WDT/which the/DT/the page/NN/page scanner/NN/scanner gives/VBZ/gives priority/NN/priority to/TO/to process/NN/process pages/NNS/pages over/IN/over the/DT/the page/NN/page cache/NNP/cache. solaris/VBZ/solaris 8/CD/8 applied/VBN/applied a/DT/a fixed/VBN/fixed limit/NN/limit to/TO/to process/NN/process pages/NNS/pages and/CC/and the/DT/the file-system/JJ/file-system page/NN/page cache/NN/cache /,/, preventing/VBG/preventing either/DT/either from/IN/from forcing/JJ/forcing the/DT/the other/JJ/other out/IN/out of/IN/of memory/NNP/memory. solaris/VBZ/solaris 9/CD/9 and/CC/and 10/CD/10 again/RB/again changed/VBN/changed the/DT/the algorithms/NNS/algorithms to/TO/to maximize/VB/maximize memory/NN/memory use/NN/use and/CC/and mmimize/NN/mmimize thrashing/VBG/thrashing /./. another/DT/another issue/NN/issue that/IN/that can/MD/can affect/VB/affect the/DT/the performance/NN/performance of/IN/of i/0/-NONE-/i/0 is/VBZ/is whether/IN/whether writes/NNS/writes to/TO/to the/DT/the file/NN/file system/NN/system occur/NN/occur synchronously/RB/synchronously or/CC/or asynchronously/RB/asynchronously /./. occur/NN/occur in/IN/in the/DT/the order/NN/order in/IN/in which/WDT/which the/DT/the disk/NN/disk subsystem/NN/subsystem receives/NNS/receives and/CC/and the/DT/the writes/NNS/writes are/VBP/are not/RB/not buffered/NNP/buffered. thus/RB/thus /,/, the/DT/the calling/NN/calling routine/NN/routine must/MD/must wait/VB/wait for/IN/for the/DT/the data/NNS/data to/TO/to reach/VB/reach the/DT/the disk/NN/disk drive/VBP/drive before/IN/before it/PRP/it can/MD/can proceed/NNP/proceed. in/IN/in an/DT/an the/DT/the data/NN/data are/VBP/are stored/VBN/stored in/IN/in the/DT/the cache/NN/cache /,/, and/CC/and control/NN/control returns/NNS/returns to/TO/to the/DT/the caller/NNP/caller. asynchronous/JJ/asynchronous writes/NNS/writes are/VBP/are done/VBN/done the/DT/the majority/NN/majority of/IN/of the/DT/the time/NNP/time. however/RB/however /,/, metadata/NN/metadata writes/NNS/writes /,/, among/IN/among others/NNS/others /,/, can/MD/can be/VB/be synchronous/NNP/synchronous. operating/NN/operating systems/NNS/systems frequently/RB/frequently include/VBP/include a/DT/a flag/NN/flag in/IN/in the/DT/the open/JJ/open system/NN/system call/NN/call to/TO/to allow/VB/allow a/DT/a process/NN/process to/TO/to request/NN/request that/IN/that writes/NNS/writes be/VB/be performed/VBN/performed synchxonously/-NONE-/synchxonously. for/IN/for example/NN/example /,/, databases/NNS/databases use/VBP/use this/DT/this feature/NN/feature for/IN/for atomic/JJ/atomic transactions/NNS/transactions /,/, to/TO/to assure/VB/assure that/IN/that data/NNS/data reach/VBP/reach stable/JJ/stable storage/NN/storage in/IN/in the/DT/the required/VBN/required order/NN/order /./. some/DT/some systems/NNS/systems optimize/VBP/optimize their/PRP$/their page/NN/page cache/NN/cache by/IN/by using/VBG/using different/JJ/different replacement/NN/replacement algorithms/NNS/algorithms /,/, depending/VBG/depending on/IN/on the/DT/the access/NN/access type/NN/type of/IN/of the/DT/the file/NNP/file. a/DT/a file/NN/file being/VBG/being read/NN/read or/CC/or written/VBN/written sequentially/RB/sequentially should/MD/should not/RB/not have/VB/have its/PRP$/its pages/NNS/pages replaced/VBD/replaced in/IN/in lru/NN/lru order/NN/order /,/, because/IN/because the/DT/the most/RBS/most recently/RB/recently used/VBN/used page/NN/page will/MD/will be/VB/be used/VBN/used last/JJ/last /,/, or/CC/or perhaps/RB/perhaps never/RB/never again/NNP/again. instead/RB/instead /,/, sequential/JJ/sequential access/NN/access can/MD/can be/VB/be optimized/VBN/optimized by/IN/by techniques/NNS/techniques known/VBN/known as/IN/as free-behind/JJ/free-behind and/CC/and read-ahead/NNP/read-ahead. removes/NNS/removes a/DT/a page/NN/page from/IN/from the/DT/the buffer/NN/buffer as/IN/as soon/RB/soon as/IN/as the/DT/the next/JJ/next 486/CD/486 chapter/NN/chapter 11/CD/11 11.7/CD/11.7 page/NN/page is/VBZ/is requested/NNP/requested. the/DT/the previous/JJ/previous are/VBP/are not/RB/not likely/JJ/likely to/TO/to be/VB/be used/VBN/used again/RB/again and/CC/and waste/NN/waste buffer/NN/buffer space/NNP/space. with/IN/with a/DT/a requested/VBN/requested page/NN/page and/CC/and several/JJ/several subsequent/NN/subsequent pages/NNS/pages are/VBP/are read/VBN/read and/CC/and cached/NNP/cached. these/DT/these pages/NNS/pages are/VBP/are likely/JJ/likely to/TO/to be/VB/be requested/VBN/requested after/IN/after the/DT/the current/JJ/current page/NN/page is/VBZ/is processed/NNP/processed. retrieving/NN/retrieving these/DT/these data/NNS/data from/IN/from the/DT/the disk/NN/disk in/IN/in one/CD/one transfer/NN/transfer and/CC/and caching/VBG/caching them/PRP/them saves/VBZ/saves a/DT/a considerable/JJ/considerable ancount/NN/ancount of/IN/of time/NNP/time. one/CD/one might/MD/might think/VB/think that/IN/that a/DT/a track/NN/track cache/NN/cache on/IN/on the/DT/the controller/NN/controller would/MD/would elincinate/VB/elincinate the/DT/the need/NN/need for/IN/for read-ahead/JJ/read-ahead on/IN/on a/DT/a multiprogrammed/VBN/multiprogrammed system/NNP/system. however/RB/however /,/, because/IN/because of/IN/of the/DT/the high/JJ/high latency/NN/latency and/CC/and overhead/JJ/overhead involved/VBN/involved in/IN/in making/NN/making many/JJ/many small/JJ/small transfers/NNS/transfers from/IN/from the/DT/the track/NN/track cache/NN/cache to/TO/to main/VB/main memory/NN/memory /,/, performing/VBG/performing a/DT/a read-ahead/JJ/read-ahead remains/NNS/remains beneficial/JJ/beneficial /./. the/DT/the page/NN/page cache/NN/cache /,/, the/DT/the file/NN/file system/NN/system /,/, and/CC/and the/DT/the disk/NN/disk drivers/NNS/drivers have/VBP/have some/DT/some interesting/JJ/interesting interactions/NNP/interactions. when/WRB/when data/NNS/data are/VBP/are written/VBN/written to/TO/to a/DT/a disk/NN/disk file/NN/file /,/, the/DT/the pages/NNS/pages are/VBP/are buffered/VBN/buffered in/IN/in the/DT/the cache/NN/cache /,/, and/CC/and the/DT/the disk/NN/disk driver/NN/driver sorts/NNS/sorts its/PRP$/its output/NN/output queue/NN/queue according/VBG/according to/TO/to disk/VB/disk address/NN/address /./. these/DT/these two/CD/two actions/NNS/actions allow/VBP/allow the/DT/the disk/NN/disk driver/NN/driver to/TO/to minimize/VB/minimize disk-head/JJ/disk-head seeks/NNS/seeks and/CC/and to/TO/to write/VB/write data/NNS/data at/IN/at times/NNS/times optimized/VBN/optimized for/IN/for disk/NN/disk rotation/NNP/rotation. unless/IN/unless synchronous/JJ/synchronous writes/NNS/writes are/VBP/are required/VBN/required /,/, a/DT/a process/NN/process writing/VBG/writing to/TO/to disk/VB/disk simply/RB/simply writes/VBZ/writes into/IN/into the/DT/the cache/NN/cache /,/, and/CC/and the/DT/the system/NN/system asynchronously/RB/asynchronously writes/VBZ/writes the/DT/the data/NNS/data to/TO/to disk/VB/disk when/WRB/when convenient/NNP/convenient. the/DT/the user/NN/user process/NN/process sees/NNS/sees very/RB/very fast/RB/fast writes/NNP/writes. when/WRB/when data/NNS/data are/VBP/are read/VBN/read from/IN/from a/DT/a disk/NN/disk file/NN/file /,/, the/DT/the block/NN/block i/0/-NONE-/i/0 system/NN/system does/VBZ/does some/DT/some read-ahead/JJ/read-ahead ;/:/; however/RB/however /,/, writes/VBZ/writes are/VBP/are much/RB/much more/RBR/more nearly/RB/nearly asynchronous/JJ/asynchronous than/IN/than are/VBP/are reads/NNP/reads. thus/RB/thus /,/, output/NN/output to/TO/to the/DT/the disk/NN/disk through/IN/through the/DT/the file/NN/file system/NN/system is/VBZ/is often/RB/often faster/JJR/faster than/IN/than is/VBZ/is input/VBN/input for/IN/for large/JJ/large transfers/NNS/transfers /,/, counter/NN/counter to/TO/to intuition/NN/intuition /./. files/NNS/files and/CC/and directories/NNS/directories are/VBP/are kept/VBN/kept both/DT/both in/IN/in main/JJ/main memory/NN/memory and/CC/and on/IN/on disk/NN/disk /,/, and/CC/and care/NN/care must/MD/must be/VB/be taken/VBN/taken to/TO/to ensure/VB/ensure that/IN/that a/DT/a system/NN/system failure/NN/failure does/VBZ/does not/RB/not result/VB/result in/IN/in loss/NN/loss of/IN/of data/NNS/data or/CC/or in/IN/in data/NNS/data inconsistency/NNP/inconsistency. we/PRP/we deal/VBP/deal with/IN/with these/DT/these issues/NNS/issues in/IN/in this/DT/this section/NN/section as/IN/as well/RB/well as/IN/as how/WRB/how a/DT/a system/NN/system can/MD/can recover/VB/recover from/IN/from such/JJ/such a/DT/a failure/NN/failure /./. a/DT/a system/NN/system crash/NN/crash can/MD/can cause/VB/cause inconsistencies/NNS/inconsistencies among/IN/among on-disk/JJ/on-disk file-system/JJ/file-system data/NNS/data structures/NNS/structures /,/, such/JJ/such as/IN/as directory/NN/directory structures/NNS/structures /,/, free-block/JJ/free-block pointers/NNS/pointers /,/, and/CC/and free/JJ/free fcb/NN/fcb pointers/NNP/pointers. many/JJ/many file/NN/file systems/NNS/systems apply/RB/apply changes/NNS/changes to/TO/to these/DT/these structures/NNS/structures in/IN/in place/NNP/place. a/DT/a typical/JJ/typical operation/NN/operation /,/, such/JJ/such as/IN/as creating/NN/creating a/DT/a file/NN/file /,/, can/MD/can involve/VB/involve many/JJ/many structural/JJ/structural changes/NNS/changes within/IN/within the/DT/the file/NN/file system/NN/system on/IN/on the/DT/the disk/NN/disk directory/NN/directory structures/NNS/structures are/VBP/are modified/VBN/modified /,/, fcbs/NNS/fcbs are/VBP/are allocated/VBN/allocated /,/, data/NNS/data blocks/NNS/blocks are/VBP/are allocated/VBN/allocated /,/, and/CC/and the/DT/the free/JJ/free counts/NNS/counts for/IN/for all/DT/all of/IN/of these/DT/these blocks/NNS/blocks are/VBP/are decreased/NNP/decreased. these/DT/these changes/NNS/changes can/MD/can be/VB/be interrupted/VBN/interrupted by/IN/by a/DT/a crash/JJ/crash /,/, and/CC/and inconsistencies/NNS/inconsistencies among/IN/among the/DT/the structures/NNS/structures can/MD/can result/NNP/result. for/IN/for example/NN/example /,/, the/DT/the free/JJ/free fcb/NN/fcb count/NN/count might/MD/might indicate/VB/indicate that/IN/that an/DT/an fcb/NN/fcb had/VBD/had been/VBN/been allocated/VBN/allocated /,/, but/CC/but the/DT/the directory/NN/directory structure/NN/structure might/MD/might not/RB/not point/VB/point to/TO/to the/DT/the fcb/NNP/fcb. compounding/NN/compounding this/DT/this problem/NN/problem is/VBZ/is the/DT/the caching/NN/caching that/IN/that operating/NN/operating systems/NNS/systems do/VBP/do to/TO/to optimize/VB/optimize i/0/-NONE-/i/0 performance/NNP/performance. some/DT/some changes/NNS/changes may/MD/may go/VB/go directly/RB/directly to/TO/to disk/VB/disk /,/, while/IN/while others/NNS/others may/MD/may be/VB/be cached/NNP/cached. if/IN/if the/DT/the cached/VBN/cached changes/NNS/changes do/VBP/do not/RB/not reach/VB/reach disk/NN/disk before/IN/before a/DT/a crash/JJ/crash occurs/NNS/occurs /,/, more/RBR/more corruption/NN/corruption is/VBZ/is possible/JJ/possible /./. in/IN/in addition/NN/addition to/TO/to crashes/NNS/crashes /,/, bugs/NNS/bugs in/IN/in file-system/JJ/file-system implementation/NN/implementation /,/, disk/NN/disk controllers/NNS/controllers /,/, and/CC/and even/RB/even user/JJR/user applications/NNS/applications can/MD/can corrupt/VB/corrupt a/DT/a file/NN/file system/NNP/system. file/NN/file systems/NNS/systems have/VBP/have varying/VBG/varying methods/NNS/methods to/TO/to deal/VB/deal with/IN/with corruption/NN/corruption /,/, depending/VBG/depending on/IN/on the/DT/the file-system/JJ/file-system data/NNS/data structures/NNS/structures and/CC/and algorithms/NNP/algorithms. we/PRP/we deal/VBP/deal with/IN/with these/DT/these issues/NNS/issues next/IN/next /./. 11.7.1/CD/11.7.1 consistency/NN/consistency checking/NN/checking whatever/NN/whatever the/DT/the cause/NN/cause of/IN/of corruption/NN/corruption /,/, a/DT/a file/NN/file system/NN/system must/MD/must first/RB/first detect/VB/detect the/DT/the problems/NNS/problems and/CC/and then/RB/then correct/VB/correct them/NNP/them. for/IN/for detection/NN/detection /,/, a/DT/a scan/NN/scan of/IN/of all/DT/all the/DT/the metadata/NN/metadata on/IN/on each/DT/each file/NN/file 11.7/CD/11.7 487/CD/487 system/NN/system can/MD/can confirm/VB/confirm or/CC/or deny/VB/deny the/DT/the consistency/NN/consistency of/IN/of the/DT/the systenl/NN/systenl unfortunately/RB/unfortunately /,/, this/DT/this scan/NN/scan can/MD/can take/VB/take minutes/NNS/minutes or/CC/or hours/NNS/hours and/CC/and should/MD/should occur/VB/occur every/DT/every time/NN/time the/DT/the system/NN/system boots/NNS/boots /./. alternatively/RB/alternatively /,/, a/DT/a file/NN/file system/NN/system can/MD/can record/VB/record its/PRP$/its state/NN/state within/IN/within the/DT/the file-system/JJ/file-system metadata/NN/metadata /./. at/IN/at the/DT/the start/NN/start of/IN/of any/DT/any metadata/NN/metadata change/NN/change /,/, a/DT/a status/NN/status bit/NN/bit is/VBZ/is set/VBN/set to/TO/to indicate/VB/indicate that/IN/that the/DT/the metadata/NNS/metadata is/VBZ/is in/IN/in flux/NNP/flux. if/IN/if all/DT/all updates/NNS/updates to/TO/to the/DT/the metadata/NN/metadata complete/NN/complete successfully/RB/successfully /,/, the/DT/the file/NN/file system/NN/system can/MD/can clear/VB/clear that/IN/that bit/NNP/bit. it/PRP/it however/RB/however /,/, the/DT/the status/NN/status bit/NN/bit remains/VBZ/remains set/VBN/set /,/, a/DT/a consistency/NN/consistency checker/NN/checker is/VBZ/is run/VBN/run /./. the/DT/the systems/NNS/systems program/NN/program such/JJ/such as/IN/as f/NN/f s/NNS/s ck/VBP/ck in/IN/in unix/NN/unix or/CC/or chkdsk/VB/chkdsk in/IN/in windows-compares/NNS/windows-compares the/DT/the data/NNS/data in/IN/in the/DT/the directory/NN/directory structure/NN/structure with/IN/with the/DT/the data/NNS/data blocks/VBZ/blocks on/IN/on disk/NN/disk and/CC/and tries/NNS/tries to/TO/to fix/VB/fix any/DT/any inconsistencies/NNS/inconsistencies it/PRP/it finds/NNP/finds. the/DT/the allocation/NN/allocation and/CC/and free-space-management/JJ/free-space-management algorithms/NNS/algorithms dictate/VBP/dictate what/WP/what types/NNS/types of/IN/of problems/NNS/problems the/DT/the checker/NN/checker can/MD/can find/VB/find and/CC/and how/WRB/how successful/JJ/successful it/PRP/it will/MD/will be/VB/be in/IN/in fixing/NN/fixing them/NNP/them. for/IN/for instance/NN/instance /,/, if/IN/if linked/VBN/linked allocation/NN/allocation is/VBZ/is used/VBN/used and/CC/and there/EX/there is/VBZ/is a/DT/a link/NN/link from/IN/from any/DT/any block/NN/block to/TO/to its/PRP$/its next/JJ/next block/NN/block /,/, then/RB/then the/DT/the entire/JJ/entire file/NN/file can/MD/can be/VB/be reconstructed/VBN/reconstructed from/IN/from the/DT/the data/NNS/data blocks/VBZ/blocks /,/, and/CC/and the/DT/the directory/NN/directory structure/NN/structure can/MD/can be/VB/be recreated/NNP/recreated. in/IN/in contrast/NN/contrast the/DT/the loss/NN/loss of/IN/of a/DT/a directory/NN/directory entry/NN/entry on/IN/on an/DT/an indexed/VBN/indexed allocation/NN/allocation system/NN/system can/MD/can be/VB/be disastrous/JJ/disastrous /,/, because/IN/because the/DT/the data/NNS/data blocks/VBZ/blocks have/VBP/have no/DT/no knowledge/NN/knowledge of/IN/of one/CD/one another/NNP/another. for/IN/for this/DT/this reason/NN/reason /,/, unix/NN/unix caches/NNS/caches directory/NN/directory entries/NNS/entries for/IN/for reads/NNS/reads ;/:/; but/CC/but any/DT/any write/JJ/write that/IN/that results/NNS/results in/IN/in space/NN/space allocation/NN/allocation /,/, or/CC/or other/JJ/other metadata/NN/metadata changes/NNS/changes /,/, is/VBZ/is done/VBN/done synchronously/RB/synchronously /,/, before/IN/before the/DT/the corresponding/NN/corresponding data/NNS/data blocks/NNS/blocks are/VBP/are written/NNP/written. of/IN/of course/NN/course /,/, problems/NNS/problems can/MD/can still/RB/still occur/VB/occur if/IN/if a/DT/a synchronous/JJ/synchronous write/NN/write is/VBZ/is interrupted/VBN/interrupted by/IN/by a/DT/a crash/JJ/crash /./. 11.7.2/CD/11.7.2 log-structured/JJ/log-structured file/NN/file systems/NNS/systems computer/NN/computer scientists/NNS/scientists often/RB/often fin.d/JJ/fin.d that/IN/that algorithms/NNS/algorithms and/CC/and technologies/NNS/technologies origil1.ally/RB/origil1.ally used/VBN/used in/IN/in one/CD/one area/NN/area are/VBP/are equally/RB/equally useful/JJ/useful in/IN/in other/JJ/other areas/NNP/areas. such/JJ/such is/VBZ/is the/DT/the case/NN/case with/IN/with the/DT/the database/NN/database log-based/JJ/log-based recovery/NN/recovery algorithms/NNS/algorithms described/VBD/described in/IN/in section/NN/section 6.9.2/CD/6.9.2. these/DT/these logging/NN/logging algorithms/NNS/algorithms have/VBP/have been/VBN/been applied/VBN/applied successfully/RB/successfully to/TO/to the/DT/the of/IN/of consistency/NN/consistency '-.il'c'/NN/'-.il'c'-- .ll/NN/.ll the/DT/the resulting/VBG/resulting implementations/NNS/implementations are/VBP/are known/VBN/known as/IN/as /NNP/( or/CC/or file/VB/file systems/NNS/systems /./. note/NN/note that/IN/that with/IN/with the/DT/the consistency-checking/JJ/consistency-checking approach/NN/approach discussed/VBD/discussed in/IN/in the/DT/the preceding/NN/preceding section/NN/section /,/, we/PRP/we essentially/RB/essentially allow/VBP/allow structures/NNS/structures to/TO/to break/VB/break and/CC/and repair/NN/repair them/PRP/them on/IN/on recovery/NNP/recovery. however/RB/however /,/, there/EX/there are/VBP/are several/JJ/several problems/NNS/problems with/IN/with this/DT/this approach/NNP/approach. one/CD/one is/VBZ/is that/IN/that the/DT/the inconsistency/NN/inconsistency may/MD/may be/VB/be irreparable/NNP/irreparable. the/DT/the consistency/NN/consistency check/NN/check may/MD/may not/RB/not be/VB/be able/JJ/able to/TO/to recover/VB/recover the/DT/the structures/NNS/structures /,/, resulting/VBG/resulting in/IN/in loss/NN/loss of/IN/of files/NNS/files and/CC/and even/RB/even entire/JJ/entire directories/NNS/directories /./. consistency/NN/consistency checking/VBG/checking can/MD/can require/VB/require human/JJ/human intervention/NN/intervention to/TO/to resolve/VB/resolve conflicts/NNS/conflicts /,/, and/CC/and that/IN/that is/VBZ/is inconvenient/JJ/inconvenient if/IN/if no/DT/no human/NN/human is/VBZ/is available/NNP/available. the/DT/the system/NN/system can/MD/can remain/VB/remain unavailable/JJ/unavailable until/IN/until the/DT/the human/JJ/human tells/NNS/tells it/PRP/it how/WRB/how to/TO/to proceed/NNP/proceed. consistency/NN/consistency checking/VBG/checking also/RB/also takes/VBZ/takes system/NN/system and/CC/and clock/NN/clock time/NNP/time. to/TO/to check/VB/check terabytes/NNS/terabytes of/IN/of data/NNS/data /,/, hours/NNS/hours of/IN/of clock/NN/clock time/NN/time may/MD/may be/VB/be required/VBN/required /./. the/DT/the solution/NN/solution to/TO/to this/DT/this problem/NN/problem is/VBZ/is to/TO/to apply/RB/apply log-based/JJ/log-based recovery/NN/recovery techniques/NNS/techniques to/TO/to file-system/JJ/file-system metadata/NN/metadata updates/NNP/updates. both/DT/both ntfs/NNS/ntfs and/CC/and the/DT/the veritas/NNS/veritas file/VBP/file system/NN/system use/NN/use this/DT/this method/NN/method /,/, and/CC/and it/PRP/it is/VBZ/is included/VBN/included in/IN/in recent/JJ/recent versions/NNS/versions of/IN/of ufs/NNS/ufs on/IN/on solaris/NNP/solaris. in/IN/in fact/NN/fact it/PRP/it is/VBZ/is becoming/VBG/becoming common/JJ/common on/IN/on many/JJ/many operating/NN/operating systems/NNS/systems /./. fundamentally/RB/fundamentally /,/, all/DT/all metadata/NN/metadata changes/NNS/changes are/VBP/are written/VBN/written each/DT/each set/NN/set of/IN/of operations/NNS/operations for/IN/for performing/VBG/performing a/DT/a specific/JJ/specific task/NN/task is/VBZ/is a/DT/a the/DT/the changes/NNS/changes are/VBP/are written/VBN/written to/TO/to this/DT/this log/NN/log /,/, they/PRP/they are/VBP/are considered/VBN/considered to/TO/to be/VB/be committed/VBN/committed /,/, and/CC/and the/DT/the system/NN/system call/NN/call can/MD/can return/VB/return to/TO/to the/DT/the user/NN/user process/NN/process /,/, allowing/VBG/allowing it/PRP/it to/TO/to continue/VB/continue execution/NNP/execution. meanwhile/RB/meanwhile /,/, these/DT/these log/NN/log entries/NNS/entries are/VBP/are replayed/VBN/replayed across/IN/across the/DT/the actual/JJ/actual filesystem/NN/filesystem structures/NNP/structures. as/IN/as the/DT/the changes/NNS/changes are/VBP/are made/VBN/made /,/, a/DT/a pointer/NN/pointer is/VBZ/is updated/VBN/updated to/TO/to indicate/VB/indicate 488/CD/488 chapter/NN/chapter 11/CD/11 which/WDT/which actions/NNS/actions have/VBP/have completed/VBN/completed and/CC/and which/WDT/which are/VBP/are still/RB/still incomplete/NNP/incomplete. when/WRB/when an/DT/an entire/JJ/entire committed/VBN/committed transaction/NN/transaction is/VBZ/is completed/VBN/completed /,/, it/PRP/it is/VBZ/is removed/VBN/removed from/IN/from the/DT/the log/NN/log file/NN/file /,/, which/WDT/which is/VBZ/is actually/RB/actually a/DT/a circular/JJ/circular buffer/NNP/buffer. a/DT/a cb/NN/cb /:/: ul/JJ/ul ;/:/; n/NN/n writes/VBZ/writes to/TO/to the/DT/the end/NN/end of/IN/of its/PRP$/its space/NN/space and/CC/and then/RB/then continues/VBZ/continues at/IN/at the/DT/the beginning/NN/beginning /,/, overwriting/VBG/overwriting older/JJR/older values/NNS/values as/IN/as it/PRP/it goes/NNP/goes. we/PRP/we would/MD/would not/RB/not want/VB/want the/DT/the buffer/NN/buffer to/TO/to write/VB/write over/IN/over data/NNS/data that/WDT/that had/VBD/had not/RB/not yet/RB/yet been/VBN/been saved/VBN/saved /,/, so/RB/so that/IN/that scenario/NN/scenario is/VBZ/is avoided/NNP/avoided. the/DT/the log/NN/log may/MD/may be/VB/be in/IN/in a/DT/a separate/JJ/separate section/NN/section of/IN/of the/DT/the file/NN/file system/NN/system or/CC/or even/RB/even on/IN/on a/DT/a separate/JJ/separate disk/NN/disk spindle/NNP/spindle. it/PRP/it is/VBZ/is more/RBR/more efficient/JJ/efficient /,/, but/CC/but more/RBR/more complex/JJ/complex /,/, to/TO/to have/VB/have it/PRP/it under/IN/under separate/JJ/separate read/NN/read and/CC/and write/VB/write heads/NNS/heads /,/, thereby/RB/thereby decreasing/VBG/decreasing head/NN/head contention/NN/contention and/CC/and seek/NN/seek times/NNS/times /./. if/IN/if the/DT/the system/NN/system crashes/VBZ/crashes /,/, the/DT/the log/NN/log file/NN/file will/MD/will contain/VB/contain zero/NN/zero or/CC/or more/JJR/more transactions/NNS/transactions /./. any/DT/any transactions/NNS/transactions it/PRP/it contains/VBZ/contains were/VBD/were not/RB/not completed/VBN/completed to/TO/to the/DT/the file/NN/file system/NN/system /,/, even/RB/even though/IN/though they/PRP/they were/VBD/were committed/VBN/committed by/IN/by the/DT/the operating/NN/operating system/NN/system /,/, so/RB/so they/PRP/they must/MD/must now/RB/now be/VB/be completed/VBN/completed /./. the/DT/the transactions/NNS/transactions can/MD/can be/VB/be executed/VBN/executed from/IN/from the/DT/the pointer/NN/pointer until/IN/until the/DT/the work/NN/work is/VBZ/is complete/JJ/complete so/RB/so that/IN/that the/DT/the file-system/JJ/file-system structures/NNS/structures remain/VBP/remain consistent/JJ/consistent the/DT/the only/JJ/only problem/NN/problem occurs/NNS/occurs when/WRB/when a/DT/a transaction/NN/transaction was/VBD/was aborted/VBN/aborted -that/-NONE-/-that is/VBZ/is /,/, was/VBD/was not/RB/not committed/VBN/committed before/IN/before the/DT/the system/NN/system crashed/NNP/crashed. any/DT/any changes/NNS/changes from/IN/from such/JJ/such a/DT/a transaction/NN/transaction that/WDT/that were/VBD/were applied/VBN/applied to/TO/to the/DT/the file/NN/file system/NN/system must/MD/must be/VB/be undone/VBN/undone /,/, again/RB/again preserving/VBG/preserving the/DT/the consistency/NN/consistency of/IN/of the/DT/the file/NN/file system/NN/system /./. this/DT/this recovery/NN/recovery is/VBZ/is all/DT/all that/DT/that is/VBZ/is needed/VBN/needed after/IN/after a/DT/a crash/NN/crash /,/, elimil/NN/elimil ating/VBG/ating any/DT/any problems/NNS/problems with/IN/with consistency/NN/consistency checking/VBG/checking /./. a/DT/a side/NN/side benefit/NN/benefit of/IN/of using/VBG/using logging/NN/logging on/IN/on disk/NN/disk metadata/NN/metadata updates/VBZ/updates is/VBZ/is that/IN/that those/DT/those updates/NNS/updates proceed/VBP/proceed much/RB/much faster/JJR/faster than/IN/than when/WRB/when they/PRP/they are/VBP/are applied/VBN/applied directly/RB/directly to/TO/to the/DT/the on-disk/JJ/on-disk data/NNS/data structures/NNP/structures. the/DT/the reason/NN/reason for/IN/for this/DT/this improvement/NN/improvement is/VBZ/is found/VBN/found in/IN/in the/DT/the performance/NN/performance advantage/NN/advantage of/IN/of sequential/JJ/sequential i/0/-NONE-/i/0 over/IN/over random/NN/random i/0/NNP/i/0. the/DT/the costly/JJ/costly synchronous/JJ/synchronous random/NN/random meta/NN/meta data/NNS/data writes/VBZ/writes are/VBP/are turned/VBN/turned into/IN/into much/RB/much less/JJR/less costly/RB/costly synchronous/JJ/synchronous sequential/JJ/sequential writes/NNS/writes to/TO/to the/DT/the log-structured/JJ/log-structured file/NN/file system/NN/system 's/POS/'s loggil/NN/loggil g/NN/g area/NNP/area. those/DT/those changes/NNS/changes in/IN/in turn/NN/turn are/VBP/are replayed/VBN/replayed asynchronously/RB/asynchronously via/IN/via random/NN/random writes/NNS/writes to/TO/to the/DT/the appropriate/NN/appropriate structures/NNS/structures /./. the/DT/the overall/JJ/overall result/NN/result is/VBZ/is a/DT/a significant/JJ/significant gain/NN/gain in/IN/in performance/NN/performance of/IN/of metadata-oriented/JJ/metadata-oriented operations/NNS/operations /,/, such/JJ/such as/IN/as file/JJ/file creation/NN/creation and/CC/and deletion/NN/deletion /./. 11.7.3/CD/11.7.3 other/JJ/other solutions/NNS/solutions another/DT/another alternative/NN/alternative to/TO/to consistency/NN/consistency checking/NN/checking is/VBZ/is employed/VBN/employed by/IN/by network/NN/network appliance/NN/appliance 's/POS/'s wafl/NN/wafl file/NN/file system/NN/system and/CC/and sun/NN/sun 's/POS/'s zfs/NNS/zfs file/IN/file system/NNP/system. these/DT/these systems/NNS/systems never/RB/never overwrite/JJ/overwrite blocks/NNS/blocks with/IN/with new/JJ/new data/NNP/data. rather/RB/rather /,/, a/DT/a transaction/NN/transaction writes/VBZ/writes all/DT/all data/NNS/data and/CC/and metadata/NNS/metadata changes/NNS/changes to/TO/to new/JJ/new blocks/NNP/blocks. when/WRB/when the/DT/the transaction/NN/transaction is/VBZ/is complete/JJ/complete /,/, the/DT/the metadata/NN/metadata structures/NNS/structures that/WDT/that pointed/VBD/pointed to/TO/to the/DT/the old/JJ/old versions/NNS/versions of/IN/of these/DT/these blocks/NNS/blocks are/VBP/are updated/VBN/updated to/TO/to point/NN/point to/TO/to the/DT/the new/JJ/new blocks/NNP/blocks. the/DT/the file/NN/file system/NN/system can/MD/can then/RB/then remove/VB/remove the/DT/the old/JJ/old pointers/NNS/pointers and/CC/and the/DT/the old/JJ/old blocks/NNS/blocks and/CC/and make/VB/make them/PRP/them available/JJ/available for/IN/for reuse/NNP/reuse. if/IN/if the/DT/the old/JJ/old pointers/NNS/pointers and/CC/and blocks/NNS/blocks are/VBP/are kept/VBN/kept /,/, a/DT/a is/VBZ/is created/VBN/created ;/:/; the/DT/the snapshot/NN/snapshot is/VBZ/is a/DT/a view/NN/view of/IN/of the/DT/the file/NN/file system/NN/system before/IN/before the/DT/the last/JJ/last update/NN/update took/VBD/took place/NNP/place. this/DT/this solution/NN/solution should/MD/should require/VB/require no/DT/no consistency/NN/consistency checking/VBG/checking if/IN/if the/DT/the pointer/NN/pointer update/NN/update is/VBZ/is done/VBN/done atomically/-NONE-/atomically. wafl/NN/wafl does/VBZ/does have/VB/have a/DT/a consistency/NN/consistency checke1/NNP/checke1 ~/NNP/~ however/RB/however /,/, so/RB/so some/DT/some failure/NN/failure scenarios/NNS/scenarios can/MD/can still/RB/still cause/VB/cause metadata/NNS/metadata corruption/NNP/corruption. /NNP/( see/VB/see 11.9/CD/11.9 for/IN/for details/NNS/details of/IN/of the/DT/the wafl/NN/wafl file/NN/file system/NNP/system. /NNP/) sun/NN/sun 's/POS/'s zfs/NNS/zfs takes/VBZ/takes an/DT/an even/RB/even more/RBR/more im/JJ/im ovative/JJ/ovative approach/NN/approach to/TO/to disk/VB/disk consistency/NN/consistency /./. it/PRP/it never/RB/never overwrites/VBZ/overwrites blocks/NNS/blocks /,/, just/RB/just as/IN/as is/VBZ/is the/DT/the case/NN/case with/IN/with wafl/NNP/wafl. however/RB/however /,/, zfs/VBZ/zfs goes/VBZ/goes further/RB/further and/CC/and provides/VBZ/provides check-summing/JJ/check-summing of/IN/of all/DT/all metadata/NN/metadata and/CC/and data/NNS/data blocks/NNP/blocks. this/DT/this solution/NN/solution /:/( when/WRB/when combined/VBN/combined with/IN/with raid/JJ/raid /NN/) assures/NNS/assures that/WDT/that data/NNS/data are/VBP/are always/RB/always correct/NNP/correct. zfs/NNS/zfs therefore/VBP/therefore has/VBZ/has no/DT/no consistency/NN/consistency checker/NNP/checker. /NNP/( more/JJR/more details/NNS/details on/IN/on zfs/NNS/zfs are/VBP/are found/VBN/found in/IN/in section/NN/section 12.7.6/CD/12.7.6. /CD/) 11.7/CD/11.7 489/CD/489 11.7.4/CD/11.7.4 backup/NN/backup and/CC/and restore/VB/restore magnetic/JJ/magnetic disks/NNS/disks sometimes/RB/sometimes fail/VBP/fail /,/, and/CC/and care/NN/care must/MD/must be/VB/be taken/VBN/taken to/TO/to ensure/VB/ensure that/IN/that the/DT/the data/NNS/data lost/VBD/lost in/IN/in such/JJ/such a/DT/a failure/NN/failure are/VBP/are not/RB/not lost/VBN/lost forever/NNP/forever. to/TO/to this/DT/this end/NN/end /,/, system/NN/system programs/NNS/programs can/MD/can be/VB/be used/VBN/used to/TO/to data/NNS/data from/IN/from disk/NN/disk to/TO/to another/DT/another storage/NN/storage device/NN/device /,/, such/JJ/such as/IN/as a/DT/a floppy/NN/floppy disk/NN/disk /,/, magnetic/JJ/magnetic tape/NN/tape /,/, optical/JJ/optical disk/NN/disk /,/, or/CC/or other/JJ/other hard/JJ/hard disk/NNP/disk. recovery/NN/recovery from/IN/from the/DT/the loss/NN/loss of/IN/of an/DT/an individual/NN/individual file/NN/file /,/, or/CC/or of/IN/of an/DT/an entire/JJ/entire disk/NN/disk /,/, may/MD/may then/RB/then be/VB/be a/DT/a matter/NN/matter of/IN/of the/DT/the data/NNS/data from/IN/from backup/NN/backup /./. to/TO/to minimize/VB/minimize the/DT/the copying/NN/copying needed/VBD/needed /,/, we/PRP/we can/MD/can use/VB/use information/NN/information from/IN/from each/DT/each file/NN/file 's/POS/'s directory/NN/directory entry/NNP/entry. for/IN/for instance/NN/instance /,/, if/IN/if the/DT/the backup/NN/backup program/NN/program knows/VBZ/knows when/WRB/when the/DT/the last/JJ/last backup/NN/backup of/IN/of a/DT/a file/NN/file was/VBD/was done/VBN/done /,/, and/CC/and the/DT/the file/NN/file 's/POS/'s last/JJ/last write/NN/write date/NN/date in/IN/in the/DT/the directory/NN/directory indicates/VBZ/indicates that/IN/that the/DT/the file/NN/file has/VBZ/has not/RB/not changed/VBN/changed since/IN/since that/DT/that date/NN/date /,/, then/RB/then the/DT/the file/NN/file does/VBZ/does not/RB/not need/VBP/need to/TO/to be/VB/be copied/VBN/copied again/-NONE-/again. a/DT/a typical/JJ/typical backup/NN/backup schedule/NN/schedule may/MD/may then/RB/then be/VB/be as/RB/as follows/VBZ/follows /:/: 1/CD/1. copy/NN/copy to/TO/to a/DT/a backup/NN/backup medium/NN/medium all/DT/all files/NNS/files from/IN/from the/DT/the disk/NNP/disk. this/DT/this is/VBZ/is called/VBN/called a/DT/a to/TO/to another/DT/another medium/NN/medium all/DT/all files/NNS/files changed/VBD/changed since/IN/since day/NN/day 1/CD/1. this/DT/this is/VBZ/is an/DT/an day/NN/day 3/CD/3. copy/NN/copy to/TO/to another/DT/another medium/NN/medium all/DT/all files/NNS/files changed/VBD/changed since/IN/since day/NN/day 2/CD/2 /./. day/NN/day n/NNP/n. copy/NN/copy to/TO/to another/DT/another medium/NN/medium all/DT/all files/NNS/files changed/VBD/changed since/IN/since day/NN/day n-1/NNP/n-1. then/RB/then go/VB/go back/RB/back to/TO/to day/NN/day 1/CD/1 /./. the/DT/the new/JJ/new cycle/NN/cycle can/MD/can have/VB/have its/PRP$/its backup/NN/backup written/VBN/written over/IN/over the/DT/the previous/JJ/previous set/NN/set or/CC/or onto/IN/onto a/DT/a new/JJ/new set/NN/set of/IN/of backup/NN/backup media/NNP/media. in/IN/in this/DT/this manner/NN/manner /,/, we/PRP/we can/MD/can restore/VB/restore an/DT/an entire/JJ/entire disk/NN/disk by/IN/by starting/NN/starting restores/NNS/restores with/IN/with the/DT/the full/JJ/full backup/NN/backup and/CC/and continuing/VBG/continuing through/IN/through each/DT/each of/IN/of the/DT/the incremental/JJ/incremental backups/NNP/backups. of/IN/of course/NN/course /,/, the/DT/the larger/JJR/larger the/DT/the value/NN/value of/IN/of n/NN/n /,/, the/DT/the greater/JJR/greater the/DT/the number/NN/number of/IN/of media/NNS/media that/WDT/that must/MD/must be/VB/be read/VBN/read for/IN/for a/DT/a complete/JJ/complete restore/NNP/restore. an/DT/an added/VBD/added advantage/NN/advantage of/IN/of this/DT/this backup/NN/backup cycle/NN/cycle is/VBZ/is that/IN/that we/PRP/we can/MD/can restore/VB/restore any/DT/any file/NN/file accidentally/RB/accidentally deleted/VBN/deleted during/IN/during the/DT/the cycle/NN/cycle by/IN/by retrieving/NN/retrieving the/DT/the deleted/VBN/deleted file/NN/file from/IN/from the/DT/the backup/NN/backup of/IN/of the/DT/the previous/JJ/previous day/NNP/day. the/DT/the length/NN/length of/IN/of the/DT/the cycle/NN/cycle is/VBZ/is a/DT/a compromise/NN/compromise between/IN/between the/DT/the amount/NN/amount of/IN/of backup/NN/backup medium/NN/medium needed/VBN/needed and/CC/and the/DT/the number/NN/number of/IN/of days/NNS/days back/VBP/back from/IN/from which/WDT/which a/DT/a restore/NN/restore can/MD/can be/VB/be done/NNP/done. to/TO/to decrease/VB/decrease the/DT/the number/NN/number of/IN/of tapes/NNS/tapes that/WDT/that must/MD/must be/VB/be read/VBN/read to/TO/to do/VB/do a/DT/a restore/VB/restore /,/, an/DT/an option/NN/option is/VBZ/is to/TO/to perform/NN/perform a/DT/a full/JJ/full backup/NN/backup and/CC/and then/RB/then each/DT/each day/NN/day back/RB/back up/IN/up all/DT/all files/NNS/files that/WDT/that have/VBP/have changed/VBN/changed since/IN/since the/DT/the full/JJ/full backup/NNP/backup. in/IN/in this/DT/this way/NN/way /,/, a/DT/a restore/NN/restore can/MD/can be/VB/be done/VBN/done via/IN/via the/DT/the most/RBS/most recent/JJ/recent incremental/NN/incremental backup/NN/backup and/CC/and the/DT/the full/JJ/full backup/NN/backup /,/, with/IN/with no/DT/no other/JJ/other incremental/JJ/incremental backups/NNS/backups needed/NNP/needed. the/DT/the trade-off/JJ/trade-off is/VBZ/is that/IN/that more/JJR/more files/NNS/files will/MD/will be/VB/be modified/VBN/modified each/DT/each day/NN/day /,/, so/RB/so each/DT/each successive/JJ/successive incremental/JJ/incremental backup/NN/backup involves/VBZ/involves more/JJR/more files/NNS/files and/CC/and more/JJR/more backup/NN/backup media/NNS/media /./. a/DT/a user/NN/user ncay/NN/ncay notice/NN/notice that/WDT/that a/DT/a particular/JJ/particular file/NN/file is/VBZ/is missing/VBG/missing or/CC/or corrupted/VBN/corrupted long/JJ/long after/IN/after the/DT/the damage/NN/damage was/VBD/was done/NNP/done. for/IN/for this/DT/this reason/NN/reason /,/, we/PRP/we usually/RB/usually plan/VBP/plan to/TO/to take/VB/take a/DT/a full/JJ/full backup/NN/backup from/IN/from time/NN/time to/TO/to time/VB/time that/IN/that will/MD/will be/VB/be saved/VBN/saved forever/NNP/forever. it/PRP/it is/VBZ/is a/DT/a good/JJ/good idea/NN/idea to/TO/to store/VB/store these/DT/these permanent/JJ/permanent backups/NNS/backups far/RB/far away/RB/away from/IN/from the/DT/the regular/JJ/regular backups/NNS/backups to/TO/to protect/VB/protect against/IN/against hazard/NN/hazard /,/, such/JJ/such as/IN/as a/DT/a fire/NN/fire that/WDT/that destroys/VBZ/destroys the/DT/the computer/NN/computer and/CC/and all/DT/all the/DT/the backups/NNS/backups too/RB/too /./. and/CC/and if/IN/if the/DT/the backup/NN/backup cycle/NN/cycle reuses/NNS/reuses media/NNS/media /,/, we/PRP/we must/MD/must take/VB/take care/NN/care not/RB/not to/TO/to reuse/VB/reuse the/DT/the 490/CD/490 chapter/NN/chapter 11/CD/11 11.8/CD/11.8 media/NNS/media too/RB/too many/JJ/many times-if/JJ/times-if the/DT/the media/NNS/media wear/VBP/wear out/RP/out /,/, it/PRP/it might/MD/might not/RB/not be/VB/be possible/JJ/possible to/TO/to restore/VB/restore any/DT/any data/NNS/data from/IN/from the/DT/the backups/NNS/backups /./. network/NN/network file/NN/file systems/NNS/systems are/VBP/are commonplace/NNP/commonplace. they/PRP/they are/VBP/are typically/RB/typically integrated/VBN/integrated with/IN/with the/DT/the overall/JJ/overall directory/NN/directory structure/NN/structure and/CC/and interface/NN/interface of/IN/of the/DT/the client/NN/client system/NNP/system. nfs/VBZ/nfs is/VBZ/is a/DT/a good/JJ/good example/NN/example of/IN/of a/DT/a widely/RB/widely used/JJ/used /,/, well-implemented/JJ/well-implemented client-server/NN/client-server network/NN/network file/NN/file system/NNP/system. here/RB/here /,/, we/PRP/we use/VBP/use it/PRP/it as/IN/as an/DT/an example/NN/example to/TO/to explore/VB/explore the/DT/the implementation/NN/implementation details/NNS/details of/IN/of network/NN/network file/NN/file systems/NNS/systems /./. nfs/NNS/nfs is/VBZ/is both/DT/both an/DT/an implementation/NN/implementation and/CC/and a/DT/a specification/NN/specification of/IN/of a/DT/a software/NN/software system/NN/system for/IN/for accessing/NN/accessing remote/NN/remote files/NNS/files across/IN/across lans/NNS/lans /:/( or/CC/or even/RB/even wans/VBZ/wans /:/) /./. nfs/NNS/nfs is/VBZ/is part/NN/part of/IN/of onc/NN/onc +/:/+ /,/, which/WDT/which most/RBS/most unix/CD/unix vendors/NNS/vendors and/CC/and some/DT/some pc/NN/pc operating/NN/operating systems/NNS/systems support/NNP/support. the/DT/the implementation/NN/implementation described/VBD/described here/RB/here is/VBZ/is part/NN/part of/IN/of the/DT/the solaris/NNS/solaris operating/VBG/operating system/NN/system /,/, which/WDT/which is/VBZ/is a/DT/a modified/VBN/modified version/NN/version of/IN/of unix/NN/unix svr4/NNP/svr4 running/NN/running on/IN/on sun/NN/sun workstations/NNS/workstations and/CC/and other/JJ/other hardware/NNP/hardware. it/PRP/it uses/VBZ/uses either/DT/either the/DT/the tcp/NN/tcp or/CC/or udp/VB/udp /ip/JJ//ip protocol/NN/protocol /:/( depending/VBG/depending on/IN/on the/DT/the interconnecting/NN/interconnecting network/NN/network /:/) /./. the/DT/the specification/NN/specification and/CC/and the/DT/the implementation/NN/implementation are/VBP/are intertwined/VBN/intertwined in/IN/in our/PRP$/our description/NN/description of/IN/of nfs/NNP/nfs. whenever/NN/whenever detail/NN/detail is/VBZ/is needed/VBN/needed /,/, we/PRP/we refer/VBP/refer to/TO/to the/DT/the sun/NN/sun implementation/NN/implementation ;/:/; whenever/NN/whenever the/DT/the description/NN/description is/VBZ/is general/JJ/general /,/, it/PRP/it applies/VBZ/applies to/TO/to the/DT/the specification/NN/specification also/RB/also /./. there/EX/there are/VBP/are multiple/JJ/multiple versions/NNS/versions of/IN/of nfs/NNS/nfs /,/, with/IN/with the/DT/the latest/JJS/latest being/VBG/being version/NN/version 4/CD/4. here/RB/here /,/, we/PRP/we describe/VBP/describe version/NN/version 3/CD/3 /,/, as/IN/as that/DT/that is/VBZ/is the/DT/the one/CD/one most/JJS/most commonly/RB/commonly deployed/VBN/deployed /./. 11.8.1/CD/11.8.1 overview/NN/overview nfs/NNS/nfs views/NNS/views a/DT/a set/NN/set of/IN/of interconnected/VBN/interconnected workstations/NNS/workstations as/IN/as a/DT/a set/NN/set of/IN/of independent/JJ/independent machines/NNS/machines with/IN/with independent/JJ/independent file/NN/file systems/NNP/systems. the/DT/the goal/NN/goal is/VBZ/is to/TO/to allow/VB/allow some/DT/some degree/NN/degree of/IN/of sharing/VBG/sharing among/IN/among these/DT/these file/JJ/file systems/NNS/systems /:/( on/IN/on explicit/NN/explicit request/NN/request /:/) in/IN/in a/DT/a transparent/NN/transparent manner/NNP/manner. sharing/NN/sharing is/VBZ/is based/VBN/based on/IN/on a/DT/a client-server/JJ/client-server relationship/NNP/relationship. a/DT/a machine/NN/machine may/MD/may be/VB/be /,/, and/CC/and often/RB/often is/VBZ/is /,/, both/DT/both a/DT/a client/NN/client and/CC/and a/DT/a server/NNP/server. sharing/NN/sharing is/VBZ/is allowed/VBN/allowed between/IN/between any/DT/any pair/NN/pair of/IN/of machines/NNP/machines. to/TO/to ensure/VB/ensure machine/NN/machine independence/NN/independence /,/, sharing/VBG/sharing of/IN/of a/DT/a remote/NN/remote file/NN/file system/NN/system affects/NNS/affects only/RB/only the/DT/the client/NN/client machine/NN/machine and/CC/and no/DT/no other/JJ/other machine/NN/machine /./. so/RB/so that/IN/that a/DT/a remote/NN/remote directory/NN/directory will/MD/will be/VB/be accessible/JJ/accessible in/IN/in a/DT/a transparent/NN/transparent manner/NN/manner from/IN/from a/DT/a particular/JJ/particular machine-say/NN/machine-say /,/, from/IN/from ml-a/NNP/ml-a client/NN/client of/IN/of that/DT/that machine/NN/machine must/MD/must first/RB/first carry/VB/carry out/RP/out a/DT/a mount/NN/mount operation/NNP/operation. the/DT/the semantics/NNS/semantics of/IN/of the/DT/the operation/NN/operation involve/NN/involve mounting/VBG/mounting a/DT/a remote/NN/remote directory/NN/directory over/IN/over a/DT/a directory/NN/directory of/IN/of a/DT/a local/JJ/local file/NN/file system/NNP/system. once/RB/once the/DT/the mount/NN/mount operation/NN/operation is/VBZ/is completed/VBN/completed /,/, the/DT/the mounted/VBN/mounted directory/NN/directory looks/NNS/looks like/IN/like an/DT/an integral/JJ/integral subtree/NN/subtree of/IN/of the/DT/the local/JJ/local file/NN/file system/NN/system /,/, replacing/VBG/replacing the/DT/the subtree/NN/subtree descending/VBG/descending from/IN/from the/DT/the local/JJ/local directory/NNP/directory. the/DT/the local/JJ/local directory/NN/directory becomes/VBZ/becomes the/DT/the name/NN/name of/IN/of the/DT/the root/NN/root of/IN/of the/DT/the newly/RB/newly mounted/VBN/mounted directory/NNP/directory. specification/NN/specification of/IN/of the/DT/the remote/NN/remote directory/NN/directory as/IN/as an/DT/an argument/NN/argument for/IN/for the/DT/the mount/NN/mount operation/NN/operation is/VBZ/is not/RB/not done/VBN/done transparently/RB/transparently ;/:/; the/DT/the location/NN/location /:/( or/CC/or host/NN/host name/NN/name /:/) of/IN/of the/DT/the remote/NN/remote directory/NN/directory has/VBZ/has to/TO/to be/VB/be provided/NNP/provided. however/RB/however /,/, fron/NN/fron l/NN/l then/RB/then on/IN/on /,/, users/NNS/users on/IN/on machine/NN/machine ml/NN/ml can/MD/can access/NN/access files/NNS/files in/IN/in the/DT/the remote/NN/remote directory/NN/directory in/IN/in a/DT/a totally/RB/totally transparent/JJ/transparent manner/NN/manner /./. to/TO/to illustrate/VB/illustrate file/JJ/file mounting/NN/mounting /,/, consider/NN/consider the/DT/the file/NN/file system/NN/system depicted/VBD/depicted in/IN/in figure/NN/figure 11.13/CD/11.13 /,/, where/WRB/where the/DT/the triangles/NNS/triangles represent/VBP/represent subtrees/NNS/subtrees of/IN/of directories/NNS/directories that/WDT/that are/VBP/are of/IN/of interest/NNP/interest. the/DT/the figure/NN/figure shows/VBZ/shows three/CD/three independent/JJ/independent file/NN/file systems/NNS/systems of/IN/of machines/NNS/machines named/VBN/named u/NN/u /,/, 51/CD/51 /,/, and/CC/and 52/CD/52. at/IN/at this/DT/this point/NN/point /,/, on/IN/on each/DT/each machine/NN/machine /,/, only/RB/only the/DT/the local/JJ/local files/NNS/files can/MD/can be/VB/be accessed/NNP/accessed. figure/NN/figure 11.14/CD/11.14 /CD/( a/DT/a /NN/) shows/VBZ/shows the/DT/the effects/NNS/effects of/IN/of mounting/VBG/mounting 81/CD/81 /:/: /usr/shared/JJ//usr/shared over/IN/over u/NN/u /:/: /usr/local/JJ//usr/local /./. this/DT/this figure/NN/figure depicts/VBZ/depicts the/DT/the view/NN/view users/NNS/users on/IN/on u/NN/u have/VBP/have of/IN/of their/PRP$/their file/NN/file system/NNP/system. notice/NN/notice that/WDT/that after/IN/after the/DT/the mount/NN/mount is/VBZ/is complete/JJ/complete /,/, they/PRP/they can/MD/can access/VB/access any/DT/any file/NN/file within/IN/within the/DT/the dirl/NN/dirl directory/NN/directory 11.8/CD/11.8 491/CD/491 u/NN/u /:/: s1/NNP/s1 /:/: s2/NNP/s2 /:/: usr/NN/usr usr/NN/usr usr/NN/usr figure/NN/figure 11.13/CD/11.13 three/CD/three independent/JJ/independent file/NN/file systems/NNS/systems /./. using/VBG/using the/DT/the prefix/NN/prefix /usr/NN//usr /local//NN//local/ dir1/NNP/dir1. the/DT/the original/JJ/original directory/NN/directory /usr/NN//usr /local/JJ//local on/IN/on that/DT/that machine/NN/machine is/VBZ/is no/DT/no longer/NN/longer visible/JJ/visible /./. subject/JJ/subject to/TO/to access-rights/NNS/access-rights accreditation/NN/accreditation /,/, any/DT/any file/NN/file system/NN/system /,/, or/CC/or any/DT/any directory/NN/directory within/IN/within a/DT/a file/NN/file system/NN/system /,/, can/MD/can be/VB/be mounted/VBN/mounted remotely/RB/remotely on/IN/on top/JJ/top of/IN/of any/DT/any local/JJ/local directory/NN/directory /./. diskless/NN/diskless workstations/NNS/workstations can/MD/can even/RB/even mount/VB/mount their/PRP$/their own/JJ/own roots/NNS/roots from/IN/from servers/NNP/servers. cascading/NN/cascading mounts/NNS/mounts are/VBP/are also/RB/also permitted/VBN/permitted in/IN/in some/DT/some nfs/NNS/nfs implementations/NNP/implementations. that/IN/that is/VBZ/is /,/, a/DT/a file/NN/file system/NN/system can/MD/can be/VB/be mounted/VBN/mounted over/RP/over another/DT/another file/NN/file system/NN/system that/WDT/that is/VBZ/is remotely/RB/remotely mounted/VBN/mounted /,/, not/RB/not local/NNP/local. a/DT/a machine/NN/machine is/VBZ/is affected/VBN/affected by/IN/by only/RB/only those/DT/those mounts/NNS/mounts that/IN/that it/PRP/it has/VBZ/has itself/PRP/itself invoked/NNP/invoked. mounting/VBG/mounting a/DT/a remote/NN/remote file/NN/file system/NN/system does/VBZ/does not/RB/not give/VB/give the/DT/the client/NN/client access/NN/access to/TO/to other/JJ/other file/NN/file systems/NNS/systems that/WDT/that were/VBD/were /,/, by/IN/by chance/NN/chance /,/, mounted/VBN/mounted over/IN/over the/DT/the former/JJ/former file/NN/file system/NNP/system. thus/RB/thus /,/, the/DT/the mount/NN/mount mechanism/NN/mechanism does/VBZ/does not/RB/not exhibit/VB/exhibit a/DT/a transitivity/NN/transitivity property/NN/property /./. in/IN/in figure/NN/figure 11.14/CD/11.14 /CD/( b/NN/b /:/) /,/, we/PRP/we illustrate/VBP/illustrate cascading/VBG/cascading mounts/NNP/mounts. the/DT/the figure/NN/figure shows/VBZ/shows the/DT/the result/NN/result of/IN/of mounting/NN/mounting s2/NNP/s2 /:/: /usr/JJ//usr /dir2/-NONE-//dir2 over/IN/over u/NN/u /:/: /usr/local/dir1/-NONE-//usr/local/dir1 /,/, which/WDT/which is/VBZ/is already/RB/already remotely/RB/remotely mounted/VBN/mounted from/IN/from 51/CD/51. users/NNS/users can/MD/can access/NN/access files/NNS/files within/IN/within dir2/NNP/dir2 on/IN/on u/NN/u using/VBG/using the/DT/the u/NN/u /:/: u/NN/u /:/: /:/( a/DT/a /NN/) /:/( b/NN/b /:/) figure/NN/figure 11.14/CD/11.14 mounting/VBG/mounting in/IN/in nfs/NNP/nfs. /NNP/( a/DT/a /NN/) mounts/NNP/mounts. /NNP/( b/NN/b /:/) cascading/VBG/cascading mounts/NNS/mounts /./. 492/CD/492 chapter/NN/chapter 11/CD/11 prefix/CD/prefix /usr/local/dir1/NNP//usr/local/dir1. if/IN/if a/DT/a shared/VBN/shared file/NN/file system/NN/system is/VBZ/is mounted/VBN/mounted over/IN/over a/DT/a user/NN/user 's/POS/'s home/NN/home directories/NNS/directories on/IN/on all/DT/all machines/NNS/machines in/IN/in a/DT/a network/NN/network /,/, the/DT/the user/NN/user can/MD/can log/VB/log into/IN/into any/DT/any workstation/NN/workstation and/CC/and get/VB/get his/PRP$/his honce/NN/honce environment/NNP/environment. this/DT/this property/NN/property permits/VBZ/permits one/CD/one of/IN/of the/DT/the design/NN/design goals/NNS/goals of/IN/of nfs/NNS/nfs was/VBD/was to/TO/to operate/VB/operate in/IN/in a/DT/a heterogeneous/JJ/heterogeneous environment/NN/environment of/IN/of different/JJ/different machines/NNS/machines /,/, operating/VBG/operating systems/NNS/systems /,/, and/CC/and network/NN/network architectures/NNS/architectures /./. the/DT/the nfs/NNS/nfs specification/NN/specification is/VBZ/is independent/JJ/independent of/IN/of these/DT/these media/NNS/media and/CC/and thus/RB/thus encourages/VBZ/encourages other/JJ/other implementations/NNP/implementations. this/DT/this independence/NN/independence is/VBZ/is achieved/VBN/achieved through/IN/through the/DT/the use/NN/use of/IN/of rpc/NN/rpc primitives/NNS/primitives built/VBN/built on/IN/on top/JJ/top of/IN/of an/DT/an external/JJ/external data/NNS/data representation/NN/representation /:/( xdr/NN/xdr /:/) protocol/NN/protocol used/VBD/used between/IN/between two/CD/two implementation-independent/JJ/implementation-independent interfaces/NNP/interfaces. hence/NN/hence /,/, if/IN/if the/DT/the system/NN/system consists/VBZ/consists of/IN/of heterogeneous/JJ/heterogeneous machines/NNS/machines and/CC/and file/JJ/file systems/NNS/systems that/WDT/that are/VBP/are properly/RB/properly interfaced/VBN/interfaced to/TO/to nfs/NNS/nfs /,/, file/JJ/file systems/NNS/systems of/IN/of different/JJ/different types/NNS/types can/MD/can be/VB/be mounted/VBN/mounted both/DT/both locally/RB/locally and/CC/and remotely/RB/remotely /./. the/DT/the nfs/NNS/nfs specification/NN/specification distinguishes/NNS/distinguishes between/IN/between the/DT/the services/NNS/services provided/VBN/provided by/IN/by a/DT/a mount/NN/mount mechanism/NN/mechanism and/CC/and the/DT/the actual/JJ/actual remote-file-access/NN/remote-file-access services/NNP/services. accordingly/RB/accordingly /,/, two/CD/two separate/JJ/separate protocols/NNS/protocols are/VBP/are specified/VBN/specified for/IN/for these/DT/these services/NNS/services /:/: a/DT/a mount/NN/mount protocol/NN/protocol and/CC/and a/DT/a protocol/NN/protocol for/IN/for remote/NN/remote file/NN/file accesses/NNS/accesses /,/, the/DT/the the/DT/the protocols/NNS/protocols are/VBP/are specified/VBN/specified as/IN/as sets/NNS/sets of/IN/of rpcs/NNP/rpcs. these/DT/these rpcs/NNS/rpcs are/VBP/are the/DT/the building/VBG/building blocks/NNS/blocks used/VBN/used to/TO/to implement/VB/implement transparent/NN/transparent remote/VB/remote file/JJ/file access/NN/access /./. 11.8.2/CD/11.8.2 the/DT/the mount/NN/mount protocol/NN/protocol the/DT/the establishes/NNS/establishes the/DT/the initial/JJ/initial logical/JJ/logical connection/NN/connection between/IN/between a/DT/a server/NN/server and/CC/and a/DT/a client/NNP/client. in/IN/in sun/NN/sun 's/POS/'s implementation/NN/implementation /,/, each/DT/each machine/NN/machine has/VBZ/has a/DT/a server/NN/server process/NN/process /,/, outside/IN/outside the/DT/the kernel/NN/kernel /,/, performing/VBG/performing the/DT/the protocol/NN/protocol functions/NNS/functions /./. a/DT/a mount/NN/mount operation/NN/operation includes/VBZ/includes the/DT/the name/NN/name of/IN/of the/DT/the remote/NN/remote directory/NN/directory to/TO/to be/VB/be mounted/VBN/mounted and/CC/and the/DT/the name/NN/name of/IN/of the/DT/the server/NN/server machine/NN/machine storing/VBG/storing it/NNP/it. the/DT/the mount/NN/mount request/NN/request is/VBZ/is mapped/VBN/mapped to/TO/to the/DT/the corresponding/NN/corresponding rpc/NN/rpc and/CC/and is/VBZ/is forwarded/VBN/forwarded to/TO/to the/DT/the mount/NN/mount server/NN/server running/VBG/running on/IN/on the/DT/the specific/JJ/specific server/NN/server machine/NNP/machine. the/DT/the server/NN/server maintains/VBZ/maintains an/DT/an that/IN/that specifies/NNS/specifies local/JJ/local file/NN/file systems/NNS/systems that/WDT/that it/PRP/it exports/VBZ/exports for/IN/for mounting/VBG/mounting /,/, along/IN/along with/IN/with names/NNS/names of/IN/of machines/NNS/machines that/WDT/that are/VBP/are permitted/VBN/permitted to/TO/to mount/VB/mount them/NNP/them. /NNP/( in/IN/in solaris/NN/solaris /,/, this/DT/this list/NN/list is/VBZ/is the/DT/the i/NN/i etc/dfs/dfstab/NN/etc/dfs/dfstab /,/, which/WDT/which can/MD/can be/VB/be edited/VBN/edited only/RB/only by/IN/by a/DT/a superuser/NNP/superuser. /NNP/) the/DT/the specification/NN/specification can/MD/can also/RB/also include/VB/include access/NN/access rights/NNS/rights /,/, such/JJ/such as/IN/as read/JJ/read only/NNP/only. to/TO/to simplify/VB/simplify the/DT/the maintenance/NN/maintenance of/IN/of export/NN/export lists/NNS/lists and/CC/and mount/NN/mount tables/NNS/tables /,/, a/DT/a distributed/VBN/distributed naming/VBG/naming scheme/NN/scheme can/MD/can be/VB/be used/VBN/used to/TO/to hold/VB/hold this/DT/this information/NN/information and/CC/and make/VB/make it/PRP/it available/JJ/available to/TO/to appropriate/VB/appropriate clients/NNS/clients /./. recall/NN/recall that/IN/that any/DT/any directory/NN/directory within/IN/within an/DT/an exported/JJ/exported file/NN/file system/NN/system can/MD/can be/VB/be mounted/VBN/mounted remotely/RB/remotely by/IN/by an/DT/an accredited/JJ/accredited machine/NNP/machine. a/DT/a component/NN/component unit/NN/unit is/VBZ/is such/JJ/such a/DT/a directory/NNP/directory. when/WRB/when the/DT/the server/NN/server receives/VBZ/receives a/DT/a mount/NN/mount request/NN/request that/WDT/that conforms/VBZ/conforms to/TO/to its/PRP$/its export/NN/export list/NN/list /,/, it/PRP/it returns/VBZ/returns to/TO/to the/DT/the client/NN/client a/DT/a file/NN/file handle/NN/handle that/WDT/that serves/VBZ/serves as/RB/as the/DT/the key/JJ/key for/IN/for further/JJ/further accesses/NNS/accesses to/TO/to files/NNS/files within/IN/within the/DT/the mounted/VBN/mounted file/NN/file system/NNP/system. the/DT/the file/NN/file handle/NN/handle contains/VBZ/contains all/DT/all the/DT/the information/NN/information that/IN/that the/DT/the server/NN/server needs/VBZ/needs to/TO/to distinguish/VB/distinguish an/DT/an individual/NN/individual file/NN/file it/PRP/it stores/NNP/stores. in/IN/in unix/NN/unix terms/NNS/terms /,/, the/DT/the file/NN/file handle/NN/handle consists/NNS/consists of/IN/of a/DT/a file-system/JJ/file-system identifier/NN/identifier and/CC/and an/DT/an inode/NN/inode number/NN/number to/TO/to identify/VB/identify the/DT/the exact/JJ/exact mounted/VBN/mounted directory/NN/directory within/IN/within the/DT/the exported/VBN/exported file/NN/file system/NN/system /./. the/DT/the server/NN/server also/RB/also maintains/VBZ/maintains a/DT/a list/NN/list of/IN/of the/DT/the client/NN/client machines/NNS/machines and/CC/and the/DT/the corresponding/NN/corresponding currently/RB/currently mounted/VBN/mounted directories/NNP/directories. this/DT/this list/NN/list is/VBZ/is used/VBN/used mainly/RB/mainly for/IN/for administrative/JJ/administrative purposes-for/NN/purposes-for instance/NN/instance /,/, for/IN/for notifying/NN/notifying all/DT/all clients/NNS/clients that/WDT/that the/DT/the server/NN/server is/VBZ/is going/VBG/going down/RB/down /./. only/RB/only through/IN/through addition/NN/addition and/CC/and deletion/NN/deletion of/IN/of entries/NNS/entries in/IN/in this/DT/this list/NN/list can/MD/can the/DT/the server/NN/server state/NN/state be/VB/be affected/VBN/affected by/IN/by the/DT/the mount/NN/mount protocol/NN/protocol /./. usually/RB/usually /,/, a/DT/a system/NN/system has/VBZ/has a/DT/a static/JJ/static mounting/NN/mounting preconfiguration/NN/preconfiguration that/WDT/that is/VBZ/is established/VBN/established at/IN/at boot/NN/boot time/NN/time /:/( i/PRP/i etc/vfstab/VBP/etc/vfstab in/IN/in solaris/NNS/solaris /:/) ;/:/; however/RB/however /,/, this/DT/this layout/NN/layout can/MD/can be/VB/be modified/NNP/modified. in/IN/in 11.8/CD/11.8 493/CD/493 addition/NN/addition to/TO/to the/DT/the actual/JJ/actual mount/NN/mount procedure/NN/procedure /,/, the/DT/the mount/NN/mount protocol/NN/protocol includes/VBZ/includes several/JJ/several other/JJ/other procedures/NNS/procedures /,/, such/JJ/such as/IN/as unmount/NN/unmount and/CC/and return/NN/return export/NN/export list/NN/list /./. 11.8.3/CD/11.8.3 the/DT/the nfs/NNS/nfs protocol/NN/protocol the/DT/the nfs/NNS/nfs protocol/NN/protocol provides/VBZ/provides a/DT/a set/NN/set of/IN/of rpcs/NNS/rpcs for/IN/for remote/NN/remote file/NN/file operations/NNP/operations. the/DT/the procedures/NNS/procedures support/NN/support the/DT/the following/VBG/following operations/NNS/operations /:/: searching/VBG/searching for/IN/for a/DT/a file/NN/file within/IN/within a/DT/a directory/NN/directory reading/NN/reading a/DT/a set/NN/set of/IN/of directory/NN/directory entries/NNS/entries manipulating/VBG/manipulating links/NNS/links and/CC/and directories/NNS/directories accessing/VBG/accessing file/NN/file attributes/NNS/attributes reading/VBG/reading and/CC/and writing/VBG/writing files/NNS/files these/DT/these procedures/NNS/procedures can/MD/can be/VB/be invoked/VBN/invoked only/RB/only after/IN/after a/DT/a file/NN/file handle/NN/handle for/IN/for the/DT/the remotely/RB/remotely mounted/VBN/mounted directory/NN/directory has/VBZ/has been/VBN/been established/VBN/established /./. the/DT/the omission/NN/omission of/IN/of open/JJ/open /NN/( /:/) and/CC/and close/JJ/close /NN/( /:/) operations/NNS/operations is/VBZ/is intentional/NNP/intentional. a/DT/a prominent/NN/prominent feature/NN/feature of/IN/of nfs/NNS/nfs servers/NNS/servers is/VBZ/is that/IN/that they/PRP/they are/VBP/are stateless/NNP/stateless. servers/NNS/servers do/VBP/do not/RB/not maintain/VB/maintain information/NN/information about/IN/about their/PRP$/their clients/NNS/clients from/IN/from one/CD/one access/NN/access to/TO/to another/NNP/another. no/DT/no parallels/NNS/parallels to/TO/to unix/VB/unix 's/POS/'s open-files/NNS/open-files table/JJ/table or/CC/or file/JJ/file structures/NNS/structures exist/VBP/exist on/IN/on the/DT/the server/NN/server side/NNP/side. consequently/RB/consequently /,/, each/DT/each request/NN/request has/VBZ/has to/TO/to provide/VB/provide a/DT/a full/JJ/full set/NN/set of/IN/of arguments/NNS/arguments /,/, including/VBG/including a/DT/a unique/JJ/unique file/NN/file identifier/NN/identifier and/CC/and an/DT/an absolute/JJ/absolute offset/NN/offset inside/NN/inside the/DT/the file/NN/file for/IN/for the/DT/the appropriate/NN/appropriate operations/NNS/operations /./. the/DT/the resulting/VBG/resulting design/NN/design is/VBZ/is robust/VBN/robust ;/:/; no/DT/no special/JJ/special measures/NNS/measures need/VBP/need be/VB/be taken/VBN/taken to/TO/to recover/VB/recover a/DT/a server/NN/server after/IN/after a/DT/a crash/NNP/crash. file/NN/file operations/NNS/operations must/MD/must be/VB/be idempotent/VBN/idempotent for/IN/for this/DT/this purpose/NN/purpose /./. every/DT/every nfs/NNS/nfs request/VBP/request has/VBZ/has a/DT/a sequence/NN/sequence number/NN/number /,/, allowing/VBG/allowing the/DT/the server/NN/server to/TO/to determine/VB/determine if/IN/if a/DT/a request/NN/request is/VBZ/is duplicated/VBN/duplicated or/CC/or if/IN/if any/DT/any are/VBP/are missing/VBG/missing /./. maintaining/VBG/maintaining the/DT/the list/NN/list of/IN/of clients/NNS/clients that/WDT/that we/PRP/we mentioned/VBD/mentioned seems/NNS/seems to/TO/to violate/VB/violate the/DT/the statelessness/NN/statelessness of/IN/of the/DT/the server/NNP/server. howeve1/NNP/howeve1 ~/NNP/~ this/DT/this list/NN/list is/VBZ/is not/RB/not essential/JJ/essential for/IN/for the/DT/the correct/NN/correct operation/NN/operation of/IN/of the/DT/the client/NN/client or/CC/or the/DT/the server/NN/server /,/, and/CC/and hence/NN/hence it/PRP/it does/VBZ/does not/RB/not need/VBP/need to/TO/to be/VB/be restored/VBN/restored after/IN/after a/DT/a server/NN/server crash/NNP/crash. consequently/RB/consequently /,/, it/PRP/it might/MD/might include/VB/include inconsistent/NN/inconsistent data/NNS/data and/CC/and is/VBZ/is treated/VBN/treated as/RB/as only/RB/only a/DT/a hint/NN/hint /./. a/DT/a further/JJ/further implication/NN/implication of/IN/of the/DT/the stateless-server/JJ/stateless-server philosophy/NN/philosophy and/CC/and a/DT/a result/NN/result of/IN/of the/DT/the synchrony/NN/synchrony of/IN/of an/DT/an rpc/NN/rpc is/VBZ/is that/IN/that modified/VBN/modified data/NNS/data /:/( including/VBG/including indirection/NN/indirection and/CC/and status/NN/status blocks/NNS/blocks /:/) must/MD/must be/VB/be committed/VBN/committed to/TO/to the/DT/the server/NN/server 's/POS/'s disk/NN/disk before/IN/before results/NNS/results are/VBP/are returned/VBN/returned to/TO/to the/DT/the client/NNP/client. that/IN/that is/VBZ/is /,/, a/DT/a client/NN/client can/MD/can cache/VB/cache write/JJ/write blocks/NNS/blocks /,/, but/CC/but when/WRB/when it/PRP/it flushes/VBZ/flushes them/PRP/them to/TO/to the/DT/the server/NN/server /,/, it/PRP/it assumes/VBZ/assumes that/IN/that they/PRP/they have/VBP/have reached/VBN/reached the/DT/the server/NN/server 's/POS/'s disks/NNP/disks. the/DT/the server/NN/server must/MD/must write/VB/write all/DT/all nfs/NNS/nfs data/NNS/data synchronously/NNP/synchronously. thus/RB/thus /,/, a/DT/a server/NN/server crash/NN/crash and/CC/and recovery/NN/recovery will/MD/will be/VB/be invisible/JJ/invisible to/TO/to a/DT/a client/NN/client ;/:/; all/DT/all blocks/NNS/blocks that/WDT/that the/DT/the server/NN/server is/VBZ/is managing/VBG/managing for/IN/for the/DT/the client/NN/client will/MD/will be/VB/be intact/NNP/intact. the/DT/the consequent/NN/consequent performance/NN/performance penalty/NN/penalty can/MD/can be/VB/be large/JJ/large /,/, because/IN/because the/DT/the advantages/NNS/advantages of/IN/of caching/VBG/caching are/VBP/are lost/NNP/lost. performance/NN/performance can/MD/can be/VB/be increased/VBN/increased using/VBG/using storage/NN/storage with/IN/with its/PRP$/its own/JJ/own nonvolatile/NN/nonvolatile cache/NN/cache /:/( usually/RB/usually battery-backed-up/JJ/battery-backed-up memory/NN/memory /:/) /./. the/DT/the disk/NN/disk controller/NN/controller ackiwwledges/NNS/ackiwwledges the/DT/the disk/NN/disk write/NN/write when/WRB/when the/DT/the write/JJ/write is/VBZ/is stored/VBN/stored in/IN/in the/DT/the nonvolatile/NN/nonvolatile cache/NNP/cache. in/IN/in essence/NN/essence /,/, the/DT/the host/NN/host sees/VBZ/sees a/DT/a very/RB/very fast/JJ/fast synchronous/JJ/synchronous write/NN/write /./. these/DT/these blocks/NNS/blocks remain/VBP/remain intact/NN/intact even/RB/even after/IN/after system/NN/system crash/NN/crash and/CC/and are/VBP/are written/VBN/written from/IN/from this/DT/this stable/NN/stable storage/NN/storage to/TO/to disk/VB/disk periodically/RB/periodically /./. a/DT/a single/JJ/single nfs/NNS/nfs write/VBP/write procedure/NN/procedure call/NN/call is/VBZ/is guaranteed/VBN/guaranteed to/TO/to be/VB/be atomic/JJ/atomic and/CC/and is/VBZ/is not/RB/not intermixed/VBN/intermixed with/IN/with other/JJ/other write/JJ/write calls/NNS/calls to/TO/to the/DT/the same/JJ/same file/NNP/file. the/DT/the nfs/NNS/nfs protocol/NN/protocol /,/, however/RB/however /,/, does/VBZ/does not/RB/not provide/VB/provide concurrency-control/JJ/concurrency-control mechanisms/NNP/mechanisms. a/DT/a write/JJ/write /NN/( /:/) system/NN/system call/NN/call may/MD/may 494/CD/494 chapter/NN/chapter 11/CD/11 client/NN/client server/NN/server figure/NN/figure 11.15/CD/11.15 schematic/JJ/schematic view/NN/view of/IN/of the/DT/the nfs/NNS/nfs architecture/VBP/architecture /./. be/VB/be broken/VBN/broken down/RP/down into/IN/into several/JJ/several rpc/NN/rpc writes/NNS/writes /,/, because/IN/because each/DT/each nfs/NNS/nfs write/VBP/write or/CC/or read/VB/read call/JJ/call can/NN/can contain/NN/contain up/IN/up to/TO/to 8/CD/8 kb/NN/kb of/IN/of data/NNS/data and/CC/and udp/VB/udp packets/NNS/packets are/VBP/are limited/VBN/limited to/TO/to 1,500/CD/1,500 bytes/NNP/bytes. as/IN/as a/DT/a result/NN/result /,/, two/CD/two users/NNS/users writing/VBG/writing to/TO/to the/DT/the same/JJ/same remote/NN/remote file/NN/file may/MD/may get/VB/get their/PRP$/their data/NNS/data intermixed/VBN/intermixed /./. the/DT/the claim/NN/claim is/VBZ/is that/IN/that /,/, because/IN/because lock/NN/lock management/NN/management is/VBZ/is inherently/RB/inherently stateful/JJ/stateful /,/, a/DT/a service/NN/service outside/IN/outside the/DT/the nfs/NNS/nfs should/MD/should provide/VB/provide locking/VBG/locking /NN/( and/CC/and solaris/VBZ/solaris does/VBZ/does /:/) /./. users/NNS/users are/VBP/are advised/VBN/advised to/TO/to coordinate/VB/coordinate access/NN/access to/TO/to shared/VBN/shared files/NNS/files using/VBG/using mechanisms/NNS/mechanisms outside/IN/outside the/DT/the scope/NN/scope of/IN/of nfs/NNS/nfs /./. nfs/NNS/nfs is/VBZ/is integrated/VBN/integrated into/IN/into the/DT/the operating/NN/operating system/NN/system via/IN/via a/DT/a vfs/NNP/vfs. as/IN/as an/DT/an illustration/NN/illustration of/IN/of the/DT/the architecture/NN/architecture /,/, let/VB/let 's/POS/'s trace/NN/trace how/WRB/how an/DT/an operation/NN/operation on/IN/on an/DT/an already/RB/already open/JJ/open remote/NN/remote file/NN/file is/VBZ/is handled/VBN/handled /-NONE-/( follow/RB/follow the/DT/the example/NN/example in/IN/in figure/NN/figure 11.15/CD/11.15 /CD/) /./. the/DT/the client/NN/client initiates/VBZ/initiates the/DT/the operation/NN/operation with/IN/with a/DT/a regular/JJ/regular system/NN/system call/NNP/call. the/DT/the operating-system/JJ/operating-system layer/NN/layer maps/NNS/maps this/DT/this call/NN/call to/TO/to a/DT/a vfs/NN/vfs operation/NN/operation on/IN/on the/DT/the appropriate/NN/appropriate vnode/NNP/vnode. the/DT/the vfs/NNS/vfs layer/NN/layer identifies/NNS/identifies the/DT/the file/NN/file as/IN/as a/DT/a remote/NN/remote one/CD/one and/CC/and invokes/VBZ/invokes the/DT/the appropriate/NN/appropriate nfs/VBZ/nfs procedure/NNP/procedure. an/DT/an rpc/NN/rpc call/NN/call is/VBZ/is made/VBN/made to/TO/to the/DT/the nfs/NNS/nfs service/NN/service layer/NN/layer at/IN/at the/DT/the remote/NN/remote server/NNP/server. this/DT/this call/NN/call is/VBZ/is reinjected/VBN/reinjected to/TO/to the/DT/the vfs/NNS/vfs layer/NN/layer on/IN/on the/DT/the remote/NN/remote system/NN/system /,/, which/WDT/which finds/NNS/finds that/WDT/that it/PRP/it is/VBZ/is local/JJ/local and/CC/and invokes/VBZ/invokes the/DT/the appropriate/NN/appropriate file-system/NN/file-system operation/NNP/operation. this/DT/this path/NN/path is/VBZ/is retraced/VBN/retraced to/TO/to return/VB/return the/DT/the result/NN/result /./. an/DT/an advantage/NN/advantage of/IN/of this/DT/this architecture/NN/architecture is/VBZ/is that/IN/that the/DT/the client/NN/client and/CC/and the/DT/the server/NN/server are/VBP/are identical/JJ/identical ;/:/; thus/RB/thus /,/, a/DT/a machine/NN/machine may/MD/may be/VB/be a/DT/a client/NN/client /,/, or/CC/or a/DT/a server/NN/server /,/, or/CC/or both/NNP/both. the/DT/the actual/JJ/actual service/NN/service on/IN/on each/DT/each server/NN/server is/VBZ/is performed/VBN/performed by/IN/by kernel/NN/kernel threads/NNS/threads /./. 11.8.4/CD/11.8.4 path-name/JJ/path-name translation/NN/translation in/IN/in nfs/NNS/nfs involves/NNS/involves the/DT/the parsing/VBG/parsing of/IN/of a/DT/a path/NN/path name/NN/name such/JJ/such as/IN/as /usr/local/dir1/file/NNP//usr/local/dir1/file. txt/NN/txt into/IN/into separate/JJ/separate directory/NN/directory entries/NNS/entries /,/, or/CC/or components/NNS/components /:/: /:/( 1/CD/1 /CD/) usr/NN/usr /,/, /:/( 2/CD/2 /CD/) local/JJ/local /,/, and/CC/and /:/( 3/CD/3 /CD/) dir1/NNP/dir1. path-name/NNP/path-name translation/NN/translation is/VBZ/is done/VBN/done by/IN/by breaking/NN/breaking the/DT/the path/NN/path into/IN/into component/NN/component names/NNS/names and/CC/and perform.ing/JJ/perform.ing a/DT/a separate/JJ/separate nfs/NN/nfs lookup/NN/lookup call/NN/call for/IN/for every/DT/every pair/NN/pair of/IN/of component/NN/component name/NN/name and/CC/and directory/NN/directory vnode/NNP/vnode. once/RB/once a/DT/a n10unt/NNP/n10unt point/NN/point is/VBZ/is crossed/VBN/crossed /,/, every/DT/every component/NN/component lookup/NN/lookup causes/NNS/causes a/DT/a separate/JJ/separate rpc/NN/rpc to/TO/to the/DT/the server/NNP/server. this/DT/this 11.8/CD/11.8 495/CD/495 expensive/JJ/expensive path-name-traversal/JJ/path-name-traversal scheme/NN/scheme is/VBZ/is needed/VBN/needed /,/, since/IN/since the/DT/the layout/NN/layout of/IN/of each/DT/each client/NN/client 's/POS/'s logical/JJ/logical name/NN/name space/NN/space is/VBZ/is unique/JJ/unique /,/, dictated/VBN/dictated by/IN/by the/DT/the mounts/NNS/mounts the/DT/the client/NN/client has/VBZ/has performed/NNP/performed. it/PRP/it would/MD/would be/VB/be itluch/JJ/itluch more/JJR/more efficient/JJ/efficient to/TO/to hand/VB/hand a/DT/a server/NN/server a/DT/a path/NN/path name/NN/name and/CC/and receive/JJ/receive a/DT/a target/NN/target vnode/NN/vnode once/RB/once a/DT/a mount/NN/mount point/NN/point is/VBZ/is encountered/NNP/encountered. at/IN/at any/DT/any point/NN/point /,/, however/RB/however /,/, there/EX/there might/MD/might be/VB/be another/DT/another mount/NN/mount point/NN/point for/IN/for the/DT/the particular/JJ/particular client/NN/client of/IN/of whicb/NN/whicb the/DT/the stateless/NN/stateless server/NN/server is/VBZ/is unaware/JJ/unaware /./. so/RB/so that/IN/that lookup/NN/lookup is/VBZ/is fast/VBN/fast /,/, a/DT/a directory-name-lookup/JJ/directory-name-lookup cache/NN/cache on/IN/on the/DT/the client/NN/client side/NN/side holds/NNS/holds the/DT/the vnodes/NNS/vnodes for/IN/for remote/NN/remote directory/NN/directory names/NNP/names. this/DT/this cache/NN/cache speeds/VBZ/speeds up/RP/up references/NNS/references to/TO/to files/NNS/files with/IN/with the/DT/the same/JJ/same initial/JJ/initial path/NN/path name/NNP/name. the/DT/the directory/NN/directory cache/NN/cache is/VBZ/is discarded/VBN/discarded when/WRB/when attributes/NNS/attributes returned/VBN/returned from/IN/from the/DT/the server/NN/server do/VBP/do not/RB/not match/VB/match the/DT/the attributes/NNS/attributes of/IN/of the/DT/the cached/JJ/cached vnode/NN/vnode /./. recall/NN/recall that/IN/that mounting/VBG/mounting a/DT/a remote/NN/remote file/NN/file system/NN/system on/IN/on top/JJ/top of/IN/of another/DT/another already/RB/already mounted/VBN/mounted remote/NN/remote file/NN/file system/NN/system /:/( a/DT/a cascading/NN/cascading mount/NN/mount /:/) is/VBZ/is allowed/VBN/allowed in/IN/in some/DT/some implementations/NNS/implementations of/IN/of nfs/NNP/nfs. however/RB/however /,/, a/DT/a server/NN/server can/MD/can not/RB/not act/VB/act as/IN/as an/DT/an intermediary/JJ/intermediary between/IN/between a/DT/a client/NN/client and/CC/and another/DT/another server/NNP/server. instead/RB/instead /,/, a/DT/a client/NN/client must/MD/must establish/VB/establish a/DT/a direct/JJ/direct client-server/NN/client-server com1ection/NN/com1ection with/IN/with the/DT/the second/JJ/second server/NN/server by/IN/by directly/RB/directly mounting/VBG/mounting the/DT/the desired/JJ/desired directory/NN/directory /./. when/WRB/when a/DT/a client/NN/client has/VBZ/has a/DT/a cascading/NN/cascading mount/NN/mount /,/, more/RBR/more than/IN/than one/CD/one server/NN/server can/MD/can be/VB/be involved/VBN/involved in/IN/in a/DT/a path-name/JJ/path-name traversal/NN/traversal however/RB/however /,/, each/DT/each component/NN/component lookup/NN/lookup is/VBZ/is performed/VBN/performed between/IN/between the/DT/the original/JJ/original client/NN/client and/CC/and some/DT/some server/NNP/server. therefore/NN/therefore /,/, when/WRB/when a/DT/a client/NN/client does/VBZ/does a/DT/a lookup/NN/lookup on/IN/on a/DT/a directory/NN/directory on/IN/on which/WDT/which the/DT/the server/NN/server has/VBZ/has mounted/VBN/mounted a/DT/a file/NN/file system/NN/system /,/, the/DT/the client/NN/client sees/VBZ/sees the/DT/the underlying/VBG/underlying directory/NN/directory instead/RB/instead of/IN/of the/DT/the mounted/VBN/mounted directory/NN/directory /./. 11.8.5/CD/11.8.5 remote/NN/remote operations/NNS/operations with/IN/with the/DT/the exception/NN/exception of/IN/of opening/VBG/opening and/CC/and closing/JJ/closing files/NNS/files /,/, there/EX/there is/VBZ/is almost/RB/almost a/DT/a one-to-one/NN/one-to-one correspondence/NN/correspondence between/IN/between the/DT/the regular/JJ/regular unix/NN/unix system/NN/system calls/VBZ/calls for/IN/for file/NN/file operations/NNS/operations and/CC/and the/DT/the nfs/NNS/nfs protocol/NN/protocol rpcs/NNP/rpcs. thus/RB/thus /,/, a/DT/a remote/NN/remote file/NN/file operation/NN/operation can/MD/can be/VB/be translated/VBN/translated directly/RB/directly to/TO/to the/DT/the corresponding/NN/corresponding rpc/NNP/rpc. conceptually/RB/conceptually /,/, nfs/NNS/nfs adheres/NNS/adheres to/TO/to the/DT/the remote-service/NN/remote-service paradigm/NN/paradigm ;/:/; but/CC/but in/IN/in practice/NN/practice /,/, buffering/VBG/buffering and/CC/and caching/VBG/caching techniques/NNS/techniques are/VBP/are employed/VBN/employed for/IN/for the/DT/the sake/NN/sake of/IN/of performance/NNP/performance. no/DT/no direct/JJ/direct correspondence/NN/correspondence exists/NNS/exists between/IN/between a/DT/a remote/NN/remote operation/NN/operation and/CC/and an/DT/an rpc/NNP/rpc. instead/RB/instead /,/, file/IN/file blocks/NNS/blocks and/CC/and file/JJ/file attributes/NNS/attributes are/VBP/are fetched/VBN/fetched by/IN/by the/DT/the rpcs/NNS/rpcs and/CC/and are/VBP/are cached/VBN/cached locally/NNP/locally. future/JJ/future remote/NN/remote operations/NNS/operations use/VBP/use the/DT/the cached/VBN/cached data/NNS/data /,/, subject/JJ/subject to/TO/to consistency/NN/consistency constraints/NNS/constraints /./. there/RB/there are/VBP/are two/CD/two caches/NNS/caches /:/: the/DT/the file-attribute/JJ/file-attribute /NN/( inode-infonnation/NN/inode-infonnation /:/) cache/NN/cache and/CC/and the/DT/the file-blocks/NNS/file-blocks cache/NNP/cache. when/WRB/when a/DT/a file/NN/file is/VBZ/is opened/VBN/opened /,/, the/DT/the kernel/NN/kernel checks/NNS/checks with/IN/with the/DT/the remote/NN/remote server/NN/server to/TO/to determine/VB/determine whether/IN/whether to/TO/to fetch/VB/fetch or/CC/or revalidate/VB/revalidate the/DT/the cached/JJ/cached attributes/NNP/attributes. the/DT/the cached/JJ/cached file/NN/file blocks/NNS/blocks are/VBP/are used/VBN/used only/RB/only if/IN/if the/DT/the corresponding/NN/corresponding cached/VBD/cached attributes/NNS/attributes are/VBP/are up/RP/up to/TO/to date/NNP/date. the/DT/the attribute/NN/attribute cache/NN/cache is/VBZ/is updated/VBN/updated whenever/RB/whenever new/JJ/new attributes/NNS/attributes arrive/VBP/arrive from/IN/from the/DT/the server/NNP/server. cached/VBD/cached attributes/NNS/attributes are/VBP/are /,/, by/IN/by default/NN/default /,/, discarded/VBD/discarded after/IN/after 60/CD/60 seconds/NNP/seconds. both/DT/both read-ahead/JJ/read-ahead and/CC/and delayed-write/JJ/delayed-write techniques/NNS/techniques are/VBP/are used/VBN/used between/IN/between the/DT/the server/NN/server and/CC/and the/DT/the client/NNP/client. clients/NNS/clients do/VBP/do not/RB/not free/JJ/free delayed-write/JJ/delayed-write blocks/NNS/blocks until/IN/until the/DT/the server/NN/server confirms/VBZ/confirms that/IN/that the/DT/the data/NNS/data have/VBP/have been/VBN/been written/VBN/written to/TO/to disk/VB/disk delayed-write/JJ/delayed-write is/VBZ/is retained/VBN/retained even/RB/even when/WRB/when a/DT/a file/NN/file is/VBZ/is opened/VBN/opened concurrently/RB/concurrently /,/, in/IN/in conflicting/NN/conflicting modes/NNP/modes. hence/NN/hence /,/, unix/NN/unix semantics/NNS/semantics /:/( section/NN/section 10.5.3.1/CD/10.5.3.1 /CD/) are/VBP/are not/RB/not preserved/VBN/preserved /./. tuning/NN/tuning the/DT/the system/NN/system for/IN/for performance/NN/performance makes/VBZ/makes it/PRP/it difficult/VBD/difficult to/TO/to characterize/VB/characterize the/DT/the consistency/NN/consistency semantics/NNS/semantics of/IN/of nfs/NNP/nfs. new/JJ/new files/NNS/files created/VBN/created on/IN/on a/DT/a machine/NN/machine may/MD/may not/RB/not be/VB/be visible/JJ/visible elsewhere/RB/elsewhere for/IN/for 30/CD/30 seconds/NNP/seconds. furthermore/NN/furthermore /,/, writes/VBZ/writes to/TO/to a/DT/a file/NN/file at/IN/at one/CD/one site/JJ/site may/MD/may or/CC/or may/MD/may not/RB/not be/VB/be visible/JJ/visible at/IN/at other/JJ/other sites/NNS/sites that/IN/that have/VBP/have this/DT/this file/NN/file open/NN/open for/IN/for reading/NNP/reading. new/JJ/new opens/NNS/opens of/IN/of a/DT/a file/NN/file observe/NN/observe only/RB/only the/DT/the changes/NNS/changes that/WDT/that have/VBP/have already/RB/already been/VBN/been flushed/VBN/flushed to/TO/to the/DT/the server/NNP/server. thus/RB/thus /,/, nfs/NNS/nfs provides/VBZ/provides neither/DT/neither strict/NN/strict emulation/NN/emulation of/IN/of unix/NN/unix semantics/NNS/semantics nor/CC/nor the/DT/the 496/CD/496 chapter/NN/chapter 11/CD/11 11.9/CD/11.9 session/NN/session sen/NN/sen antics/NNS/antics of/IN/of andrew/JJ/andrew /NN/( section/NN/section 10.5.3.2/CD/10.5.3.2 /CD/) .ln/JJ/.ln spite/NN/spite of/IN/of these/DT/these drawbacks/NNS/drawbacks /,/, the/DT/the utility/NN/utility and/CC/and good/JJ/good performance/NN/performance of/IN/of the/DT/the mechanism/NN/mechanism make/VBP/make it/PRP/it the/DT/the most/RBS/most widely/RB/widely used/JJ/used multi-vendor-distributed/JJ/multi-vendor-distributed system/NN/system in/IN/in operation/NN/operation /./. disk/NN/disk i/o/-NONE-/i/o has/VBZ/has a/DT/a huge/JJ/huge impact/NN/impact on/IN/on system/NN/system performance/NNP/performance. as/IN/as a/DT/a result/NN/result /,/, file-system/JJ/file-system design/NN/design and/CC/and implementation/NN/implementation command/NN/command quite/RB/quite a/DT/a lot/NN/lot of/IN/of attention/NN/attention from/IN/from system/NN/system designers/NNP/designers. some/DT/some file/NN/file systems/NNS/systems are/VBP/are general/JJ/general purpose/NN/purpose /,/, in/IN/in that/DT/that they/PRP/they can/MD/can provide/VB/provide reasonable/JJ/reasonable performance/NN/performance and/CC/and functionality/NN/functionality for/IN/for a/DT/a wide/JJ/wide variety/NN/variety of/IN/of file/NN/file sizes/NNS/sizes /,/, file/JJ/file types/NNS/types /,/, and/CC/and i/0/-NONE-/i/0 loads/NNP/loads. others/NNS/others are/VBP/are optimized/VBN/optimized for/IN/for specific/JJ/specific tasks/NNS/tasks in/IN/in an/DT/an attempt/NN/attempt to/TO/to provide/VB/provide better/JJR/better performance/NN/performance in/IN/in those/DT/those areas/NNS/areas than/IN/than general-purpose/JJ/general-purpose file/NN/file systems/NNS/systems /./. the/DT/the wafl/NN/wafl file/NN/file system/NN/system from/IN/from network/NN/network appliance/NN/appliance is/VBZ/is an/DT/an example/NN/example of/IN/of this/DT/this sort/NN/sort of/IN/of optimization/NNP/optimization. wafl/NN/wafl /,/, the/DT/the write-anywhere/JJ/write-anywhere file/NN/file layout/IN/layout /,/, is/VBZ/is a/DT/a powerful/JJ/powerful /,/, elegant/JJ/elegant file/NN/file system/NN/system optimized/VBD/optimized for/IN/for random/NN/random writes/NNS/writes /./. wafl/NN/wafl is/VBZ/is used/VBN/used exclusively/RB/exclusively on/IN/on network/NN/network file/NN/file servers/NNS/servers produced/VBN/produced by/IN/by network/NN/network appliance/NN/appliance and/CC/and so/RB/so is/VBZ/is meant/VBN/meant for/IN/for use/NN/use as/IN/as a/DT/a distributed/VBN/distributed file/NN/file system/NNP/system. it/PRP/it can/MD/can provide/VB/provide files/NNS/files to/TO/to clients/NNS/clients via/IN/via the/DT/the nfs/NNS/nfs /,/, cifs/NNS/cifs /,/, ftp/NN/ftp /,/, and/CC/and http/VB/http protocols/NNS/protocols /,/, although/IN/although it/PRP/it was/VBD/was designed/VBN/designed just/RB/just for/IN/for nfs/NNS/nfs and/CC/and cifs/NNP/cifs. when/WRB/when many/JJ/many clients/NNS/clients use/VBP/use these/DT/these protocols/NNS/protocols to/TO/to talk/VB/talk to/TO/to a/DT/a file/NN/file server/NN/server /,/, the/DT/the server/NN/server may/MD/may see/VB/see a/DT/a very/RB/very large/JJ/large demand/NN/demand for/IN/for random/NN/random reads/NNS/reads and/CC/and an/DT/an even/RB/even larger/JJR/larger demand/NN/demand for/IN/for random/NN/random writes/NNP/writes. the/DT/the nfs/NNS/nfs and/CC/and cifs/NNS/cifs protocols/NNS/protocols cache/VBP/cache data/NNS/data from/IN/from read/JJ/read operations/NNS/operations /,/, so/RB/so writes/VBZ/writes are/VBP/are of/IN/of the/DT/the greatest/JJS/greatest concern/NN/concern to/TO/to file-server/JJ/file-server creators/NNS/creators /./. wafl/NN/wafl is/VBZ/is used/VBN/used on/IN/on file/JJ/file servers/NNS/servers that/WDT/that include/VBP/include an/DT/an nvram/NN/nvram cache/NN/cache for/IN/for writes/NNS/writes /./. the/DT/the wafl/NN/wafl designers/NNS/designers took/VBD/took advantage/NN/advantage of/IN/of running/VBG/running on/IN/on a/DT/a specific/JJ/specific architecture/NN/architecture to/TO/to optimize/VB/optimize the/DT/the file/NN/file system/NN/system for/IN/for random/NN/random i/0/-NONE-/i/0 /,/, with/IN/with a/DT/a stable-storage/JJ/stable-storage cache/NN/cache in/IN/in front/NN/front /./. ease/NN/ease of/IN/of use/NN/use is/VBZ/is one/CD/one of/IN/of the/DT/the guiding/NN/guiding principles/NNS/principles of/IN/of wafl/NN/wafl /,/, because/IN/because it/PRP/it is/VBZ/is designed/VBN/designed to/TO/to be/VB/be used/VBN/used in/IN/in an/DT/an appliance/NNP/appliance. its/PRP$/its creators/NNS/creators also/RB/also designed/VBN/designed it/PRP/it to/TO/to include/VB/include a/DT/a new/JJ/new snapshot/NN/snapshot functionality/NN/functionality that/WDT/that creates/VBZ/creates multiple/VBP/multiple read-only/RB/read-only copies/NNS/copies of/IN/of the/DT/the file/NN/file system/NN/system at/IN/at different/JJ/different points/NNS/points in/IN/in time/NN/time /,/, as/IN/as we/PRP/we shall/MD/shall see/VB/see /./. the/DT/the file/NN/file system/NN/system is/VBZ/is similar/JJ/similar to/TO/to the/DT/the berkeley/NN/berkeley fast/NN/fast file/NN/file system/NN/system /,/, with/IN/with many/JJ/many modifications/NNP/modifications. it/PRP/it is/VBZ/is block-based/JJ/block-based and/CC/and uses/NNS/uses inodes/NNS/inodes to/TO/to describe/VB/describe files/NNP/files. each/DT/each inode/NN/inode contains/VBZ/contains 16/CD/16 pointers/NNS/pointers to/TO/to blocks/NNS/blocks /:/( or/CC/or indirect/VB/indirect blocks/NNS/blocks /:/) belonging/VBG/belonging to/TO/to the/DT/the file/NN/file described/VBD/described by/IN/by the/DT/the inode/NNP/inode. each/DT/each file/NN/file system/NN/system has/VBZ/has a/DT/a root/NN/root inode/NNP/inode. all/DT/all of/IN/of the/DT/the metadata/NN/metadata lives/VBZ/lives in/IN/in files/NNS/files /:/: all/DT/all inodes/NNS/inodes are/VBP/are in/IN/in one/CD/one file/NN/file /,/, the/DT/the free-block/NN/free-block map/NN/map in/IN/in another/DT/another /,/, and/CC/and the/DT/the free-inode/JJ/free-inode root/NN/root inode/NN/inode 1/CD/1 free/JJ/free blotk/NN/blotk map/NN/map i/PRP/i figure/VBP/figure 11.16/CD/11.16 the/DT/the wafl/NN/wafl file/NN/file layout/IN/layout 11.9/CD/11.9 497/CD/497 map/NN/map in/IN/in a/DT/a third/JJ/third /,/, as/IN/as shown/NN/shown in/IN/in figure/NN/figure 11.16/CD/11.16. because/IN/because these/DT/these are/VBP/are standard/JJ/standard files/NNS/files /,/, the/DT/the data/NNS/data blocks/VBZ/blocks are/VBP/are not/RB/not limited/VBN/limited in/IN/in location/NN/location and/CC/and can/MD/can be/VB/be placed/VBN/placed anywhere/-NONE-/anywhere. if/IN/if a/DT/a file/NN/file system/NN/system is/VBZ/is expanded/VBN/expanded by/IN/by addition/NN/addition of/IN/of disks/NNS/disks /,/, the/DT/the lengths/NNS/lengths of/IN/of the/DT/the metadata/NN/metadata files/NNS/files are/VBP/are automatically/RB/automatically expanded/VBN/expanded by/IN/by the/DT/the file/NN/file systen/NN/systen /./. thus/RB/thus /,/, a/DT/a wafl/NN/wafl file/NN/file system/NN/system is/VBZ/is a/DT/a tree/NN/tree of/IN/of blocks/NNS/blocks with/IN/with the/DT/the root/NN/root inode/NN/inode as/IN/as its/PRP$/its base/NNP/base. to/TO/to take/VB/take a/DT/a snapshot/NN/snapshot /,/, wafl/NN/wafl creates/VBZ/creates a/DT/a copy/NN/copy of/IN/of the/DT/the root/NN/root inode/NNP/inode. any/DT/any file/NN/file or/CC/or metadata/NNS/metadata updates/NNS/updates after/IN/after that/DT/that go/NN/go to/TO/to new/JJ/new blocks/NNS/blocks rather/RB/rather than/IN/than overwriting/VBG/overwriting their/PRP$/their existing/VBG/existing blocks/NNP/blocks. the/DT/the new/JJ/new root/NN/root inode/NN/inode points/NNS/points to/TO/to metadata/VB/metadata and/CC/and data/NNS/data changed/VBD/changed as/IN/as a/DT/a result/NN/result of/IN/of these/DT/these writes/NNP/writes. meanwhile/RB/meanwhile /,/, the/DT/the snapshot/NN/snapshot /:/( the/DT/the old/JJ/old root/NN/root inode/NN/inode /:/) still/RB/still points/VBZ/points to/TO/to the/DT/the old/JJ/old blocks/NNS/blocks /,/, which/WDT/which have/VBP/have not/RB/not been/VBN/been updated/NNP/updated. it/PRP/it therefore/RB/therefore provides/VBZ/provides access/NN/access to/TO/to the/DT/the file/NN/file system/NN/system just/RB/just as/IN/as it/PRP/it was/VBD/was at/IN/at the/DT/the instant/JJ/instant the/DT/the snapshot/NN/snapshot was/VBD/was made-and/JJ/made-and takes/NNS/takes very/RB/very little/JJ/little disk/NN/disk space/NN/space to/TO/to do/VB/do so/RB/so !/./! in/IN/in essence/NN/essence /,/, the/DT/the extra/JJ/extra disk/NN/disk space/NN/space occupied/VBD/occupied by/IN/by a/DT/a snapshot/NN/snapshot consists/VBZ/consists of/IN/of just/RB/just the/DT/the blocks/NNS/blocks that/WDT/that have/VBP/have been/VBN/been modified/VBN/modified since/IN/since the/DT/the snapshot/NN/snapshot was/VBD/was taken/VBN/taken /./. an/DT/an important/JJ/important change/NN/change from/IN/from more/RBR/more standard/JJ/standard file/NN/file systems/NNS/systems is/VBZ/is that/IN/that the/DT/the free-block/JJ/free-block map/NN/map has/VBZ/has more/JJR/more than/IN/than one/CD/one bit/NN/bit per/IN/per block/NNP/block. it/PRP/it is/VBZ/is a/DT/a bitmap/NN/bitmap with/IN/with a/DT/a bit/NN/bit set/NN/set for/IN/for each/DT/each snapshot/NN/snapshot that/IN/that is/VBZ/is using/VBG/using the/DT/the block/NNP/block. when/WRB/when all/DT/all snapshots/NNS/snapshots that/WDT/that have/VBP/have been/VBN/been using/VBG/using the/DT/the block/NN/block are/VBP/are deleted/VBN/deleted /,/, the/DT/the bit/NN/bit map/NN/map for/IN/for that/DT/that block/NN/block is/VBZ/is all/DT/all zeros/NNS/zeros /,/, and/CC/and the/DT/the block/NN/block is/VBZ/is free/JJ/free to/TO/to be/VB/be reused/NNP/reused. used/VBN/used blocks/NNS/blocks are/VBP/are never/RB/never overwritten/VBN/overwritten /,/, so/RB/so writes/VBZ/writes are/VBP/are very/RB/very fast/JJ/fast /,/, because/IN/because a/DT/a write/JJ/write can/NN/can occur/NN/occur at/IN/at the/DT/the free/JJ/free block/NN/block nearest/NN/nearest the/DT/the current/JJ/current head/NN/head location/NNP/location. there/EX/there are/VBP/are many/JJ/many other/JJ/other performance/NN/performance optimizations/NNS/optimizations in/IN/in wafl/NN/wafl as/IN/as well/RB/well /./. many/JJ/many snapshots/NNS/snapshots can/MD/can exist/VB/exist simultaneously/RB/simultaneously /,/, so/RB/so one/CD/one can/MD/can be/VB/be taken/VBN/taken each/DT/each hour/NN/hour of/IN/of the/DT/the day/NN/day and/CC/and each/DT/each day/NN/day of/IN/of the/DT/the month/NNP/month. a/DT/a user/NN/user with/IN/with access/NN/access to/TO/to these/DT/these snapshots/NNS/snapshots can/MD/can access/NN/access files/NNS/files as/IN/as they/PRP/they were/VBD/were at/IN/at any/DT/any of/IN/of the/DT/the times/NNS/times the/DT/the snapshots/NNS/snapshots were/VBD/were taken/VBN/taken /./. the/DT/the snapshot/NN/snapshot facility/NN/facility is/VBZ/is also/RB/also useful/JJ/useful for/IN/for backups/NNS/backups /,/, testing/NN/testing /,/, versioning/VBG/versioning /,/, and/CC/and so/RB/so on/IN/on /./. wafl/NN/wafl 's/POS/'s snapshot/NN/snapshot facility/NN/facility is/VBZ/is very/RB/very efficient/JJ/efficient in/IN/in that/DT/that it/PRP/it does/VBZ/does not/RB/not even/RB/even require/VB/require that/IN/that copy-on-write/JJ/copy-on-write copies/NNS/copies of/IN/of each/DT/each data/NN/data block/NN/block be/VB/be taken/VBN/taken before/IN/before the/DT/the block/NN/block is/VBZ/is modified/VBN/modified /./. other/JJ/other file/NN/file systems/NNS/systems provide/VB/provide snapshots/NNS/snapshots /,/, but/CC/but frequently/RB/frequently with/IN/with less/JJR/less efficiency/NNP/efficiency. wafl/NN/wafl snapshots/NNS/snapshots are/VBP/are depicted/VBN/depicted in/IN/in figure/NN/figure 11.17/CD/11.17 /./. newer/JJR/newer versions/NNS/versions of/IN/of wafl/NN/wafl actually/RB/actually allow/VBP/allow read-write/JJ/read-write snapshots/NNS/snapshots /,/, known/VBN/known as/IN/as ,.hj/NNP/,.hj '/POS/' '/:/'- '/POS/' clones/NNS/clones are/VBP/are also/RB/also efficient/JJ/efficient /,/, using/VBG/using the/DT/the same/JJ/same techniques/NNS/techniques as/IN/as shapshots/NNP/shapshots. in/IN/in this/DT/this case/NN/case /,/, a/DT/a read-only/JJ/read-only snapshot/NN/snapshot captures/NNS/captures the/DT/the state/NN/state of/IN/of the/DT/the file/NN/file system/NN/system /,/, and/CC/and a/DT/a clone/NN/clone refers/NNS/refers back/RB/back to/TO/to that/DT/that read-only/JJ/read-only snapshot/NNP/snapshot. any/DT/any writes/NNS/writes to/TO/to the/DT/the clone/NN/clone are/VBP/are stored/VBN/stored in/IN/in new/JJ/new blocks/NNS/blocks /,/, and/CC/and the/DT/the clone/NN/clone 's/POS/'s pointers/NNS/pointers are/VBP/are updated/VBN/updated to/TO/to refer/VB/refer to/TO/to the/DT/the new/JJ/new blocks/NNS/blocks /./. the/DT/the original/JJ/original snapshot/NN/snapshot is/VBZ/is unmodified/VBN/unmodified /,/, still/RB/still giving/VBG/giving a/DT/a view/NN/view into/IN/into the/DT/the file/JJ/file system/NN/system as/IN/as it/PRP/it was/VBD/was before/IN/before the/DT/the clone/NN/clone was/VBD/was updated/NNP/updated. clones/NNS/clones can/MD/can also/RB/also be/VB/be promoted/VBN/promoted to/TO/to replace/VB/replace the/DT/the original/JJ/original file/NN/file system/NN/system ;/:/; this/DT/this involves/VBZ/involves throwing/VBG/throwing out/RP/out all/DT/all of/IN/of the/DT/the old/JJ/old pointers/NNS/pointers and/CC/and any/DT/any associated/VBN/associated old/JJ/old blocks/NNP/blocks. clones/NNS/clones are/VBP/are useful/JJ/useful for/IN/for testing/NN/testing and/CC/and upgrades/VBZ/upgrades /,/, as/IN/as the/DT/the original/JJ/original version/NN/version is/VBZ/is left/VBN/left untouched/VBN/untouched and/CC/and the/DT/the clone/NN/clone deleted/VBD/deleted when/WRB/when the/DT/the test/NN/test is/VBZ/is done/VBN/done or/CC/or if/IN/if the/DT/the upgrade/NN/upgrade fails/VBZ/fails /./. another/DT/another feature/NN/feature that/IN/that naturally/RB/naturally falls/VBZ/falls from/IN/from the/DT/the wafl/NN/wafl file/NN/file system/NN/system implementation/NN/implementation is/VBZ/is the/DT/the duplication/NN/duplication and/CC/and synchronization/NN/synchronization of/IN/of a/DT/a set/NN/set of/IN/of data/NNS/data over/IN/over a/DT/a network/NN/network to/TO/to another/DT/another system/NNP/system. first/RB/first /,/, a/DT/a snapshot/NN/snapshot of/IN/of a/DT/a wafl/NN/wafl file/NN/file system/NN/system is/VBZ/is duplicated/VBN/duplicated to/TO/to another/DT/another system/NNP/system. when/WRB/when another/DT/another snapshot/NN/snapshot is/VBZ/is taken/VBN/taken on/IN/on the/DT/the source/NN/source system/NN/system /,/, it/PRP/it is/VBZ/is relatively/RB/relatively easy/JJ/easy to/TO/to update/VB/update the/DT/the remote/NN/remote system/NN/system just/RB/just by/IN/by sending/NN/sending over/IN/over all/DT/all blocks/NNS/blocks contained/VBD/contained in/IN/in the/DT/the new/JJ/new snapshot/NNP/snapshot. these/DT/these blocks/NNS/blocks are/VBP/are the/DT/the ones/NNS/ones that/WDT/that have/VBP/have changed/VBN/changed between/IN/between the/DT/the times/NNS/times the/DT/the two/CD/two snapshots/NNS/snapshots were/VBD/were taken/NNP/taken. the/DT/the remote/NN/remote system/NN/system adds/VBZ/adds these/DT/these blocks/NNS/blocks to/TO/to the/DT/the file/NN/file system/NN/system and/CC/and updates/VBZ/updates its/PRP$/its pointers/NNS/pointers /,/, and/CC/and the/DT/the new/JJ/new system/NN/system then/RB/then is/VBZ/is a/DT/a duplicate/NN/duplicate of/IN/of the/DT/the source/NN/source system/NN/system as/IN/as of/IN/of the/DT/the time/NN/time of/IN/of the/DT/the second/JJ/second snapshot/NNP/snapshot. repeating/NN/repeating this/DT/this process/NN/process maintains/VBZ/maintains the/DT/the remote/NN/remote system/NN/system as/IN/as a/DT/a nearly/RB/nearly up-to-date/JJ/up-to-date copy/NN/copy of/IN/of the/DT/the first/JJ/first 498/CD/498 chapter/NN/chapter 11/CD/11 11.10/CD/11.10 /CD/( a/DT/a /NN/) before/IN/before a/DT/a snapshot/NN/snapshot /./. /NN/( b/NN/b /:/) after/IN/after a/DT/a snapshot/NN/snapshot /,/, before/IN/before any/DT/any blocks/NNS/blocks change/VBP/change /./. /:/( c/NN/c /:/) after/IN/after block/NN/block d/NN/d has/VBZ/has changed/VBN/changed to/TO/to o/VB/o /./. figure/NN/figure 11.17/CD/11.17 snapshots/NNS/snapshots in/IN/in wafl/NN/wafl /./. system/NNP/system. such/JJ/such replication/NN/replication is/VBZ/is used/VBN/used for/IN/for disaster/NN/disaster recovery/NNP/recovery. should/MD/should the/DT/the first/JJ/first system/NN/system be/VB/be destroyed/VBN/destroyed /,/, most/RBS/most of/IN/of its/PRP$/its data/NNS/data are/VBP/are available/JJ/available for/IN/for use/NN/use on/IN/on the/DT/the remote/NN/remote system/NN/system /./. finally/RB/finally /,/, we/PRP/we should/MD/should note/VB/note that/IN/that sun/NN/sun 's/POS/'s zfs/NNS/zfs file/IN/file system/NN/system supports/NNS/supports similarly/RB/similarly efficient/JJ/efficient snapshots/NNS/snapshots /,/, clones/NNS/clones /,/, and/CC/and replication/NN/replication /./. the/DT/the file/NN/file system/NN/system resides/VBZ/resides permanently/RB/permanently on/IN/on secondary/JJ/secondary storage/NN/storage /,/, which/WDT/which is/VBZ/is designed/VBN/designed to/TO/to hold/VB/hold a/DT/a large/JJ/large amount/NN/amount of/IN/of data/NNS/data permanently/NNP/permanently. the/DT/the most/RBS/most common/JJ/common secondary-storage/NN/secondary-storage medium/NN/medium is/VBZ/is the/DT/the disk/NN/disk /./. physical/JJ/physical disks/NNS/disks may/MD/may be/VB/be segmented/VBN/segmented into/IN/into partitions/NNS/partitions to/TO/to control/NN/control media/NNS/media use/VBP/use and/CC/and to/TO/to allow/VB/allow multiple/JJ/multiple /,/, possibly/RB/possibly varying/VBG/varying /,/, file/JJ/file systems/NNS/systems on/IN/on a/DT/a single/JJ/single spindle/NN/spindle /./. these/DT/these file/NN/file systems/NNS/systems are/VBP/are mounted/VBN/mounted onto/IN/onto a/DT/a logical/JJ/logical file/NN/file system/NN/system architecture/NN/architecture to/TO/to make/VB/make then/RB/then available/JJ/available for/IN/for use/NNP/use. file/NN/file systems/NNS/systems are/VBP/are often/RB/often implemented/VBN/implemented in/IN/in a/DT/a layered/VBN/layered or/CC/or modular/JJ/modular structure/NNP/structure. the/DT/the lower/JJR/lower levels/NNS/levels deal/VBP/deal with/IN/with the/DT/the physical/JJ/physical properties/NNS/properties of/IN/of storage/NN/storage devices/NNP/devices. upper/NN/upper levels/NNS/levels deal/VBP/deal with/IN/with symbolic/JJ/symbolic file/NN/file names/NNS/names and/CC/and logical/JJ/logical properties/NNS/properties of/IN/of files/NNP/files. intermediate/JJ/intermediate levels/NNS/levels map/VBP/map the/DT/the logical/JJ/logical file/NN/file concepts/NNS/concepts into/IN/into physical/JJ/physical device/NN/device properties/NNS/properties /./. any/DT/any file-system/JJ/file-system type/NN/type can/MD/can have/VB/have different/JJ/different structures/NNS/structures and/CC/and algorithms/NNP/algorithms. a/DT/a vfs/NN/vfs layer/NN/layer allows/VBZ/allows the/DT/the upper/JJ/upper layers/NNS/layers to/TO/to deal/VB/deal with/IN/with each/DT/each file-system/JJ/file-system type/NN/type uniformly/NNP/uniformly. even/RB/even 499/CD/499 remote/NN/remote file/NN/file systems/NNS/systems can/MD/can be/VB/be integrated/VBN/integrated into/IN/into the/DT/the system/NN/system 's/POS/'s directory/NN/directory structure/NN/structure and/CC/and acted/VBD/acted on/IN/on by/IN/by standard/JJ/standard system/NN/system calls/VBZ/calls via/IN/via the/DT/the vfs/NNS/vfs interface/NN/interface /./. the/DT/the various/JJ/various files/NNS/files can/MD/can be/VB/be allocated/VBN/allocated space/NN/space on/IN/on the/DT/the disk/NN/disk in/IN/in three/CD/three ways/NNS/ways /:/: through/IN/through contiguous/JJ/contiguous /,/, linked/VBN/linked /,/, or/CC/or indexed/VBN/indexed allocation/NNP/allocation. contiguous/JJ/contiguous allocation/NN/allocation can/MD/can suffer/VB/suffer from/IN/from external/JJ/external fragmentation/NNP/fragmentation. direct/JJ/direct access/NN/access is/VBZ/is very/RB/very inefficient/JJ/inefficient with/IN/with linked/JJ/linked allocation/NNP/allocation. indexed/VBD/indexed allocation/NN/allocation may/MD/may require/VB/require substantial/JJ/substantial overhead/NN/overhead for/IN/for its/PRP$/its index/NN/index block/NNP/block. these/DT/these algorithms/NNS/algorithms can/MD/can be/VB/be optimized/VBN/optimized in/IN/in many/JJ/many ways/NNP/ways. contiguous/JJ/contiguous space/NN/space can/MD/can be/VB/be enlarged/VBN/enlarged through/IN/through extents/NNS/extents to/TO/to increase/VB/increase flexibility/NN/flexibility and/CC/and to/TO/to decrease/VB/decrease external/JJ/external fragmentation/NNP/fragmentation. indexed/VBD/indexed allocation/NN/allocation can/MD/can be/VB/be done/VBN/done in/IN/in clusters/NNS/clusters of/IN/of multiple/NN/multiple blocks/NNS/blocks to/TO/to increase/VB/increase throughput/NN/throughput and/CC/and to/TO/to reduce/VB/reduce the/DT/the number/NN/number of/IN/of index/NN/index entries/NNS/entries needed/NNP/needed. indexing/NN/indexing in/IN/in large/JJ/large clusters/NNS/clusters is/VBZ/is similar/JJ/similar to/TO/to contiguous/JJ/contiguous allocation/NN/allocation with/IN/with extents/NNS/extents /./. free-space/NN/free-space allocation/NN/allocation methods/NNS/methods also/RB/also influence/NN/influence the/DT/the efficiency/NN/efficiency of/IN/of disk-space/NN/disk-space use/NN/use /,/, the/DT/the performance/NN/performance of/IN/of the/DT/the file/NN/file system/NN/system /,/, and/CC/and the/DT/the reliability/NN/reliability of/IN/of secondary/JJ/secondary storage/NN/storage /./. the/DT/the methods/NNS/methods used/VBN/used include/NN/include bit/NN/bit vectors/NNS/vectors and/CC/and linked/VBD/linked lists/NNP/lists. optimizations/NNS/optimizations include/VBP/include grouping/VBG/grouping /,/, countilcg/NN/countilcg /,/, and/CC/and the/DT/the fat/JJ/fat /,/, which/WDT/which places/NNS/places the/DT/the linked/VBN/linked list/NN/list in/IN/in one/CD/one contiguous/JJ/contiguous area/NN/area /./. directory-management/JJ/directory-management routines/NNS/routines must/MD/must consider/VB/consider efficiency/NN/efficiency /,/, performance/NN/performance /,/, and/CC/and reliability/NNP/reliability. a/DT/a hash/NN/hash table/NN/table is/VBZ/is a/DT/a commonly/RB/commonly used/VBN/used method/NN/method /,/, as/IN/as it/PRP/it is/VBZ/is fast/RB/fast and/CC/and efficient/NNP/efficient. unfortunately/RB/unfortunately /,/, damage/NN/damage to/TO/to the/DT/the table/NN/table or/CC/or a/DT/a system/NN/system crash/NN/crash can/MD/can result/VB/result in/IN/in inconsistency/NN/inconsistency between/IN/between the/DT/the directory/NN/directory information/NN/information and/CC/and the/DT/the disk/NN/disk 's/POS/'s contents/NNS/contents /./. a/DT/a consistency/NN/consistency checker/NN/checker can/MD/can be/VB/be used/VBN/used to/TO/to repair/VB/repair the/DT/the damage/NNP/damage. operating-system/NNP/operating-system backup/NN/backup tools/NNS/tools allow/VBP/allow disk/NN/disk data/NNS/data to/TO/to be/VB/be copied/VBN/copied to/TO/to tape/NN/tape /,/, enabling/VBG/enabling the/DT/the user/NN/user to/TO/to recover/VB/recover from/IN/from data/NNS/data or/CC/or even/RB/even disk/VB/disk loss/NN/loss due/JJ/due to/TO/to hardware/VB/hardware failure/NN/failure /,/, operating/NN/operating system/NN/system bug/NN/bug /,/, or/CC/or user/NN/user error/NN/error /./. network/NN/network file/NN/file systems/NNS/systems /,/, such/JJ/such as/IN/as nfs/NNS/nfs /,/, use/VBP/use client-server/JJ/client-server methodology/NN/methodology to/TO/to allow/VB/allow users/NNS/users to/TO/to access/NN/access files/NNS/files and/CC/and directories/NNS/directories from/IN/from remote/NN/remote machines/NNS/machines as/IN/as if/IN/if they/PRP/they were/VBD/were on/IN/on local/JJ/local file/NN/file systems/NNP/systems. system/NN/system calls/VBZ/calls on/IN/on the/DT/the client/NN/client are/VBP/are translated/VBN/translated into/IN/into network/NN/network protocols/NNS/protocols and/CC/and retranslated/VBD/retranslated into/IN/into file-system/JJ/file-system operations/NNS/operations on/IN/on the/DT/the server/NN/server /./. networking/NN/networking and/CC/and multiple-client/JJ/multiple-client access/NN/access create/NN/create challenges/NNS/challenges in/IN/in the/DT/the areas/NNS/areas of/IN/of data/NNS/data consistency/NN/consistency and/CC/and performance/NN/performance /./. due/JJ/due to/TO/to the/DT/the fundamental/JJ/fundamental role/NN/role that/WDT/that file/NN/file systems/NNS/systems play/VBP/play in/IN/in system/NN/system operation/NN/operation /,/, their/PRP$/their performance/NN/performance and/CC/and reliability/NN/reliability are/VBP/are crucial/NNP/crucial. techniques/NNS/techniques such/JJ/such as/IN/as log/NN/log structures/NNS/structures and/CC/and cachirtg/NN/cachirtg help/NN/help improve/VB/improve performance/NN/performance /,/, while/IN/while log/NN/log structures/NNS/structures and/CC/and raid/VBD/raid improve/VB/improve reliability/NNP/reliability. the/DT/the wafl/NN/wafl file/NN/file system/NN/system is/VBZ/is an/DT/an example/NN/example of/IN/of optimization/NN/optimization of/IN/of performance/NN/performance to/TO/to match/VB/match a/DT/a specific/JJ/specific i/o/NN/i/o load/NN/load /./. 11.1/CD/11.1 in/IN/in what/WP/what situations/NNS/situations would/MD/would using/VBG/using memory/NN/memory as/IN/as a/DT/a ram/NN/ram disk/NN/disk be/VB/be more/RBR/more useful/JJ/useful than/IN/than using/VBG/using it/PRP/it as/IN/as a/DT/a disk/NN/disk cache/NN/cache 11.2/CD/11.2 consider/NN/consider a/DT/a file/NN/file systenc/NN/systenc that/WDT/that uses/VBZ/uses a/DT/a modifed/VBN/modifed contiguous-allocation/NN/contiguous-allocation scheme/NN/scheme with/IN/with support/NN/support for/IN/for extents/NNP/extents. a/DT/a file/NN/file is/VBZ/is a/DT/a collection/NN/collection of/IN/of extents/NNS/extents /,/, with/IN/with each/DT/each extent/NN/extent corresponding/VBG/corresponding to/TO/to a/DT/a contiguous/JJ/contiguous set/NN/set of/IN/of blocks/NNP/blocks. a/DT/a key/JJ/key issue/NN/issue in/IN/in such/JJ/such systems/NNS/systems is/VBZ/is the/DT/the degree/NN/degree of/IN/of variability/NN/variability in/IN/in the/DT/the size/NN/size of/IN/of the/DT/the 500/CD/500 chapter/NN/chapter 11/CD/11 extents/NNP/extents. what/WP/what are/VBP/are the/DT/the advantages/NNS/advantages and/CC/and disadvantages/NNS/disadvantages of/IN/of the/DT/the following/JJ/following schemes/NNS/schemes a/NNP/a. all/DT/all extents/NNS/extents are/VBP/are of/IN/of the/DT/the same/JJ/same size/NN/size /,/, and/CC/and the/DT/the size/NN/size is/VBZ/is predetermined/VBN/predetermined /./. b/NNP/b. extents/NNS/extents can/MD/can be/VB/be of/IN/of any/DT/any size/NN/size and/CC/and are/VBP/are allocated/VBN/allocated dynamically/RB/dynamically /./. c/NNP/c. extents/NNS/extents can/MD/can be/VB/be of/IN/of a/DT/a few/JJ/few fixed/VBN/fixed sizes/NNS/sizes /,/, and/CC/and these/DT/these sizes/NNS/sizes are/VBP/are predetermined/VBN/predetermined /./. 11.3/CD/11.3 some/DT/some file/JJ/file systems/NNS/systems allow/VBP/allow disk/NN/disk storage/NN/storage to/TO/to be/VB/be allocated/VBN/allocated at/IN/at different/JJ/different levels/NNS/levels of/IN/of granularity/NNP/granularity. for/IN/for instance/NN/instance /,/, a/DT/a file/NN/file system/NN/system could/MD/could allocate/VB/allocate 4/CD/4 kb/NN/kb of/IN/of disk/NN/disk space/NN/space as/IN/as a/DT/a single/JJ/single 4-kb/CD/4-kb block/NN/block or/CC/or as/IN/as eight/CD/eight 512-byte/CD/512-byte blocks/NNP/blocks. how/WRB/how could/MD/could we/VB/we take/VB/take advantage/NN/advantage of/IN/of this/DT/this flexibility/NN/flexibility to/TO/to improve/VB/improve performance/NN/performance what/WP/what modifications/NNS/modifications would/MD/would have/VB/have to/TO/to be/VB/be made/VBN/made to/TO/to the/DT/the free-space/NN/free-space management/NN/management scheme/NN/scheme in/IN/in order/NN/order to/TO/to support/VB/support this/DT/this feature/NN/feature 11.4/CD/11.4 what/WP/what are/VBP/are the/DT/the advantages/NNS/advantages of/IN/of the/DT/the variant/JJ/variant of/IN/of linked/VBN/linked allocation/NN/allocation that/IN/that uses/NNS/uses a/DT/a fat/JJ/fat to/TO/to chain/VB/chain together/RP/together the/DT/the blocks/NNS/blocks of/IN/of a/DT/a file/NN/file 11.5/CD/11.5 consider/NN/consider a/DT/a file/NN/file currently/RB/currently consisting/VBG/consisting of/IN/of 100/CD/100 blocks/NNP/blocks. assume/NN/assume that/WDT/that the/DT/the filecontrol/NN/filecontrol block/NN/block /:/( and/CC/and the/DT/the index/NN/index block/NN/block /,/, in/IN/in the/DT/the case/NN/case of/IN/of indexed/VBN/indexed allocation/NN/allocation /:/) is/VBZ/is already/RB/already in/IN/in memory/NNP/memory. calculate/NN/calculate how/WRB/how many/JJ/many disk/NN/disk i/0/-NONE-/i/0 operations/NNS/operations are/VBP/are required/VBN/required for/IN/for contiguous/JJ/contiguous /,/, linked/VBN/linked /,/, and/CC/and indexed/VBD/indexed /CD/( single-level/JJ/single-level /NN/) allocation/NN/allocation strategies/NNS/strategies /,/, if/IN/if /,/, for/IN/for one/CD/one block/NN/block /,/, the/DT/the following/VBG/following conditions/NNS/conditions hold/NNP/hold. in/IN/in the/DT/the contiguous-allocation/NN/contiguous-allocation case/NN/case /,/, assume/NN/assume that/IN/that there/EX/there is/VBZ/is no/DT/no room/NN/room to/TO/to grow/VB/grow at/IN/at the/DT/the beginning/NN/beginning but/CC/but there/EX/there is/VBZ/is room/NN/room to/TO/to grow/VB/grow at/IN/at the/DT/the end/NNP/end. also/RB/also assume/VBD/assume that/IN/that the/DT/the block/NN/block information/NN/information to/TO/to be/VB/be added/VBN/added is/VBZ/is stored/VBN/stored in/IN/in memory/NN/memory /./. a/NNP/a. the/DT/the block/NN/block is/VBZ/is added/VBN/added at/IN/at the/DT/the beginning/NN/beginning /./. b/NNP/b. the/DT/the block/NN/block is/VBZ/is added/VBN/added in/IN/in the/DT/the middle/NN/middle /./. c/NNP/c. the/DT/the block/NN/block is/VBZ/is added/VBN/added at/IN/at the/DT/the end/NN/end /./. d/NNP/d. the/DT/the block/NN/block is/VBZ/is removed/VBN/removed from/IN/from the/DT/the beginning/NN/beginning /./. e/NNP/e. the/DT/the block/NN/block is/VBZ/is removed/VBN/removed from/IN/from the/DT/the middle/NN/middle /./. f/NNP/f. the/DT/the block/NN/block is/VBZ/is removed/VBN/removed from/IN/from the/DT/the end/NN/end /./. 11.6/CD/11.6 consider/NN/consider a/DT/a file/NN/file system/NN/system that/WDT/that uses/VBZ/uses inodes/VBZ/inodes to/TO/to represent/VB/represent files/NNP/files. disk/NN/disk blocks/NNS/blocks are/VBP/are 8/CD/8 kb/NN/kb in/IN/in size/NN/size /,/, and/CC/and a/DT/a pointer/NN/pointer to/TO/to a/DT/a disk/NN/disk block/NN/block requires/VBZ/requires 4/CD/4 bytes/NNP/bytes. this/DT/this file/NN/file system/NN/system has/VBZ/has 12/CD/12 direct/JJ/direct disk/NN/disk blocks/NNS/blocks /,/, as/IN/as well/RB/well as/IN/as single/JJ/single /,/, double/JJ/double /,/, and/CC/and triple/VB/triple indirect/JJ/indirect disk/NN/disk blocks/NNP/blocks. what/WP/what is/VBZ/is the/DT/the maximum/NN/maximum size/NN/size of/IN/of a/DT/a file/NN/file that/WDT/that can/MD/can be/VB/be stored/VBN/stored in/IN/in this/DT/this file/NN/file system/NN/system 11.7/CD/11.7 assume/NN/assume that/WDT/that in/IN/in a/DT/a particular/JJ/particular augmentation/NN/augmentation of/IN/of a/DT/a reinote-file-access/JJ/reinote-file-access protocol/NN/protocol /,/, each/DT/each client/NN/client maintains/VBZ/maintains a/DT/a name/NN/name cache/NN/cache that/WDT/that caches/VBZ/caches translations/NNS/translations from/IN/from file/JJ/file names/NNS/names to/TO/to corresponding/VBG/corresponding file/NN/file handles/NNP/handles. what/WP/what issues/NNS/issues should/MD/should we/PRP/we take/VB/take into/IN/into account/NN/account in/IN/in implementing/NN/implementing the/DT/the name/NN/name cache/NN/cache 11.8/CD/11.8 consider/NN/consider the/DT/the following/VBG/following backup/NN/backup scheme/NN/scheme /:/: day/NN/day 1/CD/1. copy/NN/copy to/TO/to a/DT/a backup/NN/backup medium/NN/medium all/DT/all files/NNS/files from/IN/from the/DT/the disk/NN/disk /./. day/NN/day 2/CD/2. copy/NN/copy to/TO/to another/DT/another m.edium/NN/m.edium all/DT/all files/NNS/files changed/VBD/changed since/IN/since day/NN/day 1/CD/1 /./. day/NN/day 3/CD/3. copy/NN/copy to/TO/to another/DT/another medium/NN/medium all/DT/all files/NNS/files changed/VBD/changed since/IN/since day/NN/day 1/CD/1 /./. 501/CD/501 this/DT/this differs/NNS/differs from/IN/from the/DT/the schedule/NN/schedule given/VBN/given in/IN/in section/NN/section 11.7.4/CD/11.7.4 by/IN/by having/NN/having all/DT/all subsequent/NN/subsequent backups/NNS/backups copy/VBP/copy all/DT/all files/NNS/files modified/VBD/modified since/IN/since the/DT/the first/JJ/first full/JJ/full backup/NN/backup /./. what/WP/what are/VBP/are the/DT/the benefits/NNS/benefits of/IN/of this/DT/this system/NN/system over/IN/over the/DT/the one/CD/one in/IN/in section/NN/section 11.7.4/CD/11.7.4 what/WP/what are/VBP/are the/DT/the drawbacks/NNS/drawbacks are/VBP/are restore/RB/restore operations/NNS/operations made/VBD/made easier/JJR/easier or/CC/or more/JJR/more difficult/JJ/difficult explain/NN/explain your/PRP$/your answer/NN/answer /./. 11.9/CD/11.9 why/WRB/why must/MD/must the/DT/the bit/NN/bit map/NN/map for/IN/for file/NN/file allocation/NN/allocation be/VB/be kept/VBN/kept on/IN/on mass/NN/mass storage/NN/storage /,/, rather/RB/rather than/IN/than in/IN/in main/JJ/main memory/NN/memory 11.10/CD/11.10 consider/NN/consider a/DT/a file/NN/file system/NN/system on/IN/on a/DT/a disk/NN/disk that/WDT/that has/VBZ/has both/DT/both logical/JJ/logical and/CC/and physical/JJ/physical block/NN/block sizes/VBZ/sizes of/IN/of 512/CD/512 bytes/NNP/bytes. assume/NN/assume that/WDT/that the/DT/the information/NN/information about/IN/about each/DT/each file/NN/file is/VBZ/is already/RB/already in/IN/in memory/NNP/memory. for/IN/for each/DT/each of/IN/of the/DT/the three/CD/three allocation/NN/allocation strategies/NNS/strategies /:/( contiguous/JJ/contiguous /,/, linked/VBN/linked /,/, and/CC/and indexed/VBD/indexed /CD/) /,/, answer/NN/answer these/DT/these questions/NNS/questions /:/: a/NNP/a. how/WRB/how is/VBZ/is the/DT/the logical-to-physical/JJ/logical-to-physical address/NN/address mapping/VBG/mapping accomplished/VBN/accomplished in/IN/in this/DT/this system/NN/system /:/( for/IN/for the/DT/the indexed/VBN/indexed allocation/NN/allocation /,/, assume/NN/assume that/IN/that a/DT/a file/NN/file is/VBZ/is always/RB/always less/JJR/less than/IN/than 512/CD/512 blocks/NNS/blocks long/NNP/long. /NNP/) b/NNP/b. if/IN/if we/PRP/we are/VBP/are currently/RB/currently at/IN/at logical/JJ/logical block/NN/block 10/CD/10 /CD/( the/DT/the last/JJ/last block/NN/block accessed/VBD/accessed was/VBD/was block/NN/block 10/CD/10 /CD/) and/CC/and want/JJ/want to/TO/to access/NN/access logical/JJ/logical block/NN/block 4/CD/4 /,/, how/WRB/how many/JJ/many physical/JJ/physical blocks/NNS/blocks must/MD/must be/VB/be read/VBN/read from/IN/from the/DT/the disk/NN/disk 11.11/CD/11.11 why/WRB/why is/VBZ/is it/PRP/it advantageous/VBZ/advantageous to/TO/to the/DT/the user/NN/user for/IN/for an/DT/an operating/NN/operating system/NN/system to/TO/to dynamically/RB/dynamically allocate/VB/allocate its/PRP$/its internal/JJ/internal tables/NNS/tables what/WP/what are/VBP/are the/DT/the penalties/NNS/penalties to/TO/to the/DT/the operating/NN/operating system/NN/system for/IN/for doing/VBG/doing so/RB/so 11.12/CD/11.12 explain/NN/explain why/WRB/why logging/VBG/logging metadata/NNS/metadata updates/NNS/updates ensures/NNS/ensures recovery/VBP/recovery of/IN/of a/DT/a file/NN/file system/NN/system after/IN/after a/DT/a file-system/JJ/file-system crash/NN/crash /./. 11.13/CD/11.13 fragmentation/NN/fragmentation on/IN/on a/DT/a storage/NN/storage device/NN/device can/MD/can be/VB/be eliminated/VBN/eliminated by/IN/by recompaction/NN/recompaction of/IN/of the/DT/the information/NNP/information. typical/JJ/typical disk/NN/disk devices/NNS/devices do/VBP/do not/RB/not have/VB/have relocation/NN/relocation or/CC/or base/NN/base registers/NNS/registers /:/( such/JJ/such as/IN/as those/DT/those used/VBN/used when/WRB/when memory/NN/memory is/VBZ/is to/TO/to be/VB/be compacted/VBN/compacted /-NONE-/) /,/, so/IN/so how/WRB/how can/MD/can we/PRP/we relocate/VB/relocate files/NNS/files give/VBP/give three/CD/three reasons/NNS/reasons why/WRB/why recompacting/VBG/recompacting and/CC/and relocation/NN/relocation of/IN/of files/NNS/files are/VBP/are often/RB/often avoided/VBN/avoided /./. 11.14/CD/11.14 consider/NN/consider a/DT/a system/NN/system where/WRB/where free/JJ/free space/NN/space is/VBZ/is kept/VBN/kept in/IN/in a/DT/a free-space/NN/free-space list/NN/list /./. a/NNP/a. suppose/NN/suppose that/WDT/that the/DT/the pointer/NN/pointer to/TO/to the/DT/the free-space/NN/free-space list/NN/list is/VBZ/is lost/NNP/lost. can/MD/can the/DT/the system/NN/system reconstruct/NN/reconstruct the/DT/the free-space/NN/free-space list/NN/list explain/NN/explain your/PRP$/your answer/NN/answer /./. b/NNP/b. consider/NN/consider a/DT/a file/NN/file system/NN/system similar/JJ/similar to/TO/to the/DT/the one/CD/one used/JJ/used by/IN/by unix/NN/unix with/IN/with indexed/VBN/indexed allocation/NNP/allocation. how/WRB/how many/JJ/many disk/NN/disk i/0/-NONE-/i/0 operations/NNS/operations might/MD/might be/VB/be 502/CD/502 chapter/NN/chapter 11/CD/11 required/VBN/required to/TO/to read/VB/read the/DT/the contents/NNS/contents of/IN/of a/DT/a small/JJ/small local/JJ/local file/NN/file at/IN/at /a/b/c/JJ//a/b/c assume/NN/assume that/WDT/that none/NN/none of/IN/of the/DT/the disk/NN/disk blocks/NNS/blocks is/VBZ/is currently/RB/currently being/VBG/being cached/VBN/cached /./. c/NNP/c. suggest/VBP/suggest a/DT/a scheme/NN/scheme to/TO/to ensure/VB/ensure that/IN/that the/DT/the pointer/NN/pointer is/VBZ/is never/RB/never lost/VBN/lost as/IN/as a/DT/a result/NN/result of/IN/of memory/NN/memory failure/NN/failure /./. 11.15/CD/11.15 one/CD/one problem/NN/problem with/IN/with contiguous/JJ/contiguous allocation/NN/allocation is/VBZ/is that/IN/that the/DT/the user/NN/user must/MD/must preallocate/VB/preallocate enough/RB/enough space/NN/space for/IN/for each/DT/each file/NNP/file. if/IN/if the/DT/the file/NN/file grows/VBZ/grows to/TO/to be/VB/be larger/JJR/larger than/IN/than the/DT/the space/NN/space allocated/VBD/allocated for/IN/for it/PRP/it /,/, special/JJ/special actions/NNS/actions must/MD/must be/VB/be taken/NNP/taken. one/CD/one solution/NN/solution to/TO/to this/DT/this problem/NN/problem is/VBZ/is to/TO/to define/VB/define a/DT/a file/NN/file structure/NN/structure consisting/VBG/consisting of/IN/of an/DT/an initial/JJ/initial contiguous/JJ/contiguous area/NN/area /:/( of/IN/of a/DT/a specified/VBN/specified size/NN/size /:/) /./. if/IN/if this/DT/this area/NN/area is/VBZ/is filled/VBN/filled /,/, the/DT/the operating/NN/operating system/NN/system automatically/RB/automatically defines/VBZ/defines an/DT/an overflow/JJ/overflow area/NN/area that/WDT/that is/VBZ/is linked/VBN/linked to/TO/to the/DT/the initial/JJ/initial contiguous/JJ/contiguous area/NNP/area. if/IN/if the/DT/the overflow/NN/overflow area/NN/area is/VBZ/is filled/VBN/filled /,/, another/DT/another overflow/NN/overflow area/NN/area is/VBZ/is allocated/NNP/allocated. compare/NN/compare this/DT/this implementation/NN/implementation of/IN/of a/DT/a file/NN/file with/IN/with the/DT/the standard/JJ/standard contiguous/JJ/contiguous and/CC/and linked/VBN/linked implementations/NNS/implementations /./. 11.16/CD/11.16 discuss/NNS/discuss how/WRB/how performance/NN/performance optimizations/NNS/optimizations for/IN/for file/NN/file systems/NNS/systems might/MD/might result/VB/result in/IN/in difficulties/NNS/difficulties in/IN/in maintaining/VBG/maintaining the/DT/the consistency/NN/consistency of/IN/of the/DT/the systems/NNS/systems in/IN/in the/DT/the event/NN/event of/IN/of com.puter/JJ/com.puter crashes/NNS/crashes /./. the/DT/the ms-dos/NNP/ms-dos fat/NN/fat system/NN/system is/VBZ/is explained/VBN/explained in/IN/in norton/NN/norton and/CC/and wilton/NN/wilton /:/[ 1988/CD/1988 /CD/] /,/, and/CC/and the/DT/the os/2/NNP/os/2 description/NN/description can/MD/can be/VB/be found/VBN/found in/IN/in iacobucci/NN/iacobucci /:/[ 1988/CD/1988 /CD/] /./. these/DT/these operating/NN/operating systems/NNS/systems use/VBP/use the/DT/the intel/NN/intel 8086/CD/8086 cpus/NN/cpus /:/( intel/NN/intel /:/[ 1985b/CD/1985b /CD/] /,/, intel/NN/intel /:/[ 1985a/CD/1985a /CD/] /,/, intel/NN/intel /:/[ 1986/CD/1986 /CD/] /,/, and/CC/and intel/NN/intel /:/[ 1990/CD/1990 /CD/] /CD/) /./. ibm/NN/ibm allocation/NN/allocation methods/NNS/methods are/VBP/are described/VBN/described in/IN/in deitel/NN/deitel /:/[ 1990/CD/1990 /CD/] /./. the/DT/the internals/NNS/internals of/IN/of the/DT/the bsd/NN/bsd unl/NN/unl '/''/' system/NN/system are/VBP/are covered/VBN/covered in/IN/in full/JJ/full in/IN/in mckusick/NN/mckusick et/NN/et al/NNP/al. /NNP/[ 1996/CD/1996 /CD/] /./. mcvoy/NN/mcvoy and/CC/and kleiman/NN/kleiman /:/[ 1991/CD/1991 /CD/] discusses/NNS/discusses optimizations/NNS/optimizations of/IN/of these/DT/these methods/NNS/methods made/VBN/made in/IN/in solaris/NNP/solaris. the/DT/the coogle/NN/coogle file/NN/file system/NN/system is/VBZ/is described/VBN/described in/IN/in ghemawat/NN/ghemawat et/NN/et al/NNP/al. /NNP/[ 2003/CD/2003 /CD/] /./. fuse/NN/fuse can/MD/can be/VB/be found/VBN/found at/IN/at http/NN/http /:/: //:// /fuse.sourceforge.net//JJ//fuse.sourceforge.net/ /./. disk/NN/disk file/NN/file allocation/NN/allocation based/VBN/based on/IN/on the/DT/the buddy/NN/buddy system/NN/system is/VBZ/is covered/VBN/covered in/IN/in koch/NN/koch /:/[ 1987/CD/1987 /CD/] /./. a/DT/a file-organization/NN/file-organization scheme/NN/scheme that/WDT/that guarantees/VBZ/guarantees retrieval/NN/retrieval in/IN/in one/CD/one access/NN/access is/VBZ/is described/VBN/described by/IN/by larson/NN/larson and/CC/and kajla/NN/kajla /:/[ 1984/CD/1984 /CD/] /./. log-structured/JJ/log-structured file/NN/file organizations/NNS/organizations for/IN/for enhancing/VBG/enhancing both/DT/both performance/NN/performance and/CC/and consistency/NN/consistency are/VBP/are discussed/VBN/discussed in/IN/in rosenblum/NN/rosenblum and/CC/and ousterhout/IN/ousterhout /CD/[ 1991/CD/1991 /CD/] /,/, seltzer/NN/seltzer et/NN/et al/NNP/al. /NNP/[ 1993/CD/1993 /CD/] /,/, and/CC/and seltzer/NN/seltzer et/NN/et al/NN/al /:/[ 1995/CD/1995 /CD/] /./. algorithms/NNS/algorithms such/JJ/such as/IN/as balanced/JJ/balanced trees/NNS/trees /:/( and/CC/and much/JJ/much more/RBR/more /JJ/) are/VBP/are covered/VBN/covered by/IN/by knuth/NN/knuth /:/[ 1998/CD/1998 /CD/] and/CC/and carmen/NNS/carmen et/VBP/et al/JJ/al /NN/[ 2001/CD/2001 /CD/] /./. the/DT/the zfs/NNS/zfs source/NN/source code/NN/code for/IN/for space/NN/space maps/NNS/maps can/MD/can be/VB/be found/VBN/found at/IN/at http/NN/http /:/: //src.opensolaris.org/source/xref/onnv/onnvgate//JJ///src.opensolaris.org/source/xref/onnv/onnvgate/ usr/NN/usr i/PRP/i src/uts//VBP/src/uts/ common//JJ/common/ fs//NN/fs/ zfs//NN/zfs/ space_map.c/NN/space_map.c /./. disk/NN/disk caching/VBG/caching is/VBZ/is discussed/VBN/discussed by/IN/by mckeon/NN/mckeon /:/[ 1985/CD/1985 /CD/] and/CC/and smith/IN/smith /CD/[ 1985/CD/1985 /CD/] /./. caching/NN/caching in/IN/in the/DT/the experimental/JJ/experimental sprite/NN/sprite operating/NN/operating system/NN/system is/VBZ/is described/VBN/described in/IN/in nelson/NN/nelson et/NN/et al/NN/al /:/[ 1988/CD/1988 /CD/] /./. general/JJ/general discussions/NNS/discussions concerning/VBG/concerning mass-storage/NN/mass-storage technology/NN/technology are/VBP/are offered/VBN/offered by/IN/by chi/NN/chi /:/[ 1982/CD/1982 /CD/] and/CC/and hoagland/NN/hoagland /:/[ 1985/CD/1985 /CD/] /./. folk/NN/folk and/CC/and zoellick/NN/zoellick /:/[ 1987/CD/1987 /CD/] covers/NNS/covers the/DT/the gamut/NN/gamut of/IN/of file/NN/file structures/NNP/structures. silvers/NNS/silvers /:/[ 2000/CD/2000 /CD/] discusses/NNS/discusses implementing/VBG/implementing the/DT/the page/NN/page cache/NN/cache in/IN/in the/DT/the netbsd/NN/netbsd operating/NN/operating system/NN/system /./. the/DT/the network/NN/network file/NN/file system/NN/system /:/( nfs/NNS/nfs /VBP/) is/VBZ/is discussed/VBN/discussed in/IN/in sandberg/NN/sandberg et/NN/et al/NN/al /:/[ 1985/CD/1985 /CD/] /,/, sandberg/NN/sandberg /:/[ 1987/CD/1987 /CD/] /,/, sun/NN/sun /:/[ 1990/CD/1990 /CD/] /,/, and/CC/and callaghan/IN/callaghan /CD/[ 2000/CD/2000 /CD/] /./. nfs/NNS/nfs version/NN/version 4/CD/4 is/VBZ/is a/DT/a standard/JJ/standard described/VBN/described at/IN/at http/NN/http /:/: //:// /www.ietf.org/rfc/rfc3530.txt/NNP//www.ietf.org/rfc/rfc3530.txt. the/DT/the characteristics/NNS/characteristics of/IN/of 503/CD/503 workloads/NNS/workloads in/IN/in distributed/VBN/distributed file/NN/file systems/NNS/systems are/VBP/are examined/VBN/examined in/IN/in baker/NN/baker et/NN/et al/NNP/al. /NNP/[ 1991/CD/1991 /CD/] /./. ousterhout/IN/ousterhout /CD/[ 1991/CD/1991 /CD/] discusses/NNS/discusses the/DT/the role/NN/role of/IN/of distributed/VBN/distributed state/NN/state in/IN/in networked/JJ/networked file/NN/file systems/NNP/systems. log-structured/JJ/log-structured designs/NNS/designs for/IN/for networked/VBN/networked file/NN/file systems/NNS/systems are/VBP/are proposed/VBN/proposed in/IN/in hartman/NN/hartman and/CC/and ousterhout/IN/ousterhout /CD/[ 1995/CD/1995 /CD/] and/CC/and thekkath/NN/thekkath et/NN/et al/NNP/al. /NNP/[ 1997/CD/1997 /CD/] /./. nfs/NNS/nfs and/CC/and the/DT/the unix/NN/unix file/NN/file system/NN/system /:/( ufs/NNS/ufs /VBP/) are/VBP/are described/VBN/described in/IN/in vahalia/NN/vahalia /:/[ 1996/CD/1996 /CD/] and/CC/and mauro/NN/mauro and/CC/and mcdougall/NN/mcdougall /:/[ 2007/CD/2007 /CD/] /./. the/DT/the windows/NNS/windows nt/VBP/nt file/JJ/file system/NN/system /,/, ntfs/VBZ/ntfs /,/, is/VBZ/is explained/VBN/explained in/IN/in solomon/NN/solomon /:/[ 1998/CD/1998 /CD/] /./. the/DT/the ext2/NNP/ext2 file/NN/file system/NN/system used/VBD/used in/IN/in linux/NN/linux is/VBZ/is described/VBN/described in/IN/in bovet/NN/bovet and/CC/and cesati/NN/cesati /:/[ 2002/CD/2002 /CD/] and/CC/and the/DT/the wafl/NN/wafl file/NN/file system/NN/system in/IN/in hitz/NN/hitz et/NN/et al/NNP/al. /NNP/[ 1995/CD/1995 /CD/] /./. zfs/NNS/zfs documentation/NN/documentation can/MD/can be/VB/be found/VBN/found at/IN/at http/NN/http /:/: //:// /www.opensolaris.org//JJ//www.opensolaris.org/ os//NN/os/ community/NN/community /zfs//NN//zfs/ docs/NNS/docs /./. 12.1/CD/12.1 the/DT/the file/NN/file system/NN/system can/MD/can be/VB/be viewed/VBN/viewed logically/RB/logically as/IN/as consisting/VBG/consisting of/IN/of three/CD/three parts/NNP/parts. in/IN/in chapter/NN/chapter 10/CD/10 /,/, we/PRP/we examined/VBD/examined the/DT/the user/NN/user and/CC/and programmer/NN/programmer interface/NN/interface to/TO/to the/DT/the file/NN/file system/NNP/system. in/IN/in chapter/NN/chapter 11/CD/11 /,/, we/PRP/we described/VBD/described the/DT/the internal/JJ/internal data/NNS/data structures/NNS/structures and/CC/and algorithms/NNS/algorithms used/VBN/used by/IN/by the/DT/the operating/NN/operating system/NN/system to/TO/to implement/VB/implement this/DT/this interface/NNP/interface. in/IN/in this/DT/this chapter/NN/chapter /,/, we/PRP/we discuss/VBP/discuss the/DT/the lowest/JJS/lowest level/NN/level of/IN/of the/DT/the file/NN/file system/NN/system /:/: the/DT/the secondary/JJ/secondary and/CC/and tertiary/JJ/tertiary storage/NN/storage structures/NNP/structures. we/PRP/we first/RB/first describe/VBP/describe the/DT/the physical/JJ/physical structure/NN/structure of/IN/of magenetic/JJ/magenetic disks/NNS/disks and/CC/and magnetic/JJ/magnetic tapes/NNP/tapes. we/PRP/we then/RB/then describe/VBP/describe disk-scheduling/JJ/disk-scheduling algorithms/NNS/algorithms /,/, which/WDT/which schedule/NN/schedule the/DT/the order/NN/order of/IN/of disk/NN/disk i//NN/i/ os/NNS/os to/TO/to improve/VB/improve performance/NNP/performance. next/JJ/next /,/, we/PRP/we discuss/VBP/discuss disk/NN/disk formatting/VBG/formatting and/CC/and management/NN/management of/IN/of boot/NN/boot blocks/NNS/blocks /,/, damaged/VBD/damaged blocks/NNS/blocks /,/, and/CC/and swap/NN/swap space/NNP/space. we/PRP/we then/RB/then examine/VBP/examine secondary/JJ/secondary storage/NN/storage structure/NN/structure /,/, covering/VBG/covering disk/NN/disk reliability/NN/reliability and/CC/and stablestorage/NN/stablestorage implementation/NNP/implementation. we/PRP/we conclude/VBP/conclude with/IN/with a/DT/a brief/JJ/brief description/NN/description of/IN/of tertiary/JJ/tertiary storage/NN/storage devices/NNS/devices and/CC/and the/DT/the problems/NNS/problems that/WDT/that arise/VBP/arise when/WRB/when an/DT/an operating/NN/operating system/NN/system uses/NNS/uses tertiary/JJ/tertiary storage/NN/storage /./. to/TO/to describe/VB/describe the/DT/the physical/JJ/physical structure/NN/structure of/IN/of secondary/JJ/secondary and/CC/and tertiary/JJ/tertiary storage/NN/storage devices/NNS/devices and/CC/and its/PRP$/its effects/NNS/effects on/IN/on the/DT/the uses/NNS/uses of/IN/of the/DT/the devices/NNS/devices /./. to/TO/to explain/VB/explain the/DT/the performance/NN/performance characteristics/NNS/characteristics of/IN/of mass-storage/JJ/mass-storage devices/NNS/devices /./. to/TO/to discuss/VB/discuss operating-system/JJ/operating-system services/NNS/services provided/VBN/provided for/IN/for mass/NN/mass storage/NN/storage /,/, including/VBG/including raid/NN/raid and/CC/and hsm/NN/hsm /./. in/IN/in this/DT/this section/NN/section /,/, we/PRP/we present/VBP/present a/DT/a general/JJ/general overview/NN/overview of/IN/of the/DT/the physical/JJ/physical structure/NN/structure of/IN/of secondary/JJ/secondary and/CC/and tertiary/JJ/tertiary storage/NN/storage devices/NNS/devices /./. 12.1.1/CD/12.1.1 magnetic/JJ/magnetic disks/NNS/disks provide/VBP/provide the/DT/the bulk/NN/bulk of/IN/of secondary/JJ/secondary storage/NN/storage for/IN/for modern/JJ/modern computer/NN/computer systems/NNP/systems. conceptually/RB/conceptually /,/, disks/NNS/disks are/VBP/are relatively/RB/relatively simple/JJ/simple /NN/( figure/NN/figure 12.1/CD/12.1 /CD/) /./. each/DT/each disk/NN/disk platter/NN/platter has/VBZ/has a/DT/a flat/JJ/flat circular/NN/circular shape/NN/shape /,/, like/IN/like a/DT/a cd/NNP/cd. common/JJ/common platter/NN/platter diameters/NNS/diameters range/VBP/range 505/CD/505 506/CD/506 chapter/NN/chapter 12/CD/12 arm/NN/arm assembly/RB/assembly rotation/NN/rotation figure/NN/figure 12.1/CD/12.1 moving-head/JJ/moving-head disk/NN/disk mechanism/NN/mechanism /./. from/IN/from 1.8/CD/1.8 to/TO/to 5.25/CD/5.25 inches/NNP/inches. the/DT/the two/CD/two surfaces/NNS/surfaces of/IN/of a/DT/a platter/NN/platter are/VBP/are covered/VBN/covered with/IN/with a/DT/a magnetic/JJ/magnetic material/NNP/material. we/PRP/we store/VBP/store information/NN/information by/IN/by recording/VBG/recording it/PRP/it magnetically/RB/magnetically on/IN/on the/DT/the platters/NNS/platters /./. a/DT/a read/NN/read -write/JJ/-write head/NN/head flies/NNS/flies just/RB/just above/IN/above each/DT/each surface/NN/surface of/IN/of every/DT/every platter/NNP/platter. the/DT/the heads/NNS/heads are/VBP/are attached/VBN/attached to/TO/to a/DT/a that/IN/that moves/VBZ/moves all/DT/all the/DT/the heads/NNS/heads as/IN/as a/DT/a unit/NNP/unit. the/DT/the surface/NN/surface of/IN/of a/DT/a platter/NN/platter is/VBZ/is logically/RB/logically divided/VBN/divided into/IN/into circular/JJ/circular which/WDT/which are/VBP/are subdivided/VBN/subdivided into/IN/into the/DT/the set/NN/set of/IN/of tracks/NNS/tracks that/WDT/that are/VBP/are at/IN/at one/CD/one arm/NN/arm position/NN/position makes/VBZ/makes up/RP/up a/DT/a there/RB/there may/MD/may be/VB/be thousands/NNS/thousands of/IN/of concentric/JJ/concentric cylinders/NNS/cylinders in/IN/in a/DT/a disk/NN/disk drive/NN/drive /,/, and/CC/and each/DT/each track/NN/track may/MD/may contain/VB/contain hundreds/NNS/hundreds of/IN/of sectors/NNP/sectors. the/DT/the storage/NN/storage capacity/NN/capacity of/IN/of common/JJ/common disk/NN/disk drives/NNS/drives is/VBZ/is measured/VBN/measured iil/NN/iil gigabytes/NNS/gigabytes /./. when/WRB/when the/DT/the disk/NN/disk is/VBZ/is in/IN/in use/NN/use /,/, a/DT/a drive/JJ/drive motor/NN/motor spins/NNS/spins it/PRP/it at/IN/at high/JJ/high speed/NNP/speed. most/JJS/most drives/NNS/drives rotate/VBP/rotate 60/CD/60 to/TO/to 200/CD/200 times/NNS/times per/IN/per second/NNP/second. disk/NN/disk speed/VBD/speed has/VBZ/has two/CD/two parts/NNP/parts. the/DT/the is/VBZ/is the/DT/the rate/NN/rate at/IN/at which/WDT/which data/NNS/data flow/VBP/flow between/IN/between the/DT/the drive/JJ/drive and/CC/and the/DT/the computer/NNP/computer. the/DT/the sometimes/RB/sometimes called/VBN/called the/DT/the consists/NNS/consists of/IN/of the/DT/the time/NN/time necessary/JJ/necessary to/TO/to move/VB/move the/DT/the disk/NN/disk arm/NN/arm to/TO/to the/DT/the desired/VBN/desired cylinder/NN/cylinder /,/, called/VBN/called the/DT/the and/CC/and the/DT/the time/NN/time necessary/JJ/necessary for/IN/for the/DT/the desired/VBN/desired sector/NN/sector to/TO/to rotate/VB/rotate to/TO/to the/DT/the disk/NN/disk head/NN/head /,/, called/VBN/called the/DT/the typical/JJ/typical disks/NNS/disks can/MD/can transfer/VB/transfer several/JJ/several megabytes/NNS/megabytes of/IN/of data/NNS/data per/IN/per second/JJ/second /,/, and/CC/and they/PRP/they seek/VBP/seek times/NNS/times and/CC/and rotational/JJ/rotational latencies/NNS/latencies of/IN/of several/JJ/several milliseconds/NNS/milliseconds /./. because/IN/because the/DT/the disk/NN/disk head/NN/head flies/NNS/flies on/IN/on an/DT/an extremely/RB/extremely thin/JJ/thin cushion/NN/cushion of/IN/of air/NN/air /:/( measured/VBN/measured in/IN/in microns/NNS/microns /:/) /,/, there/EX/there is/VBZ/is a/DT/a danger/NN/danger that/WDT/that the/DT/the head/NN/head will/MD/will make/VB/make contact/NN/contact with/IN/with the/DT/the disk/NN/disk surface/NNP/surface. although/IN/although the/DT/the disk/NN/disk platters/NNS/platters are/VBP/are coated/VBN/coated with/IN/with a/DT/a thin/JJ/thin protective/JJ/protective laye1/NNP/laye1 ~/NNP/~ the/DT/the head/NN/head will/MD/will sometimes/RB/sometimes damage/VB/damage the/DT/the magnetic/JJ/magnetic surface/NNP/surface. this/DT/this accident/NN/accident is/VBZ/is called/VBN/called a/DT/a a/DT/a head/NN/head crash/NN/crash normally/RB/normally can/MD/can not/RB/not be/VB/be repaired/VBN/repaired ;/:/; the/DT/the entire/JJ/entire disk/NN/disk must/MD/must be/VB/be replaced/VBN/replaced /./. a/DT/a disk/NN/disk can/MD/can be/VB/be allowing/VBG/allowing different/JJ/different disks/NNS/disks to/TO/to be/VB/be mounted/VBN/mounted as/IN/as needed/VBN/needed /./. removable/JJ/removable magnetic/JJ/magnetic disks/NNS/disks generally/RB/generally consist/VBP/consist of/IN/of one/CD/one platter/NN/platter /,/, held/VBD/held in/IN/in a/DT/a plastic/JJ/plastic case/NN/case to/TO/to prevent/VB/prevent damage/NN/damage while/IN/while not/RB/not in/IN/in the/DT/the disk/NN/disk drive/NNP/drive. are/VBP/are inexpensive/JJ/inexpensive removable/JJ/removable magnetic/JJ/magnetic disks/NNS/disks that/WDT/that have/VBP/have a/DT/a soft/JJ/soft plastic/NN/plastic case/NN/case containing/VBG/containing a/DT/a flexible/JJ/flexible platter/NNP/platter. the/DT/the head/NN/head of/IN/of a/DT/a floppy-disk/JJ/floppy-disk drive/JJ/drive generally/RB/generally sits/VBZ/sits directly/RB/directly on/IN/on the/DT/the disk/NN/disk 12.1/CD/12.1 507/CD/507 disk/NN/disk transfer/NN/transfer rates/NNS/rates as/IN/as with/IN/with many/JJ/many aspects/NNS/aspects of/IN/of computingf/NN/computingf published/VBD/published performance/NN/performance numbers/NNS/numbers for/IN/for disks/NNS/disks are/VBP/are not/RB/not the/DT/the same/JJ/same as/IN/as real-world/JJ/real-world performance/NN/performance numbers/NNP/numbers. stated/VBD/stated transfer/NN/transfer rates/NNS/rates are/VBP/are always/RB/always lower/JJR/lower than/IN/than for/IN/for example/NNP/example. the/DT/the transfer/NN/transfer rate/NN/rate may/MD/may be/VB/be the/DT/the rate/NN/rate at/IN/at which/WDT/which bits/NNS/bits can/MD/can be/VB/be read/VBN/read from/IN/from the/DT/the magnetic/JJ/magnetic media/NNS/media by/IN/by the/DT/the disk/NN/disk head/NN/head /,/, but/CC/but that/IN/that is/VBZ/is different/JJ/different from/IN/from the/DT/the rate/NN/rate at/IN/at which/WDT/which blocks/NNS/blocks are/VBP/are delivered/VBN/delivered to/TO/to the/DT/the operating/NN/operating system/NN/system /./. surface/NN/surface /,/, so/RB/so the/DT/the drive/JJ/drive is/VBZ/is designed/VBN/designed to/TO/to rotate/VB/rotate more/JJR/more slowly/RB/slowly than/IN/than a/DT/a hard-disk/JJ/hard-disk drive/JJ/drive to/TO/to reduce/VB/reduce the/DT/the wear/NN/wear on/IN/on the/DT/the disk/NN/disk surface/NNP/surface. the/DT/the storage/NN/storage capacity/NN/capacity of/IN/of a/DT/a floppy/NN/floppy disk/NN/disk is/VBZ/is typically/RB/typically only/RB/only 1.44mb/CD/1.44mb or/CC/or so/NNP/so. removable/JJ/removable disks/NNS/disks are/VBP/are available/JJ/available that/IN/that work/NN/work much/RB/much like/IN/like normal/JJ/normal hard/JJ/hard disks/NNS/disks and/CC/and have/VBP/have capacities/NNS/capacities measured/VBN/measured in/IN/in gigabytes/NNS/gigabytes /./. a/DT/a disk/NN/disk drive/NN/drive is/VBZ/is attached/VBN/attached to/TO/to a/DT/a computer/NN/computer by/IN/by a/DT/a set/NN/set of/IN/of wires/NNS/wires called/VBN/called an/DT/an several/JJ/several kinds/NNS/kinds of/IN/of buses/NNS/buses are/VBP/are available/JJ/available /,/, including/VBG/including buses/NNP/buses. the/DT/the data/NNS/data transfers/NNS/transfers on/IN/on a/DT/a bus/NN/bus are/VBP/are carried/VBN/carried out/RP/out by/IN/by special/JJ/special electronic/JJ/electronic processors/NNS/processors called/VBN/called the/DT/the is/VBZ/is the/DT/the controller/NN/controller at/IN/at the/DT/the computer/NN/computer end/NN/end of/IN/of the/DT/the bus/NNP/bus. a/DT/a is/VBZ/is built/VBN/built into/IN/into each/DT/each disk/NN/disk drive/NNP/drive. to/TO/to perform/VB/perform a/DT/a disk/NN/disk i/0/-NONE-/i/0 operation/NN/operation /,/, the/DT/the computer/NN/computer places/NNS/places a/DT/a command/NN/command into/IN/into the/DT/the host/NN/host controller/NN/controller /,/, typically/RB/typically using/VBG/using memory-mapped/JJ/memory-mapped i/0/-NONE-/i/0 portsf/NN/portsf as/IN/as described/VBN/described in/IN/in section/NN/section 9.7.3/CD/9.7.3. the/DT/the host/NN/host controller/NN/controller then/RB/then sends/VBZ/sends the/DT/the command/NN/command via/IN/via messages/NNS/messages to/TO/to the/DT/the disk/NN/disk controller/NN/controller /,/, and/CC/and the/DT/the disk/NN/disk controller/NN/controller operates/VBZ/operates the/DT/the disk-drive/JJ/disk-drive hardware/NN/hardware to/TO/to carry/VB/carry out/RP/out the/DT/the command/NNP/command. disk/NN/disk controllers/NNS/controllers usually/RB/usually have/VBP/have a/DT/a built-in/JJ/built-in cache/NNP/cache. data/NNS/data transfer/VBP/transfer at/IN/at the/DT/the disk/NN/disk drive/VBP/drive happens/NNS/happens between/IN/between the/DT/the cache/NN/cache and/CC/and the/DT/the disk/NN/disk surface/NN/surface /,/, and/CC/and data/NNS/data transfer/VBP/transfer to/TO/to the/DT/the host/NN/host /,/, at/IN/at fast/JJS/fast electronic/JJ/electronic speeds/NNS/speeds /,/, occurs/NNS/occurs between/IN/between the/DT/the cache/NN/cache and/CC/and the/DT/the host/NN/host controller/NN/controller /./. 12.1.2/CD/12.1.2 magnetic/JJ/magnetic tapes/NNS/tapes was/VBD/was used/VBN/used as/IN/as an/DT/an early/JJ/early secondary-storage/NN/secondary-storage medium/NNP/medium. although/IN/although it/PRP/it is/VBZ/is relatively/RB/relatively permanent/JJ/permanent and/CC/and can/MD/can hold/VB/hold large/JJ/large quantities/NNS/quantities of/IN/of dataf/NN/dataf its/PRP$/its access/NN/access time/NN/time is/VBZ/is slow/JJ/slow compared/VBN/compared with/IN/with that/DT/that of/IN/of main/JJ/main memory/NN/memory and/CC/and magnetic/JJ/magnetic disk/NNP/disk. in/IN/in addition/NN/addition /,/, random/NN/random access/NN/access to/TO/to magnetic/JJ/magnetic tape/NN/tape is/VBZ/is about/IN/about a/DT/a thousand/NN/thousand times/VBZ/times slower/JJR/slower than/IN/than random/NN/random access/NN/access to/TO/to magnetic/JJ/magnetic disk/NN/disk /,/, so/RB/so tapes/VBZ/tapes are/VBP/are not/RB/not very/RB/very useful/JJ/useful for/IN/for secondary/JJ/secondary storage/NN/storage /./. tapes/NNS/tapes are/VBP/are used/VBN/used mainly/RB/mainly for/IN/for backup/NN/backup /,/, for/IN/for storage/NN/storage of/IN/of infrequently/RB/infrequently used/VBN/used information/NN/information /,/, and/CC/and as/IN/as a/DT/a medium/NN/medium for/IN/for transferring/NN/transferring information/NN/information from/IN/from one/CD/one system/NN/system to/TO/to another/DT/another /./. a/DT/a tape/NN/tape is/VBZ/is kept/VBN/kept in/IN/in a/DT/a spool/NN/spool and/CC/and is/VBZ/is wound/VBN/wound or/CC/or rewound/IN/rewound past/JJ/past a/DT/a read-write/JJ/read-write head/NN/head /./. moving/VBG/moving to/TO/to the/DT/the correct/NN/correct spot/NN/spot on/IN/on a/DT/a tape/NN/tape can/MD/can take/VB/take minutes/NNS/minutes /,/, but/CC/but once/RB/once positioned/VBN/positioned /,/, tape/NN/tape drives/NNS/drives can/MD/can write/VB/write data/NNS/data at/IN/at speeds/NNS/speeds comparable/JJ/comparable to/TO/to disk/VB/disk drives/NNP/drives. tape/NN/tape capacities/NNS/capacities vary/JJ/vary greatly/RB/greatly /,/, depending/VBG/depending on/IN/on the/DT/the particular/JJ/particular kind/NN/kind of/IN/of tape/NN/tape drive/NNP/drive. typically/RB/typically /,/, they/PRP/they store/VBP/store from/IN/from 20gb/CD/20gb to/TO/to 200gb/CD/200gb. some/DT/some have/VBP/have built-in/JJ/built-in compression/NN/compression that/WDT/that can/MD/can more/RBR/more than/IN/than double/JJ/double the/DT/the effective/JJ/effective storage/NNP/storage. tapes/NNS/tapes and/CC/and their/PRP$/their drivers/NNS/drivers are/VBP/are usually/RB/usually categorized/VBN/categorized by/IN/by width/NN/width /,/, includil1.g/JJ/includil1.g 4/CD/4 /,/, 8f/CD/8f and/CC/and 19/CD/19 millimeters/NNS/millimeters and/CC/and 1/4/CD/1/4 and/CC/and 1/2/CD/1/2 inch/NNP/inch. some/DT/some are/VBP/are named/VBN/named according/VBG/according to/TO/to technology/NN/technology /,/, such/JJ/such as/IN/as lt0-2/-NONE-/lt0-2 and/CC/and sdlt/NNP/sdlt. tape/NN/tape storage/NN/storage is/VBZ/is further/RBR/further described/VBN/described in/IN/in section/NN/section 12.9/CD/12.9 /./. 508/CD/508 chapter/NN/chapter 12/CD/12 12.2/CD/12.2 fire/NN/fire wire/NN/wire refers/NNS/refers to/TO/to an/DT/an interface/NN/interface designed/VBN/designed for/IN/for connecting/NN/connecting peripheral/JJ/peripheral devices/NNS/devices such/JJ/such as/IN/as hard/JJ/hard drives/NNS/drives /,/, dvd/VBD/dvd drives/NNS/drives /,/, and/CC/and digital/JJ/digital video/NN/video cameras/NNS/cameras to/TO/to a/DT/a computer/NN/computer system/NNP/system. fire/NN/fire wire/NN/wire was/VBD/was first/JJ/first developed/VBN/developed by/IN/by apple/NN/apple computer/NN/computer and/CC/and became/VBD/became the/DT/the ieee/NN/ieee 1394/CD/1394 standard/JJ/standard in/IN/in 1995/CD/1995. the/DT/the originalfirewire/NN/originalfirewire standard/NN/standard provided/VBD/provided bandwidth/NN/bandwidth up/IN/up to/TO/to 400/CD/400 megabits/NNS/megabits per/IN/per second/NNP/second. recently/RB/recently /,/, a/DT/a new/JJ/new standardfirewire/NN/standardfirewire 2-has/CD/2-has emerged/VBD/emerged and/CC/and is/VBZ/is identified/VBN/identified by/IN/by the/DT/the ieee/NN/ieee 1394b/CD/1394b standard/JJ/standard /./. firewire/NN/firewire 2/CD/2 provides/NNS/provides double/JJ/double the/DT/the data/NNS/data rate/NN/rate of/IN/of the/DT/the original/JJ/original firewire-800/NN/firewire-800 megabits/NNS/megabits per/IN/per second/JJ/second /./. modern/JJ/modern disk/NN/disk drives/NNS/drives are/VBP/are addressed/VBN/addressed as/IN/as large/JJ/large one-dimensional/JJ/one-dimensional arrays/NNS/arrays of/IN/of where/WRB/where the/DT/the logical/JJ/logical block/NN/block is/VBZ/is the/DT/the smallest/JJS/smallest unit/NN/unit of/IN/of transfer/NNP/transfer. the/DT/the size/NN/size of/IN/of a/DT/a logical/JJ/logical block/NN/block is/VBZ/is usually/RB/usually 512/CD/512 bytes/NNS/bytes /,/, although/IN/although some/DT/some disks/NNS/disks can/MD/can be/VB/be to/TO/to have/VB/have a/DT/a different/JJ/different logical/JJ/logical block/NN/block size/NN/size /,/, such/JJ/such as/IN/as 1,024/CD/1,024 bytes/NNP/bytes. this/DT/this option/NN/option is/VBZ/is described/VBN/described in/IN/in section/NN/section 12.5.1/CD/12.5.1. the/DT/the one-dimensional/JJ/one-dimensional array/NN/array of/IN/of logical/JJ/logical blocks/NNS/blocks is/VBZ/is mapped/VBN/mapped onto/IN/onto the/DT/the sectors/NNS/sectors of/IN/of the/DT/the disk/NN/disk sequentially/NNP/sequentially. sector/NN/sector 0/-NONE-/0 is/VBZ/is the/DT/the first/JJ/first sector/NN/sector of/IN/of the/DT/the first/JJ/first track/NN/track on/IN/on the/DT/the outermost/NN/outermost cylinder/NNP/cylinder. the/DT/the mapping/NN/mapping proceeds/VBZ/proceeds in/IN/in order/NN/order through/IN/through that/DT/that track/NN/track /,/, then/RB/then through/IN/through the/DT/the rest/NN/rest of/IN/of the/DT/the tracks/NNS/tracks in/IN/in that/DT/that cylinder/NN/cylinder /,/, and/CC/and then/RB/then through/IN/through the/DT/the rest/NN/rest of/IN/of the/DT/the cylinders/NNS/cylinders from/IN/from outermost/JJS/outermost to/TO/to innermost/VB/innermost /./. by/IN/by using/VBG/using this/DT/this mapping/NN/mapping /,/, we/PRP/we can/MD/can -at/VB/-at least/JJS/least in/IN/in theory-convert/NN/theory-convert a/DT/a logical/JJ/logical block/NN/block number/NN/number into/IN/into an/DT/an old-style/JJ/old-style disk/NN/disk address/NN/address that/WDT/that consists/VBZ/consists of/IN/of a/DT/a cylinder/NN/cylinder number/NN/number /,/, a/DT/a track/NN/track number/NN/number within/IN/within that/DT/that cylinder/NN/cylinder /,/, and/CC/and a/DT/a sector/NN/sector number/NN/number within/IN/within that/DT/that track/NNP/track. in/IN/in practice/NN/practice /,/, it/PRP/it is/VBZ/is difficult/JJ/difficult to/TO/to perform/NN/perform this/DT/this translation/NN/translation /,/, for/IN/for two/CD/two reasons/NNP/reasons. first/JJ/first /,/, most/JJS/most disks/NNS/disks have/VBP/have some/DT/some defective/JJ/defective sectors/NNS/sectors /,/, but/CC/but the/DT/the mapping/NN/mapping hides/VBZ/hides this/DT/this by/IN/by substituting/NN/substituting spare/NN/spare sectors/NNS/sectors from/IN/from elsewhere/RB/elsewhere on/IN/on the/DT/the disk/NNP/disk. second/JJ/second /,/, the/DT/the number/NN/number of/IN/of sectors/NNS/sectors per/IN/per track/NN/track is/VBZ/is not/RB/not a/DT/a constant/JJ/constant on/IN/on smne/NN/smne drives/NNS/drives /./. let/NN/let 's/POS/'s look/NN/look more/JJR/more closely/RB/closely at/IN/at the/DT/the second/JJ/second reason/NNP/reason. on/IN/on media/NNS/media that/IN/that use/NN/use the/DT/the density/NN/density of/IN/of bits/NNS/bits per/IN/per track/NN/track is/VBZ/is uniform/NNP/uniform. the/DT/the farther/NN/farther a/DT/a track/NN/track is/VBZ/is from/IN/from the/DT/the center/NN/center of/IN/of the/DT/the disk/NN/disk /,/, the/DT/the greater/JJR/greater its/PRP$/its length/NN/length /,/, so/RB/so the/DT/the more/RBR/more sectors/NNS/sectors it/PRP/it can/MD/can hold/NNP/hold. as/IN/as we/PRP/we move/VBP/move from/IN/from outer/NN/outer zones/NNS/zones to/TO/to inner/VB/inner zones/NNS/zones /,/, the/DT/the number/NN/number of/IN/of sectors/NNS/sectors per/IN/per track/NN/track decreases/NNP/decreases. tracks/VBZ/tracks in/IN/in the/DT/the outermost/NN/outermost zone/NN/zone typically/RB/typically hold/JJ/hold 40/CD/40 percent/NN/percent more/JJR/more sectors/NNS/sectors than/IN/than do/VB/do tracks/NNS/tracks in/IN/in the/DT/the innermost/NN/innermost zone/NNP/zone. the/DT/the drive/JJ/drive increases/NNS/increases its/PRP$/its rotation/NN/rotation speed/NN/speed as/IN/as the/DT/the head/NN/head moves/VBZ/moves from/IN/from the/DT/the outer/NN/outer to/TO/to the/DT/the inner/NN/inner tracks/VBZ/tracks to/TO/to keep/VB/keep the/DT/the same/JJ/same rate/NN/rate of/IN/of data/NNS/data moving/VBG/moving under/IN/under the/DT/the head/NNP/head. this/DT/this method/NN/method is/VBZ/is used/VBN/used in/IN/in cd-rom/NNP/cd-rom and/CC/and dvd-rom/NNP/dvd-rom drives/NNP/drives. alternatively/RB/alternatively /,/, the/DT/the disk/NN/disk rotation/NN/rotation speed/NN/speed can/MD/can stay/VB/stay constant/JJ/constant ;/:/; in/IN/in this/DT/this case/NN/case /,/, the/DT/the density/NN/density of/IN/of bits/NNS/bits decreases/NNS/decreases from/IN/from inner/NN/inner tracks/NNS/tracks to/TO/to outer/VB/outer tracks/NNS/tracks to/TO/to keep/VB/keep the/DT/the data/NNS/data rate/NN/rate constant/NNP/constant. this/DT/this method/NN/method is/VBZ/is used/VBN/used in/IN/in hard/JJ/hard disks/NNS/disks and/CC/and is/VBZ/is known/VBN/known as/IN/as the/DT/the number/NN/number of/IN/of sectors/NNS/sectors per/IN/per track/NN/track has/VBZ/has been/VBN/been increasing/VBG/increasing as/IN/as disk/NN/disk technology/NN/technology improves/VBZ/improves /,/, and/CC/and the/DT/the outer/NN/outer zone/NN/zone of/IN/of a/DT/a disk/NN/disk usually/RB/usually has/VBZ/has several/JJ/several hundred/CD/hundred sectors/NNS/sectors per/IN/per track/NNP/track. similarly/RB/similarly /,/, the/DT/the number/NN/number of/IN/of cylinders/NNS/cylinders per/IN/per disk/NN/disk has/VBZ/has been/VBN/been increasing/VBG/increasing ;/:/; large/JJ/large disks/NNS/disks have/VBP/have tens/NNS/tens of/IN/of thousands/NNS/thousands of/IN/of cylinders/NNS/cylinders /./. 12.3/CD/12.3 12.3/CD/12.3 509/CD/509 computers/NNS/computers access/NN/access disk/NN/disk storage/NN/storage in/IN/in two/CD/two ways/NNP/ways. one/CD/one way/NN/way is/VBZ/is via/IN/via i/o/JJ/i/o ports/NNS/ports /:/( or/CC/or this/DT/this is/VBZ/is common/JJ/common on/IN/on small/JJ/small systems/NNP/systems. the/DT/the other/JJ/other way/NN/way is/VBZ/is via/IN/via a/DT/a remote/NN/remote host/NN/host in/IN/in a/DT/a distributed/VBN/distributed file/NN/file system/NN/system ;/:/; this/DT/this is/VBZ/is referred/VBN/referred to/TO/to as/RB/as 12.3.1/CD/12.3.1 host-attached/JJ/host-attached storage/NN/storage host-attached/JJ/host-attached storage/NN/storage is/VBZ/is storage/NN/storage accessed/VBN/accessed through/IN/through local/JJ/local i/0/-NONE-/i/0 ports/NNP/ports. these/DT/these ports/NNS/ports use/VBP/use several/JJ/several technologies/NNP/technologies. the/DT/the typical/JJ/typical desktop/NN/desktop pc/NN/pc uses/NNS/uses an/DT/an i/0/-NONE-/i/0 bus/VBZ/bus architecture/NN/architecture called/VBN/called ide/NN/ide or/CC/or ata/NNP/ata. this/DT/this architecture/NN/architecture supports/VBZ/supports a/DT/a maximum/NN/maximum of/IN/of two/CD/two drives/NNS/drives per/IN/per i/0/-NONE-/i/0 bus/NNP/bus. a/DT/a newer/JJR/newer /,/, similar/JJ/similar protocol/NN/protocol that/WDT/that has/VBZ/has simplified/VBN/simplified cabling/VBG/cabling is/VBZ/is sata/NNP/sata. high-end/NN/high-end workstations/NNS/workstations and/CC/and servers/NNS/servers generally/RB/generally use/VBP/use more/JJR/more sophisticated/JJ/sophisticated i/0/-NONE-/i/0 architectures/VBZ/architectures /,/, such/JJ/such as/IN/as scsi/NN/scsi and/CC/and fiber/NN/fiber charmel/NN/charmel /:/( fc/NN/fc /:/) /./. scsi/NN/scsi is/VBZ/is a/DT/a bus/NN/bus architecture/NNP/architecture. its/PRP$/its physical/JJ/physical medium/NN/medium is/VBZ/is usually/RB/usually a/DT/a ribbon/NN/ribbon cable/NN/cable with/IN/with a/DT/a large/JJ/large number/NN/number of/IN/of conductors/NNS/conductors /:/( typically/RB/typically 50/CD/50 or/CC/or 68/CD/68 /CD/) /./. the/DT/the scsi/NN/scsi protocol/NN/protocol supports/NNS/supports a/DT/a maximum/NN/maximum of/IN/of 16/CD/16 devices/NNS/devices per/IN/per bus/NNP/bus. generally/RB/generally /,/, the/DT/the devices/NNS/devices include/VBP/include one/CD/one controller/NN/controller card/NN/card in/IN/in the/DT/the host/NN/host /:/( the/DT/the and/CC/and up/RP/up to/TO/to 15/CD/15 storage/NN/storage devices/NNS/devices /:/( the/DT/the to.rgr/JJ/to.rgr /:/: /:/: /:/: ts/NNS/ts /VBP/) /./. a/DT/a scsi/NN/scsi disk/NN/disk is/VBZ/is a/DT/a common/JJ/common scsi/NN/scsi target/NN/target /,/, but/CC/but the/DT/the protocol/NN/protocol provides/VBZ/provides the/DT/the ability/NN/ability to/TO/to address/VB/address up/RP/up to/TO/to 8/CD/8 in/IN/in each/DT/each scsi/NN/scsi target/NNP/target. a/DT/a typical/JJ/typical use/NN/use of/IN/of logical/JJ/logical unit/NN/unit addressing/VBG/addressing is/VBZ/is to/TO/to commands/NNS/commands to/TO/to components/NNS/components of/IN/of a/DT/a raid/JJ/raid array/NN/array or/CC/or components/NNS/components of/IN/of a/DT/a removable/JJ/removable media/NNS/media library/JJ/library /NN/( such/JJ/such as/IN/as a/DT/a cd/NN/cd jukebox/NN/jukebox sendil/NN/sendil g/NN/g commands/NNS/commands to/TO/to the/DT/the media-changer/JJ/media-changer mechanism/NN/mechanism or/CC/or to/TO/to one/CD/one of/IN/of the/DT/the drives/NNS/drives /:/) /./. fc/NN/fc is/VBZ/is a/DT/a high-speed/JJ/high-speed serial/NN/serial architecture/NN/architecture that/WDT/that can/MD/can operate/VB/operate over/IN/over optical/JJ/optical fiber/NN/fiber or/CC/or over/IN/over a/DT/a four-conductor/NN/four-conductor copper/NN/copper cable/NNP/cable. it/PRP/it has/VBZ/has two/CD/two variants/NNP/variants. one/CD/one is/VBZ/is a/DT/a large/JJ/large switched/VBN/switched fabric/JJ/fabric having/NN/having a/DT/a 24-bit/JJ/24-bit address/NN/address space/NNP/space. this/DT/this variant/NN/variant is/VBZ/is expected/VBN/expected to/TO/to dominate/VB/dominate in/IN/in the/DT/the future/NN/future and/CC/and is/VBZ/is the/DT/the basis/NN/basis of/IN/of /NNP/( sjld/NN/sjld '/POS/' /,/, ;/:/; s/NNS/s /VBP/) /,/, discussed/VBN/discussed in/IN/in section/NN/section 12.3.3/CD/12.3.3. because/IN/because of/IN/of the/DT/the large/JJ/large space/NN/space and/CC/and the/DT/the switched/JJ/switched nature/NN/nature of/IN/of the/DT/the communication/NN/communication /,/, multiple/NN/multiple hosts/NNS/hosts and/CC/and storage/NN/storage devices/NNS/devices can/MD/can attach/VB/attach to/TO/to the/DT/the fabric/JJ/fabric /,/, allowing/VBG/allowing great/JJ/great flexibility/NN/flexibility in/IN/in i/0/-NONE-/i/0 communication/NNP/communication. the/DT/the other/JJ/other fc/NN/fc variant/NN/variant is/VBZ/is an/DT/an that/IN/that can/MD/can address/VB/address 126/CD/126 devices/NNS/devices /:/( drives/NNS/drives and/CC/and controllers/NNS/controllers /:/) /./. a/DT/a wide/JJ/wide variety/NN/variety of/IN/of storage/NN/storage devices/NNS/devices are/VBP/are suitable/JJ/suitable for/IN/for use/NN/use as/IN/as host-attached/JJ/host-attached storage/NNP/storage. among/IN/among these/DT/these are/VBP/are hard/JJ/hard disk/NN/disk drives/NNS/drives /,/, raid/VBD/raid arrays/NNS/arrays /,/, and/CC/and cd/VBD/cd /,/, dvd/NN/dvd /,/, and/CC/and tape/NN/tape drives/NNP/drives. the/DT/the i/0/NNP/i/0 commands/VBZ/commands that/IN/that initiate/NN/initiate data/NNS/data transfers/NNS/transfers to/TO/to a/DT/a host-attached/JJ/host-attached storage/NN/storage device/NN/device are/VBP/are reads/NNS/reads and/CC/and writes/NNS/writes of/IN/of logical/JJ/logical data/NNS/data blocks/NNS/blocks directed/VBD/directed to/TO/to specifically/RB/specifically identified/VBD/identified storage/NN/storage units/NNS/units /:/( such/JJ/such as/IN/as bus/NN/bus id/VBD/id /,/, scsi/NN/scsi id/VBD/id /,/, and/CC/and target/VB/target logical/JJ/logical unit/NN/unit /:/) /./. 12.3.2/CD/12.3.2 network-attached/JJ/network-attached storage/NN/storage a/DT/a network-attached/JJ/network-attached storage/NN/storage /:/( nas/NNS/nas /VBP/) device/NN/device is/VBZ/is a/DT/a special-purpose/JJ/special-purpose storage/NN/storage system/NN/system that/WDT/that is/VBZ/is accessed/VBN/accessed remotely/RB/remotely over/IN/over a/DT/a data/NN/data network/NN/network /:/( figure/NN/figure 12.2/CD/12.2 /CD/) /./. clients/NNS/clients access/NN/access network-attached/JJ/network-attached storage/NN/storage via/IN/via a/DT/a remote-procedure-call/JJ/remote-procedure-call interface/NN/interface such/JJ/such as/IN/as nfs/NNS/nfs for/IN/for unix/NN/unix systems/NNS/systems or/CC/or cifs/NNS/cifs for/IN/for windows/NNS/windows machines/NNP/machines. the/DT/the remote/NN/remote procedure/NN/procedure calls/VBZ/calls /:/( rpcs/NNS/rpcs /VBP/) are/VBP/are carried/VBN/carried via/IN/via tcp/NN/tcp or/CC/or udp/VB/udp over/IN/over an/DT/an ip/NN/ip network-usually/RB/network-usually the/DT/the same/JJ/same local-area/NN/local-area network/NN/network /:/( lan/NN/lan /:/) that/IN/that carries/NNS/carries all/DT/all data/NNS/data traffic/VBP/traffic to/TO/to the/DT/the clients/NNP/clients. the/DT/the networkattached/JJ/networkattached storage/NN/storage unit/NN/unit is/VBZ/is usually/RB/usually implemented/VBN/implemented as/IN/as a/DT/a raid/NN/raid array/NN/array with/IN/with software/NN/software that/IN/that implements/NNS/implements the/DT/the rpc/NN/rpc interface/NNP/interface. it/PRP/it is/VBZ/is easiest/JJS/easiest to/TO/to thil/VB/thil k/NN/k of/IN/of nas/NNS/nas as/IN/as simply/RB/simply another/DT/another storage-access/NN/storage-access protocol/NNP/protocol. for/IN/for example/NN/example /,/, rather/RB/rather than/IN/than using/VBG/using a/DT/a scsi/NN/scsi device/NN/device driver/NN/driver and/CC/and scsi/NN/scsi protocols/NNS/protocols to/TO/to access/NN/access storage/NN/storage /,/, a/DT/a system/NN/system using/VBG/using nas/NNS/nas would/MD/would use/VB/use rpc/NN/rpc over/IN/over tcp/NN/tcp /ip/NN//ip /./. 510/CD/510 chapter/NN/chapter 12/CD/12 12.4/CD/12.4 lan/wan/JJ/lan/wan figure/NN/figure 12.2/CD/12.2 network-attached/JJ/network-attached storage/NN/storage /./. network-attached/JJ/network-attached storage/NN/storage provides/VBZ/provides a/DT/a convenient/JJ/convenient way/NN/way for/IN/for all/DT/all the/DT/the computers/NNS/computers on/IN/on a/DT/a lan/NN/lan to/TO/to share/VB/share a/DT/a pool/NN/pool of/IN/of storage/NN/storage with/IN/with the/DT/the same/JJ/same ease/NN/ease of/IN/of naming/VBG/naming and/CC/and access/NN/access enjoyed/VBD/enjoyed with/IN/with local/JJ/local host-attached/JJ/host-attached storage/NNP/storage. however/RB/however /,/, it/PRP/it tends/VBZ/tends to/TO/to be/VB/be less/JJR/less efficient/JJ/efficient and/CC/and have/VBP/have lower/JJR/lower performance/NN/performance than/IN/than some/DT/some direct-attached/JJ/direct-attached storage/NN/storage options/NNS/options /./. is/VBZ/is the/DT/the latest/JJS/latest network-attached/JJ/network-attached storage/NN/storage protocol/NNP/protocol. in/IN/in essence/NN/essence /,/, it/PRP/it uses/VBZ/uses the/DT/the ip/NN/ip network/NN/network protocol/NN/protocol to/TO/to carry/VB/carry the/DT/the scsi/NN/scsi protocol/NNP/protocol. thus/RB/thus /,/, networks-rather/JJ/networks-rather than/IN/than scsi/NN/scsi cables-can/JJ/cables-can be/NN/be used/VBN/used as/IN/as the/DT/the interconnects/NNS/interconnects between/IN/between hosts/NNS/hosts and/CC/and their/PRP$/their storage/NN/storage /./. as/IN/as a/DT/a result/NN/result /,/, hosts/VBZ/hosts can/MD/can treat/VB/treat their/PRP$/their storage/NN/storage as/IN/as if/IN/if it/PRP/it were/VBD/were directly/RB/directly attached/VBN/attached /,/, even/RB/even if/IN/if the/DT/the storage/NN/storage is/VBZ/is distant/JJ/distant from/IN/from the/DT/the host/NN/host /./. 12.3.3/CD/12.3.3 storage-area/NNP/storage-area network/NN/network one/CD/one drawback/NN/drawback of/IN/of network-attached/JJ/network-attached storage/NN/storage systems/NNS/systems is/VBZ/is that/IN/that the/DT/the storage/NN/storage i/o/-NONE-/i/o operations/NNS/operations consume/VBP/consume bandwidth/NN/bandwidth on/IN/on the/DT/the data/NNS/data network/NN/network /,/, thereby/RB/thereby increasing/VBG/increasing the/DT/the latency/NN/latency of/IN/of network/NN/network communication/NNP/communication. this/DT/this problem/NN/problem can/MD/can be/VB/be particularly/RB/particularly acute/JJ/acute in/IN/in large/JJ/large client-server/NN/client-server installations-the/NN/installations-the communication/NN/communication between/IN/between servers/NNS/servers and/CC/and clients/NNS/clients competes/NNS/competes for/IN/for bandwidth/NN/bandwidth with/IN/with the/DT/the communication/NN/communication among/IN/among servers/NNS/servers and/CC/and storage/NN/storage devices/NNS/devices /./. a/DT/a storage-area/NN/storage-area network/NN/network /:/( san/NN/san /:/) is/VBZ/is a/DT/a private/JJ/private network/NN/network /:/( using/VBG/using storage/NN/storage protocols/NNS/protocols rather/RB/rather than/IN/than networking/VBG/networking protocols/NNS/protocols /:/) connecting/VBG/connecting servers/NNS/servers and/CC/and storage/NN/storage units/NNS/units /,/, as/IN/as shown/NN/shown in/IN/in figure/NN/figure 12.3/CD/12.3. the/DT/the power/NN/power of/IN/of a/DT/a san/NN/san lies/NNS/lies in/IN/in its/PRP$/its flexibility/NNP/flexibility. multiple/NN/multiple hosts/NNS/hosts and/CC/and multiple/VB/multiple storage/NN/storage arrays/NNS/arrays can/MD/can attach/VB/attach to/TO/to the/DT/the same/JJ/same san/NN/san /,/, and/CC/and storage/NN/storage can/MD/can be/VB/be dynamically/RB/dynamically allocated/VBN/allocated to/TO/to hosts/NNP/hosts. a/DT/a san/NN/san switch/NN/switch allows/VBZ/allows or/CC/or prohibits/VBZ/prohibits access/NN/access between/IN/between the/DT/the hosts/NNS/hosts and/CC/and the/DT/the storage/NNP/storage. as/IN/as one/CD/one example/NN/example /,/, if/IN/if a/DT/a host/NN/host is/VBZ/is running/VBG/running low/JJ/low on/IN/on disk/NN/disk space/NN/space /,/, the/DT/the san/NN/san can/MD/can be/VB/be configured/VBN/configured to/TO/to allocate/VB/allocate more/JJR/more storage/NN/storage to/TO/to that/DT/that host/NN/host /./. sans/NNS/sans make/VBP/make it/PRP/it possible/JJ/possible for/IN/for clusters/NNS/clusters of/IN/of servers/NNS/servers to/TO/to share/VB/share the/DT/the same/JJ/same storage/NN/storage and/CC/and for/IN/for storage/NN/storage arrays/NNS/arrays to/TO/to include/VB/include multiple/NN/multiple direct/NN/direct host/NN/host com1.ections/NNP/com1.ections. sans/NNS/sans typically/RB/typically have/VBP/have more/JJR/more ports/NNS/ports /,/, and/CC/and less/JJR/less expensive/JJ/expensive ports/NNS/ports /,/, than/IN/than storage/NN/storage arrays/NNS/arrays /./. fc/NN/fc is/VBZ/is the/DT/the most/RBS/most common/JJ/common san/NN/san interconnect/NN/interconnect /,/, although/IN/although the/DT/the simplicity/NN/simplicity of/IN/of iscsi/NN/iscsi is/VBZ/is increasing/VBG/increasing its/PRP$/its use/NNP/use. an/DT/an emerging/VBG/emerging alternative/NN/alternative is/VBZ/is a/DT/a special-purpose/JJ/special-purpose bus/NN/bus architecture/NN/architecture named/VBD/named infiniband/NN/infiniband /,/, which/WDT/which provides/VBZ/provides hardware/NN/hardware and/CC/and software/NN/software support/NN/support for/IN/for highspeed/NN/highspeed interconnection/NN/interconnection networks/NNS/networks for/IN/for servers/NNS/servers and/CC/and storage/NN/storage units/NNS/units /./. one/CD/one of/IN/of the/DT/the responsibilities/NNS/responsibilities of/IN/of the/DT/the operating/NN/operating system/NN/system is/VBZ/is to/TO/to use/VB/use the/DT/the hardware/NN/hardware efficiently/NNP/efficiently. for/IN/for the/DT/the disk/NN/disk drives/NNS/drives /,/, meeting/NN/meeting this/DT/this responsibility/NN/responsibility entails/VBZ/entails having/VBG/having 12.4/CD/12.4 511/CD/511 figure/NN/figure 12.3/CD/12.3 storage-area/NN/storage-area network/NN/network /./. fast/NN/fast access/NN/access time/NN/time and/CC/and large/JJ/large disk/NN/disk bandwidth/NNP/bandwidth. the/DT/the access/NN/access time/NN/time has/VBZ/has two/CD/two major/JJ/major components/NNS/components /:/( also/RB/also see/VBP/see section/NN/section 12.1.1/CD/12.1.1 /CD/) /./. the/DT/the is/VBZ/is the/DT/the time/NN/time for/IN/for the/DT/the disk/NN/disk arm/NN/arm to/TO/to move/VB/move the/DT/the heads/NNS/heads to/TO/to the/DT/the cylinder/NN/cylinder containing/VBG/containing the/DT/the desired/JJ/desired sector/NNP/sector. the/DT/the is/VBZ/is the/DT/the additional/JJ/additional time/NN/time for/IN/for the/DT/the disk/NN/disk to/TO/to rotate/VB/rotate the/DT/the desired/VBN/desired sector/NN/sector to/TO/to the/DT/the disk/NN/disk head/NNP/head. the/DT/the disk/NN/disk is/VBZ/is the/DT/the total/JJ/total number/NN/number of/IN/of bytes/NNS/bytes transferred/VBN/transferred /,/, divided/VBN/divided by/IN/by the/DT/the total/JJ/total time/NN/time between/IN/between the/DT/the first/JJ/first request/NN/request for/IN/for service/NN/service and/CC/and the/DT/the completion/NN/completion of/IN/of the/DT/the last/JJ/last transfer/NNP/transfer. we/PRP/we can/MD/can improve/VB/improve both/DT/both the/DT/the access/NN/access time/NN/time and/CC/and the/DT/the bandwidth/NN/bandwidth by/IN/by managing/VBG/managing the/DT/the order/NN/order in/IN/in which/WDT/which disk/NN/disk i/o/-NONE-/i/o requests/VBZ/requests are/VBP/are serviced/VBN/serviced /./. whenever/NN/whenever a/DT/a process/NN/process needs/VBZ/needs i/0/-NONE-/i/0 to/TO/to or/CC/or from/IN/from the/DT/the disk/NN/disk /,/, it/PRP/it issues/VBZ/issues a/DT/a system/NN/system call/NN/call to/TO/to the/DT/the operating/NN/operating system/NNP/system. the/DT/the request/NN/request specifies/NNS/specifies several/JJ/several pieces/NNS/pieces of/IN/of information/NN/information /:/: whether/IN/whether this/DT/this operation/NN/operation is/VBZ/is input/VBN/input or/CC/or output/NN/output what/WP/what the/DT/the disk/NN/disk address/NN/address for/IN/for the/DT/the transfer/NN/transfer is/VBZ/is what/WP/what the/DT/the memory/NN/memory address/NN/address for/IN/for the/DT/the transfer/NN/transfer is/VBZ/is what/WP/what the/DT/the number/NN/number of/IN/of sectors/NNS/sectors to/TO/to be/VB/be transferred/VBN/transferred is/VBZ/is if/IN/if the/DT/the desired/VBN/desired disk/NN/disk drive/JJ/drive and/CC/and controller/NN/controller are/VBP/are available/JJ/available /,/, the/DT/the request/NN/request can/MD/can be/VB/be serviced/VBN/serviced immediately/-NONE-/immediately. if/IN/if the/DT/the drive/JJ/drive or/CC/or controller/JJR/controller is/VBZ/is busy/JJ/busy /,/, any/DT/any new/JJ/new requests/NNS/requests for/IN/for service/NN/service will/MD/will be/VB/be placed/VBN/placed in/IN/in the/DT/the queue/NN/queue of/IN/of pending/VBG/pending requests/NNS/requests for/IN/for that/DT/that drive/JJ/drive /./. for/IN/for a/DT/a multiprogramming/NN/multiprogramming system/NN/system with/IN/with many/JJ/many processes/NNS/processes /,/, the/DT/the disk/NN/disk queue/NN/queue may/MD/may often/RB/often have/VB/have several/JJ/several pending/VBG/pending requests/NNP/requests. thus/RB/thus /,/, when/WRB/when one/CD/one request/NN/request is/VBZ/is completed/VBN/completed /,/, the/DT/the operating/NN/operating system/NN/system chooses/NNS/chooses which/WDT/which pending/VBG/pending request/NN/request to/TO/to service/NN/service next/NNP/next. how/WRB/how does/VBZ/does the/DT/the operating/NN/operating system/NN/system make/NN/make this/DT/this choice/NN/choice any/DT/any one/CD/one of/IN/of several/JJ/several disk-scheduling/JJ/disk-scheduling algorithms/NNS/algorithms can/MD/can be/VB/be used/VBN/used /,/, and/CC/and we/PRP/we discuss/VBP/discuss them/PRP/them next/JJ/next /./. 12.4.1/CD/12.4.1 fcfs/NNS/fcfs scheduling/VBG/scheduling the/DT/the simplest/JJS/simplest form/NN/form of/IN/of disk/NN/disk scheduling/VBG/scheduling is/VBZ/is /,/, of/IN/of course/NN/course /,/, the/DT/the first-come/JJ/first-come /,/, first-served/JJ/first-served /NN/( fcfs/NNS/fcfs /:/) algorithm/NNP/algorithm. this/DT/this algorithm/NN/algorithm is/VBZ/is intrinsically/RB/intrinsically fair/JJ/fair /,/, but/CC/but it/PRP/it generally/RB/generally does/VBZ/does not/RB/not provide/VB/provide the/DT/the fastest/JJS/fastest service/NNP/service. consider/NN/consider /,/, for/IN/for example/NN/example /,/, a/DT/a disk/NN/disk queue/NN/queue with/IN/with requests/NNS/requests for/IN/for i/0/-NONE-/i/0 to/TO/to blocks/NNS/blocks on/IN/on cylinders/NNS/cylinders 98/CD/98 /,/, 183/CD/183 /,/, 37/CD/37 /,/, 122/CD/122 /,/, 14/CD/14 /,/, 124/CD/124 /,/, 65/CD/65 /,/, 67/CD/67 /,/, 512/CD/512 chapter/NN/chapter 12/CD/12 queue/NN/queue =/:/= 98/CD/98 /,/, 183,37,122/CD/183,37,122 /,/, 14,124,65,67/CD/14,124,65,67 head/NN/head starts/NNS/starts at/IN/at 53/CD/53 0/-NONE-/0 14/CD/14 37/CD/37 536567/CD/536567 98/CD/98 122124/CD/122124 figure/NN/figure 12.4/CD/12.4 fcfs/NNS/fcfs disk/NN/disk scheduling/VBG/scheduling /./. 183199/CD/183199 in/IN/in that/DT/that order/NNP/order. if/IN/if the/DT/the disk/NN/disk head/NN/head is/VBZ/is initially/RB/initially at/IN/at cylinder/NN/cylinder 53/CD/53 /,/, it/PRP/it will/MD/will first/RB/first move/VB/move from/IN/from 53/CD/53 to/TO/to 98/CD/98 /,/, then/RB/then to/TO/to 183/CD/183 /,/, 37/CD/37 /,/, 122/CD/122 /,/, 14/CD/14 /,/, 124/CD/124 /,/, 65/CD/65 /,/, and/CC/and finally/RB/finally to/TO/to 67/CD/67 /,/, for/IN/for a/DT/a total/JJ/total head/NN/head movement/NN/movement of/IN/of 640/CD/640 cylinders/NNP/cylinders. this/DT/this schedule/NN/schedule is/VBZ/is diagrammed/VBN/diagrammed in/IN/in figure/NN/figure 12.4/CD/12.4 /./. the/DT/the wild/NN/wild swing/NN/swing from/IN/from 122/CD/122 to/TO/to 14/CD/14 and/CC/and then/RB/then back/RB/back to/TO/to 124/CD/124 illustrates/NNS/illustrates the/DT/the problem/NN/problem with/IN/with this/DT/this schedule/NNP/schedule. if/IN/if the/DT/the requests/NNS/requests for/IN/for cylinders/NNS/cylinders 37/CD/37 and/CC/and 14/CD/14 could/MD/could be/VB/be serviced/VBN/serviced together/RP/together /,/, before/IN/before or/CC/or after/IN/after the/DT/the requests/NNS/requests for/IN/for 122/CD/122 and/CC/and 124/CD/124 /,/, the/DT/the total/JJ/total head/NN/head movement/NN/movement could/MD/could be/VB/be decreased/VBN/decreased substantially/RB/substantially /,/, and/CC/and performance/NN/performance could/MD/could be/VB/be thereby/RB/thereby improved/VBN/improved /./. 12.4.2/CD/12.4.2 sstf/NN/sstf scheduling/VBG/scheduling it/PRP/it seems/VBZ/seems reasonable/JJ/reasonable to/TO/to service/NN/service all/DT/all the/DT/the requests/NNS/requests close/VBP/close to/TO/to the/DT/the current/JJ/current head/NN/head position/NN/position before/IN/before moving/VBG/moving the/DT/the head/NN/head far/RB/far to/TO/to service/NN/service other/JJ/other this/DT/this assumption/NN/assumption is/VBZ/is the/DT/the basis/NN/basis for/IN/for the/DT/the the/DT/the sstf/NN/sstf algorithm/NN/algorithm selects/NNS/selects the/DT/the request/NN/request with/IN/with the/DT/the least/JJS/least seek/NN/seek time/NN/time from/IN/from the/DT/the current/JJ/current head/NN/head position/NN/position /./. since/IN/since seek/NN/seek time/NN/time increases/NNS/increases with/IN/with the/DT/the number/NN/number of/IN/of cylinders/NNS/cylinders traversed/VBN/traversed by/IN/by the/DT/the head/NN/head /,/, sstf/NN/sstf chooses/NNS/chooses the/DT/the pending/VBG/pending request/NN/request closest/NN/closest to/TO/to the/DT/the current/JJ/current head/NN/head position/NN/position /./. for/IN/for our/PRP$/our example/NN/example request/NN/request queue/NN/queue /,/, the/DT/the closest/JJS/closest request/NN/request to/TO/to the/DT/the initial/JJ/initial head/NN/head position/NN/position /:/( 53/CD/53 /CD/) is/VBZ/is at/IN/at cylinder/NN/cylinder 65/CD/65. once/RB/once we/PRP/we are/VBP/are at/IN/at cylinder/NN/cylinder 65/CD/65 /,/, the/DT/the next/JJ/next closest/NN/closest request/NN/request is/VBZ/is at/IN/at cylinder/NN/cylinder 67/CD/67. from/IN/from there/EX/there /,/, the/DT/the request/NN/request at/IN/at cylinder/NN/cylinder 37/CD/37 is/VBZ/is closer/JJR/closer than/IN/than the/DT/the one/CD/one at/IN/at 98/CD/98 /,/, so/RB/so 37/CD/37 is/VBZ/is served/VBN/served next/NNP/next. continuing/VBG/continuing /,/, we/PRP/we service/VBP/service the/DT/the request/NN/request at/IN/at cylinder/NN/cylinder 14/CD/14 /,/, then/RB/then 98/CD/98 /,/, 122/CD/122 /,/, 124/CD/124 /,/, and/CC/and finally/RB/finally 183/CD/183 /CD/( figure/NN/figure 12.5/CD/12.5 /CD/) /./. this/DT/this scheduling/NN/scheduling method/NN/method results/NNS/results in/IN/in a/DT/a total/NN/total head/NN/head movement/NN/movement of/IN/of only/RB/only 236/CD/236 cylinders-little/JJ/cylinders-little more/JJR/more than/IN/than one-third/NN/one-third of/IN/of the/DT/the distance/NN/distance needed/VBD/needed for/IN/for fcfs/NNS/fcfs scheduling/VBG/scheduling of/IN/of this/DT/this request/NN/request queue/NNP/queue. clearly/RB/clearly /,/, this/DT/this algorithm/NN/algorithm gives/VBZ/gives a/DT/a substantial/JJ/substantial improvement/NN/improvement in/IN/in performance/NN/performance /./. sstf/NN/sstf scheduling/VBG/scheduling is/VBZ/is essentially/RB/essentially a/DT/a form/NN/form of/IN/of shortest-job-first/JJ/shortest-job-first /NN/( sjf/NN/sjf /:/) scheduling/VBG/scheduling ;/:/; and/CC/and like/IN/like sjf/NN/sjf scheduling/VBG/scheduling /,/, it/PRP/it may/MD/may cause/VB/cause starvation/NN/starvation of/IN/of some/DT/some requests/NNP/requests. remember/NN/remember that/WDT/that requests/VBZ/requests may/MD/may arrive/VB/arrive at/IN/at any/DT/any time/NNP/time. suppose/NN/suppose that/WDT/that we/PRP/we have/VBP/have two/CD/two requests/NNS/requests in/IN/in the/DT/the queue/NN/queue /,/, for/IN/for cylinders/NNS/cylinders 14/CD/14 and/CC/and 186/CD/186 /,/, and/CC/and while/IN/while the/DT/the request/NN/request from/IN/from 14/CD/14 is/VBZ/is being/VBG/being serviced/VBN/serviced /,/, a/DT/a new/JJ/new request/NN/request near/IN/near 14/CD/14 arrives/NNP/arrives. this/DT/this new/JJ/new request/NN/request will/MD/will be/VB/be serviced/VBN/serviced next/JJ/next /,/, making/VBG/making the/DT/the request/NN/request at/IN/at 186/CD/186 wait/NNP/wait. while/IN/while this/DT/this request/NN/request is/VBZ/is being/VBG/being serviced/VBN/serviced /,/, another/DT/another request/NN/request close/NN/close to/TO/to 14/CD/14 could/MD/could arrive/NNP/arrive. in/IN/in theory/NN/theory /,/, a/DT/a continual/JJ/continual stream/NN/stream of/IN/of requests/NNS/requests near/IN/near one/CD/one another/DT/another could/MD/could cause/VB/cause the/DT/the request/NN/request for/IN/for cylinder/NN/cylinder 186/CD/186 to/TO/to wait/VB/wait indefinitely/RB/indefinitely /./. 12.4/CD/12.4 queue/NN/queue =/:/= 98/CD/98 /,/, 183/CD/183 /,/, 37/CD/37 /,/, 122/CD/122 /,/, 14/CD/14 /,/, 124/CD/124 /,/, 65/CD/65 /,/, 67/CD/67 head/NN/head starts/NNS/starts at/IN/at 53/CD/53 0/-NONE-/0 14/CD/14 37/CD/37 536567/CD/536567 98/CD/98 122124/CD/122124 figure/NN/figure 12.5/CD/12.5 sstf/NN/sstf disk/NN/disk scheduling/VBG/scheduling /./. 513/CD/513 183199/CD/183199 this/DT/this scenario/NN/scenario becomes/VBZ/becomes increasingly/RB/increasingly likely/JJ/likely as/IN/as the/DT/the pending-request/JJS/pending-request queue/NN/queue grows/VBZ/grows longer/JJR/longer /./. although/IN/although the/DT/the sstf/NN/sstf algorithm/NN/algorithm is/VBZ/is a/DT/a substantial/JJ/substantial improvement/NN/improvement over/IN/over the/DT/the fcfs/NNS/fcfs algorithm/VBP/algorithm /,/, it/PRP/it is/VBZ/is not/RB/not optimal/NNP/optimal. in/IN/in the/DT/the example/NN/example /,/, we/PRP/we can/MD/can do/VB/do better/RBR/better by/IN/by moving/NN/moving the/DT/the head/NN/head from/IN/from 53/CD/53 to/TO/to 37/CD/37 /,/, even/RB/even though/IN/though the/DT/the latter/NN/latter is/VBZ/is not/RB/not closest/JJS/closest /,/, and/CC/and then/RB/then to/TO/to 14/CD/14 /,/, before/IN/before turning/VBG/turning around/IN/around to/TO/to service/NN/service 65/CD/65 /,/, 67/CD/67 /,/, 98/CD/98 /,/, 122/CD/122 /,/, 124/CD/124 /,/, and/CC/and 183/CD/183. this/DT/this strategy/NN/strategy reduces/NNS/reduces the/DT/the total/JJ/total head/NN/head movement/NN/movement to/TO/to 208/CD/208 cylinders/NNS/cylinders /./. 12.4.3/CD/12.4.3 scan/NN/scan scheduling/VBG/scheduling in/IN/in the/DT/the toward/NN/toward the/DT/the end/NN/end /,/, servicing/NN/servicing requests/NNS/requests as/IN/as it/PRP/it reaches/VBZ/reaches each/DT/each cylinder/NN/cylinder /,/, until/IN/until it/PRP/it gets/VBZ/gets to/TO/to the/DT/the other/JJ/other end/NN/end of/IN/of the/DT/the disk/NNP/disk. at/IN/at the/DT/the other/JJ/other end/NN/end /,/, the/DT/the direction/NN/direction of/IN/of head/NN/head movement/NN/movement is/VBZ/is reversed/VBN/reversed /,/, and/CC/and servicing/NN/servicing continues/NNP/continues. the/DT/the head/NN/head continuously/RB/continuously scans/VBZ/scans back/RB/back and/CC/and forth/JJ/forth across/IN/across the/DT/the disk/NNP/disk. the/DT/the scan/NN/scan algorithm/NN/algorithm is/VBZ/is sometimes/RB/sometimes called/VBN/called the/DT/the since/NN/since the/DT/the disk/NN/disk arm/NN/arm behaves/NNS/behaves just/RB/just like/IN/like an/DT/an elevator/NN/elevator in/IN/in a/DT/a building/NN/building /,/, first/JJ/first servicing/NN/servicing all/DT/all the/DT/the requests/NNS/requests going/VBG/going up/RP/up and/CC/and then/RB/then reversing/VBG/reversing to/TO/to service/NN/service requests/NNS/requests the/DT/the other/JJ/other way/NN/way /./. let/NN/let 's/POS/'s return/NN/return to/TO/to our/PRP$/our example/NN/example to/TO/to illustrate/NNP/illustrate. before/IN/before applying/VBG/applying scan/NN/scan to/TO/to schedule/VB/schedule the/DT/the requests/NNS/requests on/IN/on cylinders/NNS/cylinders 98/CD/98 /,/, 183,37/CD/183,37 /,/, 122/CD/122 /,/, 14/CD/14 /,/, 124/CD/124 /,/, 65/CD/65 /,/, and/CC/and 67/CD/67 /,/, we/PRP/we need/VBP/need to/TO/to know/VB/know the/DT/the direction/NN/direction of/IN/of head/NN/head movement/NN/movement in/IN/in addition/NN/addition to/TO/to the/DT/the head/NN/head 's/POS/'s current/JJ/current position/NN/position /./. assuming/VBG/assuming that/IN/that the/DT/the disk/NN/disk arm/NN/arm is/VBZ/is moving/VBG/moving toward/IN/toward 0/-NONE-/0 and/CC/and that/IN/that the/DT/the initial/JJ/initial head/NN/head position/NN/position is/VBZ/is again/RB/again 53/CD/53 /,/, the/DT/the head/NN/head will/MD/will next/VB/next service/NN/service 37/CD/37 and/CC/and then/RB/then 14/CD/14. at/IN/at cylinder/NN/cylinder 0/-NONE-/0 /,/, the/DT/the arm/NN/arm will/MD/will reverse/VB/reverse and/CC/and will/MD/will move/VB/move toward/IN/toward the/DT/the other/JJ/other end/NN/end of/IN/of the/DT/the disk/NN/disk /,/, servicil/NN/servicil lg/NN/lg the/DT/the requests/NNS/requests at/IN/at 65/CD/65 /,/, 67/CD/67 /,/, 98/CD/98 /,/, 122/CD/122 /,/, 124/CD/124 /,/, and/CC/and 183/CD/183 /CD/( figure/NN/figure 12.6/CD/12.6 /CD/) /./. if/IN/if a/DT/a request/NN/request arrives/VBZ/arrives in/IN/in the/DT/the queue/NN/queue just/RB/just in/IN/in front/NN/front of/IN/of the/DT/the head/NN/head /,/, it/PRP/it will/MD/will be/VB/be serviced/VBN/serviced almost/RB/almost immediately/RB/immediately ;/:/; a/DT/a request/NN/request arriving/VBG/arriving just/RB/just behind/IN/behind the/DT/the head/NN/head will/MD/will have/VB/have to/TO/to wait/VB/wait until/IN/until the/DT/the arm/NN/arm moves/VBZ/moves to/TO/to the/DT/the end/NN/end of/IN/of the/DT/the disk/NN/disk /,/, reverses/NNS/reverses direction/NN/direction /,/, and/CC/and comes/VBZ/comes back/RP/back /./. assuming/VBG/assuming a/DT/a uniform/NN/uniform distribution/NN/distribution of/IN/of requests/NNS/requests for/IN/for cylinders/NNS/cylinders /,/, consider/NN/consider the/DT/the density/NN/density of/IN/of requests/NNS/requests when/WRB/when the/DT/the head/NN/head reaches/VBZ/reaches one/CD/one end/NN/end and/CC/and reverses/NNS/reverses direction/NNP/direction. at/IN/at this/DT/this point/NN/point /,/, relatively/RB/relatively few/JJ/few requests/NNS/requests are/VBP/are immediately/RB/immediately in/IN/in front/NN/front of/IN/of the/DT/the head/NN/head /,/, since/IN/since these/DT/these cylinders/NNS/cylinders have/VBP/have recently/RB/recently been/VBN/been serviced/NNP/serviced. the/DT/the heaviest/JJS/heaviest density/NN/density of/IN/of requests/NNS/requests 514/CD/514 chapter/NN/chapter 12/CD/12 queue/NN/queue =/:/= 98/CD/98 /,/, 183,37,122/CD/183,37,122 /,/, 14,124,65,67/CD/14,124,65,67 head/NN/head starts/NNS/starts at/IN/at 53/CD/53 0/-NONE-/0 14/CD/14 37/CD/37 536567/CD/536567 98/CD/98 122124/CD/122124 figure/NN/figure 12.6/CD/12.6 scan/NN/scan disk/NN/disk scheduling/VBG/scheduling /./. 183199/CD/183199 is/VBZ/is at/IN/at the/DT/the other/JJ/other end/NN/end of/IN/of the/DT/the disk/NN/disk these/DT/these requests/NNS/requests have/VBP/have also/RB/also waited/VBN/waited the/DT/the longest/JJS/longest so/RB/so why/WRB/why not/RB/not go/VB/go there/RB/there first/JJ/first that/IN/that is/VBZ/is the/DT/the idea/NN/idea of/IN/of the/DT/the next/JJ/next algorithm/NN/algorithm /./. 12.4.4/CD/12.4.4 c-scan/JJ/c-scan scheduling/NN/scheduling is/VBZ/is a/DT/a variant/JJ/variant of/IN/of scan/JJ/scan designed/VBN/designed to/TO/to provide/VB/provide a/DT/a more/RBR/more uniform/NN/uniform wait/NN/wait time/NNP/time. like/IN/like scan/NN/scan /,/, c-scan/JJ/c-scan moves/NNS/moves the/DT/the head/NN/head from/IN/from one/CD/one end/NN/end of/IN/of the/DT/the disk/NN/disk to/TO/to the/DT/the other/JJ/other /,/, servicing/NN/servicing requests/NNS/requests along/IN/along the/DT/the way/NNP/way. when/WRB/when the/DT/the head/NN/head reaches/VBZ/reaches the/DT/the other/JJ/other end/NN/end /,/, however/RB/however /,/, it/PRP/it immediately/RB/immediately returns/VBZ/returns to/TO/to the/DT/the beginning/NN/beginning of/IN/of the/DT/the disk/NN/disk without/IN/without servicing/NN/servicing any/DT/any requests/NNS/requests on/IN/on the/DT/the return/NN/return trip/NN/trip /:/( figure/NN/figure 12.7/CD/12.7 /CD/) /./. the/DT/the c-scan/JJ/c-scan scheduling/NN/scheduling algorithm/NN/algorithm essentially/RB/essentially treats/VBZ/treats the/DT/the cylinders/NNS/cylinders as/IN/as a/DT/a circular/JJ/circular list/NN/list that/WDT/that wraps/VBZ/wraps around/IN/around from/IN/from the/DT/the final/JJ/final cylinder/NN/cylinder to/TO/to the/DT/the first/JJ/first one/CD/one /./. queue/NN/queue =/:/= 98/CD/98 /,/, 183/CD/183 /,/, 37/CD/37 /,/, 122/CD/122 /,/, 14/CD/14 /,/, 124/CD/124 /,/, 65/CD/65 /,/, 67/CD/67 head/NN/head starts/NNS/starts at/IN/at 53/CD/53 0/-NONE-/0 1/CD/1 4/CD/4 37/CD/37 53/CD/53 65/CD/65 67/CD/67 98/CD/98 1/CD/1 22/CD/22 1/CD/1 24/CD/24 figure/NN/figure 12.7/CD/12.7 c-scan/JJ/c-scan disk/NN/disk scheduling/VBG/scheduling /./. 183199/CD/183199 12.4/CD/12.4 queue/NN/queue =/:/= 98/CD/98 /,/, 183/CD/183 /,/, 37/CD/37 /,/, 122/CD/122 /,/, 14/CD/14 /,/, 124/CD/124 /,/, 65/CD/65 /,/, 67/CD/67 head/NN/head starts/NNS/starts at/IN/at 53/CD/53 0/-NONE-/0 14/CD/14 37/CD/37 536567/CD/536567 98/CD/98 122124/CD/122124 figure/NN/figure 12.8/CD/12.8 c-look/NN/c-look disk/NN/disk scheduling/VBG/scheduling /./. 12.4.5/CD/12.4.5 look/NN/look scheduling/VBG/scheduling 515/CD/515 183199/CD/183199 as/IN/as we/PRP/we described/VBD/described themf/NN/themf both/DT/both scan/NN/scan and/CC/and c-scan/JJ/c-scan move/NN/move the/DT/the disk/NN/disk arm/NN/arm across/IN/across the/DT/the full/JJ/full width/NN/width of/IN/of the/DT/the disk/NN/disk in/IN/in practicef/NN/practicef neither/DT/neither algorithm/NN/algorithm is/VBZ/is often/RB/often implemented/VBN/implemented this/DT/this way/NNP/way. more/RBR/more commonlyf/JJ/commonlyf the/DT/the arm/NN/arm goes/VBZ/goes only/RB/only as/IN/as far/RB/far as/IN/as the/DT/the final/JJ/final request/NN/request in/IN/in each/DT/each direction/NNP/direction. then/RB/then /,/, it/PRP/it reverses/VBZ/reverses direction/NN/direction immediatelyf/NN/immediatelyf without/IN/without going/VBG/going all/DT/all the/DT/the way/NN/way to/TO/to the/DT/the end/NN/end of/IN/of the/DT/the disk/NN/disk versions/NNS/versions of/IN/of scan/JJ/scan and/CC/and c-scan/JJ/c-scan that/IN/that follow/JJ/follow this/DT/this pattern/NN/pattern are/VBP/are called/VBN/called and/CC/and because/IN/because they/PRP/they look/VBP/look for/IN/for a/DT/a request/NN/request before/IN/before continuing/VBG/continuing to/TO/to move/VB/move in/IN/in a/DT/a given/VBN/given direction/NN/direction /:/( figure/NN/figure 12.8/CD/12.8 /CD/) /./. 12.4.6/CD/12.4.6 selection/NN/selection of/IN/of a/DT/a disk-scheduling/JJ/disk-scheduling algorithm/NN/algorithm given/VBN/given so/RB/so many/JJ/many disk-scheduling/JJ/disk-scheduling algorithmsf/NN/algorithmsf how/WRB/how do/VBP/do we/PRP/we choose/VB/choose the/DT/the best/JJS/best one/CD/one sstf/NN/sstf is/VBZ/is common/JJ/common and/CC/and has/VBZ/has a/DT/a natural/JJ/natural appeal/NN/appeal because/IN/because it/PRP/it increases/VBZ/increases performance/NN/performance over/IN/over fcfs/NNP/fcfs. scan/NN/scan and/CC/and c-scan/JJ/c-scan perform/NN/perform better/RBR/better for/IN/for systems/NNS/systems that/WDT/that place/NN/place a/DT/a heavy/JJ/heavy load/NN/load on/IN/on the/DT/the diskf/NN/diskf because/IN/because they/PRP/they are/VBP/are less/RBR/less likely/JJ/likely to/TO/to cause/VB/cause a/DT/a starvation/NN/starvation problem/NNP/problem. for/IN/for any/DT/any particular/JJ/particular list/NN/list of/IN/of requestsf/NN/requestsf we/PRP/we can/MD/can define/VB/define an/DT/an optimal/JJ/optimal order/NN/order of/IN/of retrievat/NN/retrievat but/CC/but the/DT/the computation/NN/computation needed/VBD/needed to/TO/to find/VB/find an/DT/an optimal/JJ/optimal schedule/NN/schedule may/MD/may not/RB/not justify/VB/justify the/DT/the savings/NNS/savings over/IN/over sstf/NN/sstf or/CC/or scan/NNP/scan. with/IN/with any/DT/any scheduling/VBG/scheduling algoritlunf/NN/algoritlunf howeverf/NN/howeverf performance/NN/performance depends/NNS/depends heavily/RB/heavily on/IN/on the/DT/the number/NN/number and/CC/and types/NNS/types of/IN/of requests/NNP/requests. for/IN/for instance/NN/instance /,/, suppose/NN/suppose that/IN/that the/DT/the queue/NN/queue usually/RB/usually has/VBZ/has just/RB/just one/CD/one outstanding/JJ/outstanding request/NNP/request. thenf/NN/thenf all/DT/all scheduling/VBG/scheduling algorithms/NNS/algorithms behave/VBP/behave the/DT/the samef/NN/samef because/IN/because they/PRP/they have/VBP/have only/RB/only one/CD/one choice/NN/choice of/IN/of where/WRB/where to/TO/to move/VB/move the/DT/the disk/NN/disk head/NN/head /:/: they/PRP/they all/VBP/all behave/VBP/behave like/IN/like fcfs/NNS/fcfs scheduling/VBG/scheduling /./. requests/NNS/requests for/IN/for disk/NN/disk service/NN/service can/MD/can be/VB/be greatly/RB/greatly influenced/VBN/influenced by/IN/by the/DT/the file-allocation/NN/file-allocation method/NNP/method. a/DT/a program/NN/program reading/NN/reading a/DT/a contiguously/RB/contiguously allocated/VBN/allocated file/NN/file will/MD/will generate/VB/generate several/JJ/several requests/NNS/requests that/WDT/that are/VBP/are close/RB/close together/RB/together on/IN/on the/DT/the disk/NN/disk /,/, resulting/VBG/resulting in/IN/in limited/JJ/limited head/NN/head movement/NN/movement /./. a/DT/a linked/VBN/linked or/CC/or indexed/VBN/indexed fik/NN/fik in/IN/in contrastf/NN/contrastf may/MD/may include/VB/include blocks/NNS/blocks that/WDT/that are/VBP/are widely/RB/widely scattered/VBN/scattered on/IN/on the/DT/the diskf/NN/diskf resulting/VBG/resulting in/IN/in greater/JJR/greater head/NN/head movement/NN/movement /./. the/DT/the location/NN/location of/IN/of directories/NNS/directories and/CC/and index/NN/index blocks/NNS/blocks is/VBZ/is also/RB/also important/NNP/important. since/IN/since every/DT/every file/NN/file must/MD/must be/VB/be opened/VBN/opened to/TO/to be/VB/be usedf/JJ/usedf and/CC/and opening/VBG/opening a/DT/a file/NN/file requires/VBZ/requires searching/VBG/searching the/DT/the directory/NN/directory structuref/NN/structuref the/DT/the directories/NNS/directories will/MD/will be/VB/be accessed/VBN/accessed frequently/-NONE-/frequently. suppose/RB/suppose that/IN/that a/DT/a directory/NN/directory entry/NN/entry is/VBZ/is on/IN/on the/DT/the first/JJ/first cylinder/NN/cylinder and/CC/and a/DT/a filef/NN/filef s/VBZ/s data/NNS/data are/VBP/are on/IN/on the/DT/the final/JJ/final cylinder/NNP/cylinder. in/IN/in this/DT/this casef/NN/casef the/DT/the disk/NN/disk head/NN/head has/VBZ/has to/TO/to move/VB/move the/DT/the entire/JJ/entire width/NN/width of/IN/of the/DT/the disk/NN/disk if/IN/if the/DT/the directory/NN/directory 516/CD/516 chapter/NN/chapter 12/CD/12 12.5/CD/12.5 entry/NN/entry were/VBD/were on/IN/on the/DT/the middle/NN/middle cylinder/NN/cylinder /,/, the/DT/the head/NN/head would/MD/would have/VB/have to/TO/to move/VB/move only/RB/only one-half/JJ/one-half the/DT/the width/NNP/width. caching/NN/caching the/DT/the directories/NNS/directories and/CC/and index/NN/index blocks/NNS/blocks in/IN/in main/JJ/main memory/NN/memory can/MD/can also/RB/also help/VB/help to/TO/to reduce/VB/reduce disk-arm/JJ/disk-arm movement/NN/movement particularly/RB/particularly for/IN/for read/NN/read requests/NNS/requests /./. because/IN/because of/IN/of these/DT/these complexities/NNS/complexities /,/, the/DT/the disk-scheduling/JJ/disk-scheduling algorithm/NN/algorithm should/MD/should be/VB/be written/VBN/written as/IN/as a/DT/a separate/JJ/separate module/NN/module of/IN/of the/DT/the operating/NN/operating system/NN/system /,/, so/RB/so that/IN/that it/PRP/it can/MD/can be/VB/be replaced/VBN/replaced with/IN/with a/DT/a different/JJ/different algorithm/NN/algorithm if/IN/if necessary/NNP/necessary. either/CC/either sstf/NN/sstf or/CC/or look/VB/look is/VBZ/is a/DT/a reasonable/JJ/reasonable choice/NN/choice for/IN/for the/DT/the default/NN/default algorithm/NN/algorithm /./. the/DT/the scheduling/NN/scheduling algorithms/NNS/algorithms described/VBD/described here/RB/here consider/JJR/consider only/RB/only the/DT/the seek/NN/seek distances/NNS/distances /./. for/IN/for modern/JJ/modern disks/NNS/disks /,/, the/DT/the rotational/JJ/rotational latency/NN/latency can/MD/can be/VB/be nearly/RB/nearly as/IN/as large/JJ/large as/IN/as the/DT/the average/NN/average seek/NN/seek time/NNP/time. it/PRP/it is/VBZ/is difficult/JJ/difficult for/IN/for the/DT/the operating/NN/operating system/NN/system to/TO/to schedule/VB/schedule for/IN/for improved/VBN/improved rotational/JJ/rotational latency/NN/latency /,/, though/IN/though /,/, because/IN/because modern/JJ/modern disks/NNS/disks do/VBP/do not/RB/not disclose/VB/disclose the/DT/the physical/JJ/physical location/NN/location of/IN/of logical/JJ/logical blocks/NNP/blocks. disk/NN/disk manufacturers/NNS/manufacturers have/VBP/have been/VBN/been alleviating/VBG/alleviating this/DT/this problem/NN/problem by/IN/by implementing/NN/implementing disk-scheduling/JJ/disk-scheduling algorithms/NNS/algorithms in/IN/in the/DT/the controller/NN/controller hardware/NN/hardware built/VBN/built into/IN/into the/DT/the disk/NN/disk drive/NNP/drive. if/IN/if the/DT/the operating/NN/operating system/NN/system sends/NNS/sends a/DT/a batch/NN/batch of/IN/of requests/NNS/requests to/TO/to the/DT/the controller/NN/controller /,/, the/DT/the controller/NN/controller can/MD/can queue/VB/queue them/PRP/them and/CC/and then/RB/then schedule/JJ/schedule them/PRP/them to/TO/to improve/VB/improve both/DT/both the/DT/the seek/NN/seek time/NN/time and/CC/and the/DT/the rotational/JJ/rotational latency/NN/latency /./. if/IN/if i/o/NNP/i/o performance/NN/performance were/VBD/were the/DT/the only/JJ/only consideration/NN/consideration /,/, the/DT/the operating/NN/operating system/NN/system would/MD/would gladly/RB/gladly turn/VB/turn over/IN/over the/DT/the responsibility/NN/responsibility of/IN/of disk/NN/disk scheduling/VBG/scheduling to/TO/to the/DT/the disk/NN/disk hardware/NN/hardware /./. in/IN/in practice/NN/practice /,/, however/RB/however /,/, the/DT/the operating/NN/operating system/NN/system may/MD/may have/VB/have other/JJ/other constraints/NNS/constraints on/IN/on the/DT/the service/NN/service order/NN/order for/IN/for requests/NNP/requests. for/IN/for instance/NN/instance /,/, demand/NN/demand paging/VBG/paging may/MD/may take/VB/take priority/NN/priority over/IN/over application/NN/application i/0/-NONE-/i/0 /,/, and/CC/and writes/VBZ/writes are/VBP/are more/JJR/more urgent/JJ/urgent than/IN/than reads/NNS/reads if/IN/if the/DT/the cache/NN/cache is/VBZ/is running/VBG/running out/RP/out of/IN/of free/JJ/free pages/NNP/pages. also/RB/also /,/, it/PRP/it may/MD/may be/VB/be desirable/JJ/desirable to/TO/to guarantee/VB/guarantee the/DT/the order/NN/order of/IN/of a/DT/a set/NN/set of/IN/of disk/NN/disk writes/NNS/writes to/TO/to make/VB/make the/DT/the file/NN/file system/NN/system robust/NN/robust in/IN/in the/DT/the face/NN/face of/IN/of system/NN/system crashes/NNS/crashes /./. consider/NN/consider what/WP/what could/MD/could happen/VB/happen if/IN/if the/DT/the operating/NN/operating system/NN/system allocated/VBD/allocated a/DT/a disk/NN/disk page/NN/page to/TO/to a/DT/a file/NN/file and/CC/and the/DT/the application/NN/application wrote/VBD/wrote data/NNS/data into/IN/into that/DT/that page/NN/page before/IN/before the/DT/the operating/NN/operating system/NN/system had/VBD/had a/DT/a chance/NN/chance to/TO/to flush/VB/flush the/DT/the modified/JJ/modified inode/NN/inode and/CC/and free-space/NN/free-space list/NN/list back/RB/back to/TO/to disk/NNP/disk. to/TO/to accommodate/VB/accommodate such/JJ/such requirements/NNS/requirements /,/, an/DT/an operating/NN/operating system/NN/system may/MD/may choose/VB/choose to/TO/to do/VB/do its/PRP$/its own/JJ/own disk/NN/disk scheduling/NN/scheduling and/CC/and to/TO/to spoon-feed/JJ/spoon-feed the/DT/the requests/NNS/requests to/TO/to the/DT/the disk/NN/disk controller/NN/controller /,/, one/CD/one by/IN/by one/CD/one /,/, for/IN/for some/DT/some types/NNS/types of/IN/of i/0/-NONE-/i/0 /./. the/DT/the operating/NN/operating system/NN/system is/VBZ/is responsible/JJ/responsible for/IN/for several/JJ/several other/JJ/other aspects/NNS/aspects of/IN/of disk/NN/disk management/NN/management /,/, too/NNP/too. here/RB/here we/PRP/we discuss/VBP/discuss disk/NN/disk initialization/NN/initialization /,/, booting/VBG/booting from/IN/from disk/NN/disk /,/, and/CC/and bad-block/JJ/bad-block recovery/NN/recovery /./. 12.5.1/CD/12.5.1 disk/NN/disk formatting/VBG/formatting a/DT/a new/JJ/new magnetic/JJ/magnetic disk/NN/disk is/VBZ/is a/DT/a blank/NN/blank slate/NN/slate /:/: it/PRP/it is/VBZ/is just/RB/just a/DT/a platter/NN/platter of/IN/of a/DT/a magnetic/JJ/magnetic recording/NN/recording material/NNP/material. before/IN/before a/DT/a disk/NN/disk can/MD/can store/VB/store data/NNS/data /,/, it/PRP/it must/MD/must be/VB/be divided/VBN/divided into/IN/into sectors/NNS/sectors that/WDT/that the/DT/the disk/NN/disk controller/NN/controller can/MD/can read/VB/read and/CC/and write/NNP/write. this/DT/this process/NN/process is/VBZ/is called/VBN/called or/CC/or low-level/NNP/low-level formatting/NN/formatting fills/VBZ/fills the/DT/the disk/NN/disk with/IN/with a/DT/a special/JJ/special data/NNS/data structure/NN/structure for/IN/for each/DT/each sector/NNP/sector. the/DT/the data/NNS/data structure/VBP/structure for/IN/for a/DT/a sector/NN/sector typically/RB/typically consists/VBZ/consists of/IN/of a/DT/a header/NN/header /,/, a/DT/a data/NN/data area/NN/area /:/( usually/RB/usually 512/CD/512 bytes/NNS/bytes in/IN/in size/NN/size /:/) /,/, and/CC/and a/DT/a trailer/NNP/trailer. the/DT/the header/NN/header and/CC/and trailer/NN/trailer contain/NN/contain information/NN/information used/VBD/used by/IN/by the/DT/the disk/NN/disk controller/NN/controller /,/, such/JJ/such as/IN/as a/DT/a sector/NN/sector number/NN/number and/CC/and an/DT/an /./. when/WRB/when the/DT/the controller/NN/controller writes/VBZ/writes a/DT/a sector/NN/sector of/IN/of data/NNS/data during/IN/during normal/JJ/normal i/0/-NONE-/i/0 /,/, the/DT/the ecc/NN/ecc is/VBZ/is updated/VBN/updated with/IN/with a/DT/a value/NN/value calculated/VBN/calculated from/IN/from all/DT/all the/DT/the bytes/NNS/bytes in/IN/in the/DT/the data/NN/data area/NNP/area. when/WRB/when the/DT/the sector/NN/sector is/VBZ/is read/VBN/read /,/, the/DT/the ecc/NN/ecc is/VBZ/is recalculated/VBN/recalculated and/CC/and compared/VBN/compared with/IN/with the/DT/the stored/VBN/stored value/NNP/value. if/IN/if the/DT/the stored/VBN/stored and/CC/and calculated/VBN/calculated numbers/NNS/numbers are/VBP/are different/JJ/different /,/, this/DT/this 12.5/CD/12.5 517/CD/517 mismatch/NN/mismatch indicates/VBZ/indicates that/IN/that the/DT/the data/NNS/data area/NN/area of/IN/of the/DT/the sector/NN/sector has/VBZ/has become/VBN/become corrupted/VBN/corrupted and/CC/and that/IN/that the/DT/the disk/NN/disk sector/NN/sector may/MD/may be/VB/be bad/JJ/bad /NN/( section/NN/section 12.5.3/CD/12.5.3 /CD/) /./. the/DT/the ecc/NN/ecc is/VBZ/is an/DT/an error-correcting/JJ/error-correcting code/NN/code because/IN/because it/PRP/it contains/VBZ/contains enough/RB/enough information/NN/information /,/, if/IN/if only/RB/only a/DT/a few/JJ/few bits/NNS/bits of/IN/of data/NNS/data have/VBP/have been/VBN/been corrupted/VBN/corrupted /,/, to/TO/to enable/JJ/enable the/DT/the controller/NN/controller to/TO/to identify/VB/identify which/WDT/which bits/NNS/bits have/VBP/have changed/VBN/changed and/CC/and calculate/JJ/calculate what/WP/what their/PRP$/their correct/NN/correct values/NNS/values should/MD/should be/NNP/be. it/PRP/it then/RB/then reports/VBZ/reports a/DT/a recoverable/JJ/recoverable /./. the/DT/the controller/NN/controller automatically/RB/automatically does/VBZ/does the/DT/the ecc/NN/ecc processing/NN/processing whenever/NN/whenever a/DT/a sector/NN/sector is/VBZ/is read/VBN/read or/CC/or written/VBN/written /./. most/JJS/most hard/JJ/hard disks/NNS/disks are/VBP/are low-level-formatted/JJ/low-level-formatted at/IN/at the/DT/the factory/NN/factory as/IN/as a/DT/a part/NN/part of/IN/of the/DT/the manufacturing/VBG/manufacturing process/NNP/process. this/DT/this formatting/NN/formatting enables/VBZ/enables the/DT/the manufacturer/NN/manufacturer to/TO/to test/NN/test the/DT/the disk/NN/disk and/CC/and to/TO/to initialize/VB/initialize the/DT/the mapping/NN/mapping from/IN/from logical/JJ/logical block/NN/block numbers/NNS/numbers to/TO/to defect-free/JJ/defect-free sectors/NNS/sectors on/IN/on the/DT/the disk/NNP/disk. for/IN/for many/JJ/many hard/JJ/hard disks/NNS/disks /,/, when/WRB/when the/DT/the disk/NN/disk controller/NN/controller is/VBZ/is instructed/VBN/instructed to/TO/to low-level-format/JJ/low-level-format the/DT/the disk/NN/disk /,/, it/PRP/it can/MD/can also/RB/also be/VB/be told/VBN/told how/WRB/how many/JJ/many bytes/NNS/bytes of/IN/of data/NNS/data space/NN/space to/TO/to leave/VB/leave between/IN/between the/DT/the header/NN/header and/CC/and trailer/NN/trailer of/IN/of all/DT/all sectors/NNP/sectors. it/PRP/it is/VBZ/is usually/RB/usually possible/JJ/possible to/TO/to choose/VB/choose among/IN/among a/DT/a few/JJ/few sizes/NNS/sizes /,/, such/JJ/such as/IN/as 256,512/CD/256,512 /,/, and/CC/and 1,024/CD/1,024 bytes/NNP/bytes. formatting/NN/formatting a/DT/a disk/NN/disk with/IN/with a/DT/a larger/JJR/larger sector/NN/sector size/NN/size means/VBZ/means that/DT/that fewer/JJR/fewer sectors/NNS/sectors can/MD/can fit/VB/fit on/IN/on each/DT/each track/NN/track ;/:/; but/CC/but it/PRP/it also/RB/also means/VBZ/means that/DT/that fewer/JJR/fewer headers/NNS/headers and/CC/and trailers/NNS/trailers are/VBP/are written/VBN/written on/IN/on each/DT/each track/NN/track and/CC/and more/JJR/more space/NN/space is/VBZ/is available/JJ/available for/IN/for user/NN/user data/NNP/data. some/DT/some operating/NN/operating systems/NNS/systems can/MD/can handle/VB/handle only/RB/only a/DT/a sector/NN/sector size/NN/size of/IN/of 512/CD/512 bytes/NNS/bytes /./. before/IN/before it/PRP/it can/MD/can use/VB/use a/DT/a disk/NN/disk to/TO/to hold/VB/hold files/NNS/files /,/, the/DT/the operating/NN/operating system/NN/system still/RB/still needs/VBZ/needs to/TO/to record/VB/record its/PRP$/its own/JJ/own data/NNS/data structures/NNS/structures on/IN/on the/DT/the disk/NNP/disk. it/PRP/it does/VBZ/does so/RB/so in/IN/in two/CD/two steps/NNP/steps. the/DT/the first/JJ/first step/NN/step is/VBZ/is to/TO/to the/DT/the disk/NN/disk into/IN/into one/CD/one or/CC/or more/JJR/more groups/NNS/groups of/IN/of cylinders/NNP/cylinders. the/DT/the operatiltg/NN/operatiltg system/NN/system can/MD/can treat/VB/treat each/DT/each partition/NN/partition as/IN/as though/IN/though it/PRP/it were/VBD/were a/DT/a separate/JJ/separate disk/NNP/disk. for/IN/for instance/NN/instance /,/, one/CD/one partition/NN/partition can/MD/can hold/VB/hold a/DT/a copy/NN/copy of/IN/of the/DT/the operating/NN/operating system/NN/system 's/POS/'s executable/JJ/executable code/NN/code /,/, while/IN/while another/DT/another holds/NNS/holds user/NN/user files/NNP/files. the/DT/the second/JJ/second step/NN/step is/VBZ/is icgicz/NN/icgicz ;/:/; i/PRP/i or/CC/or creation/NN/creation of/IN/of a/DT/a file/NN/file system/NNP/system. in/IN/in this/DT/this step/NN/step /,/, the/DT/the operating/NN/operating system/NN/system stores/NNS/stores the/DT/the iltitial/JJ/iltitial file-system/NN/file-system data/NNS/data structures/NNS/structures onto/IN/onto the/DT/the disk/NNP/disk. these/DT/these data/NNS/data structures/NNS/structures may/MD/may include/VB/include maps/NNS/maps of/IN/of free/JJ/free and/CC/and allocated/VBD/allocated space/NN/space /:/( a/DT/a fat/JJ/fat or/CC/or inodes/NNS/inodes /:/) and/CC/and an/DT/an initial/JJ/initial empty/NN/empty directory/NN/directory /./. to/TO/to increase/VB/increase efficiency/NN/efficiency /,/, most/JJS/most file/JJ/file systems/NNS/systems group/NN/group blocks/NNS/blocks together/RB/together into/IN/into larger/JJR/larger chunks/NNS/chunks /,/, frequently/RB/frequently called/VBN/called disk/NN/disk i/0/-NONE-/i/0 is/VBZ/is done/VBN/done via/IN/via blocks/NNS/blocks /,/, but/CC/but file/RB/file system/NN/system ii/NN/ii 0/-NONE-/0 is/VBZ/is done/VBN/done via/IN/via clusters/NNS/clusters /,/, effectively/RB/effectively assuring/VBG/assuring that/IN/that ii/NN/ii 0/-NONE-/0 has/VBZ/has more/JJR/more sequential-access/JJ/sequential-access and/CC/and fewer/JJR/fewer random-access/JJ/random-access characteristics/NNS/characteristics /./. some/DT/some operating/NN/operating systems/NNS/systems give/VBP/give special/JJ/special programs/NNS/programs the/DT/the ability/NN/ability to/TO/to use/VB/use a/DT/a disk/NN/disk partition/NN/partition as/IN/as a/DT/a large/JJ/large sequential/NN/sequential array/NN/array of/IN/of logical/JJ/logical blocks/NNS/blocks /,/, without/IN/without any/DT/any file-system/JJ/file-system data/NNS/data structures/NNP/structures. this/DT/this array/NN/array is/VBZ/is sometimes/RB/sometimes called/VBN/called the/DT/the raw/NN/raw disk/NN/disk /,/, and/CC/and ii/NN/ii 0/-NONE-/0 to/TO/to this/DT/this array/NN/array is/VBZ/is termed/VBN/termed raw/NN/raw l/0/NNP/l/0. for/IN/for example/NN/example /,/, some/DT/some database/NN/database systems/NNS/systems prefer/VBP/prefer raw/JJ/raw iio/NN/iio because/IN/because it/PRP/it enables/VBZ/enables them/PRP/them to/TO/to control/NN/control the/DT/the exact/JJ/exact disk/NN/disk location/NN/location where/WRB/where each/DT/each database/NN/database record/NN/record is/VBZ/is stored/NNP/stored. raw/NN/raw l/0/-NONE-/l/0 bypasses/VBZ/bypasses all/DT/all the/DT/the file-system/JJ/file-system services/NNS/services /,/, such/JJ/such as/IN/as the/DT/the buffer/NN/buffer cache/NN/cache /,/, file/NN/file locking/VBG/locking /,/, prefetching/VBG/prefetching /,/, space/NN/space allocation/NN/allocation /,/, file/NN/file names/VBZ/names /,/, and/CC/and directories/NNP/directories. we/PRP/we can/MD/can make/VB/make certain/JJ/certain applications/NNS/applications more/RBR/more efficient/JJ/efficient by/IN/by allowing/NN/allowing them/PRP/them to/TO/to implement/VB/implement their/PRP$/their own/JJ/own special-purpose/JJ/special-purpose storage/NN/storage services/NNS/services on/IN/on a/DT/a raw/JJ/raw partition/NN/partition /,/, but/CC/but most/JJS/most applications/NNS/applications perform/NN/perform better/RBR/better when/WRB/when they/PRP/they use/VBP/use the/DT/the regular/JJ/regular file-system/NN/file-system services/NNS/services /./. 12.5.2/CD/12.5.2 boot/NN/boot block/NN/block for/IN/for a/DT/a computer/NN/computer to/TO/to start/VB/start running-for/JJ/running-for instance/NN/instance /,/, when/WRB/when it/PRP/it is/VBZ/is powered/VBN/powered up/RP/up or/CC/or rebooted/VBN/rebooted -it/JJ/-it must/MD/must have/VB/have an/DT/an initial/JJ/initial program/NN/program to/TO/to run/NNP/run. this/DT/this initial/JJ/initial bootstrap/NN/bootstrap program/NN/program tends/NNS/tends to/TO/to be/VB/be simple/NNP/simple. it/PRP/it initializes/VBZ/initializes all/DT/all aspects/NNS/aspects of/IN/of the/DT/the system/NN/system /,/, from/IN/from cpu/NN/cpu registers/NNS/registers to/TO/to device/VB/device controllers/NNS/controllers and/CC/and the/DT/the contents/NNS/contents of/IN/of main/JJ/main memory/NN/memory /,/, and/CC/and then/RB/then starts/VBZ/starts the/DT/the operating/NN/operating system/NNP/system. to/TO/to do/VB/do its/PRP$/its job/NN/job /,/, the/DT/the bootstrap/NN/bootstrap program/NN/program finds/NNS/finds the/DT/the 518/CD/518 chapter/NN/chapter 12/CD/12 operating-system/JJ/operating-system kernel/NN/kernel on/IN/on disk/NN/disk /,/, loads/NNS/loads that/WDT/that kernel/NN/kernel into/IN/into memory/NN/memory /,/, and/CC/and jumps/NNS/jumps to/TO/to an/DT/an initial/JJ/initial address/NN/address to/TO/to begin/VB/begin the/DT/the operating-system/JJ/operating-system execution/NN/execution /./. for/IN/for most/JJS/most computers/NNS/computers /,/, the/DT/the bootstrap/NN/bootstrap is/VBZ/is stored/VBN/stored in/IN/in this/DT/this location/NN/location is/VBZ/is convenient/JJ/convenient /,/, because/IN/because rom/NN/rom needs/VBZ/needs no/DT/no initialization/NN/initialization and/CC/and is/VBZ/is at/IN/at a/DT/a fixed/VBN/fixed location/NN/location that/IN/that the/DT/the processor/NN/processor can/MD/can start/VB/start executing/VBG/executing when/WRB/when powered/VBN/powered up/RP/up or/CC/or reset/NNP/reset. and/CC/and /,/, since/IN/since rom/NN/rom is/VBZ/is read/VBN/read only/RB/only /,/, it/PRP/it can/MD/can not/RB/not be/VB/be infected/VBN/infected by/IN/by a/DT/a computer/NN/computer virus/NNP/virus. the/DT/the problem/NN/problem is/VBZ/is that/IN/that changing/VBG/changing this/DT/this bootstrap/NN/bootstrap code/NN/code requires/VBZ/requires changing/VBG/changing the/DT/the rom/NN/rom hardware/NN/hardware chips/NNS/chips /./. for/IN/for this/DT/this reason/NN/reason /,/, most/JJS/most systems/NNS/systems store/VBP/store a/DT/a tiny/NN/tiny bootstrap/NN/bootstrap loader/NN/loader program/NN/program in/IN/in the/DT/the boot/NN/boot rom/IN/rom whose/WP$/whose only/RB/only job/NN/job is/VBZ/is to/TO/to bring/VB/bring in/IN/in a/DT/a full/JJ/full bootstrap/NN/bootstrap program/NN/program from/IN/from disk/NNP/disk. the/DT/the full/JJ/full bootstrap/NN/bootstrap program/NN/program can/MD/can be/VB/be changed/VBN/changed easily/RB/easily /:/: a/DT/a new/JJ/new version/NN/version is/VBZ/is simply/RB/simply written/VBN/written onto/IN/onto the/DT/the disk/NNP/disk. the/DT/the full/JJ/full bootstrap/NN/bootstrap program/NN/program is/VBZ/is stored/VBN/stored in/IN/in the/DT/the boot/NN/boot blocks/NNS/blocks at/IN/at a/DT/a fixed/VBN/fixed location/NN/location on/IN/on the/DT/the disk/NNP/disk. a/DT/a disk/NN/disk that/WDT/that has/VBZ/has a/DT/a boot/NN/boot partition/NN/partition is/VBZ/is called/VBN/called a/DT/a or/CC/or the/DT/the code/NN/code in/IN/in the/DT/the boot/NN/boot rom/IN/rom instructs/NNS/instructs the/DT/the disk/NN/disk controller/NN/controller to/TO/to read/VB/read the/DT/the boot/NN/boot blocks/NNS/blocks into/IN/into memory/NN/memory /:/( no/DT/no device/NN/device drivers/NNS/drivers are/VBP/are loaded/VBN/loaded at/IN/at this/DT/this point/NN/point /:/) and/CC/and then/RB/then starts/VBZ/starts executing/VBG/executing that/IN/that code/NNP/code. the/DT/the full/JJ/full bootstrap/NN/bootstrap program/NN/program is/VBZ/is more/RBR/more sophisticated/JJ/sophisticated than/IN/than the/DT/the bootstrap/NN/bootstrap loader/NN/loader in/IN/in the/DT/the boot/NN/boot rom/IN/rom ;/:/; it/PRP/it is/VBZ/is able/JJ/able to/TO/to load/VB/load the/DT/the entire/JJ/entire operating/NN/operating system/NN/system from/IN/from a/DT/a non-fixed/JJ/non-fixed location/NN/location on/IN/on disk/NN/disk and/CC/and to/TO/to start/VB/start the/DT/the operating/NN/operating system/NN/system ruru1ing/NN/ruru1ing /./. even/RB/even so/RB/so /,/, the/DT/the full/JJ/full bootstrap/NN/bootstrap code/NN/code may/MD/may be/VB/be small/JJ/small /./. let/NN/let 's/POS/'s consider/NN/consider as/IN/as an/DT/an example/NN/example the/DT/the boot/NN/boot process/NN/process in/IN/in windows/NNS/windows 2000/CD/2000. the/DT/the windows/NNS/windows 2000/CD/2000 system/NN/system places/NNS/places its/PRP$/its boot/NN/boot code/NN/code in/IN/in the/DT/the first/JJ/first sector/NN/sector on/IN/on the/DT/the hard/JJ/hard disk/NN/disk /:/( which/WDT/which it/PRP/it terms/VBZ/terms the/DT/the or/CC/or furthermore/JJR/furthermore /,/, windows/VBZ/windows 2000/CD/2000 allows/NNS/allows a/DT/a hard/JJ/hard disk/NN/disk to/TO/to be/VB/be divided/VBN/divided into/IN/into one/CD/one or/CC/or more/JJR/more partitions/NNS/partitions ;/:/; one/CD/one partition/NN/partition /,/, identified/VBD/identified as/IN/as the/DT/the contains/NNS/contains the/DT/the operating/NN/operating system/NN/system and/CC/and device/NN/device drivers/NNP/drivers. bootil1g/NNP/bootil1g begins/VBZ/begins in/IN/in a/DT/a windows/NN/windows 2000/CD/2000 system/NN/system by/IN/by running/NN/running code/NN/code that/WDT/that is/VBZ/is resident/NN/resident in/IN/in the/DT/the system/NN/system 's/POS/'s rom/NN/rom memory/NNP/memory. this/DT/this code/NN/code directs/VBZ/directs the/DT/the system/NN/system to/TO/to read/VB/read the/DT/the boot/NN/boot code/NN/code from/IN/from the/DT/the mbr/NNP/mbr. in/IN/in addition/NN/addition to/TO/to containing/VBG/containing boot/NN/boot code/NN/code /,/, the/DT/the mbr/NN/mbr contains/VBZ/contains a/DT/a table/JJ/table listing/NN/listing the/DT/the partitions/NNS/partitions for/IN/for the/DT/the hard/JJ/hard disk/NN/disk and/CC/and a/DT/a flag/NN/flag indicating/VBG/indicating which/WDT/which partition/NN/partition the/DT/the system/NN/system is/VBZ/is to/TO/to be/VB/be booted/VBN/booted from/IN/from /,/, as/IN/as illustrated/VBN/illustrated in/IN/in figure/NN/figure 12.9/CD/12.9 /./. once/RB/once the/DT/the system/NN/system identifies/NNS/identifies the/DT/the boot/NN/boot partition/NN/partition /,/, it/PRP/it reads/VBZ/reads the/DT/the first/JJ/first sector/NN/sector from/IN/from that/DT/that partition/NN/partition /:/( which/WDT/which is/VBZ/is called/VBN/called the/DT/the and/CC/and contilmes/VBZ/contilmes with/IN/with the/DT/the remainder/NN/remainder of/IN/of the/DT/the boot/NN/boot process/NN/process /,/, which/WDT/which includes/VBZ/includes loading/VBG/loading the/DT/the various/JJ/various subsystems/NNS/subsystems and/CC/and system/NN/system services/NNS/services /./. mbr/NN/mbr partition/NN/partition 1/CD/1 partition/NN/partition 2/CD/2 partition/NN/partition 3/CD/3 partition/NN/partition 4/CD/4 boot/NN/boot code/NN/code partition/NN/partition table/NN/table boot/NN/boot partition/NN/partition figure/NN/figure 12.9/CD/12.9 booting/VBG/booting from/IN/from disk/NN/disk in/IN/in windows/NNS/windows 2000/CD/2000 /./. 12.5/CD/12.5 519/CD/519 12.5.3/CD/12.5.3 bad/JJ/bad blocks/NNS/blocks because/IN/because disks/NNS/disks have/VBP/have moving/VBG/moving parts/NNS/parts and/CC/and small/JJ/small tolerances/NNS/tolerances /:/( recall/NN/recall that/IN/that the/DT/the disk/NN/disk head/NN/head flies/NNS/flies just/RB/just above/IN/above the/DT/the disk/NN/disk surface/NN/surface /:/) /,/, they/PRP/they are/VBP/are prone/RB/prone to/TO/to failure/NNP/failure. sometimes/RB/sometimes the/DT/the failure/NN/failure is/VBZ/is complete/JJ/complete ;/:/; in/IN/in this/DT/this case/NN/case /,/, the/DT/the disk/NN/disk needs/VBZ/needs to/TO/to be/VB/be replaced/VBN/replaced and/CC/and its/PRP$/its contents/NNS/contents restored/VBD/restored from/IN/from backup/NN/backup media/NNS/media to/TO/to the/DT/the new/JJ/new disk/NNP/disk. more/RBR/more frequently/RB/frequently /,/, one/CD/one or/CC/or more/JJR/more sectors/NNS/sectors become/VBP/become defective/NNP/defective. most/JJS/most disks/NNS/disks even/RB/even con'le/JJ/con'le from/IN/from the/DT/the factory/NN/factory with/IN/with depending/VBG/depending on/IN/on the/DT/the disk/NN/disk and/CC/and controller/NN/controller in/IN/in use/NN/use /,/, these/DT/these blocks/NNS/blocks are/VBP/are handled/VBN/handled in/IN/in a/DT/a variety/NN/variety of/IN/of ways/NNS/ways /./. on/IN/on simple/JJ/simple disks/NNS/disks /,/, such/JJ/such as/IN/as some/DT/some disks/NNS/disks with/IN/with ide/JJ/ide controllers/NNS/controllers /,/, bad/JJ/bad blocks/NNS/blocks are/VBP/are handled/VBN/handled manually/NNP/manually. for/IN/for instance/NN/instance /,/, the/DT/the ms-dos/NNP/ms-dos format/NN/format command/NN/command performs/NNS/performs logical/JJ/logical formatting/NN/formatting and/CC/and /,/, as/IN/as a/DT/a part/NN/part of/IN/of the/DT/the process/NN/process /,/, scans/NNS/scans the/DT/the disk/NN/disk to/TO/to find/VB/find bad/JJ/bad blocks/NNP/blocks. if/IN/if format/NN/format finds/NNS/finds a/DT/a bad/JJ/bad block/NN/block /,/, it/PRP/it writes/VBZ/writes a/DT/a special/JJ/special value/NN/value into/IN/into the/DT/the corresponding/NN/corresponding fat/NN/fat entry/NN/entry to/TO/to tell/VB/tell the/DT/the allocation/NN/allocation routines/NNS/routines not/RB/not to/TO/to use/VB/use that/IN/that block/NNP/block. if/IN/if blocks/NNS/blocks go/VBP/go bad/JJ/bad during/IN/during normal/JJ/normal operation/NN/operation /,/, a/DT/a special/JJ/special program/NN/program /NN/( such/JJ/such as/IN/as chkdsk/NN/chkdsk /:/) must/MD/must be/VB/be run/VBN/run manually/RB/manually to/TO/to search/VB/search for/IN/for the/DT/the bad/JJ/bad blocks/NNS/blocks and/CC/and to/TO/to lock/VB/lock them/PRP/them away/NNP/away. data/NNS/data that/WDT/that resided/VBD/resided on/IN/on the/DT/the bad/JJ/bad blocks/NNS/blocks usually/RB/usually are/VBP/are lost/VBN/lost /./. more/RBR/more sophisticated/JJ/sophisticated disks/NNS/disks /,/, such/JJ/such as/IN/as the/DT/the scsi/NN/scsi disks/VBZ/disks used/VBN/used in/IN/in high-end/JJ/high-end pcs/NNS/pcs and/CC/and most/JJS/most workstations/NNS/workstations and/CC/and servers/NNS/servers /,/, are/VBP/are smarter/RB/smarter about/IN/about bad-block/JJ/bad-block recovery/NNP/recovery. the/DT/the controller/NN/controller maintains/VBZ/maintains a/DT/a list/NN/list of/IN/of bad/JJ/bad blocks/NNS/blocks on/IN/on the/DT/the disk/NNP/disk. the/DT/the list/NN/list is/VBZ/is initialized/VBN/initialized during/IN/during the/DT/the low-level/JJ/low-level formatting/NN/formatting at/IN/at the/DT/the factory/NN/factory and/CC/and is/VBZ/is updated/VBN/updated over/IN/over the/DT/the life/NN/life of/IN/of the/DT/the disk/NN/disk /./. low-level/JJ/low-level formatting/NN/formatting also/RB/also sets/VBZ/sets aside/JJ/aside spare/NN/spare sectors/NNS/sectors not/RB/not visible/JJ/visible to/TO/to the/DT/the operating/NN/operating system/NNP/system. the/DT/the controller/NN/controller can/MD/can be/VB/be told/VBN/told to/TO/to replace/VB/replace each/DT/each bad/JJ/bad sector/NN/sector logically/RB/logically with/IN/with one/CD/one of/IN/of the/DT/the spare/NN/spare sectors/NNP/sectors. this/DT/this scheme/NN/scheme is/VBZ/is known/VBN/known as/IN/as or/CC/or a/DT/a typical/JJ/typical bad-sector/NN/bad-sector transaction/NN/transaction might/MD/might be/VB/be as/RB/as follows/VBZ/follows /:/: the/DT/the operating/NN/operating system/NN/system tries/NNS/tries to/TO/to read/VB/read logical/JJ/logical block/NN/block 87/CD/87 /./. the/DT/the controller/NN/controller calculates/VBZ/calculates the/DT/the ecc/NN/ecc and/CC/and finds/NNS/finds that/WDT/that the/DT/the sector/NN/sector is/VBZ/is bad/NNP/bad. it/PRP/it reports/VBZ/reports this/DT/this finding/NN/finding to/TO/to the/DT/the operating/NN/operating system/NN/system /./. the/DT/the next/JJ/next time/NN/time the/DT/the system/NN/system is/VBZ/is rebooted/VBN/rebooted /,/, a/DT/a special/JJ/special command/NN/command is/VBZ/is run/VBN/run to/TO/to tell/VB/tell the/DT/the scsi/NN/scsi controller/NN/controller to/TO/to replace/VB/replace the/DT/the bad/JJ/bad sector/NN/sector with/IN/with a/DT/a spare/NN/spare /./. after/IN/after that/DT/that /,/, whenever/RB/whenever the/DT/the system/NN/system requests/NNS/requests logical/JJ/logical block/NN/block 87/CD/87 /,/, the/DT/the request/NN/request is/VBZ/is translated/VBN/translated into/IN/into the/DT/the replacement/NN/replacement sector/NN/sector 's/POS/'s address/NN/address by/IN/by the/DT/the controller/NN/controller /./. note/NN/note that/IN/that such/JJ/such a/DT/a redirection/NN/redirection by/IN/by the/DT/the controller/NN/controller could/MD/could invalidate/VB/invalidate any/DT/any optimization/NN/optimization by/IN/by the/DT/the operating/NN/operating system/NN/system 's/POS/'s disk-scheduling/JJ/disk-scheduling algorithm/NN/algorithm !/./! for/IN/for this/DT/this reason/NN/reason /,/, most/JJS/most disks/NNS/disks are/VBP/are formatted/VBN/formatted to/TO/to provide/VB/provide a/DT/a few/JJ/few spare/NN/spare sectors/NNS/sectors in/IN/in each/DT/each cylinder/NN/cylinder and/CC/and a/DT/a spare/NN/spare cylinder/NN/cylinder as/IN/as well/NNP/well. when/WRB/when a/DT/a bad/JJ/bad block/NN/block is/VBZ/is remapped/VBN/remapped /,/, the/DT/the controller/NN/controller uses/VBZ/uses a/DT/a spare/NN/spare sector/NN/sector from/IN/from the/DT/the same/JJ/same cylinder/NN/cylinder /,/, if/IN/if possible/JJ/possible /./. as/IN/as an/DT/an alternative/NN/alternative to/TO/to sector/NN/sector some/DT/some controllers/NNS/controllers can/MD/can be/VB/be instructed/VBN/instructed to/TO/to replace/VB/replace a/DT/a bad/JJ/bad block/NN/block by/IN/by here/RB/here is/VBZ/is an/DT/an example/NN/example /:/: suppose/NN/suppose that/IN/that logical/JJ/logical block/NN/block 17/CD/17 becomes/VBZ/becomes defective/JJ/defective and/CC/and the/DT/the first/JJ/first available/JJ/available spare/NN/spare follows/VBZ/follows sector/NN/sector 202/CD/202. then/RB/then /,/, sector/NN/sector slipping/VBG/slipping remaps/NNS/remaps all/DT/all the/DT/the sectors/NNS/sectors front/VBP/front 17/CD/17 to/TO/to 202/CD/202 /,/, moving/VBG/moving them/PRP/them all/DT/all down/RB/down one/CD/one spot/NNP/spot. that/WDT/that is/VBZ/is /,/, sector/NN/sector 202/CD/202 is/VBZ/is copied/VBN/copied into/IN/into the/DT/the spare/JJ/spare /,/, then/RB/then sector/NN/sector 201/CD/201 into/IN/into 202/CD/202 /,/, then/RB/then 200/CD/200 into/IN/into 201/CD/201 /,/, and/CC/and so/RB/so on/IN/on /,/, until/IN/until sector/NN/sector 18/CD/18 is/VBZ/is copied/VBN/copied into/IN/into sector/NN/sector 19/CD/19 /./. slipping/NN/slipping the/DT/the sectors/NNS/sectors in/IN/in this/DT/this way/NN/way frees/VBZ/frees up/RP/up the/DT/the space/NN/space of/IN/of sector/NN/sector 18/CD/18 /,/, so/RB/so sector/NN/sector 17/CD/17 can/MD/can be/VB/be mapped/VBN/mapped to/TO/to it/PRP/it /./. the/DT/the replacement/NN/replacement of/IN/of a/DT/a bad/JJ/bad block/NN/block generally/RB/generally is/VBZ/is not/RB/not totally/RB/totally automatic/JJ/automatic because/IN/because the/DT/the data/NNS/data in/IN/in the/DT/the bad/JJ/bad block/NN/block are/VBP/are usually/RB/usually lost/NNP/lost. soft/NN/soft errors/NNS/errors may/MD/may trigger/VB/trigger a/DT/a process/NN/process in/IN/in 520/CD/520 chapter/NN/chapter 12/CD/12 12.6/CD/12.6 which/WDT/which a/DT/a copy/NN/copy of/IN/of the/DT/the block/NN/block data/NNS/data is/VBZ/is made/VBN/made and/CC/and the/DT/the block/NN/block is/VBZ/is spared/VBN/spared or/CC/or slipped/VBN/slipped /./. an/DT/an unrecoverable/JJ/unrecoverable howeverf/NN/howeverf results/NNS/results in/IN/in lost/NN/lost data/NNP/data. whatever/NN/whatever file/NN/file was/VBD/was using/VBG/using th.at/JJ/th.at block/NN/block must/MD/must be/VB/be repaired/VBN/repaired /-NONE-/( for/IN/for instancef/NN/instancef by/IN/by restoration/NN/restoration from/IN/from a/DT/a backup/NN/backup tape/NN/tape /:/) f/NN/f and/CC/and that/IN/that requires/NNS/requires manual/JJ/manual intervention/NN/intervention /./. swapping/VBG/swapping was/VBD/was first/JJ/first presented/VBN/presented in/IN/in section/NN/section 8.2f/CD/8.2f where/WRB/where we/PRP/we discussed/VBD/discussed moving/VBG/moving entire/JJ/entire processes/NNS/processes between/IN/between disk/NN/disk and/CC/and main/JJ/main memory/NNP/memory. swapping/NN/swapping in/IN/in that/DT/that setting/NN/setting occurs/NNS/occurs when/WRB/when the/DT/the amount/NN/amount of/IN/of physical/JJ/physical memory/NN/memory reaches/NNS/reaches a/DT/a critically/RB/critically low/JJ/low point/NN/point and/CC/and processes/NNS/processes are/VBP/are moved/VBN/moved from/IN/from memory/NN/memory to/TO/to swap/VB/swap space/NN/space to/TO/to free/JJ/free available/JJ/available memory/NN/memory /./. in/IN/in practicef/NN/practicef very/RB/very few/JJ/few modern/JJ/modern operating/NN/operating systems/NNS/systems implement/NN/implement swapping/VBG/swapping in/IN/in this/DT/this fashion/NNP/fashion. rathel/NN/rathel ~/:/~ systems/NNS/systems now/RB/now combine/VBP/combine swapping/VBG/swapping with/IN/with virtual/JJ/virtual memory/NN/memory techniques/NNS/techniques /:/( chapter/NN/chapter 9/CD/9 /CD/) and/CC/and swap/NN/swap pagesf/NN/pagesf not/RB/not necessarily/RB/necessarily entire/JJ/entire processes/NNP/processes. in/IN/in fact/NN/fact some/DT/some systems/NNS/systems now/RB/now use/VBP/use the/DT/the terms/NNS/terms swapping/VBG/swapping and/CC/and paging/VBG/paging interchangeablyf/NN/interchangeablyf reflecting/VBG/reflecting the/DT/the merging/NN/merging of/IN/of these/DT/these two/CD/two concepts/NNS/concepts /./. is/VBZ/is another/DT/another low-level/JJ/low-level task/NN/task of/IN/of the/DT/the operating/NN/operating system/NNP/system. virtual/JJ/virtual memory/NN/memory uses/NNS/uses disk/VBP/disk space/NN/space as/IN/as an/DT/an extension/NN/extension of/IN/of main/JJ/main memory/NN/memory /./. since/IN/since disk/NN/disk access/NN/access is/VBZ/is much/JJ/much slower/NN/slower than/IN/than memory/NN/memory accessf/NN/accessf using/VBG/using swap/NN/swap space/NN/space significantly/RB/significantly decreases/VBZ/decreases system/NN/system performance/NNP/performance. the/DT/the main/JJ/main goal/NN/goal for/IN/for the/DT/the design/NN/design and/CC/and implementation/NN/implementation of/IN/of swap/NN/swap space/NN/space is/VBZ/is to/TO/to provide/VB/provide the/DT/the best/JJS/best throughput/NN/throughput for/IN/for the/DT/the virtual/JJ/virtual memory/NN/memory system/NNP/system. in/IN/in this/DT/this sectionf/NN/sectionf we/PRP/we discuss/VBZ/discuss how/WRB/how swap/NN/swap space/NN/space is/VBZ/is usedf/NN/usedf where/WRB/where swap/NN/swap space/NN/space is/VBZ/is located/VBN/located on/IN/on diskf/NN/diskf and/CC/and how/WRB/how swap/NN/swap space/NN/space is/VBZ/is managed/VBN/managed /./. 12.6.1/CD/12.6.1 swap-space/NN/swap-space use/NN/use swap/NN/swap space/NN/space is/VBZ/is used/VBN/used in/IN/in various/JJ/various ways/NNS/ways by/IN/by different/JJ/different operating/NN/operating systemsf/NN/systemsf depending/VBG/depending on/IN/on the/DT/the memory-management/JJ/memory-management algorithms/NNS/algorithms in/IN/in use/NNP/use. for/IN/for instancef/NN/instancef systems/NNS/systems that/WDT/that implement/NN/implement swapping/VBG/swapping may/MD/may use/VB/use swap/NN/swap space/NN/space to/TO/to hold/VB/hold an/DT/an entire/JJ/entire process/NN/process imagef/NN/imagef including/VBG/including the/DT/the code/NN/code and/CC/and data/NNS/data segments/NNP/segments. paging/VBG/paging systems/NNS/systems may/MD/may simply/RB/simply store/VB/store pages/NNS/pages that/WDT/that have/VBP/have been/VBN/been pushed/VBN/pushed out/RP/out of/IN/of main/JJ/main memory/NNP/memory. the/DT/the amount/NN/amount of/IN/of swap/NN/swap space/NN/space needed/VBN/needed on/IN/on a/DT/a system/NN/system can/MD/can therefore/VB/therefore vary/JJ/vary from/IN/from a/DT/a few/JJ/few megabytes/NNS/megabytes of/IN/of disk/NN/disk space/NN/space to/TO/to gigabytesf/VB/gigabytesf depending/VBG/depending on/IN/on the/DT/the amow1.t/JJ/amow1.t of/IN/of physical/JJ/physical memoryf/NN/memoryf the/DT/the amount/NN/amount of/IN/of virtual/JJ/virtual memory/NN/memory it/PRP/it is/VBZ/is backingf/IN/backingf and/CC/and the/DT/the way/NN/way in/IN/in which/WDT/which the/DT/the virtual/JJ/virtual memory/NN/memory is/VBZ/is used/VBN/used /./. note/NN/note that/IN/that it/PRP/it may/MD/may be/VB/be safer/RBR/safer to/TO/to overestimate/VB/overestimate than/IN/than to/TO/to underestimate/VB/underestimate the/DT/the amount/NN/amount of/IN/of swap/NN/swap space/NN/space requiredf/NN/requiredf because/IN/because if/IN/if a/DT/a system/NN/system runs/VBZ/runs out/RP/out of/IN/of swap/NN/swap space/NN/space it/PRP/it may/MD/may be/VB/be forced/VBN/forced to/TO/to abort/VB/abort processes/NNS/processes or/CC/or may/MD/may crash/VB/crash entirely/NNP/entirely. overestimation/NN/overestimation wastes/VBZ/wastes disk/NN/disk space/NN/space that/WDT/that could/MD/could otherwise/VB/otherwise be/VB/be used/VBN/used for/IN/for filesf/NN/filesf but/CC/but it/PRP/it does/VBZ/does no/DT/no other/JJ/other harm/NNP/harm. some/DT/some systems/NNS/systems recommend/VBP/recommend the/DT/the amount/NN/amount to/TO/to be/VB/be set/VBN/set aside/NN/aside for/IN/for swap/NN/swap space/NNP/space. solarisf/NN/solarisf for/IN/for examplef/NN/examplef suggests/VBZ/suggests setting/VBG/setting swap/NN/swap space/NN/space equal/JJ/equal to/TO/to the/DT/the amount/NN/amount by/IN/by which/WDT/which virtual/JJ/virtual memory/NN/memory exceeds/NNS/exceeds pageable/JJ/pageable physical/JJ/physical memory/NNP/memory. in/IN/in the/DT/the past/JJ/past linux/NN/linux has/VBZ/has suggested/VBN/suggested setting/VBG/setting swap/NN/swap space/NN/space to/TO/to double/JJ/double the/DT/the amount/NN/amount of/IN/of physical/JJ/physical memoryf/NN/memoryf although/IN/although most/JJS/most linux/NN/linux systems/NNS/systems now/RB/now use/VBP/use considerably/RB/considerably less/RBR/less swap/NN/swap space/NNP/space. in/IN/in factf/NN/factf there/EX/there is/VBZ/is currently/RB/currently much/RB/much debate/VBP/debate in/IN/in the/DT/the linux/NN/linux community/NN/community about/IN/about whether/IN/whether to/TO/to set/VB/set aside/JJ/aside swap/NN/swap space/NN/space at/IN/at all/DT/all !/./! some/DT/some operating/NN/operating systems-including/NN/systems-including linux-allow/JJ/linux-allow the/DT/the use/NN/use of/IN/of multiple/NN/multiple swap/NN/swap spaces/NNP/spaces. these/DT/these swap/NN/swap spaces/NNS/spaces are/VBP/are usually/RB/usually put/VBN/put on/IN/on separate/JJ/separate disks/NNS/disks so/IN/so that/IN/that the/DT/the load/NN/load placed/VBD/placed on/IN/on the/DT/the i/0/NNP/i/0 system/NNP/system. by/IN/by paging/NN/paging and/CC/and swapping/VBG/swapping can/MD/can be/VB/be spread/VBN/spread over/RP/over the/DT/the systemfs/NNS/systemfs i/o/-NONE-/i/o devices/NNS/devices /./. 12.6/CD/12.6 521/CD/521 12.6.2/CD/12.6.2 swap-space/NN/swap-space location/NN/location a/DT/a swap/NN/swap space/NN/space can/MD/can reside/VB/reside in/IN/in one/CD/one of/IN/of two/CD/two places/NNS/places /:/: it/PRP/it can/MD/can be/VB/be carved/VBN/carved out/RP/out of/IN/of the/DT/the normal/JJ/normal file/NN/file system/NN/system /,/, or/CC/or it/PRP/it can/MD/can be/VB/be in/IN/in a/DT/a separate/JJ/separate disk/NN/disk partition/NNP/partition. if/IN/if the/DT/the swap/NN/swap space/NN/space is/VBZ/is simply/RB/simply a/DT/a large/JJ/large file/NN/file within/IN/within the/DT/the file/NN/file system/NN/system /,/, normal/JJ/normal file-system/NN/file-system routines/NNS/routines can/MD/can be/VB/be used/VBN/used to/TO/to create/VB/create it/PRP/it /,/, name/VBD/name it/PRP/it and/CC/and allocate/VB/allocate its/PRP$/its space/NNP/space. this/DT/this approach/NN/approach /,/, though/IN/though easy/JJ/easy to/TO/to implement/NN/implement is/VBZ/is inefficient/NNP/inefficient. navigating/NN/navigating the/DT/the directory/NN/directory structure/NN/structure and/CC/and the/DT/the diskallocation/NN/diskallocation data/NNS/data structures/NNS/structures takes/VBZ/takes time/NN/time and/CC/and /CD/( possibly/RB/possibly /:/) extra/JJ/extra disk/NN/disk accesses/NNP/accesses. external/JJ/external fragmentation/NN/fragmentation can/MD/can greatly/RB/greatly increase/VB/increase swapping/VBG/swapping times/NNS/times by/IN/by forcing/NN/forcing multiple/NN/multiple seeks/VBZ/seeks during/IN/during reading/NN/reading or/CC/or writing/VBG/writing of/IN/of a/DT/a process/NN/process image/NNP/image. we/PRP/we can/MD/can improve/VB/improve performance/NN/performance by/IN/by caching/NN/caching the/DT/the block/NN/block location/NN/location information/NN/information in/IN/in physical/JJ/physical memory/NN/memory and/CC/and by/IN/by using/VBG/using special/JJ/special tools/NNS/tools to/TO/to allocate/VB/allocate physically/RB/physically contiguous/JJ/contiguous blocks/NNS/blocks for/IN/for the/DT/the swap/NN/swap file/NN/file /,/, but/CC/but the/DT/the cost/NN/cost of/IN/of traversing/VBG/traversing the/DT/the file-system/JJ/file-system data/NNS/data structures/NNS/structures remains/VBZ/remains /./. alternatively/RB/alternatively /,/, swap/NN/swap space/NN/space can/MD/can be/VB/be created/VBN/created in/IN/in a/DT/a separate/JJ/separate partition/NNP/partition. no/DT/no file/NN/file system/NN/system or/CC/or directory/NN/directory structure/NN/structure is/VBZ/is placed/VBN/placed in/IN/in this/DT/this space/NNP/space. rather/RB/rather /,/, a/DT/a separate/JJ/separate swap-space/NN/swap-space storage/NN/storage manager/NN/manager is/VBZ/is used/VBN/used to/TO/to allocate/VB/allocate and/CC/and deallocate/VB/deallocate the/DT/the blocks/NNS/blocks from/IN/from the/DT/the raw/NN/raw partition/NNP/partition. this/DT/this manager/NN/manager uses/VBZ/uses algorithms/NNS/algorithms optimized/VBN/optimized for/IN/for speed/NN/speed rather/RB/rather than/IN/than for/IN/for storage/NN/storage efficiency/NN/efficiency /,/, because/IN/because swap/NN/swap space/NN/space is/VBZ/is accessed/VBN/accessed much/JJ/much more/RBR/more frequently/RB/frequently than/IN/than file/NN/file systems/NNS/systems /:/( when/WRB/when it/PRP/it is/VBZ/is used/VBN/used /-NONE-/) /./. internal/JJ/internal fragmentation/NN/fragmentation may/MD/may increase/VB/increase /,/, but/CC/but this/DT/this trade-off/JJ/trade-off is/VBZ/is acceptable/JJ/acceptable because/IN/because the/DT/the life/NN/life of/IN/of data/NNS/data in/IN/in the/DT/the swap/NN/swap space/NN/space generally/RB/generally is/VBZ/is much/RB/much shorter/JJR/shorter than/IN/than that/DT/that of/IN/of files/NNS/files in/IN/in the/DT/the file/NN/file system/NNP/system. since/IN/since swap/NN/swap space/NN/space is/VBZ/is reinitialized/VBN/reinitialized at/IN/at boot/NN/boot time/NN/time /,/, any/DT/any fragmentation/NN/fragmentation is/VBZ/is short-lived/NNP/short-lived. the/DT/the raw-partition/NN/raw-partition approach/NN/approach creates/VBZ/creates a/DT/a fixed/VBN/fixed amount/NN/amount of/IN/of swap/NN/swap space/NN/space during/IN/during disk/NN/disk partitioning/NNP/partitioning. adding/NN/adding more/JJR/more swap/NN/swap space/NN/space requires/VBZ/requires either/DT/either repartitioning/VBG/repartitioning the/DT/the disk/NN/disk /:/( which/WDT/which involves/NNS/involves moving/VBG/moving the/DT/the other/JJ/other file-system/JJ/file-system partitions/NNS/partitions or/CC/or destroying/VBG/destroying them/PRP/them and/CC/and restoring/VBG/restoring them/PRP/them from/IN/from backup/NN/backup /:/) or/CC/or adding/VBG/adding another/DT/another swap/NN/swap space/NN/space elsewhere/RB/elsewhere /./. some/DT/some operating/NN/operating systems/NNS/systems are/VBP/are flexible/JJ/flexible and/CC/and can/MD/can swap/VB/swap both/DT/both in/IN/in raw/NN/raw partitions/NNS/partitions and/CC/and in/IN/in file-system/JJ/file-system space/NNP/space. linux/NN/linux is/VBZ/is an/DT/an example/NN/example /:/: the/DT/the policy/NN/policy and/CC/and implementation/NN/implementation are/VBP/are separate/JJ/separate /,/, allowing/VBG/allowing the/DT/the machine/NN/machine 's/POS/'s administrator/NN/administrator to/TO/to decide/VB/decide which/WDT/which type/NN/type of/IN/of swapping/VBG/swapping to/TO/to use/NNP/use. the/DT/the trade-off/JJ/trade-off is/VBZ/is between/IN/between the/DT/the convenience/NN/convenience of/IN/of allocation/NN/allocation and/CC/and management/NN/management in/IN/in the/DT/the file/NN/file system/NN/system and/CC/and the/DT/the performance/NN/performance of/IN/of swapping/VBG/swapping in/IN/in raw/NN/raw partitions/NNS/partitions /./. 12.6.3/CD/12.6.3 swap-space/NN/swap-space management/NN/management /:/: an/DT/an example/NN/example we/PRP/we can/MD/can illustrate/VB/illustrate how/WRB/how swap/NN/swap space/NN/space is/VBZ/is used/VBN/used by/IN/by following/NN/following the/DT/the evolution/NN/evolution of/IN/of swapping/VBG/swapping and/CC/and paging/VBG/paging in/IN/in various/JJ/various unix/NN/unix systems/NNP/systems. the/DT/the traditional/JJ/traditional unix/NN/unix kernel/NN/kernel started/VBD/started with/IN/with an/DT/an implementation/NN/implementation of/IN/of swapping/VBG/swapping that/IN/that copied/JJ/copied entire/NN/entire processes/NNS/processes between/IN/between contiguous/JJ/contiguous disk/NN/disk regions/NNS/regions and/CC/and memory/NNP/memory. unix/NN/unix later/JJ/later evolved/VBD/evolved to/TO/to a/DT/a combination/NN/combination of/IN/of swapping/VBG/swapping and/CC/and paging/VBG/paging as/IN/as pagiltg/NN/pagiltg hardware/NN/hardware became/VBD/became available/JJ/available /./. in/IN/in solaris/NNS/solaris 1/CD/1 /CD/( sunos/NNS/sunos /:/) /,/, the/DT/the designers/NNS/designers changed/VBD/changed standard/JJ/standard unix/NN/unix methods/NNS/methods to/TO/to improve/VB/improve efficiency/NN/efficiency and/CC/and reflect/VB/reflect technological/JJ/technological developments/NNP/developments. when/WRB/when a/DT/a process/NN/process executes/VBZ/executes /,/, text-segment/JJ/text-segment pages/NNS/pages containing/VBG/containing code/NN/code are/VBP/are brought/VBN/brought in/IN/in from/IN/from the/DT/the file/NN/file system/NN/system /,/, accessed/VBD/accessed in/IN/in main/JJ/main memory/NN/memory /,/, and/CC/and thrown/VB/thrown away/RP/away if/IN/if selected/VBN/selected for/IN/for pageout/NNP/pageout. it/PRP/it is/VBZ/is more/RBR/more efficient/JJ/efficient to/TO/to reread/VB/reread a/DT/a page/NN/page from/IN/from the/DT/the file/NN/file system/NN/system than/IN/than to/TO/to write/VB/write it/PRP/it to/TO/to swap/VB/swap space/NN/space and/CC/and then/RB/then reread/VB/reread it/PRP/it from/IN/from there/NNP/there. swap/NN/swap space/NN/space is/VBZ/is only/RB/only used/VBN/used as/IN/as a/DT/a backing/NN/backing store/NN/store for/IN/for pages/NNS/pages of/IN/of memory/NN/memory /,/, which/WDT/which includes/VBZ/includes memory/NN/memory allocated/VBN/allocated for/IN/for the/DT/the stack/NN/stack /,/, heap/NN/heap /,/, and/CC/and uninitialized/VBD/uninitialized data/NNS/data of/IN/of a/DT/a process/NN/process /./. more/JJR/more changes/NNS/changes were/VBD/were made/VBN/made in/IN/in later/JJ/later versions/NNS/versions of/IN/of solaris/NNP/solaris. the/DT/the biggest/JJS/biggest change/NN/change is/VBZ/is that/IN/that solaris/NNS/solaris now/RB/now allocates/VBZ/allocates swap/NN/swap space/NN/space only/RB/only when/WRB/when a/DT/a page/NN/page is/VBZ/is forced/VBN/forced out/RP/out of/IN/of physical/JJ/physical memory/NN/memory /,/, rather/RB/rather than/IN/than when/WRB/when the/DT/the virtual/JJ/virtual memory/NN/memory page/NN/page is/VBZ/is first/JJ/first created/VBN/created /./. 522/CD/522 chapter/NN/chapter 12/CD/12 12.7/CD/12.7 swap/NN/swap partition/NN/partition or/CC/or swap/NN/swap file/NN/file swap/NN/swap map/NN/map 1---------swap/CD/1---------swap area--------1/-NONE-/area--------1 page/NN/page i/-NONE-/i- slot/NN/slot -1/-NONE-/-1 l/-NONE-/l--- ~/:/~ /:/--- ~/:/~ ---_l/JJ/---_l __/NNP/__ _l/NNP/_l _/NNP/_ ~/NNP/~ figure/NN/figure 12.10/CD/12.10 the/DT/the data/NNS/data structures/NNS/structures for/IN/for swapping/VBG/swapping on/IN/on linux/NN/linux systems/NNS/systems /./. this/DT/this scheme/NN/scheme gives/VBZ/gives better/JJR/better performance/NN/performance on/IN/on modern/JJ/modern computers/NNS/computers /,/, which/WDT/which have/VBP/have more/JJR/more physical/JJ/physical memory/NN/memory than/IN/than older/JJR/older systems/NNS/systems and/CC/and tend/VBP/tend to/TO/to page/NN/page less/JJR/less /./. linux/NN/linux is/VBZ/is similar/JJ/similar to/TO/to solaris/NNS/solaris in/IN/in that/DT/that swap/NN/swap space/NN/space is/VBZ/is only/RB/only used/VBN/used for/IN/for anonymous/JJ/anonymous memory/NN/memory or/CC/or for/IN/for regions/NNS/regions of/IN/of memory/NN/memory shared/VBN/shared by/IN/by several/JJ/several processes/NNP/processes. linux/NN/linux allows/VBZ/allows one/CD/one or/CC/or more/JJR/more swap/NN/swap areas/NNS/areas to/TO/to be/VB/be established/NNP/established. a/DT/a swap/NN/swap area/NN/area may/MD/may be/VB/be in/IN/in either/DT/either a/DT/a swap/NN/swap file/NN/file on/IN/on a/DT/a regular/JJ/regular file/NN/file system/NN/system or/CC/or a/DT/a raw-swap-space/NN/raw-swap-space partition/NNP/partition. each/DT/each swap/NN/swap area/NN/area consists/NNS/consists of/IN/of a/DT/a series/NN/series of/IN/of 4-kb/CD/4-kb which/WDT/which are/VBP/are used/VBN/used to/TO/to hold/VB/hold swapped/VBN/swapped pages/NNS/pages /./. associated/VBN/associated with/IN/with each/DT/each swap/NN/swap area/NN/area is/VBZ/is a/DT/a .u1.2.p-an/JJ/.u1.2.p-an array/NN/array of/IN/of integer/JJR/integer counters/NNS/counters /,/, each/DT/each corresponding/VBG/corresponding to/TO/to a/DT/a page/NN/page slot/NN/slot in/IN/in the/DT/the swap/NN/swap area/NNP/area. if/IN/if the/DT/the value/NN/value of/IN/of a/DT/a counter/NN/counter is/VBZ/is 0/-NONE-/0 /,/, the/DT/the corresponding/NN/corresponding page/NN/page slot/NN/slot is/VBZ/is available/NNP/available. values/NNS/values greater/JJR/greater than/IN/than 0/-NONE-/0 indicate/VBP/indicate that/IN/that the/DT/the page/NN/page slot/NN/slot is/VBZ/is occupied/VBN/occupied by/IN/by a/DT/a swapped/JJ/swapped page/NNP/page. the/DT/the value/NN/value of/IN/of the/DT/the counter/NN/counter ij.l.dicates/VBZ/ij.l.dicates the/DT/the number/NN/number of/IN/of mappings/NNS/mappings to/TO/to the/DT/the swapped/JJ/swapped page/NN/page ;/:/; for/IN/for example/NN/example /,/, a/DT/a value/NN/value of/IN/of 3/CD/3 indicates/NNS/indicates that/WDT/that the/DT/the swapped/VBD/swapped page/NN/page is/VBZ/is mapped/VBN/mapped to/TO/to three/CD/three different/JJ/different processes/NNS/processes /:/( which/WDT/which can/MD/can occur/VB/occur if/IN/if the/DT/the swapped/VBN/swapped page/NN/page is/VBZ/is storing/VBG/storing a/DT/a region/NN/region of/IN/of memory/NN/memory shared/VBN/shared by/IN/by three/CD/three processes/NNS/processes /:/) /./. the/DT/the data/NNS/data structures/NNS/structures for/IN/for swapping/VBG/swapping on/IN/on linux/NN/linux systems/NNS/systems are/VBP/are shown/VBN/shown in/IN/in figure/NN/figure 12.10/CD/12.10 /./. disk/NN/disk drives/NNS/drives have/VBP/have continued/VBN/continued to/TO/to get/VB/get smaller/JJR/smaller and/CC/and cheaper/JJR/cheaper /,/, so/RB/so it/PRP/it is/VBZ/is now/RB/now economically/RB/economically feasible/JJ/feasible to/TO/to attach/VB/attach many/JJ/many disks/NNS/disks to/TO/to a/DT/a computer/NN/computer system/NNP/system. having/NN/having a/DT/a large/JJ/large number/NN/number of/IN/of disks/NNS/disks in/IN/in a/DT/a system/NN/system presents/NNS/presents opportunities/NNS/opportunities for/IN/for improving/VBG/improving the/DT/the rate/NN/rate at/IN/at which/WDT/which data/NNS/data can/MD/can be/VB/be read/VBN/read or/CC/or written/VBN/written /,/, if/IN/if the/DT/the disks/NNS/disks are/VBP/are operated/VBN/operated in/IN/in parallel/NNP/parallel. furthermore/NN/furthermore /,/, this/DT/this setup/NN/setup offers/VBZ/offers the/DT/the potential/NN/potential for/IN/for improving/NN/improving the/DT/the reliability/NN/reliability of/IN/of data/NNS/data storage/NN/storage /,/, because/IN/because redundant/JJ/redundant information/NN/information can/MD/can be/VB/be stored/VBN/stored on/IN/on multiple/NN/multiple disks/NNP/disks. thus/RB/thus /,/, failure/NN/failure of/IN/of one/CD/one disk/NN/disk does/VBZ/does not/RB/not lead/VB/lead to/TO/to loss/NN/loss of/IN/of data/NNP/data. a/DT/a of/IN/of disk-organization/NN/disk-organization techniques/NNS/techniques /,/, collectively/RB/collectively called/VBN/called disks/NNS/disks /:/( raids/NNS/raids /VBP/) /,/, are/VBP/are commonly/RB/commonly used/VBN/used to/TO/to address/NN/address the/DT/the performance/NN/performance and/CC/and reliability/NN/reliability issues/NNS/issues /./. in/IN/in the/DT/the past/JJ/past /,/, raids/NNS/raids composed/VBD/composed of/IN/of small/JJ/small /,/, cheap/NN/cheap disks/NNS/disks were/VBD/were viewed/VBN/viewed as/IN/as a/DT/a cost-effective/JJ/cost-effective alternative/NN/alternative to/TO/to large/JJ/large /,/, expensive/JJ/expensive disks/NNS/disks ;/:/; today/NN/today /,/, raids/NNS/raids are/VBP/are used/VBN/used for/IN/for their/PRP$/their higher/JJR/higher reliability/NN/reliability and/CC/and higher/JJR/higher data-transfer/JJ/data-transfer rate/NN/rate /,/, rather/RB/rather than/IN/than for/IN/for economic/JJ/economic reasons/NNP/reasons. hence/NN/hence /,/, the/DT/the i/PRP/i in/IN/in raid/JJ/raid /,/, which/WDT/which once/RB/once stood/VBD/stood for/IN/for inexpensive//JJ/inexpensive/ '/''/' now/RB/now stands/VBZ/stands for/IN/for ij.l.dependent/JJ/ij.l.dependent /./. 12.7.1/CD/12.7.1 improvement/NN/improvement of/IN/of reliability/NN/reliability via/IN/via redundancy/NN/redundancy let/NN/let us/PRP/us first/RB/first consider/VBP/consider the/DT/the reliability/NN/reliability of/IN/of raids/NNP/raids. the/DT/the chance/NN/chance that/IN/that some/DT/some disk/NN/disk out/RP/out of/IN/of a/DT/a set/NN/set of/IN/of n/NN/n disks/NNS/disks will/MD/will fail/VB/fail is/VBZ/is much/RB/much higher/JJR/higher than/IN/than the/DT/the chance/NN/chance that/IN/that a/DT/a specific/JJ/specific single/JJ/single 12.7/CD/12.7 523/CD/523 structuring/VBG/structuring raid/NN/raid raid/VBD/raid storage/NN/storage can/MD/can be/VB/be structured/VBN/structured in/IN/in a/DT/a variety/NN/variety of/IN/of ways/NNP/ways. for/IN/for example/NN/example /,/, a/DT/a system/NN/system can/MD/can have/VB/have disks/NNS/disks directly/RB/directly attached/VBD/attached to/TO/to its/PRP$/its buses/NNP/buses. in/IN/in this/DT/this case/NN/case /,/, the/DT/the operating/NN/operating system/NN/system or/CC/or system/NN/system software/NN/software can/MD/can implement/VB/implement raid/VBN/raid flmctionality/NNP/flmctionality. alternatively/RB/alternatively /,/, an/DT/an intelligent/NN/intelligent host/NN/host controller/NN/controller can/MD/can control/NN/control multiple/VB/multiple attached/VBN/attached disks/NNS/disks and/CC/and can/MD/can implement/VB/implement raid/VBN/raid on/IN/on those/DT/those disks/NNS/disks in/IN/in hardware/NNP/hardware. finally/RB/finally /,/, a/DT/a /,/, or/CC/or can/MD/can be/VB/be used/NNP/used. a/DT/a raid/NN/raid array/NN/array is/VBZ/is a/DT/a standalone/NN/standalone unit/NN/unit with/IN/with its/PRP$/its own/JJ/own controller/NN/controller /,/, cache/NN/cache /:/( usually/RB/usually /:/) /,/, and/CC/and disks/NNP/disks. it/PRP/it is/VBZ/is attached/VBN/attached to/TO/to the/DT/the host/NN/host via/IN/via one/CD/one or/CC/or more/JJR/more standard/JJ/standard ata/NNS/ata scsi/VBP/scsi or/CC/or fc/NN/fc controllers/NNP/controllers. this/DT/this common/JJ/common setup/NN/setup allows/VBZ/allows any/DT/any operating/NN/operating system/NN/system and/CC/and software/NN/software without/IN/without raid/NN/raid functionality/NN/functionality to/TO/to have/VB/have raid-protected/JJ/raid-protected disks/NNP/disks. it/PRP/it is/VBZ/is even/RB/even used/VBN/used on/IN/on systems/NNS/systems that/IN/that do/VBP/do have/VBP/have raid/VBN/raid software/NN/software layers/NNS/layers because/IN/because of/IN/of its/PRP$/its simplicity/NN/simplicity and/CC/and flexibility/NN/flexibility /./. disk/NN/disk will/MD/will fail/NNP/fail. suppose/VB/suppose that/IN/that the/DT/the of/IN/of a/DT/a single/JJ/single disk/NN/disk is/VBZ/is 100,000/CD/100,000 hours/NNP/hours. then/RB/then the/DT/the mean/NN/mean time/NN/time to/TO/to failure/VB/failure of/IN/of some/DT/some disk/NN/disk in/IN/in an/DT/an array/NN/array of/IN/of 100/CD/100 disks/NNS/disks will/MD/will be/VB/be 100,000/100/CD/100,000/100 =/CD/= 1,000/CD/1,000 hours/NNS/hours /,/, or/CC/or 41.66/CD/41.66 days/NNS/days /,/, which/WDT/which is/VBZ/is not/RB/not long/RB/long at/IN/at all/DT/all !/./! if/IN/if we/PRP/we store/VBP/store only/RB/only one/CD/one copy/NN/copy of/IN/of the/DT/the data/NNS/data /,/, then/RB/then each/DT/each disk/NN/disk failure/NN/failure will/MD/will result/VB/result in/IN/in loss/NN/loss of/IN/of a/DT/a significant/JJ/significant amount/NN/amount of/IN/of data/NNS/data -and/CC/-and such/JJ/such a/DT/a high/JJ/high rate/NN/rate of/IN/of data/NNS/data loss/NN/loss is/VBZ/is unacceptable/JJ/unacceptable /./. the/DT/the solution/NN/solution to/TO/to the/DT/the problem/NN/problem of/IN/of reliability/NN/reliability is/VBZ/is to/TO/to introduce/VB/introduce /,/, we/PRP/we store/VBP/store extra/JJ/extra information/NN/information that/WDT/that is/VBZ/is not/RB/not normally/RB/normally needed/VBN/needed but/CC/but that/IN/that can/MD/can be/VB/be used/VBN/used in/IN/in the/DT/the event/NN/event of/IN/of failure/NN/failure of/IN/of a/DT/a disk/NN/disk to/TO/to rebuild/VB/rebuild the/DT/the lost/JJS/lost information/NNP/information. thus/RB/thus /,/, even/RB/even if/IN/if a/DT/a disk/NN/disk fails/VBZ/fails /,/, data/NNS/data are/VBP/are not/RB/not lost/VBN/lost /./. the/DT/the simplest/JJS/simplest /:/( but/CC/but most/JJS/most expensive/JJ/expensive /NN/) approach/NN/approach to/TO/to introducing/VBG/introducing redundancy/NN/redundancy is/VBZ/is to/TO/to duplicate/VB/duplicate every/DT/every disk/NNP/disk. this/DT/this technique/NN/technique is/VBZ/is called/VBN/called with/IN/with mirroring/NN/mirroring /,/, a/DT/a logical/JJ/logical disk/NN/disk consists/NNS/consists of/IN/of two/CD/two physical/JJ/physical disks/NNS/disks /,/, and/CC/and every/DT/every write/NN/write is/VBZ/is carried/VBN/carried out/RP/out on/IN/on both/DT/both disks/NNP/disks. the/DT/the result/NN/result is/VBZ/is called/VBN/called a/DT/a mirrored/VBN/mirrored volume/NNP/volume. if/IN/if one/CD/one of/IN/of the/DT/the disks/NNS/disks in/IN/in the/DT/the volume/NN/volume fails/VBZ/fails /,/, the/DT/the data/NNS/data can/MD/can be/VB/be read/VBN/read from/IN/from the/DT/the other/NNP/other. data/NNS/data will/MD/will be/VB/be lost/VBN/lost only/RB/only if/IN/if the/DT/the second/JJ/second disk/NN/disk fails/NNS/fails before/IN/before the/DT/the first/JJ/first failed/VBD/failed disk/NN/disk is/VBZ/is replaced/VBN/replaced /./. the/DT/the mean/JJ/mean time/NN/time to/TO/to failure/VB/failure of/IN/of a/DT/a mirrored/VBN/mirrored volume-where/JJ/volume-where failure/NN/failure is/VBZ/is the/DT/the loss/NN/loss of/IN/of data/NNP/data- depends/NNS/depends on/IN/on two/CD/two factors/NNP/factors. one/CD/one is/VBZ/is the/DT/the mean/JJ/mean time/NN/time to/TO/to failure/VB/failure of/IN/of the/DT/the individual/JJ/individual disks/NNP/disks. the/DT/the other/JJ/other is/VBZ/is the/DT/the which/WDT/which is/VBZ/is the/DT/the time/NN/time it/PRP/it takes/VBZ/takes /:/( on/IN/on average/JJ/average /NN/) to/TO/to replace/VB/replace a/DT/a failed/VBN/failed disk/NN/disk and/CC/and to/TO/to restore/VB/restore the/DT/the data/NNS/data on/IN/on it/NNP/it. suppose/NN/suppose that/WDT/that the/DT/the failures/NNS/failures of/IN/of the/DT/the two/CD/two disks/NNS/disks are/VBP/are that/IN/that is/VBZ/is /,/, the/DT/the failure/NN/failure of/IN/of one/CD/one disk/NN/disk is/VBZ/is not/RB/not connected/VBN/connected to/TO/to the/DT/the failure/NN/failure of/IN/of the/DT/the other/NNP/other. then/RB/then /,/, if/IN/if the/DT/the mean/JJ/mean time/NN/time to/TO/to failure/VB/failure of/IN/of a/DT/a single/JJ/single disk/NN/disk is/VBZ/is 100,000/CD/100,000 hours/NNS/hours and/CC/and the/DT/the mean/JJ/mean time/NN/time to/TO/to repair/VB/repair is/VBZ/is 10/CD/10 hours/NNS/hours /,/, the/DT/the of/IN/of a/DT/a mirrored/VBN/mirrored disk/NN/disk system/NN/system is/VBZ/is 100/CD/100 /,/, 0002/CD/0002 //:// /CD/( 2/CD/2 10/CD/10 /CD/) =/CD/= 500/CD/500 106/CD/106 hours/NNS/hours /,/, or/CC/or 57,000/CD/57,000 years/NNS/years !/./! you/PRP/you should/MD/should be/VB/be aware/JJ/aware that/IN/that the/DT/the assumption/NN/assumption of/IN/of independence/NN/independence of/IN/of disk/NN/disk failures/NNS/failures is/VBZ/is not/RB/not valid/NNP/valid. power/NN/power failures/NNS/failures and/CC/and natural/JJ/natural disasters/NNS/disasters /,/, such/JJ/such as/IN/as earthquakes/NNS/earthquakes /,/, fires/NNS/fires /,/, and/CC/and floods/NNS/floods /,/, may/MD/may result/VB/result in/IN/in damage/NN/damage to/TO/to both/DT/both disks/NNS/disks at/IN/at the/DT/the same/JJ/same time/NNP/time. also/RB/also /,/, manufacturing/NN/manufacturing defects/NNS/defects in/IN/in a/DT/a batch/NN/batch of/IN/of disks/NNS/disks can/MD/can cause/VB/cause correlated/VBN/correlated failures/NNP/failures. as/IN/as disks/NNS/disks age/NN/age /,/, the/DT/the probability/NN/probability of/IN/of failure/NN/failure grows/VBZ/grows /,/, increasing/VBG/increasing the/DT/the chance/NN/chance that/IN/that a/DT/a second/JJ/second disk/NN/disk will/MD/will fail/VB/fail while/IN/while the/DT/the first/JJ/first is/VBZ/is being/VBG/being repaired/NNP/repaired. in/IN/in spite/NN/spite of/IN/of all/DT/all these/DT/these considerations/NNS/considerations /,/, however/RB/however /,/, n1.irrored-disk/JJ/n1.irrored-disk systems/NNS/systems offer/VBP/offer much/RB/much higher/JJR/higher reliability/NN/reliability than/IN/than do/VB/do singledisk/NN/singledisk systems/NNS/systems /./. power/NN/power failures/NNS/failures are/VBP/are a/DT/a particular/JJ/particular source/NN/source of/IN/of concern/NN/concern /,/, since/IN/since they/PRP/they occur/VBP/occur far/RB/far more/RBR/more frequently/RB/frequently than/IN/than do/VB/do natural/JJ/natural disasters/NNP/disasters. even/RB/even with/IN/with mirroring/VBG/mirroring of/IN/of disks/NNS/disks /,/, if/IN/if writes/NNS/writes are/VBP/are 524/CD/524 chapter/NN/chapter 12/CD/12 in/IN/in progress/NN/progress to/TO/to the/DT/the same/JJ/same block/NN/block in/IN/in both/DT/both disks/NNS/disks /,/, and/CC/and power/NN/power fails/NNS/fails before/IN/before both/DT/both blocks/NNS/blocks are/VBP/are fully/RB/fully written/VBN/written /,/, the/DT/the two/CD/two blocks/NNS/blocks can/MD/can be/VB/be in/IN/in an/DT/an inconsistent/NN/inconsistent state/NNP/state. one/CD/one solution/NN/solution to/TO/to this/DT/this is/VBZ/is to/TO/to write/VB/write one/CD/one copy/NN/copy first/RB/first then/RB/then the/DT/the next/NNP/next. another/DT/another is/VBZ/is to/TO/to add/VB/add a/DT/a cache/NN/cache to/TO/to the/DT/the raid/NN/raid array/NNP/array. this/DT/this write-back/NN/write-back cache/NN/cache is/VBZ/is protected/VBN/protected from/IN/from data/NNS/data loss/NN/loss during/IN/during power/NN/power failures/NNS/failures /,/, so/RB/so the/DT/the write/JJ/write can/NN/can be/VB/be considered/VBN/considered complete/JJ/complete at/IN/at that/DT/that point/NN/point /,/, assuming/VBG/assuming the/DT/the nvram/NN/nvram has/VBZ/has some/DT/some kind/NN/kind of/IN/of error/NN/error protection/NN/protection and/CC/and correction/NN/correction /,/, such/JJ/such as/IN/as ecc/NN/ecc or/CC/or mirroring/VBG/mirroring /./. 12.7.2/CD/12.7.2 improvement/NN/improvement in/IN/in performance/NN/performance via/IN/via parallelism/NN/parallelism now/RB/now let/VB/let 's/POS/'s consider/NN/consider how/WRB/how parallel/JJ/parallel access/NN/access to/TO/to multiple/VB/multiple disks/NNS/disks improves/NNS/improves performance/NN/performance /./. with/IN/with disk/NN/disk mirroring/VBG/mirroring /,/, the/DT/the rate/NN/rate at/IN/at which/WDT/which read/VB/read requests/NNS/requests can/MD/can be/VB/be handled/VBN/handled is/VBZ/is doubled/VBN/doubled /,/, since/IN/since read/NN/read requests/NNS/requests can/MD/can be/VB/be sent/VBN/sent to/TO/to either/DT/either disk/NN/disk /:/( as/IN/as long/RB/long as/IN/as both/DT/both disks/NNS/disks in/IN/in a/DT/a pair/NN/pair are/VBP/are functionat/RB/functionat as/IN/as is/VBZ/is almost/RB/almost always/RB/always the/DT/the case/NN/case /:/) /./. the/DT/the transfer/NN/transfer rate/NN/rate of/IN/of each/DT/each read/NN/read is/VBZ/is the/DT/the same/JJ/same as/IN/as in/IN/in a/DT/a single-disk/JJ/single-disk system/NN/system /,/, but/CC/but the/DT/the number/NN/number of/IN/of reads/NNS/reads per/IN/per unit/NN/unit time/NN/time has/VBZ/has doubled/VBN/doubled /./. with/IN/with multiple/NN/multiple disks/NNS/disks /,/, we/PRP/we can/MD/can improve/VB/improve the/DT/the transfer/NN/transfer rate/NN/rate as/IN/as well/RB/well /:/( or/CC/or instead/RB/instead /:/) by/IN/by striping/NN/striping data/NNS/data across/IN/across the/DT/the disks/NNP/disks. in/IN/in its/PRP$/its simplest/NN/simplest form/NN/form /,/, consists/VBZ/consists of/IN/of the/DT/the bits/NNS/bits of/IN/of each/DT/each byte/NN/byte across/IN/across multiple/NN/multiple disks/NNS/disks ;/:/; such/JJ/such striping/NN/striping is/VBZ/is called/VBN/called for/IN/for example/NN/example /,/, if/IN/if we/PRP/we have/VBP/have an/DT/an array/NN/array of/IN/of eight/CD/eight disks/NNS/disks /,/, we/PRP/we write/VBP/write bit/NN/bit i/PRP/i of/IN/of each/DT/each byte/NN/byte to/TO/to disk/VB/disk i/NNP/i. the/DT/the array/NN/array of/IN/of eight/CD/eight disks/NNS/disks can/MD/can be/VB/be treated/VBN/treated as/IN/as a/DT/a single/JJ/single disk/NN/disk with/IN/with sectors/NNS/sectors that/IN/that are/VBP/are eight/CD/eight times/NNS/times the/DT/the normal/JJ/normal size/NN/size and/CC/and /,/, more/RBR/more important/JJ/important that/IN/that have/VBP/have eight/CD/eight times/NNS/times the/DT/the access/NN/access rate/NNP/rate. in/IN/in such/JJ/such an/DT/an organization/NN/organization /,/, every/DT/every disk/NN/disk participates/VBZ/participates in/IN/in every/DT/every access/NN/access /:/( read/NN/read or/CC/or write/VB/write /CD/) ;/:/; so/RB/so the/DT/the number/NN/number of/IN/of accesses/NNS/accesses that/WDT/that can/MD/can be/VB/be processed/VBN/processed per/IN/per second/JJ/second is/VBZ/is about/IN/about the/DT/the same/JJ/same as/IN/as on/IN/on a/DT/a single/JJ/single disk/NN/disk /,/, but/CC/but each/DT/each access/NN/access can/MD/can read/VB/read eight/CD/eight times/NNS/times as/RB/as many/JJ/many data/NNS/data in/IN/in the/DT/the same/JJ/same time/NN/time as/IN/as on/IN/on a/DT/a single/JJ/single disk/NN/disk /./. bit-level/JJ/bit-level striping/NN/striping can/MD/can be/VB/be generalized/VBN/generalized to/TO/to include/VB/include a/DT/a number/NN/number of/IN/of disks/NNS/disks that/WDT/that either/DT/either is/VBZ/is a/DT/a multiple/NN/multiple of/IN/of 8/CD/8 or/CC/or divides/NNS/divides 8/CD/8. for/IN/for example/NN/example /,/, if/IN/if we/PRP/we use/VBP/use an/DT/an array/NN/array of/IN/of four/CD/four disks/NNS/disks /,/, bits/NNS/bits i/PRP/i and/CC/and 4/CD/4 +/CD/+ i/PRP/i of/IN/of each/DT/each go/NN/go to/TO/to disk/VB/disk i/NNP/i. further/RB/further /,/, striping/VBG/striping need/NN/need not/RB/not occur/VB/occur at/IN/at the/DT/the bit/NN/bit level/NNP/level. in/IN/in for/IN/for instance/NN/instance /,/, blocks/NNS/blocks of/IN/of a/DT/a file/NN/file are/VBP/are striped/VBN/striped across/IN/across multiple/JJ/multiple disks/NNS/disks ;/:/; with/IN/with n/NN/n disks/NNS/disks /,/, block/NN/block i/PRP/i of/IN/of a/DT/a file/NN/file goes/VBZ/goes to/TO/to disk/VB/disk /:/( i/PRP/i mod/VBP/mod n/JJ/n /NN/) +/:/+ 1/CD/1 /./. other/JJ/other levels/NNS/levels of/IN/of striping/VBG/striping /,/, such/JJ/such as/IN/as bytes/NNS/bytes of/IN/of a/DT/a sector/NN/sector or/CC/or sectors/NNS/sectors of/IN/of a/DT/a block/NN/block /,/, also/RB/also are/VBP/are possible/NNP/possible. block-level/NNP/block-level striping/NN/striping is/VBZ/is the/DT/the most/RBS/most common/JJ/common /./. parallelism/NN/parallelism in/IN/in a/DT/a disk/NN/disk system/NN/system /,/, as/IN/as achieved/VBN/achieved through/IN/through striping/NN/striping /,/, has/VBZ/has two/CD/two main/JJ/main goals/NNS/goals /:/: increase/NN/increase the/DT/the throughput/NN/throughput of/IN/of multiple/NN/multiple small/JJ/small accesses/NNS/accesses /:/( that/IN/that is/VBZ/is /,/, page/NN/page accesses/NNS/accesses /:/) by/IN/by load/NN/load balancing/VBG/balancing /./. reduce/NN/reduce the/DT/the response/NN/response time/NN/time of/IN/of large/JJ/large accesses/NNS/accesses /./. 12.7.3/CD/12.7.3 raid/VBD/raid levels/NNS/levels mirroring/VBG/mirroring provides/NNS/provides high/JJ/high reliability/NN/reliability /,/, but/CC/but it/PRP/it is/VBZ/is expensive/NNP/expensive. striping/NN/striping provides/VBZ/provides high/JJ/high data-transfer/JJ/data-transfer rates/NNS/rates /,/, but/CC/but it/PRP/it does/VBZ/does not/RB/not improve/VB/improve reliability/NNP/reliability. numerous/JJ/numerous schemes/NNS/schemes to/TO/to provide/VB/provide redundancy/NN/redundancy at/IN/at lower/JJR/lower cost/NN/cost by/IN/by using/VBG/using disk/NN/disk striping/VBG/striping combined/VBN/combined with/IN/with parity/NN/parity bits/NNS/bits /:/( which/WDT/which we/PRP/we describe/VBP/describe next/JJ/next /NN/) l1.ave/JJ/l1.ave been/NN/been proposed/NNP/proposed. these/DT/these schemes/NNS/schemes have/VBP/have different/JJ/different cost-performance/NN/cost-performance trade-offs/NNS/trade-offs and/CC/and are/VBP/are classified/VBN/classified according/VBG/according to/TO/to levels/NNS/levels called/VBN/called we/PRP/we describe/VBP/describe the/DT/the various/JJ/various levels/NNS/levels here/RB/here ;/:/; figure/NN/figure 12.11/CD/12.11 shows/NNS/shows them/PRP/them pictorially/RB/pictorially /VBP/( in/IN/in the/DT/the figure/NN/figure /,/, p/NN/p indicates/VBZ/indicates error-correcting/JJ/error-correcting bits/NNS/bits /,/, and/CC/and c/NN/c 12.7/CD/12.7 raid/VBD/raid structure/NN/structure 525/CD/525 /CD/( a/DT/a /NN/) raid/VBD/raid 0/-NONE-/0 /:/: non-redundant/JJ/non-redundant striping/NN/striping /./. /NN/( b/NN/b /:/) raid/VBD/raid 1/CD/1 /:/: mirrored/VBN/mirrored disks/NNS/disks /./. /:/( c/NN/c /:/) raid/VBD/raid 2/CD/2 /:/: memory-style/JJ/memory-style error-correcting/JJ/error-correcting codes/NNS/codes /./. /:/{ d/NN/d /:/) raid/VBD/raid 3/CD/3 /:/: bit-interleaved/JJ/bit-interleaved parity/NN/parity /./. /NN/( e/NN/e /:/) raid/VBD/raid 4/CD/4 /:/: block-interleaved/JJ/block-interleaved parity/NN/parity /./. /NN/{ f/NN/f /:/) raid/VBD/raid 5/CD/5 /:/: block-interleaved/JJ/block-interleaved distributed/VBN/distributed parity/NN/parity /./. /NN/( g/NN/g /:/) raid/VBD/raid 6/CD/6 /:/: p/NN/p +/:/+ q/NN/q redundancy/NN/redundancy /./. figure/NN/figure 12.11/CD/12.11 raid/VBD/raid levels/NNS/levels /./. indicates/NNS/indicates a/DT/a second/JJ/second copy/NNP/copy. of/IN/of the/DT/the data/NNS/data /:/) /./. in/IN/in all/DT/all cases/NNS/cases depicted/VBN/depicted in/IN/in the/DT/the figure/NN/figure /,/, four/CD/four disks/NNS/disks '/POS/' worth/NN/worth of/IN/of data/NNS/data are/VBP/are stored/VBN/stored /,/, and/CC/and the/DT/the extra/JJ/extra disks/NNS/disks are/VBP/are used/VBN/used to/TO/to store/VB/store redundant/JJ/redundant information/NN/information for/IN/for failure/NN/failure recovery/NN/recovery /./. raid/NN/raid level/NN/level 0/CD/0. raid/VBD/raid level/NN/level 0/-NONE-/0 refers/NNS/refers to/TO/to disk/VB/disk arrays/NNS/arrays with/IN/with striping/VBG/striping at/IN/at the/DT/the level/NN/level of/IN/of blocks/NNS/blocks but/CC/but without/IN/without any/DT/any redundancy/NN/redundancy /:/( such/JJ/such as/IN/as mirroring/NN/mirroring or/CC/or parity/NN/parity bits/NNS/bits /:/) /,/, as/IN/as shown/NN/shown in/IN/in figure/NN/figure 12.1l/CD/12.1l /CD/( a/DT/a /NN/) /./. raid/NN/raid ievell/NNP/ievell. raid/VBD/raid level1/NNP/level1 refers/NNS/refers to/TO/to disk/VB/disk mirroring/NNP/mirroring. figure/NN/figure 12.1l/CD/12.1l /CD/( b/NN/b /:/) shows/VBZ/shows a/DT/a mirrored/VBN/mirrored organization/NN/organization /./. '/''/' raid/VBD/raid level2/NNP/level2. raid/VBD/raid level2/NNP/level2 is/VBZ/is also/RB/also known/VBN/known as/IN/as memory-style/JJ/memory-style error-correctingcode/JJ/error-correctingcode /NN/( ecc/NN/ecc /:/) organization/NNP/organization. memory/NN/memory systems/NNS/systems have/VBP/have long/RB/long detected/VBN/detected certain/JJ/certain errors/NNS/errors by/IN/by using/VBG/using parity/NN/parity bits/NNP/bits. each/DT/each byte/NN/byte in/IN/in a/DT/a memory/NN/memory system/NN/system may/MD/may have/VB/have a/DT/a parity/NN/parity bit/NN/bit associated/VBN/associated with/IN/with it/PRP/it that/IN/that records/NNS/records whether/IN/whether the/DT/the number/NN/number of/IN/of bits/NNS/bits in/IN/in the/DT/the byte/NN/byte set/VBD/set to/TO/to 1/CD/1 is/VBZ/is even/RB/even /:/( parity/NN/parity =/:/= 0/-NONE-/0 /:/) or/CC/or odd/JJ/odd /NN/( parity/NN/parity =/:/= 1/CD/1 /CD/) /./. if/IN/if one/CD/one of/IN/of the/DT/the bits/NNS/bits in/IN/in the/DT/the 526/CD/526 chapter/NN/chapter 12/CD/12 byte/NN/byte is/VBZ/is damaged/VBN/damaged /-NONE-/( either/RB/either a/DT/a 1/CD/1 becomes/VBZ/becomes a/DT/a 0/-NONE-/0 /,/, or/CC/or a/DT/a 0/-NONE-/0 becomes/VBZ/becomes an/DT/an the/DT/the parity/NN/parity of/IN/of the/DT/the byte/NN/byte changes/NNS/changes and/CC/and thus/RB/thus does/VBZ/does not/RB/not match/VB/match the/DT/the stored/VBN/stored parity/NNP/parity. similarly/RB/similarly /,/, if/IN/if the/DT/the stored/VBN/stored parity/NN/parity bit/NN/bit is/VBZ/is damaged/VBN/damaged /,/, it/PRP/it does/VBZ/does not/RB/not match/VB/match the/DT/the computed/VBN/computed parity/NNP/parity. thus/RB/thus /,/, all/DT/all single-bit/JJ/single-bit errors/NNS/errors are/VBP/are detected/VBN/detected by/IN/by the/DT/the menwry/NN/menwry system/NN/system /:/.. error-correcting/JJ/error-correcting schemes/NNS/schemes store/VBP/store two/CD/two or/CC/or more/JJR/more extra/JJ/extra bits/NNS/bits and/CC/and can/MD/can reconstruct/VB/reconstruct the/DT/the data/NNS/data if/IN/if a/DT/a single/JJ/single bit/NN/bit is/VBZ/is damaged/NNP/damaged. the/DT/the idea/NN/idea of/IN/of ecc/NN/ecc can/MD/can be/VB/be used/VBN/used directly/RB/directly in/IN/in disk/NN/disk arrays/NNS/arrays via/IN/via striping/VBG/striping of/IN/of bytes/NNS/bytes across/IN/across disks/NNP/disks. for/IN/for example/NN/example /,/, the/DT/the first/JJ/first bit/NN/bit of/IN/of each/DT/each byte/NN/byte can/MD/can be/VB/be stored/VBN/stored in/IN/in disk/NN/disk 1/CD/1 /,/, the/DT/the second/JJ/second bit/NN/bit in/IN/in disk/NN/disk 2/CD/2 /,/, and/CC/and so/RB/so on/IN/on until/IN/until the/DT/the eighth/NN/eighth bit/NN/bit is/VBZ/is stored/VBN/stored in/IN/in disk/NN/disk 8/CD/8 ;/:/; the/DT/the error-correction/NN/error-correction bits/VBZ/bits are/VBP/are stored/VBN/stored in/IN/in further/JJ/further disks/NNP/disks. this/DT/this scheme/NN/scheme is/VBZ/is shown/VBN/shown pictorially/RB/pictorially in/IN/in figure/NN/figure 12.1l/CD/12.1l /CD/( c/NN/c /:/) /,/, where/WRB/where the/DT/the disks/NNS/disks labeled/VBD/labeled p/NN/p store/NN/store the/DT/the error-correction/NN/error-correction bits/NNP/bits. if/IN/if one/CD/one of/IN/of the/DT/the disks/NNS/disks fails/VBZ/fails /,/, the/DT/the remaining/VBG/remaining bits/NNS/bits of/IN/of the/DT/the byte/NN/byte and/CC/and the/DT/the associated/VBN/associated error-correction/NN/error-correction bits/NNS/bits can/MD/can be/VB/be read/VBN/read from/IN/from other/JJ/other disks/NNS/disks and/CC/and used/VBD/used to/TO/to reconstruct/VB/reconstruct the/DT/the damaged/JJ/damaged data/NNP/data. note/NN/note that/IN/that raid/NN/raid level/NN/level 2/CD/2 requires/NNS/requires only/RB/only three/CD/three disks/NNS/disks '/POS/' overhead/JJ/overhead for/IN/for four/CD/four disks/NNS/disks of/IN/of data/NNS/data /,/, unlike/IN/unlike raid/JJ/raid level/NN/level 1/CD/1 /,/, which/WDT/which requires/VBZ/requires four/CD/four disks/NNS/disks '/POS/' overhead/JJ/overhead /./. raid/NN/raid level/NN/level 3/CD/3. raid/VBD/raid level/NN/level 3/CD/3 /,/, or/CC/or improves/NNS/improves on/IN/on level/NN/level 2/CD/2 by/IN/by taking/NN/taking into/IN/into account/NN/account the/DT/the fact/NN/fact that/IN/that /,/, unlike/IN/unlike memory/NN/memory systems/NNS/systems /,/, disk/NN/disk controllers/NNS/controllers can/MD/can detect/VB/detect whether/IN/whether a/DT/a sector/NN/sector has/VBZ/has been/VBN/been read/VBN/read correctly/RB/correctly /,/, so/RB/so a/DT/a single/JJ/single parity/NN/parity bit/NN/bit can/MD/can be/VB/be used/VBN/used for/IN/for error/NN/error correction/NN/correction as/IN/as well/RB/well as/IN/as for/IN/for detection/NNP/detection. the/DT/the idea/NN/idea is/VBZ/is as/IN/as follows/NNS/follows /:/: if/IN/if one/CD/one of/IN/of the/DT/the sectors/NNS/sectors is/VBZ/is damaged/VBN/damaged /,/, we/PRP/we know/VBP/know exactly/RB/exactly which/WDT/which sector/NN/sector it/PRP/it is/VBZ/is /,/, and/CC/and we/PRP/we can/MD/can figure/VB/figure out/RP/out whether/IN/whether any/DT/any bit/NN/bit in/IN/in the/DT/the sector/NN/sector is/VBZ/is a/DT/a 1/CD/1 or/CC/or a/DT/a 0/-NONE-/0 by/IN/by computing/NN/computing the/DT/the parity/NN/parity of/IN/of the/DT/the corresponding/NN/corresponding bits/VBZ/bits from/IN/from sectors/NNS/sectors in/IN/in the/DT/the other/JJ/other disks/NNP/disks. if/IN/if the/DT/the parity/NN/parity of/IN/of the/DT/the remaining/VBG/remaining bits/NNS/bits is/VBZ/is equal/JJ/equal to/TO/to the/DT/the stored/VBN/stored parity/NN/parity /,/, the/DT/the missing/NN/missing bit/NN/bit is/VBZ/is 0/-NONE-/0 ;/:/; otherwise/NN/otherwise /,/, it/PRP/it is/VBZ/is 1/CD/1. raid/VBN/raid level3/NNP/level3 is/VBZ/is as/RB/as good/JJ/good as/IN/as level/NN/level 2/CD/2 but/CC/but is/VBZ/is less/JJR/less expensive/JJ/expensive in/IN/in the/DT/the number/NN/number of/IN/of extra/JJ/extra disks/NNS/disks required/VBN/required /-NONE-/( it/PRP/it has/VBZ/has only/RB/only a/DT/a one-disk/JJ/one-disk overhead/NN/overhead /:/) /,/, so/RB/so level/NN/level 2/CD/2 is/VBZ/is not/RB/not used/VBN/used in/IN/in practice/NNP/practice. this/DT/this scheme/NN/scheme is/VBZ/is shown/VBN/shown pictorially/RB/pictorially in/IN/in figure/NN/figure 12.1l/CD/12.1l /CD/( d/NN/d /:/) /./. raid/NN/raid level/NN/level 3/CD/3 has/VBZ/has two/CD/two advantages/NNS/advantages over/IN/over level/NN/level 1/CD/1. first/JJ/first /,/, the/DT/the storage/NN/storage overhead/NN/overhead is/VBZ/is reduced/VBN/reduced because/IN/because only/RB/only one/CD/one parity/NN/parity disk/NN/disk is/VBZ/is needed/VBN/needed for/IN/for several/JJ/several regular/JJ/regular disks/NNS/disks /,/, whereas/IN/whereas one/CD/one mirror/NN/mirror disk/NN/disk is/VBZ/is needed/VBN/needed for/IN/for every/DT/every disk/NN/disk in/IN/in level1/NNP/level1. second/JJ/second /,/, since/IN/since reads/NNS/reads and/CC/and writes/NNS/writes of/IN/of a/DT/a byte/NN/byte are/VBP/are spread/VBN/spread out/RP/out over/IN/over multiple/NNS/multiple disks/NNS/disks with/IN/with n-way/JJ/n-way striping/NN/striping of/IN/of data/NNS/data /,/, the/DT/the transfer/NN/transfer rate/NN/rate for/IN/for reading/NN/reading or/CC/or writing/VBG/writing a/DT/a single/JJ/single block/NN/block is/VBZ/is n/VBN/n times/NNS/times as/RB/as fast/JJ/fast as/IN/as with/IN/with raid/JJ/raid level/NN/level 1/CD/1. on/IN/on the/DT/the negative/JJ/negative side/NN/side /,/, raid/VBD/raid level3/NNP/level3 supports/NNS/supports fewer/JJR/fewer l/os/NNS/l/os per/IN/per second/JJ/second /,/, since/IN/since every/DT/every disk/NN/disk has/VBZ/has to/TO/to participate/VB/participate in/IN/in every/DT/every i/0/NN/i/0 request/NN/request /./. a/DT/a further/JJ/further performance/NN/performance problem/NN/problem with/IN/with raid/JJ/raid 3-and/CD/3-and with/IN/with all/DT/all paritybased/VBN/paritybased raid/VBN/raid levels-is/-NONE-/levels-is the/DT/the expense/NN/expense of/IN/of computing/NN/computing and/CC/and writing/VBG/writing the/DT/the parity/NN/parity /./. this/DT/this overhead/NN/overhead results/NNS/results in/IN/in significantly/RB/significantly slower/JJR/slower writes/NNS/writes than/IN/than with/IN/with non-parity/JJ/non-parity raid/NN/raid arrays/NNP/arrays. to/TO/to moderate/VB/moderate this/DT/this performance/NN/performance penalty/NN/penalty /,/, many/JJ/many raid/VBD/raid storage/NN/storage arrays/NNS/arrays include/VBP/include a/DT/a hardware/NN/hardware controller/NN/controller with/IN/with dedicated/JJ/dedicated parity/NN/parity hardware/NNP/hardware. this/DT/this controller/NN/controller offloads/NNS/offloads the/DT/the parity/NN/parity computation/NN/computation from/IN/from the/DT/the cpu/NN/cpu to/TO/to the/DT/the array/NNP/array. the/DT/the array/NN/array has/VBZ/has an/DT/an nvram/NN/nvram cache/NN/cache as/IN/as well/RB/well /,/, to/TO/to store/VB/store the/DT/the blocks/NNS/blocks while/IN/while the/DT/the parity/NN/parity is/VBZ/is computed/VBN/computed and/CC/and to/TO/to buffer/VB/buffer the/DT/the writes/NNS/writes from/IN/from the/DT/the controller/NN/controller to/TO/to the/DT/the spindles/NNP/spindles. this/DT/this combination/NN/combination can/MD/can make/VB/make parity/NN/parity raid/VBN/raid almost/RB/almost as/IN/as fast/JJ/fast as/IN/as non-parity/NNP/non-parity. in/IN/in fact/NN/fact /,/, a/DT/a caching/NN/caching array/NN/array doing/VBG/doing parity/NN/parity raid/VBD/raid can/MD/can outperform/VB/outperform a/DT/a non-caching/JJ/non-caching non-parity/NN/non-parity raid/VBD/raid /./. raid/VBN/raid level/NN/level 4/CD/4. raid/VBD/raid level4/NNP/level4 /,/, or/CC/or uses/NNS/uses block-level/JJ/block-level striping/NN/striping /,/, as/IN/as in/IN/in raid/NN/raid 0/-NONE-/0 /,/, and/CC/and in/IN/in addition/NN/addition keeps/NNS/keeps a/DT/a parity/NN/parity block/NN/block on/IN/on a/DT/a separate/JJ/separate disk/NN/disk for/IN/for corresponding/NN/corresponding blocks/NNS/blocks from/IN/from n/NN/n other/JJ/other disks/NNP/disks. this/DT/this scheme/NN/scheme is/VBZ/is 12.7/CD/12.7 527/CD/527 diagramed/VBN/diagramed in/IN/in figure/NN/figure 12.1l/CD/12.1l /CD/( e/NN/e /:/) /./. if/IN/if one/CD/one of/IN/of the/DT/the disks/NNS/disks fails/VBZ/fails /,/, the/DT/the parity/NN/parity block/NN/block can/MD/can be/VB/be used/VBN/used with/IN/with the/DT/the corresponding/VBG/corresponding blocks/NNS/blocks from/IN/from the/DT/the other/JJ/other disks/NNS/disks to/TO/to restore/VB/restore the/DT/the blocks/NNS/blocks of/IN/of the/DT/the failed/VBN/failed disk/NN/disk /./. a/DT/a block/NN/block read/NN/read accesses/NNS/accesses only/RB/only one/CD/one disk/NN/disk /,/, allowing/VBG/allowing other/JJ/other requests/NNS/requests to/TO/to be/VB/be processed/VBN/processed by/IN/by the/DT/the other/JJ/other disks/NNP/disks. thus/RB/thus /,/, the/DT/the data-transfer/JJ/data-transfer rate/NN/rate for/IN/for each/DT/each access/NN/access is/VBZ/is slowe1/NNP/slowe1 ~/:/~ but/CC/but multiple/NN/multiple read/VBD/read accesses/NNS/accesses can/MD/can proceed/VB/proceed in/IN/in parallel/NN/parallel /,/, leading/VBG/leading to/TO/to a/DT/a higher/JJR/higher overall/JJ/overall i/0/-NONE-/i/0 rate/NNP/rate. the/DT/the transfer/NN/transfer rates/NNS/rates for/IN/for large/JJ/large reads/NNS/reads are/VBP/are high/JJ/high /,/, since/IN/since all/DT/all the/DT/the disks/NNS/disks can/MD/can be/VB/be read/VBN/read in/IN/in parallel/NN/parallel ;/:/; large/JJ/large writes/NNS/writes also/RB/also have/VBP/have high/JJ/high transfer/NN/transfer rates/NNS/rates /,/, since/IN/since the/DT/the data/NNS/data and/CC/and parity/NN/parity can/MD/can be/VB/be written/VBN/written in/IN/in parallel/NN/parallel /./. small/JJ/small independent/NN/independent writes/VBZ/writes can/MD/can not/RB/not be/VB/be performed/VBN/performed in/IN/in parallel/NNP/parallel. an/DT/an operatingsystem/NN/operatingsystem write/NN/write of/IN/of data/NNS/data smaller/JJR/smaller than/IN/than a/DT/a block/NN/block requires/VBZ/requires that/IN/that the/DT/the block/NN/block be/VB/be read/VBN/read /,/, modified/VBN/modified with/IN/with the/DT/the new/JJ/new data/NNS/data /,/, and/CC/and written/VBN/written back/RP/back the/DT/the parity/NN/parity block/NN/block has/VBZ/has to/TO/to be/VB/be updated/VBN/updated as/IN/as well/NNP/well. this/DT/this is/VBZ/is known/VBN/known as/IN/as the/DT/the syti/NN/syti /:/: .e/JJ/.e /./. thus/RB/thus /,/, a/DT/a single/JJ/single write/NN/write requires/VBZ/requires four/CD/four disk/NN/disk accesses/NNS/accesses /:/: two/CD/two to/TO/to read/VB/read the/DT/the two/CD/two old/JJ/old blocks/NNS/blocks and/CC/and two/CD/two to/TO/to write/VB/write the/DT/the two/CD/two new/JJ/new blocks/NNS/blocks /./. wafl/NN/wafl /:/( chapter/NN/chapter 11/CD/11 /CD/) uses/NNS/uses raid/VBD/raid level4/NNP/level4 because/IN/because this/DT/this raid/NN/raid level/NN/level allows/VBZ/allows disks/NNS/disks to/TO/to be/VB/be added/VBN/added to/TO/to a/DT/a raid/NN/raid set/NN/set seamlessly/NNP/seamlessly. if/IN/if the/DT/the added/VBN/added disks/NNS/disks are/VBP/are initialized/VBN/initialized with/IN/with blocks/NNS/blocks containing/VBG/containing all/DT/all zeros/NNS/zeros /,/, then/RB/then the/DT/the parity/NN/parity value/NN/value does/VBZ/does not/RB/not change/VB/change /,/, and/CC/and the/DT/the raid/NN/raid set/VBD/set is/VBZ/is still/RB/still correct/JJ/correct /./. raid/NN/raid levels/NNP/levels. raid/VBD/raid levels/NNS/levels /,/, or/CC/or /,/, differs/NNS/differs from/IN/from level/NN/level 4/CD/4 by/IN/by spreading/NN/spreading data/NNS/data and/CC/and parity/NN/parity among/IN/among all/DT/all n/NN/n +/:/+ 1/CD/1 disks/NNS/disks /,/, rather/RB/rather than/IN/than storing/VBG/storing data/NNS/data in/IN/in n/NN/n disks/NNS/disks and/CC/and parity/NN/parity in/IN/in one/CD/one disk/NNP/disk. for/IN/for each/DT/each block/NN/block /,/, one/CD/one of/IN/of the/DT/the disks/NNS/disks stores/NNS/stores the/DT/the parity/NN/parity /,/, and/CC/and the/DT/the others/NNS/others store/VBP/store data/NNP/data. for/IN/for example/NN/example /,/, with/IN/with an/DT/an array/NN/array of/IN/of five/CD/five disks/NNS/disks /,/, the/DT/the parity/NN/parity for/IN/for the/DT/the nth/NN/nth block/NN/block is/VBZ/is stored/VBN/stored in/IN/in disk/NN/disk /:/( n/NN/n mod/NN/mod 5/CD/5 /CD/) +/CD/+ 1/CD/1 ;/:/; the/DT/the nth/NN/nth blocks/NNS/blocks of/IN/of the/DT/the other/JJ/other four/CD/four disks/NNS/disks store/RBR/store actual/JJ/actual data/NNS/data for/IN/for that/DT/that block/NN/block this/DT/this setup/NN/setup is/VBZ/is shown/VBN/shown in/IN/in figure/NN/figure 12.11/CD/12.11 /CD/( f/NN/f /:/) /,/, where/WRB/where the/DT/the ps/NNS/ps are/VBP/are distributed/VBN/distributed across/IN/across all/DT/all the/DT/the disks/NNP/disks. a/DT/a parity/NN/parity block/NN/block can/MD/can not/RB/not store/VB/store parity/NN/parity for/IN/for blocks/NNS/blocks in/IN/in the/DT/the same/JJ/same disk/NN/disk /,/, because/IN/because a/DT/a disk/NN/disk failure/NN/failure would/MD/would result/VB/result in/IN/in loss/NN/loss of/IN/of data/NNS/data as/IN/as well/RB/well as/IN/as of/IN/of parity/NN/parity /,/, and/CC/and hence/NN/hence the/DT/the loss/NN/loss would/MD/would not/RB/not be/VB/be recoverable/NNP/recoverable. by/IN/by spreading/NN/spreading the/DT/the parity/NN/parity across/IN/across all/DT/all the/DT/the disks/NNS/disks in/IN/in the/DT/the set/NN/set /,/, raid/VBD/raid 5/CD/5 avoids/NNS/avoids potential/JJ/potential overuse/NN/overuse of/IN/of a/DT/a single/JJ/single parity/NN/parity disk/NN/disk /,/, which/WDT/which can/MD/can occur/VB/occur with/IN/with raid/JJ/raid 4/CD/4. raid/NN/raid 5/CD/5 is/VBZ/is the/DT/the most/RBS/most common/JJ/common parity/NN/parity raid/VBD/raid system/NN/system /./. raid/NN/raid level/NN/level 6/CD/6. raid/VBD/raid level/NN/level 6/CD/6 /,/, also/RB/also called/VBN/called the/DT/the is/VBZ/is much/JJ/much like/IN/like raid/NN/raid level/NN/level 5/CD/5 but/CC/but stores/NNS/stores extra/VBP/extra redundant/JJ/redundant information/NN/information to/TO/to guard/VB/guard against/IN/against disk/NN/disk failures/NNP/failures. instead/RB/instead of/IN/of parity/NN/parity /,/, error-correcting/JJ/error-correcting codes/NNS/codes such/JJ/such as/IN/as the/DT/the are/VBP/are used/NNP/used. in/IN/in the/DT/the scheme/NN/scheme shown/NN/shown in/IN/in figure/NN/figure 12.11/CD/12.11 /CD/( g/NN/g /:/) /,/, 2/CD/2 bits/NNS/bits of/IN/of redundant/JJ/redundant data/NNS/data are/VBP/are stored/VBN/stored for/IN/for every/DT/every 4/CD/4 bits/NNS/bits of/IN/of datacompared/VBN/datacompared with/IN/with 1/CD/1 parity/NN/parity bit/NN/bit in/IN/in level/NN/level 5-and/CD/5-and the/DT/the system/NN/system can/MD/can tolerate/VB/tolerate two/CD/two disk/NN/disk failures/NNS/failures /./. raid/NN/raid levels/NNS/levels 0/-NONE-/0 +/:/+ 1/LS/1 and/CC/and 1/CD/1 +/CD/+ 0/CD/0. raid/NN/raid level/NN/level 0/-NONE-/0 +/./+ 1/CD/1 refers/NNS/refers to/TO/to a/DT/a combination/NN/combination of/IN/of raid/NN/raid levels/NNS/levels 0/-NONE-/0 and/CC/and 1/CD/1. raid/VBD/raid 0/-NONE-/0 provides/VBZ/provides the/DT/the performance/NN/performance /,/, while/IN/while raid/JJ/raid 1/CD/1 provides/NNS/provides the/DT/the reliability/NNP/reliability. generally/RB/generally /,/, this/DT/this level/NN/level provides/VBZ/provides better/JJR/better performance/NN/performance than/IN/than raid/NN/raid 5/CD/5. it/PRP/it is/VBZ/is common/JJ/common in/IN/in enviromnents/NNS/enviromnents where/WRB/where both/DT/both performance/NN/performance and/CC/and reliability/NN/reliability are/VBP/are important/NNP/important. unfortunately/RB/unfortunately /,/, like/IN/like raid/NN/raid 1/CD/1 /,/, it/PRP/it doubles/VBZ/doubles the/DT/the number/NN/number of/IN/of disks/NNS/disks needed/VBN/needed for/IN/for storage/NN/storage /,/, so/RB/so it/PRP/it is/VBZ/is also/RB/also relatively/RB/relatively expensive/NNP/expensive. in/IN/in raid/NN/raid 0/-NONE-/0 +/./+ 1/CD/1 /,/, a/DT/a set/NN/set of/IN/of disks/NNS/disks are/VBP/are striped/VBN/striped /,/, and/CC/and then/RB/then the/DT/the stripe/NN/stripe is/VBZ/is mirrored/VBN/mirrored to/TO/to another/DT/another /,/, equivalent/NN/equivalent stripe/NN/stripe /./. 528/CD/528 chapter/NN/chapter 12/CD/12 stripe/NN/stripe a/DT/a /NN/) raid/VBD/raid 0/-NONE-/0 +/:/+ 1/LS/1 with/IN/with a/DT/a single/JJ/single disk/NN/disk failure/NN/failure /./. ua/NN/ua mirror/NN/mirror b/NN/b /:/) raid/VBD/raid 1/CD/1 +/CD/+ 0/-NONE-/0 with/IN/with a/DT/a single/JJ/single disk/NN/disk failure/NN/failure /./. figure/NN/figure 12.12/CD/12.12 raid/VBD/raid 0/-NONE-/0 +/:/+ 1/LS/1 and/CC/and 1/CD/1 +/CD/+ 0/-NONE-/0 /./. another/DT/another raid/NN/raid option/NN/option that/WDT/that is/VBZ/is becoming/VBG/becoming available/JJ/available commercially/RB/commercially is/VBZ/is raid/VBN/raid level/NN/level 1/CD/1 +/CD/+ 0/-NONE-/0 /,/, in/IN/in which/WDT/which disks/NNS/disks are/VBP/are mirrored/VBN/mirrored in/IN/in pairs/NNS/pairs and/CC/and then/RB/then the/DT/the resulti.j.l.g/JJ/resulti.j.l.g mirrored/VBN/mirrored pairs/NNS/pairs are/VBP/are striped/NNP/striped. this/DT/this scheme/NN/scheme has/VBZ/has some/DT/some theoretical/JJ/theoretical advantages/NNS/advantages over/IN/over raid/JJ/raid 0/-NONE-/0 +/:/+ 1/CD/1. for/IN/for example/NN/example /,/, if/IN/if a/DT/a single/JJ/single disk/NN/disk fails/NNS/fails in/IN/in raid/NN/raid 0/-NONE-/0 +/./+ 1/CD/1 /,/, an/DT/an entire/JJ/entire stripe/NN/stripe is/VBZ/is inaccessible/JJ/inaccessible /,/, leaving/VBG/leaving only/RB/only the/DT/the other/JJ/other stripe/NN/stripe available/NNP/available. with/IN/with a/DT/a failure/NN/failure in/IN/in raid/NN/raid 1/CD/1 +/CD/+ 0/-NONE-/0 /,/, a/DT/a single/JJ/single disk/NN/disk is/VBZ/is unavailable/JJ/unavailable /,/, but/CC/but the/DT/the disk/NN/disk that/IN/that mirrors/NNS/mirrors it/PRP/it is/VBZ/is still/RB/still available/JJ/available /,/, as/IN/as are/VBP/are all/DT/all the/DT/the rest/NN/rest of/IN/of the/DT/the disks/NNS/disks /:/( figure/NN/figure 12.12/CD/12.12 /CD/) /./. numerous/JJ/numerous variations/NNS/variations have/VBP/have been/VBN/been proposed/VBN/proposed to/TO/to the/DT/the basic/JJ/basic raid/NN/raid schemes/NNS/schemes described/VBD/described here/NNP/here. as/IN/as a/DT/a result/NN/result /,/, some/DT/some confusion/NN/confusion may/MD/may exist/VB/exist about/IN/about the/DT/the exact/JJ/exact definitions/NNS/definitions of/IN/of the/DT/the different/JJ/different raid/NN/raid levels/NNS/levels /./. the/DT/the implementation/NN/implementation of/IN/of raid/NN/raid is/VBZ/is another/DT/another area/NN/area of/IN/of variation/NNP/variation. consider/NN/consider the/DT/the following/VBG/following layers/NNS/layers at/IN/at which/WDT/which raid/VBN/raid can/MD/can be/VB/be implemented/VBN/implemented /./. volume-management/JJ/volume-management software/NN/software can/MD/can implement/VB/implement raid/VBN/raid within/IN/within the/DT/the kernel/NN/kernel or/CC/or at/IN/at the/DT/the system/NN/system software/NN/software layer/NNP/layer. in/IN/in this/DT/this case/NN/case /,/, the/DT/the storage/NN/storage hardware/NN/hardware can/MD/can provide/VB/provide a/DT/a minimum/JJ/minimum of/IN/of features/NNS/features and/CC/and still/RB/still be/VB/be part/NN/part of/IN/of a/DT/a full/JJ/full raid/NN/raid solution/NNP/solution. parity/NN/parity raid/VBD/raid is/VBZ/is fairly/RB/fairly slow/JJ/slow when/WRB/when implemented/VBN/implemented in/IN/in software/NN/software /,/, so/RB/so typically/RB/typically raid/VBN/raid 0/-NONE-/0 /,/, 1/CD/1 /,/, or/CC/or 0/-NONE-/0 +/:/+ 1/LS/1 is/VBZ/is used/VBN/used /./. raid/VBN/raid can/MD/can be/VB/be implemented/VBN/implemented in/IN/in the/DT/the host/NN/host bus-adapter/NN/bus-adapter /:/( hba/NN/hba /:/) hardware/NNP/hardware. only/RB/only the/DT/the disks/NNS/disks directly/RB/directly connected/VBN/connected to/TO/to the/DT/the hba/NN/hba can/MD/can be/VB/be part/NN/part of/IN/of a/DT/a given/VBN/given raid/NN/raid set/NN/set /./. this/DT/this solution/NN/solution is/VBZ/is low/JJ/low in/IN/in cost/NN/cost but/CC/but not/RB/not very/RB/very flexible/JJ/flexible /./. 12.7/CD/12.7 529/CD/529 raid/NN/raid can/MD/can be/VB/be implemented/VBN/implemented in/IN/in the/DT/the hardware/NN/hardware of/IN/of the/DT/the storage/NN/storage array/NNP/array. the/DT/the storage/NN/storage array/NN/array can/MD/can create/VB/create raid/VBN/raid sets/NNS/sets of/IN/of various/JJ/various levels/NNS/levels and/CC/and can/MD/can even/RB/even slice/VB/slice these/DT/these sets/NNS/sets into/IN/into smaller/JJR/smaller volumes/NNS/volumes /,/, which/WDT/which are/VBP/are then/RB/then presented/VBN/presented to/TO/to the/DT/the operating/NN/operating system/NN/system /./. the/DT/the operating/NN/operating system/NN/system need/NN/need only/RB/only implement/JJ/implement the/DT/the file/NN/file system/NN/system on/IN/on each/DT/each of/IN/of the/DT/the volumes/NNP/volumes. arrays/VBZ/arrays can/MD/can have/VB/have multiple/NNS/multiple connections/NNS/connections available/JJ/available or/CC/or can/MD/can be/VB/be part/NN/part of/IN/of a/DT/a san/NN/san /,/, allowing/VBG/allowing multiple/NN/multiple hosts/NNS/hosts to/TO/to take/VB/take advantage/NN/advantage of/IN/of the/DT/the array/NN/array 's/POS/'s features/NNS/features /./. raid/NN/raid can/MD/can be/VB/be implemented/VBN/implemented in/IN/in the/DT/the san/NN/san interconnect/NN/interconnect layer/NN/layer by/IN/by disk/NN/disk virtualization/NN/virtualization devices/NNP/devices. in/IN/in this/DT/this case/NN/case /,/, a/DT/a device/NN/device sits/VBZ/sits between/IN/between the/DT/the hosts/NNS/hosts and/CC/and the/DT/the storage/NN/storage /./. it/PRP/it accepts/VBZ/accepts commands/NNS/commands from/IN/from the/DT/the servers/NNS/servers and/CC/and manages/NNS/manages access/NN/access to/TO/to the/DT/the storage/NN/storage /./. it/PRP/it could/MD/could provide/VB/provide mirroring/JJ/mirroring /,/, for/IN/for example/NN/example /,/, by/IN/by writing/NN/writing each/DT/each block/NN/block to/TO/to two/CD/two separate/JJ/separate storage/NN/storage devices/NNS/devices /./. other/JJ/other features/NNS/features /,/, such/JJ/such as/IN/as and/CC/and replication/NN/replication /,/, can/MD/can be/VB/be implemented/VBN/implemented at/IN/at each/DT/each of/IN/of these/DT/these levels/NNS/levels as/IN/as well/NNP/well. involves/NNS/involves the/DT/the automatic/JJ/automatic duplication/NN/duplication of/IN/of writes/NNS/writes between/IN/between separate/JJ/separate sites/NNS/sites for/IN/for redundancy/NN/redundancy and/CC/and disaster/NN/disaster recovery/NNP/recovery. replication/NN/replication can/MD/can be/VB/be synchronous/JJ/synchronous or/CC/or asynchronous/NNP/asynchronous. in/IN/in synchronous/JJ/synchronous replication/NN/replication /,/, each/DT/each block/NN/block must/MD/must be/VB/be written/VBN/written locally/RB/locally and/CC/and remotely/RB/remotely before/IN/before the/DT/the write/JJ/write is/VBZ/is considered/VBN/considered complete/JJ/complete /,/, whereas/NNS/whereas in/IN/in asynchronous/JJ/asynchronous replication/NN/replication /,/, the/DT/the writes/NNS/writes are/VBP/are grouped/VBN/grouped together/RB/together and/CC/and written/VBN/written periodically/NNP/periodically. asynchronous/JJ/asynchronous replication/NN/replication can/MD/can result/VB/result in/IN/in data/NN/data loss/NN/loss if/IN/if the/DT/the primary/JJ/primary site/NN/site fails/NNS/fails /,/, but/CC/but it/PRP/it is/VBZ/is faster/JJR/faster and/CC/and has/VBZ/has no/DT/no distance/NN/distance limitations/NNS/limitations /./. the/DT/the implementation/NN/implementation of/IN/of these/DT/these features/NNS/features differs/NNS/differs depending/VBG/depending on/IN/on the/DT/the layer/NN/layer at/IN/at which/WDT/which raid/VBN/raid is/VBZ/is implemented/NNP/implemented. for/IN/for example/NN/example /,/, if/IN/if raid/JJ/raid is/VBZ/is implemented/VBN/implemented in/IN/in software/NN/software /,/, then/RB/then each/DT/each host/NN/host may/MD/may need/VB/need to/TO/to carry/VB/carry out/RP/out and/CC/and manage/NN/manage its/PRP$/its own/JJ/own replication/NNP/replication. if/IN/if replication/NN/replication is/VBZ/is implemented/VBN/implemented in/IN/in the/DT/the storage/NN/storage array/NN/array or/CC/or in/IN/in the/DT/the san/NN/san intercom1ect/NNP/intercom1ect /,/, however/RB/however /,/, then/RB/then whatever/RB/whatever the/DT/the host/NN/host operating/NN/operating system/NN/system or/CC/or its/PRP$/its features/NNS/features /,/, the/DT/the host/NN/host 's/POS/'s data/NNS/data can/MD/can be/VB/be replicated/VBN/replicated /./. one/CD/one other/JJ/other aspect/NN/aspect of/IN/of most/JJS/most raid/JJ/raid implementations/NNS/implementations is/VBZ/is a/DT/a hot/JJ/hot spare/NN/spare disk/NN/disk or/CC/or disks/NNS/disks /./. a/DT/a is/VBZ/is not/RB/not used/VBN/used for/IN/for data/NNS/data but/CC/but is/VBZ/is configured/VBN/configured to/TO/to be/VB/be used/VBN/used as/IN/as a/DT/a replacement/NN/replacement in/IN/in case/NN/case disk/NN/disk failure/NNP/failure. for/IN/for instance/NN/instance /,/, a/DT/a hot/JJ/hot spare/NN/spare can/MD/can be/VB/be used/VBN/used to/TO/to rebuild/VB/rebuild a/DT/a mirrored/VBN/mirrored pair/NN/pair should/MD/should one/CD/one of/IN/of the/DT/the disks/NNS/disks in/IN/in the/DT/the pair/NN/pair fail/NNP/fail. in/IN/in this/DT/this way/NN/way /,/, the/DT/the raid/NN/raid level/NN/level can/MD/can be/VB/be reestablished/VBN/reestablished automatically/RB/automatically /,/, without/IN/without waiting/VBG/waiting for/IN/for the/DT/the failed/VBN/failed disk/NN/disk to/TO/to be/VB/be replaced/VBN/replaced /./. allocating/NN/allocating more/JJR/more than/IN/than one/CD/one hot/JJ/hot spare/NN/spare allows/VBZ/allows more/JJR/more than/IN/than one/CD/one failure/NN/failure to/TO/to be/VB/be repaired/VBN/repaired without/IN/without human/JJ/human intervention/NN/intervention /./. 12.7.4/CD/12.7.4 selecting/VBG/selecting a/DT/a raid/NN/raid level/NN/level given/VBN/given the/DT/the many/JJ/many choices/NNS/choices they/PRP/they have/VBP/have /,/, how/WRB/how do/VBP/do system/NN/system designers/NNS/designers choose/VBP/choose a/DT/a raid/NN/raid level/NN/level one/CD/one consideration/NN/consideration is/VBZ/is rebuild/VBN/rebuild performance/-NONE-/performance. if/IN/if a/DT/a disk/NN/disk fails/VBZ/fails /,/, the/DT/the time/NN/time needed/VBN/needed to/TO/to rebuild/VB/rebuild its/PRP$/its data/NNS/data can/MD/can be/VB/be significant/NNP/significant. this/DT/this may/MD/may be/VB/be an/DT/an important/JJ/important factor/NN/factor if/IN/if a/DT/a continuous/JJ/continuous supply/NN/supply of/IN/of data/NNS/data is/VBZ/is required/VBN/required /,/, as/IN/as it/PRP/it is/VBZ/is in/IN/in high-performance/NN/high-performance or/CC/or interactive/JJ/interactive database/NN/database systems/NNP/systems. furthermore/NN/furthermore /,/, rebuild/NN/rebuild performance/NN/performance influences/NNS/influences the/DT/the mean/JJ/mean time/NN/time to/TO/to failure/VB/failure /./. rebuild/NN/rebuild performance/NN/performance varies/NNS/varies with/IN/with the/DT/the raid/JJ/raid level/NN/level used/NNP/used. rebuilding/NN/rebuilding is/VBZ/is easiest/VBN/easiest or/CC/or raid/VBN/raid level1/NNP/level1 /,/, since/IN/since data/NNS/data can/MD/can be/VB/be copied/VBN/copied from/IN/from another/DT/another disk/NN/disk ;/:/; for/IN/for the/DT/the other/JJ/other levels/NNS/levels /,/, we/PRP/we need/VBP/need to/TO/to access/NN/access all/DT/all the/DT/the other/JJ/other disks/NNS/disks in/IN/in the/DT/the array/NN/array to/TO/to rebuild/VB/rebuild data/NNS/data in/IN/in a/DT/a failed/VBN/failed disk/NN/disk /./. rebuild/NN/rebuild times/NNS/times can/MD/can be/VB/be hours/NNS/hours for/IN/for raid/JJ/raid 5/CD/5 rebuilds/NNS/rebuilds of/IN/of large/JJ/large disk/NN/disk sets/NNS/sets /./. raid/NN/raid level/NN/level 0/-NONE-/0 is/VBZ/is used/VBN/used in/IN/in high-performance/NN/high-performance applications/NNS/applications where/WRB/where data/NNS/data loss/VBP/loss is/VBZ/is not/RB/not critical/NNP/critical. raid/VBD/raid level1/NNP/level1 is/VBZ/is popular/JJ/popular for/IN/for applications/NNS/applications that/WDT/that require/NN/require high/RB/high reliability/NN/reliability with/IN/with fast/JJ/fast recovery/NNP/recovery. raid/VBD/raid 0/-NONE-/0 +/:/+ 1/LS/1 and/CC/and 1/CD/1 +/CD/+ 0/-NONE-/0 are/VBP/are used/VBN/used where/WRB/where both/DT/both performance/NN/performance and/CC/and reliability/NN/reliability are/VBP/are important-for/JJ/important-for example/NN/example /,/, for/IN/for small/JJ/small databases/NNP/databases. due/JJ/due to/TO/to raid/VB/raid 1/CD/1 's/POS/'s 530/CD/530 chapter/NN/chapter 12/CD/12 the/DT/the inserv/NN/inserv storage/NN/storage array/NN/array im1ovation/NN/im1ovation /,/, in/IN/in an/DT/an effort/NN/effort to/TO/to provide/VB/provide better/JJR/better /,/, faster/JJR/faster /,/, and/CC/and less/JJR/less expensive/JJ/expensive solutions/NNS/solutions /,/, frequently/RB/frequently blurs/VBZ/blurs the/DT/the lines/NNS/lines that/WDT/that separated/VBN/separated previous/JJ/previous technologies/NNP/technologies. consider/NN/consider the/DT/the inserv/NN/inserv storage/NN/storage array/NN/array from/IN/from 3par/CD/3par. unlike/IN/unlike most/JJS/most other/JJ/other storage/NN/storage arrays/NNS/arrays /,/, inserv/NN/inserv does/VBZ/does not/RB/not require/VB/require that/IN/that a/DT/a set/NN/set of/IN/of disks/NNS/disks be/VB/be configured/VBN/configured at/IN/at a/DT/a specific/JJ/specific raid/NN/raid level/NN/level /./. rather/RB/rather /,/, each/DT/each disk/NN/disk is/VBZ/is broken/VBN/broken into/IN/into 256-mb/CD/256-mb chunklets/NNP/chunklets. ram/NN/ram is/VBZ/is then/RB/then applied/VBN/applied at/IN/at the/DT/the chunklet/NN/chunklet level/NNP/level. a/DT/a disk/NN/disk can/MD/can thus/RB/thus participate/VB/participate in/IN/in multiple/NN/multiple and/CC/and various/JJ/various raid/NN/raid levels/NNS/levels as/IN/as its/PRP$/its chunklets/NNS/chunklets are/VBP/are used/VBN/used for/IN/for multiple/NN/multiple volumes/NNS/volumes /./. inserv/NN/inserv also/RB/also provides/VBZ/provides snapshots/NNS/snapshots similar/JJ/similar to/TO/to those/DT/those created/VBN/created by/IN/by the/DT/the wafl/NN/wafl file/NN/file system/NNP/system. the/DT/the format/NN/format of/IN/of inserv/NN/inserv snapshots/NNS/snapshots can/MD/can be/VB/be read-write/JJ/read-write as/IN/as well/RB/well as/IN/as readonly/RB/readonly /,/, allowing/VBG/allowing multiple/NN/multiple hosts/NNS/hosts to/TO/to mount/VB/mount copies/NNS/copies of/IN/of a/DT/a given/VBN/given file/NN/file system/NN/system without/IN/without needing/NN/needing their/PRP$/their own/JJ/own copies/NNS/copies of/IN/of the/DT/the entire/JJ/entire file/NN/file system/NNP/system. any/DT/any changes/NNS/changes a/DT/a host/NN/host makes/VBZ/makes in/IN/in its/PRP$/its own/JJ/own copy/NN/copy are/VBP/are copy-on-write/JJ/copy-on-write and/CC/and so/RB/so are/VBP/are not/RB/not reflected/VBN/reflected in/IN/in the/DT/the other/JJ/other copies/NNS/copies /./. a/DT/a further/JJ/further innovation/NN/innovation is/VBZ/is /./. some/DT/some file/NN/file systems/NNS/systems do/VBP/do not/RB/not expand/VB/expand or/CC/or shrink/VB/shrink on/IN/on these/DT/these systems/NNS/systems /,/, the/DT/the original/JJ/original size/NN/size is/VBZ/is the/DT/the only/JJ/only size/NN/size /,/, and/CC/and any/DT/any change/NN/change requires/VBZ/requires copying/VBG/copying data/NNP/data. an/DT/an administrator/NN/administrator can/MD/can configure/VB/configure inserv/NN/inserv to/TO/to provide/VB/provide a/DT/a host/NN/host with/IN/with a/DT/a large/JJ/large amount/NN/amount of/IN/of logical/JJ/logical storage/NN/storage that/WDT/that initially/RB/initially occupies/VBZ/occupies only/RB/only a/DT/a small/JJ/small amount/NN/amount of/IN/of physical/JJ/physical storage/NNP/storage. as/IN/as the/DT/the host/NN/host starts/VBZ/starts using/VBG/using the/DT/the storage/NN/storage /,/, unused/VBD/unused disks/NNS/disks are/VBP/are allocated/VBN/allocated to/TO/to the/DT/the host/NN/host /,/, up/RB/up to/TO/to the/DT/the original/JJ/original logical/JJ/logical level/NNP/level. the/DT/the host/NN/host thus/RB/thus can/MD/can believe/VB/believe that/IN/that it/PRP/it has/VBZ/has a/DT/a large/JJ/large fixed/VBN/fixed storage/NN/storage space/NN/space /,/, create/VB/create its/PRP$/its file/NN/file systems/NNS/systems there/EX/there /,/, and/CC/and so/RB/so on/NNP/on. disks/NNS/disks can/MD/can be/VB/be added/VBN/added or/CC/or removed/VBN/removed from/IN/from the/DT/the file/NN/file system/NN/system by/IN/by inserv/NN/inserv without/IN/without the/DT/the file/NN/file systems/NNS/systems noticing/VBG/noticing the/DT/the change/NNP/change. this/DT/this feature/NN/feature can/MD/can reduce/VB/reduce the/DT/the number/NN/number of/IN/of drives/NNS/drives needed/VBN/needed by/IN/by hosts/NNS/hosts /,/, or/CC/or at/IN/at least/JJS/least delay/NN/delay the/DT/the purchase/NN/purchase of/IN/of disks/NNS/disks until/IN/until they/PRP/they are/VBP/are really/RB/really needed/VBN/needed /./. high/JJ/high space/NN/space overhead/NN/overhead /,/, raid/VBD/raid levels/NNS/levels is/VBZ/is often/RB/often preferred/VBN/preferred for/IN/for storing/NN/storing large/JJ/large volumes/NNS/volumes of/IN/of data/NNP/data. level6/NNP/level6 is/VBZ/is not/RB/not supported/VBN/supported currently/RB/currently by/IN/by many/JJ/many raid/JJ/raid implementations/NNS/implementations /,/, but/CC/but it/PRP/it should/MD/should offer/VB/offer better/JJR/better reliability/NN/reliability than/IN/than levels/NNS/levels /./. raid/NN/raid system/NN/system designers/NNS/designers and/CC/and administrators/NNS/administrators of/IN/of storage/NN/storage have/VBP/have to/TO/to make/VB/make several/JJ/several other/JJ/other decisions/NNS/decisions as/IN/as well/NNP/well. for/IN/for example/NN/example /,/, how/WRB/how many/JJ/many disks/NNS/disks should/MD/should be/VB/be in/IN/in a/DT/a given/VBN/given raid/NN/raid set/NN/set how/WRB/how many/JJ/many bits/NNS/bits should/MD/should be/VB/be protected/VBN/protected by/IN/by each/DT/each parity/NN/parity bit/NN/bit if/IN/if more/JJR/more disks/NNS/disks are/VBP/are in/IN/in an/DT/an array/NN/array /,/, data-transfer/JJ/data-transfer rates/NNS/rates are/VBP/are higher/JJR/higher /,/, but/CC/but the/DT/the system/NN/system is/VBZ/is more/RBR/more expensive/JJ/expensive /./. if/IN/if more/JJR/more bits/NNS/bits are/VBP/are protected/VBN/protected by/IN/by a/DT/a parity/NN/parity bit/NN/bit /,/, the/DT/the space/NN/space overhead/NN/overhead due/JJ/due to/TO/to parity/NN/parity bits/NNS/bits is/VBZ/is lower/JJR/lower /,/, but/CC/but the/DT/the chance/NN/chance that/IN/that a/DT/a second/JJ/second disk/NN/disk will/MD/will fail/VB/fail before/IN/before the/DT/the first/JJ/first failed/VBD/failed disk/NN/disk is/VBZ/is repaired/VBN/repaired is/VBZ/is greater/JJR/greater /,/, and/CC/and that/IN/that will/MD/will result/VB/result in/IN/in data/NN/data loss/NN/loss /./. 12.7.5/CD/12.7.5 extensions/NNS/extensions the/DT/the concepts/NNS/concepts of/IN/of raid/JJ/raid have/VBP/have been/VBN/been generalized/VBN/generalized to/TO/to other/JJ/other storage/NN/storage devices/NNS/devices /,/, including/VBG/including arrays/NNS/arrays of/IN/of tapes/NNS/tapes /,/, and/CC/and even/RB/even to/TO/to the/DT/the broadcast/NN/broadcast of/IN/of data/NNS/data over/IN/over wireless/NN/wireless systems/NNP/systems. when/WRB/when applied/VBD/applied to/TO/to arrays/NNS/arrays of/IN/of tapes/NNS/tapes /,/, raid/VBD/raid structures/NNS/structures are/VBP/are able/JJ/able to/TO/to recover/VB/recover data/NNS/data even/RB/even if/IN/if one/CD/one of/IN/of the/DT/the tapes/NNS/tapes in/IN/in an/DT/an array/NN/array is/VBZ/is damaged/NNP/damaged. when/WRB/when applied/VBD/applied to/TO/to broadcast/VB/broadcast of/IN/of data/NNS/data /,/, a/DT/a block/NN/block of/IN/of data/NNS/data is/VBZ/is split/VBN/split into/IN/into short/JJ/short units/NNS/units and/CC/and is/VBZ/is broadcast/JJ/broadcast along/IN/along with/IN/with a/DT/a parity/NN/parity unit/NN/unit ;/:/; if/IN/if one/CD/one of/IN/of the/DT/the units/NNS/units is/VBZ/is not/RB/not received/VBN/received for/IN/for any/DT/any reason/NN/reason /,/, it/PRP/it can/MD/can be/VB/be reconstructed/VBN/reconstructed from/IN/from the/DT/the other/JJ/other units/NNP/units. comrnonly/RB/comrnonly /,/, tape-drive/JJ/tape-drive robots/NNS/robots containing/VBG/containing multiple/NN/multiple tape/NN/tape drives/NNS/drives will/MD/will stripe/VB/stripe data/NNS/data across/IN/across all/DT/all the/DT/the drives/NNS/drives to/TO/to increase/VB/increase throughput/NN/throughput and/CC/and decrease/VB/decrease backup/RP/backup time/NN/time /./. 12.7/CD/12.7 531/CD/531 12.7.6/CD/12.7.6 problems/NNS/problems with/IN/with raid/JJ/raid unfortunately/RB/unfortunately /,/, raid/VBD/raid does/VBZ/does not/RB/not always/RB/always assure/VB/assure that/IN/that data/NNS/data are/VBP/are available/JJ/available for/IN/for the/DT/the operating/NN/operating system/NN/system and/CC/and its/PRP$/its users/NNP/users. a/DT/a pointer/NN/pointer to/TO/to a/DT/a file/NN/file could/MD/could be/VB/be wrong/JJ/wrong /,/, for/IN/for example/NN/example /,/, or/CC/or pointers/NNS/pointers within/IN/within the/DT/the file/NN/file structure/NN/structure could/MD/could be/VB/be wrong/NNP/wrong. incomplete/JJ/incomplete writes/NNS/writes /,/, if/IN/if not/RB/not properly/RB/properly recovered/VBD/recovered /,/, could/MD/could result/VB/result in/IN/in corrupt/JJ/corrupt data/NNP/data. some/DT/some other/JJ/other process/NN/process could/MD/could accidentally/RB/accidentally write/VB/write over/IN/over a/DT/a file/NN/file system/NN/system 's/POS/'s structures/NNS/structures /,/, too/NNP/too. raid/VBD/raid protects/NNS/protects against/IN/against physical/JJ/physical media/NNS/media errors/NNS/errors /,/, but/CC/but not/RB/not other/JJ/other hardware/NN/hardware and/CC/and software/NN/software errors/NNP/errors. as/IN/as large/JJ/large as/IN/as is/VBZ/is the/DT/the landscape/NN/landscape of/IN/of software/NN/software and/CC/and hardware/NN/hardware bugs/NNS/bugs /,/, that/IN/that is/VBZ/is how/WRB/how numerous/JJ/numerous are/VBP/are the/DT/the potential/NN/potential perils/NNS/perils for/IN/for data/NNS/data on/IN/on a/DT/a system/NN/system /./. the/DT/the solaris/NNS/solaris zfs/VBZ/zfs file/JJ/file system/NN/system takes/VBZ/takes an/DT/an innovative/JJ/innovative approach/NN/approach to/TO/to solving/NN/solving these/DT/these problems/NNS/problems through/IN/through the/DT/the use/NN/use of/IN/of /:/- a/DT/a technique/NN/technique which/WDT/which is/VBZ/is used/VBN/used to/TO/to verify/VB/verify the/DT/the integrity/NN/integrity of/IN/of data/NNP/data. zfs/NNS/zfs maintains/VBZ/maintains internal/JJ/internal checksums/NNS/checksums of/IN/of all/DT/all blocks/NNS/blocks /,/, including/VBG/including data/NNS/data and/CC/and metadata/NNP/metadata. these/DT/these checksums/NNS/checksums are/VBP/are not/RB/not kept/VBN/kept with/IN/with the/DT/the block/NN/block that/IN/that is/VBZ/is being/VBG/being checksummed/NNP/checksummed. rathel/NN/rathel ~/:/~ they/PRP/they are/VBP/are stored/VBN/stored with/IN/with the/DT/the pointer/NN/pointer to/TO/to that/DT/that block/NNP/block. /NNP/( see/VB/see figure/NN/figure 12.13/CD/12.13. /CD/) consider/NN/consider an/DT/an inode/NN/inode with/IN/with pointers/NNS/pointers to/TO/to its/PRP$/its data/NNP/data. within/IN/within the/DT/the inode/NN/inode is/VBZ/is the/DT/the checksum/NN/checksum of/IN/of each/DT/each block/NN/block of/IN/of data/NNP/data. if/IN/if there/EX/there is/VBZ/is a/DT/a problem/NN/problem with/IN/with the/DT/the data/NNS/data /,/, the/DT/the checksum/NN/checksum will/MD/will be/VB/be incorrect/VB/incorrect and/CC/and the/DT/the file/NN/file system/NN/system will/MD/will know/VB/know about/IN/about it/NNP/it. if/IN/if the/DT/the data/NNS/data are/VBP/are mirrored/VBN/mirrored /,/, and/CC/and there/EX/there is/VBZ/is a/DT/a block/NN/block with/IN/with a/DT/a correct/JJ/correct checksum/NN/checksum and/CC/and one/CD/one with/IN/with an/DT/an incorrect/NN/incorrect checksum/NN/checksum /,/, zfs/VBZ/zfs will/MD/will automatically/RB/automatically update/VB/update the/DT/the bad/JJ/bad block/NN/block with/IN/with the/DT/the good/JJ/good one/NNP/one. similarly/RB/similarly /,/, the/DT/the directory/NN/directory entry/NN/entry that/WDT/that points/VBZ/points to/TO/to the/DT/the inode/NN/inode has/VBZ/has a/DT/a checksum/NN/checksum for/IN/for the/DT/the inode/NNP/inode. any/DT/any problem/NN/problem in/IN/in the/DT/the inode/NN/inode is/VBZ/is detected/VBN/detected when/WRB/when the/DT/the directory/NN/directory is/VBZ/is accessed/VBN/accessed /./. this/DT/this checksumming/NN/checksumming takes/VBZ/takes places/NNS/places throughout/IN/throughout all/DT/all zfs/NNS/zfs structures/NNS/structures /,/, providing/VBG/providing a/DT/a much/RB/much higher/JJR/higher level/NN/level of/IN/of consistency/NN/consistency /,/, error/NN/error detection/NN/detection /,/, and/CC/and error/NN/error correction/NN/correction than/IN/than is/VBZ/is found/VBN/found in/IN/in raid/NN/raid disk/NN/disk sets/VBZ/sets or/CC/or standard/JJ/standard file/NN/file systems/NNP/systems. the/DT/the extra/JJ/extra overhead/NN/overhead that/WDT/that is/VBZ/is created/VBN/created by/IN/by the/DT/the checksum/NN/checksum calculation/NN/calculation and/CC/and extra/JJ/extra block/NN/block read-modify-write/JJ/read-modify-write cycles/NNS/cycles is/VBZ/is not/RB/not noticeable/JJ/noticeable because/IN/because the/DT/the overall/JJ/overall performance/NN/performance of/IN/of zfs/NNS/zfs is/VBZ/is very/RB/very fast/RB/fast /./. another/DT/another issue/NN/issue with/IN/with most/JJS/most raid/JJ/raid implementations/NNS/implementations is/VBZ/is lack/VBP/lack of/IN/of flexibility/NN/flexibility /./. consider/NN/consider a/DT/a storage/NN/storage array/NN/array with/IN/with twenty/NN/twenty disks/NNS/disks divided/VBD/divided into/IN/into four/CD/four sets/NNS/sets of/IN/of five/CD/five disks/NNS/disks /./. each/DT/each set/NN/set of/IN/of five/CD/five disks/NNS/disks is/VBZ/is a/DT/a raid/NN/raid level/NN/level 5/CD/5 set/NNP/set. as/IN/as a/DT/a result/NN/result /,/, there/EX/there are/VBP/are four/CD/four separate/JJ/separate data/NNS/data 1/CD/1 figure/NN/figure 12.13/CD/12.13 zfs/NNS/zfs checksums/NNS/checksums all/DT/all metadata/NN/metadata and/CC/and data/NNS/data /./. 532/CD/532 chapter/NN/chapter 12/CD/12 volumes/NNS/volumes /,/, each/DT/each holding/VBG/holding a/DT/a file/NN/file system/NNP/system. but/CC/but what/WP/what if/IN/if one/CD/one file/NN/file system/NN/system is/VBZ/is too/RB/too large/JJ/large to/TO/to fit/VB/fit on/IN/on a/DT/a five-disk/JJ/five-disk raid/NN/raid level/NN/level 5/CD/5 set/NN/set and/CC/and what/WP/what if/IN/if another/DT/another file/NN/file system/NN/system needs/VBZ/needs very/RB/very little/JJ/little space/NN/space if/IN/if such/JJ/such factors/NNS/factors are/VBP/are known/VBN/known ahead/RB/ahead of/IN/of time/NN/time /,/, then/RB/then the/DT/the disks/NNS/disks and/CC/and volumes/NNS/volumes can/MD/can be/VB/be properly/RB/properly allocated/NNP/allocated. very/RB/very frequently/RB/frequently /,/, however/RB/however /,/, disk/NN/disk use/NN/use and/CC/and requirements/NNS/requirements change/VBP/change over/IN/over time/NN/time /./. even/RB/even if/IN/if the/DT/the storage/NN/storage array/NN/array allowed/VBD/allowed the/DT/the entire/JJ/entire set/NN/set of/IN/of twenty/NN/twenty disks/NNS/disks to/TO/to be/VB/be created/VBN/created as/IN/as one/CD/one large/JJ/large raid/NN/raid set/NN/set other/JJ/other issues/NNS/issues could/MD/could arise/NNP/arise. several/JJ/several volumes/NNS/volumes of/IN/of various/JJ/various sizes/NNS/sizes could/MD/could be/VB/be built/VBN/built on/IN/on the/DT/the set/NNP/set. but/CC/but some/DT/some volume/NN/volume managers/NNS/managers do/VBP/do not/RB/not allow/VB/allow us/PRP/us to/TO/to change/VB/change a/DT/a volume/NN/volume 's/POS/'s size/NNP/size. in/IN/in that/DT/that case/NN/case /,/, we/PRP/we would/MD/would be/VB/be left/VBN/left with/IN/with the/DT/the same/JJ/same issue/NN/issue described/VBN/described above-mismatched/JJ/above-mismatched file-system/NN/file-system sizes/NNP/sizes. some/DT/some volume/NN/volume n/NN/n lanagers/NNS/lanagers allow/VBP/allow size/NN/size changes/NNS/changes /,/, but/CC/but some/DT/some file/JJ/file systems/NNS/systems do/VBP/do not/RB/not allow/VB/allow for/IN/for file-system/JJ/file-system growth/NN/growth or/CC/or shrinkage/NNP/shrinkage. the/DT/the volumes/NNS/volumes could/MD/could change/VB/change sizes/NNS/sizes /,/, but/CC/but the/DT/the file/NN/file systems/NNS/systems would/MD/would need/VB/need to/TO/to be/VB/be recreated/VBN/recreated to/TO/to take/VB/take advantage/NN/advantage of/IN/of those/DT/those changes/NNS/changes /./. zfs/NNS/zfs combines/NNS/combines file-system/JJ/file-system management/NN/management and/CC/and volume/NN/volume management/NN/management into/IN/into a/DT/a unit/NN/unit providing/VBG/providing greater/JJR/greater functionality/NN/functionality than/IN/than the/DT/the traditional/JJ/traditional separation/NN/separation of/IN/of those/DT/those functions/NNS/functions allows/NNP/allows. disks/NNS/disks /,/, or/CC/or partitions/NNS/partitions of/IN/of disks/NNS/disks /,/, are/VBP/are gathered/VBN/gathered together/RB/together via/IN/via raid/JJ/raid sets/NNS/sets into/IN/into of/IN/of storage/NNP/storage. a/DT/a pool/NN/pool can/MD/can hold/VB/hold one/CD/one or/CC/or more/JJR/more zfs/NNS/zfs file/VBP/file systems/NNP/systems. the/DT/the entire/JJ/entire pool/NN/pool 's/POS/'s free/JJ/free space/NN/space is/VBZ/is available/JJ/available to/TO/to all/DT/all file/NN/file systems/NNS/systems within/IN/within that/DT/that pool/NNP/pool. zfs/VBZ/zfs uses/NNS/uses the/DT/the memory/NN/memory model/NN/model of/IN/of malloc/NN/malloc and/CC/and free/JJ/free to/TO/to allocate/VB/allocate and/CC/and release/VB/release storage/NN/storage for/IN/for each/DT/each file/NN/file system/NN/system as/IN/as blocks/NNS/blocks are/VBP/are used/VBN/used and/CC/and freed/VBN/freed within/IN/within the/DT/the file/NN/file system/NNP/system. as/IN/as a/DT/a result/NN/result there/EX/there are/VBP/are no/DT/no artificial/JJ/artificial limits/NNS/limits on/IN/on storage/NN/storage use/NN/use and/CC/and no/DT/no need/NN/need to/TO/to relocate/VB/relocate file/JJ/file systems/NNS/systems between/IN/between volumes/NNS/volumes or/CC/or resize/VB/resize volumes/NNP/volumes. zfs/NNS/zfs provides/VBZ/provides quotas/NNS/quotas to/TO/to limit/VB/limit the/DT/the size/NN/size of/IN/of a/DT/a file/NN/file system/NN/system and/CC/and reservations/NNS/reservations to/TO/to assure/VB/assure that/IN/that a/DT/a file/NN/file system/NN/system can/MD/can grow/VB/grow by/IN/by a/DT/a specified/VBN/specified amount/NN/amount /,/, but/CC/but those/DT/those variables/NNS/variables may/MD/may be/VB/be changed/VBN/changed by/IN/by the/DT/the file/NN/file system/NN/system owner/NN/owner at/IN/at any/DT/any time/NNP/time. figure/NN/figure 12.14/CD/12.14 /CD/( a/DT/a /NN/) depicts/VBZ/depicts traditional/JJ/traditional volumes/NNS/volumes and/CC/and file/JJ/file systems/NNS/systems /,/, and/CC/and figure/NN/figure 12.14/CD/12.14 /CD/( b/NN/b /:/) shows/VBZ/shows the/DT/the zfs/NNS/zfs model/VBP/model /./. i/PRP/i fs/VBZ/fs i/PRP/i ~/VBP/~ /:/( a/DT/a /NN/) traditional/JJ/traditional volumes/NNS/volumes and/CC/and file/JJ/file systems/NNS/systems /./. /:/( b/NN/b /:/) zfs/NNS/zfs and/CC/and pooled/VBD/pooled storage/NN/storage /./. figure/NN/figure 12.14/CD/12.14 /CD/( a/DT/a /NN/) traditional/JJ/traditional volumes/NNS/volumes and/CC/and file/JJ/file systems/NNP/systems. /NNP/( b/NN/b /:/) a/DT/a zfs/NN/zfs pool/NN/pool and/CC/and file/NN/file systems/NNS/systems /./. 12.8/CD/12.8 12.8/CD/12.8 533/CD/533 in/IN/in chapter/NN/chapter 6/CD/6 /,/, we/PRP/we introduced/VBD/introduced the/DT/the write-ahead/JJ/write-ahead log/NN/log /,/, which/WDT/which requires/VBZ/requires the/DT/the availability/NN/availability of/IN/of stable/JJ/stable storage/NNP/storage. by/IN/by definition/NN/definition /,/, information/NN/information residing/VBG/residing in/IN/in stable/JJ/stable storage/NN/storage is/VBZ/is never/RB/never lost/NNP/lost. to/TO/to implement/VB/implement such/JJ/such storage/NN/storage /,/, we/PRP/we need/VBP/need to/TO/to replicate/VB/replicate the/DT/the required/VBN/required information/NN/information on/IN/on multiple/NN/multiple storage/NN/storage devices/NNS/devices /:/( usually/RB/usually disks/VBZ/disks /:/) with/IN/with independent/JJ/independent failure/NN/failure modes/VBZ/modes /./. we/PRP/we also/RB/also need/VBP/need to/TO/to coordinate/VB/coordinate the/DT/the writing/NN/writing of/IN/of updates/NNS/updates in/IN/in a/DT/a way/NN/way that/WDT/that guarantees/VBZ/guarantees that/IN/that a/DT/a failure/NN/failure during/IN/during an/DT/an update/JJ/update will/MD/will not/RB/not leave/VB/leave all/DT/all the/DT/the copies/NNS/copies in/IN/in a/DT/a damaged/JJ/damaged state/NN/state and/CC/and that/IN/that /,/, when/WRB/when we/PRP/we are/VBP/are recovering/VBG/recovering from/IN/from a/DT/a failure/NN/failure /,/, we/PRP/we can/MD/can force/VB/force all/PDT/all copies/NNS/copies to/TO/to a/DT/a consistent/NN/consistent and/CC/and correct/VB/correct value/NN/value /,/, even/RB/even if/IN/if another/DT/another failure/NN/failure occurs/NNS/occurs during/IN/during the/DT/the recovery/NN/recovery /./. in/IN/in this/DT/this section/NN/section /,/, we/PRP/we discuss/VBP/discuss how/WRB/how to/TO/to meet/VB/meet these/DT/these needs/NNS/needs /./. a/DT/a disk/NN/disk write/NN/write results/NNS/results in/IN/in one/CD/one of/IN/of three/CD/three outcomes/NNS/outcomes /:/: successful/JJ/successful completion/NNP/completion. the/DT/the data/NNS/data were/VBD/were written/VBN/written correctly/RB/correctly on/IN/on disk/NN/disk /./. partial/JJ/partial failure/NNP/failure. a/DT/a failure/NN/failure occurred/VBD/occurred in/IN/in the/DT/the midst/NN/midst of/IN/of transfer/NN/transfer /,/, so/RB/so only/RB/only some/DT/some of/IN/of the/DT/the sectors/NNS/sectors were/VBD/were written/VBN/written with/IN/with the/DT/the new/JJ/new data/NNS/data /,/, and/CC/and the/DT/the sector/NN/sector being/VBG/being written/VBN/written during/IN/during the/DT/the failure/NN/failure may/MD/may have/VB/have been/VBN/been corrupted/VBN/corrupted /./. total/JJ/total failure/NNP/failure. the/DT/the failure/NN/failure occurred/VBD/occurred before/IN/before the/DT/the disk/NN/disk write/NN/write started/VBD/started /,/, so/RB/so the/DT/the previous/JJ/previous data/NNS/data values/NNS/values on/IN/on the/DT/the disk/NN/disk remain/NN/remain intact/NN/intact /./. whenever/NN/whenever a/DT/a failure/NN/failure occurs/VBZ/occurs during/IN/during writing/VBG/writing of/IN/of a/DT/a block/NN/block /,/, the/DT/the system/NN/system needs/VBZ/needs to/TO/to detect/VB/detect it/PRP/it and/CC/and invoke/VB/invoke a/DT/a recovery/NN/recovery procedure/NN/procedure to/TO/to restore/VB/restore the/DT/the block/NN/block to/TO/to a/DT/a consistent/NN/consistent state/NNP/state. to/TO/to do/VB/do that/DT/that /,/, the/DT/the system/NN/system must/MD/must maintain/VB/maintain two/CD/two physical/JJ/physical blocks/NNS/blocks for/IN/for each/DT/each logical/JJ/logical block/NNP/block. an/DT/an output/NN/output operation/NN/operation is/VBZ/is executed/VBN/executed as/IN/as follows/NNS/follows /:/: write/JJ/write the/DT/the information/NN/information onto/IN/onto the/DT/the first/JJ/first physical/JJ/physical block/NN/block /./. when/WRB/when the/DT/the first/JJ/first write/NN/write completes/NNS/completes successfully/RB/successfully /,/, write/JJ/write the/DT/the same/JJ/same injormation/NN/injormation onto/IN/onto the/DT/the second/JJ/second physical/JJ/physical block/NN/block /./. declare/NN/declare the/DT/the operation/NN/operation complete/NN/complete only/RB/only after/IN/after the/DT/the second/JJ/second write/NN/write completes/VBZ/completes successfully/RB/successfully /./. during/IN/during recovery/NN/recovery from/IN/from a/DT/a failure/NN/failure /,/, each/DT/each pair/NN/pair of/IN/of physical/JJ/physical blocks/NNS/blocks is/VBZ/is examined/VBN/examined /./. if/IN/if both/DT/both are/VBP/are the/DT/the same/JJ/same and/CC/and no/DT/no detectable/JJ/detectable error/NN/error exists/NNS/exists /,/, then/RB/then no/DT/no further/JJ/further action/NN/action is/VBZ/is necessary/NNP/necessary. if/IN/if one/CD/one block/NN/block contains/NNS/contains a/DT/a detectable/JJ/detectable error/NN/error /,/, then/RB/then we/PRP/we replace/VBP/replace its/PRP$/its contents/NNS/contents with/IN/with the/DT/the value/NN/value of/IN/of the/DT/the other/JJ/other block/NNP/block. if/IN/if neither/DT/neither block/NN/block contains/VBZ/contains a/DT/a detectable/JJ/detectable error/NN/error /,/, but/CC/but the/DT/the blocks/NNS/blocks differ/VBP/differ in/IN/in content/NN/content /,/, then/RB/then we/PRP/we replace/VBP/replace the/DT/the content/NN/content of/IN/of the/DT/the first/JJ/first block/NN/block with/IN/with that/DT/that of/IN/of the/DT/the second/NNP/second. this/DT/this recovery/NN/recovery procedure/NN/procedure ensures/NNS/ensures that/WDT/that a/DT/a write/NN/write to/TO/to stable/VB/stable storage/NN/storage either/DT/either succeeds/NNS/succeeds completely/RB/completely or/CC/or results/NNS/results in/IN/in no/DT/no change/NN/change /./. we/PRP/we can/MD/can extend/VB/extend this/DT/this procedure/NN/procedure easily/RB/easily to/TO/to allow/VB/allow the/DT/the use/NN/use of/IN/of an/DT/an arbitrarily/NN/arbitrarily large/JJ/large number/NN/number of/IN/of copies/NNS/copies of/IN/of each/DT/each block/NN/block of/IN/of stable/JJ/stable storage/NNP/storage. although/IN/although having/VBG/having a/DT/a large/JJ/large number/NN/number of/IN/of copies/NNS/copies further/RB/further reduces/NNS/reduces the/DT/the probability/NN/probability of/IN/of a/DT/a failure/NN/failure /,/, it/PRP/it is/VBZ/is usually/RB/usually reasonable/JJ/reasonable to/TO/to simulate/VB/simulate stable/JJ/stable storage/NN/storage with/IN/with only/RB/only two/CD/two copies/NNP/copies. the/DT/the data/NNS/data in/IN/in stable/JJ/stable storage/NN/storage are/VBP/are guaranteed/VBN/guaranteed to/TO/to be/VB/be safe/JJ/safe unless/NN/unless a/DT/a failure/NN/failure destroys/VBZ/destroys all/DT/all the/DT/the copies/NNS/copies /./. because/IN/because waiting/VBG/waiting for/IN/for disk/NN/disk writes/NNS/writes to/TO/to complete/VB/complete /:/( synchronous/JJ/synchronous i/o/NN/i/o /:/) is/VBZ/is time/NN/time consuming/VBG/consuming /,/, many/JJ/many storage/NN/storage arrays/NNS/arrays add/VBP/add nvram/NN/nvram as/IN/as a/DT/a cache/NNP/cache. since/IN/since the/DT/the memory/NN/memory is/VBZ/is nonvolatile/JJ/nonvolatile /NN/( it/PRP/it usually/RB/usually has/VBZ/has battery/RB/battery power/JJR/power to/TO/to back/RB/back up/IN/up the/DT/the unit/NN/unit 's/POS/'s power/NN/power /:/) /,/, it/PRP/it can/MD/can be/VB/be trusted/VBN/trusted to/TO/to store/VB/store the/DT/the data/NNS/data en/VBP/en route/NN/route to/TO/to the/DT/the disks/NNP/disks. it/PRP/it is/VBZ/is thus/RB/thus considered/VBN/considered part/NN/part of/IN/of 534/CD/534 chapter/NN/chapter 12/CD/12 12.9/CD/12.9 the/DT/the stable/JJ/stable storage/NNP/storage. writes/VBZ/writes to/TO/to it/PRP/it are/VBP/are much/RB/much faster/JJR/faster than/IN/than to/TO/to disk/VB/disk /,/, so/RB/so performance/NN/performance is/VBZ/is greatly/RB/greatly improved/VBN/improved /./. would/MD/would you/PRP/you buy/VB/buy a/DT/a dvd/NN/dvd or/CC/or cd/NN/cd player/NN/player that/WDT/that had/VBD/had one/CD/one disk/NN/disk sealed/VBD/sealed inside/NN/inside of/IN/of course/NN/course not/NNP/not. you/PRP/you expect/VBP/expect to/TO/to use/VB/use a/DT/a dvd/NN/dvd or/CC/or cd/NN/cd player/NN/player with/IN/with many/JJ/many relatively/RB/relatively inexpensive/JJ/inexpensive disks/NNP/disks. on/IN/on a/DT/a computer/NN/computer as/IN/as well/RB/well /,/, using/VBG/using many/JJ/many inexpensive/JJ/inexpensive cartridges/NNS/cartridges with/IN/with one/CD/one drive/JJ/drive lowers/NNS/lowers the/DT/the overall/JJ/overall cost/NNP/cost. low/JJ/low cost/NN/cost is/VBZ/is the/DT/the defining/NN/defining characteristic/JJ/characteristic of/IN/of tertiary/JJ/tertiary storage/NN/storage /,/, which/WDT/which we/PRP/we discuss/VBP/discuss in/IN/in this/DT/this section/NN/section /./. 12.9.1/CD/12.9.1 tertiary-storage/NN/tertiary-storage devices/NNS/devices because/IN/because cost/NN/cost is/VBZ/is so/RB/so important/JJ/important /,/, in/IN/in practice/NN/practice /,/, tertiary/JJ/tertiary storage/NN/storage is/VBZ/is built/VBN/built with/IN/with the/DT/the most/RBS/most common/JJ/common examples/NNS/examples are/VBP/are floppy/JJ/floppy disks/NNS/disks /,/, tapes/NNS/tapes /,/, and/CC/and read-only/RB/read-only /,/, write-once/JJ/write-once /,/, and/CC/and rewritable/JJ/rewritable cds/NNS/cds and/CC/and dvds/NNP/dvds. many/JJ/many any/DT/any other/JJ/other kinds/NNS/kinds of/IN/of tertiarystorage/NN/tertiarystorage devices/NNS/devices are/VBP/are available/JJ/available as/IN/as well/RB/well /,/, including/VBG/including removable/JJ/removable devices/NNS/devices that/WDT/that store/IN/store data/NNS/data in/IN/in flash/NN/flash memory/NN/memory and/CC/and interact/NN/interact with/IN/with the/DT/the computer/NN/computer system/NN/system via/IN/via a/DT/a usb/NN/usb interface/NN/interface /./. 12.9.1.1/CD/12.9.1.1 removable/JJ/removable disks/NNS/disks removable/JJ/removable disks/NNS/disks are/VBP/are one/CD/one kind/NN/kind of/IN/of tertiary/JJ/tertiary storage/NNP/storage. floppy/NN/floppy disks/VBZ/disks are/VBP/are an/DT/an example/NN/example of/IN/of removable/JJ/removable magnetic/JJ/magnetic disks/NNP/disks. they/PRP/they are/VBP/are made/VBN/made from/IN/from a/DT/a thin/JJ/thin /,/, flexible/JJ/flexible disk/NN/disk coated/VBN/coated with/IN/with magnetic/JJ/magnetic material/NN/material and/CC/and enclosed/VBD/enclosed in/IN/in a/DT/a protective/JJ/protective plastic/NN/plastic case/NNP/case. although/IN/although common/JJ/common floppy/NN/floppy disks/NNS/disks can/MD/can hold/VB/hold only/RB/only about/IN/about 1/CD/1 mb/NN/mb /,/, similar/JJ/similar technology/NN/technology is/VBZ/is used/VBN/used for/IN/for removable/JJ/removable magnetic/JJ/magnetic disks/NNS/disks that/WDT/that hold/MD/hold more/RBR/more than/IN/than 1/CD/1 gb/NNP/gb. removable/JJ/removable magnetic/JJ/magnetic disks/NNS/disks can/MD/can be/VB/be nearly/RB/nearly as/IN/as fast/JJ/fast as/IN/as hard/JJ/hard disks/NNS/disks /,/, although/IN/although the/DT/the recording/NN/recording stuface/NN/stuface is/VBZ/is at/IN/at greater/JJR/greater risk/NN/risk of/IN/of from/IN/from scratches/NNS/scratches /./. a/DT/a is/VBZ/is another/DT/another kind/NN/kind of/IN/of removable/JJ/removable disk/NNP/disk. it/PRP/it records/VBZ/records data/NNS/data on/IN/on a/DT/a rigid/JJ/rigid platter/NN/platter coated/VBN/coated with/IN/with magnetic/JJ/magnetic material/NN/material /,/, but/CC/but the/DT/the recording/NN/recording technology/NN/technology is/VBZ/is quite/RB/quite different/JJ/different from/IN/from that/DT/that for/IN/for a/DT/a magnetic/JJ/magnetic disk/NNP/disk. the/DT/the magneto-optic/JJ/magneto-optic head/NN/head flies/NNS/flies much/RB/much farther/RB/farther from/IN/from the/DT/the disk/NN/disk surface/NN/surface than/IN/than a/DT/a magnetic/JJ/magnetic disk/NN/disk head/NN/head does/VBZ/does /,/, and/CC/and the/DT/the magnetic/JJ/magnetic material/NN/material is/VBZ/is covered/VBN/covered with/IN/with a/DT/a thick/NN/thick protective/JJ/protective layer/NN/layer of/IN/of plastic/JJ/plastic or/CC/or glass/NN/glass /./. this/DT/this arrangement/NN/arrangement makes/VBZ/makes the/DT/the disk/NN/disk much/RB/much more/RBR/more resistant/JJ/resistant to/TO/to head/VB/head crashes/NNS/crashes /./. the/DT/the magneto-optic/JJ/magneto-optic disk/NN/disk drive/JJ/drive has/VBZ/has a/DT/a coil/NN/coil that/WDT/that produces/VBZ/produces a/DT/a magnetic/JJ/magnetic field/NN/field ;/:/; at/IN/at room/NN/room temperature/NN/temperature /,/, the/DT/the field/NN/field is/VBZ/is too/RB/too large/JJ/large and/CC/and too/RB/too weak/JJ/weak to/TO/to magnetize/VB/magnetize a/DT/a bit/NN/bit on/IN/on the/DT/the disk/NNP/disk. to/TO/to write/VB/write a/DT/a bit/NN/bit /,/, the/DT/the disk/NN/disk head/NN/head flashes/NNS/flashes a/DT/a laser/NN/laser beam/NN/beam at/IN/at the/DT/the disk/NN/disk surface/NNP/surface. the/DT/the laser/NN/laser is/VBZ/is aimed/VBN/aimed at/IN/at a/DT/a tiny/NN/tiny spot/NN/spot where/WRB/where a/DT/a bit/NN/bit is/VBZ/is to/TO/to be/VB/be written/NNP/written. the/DT/the laser/NN/laser heats/NNS/heats this/DT/this spot/NN/spot /,/, which/WDT/which makes/VBZ/makes the/DT/the spot/NN/spot susceptible/JJ/susceptible to/TO/to the/DT/the magnetic/JJ/magnetic field/NNP/field. now/RB/now the/DT/the large/JJ/large /,/, weak/JJ/weak magnetic/JJ/magnetic field/NN/field can/MD/can record/VB/record a/DT/a tiny/JJ/tiny bit/NN/bit /./. the/DT/the magneto-optic/JJ/magneto-optic head/NN/head is/VBZ/is too/RB/too far/RB/far from/IN/from the/DT/the disk/NN/disk surface/NN/surface to/TO/to read/VB/read the/DT/the data/NNS/data by/IN/by detecting/VBG/detecting the/DT/the tiny/NN/tiny magnetic/JJ/magnetic fields/NNS/fields in/IN/in the/DT/the way/NN/way that/IN/that the/DT/the head/NN/head of/IN/of a/DT/a hard/JJ/hard disk/NN/disk does/VBZ/does /./. instead/RB/instead /,/, the/DT/the drive/JJ/drive reads/NNS/reads a/DT/a bit/NN/bit using/VBG/using a/DT/a property/NN/property of/IN/of laser/NN/laser light/NN/light called/VBN/called the/DT/the when/WRB/when a/DT/a laser/NN/laser beam/NN/beam is/VBZ/is bounced/VBN/bounced off/RP/off of/IN/of a/DT/a magnetic/JJ/magnetic spot/NN/spot /,/, the/DT/the polarization/NN/polarization of/IN/of the/DT/the laser/NN/laser beam/NN/beam is/VBZ/is rotated/VBN/rotated clockwise/NN/clockwise or/CC/or counterclockwise/VB/counterclockwise /,/, dependin/NN/dependin ~/:/~ g/NN/g on/IN/on the/DT/the orientation/NN/orientation of/IN/of the/DT/the magnetic/JJ/magnetic field/NNP/field. this/DT/this rotation/NN/rotation is/VBZ/is what/WP/what the/DT/the head/NN/head detects/VBZ/detects to/TO/to read/VB/read a/DT/a bit/NN/bit /./. another/DT/another category/NN/category of/IN/of removable/JJ/removable disk/NN/disk is/VBZ/is the/DT/the optical/JJ/optical disks/NNS/disks do/VBP/do not/RB/not use/VB/use magnetism/NN/magnetism at/IN/at all/NNP/all. instead/RB/instead /,/, they/PRP/they use/VBP/use special/JJ/special materials/NNS/materials that/WDT/that can/MD/can be/VB/be altered/VBN/altered by/IN/by laser/NN/laser light/JJ/light to/TO/to have/VB/have relatively/RB/relatively dark/JJ/dark or/CC/or bright/JJ/bright spots/NNP/spots. one/CD/one exarnple/NN/exarnple of/IN/of optical-disk/JJ/optical-disk 12.9/CD/12.9 535/CD/535 technology/NN/technology is/VBZ/is the/DT/the which/WDT/which is/VBZ/is coated/VBN/coated with/IN/with a/DT/a material/NN/material that/WDT/that can/MD/can freeze/VB/freeze into/IN/into either/DT/either a/DT/a crystalline/NN/crystalline or/CC/or an/DT/an amorphous/JJ/amorphous state/NNP/state. the/DT/the crystalline/NN/crystalline state/NN/state is/VBZ/is more/RBR/more transparent/JJ/transparent /,/, and/CC/and hence/NN/hence a/DT/a laser/NN/laser beam/NN/beam is/VBZ/is brighter/NN/brighter when/WRB/when it/PRP/it passes/VBZ/passes through/IN/through the/DT/the ltlaterial/JJ/ltlaterial and/CC/and bounces/NNS/bounces off/IN/off the/DT/the reflective/JJ/reflective layer/NNP/layer. the/DT/the phase-change/JJ/phase-change drive/JJ/drive uses/NNS/uses laser/NN/laser light/NN/light at/IN/at three/CD/three different/JJ/different powers/NNS/powers /:/: low/JJ/low power/NN/power to/TO/to read/VB/read data/NNS/data /,/, medium/NN/medium power/NN/power to/TO/to erase/VB/erase the/DT/the disk/NN/disk by/IN/by melting/NN/melting and/CC/and refreezing/VBG/refreezing the/DT/the recording/VBG/recording medium/NN/medium into/IN/into the/DT/the crystalline/NN/crystalline state/NN/state /,/, and/CC/and high/JJ/high power/NN/power to/TO/to melt/VB/melt the/DT/the medium/NN/medium into/IN/into the/DT/the amorphous/JJ/amorphous state/NN/state to/TO/to write/VB/write to/TO/to the/DT/the disk/NNP/disk. the/DT/the most/RBS/most common/JJ/common examples/NNS/examples of/IN/of this/DT/this technology/NN/technology are/VBP/are the/DT/the re-recordable/JJ/re-recordable cd-rw/NN/cd-rw and/CC/and dvd-rw/JJ/dvd-rw /./. the/DT/the kinds/NNS/kinds of/IN/of disks/NNS/disks just/RB/just described/VBN/described can/MD/can be/VB/be used/VBN/used over/RP/over and/CC/and over/NNP/over. they/PRP/they are/VBP/are called/VBN/called in/IN/in contrast/NN/contrast /,/, can/MD/can be/VB/be written/VBN/written only/RB/only once/NNP/once. an/DT/an old/JJ/old way/NN/way to/TO/to make/VB/make a/DT/a worm/NN/worm disk/NN/disk is/VBZ/is to/TO/to manufacture/VB/manufacture a/DT/a thin/JJ/thin aluminum/NN/aluminum film/NN/film sandwiched/VBD/sandwiched between/IN/between two/CD/two glass/NNS/glass or/CC/or plastic/JJ/plastic platters/NNP/platters. to/TO/to write/VB/write a/DT/a bit/NN/bit /,/, the/DT/the drive/JJ/drive uses/NNS/uses a/DT/a laser/NN/laser light/NN/light to/TO/to burn/VB/burn a/DT/a small/JJ/small hole/NN/hole through/IN/through the/DT/the aluminum/NNP/aluminum. this/DT/this burning/NN/burning can/MD/can not/RB/not be/VB/be reversed/NNP/reversed. although/IN/although it/PRP/it is/VBZ/is possible/JJ/possible to/TO/to destroy/VB/destroy the/DT/the information/NN/information on/IN/on a/DT/a worm/NN/worm disk/NN/disk by/IN/by burning/NN/burning holes/NNS/holes everywhere/RB/everywhere /,/, it/PRP/it is/VBZ/is virtually/RB/virtually impossible/JJ/impossible to/TO/to alter/NN/alter data/NNS/data on/IN/on the/DT/the disk/NN/disk /,/, because/IN/because holes/NNS/holes can/MD/can only/RB/only be/VB/be added/VBN/added /,/, and/CC/and the/DT/the ecc/NN/ecc code/NN/code associated/VBN/associated with/IN/with each/DT/each sector/NN/sector is/VBZ/is likely/JJ/likely to/TO/to detect/VB/detect such/JJ/such additions/NNP/additions. worm/NN/worm disks/VBZ/disks are/VBP/are considered/VBN/considered durable/JJ/durable and/CC/and reliable/JJ/reliable because/IN/because the/DT/the metal/NN/metal layer/NN/layer is/VBZ/is safely/RB/safely encapsulated/VBN/encapsulated between/IN/between the/DT/the protective/JJ/protective glass/NN/glass or/CC/or plastic/JJ/plastic platters/NNS/platters and/CC/and magnetic/JJ/magnetic fields/NNS/fields can/MD/can not/RB/not damage/VB/damage the/DT/the recording/NNP/recording. a/DT/a newer/JJR/newer write-once/NN/write-once technology/NN/technology records/NNS/records on/IN/on an/DT/an organic/JJ/organic polymer/NN/polymer dye/NN/dye instead/RB/instead of/IN/of an/DT/an aluminum/NN/aluminum layer/NN/layer ;/:/; the/DT/the dye/NN/dye absorbs/VBZ/absorbs laser/NN/laser light/NN/light to/TO/to form/NN/form marks/NNP/marks. this/DT/this technology/NN/technology is/VBZ/is used/VBN/used in/IN/in the/DT/the recordable/JJ/recordable cd-r/NN/cd-r and/CC/and dvd-r/JJ/dvd-r /./. read-oniv/NN/read-oniv such/JJ/such as/IN/as cd-rom/JJ/cd-rom and/CC/and dvd-rom/JJ/dvd-rom /,/, come/VBP/come from/IN/from the/DT/the factory/NN/factory with/IN/with the/DT/the data/NNS/data prerecorded/NNP/prerecorded. they/PRP/they use/VBP/use technology/NN/technology similar/JJ/similar to/TO/to that/DT/that of/IN/of worm/NN/worm disks/NNS/disks /:/( although/IN/although the/DT/the bits/NNS/bits are/VBP/are pressed/VBN/pressed /,/, not/RB/not burned/VBN/burned /-NONE-/) /,/, and/CC/and they/PRP/they are/VBP/are very/RB/very durable/JJ/durable /./. most/JJS/most removable/JJ/removable disks/NNS/disks are/VBP/are slower/JJR/slower than/IN/than their/PRP$/their nonremovable/JJ/nonremovable counterparts/NNS/counterparts /./. the/DT/the writing/NN/writing process/NN/process is/VBZ/is slower/JJR/slower /,/, as/IN/as are/VBP/are rotation/NN/rotation and/CC/and sometimes/RB/sometimes seek/VB/seek time/NN/time /./. 12.9.1.2/CD/12.9.1.2 tapes/NNS/tapes magnetic/JJ/magnetic tape/NN/tape is/VBZ/is another/DT/another type/NN/type of/IN/of removable/JJ/removable medium/NNP/medium. as/IN/as a/DT/a general/JJ/general rule/NN/rule /,/, a/DT/a tape/NN/tape holds/VBZ/holds more/JJR/more data/NNS/data than/IN/than an/DT/an optical/JJ/optical or/CC/or magnetic/JJ/magnetic disk/NN/disk cartridge/NNP/cartridge. tape/NN/tape drives/NNS/drives and/CC/and disk/VB/disk drives/NNS/drives have/VBP/have similar/JJ/similar transfer/NN/transfer rates/NNP/rates. but/CC/but random/NN/random access/NN/access to/TO/to tape/NN/tape is/VBZ/is much/JJ/much slower/NN/slower than/IN/than a/DT/a disk/NN/disk seek/NN/seek /,/, because/IN/because it/PRP/it requires/VBZ/requires a/DT/a fast-forward/JJ/fast-forward or/CC/or rewind/JJ/rewind operation/NN/operation that/WDT/that takes/VBZ/takes tens/NNS/tens of/IN/of seconds/NNS/seconds or/CC/or even/RB/even minutes/VBZ/minutes /./. although/IN/although a/DT/a typical/JJ/typical tape/NN/tape drive/JJ/drive is/VBZ/is more/RBR/more expensive/JJ/expensive than/IN/than a/DT/a typical/JJ/typical disk/NN/disk drive/JJ/drive /,/, the/DT/the price/NN/price of/IN/of a/DT/a tape/NN/tape cartridge/NN/cartridge is/VBZ/is lower/JJR/lower than/IN/than the/DT/the price/NN/price of/IN/of the/DT/the equivalent/NN/equivalent capacity/NN/capacity of/IN/of magnetic/JJ/magnetic disks/NNP/disks. so/RB/so tape/NN/tape is/VBZ/is an/DT/an economical/JJ/economical medium/NN/medium for/IN/for purposes/NNS/purposes that/WDT/that do/VBP/do not/RB/not require/VB/require fast/JJ/fast random/NN/random access/NNP/access. tapes/NNS/tapes are/VBP/are commonly/RB/commonly used/VBN/used to/TO/to hold/VB/hold backup/RP/backup copies/NNS/copies of/IN/of disk/NN/disk data/NNP/data. they/PRP/they are/VBP/are also/RB/also used/VBN/used in/IN/in large/JJ/large supercomputer/NN/supercomputer centers/NNS/centers to/TO/to hold/VB/hold the/DT/the enornwus/NN/enornwus volumes/VBZ/volumes of/IN/of data/NNS/data used/VBN/used in/IN/in scientific/JJ/scientific research/NN/research and/CC/and by/IN/by large/JJ/large commercial/JJ/commercial enterprises/NNS/enterprises /./. large/JJ/large tape/NN/tape installations/NNS/installations typically/RB/typically use/VB/use robotic/JJ/robotic tape/NN/tape changers/NNS/changers that/WDT/that move/NN/move tapes/VBZ/tapes between/IN/between tape/NN/tape drives/NNS/drives and/CC/and storage/NN/storage slots/NNS/slots in/IN/in a/DT/a tape/NN/tape library/NNP/library. these/DT/these mechanisms/NNS/mechanisms give/VBP/give the/DT/the computer/NN/computer automated/VBD/automated access/NN/access to/TO/to many/JJ/many tape/NN/tape cartridges/NNS/cartridges /./. a/DT/a robotic/JJ/robotic tape/NN/tape library/NN/library can/MD/can lower/JJR/lower the/DT/the overall/JJ/overall cost/NN/cost of/IN/of data/NNS/data storage/NNP/storage. a/DT/a diskresident/NN/diskresident file/NN/file that/WDT/that will/MD/will not/RB/not be/VB/be needed/VBN/needed for/IN/for a/DT/a while/NN/while can/MD/can be/VB/be to/TO/to tape/VB/tape /,/, where/WRB/where the/DT/the cost/NN/cost per/IN/per gigabyte/NN/gigabyte is/VBZ/is lower/JJR/lower ;/:/; if/IN/if the/DT/the file/NN/file is/VBZ/is needed/VBN/needed in/IN/in the/DT/the future/NN/future /,/, the/DT/the computer/NN/computer can/MD/can it/PRP/it back/RB/back into/IN/into disk/NN/disk storage/NN/storage for/IN/for active/JJ/active use/NNP/use. a/DT/a robotic/JJ/robotic tape/NN/tape library/NN/library is/VBZ/is 536/CD/536 chapter/NN/chapter 12/CD/12 sometimes/RB/sometimes called/VBN/called storage/NN/storage /,/, since/IN/since it/PRP/it is/VBZ/is between/IN/between the/DT/the high/JJ/high performance/NN/performance of/IN/of on-line/JJ/on-line magnetic/JJ/magnetic disks/NNS/disks and/CC/and the/DT/the low/JJ/low cost/NN/cost of/IN/of off-line/JJ/off-line tapes/NNS/tapes sitting/VBG/sitting on/IN/on shelves/NNS/shelves in/IN/in a/DT/a storage/NN/storage room/NN/room /./. 12.9.1.3/CD/12.9.1.3 future/JJ/future technology/NN/technology in/IN/in the/DT/the future/NN/future /,/, other/JJ/other storage/NN/storage technologies/NNS/technologies may/MD/may become/VB/become important/NNP/important. sometimes/RB/sometimes old/JJ/old technologies/NNS/technologies are/VBP/are used/VBN/used in/IN/in new/JJ/new ways/NNS/ways /,/, as/IN/as economics/NNS/economics change/VBP/change or/CC/or the/DT/the technologies/NNS/technologies evolve/NNP/evolve. for/IN/for example/NN/example /,/, solid-state/JJ/solid-state disks/NNS/disks /,/, or/CC/or are/VBP/are growing/VBG/growing in/IN/in importance/NN/importance and/CC/and becoming/VBG/becoming more/RBR/more common/NNP/common. simply/RB/simply described/VBD/described /,/, an/DT/an ssd/NN/ssd is/VBZ/is a/DT/a disk/NN/disk that/WDT/that is/VBZ/is used/VBN/used like/IN/like a/DT/a hard/JJ/hard drive/NNP/drive. depending/NN/depending on/IN/on the/DT/the memory/NN/memory technology/NN/technology used/VBD/used /,/, it/PRP/it can/MD/can be/VB/be volatile/JJ/volatile or/CC/or nonvolatile/NNP/nonvolatile. the/DT/the memory/NN/memory technology/NN/technology also/RB/also affects/VBZ/affects performance/NNP/performance. nonvolatile/NN/nonvolatile ssds/NNS/ssds have/VBP/have the/DT/the same/JJ/same characteristics/NNS/characteristics as/IN/as traditional/JJ/traditional hard/JJ/hard disks/NNS/disks but/CC/but can/MD/can be/VB/be more/RBR/more reliable/JJ/reliable because/IN/because they/PRP/they have/VBP/have no/DT/no moving/VBG/moving parts/NNS/parts and/CC/and faster/JJR/faster because/IN/because they/PRP/they have/VBP/have no/DT/no seek/NN/seek time/NN/time or/CC/or latency/NNP/latency. in/IN/in addition/NN/addition /,/, they/PRP/they use/VBP/use less/RBR/less energy/NNP/energy. however/RB/however /,/, they/PRP/they are/VBP/are more/RBR/more expensive/JJ/expensive per/NN/per megabyte/NN/megabyte than/IN/than traditional/JJ/traditional hard/JJ/hard disks/NNS/disks /,/, have/VBP/have lower/JJR/lower capacity/NN/capacity than/IN/than the/DT/the larger/JJR/larger hard/JJ/hard disks/NNS/disks /,/, and/CC/and may/MD/may have/VB/have shorter/NN/shorter life-spans/NNS/life-spans than/IN/than hard/JJ/hard disks/NNS/disks ;/:/; so/RB/so their/PRP$/their uses/NNS/uses are/VBP/are limited/NNP/limited. in/IN/in one/CD/one example/NN/example /,/, ssds/NNS/ssds are/VBP/are being/VBG/being used/VBN/used in/IN/in storage/NN/storage arrays/NNS/arrays to/TO/to hold/VB/hold metadata/NNS/metadata which/WDT/which requires/NNS/requires high-performance/VBP/high-performance such/JJ/such as/IN/as the/DT/the journal/NN/journal of/IN/of a/DT/a journaling/NN/journaling file/NN/file system/NNP/system. ssds/NNS/ssds are/VBP/are also/RB/also being/VBG/being added/VBN/added to/TO/to notebook/VB/notebook computers/NNS/computers to/TO/to make/VB/make them/PRP/them smaller/JJR/smaller /,/, faster/JJR/faster /,/, and/CC/and more/JJR/more energy/NN/energy efficient/NN/efficient /./. another/DT/another promising/NN/promising storage/NN/storage technology/NN/technology /,/, bologt/NN/bologt ;/:/; ;/:/; /:/: phk/NN/phk uses/NNS/uses laser/NN/laser light/NN/light to/TO/to record/VB/record holographic/JJ/holographic photographs/NNS/photographs on/IN/on special/JJ/special media/NNP/media. we/PRP/we can/MD/can think/VB/think of/IN/of a/DT/a hologram/NN/hologram as/IN/as a/DT/a three-dimensional/JJ/three-dimensional array/NN/array of/IN/of pixels/NNP/pixels. each/DT/each pixel/NN/pixel represents/VBZ/represents one/CD/one bit/NN/bit /:/: 0/-NONE-/0 for/IN/for black/JJ/black or/CC/or 1/CD/1 for/IN/for white/NNP/white. and/CC/and all/DT/all the/DT/the pixels/NNS/pixels in/IN/in a/DT/a hologram/NN/hologram are/VBP/are transferred/VBN/transferred in/IN/in one/CD/one flash/NN/flash of/IN/of laser/NN/laser light/NN/light /,/, so/RB/so the/DT/the data/NNS/data transfer/VBP/transfer rate/NN/rate is/VBZ/is extremely/RB/extremely high/NNP/high. with/IN/with continued/VBN/continued development/NN/development /,/, holographic/JJ/holographic storage/NN/storage may/MD/may become/VB/become commercially/RB/commercially viable/JJ/viable /./. another/DT/another technology/NN/technology under/IN/under active/JJ/active research/NN/research is/VBZ/is based/VBN/based on/IN/on /NNP/( iv/NN/iv !/./! e/NN/e \/:/\ 1s/CD/1s /CD/) /./. the/DT/the idea/NN/idea is/VBZ/is to/TO/to apply/RB/apply the/DT/the fabrication/NN/fabrication technologies/NNS/technologies that/WDT/that produce/NN/produce electronic/JJ/electronic chips/NNS/chips to/TO/to the/DT/the manufacture/NN/manufacture of/IN/of small/JJ/small datastorage/NN/datastorage machines/NNP/machines. one/CD/one proposal/NN/proposal calls/VBZ/calls for/IN/for the/DT/the fabrication/NN/fabrication of/IN/of an/DT/an array/NN/array of/IN/of 10,000/CD/10,000 tiny/JJ/tiny disk/NN/disk heads/NNS/heads /,/, with/IN/with a/DT/a square/JJ/square centimeter/NN/centimeter of/IN/of magnetic/JJ/magnetic storage/NN/storage material/NN/material suspended/VBD/suspended above/IN/above the/DT/the array/NNP/array. when/WRB/when the/DT/the storage/NN/storage material/NN/material is/VBZ/is moved/VBN/moved lengthwise/NN/lengthwise over/IN/over the/DT/the heads/NNS/heads /,/, each/DT/each head/NN/head accesses/NNS/accesses its/PRP$/its own/JJ/own linear/NN/linear track/NN/track of/IN/of data/NNS/data on/IN/on the/DT/the material/NNP/material. the/DT/the storage/NN/storage material/NN/material can/MD/can be/VB/be shifted/VBN/shifted sideways/NNS/sideways slightly/RB/slightly to/TO/to enable/JJ/enable all/DT/all the/DT/the heads/NNS/heads to/TO/to access/NN/access their/PRP$/their next/JJ/next track/NNP/track. although/IN/although it/PRP/it remains/VBZ/remains to/TO/to be/VB/be seen/VBN/seen whether/IN/whether this/DT/this technology/NN/technology can/MD/can be/VB/be successful/JJ/successful /,/, it/PRP/it may/MD/may provide/VB/provide a/DT/a nonvolatile/NN/nonvolatile data-storage/NN/data-storage technology/NN/technology that/IN/that is/VBZ/is faster/JJR/faster than/IN/than magnetic/JJ/magnetic disk/NN/disk and/CC/and cheaper/JJR/cheaper than/IN/than semiconductor/NN/semiconductor dram/NN/dram /./. whether/IN/whether the/DT/the storage/NN/storage medium/NN/medium is/VBZ/is a/DT/a removable/JJ/removable magnetic/JJ/magnetic disk/NN/disk /,/, a/DT/a dvd/NN/dvd /,/, or/CC/or a/DT/a magnetic/JJ/magnetic tape/NN/tape /,/, the/DT/the operating/NN/operating system/NN/system needs/VBZ/needs to/TO/to provide/VB/provide several/JJ/several capabilities/NNS/capabilities to/TO/to use/VB/use removable/JJ/removable media/NNS/media for/IN/for data/NNS/data storage/NNP/storage. these/DT/these capabilities/NNS/capabilities are/VBP/are discussed/VBN/discussed in/IN/in section/NN/section 12.9.2/CD/12.9.2 /./. 12.9.2/CD/12.9.2 operating-system/JJ/operating-system support/NN/support two/CD/two major/JJ/major jobs/NNS/jobs of/IN/of an/DT/an operating/NN/operating system/NN/system are/VBP/are to/TO/to manage/VB/manage physical/JJ/physical devices/NNS/devices and/CC/and to/TO/to present/VB/present a/DT/a virtual/JJ/virtual machine/NN/machine abstraction/NN/abstraction to/TO/to applications/NNP/applications. in/IN/in this/DT/this chapter/NN/chapter /,/, we/PRP/we have/VBP/have seen/VBN/seen that/IN/that /,/, for/IN/for hard/JJ/hard disks/NNS/disks /,/, the/DT/the operating/NN/operating system/NN/system provides/VBZ/provides two/CD/two abstractions/NNS/abstractions /./. one/CD/one is/VBZ/is the/DT/the raw/NN/raw device/NN/device /,/, which/WDT/which is/VBZ/is just/RB/just an/DT/an array/NN/array of/IN/of data/NNS/data blocks/NNP/blocks. the/DT/the other/JJ/other is/VBZ/is a/DT/a file/NN/file system/NNP/system. for/IN/for a/DT/a file/NN/file system/NN/system on/IN/on a/DT/a magnetic/JJ/magnetic disk/NN/disk /,/, the/DT/the operating/NN/operating system/NN/system queues/NNS/queues and/CC/and 12.9/CD/12.9 537/CD/537 schedules/NNS/schedules the/DT/the interleaved/VBN/interleaved requests/NNS/requests from/IN/from several/JJ/several applications/NNP/applications. now/RB/now /,/, we/PRP/we shall/MD/shall see/VB/see how/WRB/how the/DT/the operating/NN/operating system/NN/system does/VBZ/does its/PRP$/its job/NN/job when/WRB/when the/DT/the storage/NN/storage media/NNS/media are/VBP/are removable/JJ/removable /./. 12.9.2.1/CD/12.9.2.1 application/NN/application interface/NN/interface most/JJS/most operating/VBG/operating systems/NNS/systems can/MD/can handle/VB/handle removable/JJ/removable disks/NNS/disks almost/RB/almost exactly/RB/exactly as/IN/as they/PRP/they do/VBP/do fixed/VBN/fixed disks/NNP/disks. when/WRB/when a/DT/a blank/NN/blank cartridge/NN/cartridge is/VBZ/is inserted/VBN/inserted into/IN/into the/DT/the drive/JJ/drive /NN/( or/CC/or mounted/VBN/mounted /-NONE-/) /,/, the/DT/the cartridge/NN/cartridge must/MD/must be/VB/be formatted/VBN/formatted /,/, and/CC/and then/RB/then an/DT/an empty/NN/empty file/NN/file system/NN/system is/VBZ/is generated/VBN/generated on/IN/on the/DT/the disk/NNP/disk. this/DT/this file/NN/file system/NN/system is/VBZ/is used/VBN/used just/RB/just like/IN/like a/DT/a file/JJ/file system/NN/system on/IN/on a/DT/a hard/JJ/hard disk/NN/disk tapes/NNS/tapes are/VBP/are often/RB/often handled/VBN/handled differently/NNP/differently. the/DT/the operating/NN/operating system/NN/system usually/RB/usually presents/VBZ/presents a/DT/a tape/NN/tape as/IN/as a/DT/a raw/NN/raw storage/NN/storage medium/NNP/medium. an/DT/an application/NN/application does/VBZ/does not/RB/not open/VB/open a/DT/a file/NN/file on/IN/on the/DT/the tape/NN/tape ;/:/; it/PRP/it opens/VBZ/opens the/DT/the whole/JJ/whole tape/NN/tape drive/JJ/drive as/IN/as a/DT/a raw/NN/raw device/NNP/device. usually/RB/usually /,/, the/DT/the tape/NN/tape drive/VBP/drive is/VBZ/is then/RB/then reserved/VBN/reserved for/IN/for the/DT/the exclusive/JJ/exclusive use/NN/use of/IN/of that/DT/that application/NN/application until/IN/until the/DT/the application/NN/application exits/VBZ/exits or/CC/or closes/NNS/closes the/DT/the tape/NN/tape device/NNP/device. this/DT/this exclusivity/NN/exclusivity makes/VBZ/makes sense/NN/sense /,/, because/IN/because random/NN/random access/NN/access on/IN/on a/DT/a tape/NN/tape can/MD/can take/VB/take tens/NNS/tens of/IN/of seconds/NNS/seconds /,/, or/CC/or even/RB/even a/DT/a few/JJ/few minutes/NNS/minutes /,/, so/RB/so interleaving/VBG/interleaving random/NN/random accesses/NNS/accesses to/TO/to tapes/NNS/tapes from/IN/from more/RBR/more than/IN/than one/CD/one application/NN/application would/MD/would be/VB/be likely/JJ/likely to/TO/to cause/VB/cause thrashing/NN/thrashing /./. when/WRB/when the/DT/the tape/NN/tape drive/VBP/drive is/VBZ/is presented/VBN/presented as/RB/as a/DT/a raw/NN/raw device/NN/device /,/, the/DT/the operating/NN/operating system/NN/system does/VBZ/does not/RB/not provide/VB/provide file-system/JJ/file-system services/NNP/services. the/DT/the application/NN/application must/MD/must decide/VB/decide how/WRB/how to/TO/to use/VB/use the/DT/the array/NN/array of/IN/of blocks/NNP/blocks. for/IN/for instance/NN/instance /,/, a/DT/a program/NN/program that/WDT/that backs/VBZ/backs up/RP/up a/DT/a hard/JJ/hard disk/NN/disk to/TO/to tape/NN/tape might/MD/might store/VB/store a/DT/a list/NN/list of/IN/of file/NN/file names/NNS/names and/CC/and sizes/NNS/sizes at/IN/at the/DT/the beginning/NN/beginning of/IN/of the/DT/the tape/NN/tape and/CC/and then/RB/then copy/VB/copy the/DT/the data/NNS/data of/IN/of the/DT/the files/NNS/files to/TO/to the/DT/the tape/NN/tape in/IN/in that/DT/that order/NN/order /./. it/PRP/it is/VBZ/is easy/JJ/easy to/TO/to see/VB/see the/DT/the problems/NNS/problems that/WDT/that can/MD/can arise/VB/arise from/IN/from this/DT/this way/NN/way of/IN/of using/VBG/using tape/NN/tape /./. since/IN/since every/DT/every application/NN/application makes/VBZ/makes up/RP/up its/PRP$/its own/JJ/own rules/NNS/rules for/IN/for how/WRB/how to/TO/to organize/VB/organize a/DT/a tape/NN/tape /,/, a/DT/a tape/NN/tape full/JJ/full of/IN/of data/NNS/data can/MD/can generally/RB/generally be/VB/be used/VBN/used only/RB/only by/IN/by the/DT/the program/NN/program that/WDT/that created/VBN/created it/PRP/it /./. for/IN/for instance/NN/instance /,/, even/RB/even if/IN/if we/PRP/we know/VBP/know that/IN/that a/DT/a backup/NN/backup tape/NN/tape contains/VBZ/contains a/DT/a list/NN/list of/IN/of file/NN/file names/NNS/names and/CC/and file/JJ/file sizes/NNS/sizes followed/VBN/followed by/IN/by the/DT/the file/NN/file data/NNS/data /,/, we/PRP/we will/MD/will still/RB/still find/VB/find it/PRP/it difficult/VB/difficult to/TO/to use/VB/use the/DT/the tape/NNP/tape. how/WRB/how exactly/RB/exactly are/VBP/are the/DT/the file/NN/file names/VBZ/names stored/VBN/stored are/VBP/are the/DT/the file/NN/file sizes/VBZ/sizes in/IN/in binary/JJ/binary or/CC/or ascii/NN/ascii form/NN/form are/VBP/are the/DT/the files/NNS/files written/VBN/written one/CD/one per/IN/per block/NN/block /,/, or/CC/or are/VBP/are they/PRP/they all/DT/all concatenated/VBN/concatenated in/IN/in one/CD/one tremendously/RB/tremendously long/JJ/long string/NN/string of/IN/of bytes/NNS/bytes we/PRP/we do/VBP/do not/RB/not even/RB/even know/VB/know the/DT/the block/NN/block size/NN/size on/IN/on the/DT/the tape/NN/tape /,/, because/IN/because this/DT/this variable/JJ/variable is/VBZ/is generally/RB/generally one/CD/one that/WDT/that can/MD/can be/VB/be chosen/VBN/chosen separately/RB/separately for/IN/for each/DT/each block/NN/block written/VBN/written /./. for/IN/for a/DT/a disk/NN/disk drive/NN/drive /,/, the/DT/the basic/JJ/basic operations/NNS/operations are/VBP/are read/VBN/read /-NONE-/( /:/) /,/, write/JJ/write /NN/( /:/) /,/, and/CC/and seek/VB/seek /:/( /:/) /./. tape/NN/tape drives/NNS/drives have/VBP/have a/DT/a different/JJ/different set/NN/set of/IN/of basic/JJ/basic operations/NNP/operations. instead/RB/instead of/IN/of seek/NN/seek /:/( /:/) /,/, a/DT/a tape/NN/tape drive/NN/drive uses/NNS/uses the/DT/the locate/NN/locate /:/( /:/) operation/NNP/operation. the/DT/the tape/NN/tape locate/NN/locate /:/( /:/) operation/NN/operation is/VBZ/is more/RBR/more precise/JJ/precise than/IN/than the/DT/the disk/NN/disk seek/NN/seek /:/( /:/) operation/NN/operation /,/, because/IN/because it/PRP/it positions/NNS/positions the/DT/the tape/NN/tape to/TO/to a/DT/a specific/JJ/specific logical/JJ/logical block/NN/block /,/, rather/RB/rather than/IN/than an/DT/an entire/JJ/entire track/NNP/track. locating/NN/locating to/TO/to block/VB/block 0/-NONE-/0 is/VBZ/is the/DT/the same/JJ/same as/IN/as rewinding/NN/rewinding the/DT/the tape/NN/tape /./. for/IN/for most/JJS/most kinds/NNS/kinds of/IN/of tape/NN/tape drives/NNS/drives /,/, it/PRP/it is/VBZ/is possible/JJ/possible to/TO/to locate/VB/locate to/TO/to any/DT/any block/NN/block that/IN/that has/VBZ/has been/VBN/been written/VBN/written on/IN/on a/DT/a tape/NNP/tape. in/IN/in a/DT/a partly/RB/partly filled/VBN/filled tape/NN/tape /,/, however/RB/however /,/, it/PRP/it is/VBZ/is not/RB/not possible/JJ/possible to/TO/to locate/VB/locate into/IN/into the/DT/the empty/JJ/empty space/NN/space beyond/IN/beyond the/DT/the written/VBN/written area/NN/area /,/, because/IN/because most/JJS/most tape/NN/tape drives/NNS/drives do/VBP/do not/RB/not manage/VB/manage their/PRP$/their physical/JJ/physical space/NN/space in/IN/in the/DT/the same/JJ/same way/NN/way disk/NN/disk drives/NNS/drives do/NNP/do. for/IN/for a/DT/a disk/NN/disk drive/NN/drive /,/, the/DT/the sectors/NNS/sectors have/VBP/have a/DT/a fixed/VBN/fixed size/NN/size /,/, and/CC/and the/DT/the formatting/NN/formatting process/NN/process must/MD/must be/VB/be used/VBN/used to/TO/to place/VB/place empty/JJ/empty sectors/NNS/sectors in/IN/in their/PRP$/their final/JJ/final positions/NNS/positions before/IN/before any/DT/any data/NNS/data can/MD/can be/VB/be written/NNP/written. most/JJS/most tape/NN/tape drives/NNS/drives have/VBP/have a/DT/a variable/JJ/variable block/NN/block size/NN/size /,/, and/CC/and the/DT/the size/NN/size of/IN/of each/DT/each block/NN/block is/VBZ/is detern/JJ/detern ined/VBN/ined on/IN/on the/DT/the fly/NN/fly /,/, when/WRB/when that/DT/that block/NN/block is/VBZ/is written/NNP/written. if/IN/if an/DT/an area/NN/area of/IN/of defective/JJ/defective tape/NN/tape is/VBZ/is encountered/VBN/encountered during/IN/during writing/NN/writing /,/, the/DT/the bad/JJ/bad area/NN/area is/VBZ/is skipped/VBN/skipped and/CC/and the/DT/the block/NN/block is/VBZ/is written/VBN/written again/NNP/again. this/DT/this operation/NN/operation explains/VBZ/explains why/WRB/why it/PRP/it is/VBZ/is not/RB/not possible/JJ/possible to/TO/to locate/VB/locate into/IN/into the/DT/the empty/JJ/empty space/NN/space beyond/IN/beyond the/DT/the written/VBN/written area/NN/area -the/NNP/-the positions/NNS/positions and/CC/and numbers/NNS/numbers of/IN/of the/DT/the logical/JJ/logical blocks/NNS/blocks have/VBP/have not/RB/not yet/RB/yet been/VBN/been detennined/VBN/detennined /./. 538/CD/538 chapter/NN/chapter 12/CD/12 most/JJS/most tape/NN/tape drives/NNS/drives have/VBP/have a/DT/a read_position/NNP/read_position /NNP/( /NNP/) operation/NN/operation that/WDT/that returns/VBZ/returns the/DT/the logical/JJ/logical block/NN/block number/NN/number where/WRB/where the/DT/the tape/NN/tape head/NN/head is/VBZ/is currently/RB/currently located/NNP/located. many/JJ/many tape/NN/tape drives/NNS/drives also/RB/also support/NN/support a/DT/a space/NN/space /:/( /:/) operation/NN/operation for/IN/for relative/JJ/relative motion/NNP/motion. so/RB/so /,/, for/IN/for example/NN/example /,/, the/DT/the operation/NN/operation space/NN/space /:/( -2/-NONE-/-2 /:/) would/MD/would locate/VB/locate backward/NN/backward over/IN/over two/CD/two logical/JJ/logical blocks/NNS/blocks /./. for/IN/for most/JJS/most kinds/NNS/kinds of/IN/of tape/NN/tape drives/NNS/drives /,/, writing/VBG/writing a/DT/a block/NN/block has/VBZ/has the/DT/the side/NN/side effect/NN/effect of/IN/of logically/RB/logically erasing/VBG/erasing everything/NN/everything beyond/IN/beyond the/DT/the position/NN/position of/IN/of the/DT/the write/NNP/write. in/IN/in practice/NN/practice /,/, this/DT/this side/NN/side effect/NN/effect means/VBZ/means that/DT/that most/RBS/most tape/NN/tape drives/NNS/drives are/VBP/are append-only/RB/append-only devices/NNS/devices /,/, because/IN/because updating/VBG/updating a/DT/a block/NN/block in/IN/in the/DT/the middle/NN/middle of/IN/of the/DT/the tape/NN/tape also/RB/also effectively/RB/effectively erases/VBZ/erases everything/NN/everything beyond/IN/beyond that/DT/that block/NNP/block. the/DT/the tape/NN/tape drive/VBP/drive implements/NNS/implements this/DT/this appending/NN/appending by/IN/by placing/NN/placing an/DT/an end-of-tape/NN/end-of-tape /:/( eot/NN/eot /:/) mark/NN/mark after/IN/after a/DT/a block/NN/block that/WDT/that is/VBZ/is written/NNP/written. the/DT/the drive/JJ/drive refuses/NNS/refuses to/TO/to locate/VB/locate past/JJ/past the/DT/the eot/NN/eot mark/NN/mark /,/, but/CC/but it/PRP/it is/VBZ/is possible/JJ/possible to/TO/to locate/VB/locate to/TO/to the/DT/the eot/NN/eot and/CC/and then/RB/then start/VB/start writing/NNP/writing. doing/NN/doing so/IN/so overwrites/NNS/overwrites the/DT/the old/JJ/old eot/NN/eot mark/NN/mark and/CC/and places/NNS/places a/DT/a new/JJ/new one/CD/one at/IN/at the/DT/the end/NN/end of/IN/of the/DT/the new/JJ/new blocks/NNS/blocks just/RB/just written/VBN/written /./. in/IN/in principle/NN/principle /,/, a/DT/a file/NN/file system/NN/system can/MD/can be/VB/be implemented/VBN/implemented on/IN/on a/DT/a tape/NNP/tape. but/CC/but many/JJ/many of/IN/of the/DT/the file-system/JJ/file-system data/NNS/data structures/NNS/structures and/CC/and algorithms/NNS/algorithms would/MD/would be/VB/be different/JJ/different from/IN/from those/DT/those used/VBN/used for/IN/for disks/NNS/disks /,/, because/IN/because of/IN/of the/DT/the append-only/JJ/append-only property/NN/property of/IN/of tape/NN/tape /./. 12.9.2.2/CD/12.9.2.2 file/NN/file naming/VBG/naming another/DT/another question/NN/question that/IN/that the/DT/the operating/NN/operating system/NN/system needs/VBZ/needs to/TO/to handle/VB/handle is/VBZ/is how/WRB/how to/TO/to name/VB/name files/NNS/files on/IN/on removable/JJ/removable media/NNP/media. for/IN/for a/DT/a fixed/VBN/fixed disk/NN/disk /,/, naming/VBG/naming is/VBZ/is not/RB/not difficult/NNP/difficult. on/IN/on a/DT/a pc/NN/pc /,/, the/DT/the file/NN/file name/NN/name consists/NNS/consists of/IN/of a/DT/a drive/JJ/drive letter/NN/letter followed/VBN/followed by/IN/by a/DT/a path/NN/path name/NNP/name. in/IN/in unix/NN/unix /,/, the/DT/the file/NN/file name/NN/name does/VBZ/does not/RB/not contain/VB/contain a/DT/a drive/JJ/drive letter/NN/letter /,/, but/CC/but the/DT/the molmt/NN/molmt table/NN/table enables/VBZ/enables the/DT/the operating/NN/operating system/NN/system to/TO/to discover/VB/discover on/IN/on what/WP/what drive/JJ/drive the/DT/the file/NN/file is/VBZ/is located/NNP/located. if/IN/if the/DT/the disk/NN/disk is/VBZ/is removable/JJ/removable /,/, however/RB/however /,/, knowing/VBG/knowing what/WP/what drive/JJ/drive contained/VBD/contained the/DT/the cartridge/NN/cartridge at/IN/at some/DT/some time/NN/time in/IN/in the/DT/the past/JJ/past does/VBZ/does not/RB/not mean/VB/mean knowing/VBG/knowing how/WRB/how to/TO/to find/VB/find the/DT/the file/NNP/file. if/IN/if every/DT/every removable/JJ/removable cartridge/NN/cartridge in/IN/in the/DT/the world/NN/world had/VBD/had a/DT/a different/JJ/different serial/JJ/serial number/NN/number /,/, the/DT/the name/NN/name of/IN/of a/DT/a file/NN/file on/IN/on a/DT/a removable/JJ/removable device/NN/device could/MD/could be/VB/be prefixed/VBN/prefixed with/IN/with the/DT/the serial/JJ/serial number/NN/number /,/, but/CC/but to/TO/to ensure/VB/ensure that/IN/that no/DT/no two/CD/two serial/JJ/serial numbers/NNS/numbers are/VBP/are the/DT/the same/JJ/same would/MD/would require/VB/require each/DT/each one/CD/one to/TO/to be/VB/be about/RB/about 12/CD/12 digits/NNS/digits in/IN/in length/NNP/length. who/WP/who could/MD/could remember/VB/remember the/DT/the names/NNS/names of/IN/of her/PRP$/her files/NNS/files if/IN/if she/PRP/she had/VBD/had to/TO/to memorize/VB/memorize a/DT/a 12-digit/JJ/12-digit serial/NN/serial number/NN/number for/IN/for each/DT/each one/CD/one the/DT/the problem/NN/problem becomes/VBZ/becomes even/RB/even more/JJR/more difficult/JJ/difficult when/WRB/when we/PRP/we want/VBP/want to/TO/to write/VB/write data/NNS/data on/IN/on a/DT/a removable/JJ/removable cartridge/NN/cartridge on/IN/on one/CD/one computer/NN/computer and/CC/and then/RB/then use/VB/use the/DT/the cartridge/NN/cartridge in/IN/in another/DT/another computer/NNP/computer. if/IN/if both/DT/both machines/NNS/machines are/VBP/are of/IN/of the/DT/the same/JJ/same type/NN/type and/CC/and have/VB/have the/DT/the same/JJ/same kind/NN/kind of/IN/of removable/JJ/removable drive/JJ/drive /,/, the/DT/the only/JJ/only difficulty/NN/difficulty is/VBZ/is knowing/VBG/knowing the/DT/the contents/NNS/contents and/CC/and data/NNS/data layout/IN/layout on/IN/on the/DT/the cartridge/NNP/cartridge. but/CC/but if/IN/if the/DT/the machines/NNS/machines or/CC/or drives/NNS/drives are/VBP/are different/JJ/different /,/, many/JJ/many additional/JJ/additional problems/NNS/problems can/MD/can arise/NNP/arise. even/RB/even if/IN/if the/DT/the drives/NNS/drives are/VBP/are compatible/JJ/compatible /,/, different/JJ/different computers/NNS/computers may/MD/may store/VB/store bytes/NNS/bytes in/IN/in different/JJ/different orders/NNS/orders and/CC/and may/MD/may use/VB/use different/JJ/different encodings/NNS/encodings for/IN/for binary/JJ/binary numbers/NNS/numbers and/CC/and even/RB/even for/IN/for letters/NNS/letters /:/( such/JJ/such as/IN/as ascii/NN/ascii on/IN/on pcs/NNS/pcs versus/CC/versus ebcdic/JJ/ebcdic on/IN/on mainframes/NNS/mainframes /:/) /./. today/NN/today 's/POS/'s operating/NN/operating systems/NNS/systems generally/RB/generally leave/VBP/leave the/DT/the name-space/NN/name-space problem/NN/problem unsolved/VBD/unsolved for/IN/for removable/JJ/removable media/NNS/media and/CC/and depend/NN/depend on/IN/on applications/NNS/applications and/CC/and users/NNS/users to/TO/to figure/VB/figure out/RP/out how/WRB/how to/TO/to access/NN/access and/CC/and interpret/NN/interpret the/DT/the data/NNP/data. fortunately/RB/fortunately /,/, a/DT/a few/JJ/few kinds/NNS/kinds of/IN/of removable/JJ/removable media/NNS/media are/VBP/are so/RB/so well/RB/well standardized/JJ/standardized that/IN/that all/DT/all computers/NNS/computers use/VBP/use them/PRP/them the/DT/the same/JJ/same way/NNP/way. one/CD/one example/NN/example is/VBZ/is the/DT/the cd/NNP/cd. music/NN/music cds/NNS/cds use/VBP/use a/DT/a universal/NN/universal format/NN/format that/WDT/that is/VBZ/is understood/VBN/understood by/IN/by any/DT/any cd/NN/cd drive/NNP/drive. data/NNS/data cds/NNS/cds are/VBP/are available/JJ/available in/IN/in only/RB/only a/DT/a few/JJ/few different/JJ/different formats/NNS/formats /,/, so/RB/so it/PRP/it is/VBZ/is usual/JJ/usual for/IN/for a/DT/a cd/NN/cd drive/NN/drive and/CC/and the/DT/the operating-system/JJ/operating-system device/NN/device driver/NN/driver to/TO/to be/VB/be programmed/VBN/programmed to/TO/to handle/VB/handle all/DT/all the/DT/the comn1on/NNP/comn1on formats/NNP/formats. dvd/VBD/dvd fonnats/NNS/fonnats are/VBP/are also/RB/also well/RB/well standardized/JJ/standardized /./. 12.9/CD/12.9 539/CD/539 12.9.2.3/CD/12.9.2.3 hierarchical/JJ/hierarchical storage/NN/storage management/NN/management a/DT/a ju/NN/ju enables/VBZ/enables the/DT/the computer/NN/computer to/TO/to change/VB/change the/DT/the removable/JJ/removable cartridge/NN/cartridge in/IN/in a/DT/a tape/NN/tape or/CC/or disk/VB/disk drive/JJ/drive without/IN/without human/JJ/human assistance/NNP/assistance. two/CD/two major/JJ/major uses/NNS/uses of/IN/of this/DT/this technology/NN/technology are/VBP/are for/IN/for backups/NNS/backups and/CC/and hierarchical/JJ/hierarchical storage/NN/storage systems/NNP/systems. the/DT/the use/NN/use of/IN/of a/DT/a jukebox/NN/jukebox for/IN/for backups/NNS/backups is/VBZ/is simple/JJ/simple /:/: when/WRB/when one/CD/one cartridge/NN/cartridge becomes/VBZ/becomes full/JJ/full /,/, the/DT/the computer/NN/computer instructs/NNS/instructs the/DT/the jukebox/NN/jukebox to/TO/to switch/VB/switch to/TO/to the/DT/the next/JJ/next cartridge/NNP/cartridge. some/DT/some jukeboxes/NNS/jukeboxes hold/VBP/hold tens/NNS/tens of/IN/of drives/NNS/drives and/CC/and thousands/NNS/thousands of/IN/of cartridges/NNS/cartridges /,/, with/IN/with robotic/JJ/robotic arms/NNS/arms managing/VBG/managing the/DT/the movement/NN/movement of/IN/of tapes/NNS/tapes to/TO/to the/DT/the drives/NNS/drives /./. a/DT/a hierarchical/JJ/hierarchical storage/NN/storage system/NN/system extends/NNS/extends the/DT/the storage/NN/storage hierarchy/NN/hierarchy beyond/IN/beyond primary/JJ/primary memory/NN/memory and/CC/and secondary/JJ/secondary storage/NN/storage /:/( that/IN/that is/VBZ/is /,/, magnetic/JJ/magnetic disk/NN/disk /:/) to/TO/to incorporate/VB/incorporate tertiary/JJ/tertiary storage/NNP/storage. tertiary/JJ/tertiary storage/NN/storage is/VBZ/is usually/RB/usually implemented/VBN/implemented as/IN/as a/DT/a jukebox/NN/jukebox of/IN/of tapes/NNS/tapes or/CC/or removable/JJ/removable disks/NNP/disks. this/DT/this level/NN/level of/IN/of the/DT/the storage/NN/storage hierarchy/NN/hierarchy is/VBZ/is larger/JJR/larger /,/, cheaper/JJR/cheaper /,/, and/CC/and slower/JJR/slower /./. although/IN/although the/DT/the virtual/JJ/virtual memory/NN/memory system/NN/system can/MD/can be/VB/be extended/VBN/extended in/IN/in a/DT/a straightforward/NN/straightforward manner/NN/manner to/TO/to tertiary/JJ/tertiary storage/NN/storage /,/, this/DT/this extension/NN/extension is/VBZ/is rarely/RB/rarely carried/VBN/carried out/RP/out in/IN/in practice/NNP/practice. the/DT/the reason/NN/reason is/VBZ/is that/IN/that a/DT/a retrieval/NN/retrieval from/IN/from a/DT/a jukebox/NN/jukebox can/MD/can take/VB/take tens/NNS/tens of/IN/of seconds/NNS/seconds or/CC/or even/RB/even minutes/VBZ/minutes /,/, and/CC/and such/JJ/such a/DT/a long/JJ/long delay/NN/delay is/VBZ/is intolerable/JJ/intolerable for/IN/for demand/NN/demand paging/VBG/paging and/CC/and for/IN/for other/JJ/other forms/NNS/forms of/IN/of virtual/JJ/virtual memory/NN/memory use/NN/use /./. the/DT/the usual/JJ/usual way/NN/way to/TO/to incorporate/VB/incorporate tertiary/JJ/tertiary storage/NN/storage is/VBZ/is to/TO/to extend/VB/extend the/DT/the file/NN/file system/NN/system /./. small/JJ/small and/CC/and frequently/RB/frequently used/JJ/used files/NNS/files remain/VBP/remain on/IN/on magnetic/JJ/magnetic disk/NN/disk /,/, while/IN/while large/JJ/large and/CC/and old/JJ/old files/NNS/files that/WDT/that are/VBP/are not/RB/not actively/RB/actively used/VBN/used are/VBP/are archived/VBN/archived to/TO/to the/DT/the jukebox/NNP/jukebox. in/IN/in some/DT/some file-archiving/JJ/file-archiving systems/NNS/systems /,/, the/DT/the directory/NN/directory entry/NN/entry for/IN/for the/DT/the file/NN/file continues/VBZ/continues to/TO/to exist/VB/exist /,/, but/CC/but the/DT/the contents/NNS/contents of/IN/of the/DT/the file/NN/file no/DT/no longer/NN/longer occupy/NN/occupy space/NN/space in/IN/in secondary/JJ/secondary storage/NNP/storage. if/IN/if an/DT/an application/NN/application tries/VBZ/tries to/TO/to open/VB/open the/DT/the file/NN/file /,/, the/DT/the open/JJ/open /NN/( /:/) system/NN/system call/NN/call is/VBZ/is suspended/VBN/suspended until/IN/until the/DT/the file/NN/file contents/NNS/contents can/MD/can be/VB/be staged/VBN/staged in/IN/in from/IN/from tertiary/JJ/tertiary storage/NNP/storage. when/WRB/when the/DT/the contents/NNS/contents are/VBP/are again/RB/again available/JJ/available from/IN/from magnetic/JJ/magnetic disk/NN/disk /,/, the/DT/the open/JJ/open /NN/( /:/) operation/NN/operation returns/NNS/returns control/NN/control to/TO/to the/DT/the application/NN/application /,/, which/WDT/which proceeds/NNS/proceeds to/TO/to use/VB/use the/DT/the disk-resident/JJ/disk-resident copy/NN/copy of/IN/of the/DT/the data/NNS/data /./. today/NN/today /,/, is/VBZ/is usually/RB/usually found/VBN/found in/IN/in installations/NNS/installations that/WDT/that have/VBP/have large/JJ/large volumes/NNS/volumes of/IN/of data/NNS/data that/WDT/that are/VBP/are used/VBN/used seldom/NN/seldom /,/, sporadically/RB/sporadically /,/, current/JJ/current work/NN/work in/IN/in hsm/NN/hsm includes/VBZ/includes extending/VBG/extending it/PRP/it to/TO/to provide/VB/provide full/JJ/full here/RB/here /,/, data/NNS/data move/VBP/move from/IN/from disk/NN/disk to/TO/to tape/NN/tape and/CC/and back/RB/back to/TO/to disk/VB/disk /,/, as/IN/as needed/VBN/needed /,/, but/CC/but are/VBP/are deleted/VBN/deleted on/IN/on a/DT/a schedule/NN/schedule or/CC/or according/VBG/according to/TO/to policy/NNP/policy. for/IN/for example/NN/example /,/, some/DT/some sites/NNS/sites save/VBP/save e-mail/JJ/e-mail for/IN/for seven/CD/seven years/NNS/years but/CC/but want/JJ/want to/TO/to be/VB/be sure/JJ/sure that/IN/that at/IN/at the/DT/the end/NN/end of/IN/of seven/CD/seven years/NNS/years it/PRP/it is/VBZ/is destroyed/NNP/destroyed. at/IN/at that/DT/that point/NN/point /,/, the/DT/the data/NNS/data might/MD/might be/VB/be on/IN/on disk/NN/disk /,/, hsm/NN/hsm tape/NN/tape /,/, and/CC/and backup/VB/backup tape/NNP/tape. ilm/NN/ilm centralizes/VBZ/centralizes knowledge/NN/knowledge of/IN/of where/WRB/where the/DT/the data/NNS/data are/VBP/are so/RB/so that/IN/that policies/NNS/policies can/MD/can be/VB/be applied/VBN/applied across/IN/across all/DT/all these/DT/these locations/NNS/locations /./. 12.9.3/CD/12.9.3 performance/NN/performance issues/NNS/issues as/RB/as with/IN/with any/DT/any component/NN/component of/IN/of the/DT/the operating/NN/operating system/NN/system /,/, the/DT/the three/CD/three most/JJS/most important/JJ/important aspects/NNS/aspects of/IN/of tertiary-storage/JJ/tertiary-storage performance/NN/performance are/VBP/are speed/VBN/speed /,/, reliability/NN/reliability /,/, and/CC/and cost/VB/cost /./. 12.9.3.1/CD/12.9.3.1 speed/NN/speed the/DT/the speed/NN/speed of/IN/of tertiary/JJ/tertiary storage/NN/storage has/VBZ/has two/CD/two aspects/NNS/aspects /:/: bandwidth/NN/bandwidth and/CC/and latency/NNP/latency. we/PRP/we measure/VBP/measure the/DT/the bandwidth/NN/bandwidth in/IN/in bytes/NNS/bytes per/IN/per second/NNP/second. the/DT/the ~/NNP/~ 'l/NNP/'l '/POS/' is/VBZ/is the/DT/the average/JJ/average data/NNS/data rate/NN/rate during/IN/during a/DT/a transfer-that/JJ/transfer-that is/VBZ/is /,/, the/DT/the number/NN/number of/IN/of bytes/NNS/bytes divided/VBN/divided by/IN/by the/DT/the transfer/NN/transfer time/NNP/time. the/DT/the calculates/NNS/calculates the/DT/the average/JJ/average over/IN/over the/DT/the entire/JJ/entire l/0/-NONE-/l/0 time/NN/time /,/, including/VBG/including the/DT/the time/NN/time for/IN/for seek/NN/seek /:/( /:/) or/CC/or locate/VB/locate /CD/( /CD/) and/CC/and any/DT/any 540/CD/540 chapter/NN/chapter 12/CD/12 cartridge-switching/JJ/cartridge-switching time/NN/time in/IN/in a/DT/a jukebox/NNP/jukebox. in/IN/in essence/NN/essence /,/, the/DT/the sustained/VBN/sustained bandwidth/NN/bandwidth is/VBZ/is the/DT/the rate/NN/rate at/IN/at which/WDT/which the/DT/the data/NNS/data stream/VBP/stream actually/RB/actually flows/VBZ/flows /,/, and/CC/and the/DT/the effective/JJ/effective bandwidth/NN/bandwidth is/VBZ/is the/DT/the overall/JJ/overall data/NNS/data rate/NN/rate provided/VBN/provided by/IN/by the/DT/the drive/NNP/drive. the/DT/the bandwidth/NN/bandwidth of/IN/of a/DT/a drive/JJ/drive is/VBZ/is generally/RB/generally understood/VBN/understood to/TO/to mean/VB/mean the/DT/the sustained/VBN/sustained bandwidth/NN/bandwidth /./. for/IN/for removable/JJ/removable disks/NNS/disks /,/, tlce/NN/tlce bandwidth/NN/bandwidth ranges/NNS/ranges from/IN/from a/DT/a few/JJ/few megabytes/NNS/megabytes per/IN/per second/JJ/second for/IN/for the/DT/the slowest/JJS/slowest to/TO/to over/IN/over 40/CD/40 mb/NN/mb per/IN/per second/JJ/second for/IN/for the/DT/the fastest/NNP/fastest. tapes/VBZ/tapes have/VBP/have a/DT/a similar/JJ/similar range/NN/range of/IN/of bandwidths/NNS/bandwidths /,/, from/IN/from a/DT/a few/JJ/few megabytes/NNS/megabytes per/IN/per second/JJ/second to/TO/to over/IN/over 30mb/CD/30mb per/IN/per second/JJ/second /./. the/DT/the second/JJ/second aspect/NN/aspect of/IN/of speed/NN/speed is/VBZ/is the/DT/the /./. by/IN/by this/DT/this performance/NN/performance measure/NN/measure /,/, disks/VBZ/disks are/VBP/are much/RB/much faster/JJR/faster than/IN/than tapes/NNP/tapes. disk/NN/disk storage/NN/storage is/VBZ/is essentially/RB/essentially twodimensional/JJ/twodimensional- all/DT/all the/DT/the bits/NNS/bits are/VBP/are out/IN/out in/IN/in the/DT/the open/NNP/open. a/DT/a disk/NN/disk access/NN/access simply/RB/simply moves/VBZ/moves the/DT/the ann/NN/ann to/TO/to the/DT/the selected/VBN/selected cylinder/NN/cylinder and/CC/and waits/NNS/waits for/IN/for the/DT/the rotational/JJ/rotational latency/NN/latency /,/, which/WDT/which may/MD/may take/VB/take less/RBR/less than/IN/than 5/CD/5 milliseconds/NNP/milliseconds. by/IN/by contrast/NN/contrast /,/, tape/NN/tape storage/NN/storage is/VBZ/is three-dimensional/JJ/three-dimensional /./. at/IN/at any/DT/any time/NN/time /,/, a/DT/a small/JJ/small portion/NN/portion of/IN/of the/DT/the tape/NN/tape is/VBZ/is accessible/JJ/accessible to/TO/to the/DT/the head/NN/head /,/, whereas/VBZ/whereas most/RBS/most of/IN/of the/DT/the bits/NNS/bits are/VBP/are buried/VBN/buried below/IN/below hundreds/NNS/hundreds or/CC/or thousands/NNS/thousands of/IN/of layers/NNS/layers of/IN/of tape/NN/tape wound/NN/wound on/IN/on the/DT/the reel/NNP/reel. a/DT/a random/NN/random access/NN/access on/IN/on tape/NN/tape requires/VBZ/requires winding/VBG/winding the/DT/the tape/NN/tape reels/NNS/reels until/IN/until the/DT/the selected/VBN/selected block/NN/block reaches/NNS/reaches the/DT/the tape/NN/tape head/NN/head /,/, which/WDT/which can/MD/can take/VB/take tens/NNS/tens or/CC/or hundreds/NNS/hundreds of/IN/of seconds/NNP/seconds. so/RB/so we/PRP/we can/MD/can generally/RB/generally say/VB/say that/IN/that random/NN/random access/NN/access within/IN/within a/DT/a tape/NN/tape cartridge/NN/cartridge is/VBZ/is more/RBR/more than/IN/than a/DT/a thousand/NN/thousand times/VBZ/times slower/JJR/slower than/IN/than random/NN/random access/NN/access on/IN/on disk/NN/disk /./. if/IN/if a/DT/a jukebox/NN/jukebox is/VBZ/is involved/VBN/involved /,/, the/DT/the access/NN/access latency/NN/latency can/MD/can be/VB/be significantly/RB/significantly higher/NNP/higher. for/IN/for a/DT/a removable/JJ/removable disk/NN/disk to/TO/to be/VB/be changed/VBN/changed /,/, the/DT/the drive/JJ/drive must/NN/must stop/NN/stop spinning/VBG/spinning /,/, then/RB/then the/DT/the robotic/JJ/robotic arm/NN/arm must/MD/must switch/VB/switch the/DT/the disk/NN/disk cartridges/NNS/cartridges /,/, and/CC/and then/RB/then the/DT/the drive/JJ/drive must/NN/must spin/NN/spin up/IN/up the/DT/the new/JJ/new cartridge/NNP/cartridge. this/DT/this operation/NN/operation takes/VBZ/takes several/JJ/several seconds-about/JJ/seconds-about a/DT/a hundred/CD/hundred times/NNS/times longer/JJR/longer than/IN/than the/DT/the random-access/JJ/random-access time/NN/time within/IN/within one/CD/one disk/NNP/disk. so/RB/so switching/VBG/switching disks/NNS/disks in/IN/in a/DT/a jukebox/NN/jukebox incurs/NNS/incurs a/DT/a relatively/RB/relatively high/JJ/high performance/NN/performance penalty/NN/penalty /./. for/IN/for tapes/NNS/tapes /,/, the/DT/the robotic-ann/JJ/robotic-ann time/NN/time is/VBZ/is about/IN/about the/DT/the same/JJ/same as/IN/as for/IN/for disks/NNP/disks. but/CC/but for/IN/for tapes/NNS/tapes to/TO/to be/VB/be switched/VBN/switched /,/, the/DT/the old/JJ/old tape/NN/tape generally/RB/generally must/MD/must rewind/VB/rewind before/IN/before it/PRP/it can/MD/can be/VB/be ejected/VBN/ejected /,/, and/CC/and that/IN/that operation/NN/operation can/MD/can take/VB/take as/RB/as long/JJ/long as/IN/as 4/CD/4 minutes/NNP/minutes. and/CC/and /,/, after/IN/after a/DT/a new/JJ/new tape/NN/tape is/VBZ/is loaded/VBN/loaded into/IN/into the/DT/the drive/JJ/drive /,/, many/JJ/many seconds/NNS/seconds can/MD/can be/VB/be required/VBN/required for/IN/for the/DT/the drive/JJ/drive to/TO/to calibrate/VB/calibrate itself/PRP/itself to/TO/to the/DT/the tape/NN/tape and/CC/and to/TO/to prepare/VB/prepare for/IN/for i/0/NNP/i/0. although/IN/although a/DT/a slow/JJ/slow tape/NN/tape jukebox/NN/jukebox can/MD/can have/VB/have a/DT/a tape-switch/JJ/tape-switch time/NN/time of/IN/of 1/CD/1 or/CC/or 2/CD/2 minutes/NNS/minutes /,/, this/DT/this time/NN/time is/VBZ/is not/RB/not enormously/RB/enormously greater/JJR/greater than/IN/than the/DT/the random-access/JJ/random-access time/NN/time within/IN/within one/CD/one tape/NN/tape /./. to/TO/to generalize/VB/generalize /,/, we/PRP/we can/MD/can say/VB/say that/IN/that random/NN/random access/NN/access in/IN/in a/DT/a disk/NN/disk jukebox/NN/jukebox has/VBZ/has a/DT/a latency/NN/latency of/IN/of tens/NNS/tens of/IN/of seconds/NNS/seconds /,/, whereas/IN/whereas random/NN/random access/NN/access in/IN/in a/DT/a tape/NN/tape jukebox/NN/jukebox has/VBZ/has a/DT/a latency/NN/latency of/IN/of hundreds/NNS/hundreds of/IN/of seconds/NNS/seconds ;/:/; switching/VBG/switching tapes/NNS/tapes is/VBZ/is expensive/JJ/expensive /,/, but/CC/but switching/VBG/switching disks/NNS/disks is/VBZ/is not/NNP/not. we/PRP/we must/MD/must be/VB/be careful/JJ/careful not/RB/not to/TO/to overgeneralize/VB/overgeneralize /,/, though/NNP/though. some/DT/some expensive/JJ/expensive tape/NN/tape jukeboxes/NNS/jukeboxes can/MD/can rewind/VB/rewind /,/, eject/VB/eject /,/, load/VB/load a/DT/a new/JJ/new tape/NN/tape /,/, and/CC/and fast-forward/JJ/fast-forward to/TO/to a/DT/a random/NN/random item/NN/item of/IN/of data/NNS/data all/DT/all in/IN/in less/JJR/less than/IN/than 30/CD/30 seconds/NNS/seconds /./. if/IN/if we/PRP/we pay/VBP/pay attention/NN/attention to/TO/to only/RB/only the/DT/the performance/NN/performance of/IN/of the/DT/the drives/NNS/drives in/IN/in a/DT/a jukebox/NN/jukebox /,/, the/DT/the bandwidth/NN/bandwidth and/CC/and latency/NN/latency seem/VBP/seem reasonable/NNP/reasonable. but/CC/but if/IN/if we/PRP/we focus/VBZ/focus our/PRP$/our attention/NN/attention on/IN/on the/DT/the cartridges/NNS/cartridges instead/RB/instead /,/, we/PRP/we find/VBP/find a/DT/a terrible/JJ/terrible bottleneck/NNP/bottleneck. consider/NN/consider first/RB/first the/DT/the bandwidth/NNP/bandwidth. the/DT/the bandwidth-to-storage-capacity/NN/bandwidth-to-storage-capacity ratio/NN/ratio of/IN/of a/DT/a robotic/JJ/robotic library/NN/library is/VBZ/is much/JJ/much less/NN/less favorable/JJ/favorable than/IN/than that/DT/that of/IN/of a/DT/a fixed/VBN/fixed disk/NNP/disk. to/TO/to read/VB/read all/DT/all the/DT/the data/NNS/data stored/VBD/stored on/IN/on a/DT/a large/JJ/large hard/JJ/hard disk/NN/disk could/MD/could take/VB/take about/IN/about an/DT/an hour/NNP/hour. to/TO/to read/VB/read all/DT/all the/DT/the data/NNS/data stored/VBD/stored in/IN/in a/DT/a large/JJ/large tape/NN/tape library/NN/library could/MD/could take/VB/take years/NNP/years. the/DT/the situation/NN/situation with/IN/with respect/NN/respect to/TO/to access/NN/access latency/NN/latency is/VBZ/is nearly/RB/nearly as/IN/as bad/NNP/bad. to/TO/to illustrate/VB/illustrate /,/, if/IN/if 100/CD/100 requests/NNS/requests are/VBP/are queued/VBN/queued for/IN/for a/DT/a disk/NN/disk drive/NN/drive /,/, the/DT/the average/JJ/average waiting/NN/waiting time/NN/time will/MD/will be/VB/be about/IN/about a/DT/a second/NNP/second. if/IN/if 100/CD/100 requests/NNS/requests are/VBP/are queued/VBN/queued for/IN/for a/DT/a tape/NN/tape library/NN/library /,/, the/DT/the average/JJ/average waiting/NN/waiting time/NN/time could/MD/could be/VB/be over/IN/over an/DT/an hour/NNP/hour. the/DT/the low/JJ/low cost/NN/cost of/IN/of tertiary/JJ/tertiary storage/NN/storage results/NNS/results from/IN/from having/VBG/having many/JJ/many cheap/NN/cheap cartridges/NNS/cartridges share/NN/share a/DT/a few/JJ/few expensive/JJ/expensive drives/NNP/drives. but/CC/but a/DT/a removable/JJ/removable library/NN/library is/VBZ/is best/JJS/best devoted/VBN/devoted to/TO/to the/DT/the storage/NN/storage of/IN/of 12.9/CD/12.9 541/CD/541 infrequently/RB/infrequently used/JJ/used data/NNS/data /,/, because/IN/because the/DT/the library/NN/library can/MD/can satisfy/VB/satisfy only/RB/only a/DT/a relatively/RB/relatively small/JJ/small number/NN/number of/IN/of i/0/-NONE-/i/0 requests/VBZ/requests per/IN/per hour/PRP$/hour /./. 12.9.3.2/CD/12.9.3.2 reliability/NN/reliability although/IN/although we/PRP/we often/RB/often think/VBP/think good/JJ/good pe1jormance/NN/pe1jormance means/VBZ/means high/JJ/high speed/NN/speed /,/, another/DT/another important/JJ/important aspect/NN/aspect of/IN/of performance/NN/performance is/VBZ/is reliability/NNP/reliability. if/IN/if we/PRP/we try/VBP/try to/TO/to read/VB/read some/DT/some data/NNS/data and/CC/and are/VBP/are unable/JJ/unable to/TO/to do/VB/do so/RB/so because/IN/because of/IN/of a/DT/a drive/JJ/drive or/CC/or media/NNS/media failure/VBP/failure /,/, for/IN/for all/PDT/all practical/JJ/practical purposes/NNS/purposes the/DT/the access/NN/access time/NN/time is/VBZ/is infinitely/RB/infinitely long/RB/long and/CC/and the/DT/the bandwidth/NN/bandwidth is/VBZ/is infinitely/RB/infinitely small/NNP/small. so/RB/so it/PRP/it is/VBZ/is important/JJ/important to/TO/to understand/VB/understand the/DT/the reliability/NN/reliability of/IN/of removable/JJ/removable media/NNS/media /./. removable/JJ/removable n1.ag/NN/n1.ag /:/: netic/JJ/netic disks/NNS/disks are/VBP/are somewhat/RB/somewhat less/RBR/less reliable/JJ/reliable than/IN/than are/VBP/are fixed/VBN/fixed hard/RB/hard disks/VBZ/disks /,/, because/IN/because they/PRP/they are/VBP/are more/RBR/more likely/JJ/likely to/TO/to be/VB/be exposed/VBN/exposed to/TO/to harmful/JJ/harmful environmental/JJ/environmental conditions/NNS/conditions such/JJ/such as/IN/as dust/JJ/dust /,/, large/JJ/large changes/NNS/changes in/IN/in temperature/NN/temperature and/CC/and humidity/NN/humidity /,/, and/CC/and mechanical/JJ/mechanical forces/NNS/forces such/JJ/such as/IN/as shock/NN/shock and/CC/and bending/NNP/bending. optical/JJ/optical disks/NNS/disks are/VBP/are considered/VBN/considered very/RB/very reliable/JJ/reliable /,/, because/IN/because the/DT/the layer/NN/layer that/IN/that stores/NNS/stores the/DT/the bits/NNS/bits is/VBZ/is protected/VBN/protected by/IN/by a/DT/a transparent/NN/transparent plastic/NN/plastic or/CC/or glass/NN/glass layer/NNP/layer. the/DT/the reliability/NN/reliability of/IN/of magnetic/JJ/magnetic tape/NN/tape varies/NNS/varies widely/RB/widely /,/, depending/VBG/depending on/IN/on the/DT/the kind/NN/kind of/IN/of drive/NNP/drive. some/DT/some inexpensive/JJ/inexpensive drives/NNS/drives wear/VBP/wear out/RP/out tapes/NNS/tapes after/IN/after a/DT/a few/JJ/few dozen/NN/dozen uses/NNS/uses ;/:/; other/JJ/other drives/NNS/drives are/VBP/are gentle/JJ/gentle enough/JJ/enough to/TO/to allow/VB/allow millions/NNS/millions of/IN/of reuses/NNP/reuses. by/IN/by comparison/NN/comparison with/IN/with a/DT/a magnetic-disk/JJ/magnetic-disk head/NN/head /,/, the/DT/the head/NN/head in/IN/in a/DT/a magnetic-tape/NN/magnetic-tape drive/NN/drive is/VBZ/is a/DT/a weak/JJ/weak spot/NN/spot /./. a/DT/a disk/NN/disk head/NN/head flies/NNS/flies above/IN/above the/DT/the media/NNS/media /,/, but/CC/but a/DT/a tape/NN/tape head/NN/head is/VBZ/is in/IN/in close/JJ/close contact/NN/contact with/IN/with the/DT/the tape/NNP/tape. the/DT/the scrubbing/NN/scrubbing action/NN/action of/IN/of the/DT/the tape/NN/tape can/MD/can wear/VB/wear out/RP/out the/DT/the head/NN/head after/IN/after a/DT/a few/JJ/few thousands/NNS/thousands or/CC/or tens/NNS/tens of/IN/of thousands/NNS/thousands of/IN/of hours/NNS/hours /./. in/IN/in summary/NN/summary /,/, we/PRP/we can/MD/can say/VB/say that/IN/that a/DT/a fixed-disk/JJ/fixed-disk drive/JJ/drive is/VBZ/is likely/JJ/likely to/TO/to be/VB/be more/JJR/more reliable/JJ/reliable than/IN/than a/DT/a removable-disk/JJ/removable-disk or/CC/or tape/NN/tape drive/JJ/drive /,/, and/CC/and an/DT/an optical/JJ/optical disk/NN/disk is/VBZ/is likely/JJ/likely to/TO/to be/VB/be more/JJR/more reliable/JJ/reliable than/IN/than a/DT/a magnetic/JJ/magnetic disk/NN/disk or/CC/or tape/NNP/tape. but/CC/but a/DT/a fixed/VBN/fixed magnetic/JJ/magnetic disk/NN/disk has/VBZ/has one/CD/one weakness/NNP/weakness. a/DT/a head/NN/head crash/NN/crash in/IN/in a/DT/a hard/JJ/hard disk/NN/disk generally/RB/generally destroys/VBZ/destroys the/DT/the data/NNS/data /,/, whereas/IN/whereas the/DT/the failure/NN/failure of/IN/of a/DT/a tape/NN/tape drive/NN/drive or/CC/or optical-disk/JJ/optical-disk drive/JJ/drive often/RB/often leaves/VBZ/leaves the/DT/the data/NNS/data cartridge/VBP/cartridge unharmed/VBN/unharmed /./. 12.9.3.3/CD/12.9.3.3 cost/NN/cost storage/NN/storage cost/NN/cost is/VBZ/is another/DT/another important/JJ/important factor/NNP/factor. here/RB/here is/VBZ/is a/DT/a concrete/JJ/concrete example/NN/example of/IN/of how/WRB/how removable/JJ/removable media/NNS/media may/MD/may lower/JJR/lower the/DT/the overall/JJ/overall storage/NN/storage cost/NNP/cost. suppose/NN/suppose that/WDT/that a/DT/a hard/JJ/hard disk/NN/disk that/WDT/that holds/VBZ/holds x/NN/x gb/NN/gb has/VBZ/has a/DT/a price/NN/price of/IN/of $/$/$ 200/CD/200 ;/:/; of/IN/of this/DT/this amom1.t/JJ/amom1.t /,/, $/$/$ 190/CD/190 is/VBZ/is for/IN/for the/DT/the housing/NN/housing /,/, motor/NN/motor /,/, and/CC/and controller/NN/controller /,/, and/CC/and $/$/$ 10/CD/10 is/VBZ/is for/IN/for the/DT/the magnetic/JJ/magnetic platters/NNP/platters. the/DT/the storage/NN/storage cost/NN/cost for/IN/for this/DT/this disk/NN/disk is/VBZ/is $/$/$ 200//CD/200/ x/CD/x per/IN/per gigabyte/NNP/gigabyte. now/RB/now /,/, suppose/VBP/suppose that/IN/that we/PRP/we can/MD/can manufacture/VB/manufacture the/DT/the platters/NNS/platters in/IN/in a/DT/a removable/JJ/removable cartridge/NNP/cartridge. for/IN/for one/CD/one drive/JJ/drive and/CC/and 10/CD/10 cartridges/NNS/cartridges /,/, the/DT/the total/JJ/total price/NN/price is/VBZ/is $/$/$ 190/CD/190 +/CD/+ $/$/$ 100/CD/100 /,/, and/CC/and the/DT/the capacity/NN/capacity is/VBZ/is lox/NN/lox gb/NN/gb /,/, so/RB/so the/DT/the storage/NN/storage cost/NN/cost is/VBZ/is $/$/$ 291/CD/291 x/CD/x per/IN/per gigabyte/NNP/gigabyte. even/RB/even if/IN/if it/PRP/it is/VBZ/is a/DT/a little/RB/little more/RBR/more expensive/JJ/expensive to/TO/to make/VB/make a/DT/a removable/JJ/removable cartridge/NN/cartridge /,/, the/DT/the cost/NN/cost per/IN/per gigabyte/NN/gigabyte of/IN/of removable/JJ/removable storage/NN/storage may/MD/may well/RB/well be/VB/be lower/JJR/lower than/IN/than the/DT/the cost/NN/cost per/IN/per gigabyte/NN/gigabyte of/IN/of a/DT/a hard/JJ/hard disk/NN/disk /,/, because/IN/because the/DT/the expense/NN/expense of/IN/of one/CD/one drive/JJ/drive is/VBZ/is averaged/VBN/averaged with/IN/with the/DT/the low/JJ/low price/NN/price of/IN/of many/JJ/many removable/JJ/removable cartridges/NNS/cartridges /./. figures/NNS/figures 12.15/CD/12.15 /,/, 12.16/CD/12.16 /,/, and/CC/and 12.17/CD/12.17 show/NN/show cost/NN/cost trends/NNS/trends per/IN/per megabyte/JJ/megabyte for/IN/for dram/NN/dram memory/NN/memory /,/, magnetic/JJ/magnetic hard/JJ/hard disks/NNS/disks /,/, and/CC/and tape/NN/tape drives/NNP/drives. the/DT/the prices/NNS/prices in/IN/in the/DT/the graphs/NNS/graphs are/VBP/are the/DT/the lowest/JJS/lowest prices/NNS/prices found/VBD/found in/IN/in advertisements/NNS/advertisements in/IN/in various/JJ/various computer/NN/computer magazines/NNS/magazines and/CC/and on/IN/on the/DT/the world/NN/world wide/NN/wide web/NN/web at/IN/at the/DT/the end/NN/end of/IN/of each/DT/each year/NNP/year. these/DT/these prices/NNS/prices reflect/VBP/reflect the/DT/the smallcomputer/NN/smallcomputer marketplace/NN/marketplace of/IN/of the/DT/the readership/NN/readership of/IN/of these/DT/these magazines/NNS/magazines /,/, where/WRB/where prices/NNS/prices are/VBP/are low/JJ/low by/IN/by comparison/NN/comparison with/IN/with the/DT/the mainframe/NN/mainframe and/CC/and minicomputer/NN/minicomputer markets/NNP/markets. in/IN/in the/DT/the case/NN/case of/IN/of tape/NN/tape /,/, the/DT/the price/NN/price is/VBZ/is for/IN/for a/DT/a drive/JJ/drive with/IN/with one/CD/one tape/NNP/tape. the/DT/the overall/JJ/overall cost/NN/cost of/IN/of tape/NN/tape storage/NN/storage becomes/VBZ/becomes much/JJ/much lower/JJR/lower as/IN/as more/JJR/more tapes/NNS/tapes are/VBP/are purchased/VBN/purchased for/IN/for use/NN/use with/IN/with the/DT/the drive/JJ/drive /,/, 542/CD/542 chapter/NN/chapter 12/CD/12 co/NN/co /:/: /:/: ;/:/; ;/:/; ;/:/; &/CC/& /:/: 5/CD/5- 160/CD/160 80/CD/80 40/CD/40 20/CD/20 10/CD/10 1.2/CD/1.2 0.8/CD/0.8 0.4/CD/0.4 64/CD/64 kb/NN/kb 32/CD/32 128mb/CD/128mb 512mb/CD/512mb 2gb/CD/2gb 0/-NONE-/0 02/CD/02 --'-c-19/-NONE-/--'-c-19 =/:/= '/''/' /:/: ,8.,.-2/-NONE-/,8.,.-2 -1/-NONE-/-1- 98-cc4/CD/98-cc4-- /:/: -19/-NONE-/-19 =/:/= '/''/' /:/: c8/JJ/c8- =/NN/= -6/-NONE-/-6 -1/-NONE-/-1 ~/:/~ 9/CD/9 '/''/' /:/: /:/: /:/- /:/: 88---,19/CD/88---,19 =/CD/= '/POS/' /:/: c9/NN/c9- =/:/= -o/JJ/-o -1c/NN/-1c- /:/: '91/-NONE-/'91 '/''/' /:/: /:/: /:/- /:/: 92/CD/92-- /:/: 1/CD/1 c/NN/c /:/: '/''/' /:/: 99-4/CD/99-4 -c/JJ/-c /:/: c19l96---,19c/JJ/c19l96---,19c /:/: '/''/' /:/: 9/CD/9- =/CD/= -8/-NONE-/-8 -2.,-,o/-NONE-/-2.,-,o '/''/' /:/: /:/: /:/- /:/: oo/JJ/oo-- /:/: 2c/JJ/2c /:/: '/''/' /:/: oo/JJ/oo- =/NN/= -2/-NONE-/-2 -2/-NONE-/-2 /:/: /:/: /:/- /:/: /:/: 0l.04/CD/0l.04 /:/: /:/-- /:/: /:/: 2c/CD/2c /:/: '/''/' /:/: oo/JJ/oo- =/NN/= -6/-NONE-/-6 /:/- /:/: '2oos/NNS/'2oos year/NN/year figure/NN/figure 12/CD/12. 15/CD/15 price/NN/price per/IN/per megabyte/NN/megabyte of/IN/of dram/NN/dram /,/, from/IN/from 1981/CD/1981 to/TO/to 2008/CD/2008 /./. because/IN/because the/DT/the price/NN/price of/IN/of a/DT/a tape/NN/tape is/VBZ/is a/DT/a small/JJ/small fraction/NN/fraction of/IN/of the/DT/the price/NN/price of/IN/of the/DT/the drive/NNP/drive. however/RB/however /,/, in/IN/in a/DT/a huge/JJ/huge tape/NN/tape library/NN/library containing/VBG/containing thousands/NNS/thousands of/IN/of cartridges/NNS/cartridges /,/, the/DT/the storage/NN/storage cost/NN/cost is/VBZ/is dominated/VBN/dominated by/IN/by the/DT/the cost/NN/cost of/IN/of the/DT/the tape/NN/tape cartridges/NNP/cartridges. as/IN/as of/IN/of 2004/CD/2004 /,/, the/DT/the cost/NN/cost per/IN/per gb/NN/gb of/IN/of tape/NN/tape cartridges/NNS/cartridges was/VBD/was around/IN/around $/$/$ .40/CD/.40 /./. as/IN/as figure/NN/figure 12.15/CD/12.15 shows/NNS/shows /,/, the/DT/the cost/NN/cost of/IN/of dram/NN/dram fluctuates/NNS/fluctuates widely/NNP/widely. in/IN/in the/DT/the period/NN/period from/IN/from 1981/CD/1981 to/TO/to 2004/CD/2004 /,/, we/PRP/we can/MD/can see/VB/see three/CD/three price/NN/price crashes/NNS/crashes /VBP/( around/IN/around 1981/CD/1981 /,/, 1989/CD/1989 /,/, and/CC/and 1996/CD/1996 /CD/) as/IN/as excess/JJ/excess production/NN/production caused/VBD/caused a/DT/a glut/NN/glut in/IN/in the/DT/the marketplace/NNP/marketplace. we/PRP/we can/MD/can also/RB/also see/VB/see two/CD/two periods/NNS/periods /:/( around/IN/around 1987/CD/1987 and/CC/and 1993/CD/1993 /CD/) where/WRB/where shortages/NNS/shortages in/IN/in the/DT/the marketplace/NN/marketplace caused/VBD/caused sigrtificant/JJ/sigrtificant price/NN/price increases/NNP/increases. in/IN/in the/DT/the case/NN/case of/IN/of hard/JJ/hard disks/NNS/disks /:/( figure/NN/figure 12.16/CD/12.16 /CD/) /,/, the/DT/the price/NN/price decline/NN/decline has/VBZ/has been/VBN/been steadier/NNP/steadier. tape-drive/JJ/tape-drive prices/NNS/prices also/RB/also fell/VBD/fell steadily/RB/steadily up/IN/up to/TO/to 1997/CD/1997 /CD/( figure/NN/figure 12.17/CD/12.17 /CD/) /./. since/IN/since 1997/CD/1997 /,/, the/DT/the price/NN/price per/IN/per gigabyte/NN/gigabyte of/IN/of inexpensive/JJ/inexpensive tape/NN/tape drives/NNS/drives has/VBZ/has ceased/VBN/ceased its/PRP$/its dramatic/JJ/dramatic fall/NN/fall /,/, although/IN/although the/DT/the price/NN/price of/IN/of mid-range/JJ/mid-range tape/NN/tape technology/NN/technology /:/( such/JJ/such as/IN/as dat/JJ/dat /dds/NNS//dds /:/) has/VBZ/has continued/VBN/continued to/TO/to fall/VB/fall and/CC/and is/VBZ/is now/RB/now approaching/VBG/approaching that/IN/that of/IN/of the/DT/the co/NN/co /:/: /:/: ;/:/; ;/:/; ;/:/; '/''/' 100/CD/100 50/CD/50 20/CD/20 5/CD/5 2/CD/2 0.5/CD/0.5 0.2/CD/0.2 0.05/CD/0.05 0.02/CD/0.02- 0.004/CD/0.004 0.001/CD/0.001 0.0005/CD/0.0005 0.0002/CD/0.0002 10/CD/10 20/CD/20 1982/CD/1982 1984/CD/1984 1986/CD/1986 120/CD/120 1.2/CD/1.2 2/CD/2 1988/CD/1988 1990/CD/1990 1992/CD/1992 19/CD/19 gb/NN/gb gb/NN/gb gb/NN/gb 1994/CD/1994 1996/CD/1996 1998/CD/1998 2000/CD/2000 2002/CD/2002 2004/CD/2004 2006/CD/2006 2008/CD/2008 year/NN/year figure/NN/figure 12.16/CD/12.16 price/NN/price per/IN/per megabyte/NN/megabyte of/IN/of magnetic/JJ/magnetic hard/JJ/hard disk/NN/disk /,/, from/IN/from 1981/CD/1981 to/TO/to 2008/CD/2008 /./. 12.10/CD/12.10 oj/NN/oj ~/:/~ 12.10/CD/12.10 40/CD/40 20/CD/20 8/CD/8- 60/CD/60 120/CD/120 1.2/CD/1.2 0.5/CD/0.5- 0.1/CD/0.1 72gb/CD/72gb 0.025/CD/0.025 320gb/CD/320gb 0.01/CD/0.01 320gb/CD/320gb 0.0051/CD/0.0051 ~/CD/~ 9c-c84-1/CD/9c-c84-1- /:/: l98/JJ/l98- /:/: -6/-NONE-/-6 -19/-NONE-/-19 /:/: '/''/' /:/: -88c---cc19/-NONE-/-88c---cc19 ~/:/~ 90c/CD/90c--- /:/: c19/NNP/c19 ~/:/~ 92/CD/92 /:/: --c-c19l94-c-c19l96,---.,-c19'cc98-2,-jooc-c0--c2,-j.00,-,-2/JJ/--c-c19l94-c-c19l96,---.,-c19'cc98-2,-jooc-c0--c2,-j.00,-,-2-- /:/: ~/:/~ /:/-- /:/: .,j/JJ/.,j =/NN/= ~/:/~ 2008/CD/2008 year/NN/year figure/NN/figure 12.17/CD/12.17 price/NN/price per/IN/per megabyte/NN/megabyte of/IN/of a/DT/a tape/NN/tape drive/NN/drive /,/, from/IN/from 1984/CD/1984 to/TO/to 2008/CD/2008 /./. 543/CD/543 in.expensive/JJ/in.expensive drives/NNP/drives. tape-drive/JJ/tape-drive prices/NNS/prices are/VBP/are not/RB/not shown/VBN/shown for/IN/for years/NNS/years prior/RB/prior to/TO/to 1984/CD/1984 /,/, because/IN/because /,/, as/IN/as mentioned/VBN/mentioned /,/, the/DT/the magazines/NNS/magazines used/VBN/used in/IN/in tracking/NN/tracking prices/NNS/prices are/VBP/are targeted/VBN/targeted to/TO/to the/DT/the small-computer/JJ/small-computer marketplace/NN/marketplace /,/, and/CC/and tape/NN/tape drives/NNS/drives were/VBD/were not/RB/not widely/RB/widely used/JJ/used with/IN/with small/JJ/small computers/NNS/computers prior/RB/prior to/TO/to 1984/CD/1984 /./. we/PRP/we can/MD/can see/VB/see from/IN/from these/DT/these graphs/NNS/graphs that/WDT/that the/DT/the cost/NN/cost of/IN/of storage/NN/storage has/VBZ/has fallen/VBN/fallen dramatically/RB/dramatically /./. by/IN/by comparing/NN/comparing the/DT/the graphs/NNS/graphs /,/, we/PRP/we can/MD/can also/RB/also see/VB/see that/IN/that the/DT/the price/NN/price of/IN/of disk/NN/disk storage/NN/storage has/VBZ/has plummeted/VBN/plummeted relative/JJ/relative to/TO/to the/DT/the price/NN/price of/IN/of dram/NN/dram and/CC/and tape/NN/tape /./. the/DT/the price/NN/price per/IN/per megabyte/NN/megabyte of/IN/of magnetic/JJ/magnetic disk/NN/disk storage/NN/storage improved/VBN/improved by/IN/by more/RBR/more than/IN/than four/CD/four orders/NNS/orders of/IN/of magnitude/NN/magnitude from/IN/from 1981/CD/1981 to/TO/to 2004/CD/2004 /,/, whereas/IN/whereas the/DT/the corresponding/NN/corresponding improvement/NN/improvement for/IN/for main/JJ/main memory/NN/memory was/VBD/was only/RB/only three/CD/three orders/NNS/orders of/IN/of magnitude/NNP/magnitude. main/NN/main memory/NN/memory today/NN/today is/VBZ/is more/RBR/more expensive/JJ/expensive than/IN/than disk/NN/disk storage/NN/storage by/IN/by a/DT/a factor/NN/factor of/IN/of 100/CD/100 /./. the/DT/the price/NN/price per/IN/per megabyte/NN/megabyte dropped/VBD/dropped much/RB/much more/RBR/more rapidly/RB/rapidly for/IN/for disk/NN/disk drives/NNS/drives than/IN/than for/IN/for tape/NN/tape drives/NNS/drives as/IN/as well/NNP/well. in/NNP/in. fact/NN/fact /,/, the/DT/the price/NN/price per/IN/per megabyte/NN/megabyte of/IN/of a/DT/a magnetic/JJ/magnetic disk/NN/disk drive/JJ/drive is/VBZ/is approaching/VBG/approaching that/IN/that of/IN/of a/DT/a tape/NN/tape cartridge/NN/cartridge without/IN/without the/DT/the tape/NN/tape drive/NNP/drive. consequently/RB/consequently /,/, small/NNP/small- and/CC/and medium-sized/JJ/medium-sized tape/NN/tape libraries/NNS/libraries have/VBP/have a/DT/a higher/JJR/higher storage/NN/storage cost/NN/cost than/IN/than disk/NN/disk systems/NNS/systems with/IN/with equivalent/NN/equivalent capacity/NN/capacity /./. the/DT/the dramatic/JJ/dramatic fall/NN/fall in/IN/in disk/NN/disk prices/NNS/prices has/VBZ/has largely/RB/largely rendered/VBN/rendered tertiary/JJ/tertiary storage/NN/storage obsolete/NNP/obsolete. we/PRP/we no/DT/no longer/NN/longer have/VBP/have any/DT/any tertiary/JJ/tertiary storage/NN/storage technology/NN/technology that/IN/that is/VBZ/is orders/NNS/orders of/IN/of magnitude/NN/magnitude less/RBR/less expensive/JJ/expensive than/IN/than magnetic/JJ/magnetic disk/NNP/disk. it/PRP/it appears/VBZ/appears that/IN/that the/DT/the revival/NN/revival of/IN/of tertiary/JJ/tertiary storage/NN/storage must/MD/must await/VB/await a/DT/a revolutionary/JJ/revolutionary technology/NN/technology breakthrough/IN/breakthrough /./. meanwhile/RB/meanwhile /,/, tape/NN/tape storage/NN/storage will/MD/will find/VB/find its/PRP$/its use/NN/use mostly/RB/mostly limited/VBN/limited to/TO/to purposes/NNS/purposes such/JJ/such as/IN/as backups/NNS/backups of/IN/of disk/NN/disk drives/NNS/drives and/CC/and archival/NN/archival storage/NN/storage in/IN/in enormous/JJ/enormous tape/NN/tape libraries/NNS/libraries that/WDT/that greatly/RB/greatly exceed/VBD/exceed the/DT/the practical/JJ/practical storage/NN/storage capacity/NN/capacity of/IN/of large/JJ/large disk/NN/disk farms/NNS/farms /./. disk/NN/disk drives/NNS/drives are/VBP/are the/DT/the major/JJ/major secondary-storage/NN/secondary-storage i/0/-NONE-/i/0 devices/NNS/devices on/IN/on most/JJS/most computers/NNS/computers /./. most/JJS/most secondary/JJ/secondary storage/NN/storage devices/NNS/devices are/VBP/are either/RB/either magnetic/JJ/magnetic disks/NNS/disks or/CC/or n1.agnetic/JJ/n1.agnetic tapes/NNS/tapes /./. modern/JJ/modern disk/NN/disk drives/NNS/drives are/VBP/are structured/VBN/structured as/IN/as large/JJ/large one-dimensional/JJ/one-dimensional arrays/NNS/arrays of/IN/of logical/JJ/logical disk/NN/disk blocks/NNP/blocks. generally/RB/generally /,/, these/DT/these logical/JJ/logical blocks/NNS/blocks are/VBP/are 512/CD/512 bytes/NNS/bytes in/IN/in size/NNP/size. disks/NNS/disks may/MD/may be/VB/be attached/VBN/attached to/TO/to a/DT/a computer/NN/computer system/NN/system in/IN/in one/CD/one of/IN/of two/CD/two ways/NNS/ways /:/: /:/( 1/CD/1 /CD/) through/IN/through the/DT/the local/JJ/local i/0/-NONE-/i/0 ports/NNS/ports on/IN/on the/DT/the host/NN/host computer/NN/computer or/CC/or /CD/( 2/CD/2 /CD/) through/IN/through a/DT/a network/NN/network cmmection/NN/cmmection /./. 544/CD/544 chapter/NN/chapter 12/CD/12 requests/NNS/requests for/IN/for disk/NN/disk i/0/-NONE-/i/0 are/VBP/are generated/VBN/generated by/IN/by the/DT/the file/NN/file system/NN/system and/CC/and by/IN/by the/DT/the virtual/JJ/virtual memory/NN/memory system/NNP/system. each/DT/each request/NN/request specifies/NNS/specifies the/DT/the address/NN/address on/IN/on the/DT/the disk/NN/disk to/TO/to be/VB/be referenced/VBN/referenced /,/, in/IN/in the/DT/the form/NN/form of/IN/of a/DT/a logical/JJ/logical block/NN/block number/NNP/number. disk-schedliling/JJ/disk-schedliling algorithms/NNS/algorithms can/MD/can improve/VB/improve the/DT/the effective/JJ/effective bandwidth/NN/bandwidth /,/, the/DT/the average/JJ/average response/NN/response time/NN/time /,/, and/CC/and the/DT/the variance/NN/variance in/IN/in response/NN/response time/NNP/time. algorithms/NNS/algorithms such/JJ/such as/IN/as sstf/NN/sstf /,/, scan/JJ/scan /,/, c-scan/JJ/c-scan /,/, look/NN/look /,/, and/CC/and c-look/JJ/c-look are/VBP/are designed/VBN/designed to/TO/to make/VB/make such/JJ/such improvements/NNS/improvements through/IN/through strategies/NNS/strategies for/IN/for disk-queue/JJ/disk-queue ordering/NN/ordering /./. performance/NN/performance can/MD/can be/VB/be harmed/VBN/harmed by/IN/by external/JJ/external fragmentation/NNP/fragmentation. some/DT/some systems/NNS/systems have/VBP/have utilities/NNS/utilities that/IN/that scan/NN/scan the/DT/the file/NN/file system/NN/system to/TO/to identify/VB/identify fragmented/VBN/fragmented files/NNS/files ;/:/; they/PRP/they then/RB/then move/VB/move blocks/NNS/blocks around/IN/around to/TO/to decrease/VB/decrease the/DT/the fragmentation/NNP/fragmentation. defragmenting/NN/defragmenting a/DT/a badly/RB/badly fragmented/VBN/fragmented file/NN/file system/NN/system can/MD/can significantly/RB/significantly improve/VB/improve performance/NN/performance /,/, but/CC/but the/DT/the systenc/NN/systenc may/MD/may have/VB/have reduced/VBN/reduced performance/NN/performance while/IN/while the/DT/the defragmentation/NN/defragmentation is/VBZ/is in/IN/in progress/NN/progress /./. sophisticated/JJ/sophisticated file/NN/file systems/NNS/systems /,/, such/JJ/such as/IN/as the/DT/the unix/NN/unix fast/NN/fast file/NN/file system/NN/system /,/, incorporate/NN/incorporate many/JJ/many strategies/NNS/strategies to/TO/to control/NN/control fragmentation/NN/fragmentation during/IN/during space/NN/space allocation/NN/allocation so/RB/so that/IN/that disk/NN/disk reorganization/NN/reorganization is/VBZ/is not/RB/not needed/VBN/needed /./. the/DT/the operating/NN/operating system/NN/system manages/NNS/manages the/DT/the disk/NN/disk blocks/NNP/blocks. first/RB/first /,/, a/DT/a disk/NN/disk must/MD/must be/VB/be lowlevel/-NONE-/lowlevel- formatted/VBN/formatted to/TO/to create/VB/create the/DT/the sectors/NNS/sectors on/IN/on the/DT/the raw/NN/raw hardware-new/JJ/hardware-new disks/NNS/disks usually/RB/usually come/VBP/come preformatted/NNP/preformatted. then/RB/then /,/, the/DT/the disk/NN/disk is/VBZ/is partitioned/VBN/partitioned /,/, file/JJ/file systems/NNS/systems are/VBP/are created/VBN/created /,/, and/CC/and boot/NN/boot blocks/NNS/blocks are/VBP/are allocated/VBN/allocated to/TO/to store/VB/store the/DT/the system/NN/system 's/POS/'s bootstrap/NN/bootstrap program/NNP/program. finally/RB/finally /,/, when/WRB/when a/DT/a block/NN/block is/VBZ/is corrupted/VBN/corrupted /,/, the/DT/the system/NN/system must/MD/must have/VB/have a/DT/a way/NN/way to/TO/to lock/VB/lock out/RP/out that/IN/that block/NN/block or/CC/or to/TO/to replace/VB/replace it/PRP/it logically/RB/logically with/IN/with a/DT/a spare/NN/spare /./. because/IN/because an/DT/an efficient/JJ/efficient swap/NN/swap space/NN/space is/VBZ/is a/DT/a key/JJ/key to/TO/to good/JJ/good performance/NN/performance /,/, systems/NNS/systems usually/RB/usually bypass/VBP/bypass the/DT/the file/NN/file system/NN/system and/CC/and use/VBP/use raw/NN/raw disk/NN/disk access/NN/access for/IN/for paging/NN/paging i/0/NNP/i/0. some/DT/some systems/NNS/systems dedicate/VBP/dedicate a/DT/a raw/NN/raw disk/NN/disk partition/NN/partition to/TO/to swap/VB/swap space/NN/space /,/, and/CC/and others/NNS/others use/VBP/use a/DT/a file/NN/file within/IN/within the/DT/the file/NN/file system/NN/system instead/NNP/instead. still/RB/still other/JJ/other systems/NNS/systems allow/VBP/allow the/DT/the user/NN/user or/CC/or system/NN/system administrator/NN/administrator to/TO/to make/VB/make the/DT/the decision/NN/decision by/IN/by providing/NN/providing both/DT/both options/NNS/options /./. because/IN/because of/IN/of the/DT/the amount/NN/amount of/IN/of storage/NN/storage required/VBN/required on/IN/on large/JJ/large systems/NNS/systems /,/, disks/NNS/disks are/VBP/are frequently/RB/frequently made/VBN/made redundant/JJ/redundant via/IN/via raid/JJ/raid algorithms/NNP/algorithms. these/DT/these algorithms/NNS/algorithms allow/VBP/allow more/JJR/more than/IN/than one/CD/one disk/NN/disk to/TO/to be/VB/be used/VBN/used for/IN/for a/DT/a given/VBN/given operation/NN/operation and/CC/and allow/VBP/allow continued/VBN/continued operation/NN/operation and/CC/and even/RB/even automatic/JJ/automatic recovery/NN/recovery in/IN/in the/DT/the face/NN/face of/IN/of a/DT/a disk/NN/disk failure/NNP/failure. raid/VBD/raid algorithms/NNS/algorithms are/VBP/are organized/VBN/organized into/IN/into different/JJ/different levels/NNS/levels ;/:/; each/DT/each level/NN/level provides/VBZ/provides some/DT/some combination/NN/combination of/IN/of reliability/NN/reliability and/CC/and high/JJ/high transfer/NN/transfer rates/NNS/rates /./. the/DT/the write-ahead/JJ/write-ahead log/NN/log scheme/NN/scheme requires/VBZ/requires the/DT/the availability/NN/availability of/IN/of stable/JJ/stable storage/NN/storage /./. to/TO/to implement/VB/implement such/JJ/such storage/NN/storage /,/, we/PRP/we need/VBP/need to/TO/to replicate/VB/replicate the/DT/the needed/VBN/needed information/NN/information on/IN/on multiple/NN/multiple nonvolatile/NN/nonvolatile storage/NN/storage devices/NNS/devices /:/( usually/RB/usually disks/VBZ/disks /:/) with/IN/with independent/JJ/independent failure/NN/failure modes/NNP/modes. we/PRP/we also/RB/also need/VBP/need to/TO/to update/VB/update the/DT/the information/NN/information in/IN/in a/DT/a controlled/JJ/controlled manner/NN/manner to/TO/to ensure/VB/ensure that/IN/that we/PRP/we can/MD/can recover/VB/recover the/DT/the stable/NN/stable data/NNS/data after/IN/after any/DT/any failure/NN/failure during/IN/during data/NNS/data transfer/VBP/transfer or/CC/or recovery/NN/recovery /./. tertiary/JJ/tertiary storage/NN/storage is/VBZ/is built/VBN/built from/IN/from disk/NN/disk and/CC/and tape/NN/tape drives/NNS/drives that/WDT/that use/NN/use removable/VBP/removable media/NNP/media. many/JJ/many different/JJ/different technologies/NNS/technologies are/VBP/are available/JJ/available /,/, including/VBG/including magnetic/JJ/magnetic tape/NN/tape /,/, removable/JJ/removable magnetic/JJ/magnetic and/CC/and magneto-optic/JJ/magneto-optic disks/NNS/disks /,/, and/CC/and optical/JJ/optical disks/NNS/disks /./. for/IN/for removable/JJ/removable disks/NNS/disks /,/, the/DT/the operating/NN/operating system/NN/system generally/RB/generally provides/VBZ/provides the/DT/the full/JJ/full services/NNS/services of/IN/of a/DT/a file-system/JJ/file-system interface/NN/interface /,/, including/VBG/including space/NN/space management/NN/management and/CC/and requestqueue/VB/requestqueue scheduling/NNP/scheduling. for/IN/for many/JJ/many operating/VBG/operating systems/NNS/systems /,/, the/DT/the name/NN/name of/IN/of a/DT/a file/NN/file on/IN/on a/DT/a removable/JJ/removable cartridge/NN/cartridge is/VBZ/is a/DT/a combination/NN/combination of/IN/of a/DT/a drive/JJ/drive name/NN/name and/CC/and a/DT/a file/NN/file name/NN/name within/IN/within that/DT/that drive/NNP/drive. this/DT/this convention/NN/convention is/VBZ/is simpler/JJR/simpler but/CC/but potentially/RB/potentially more/RBR/more confusing/VBG/confusing than/IN/than is/VBZ/is using/VBG/using a/DT/a name/NN/name that/WDT/that identifies/VBZ/identifies a/DT/a specific/JJ/specific cartridge/NN/cartridge /./. for/IN/for tapes/NNS/tapes /,/, the/DT/the operating/NN/operating system/NN/system generally/RB/generally provides/VBZ/provides only/RB/only a/DT/a raw/JJ/raw interface/NN/interface /./. many/JJ/many operating/NN/operating systems/NNS/systems have/VBP/have no/DT/no built-in/JJ/built-in support/NN/support for/IN/for jukeboxes/NNP/jukeboxes. jukebox/NN/jukebox 545/CD/545 support/NN/support can/MD/can be/VB/be provided/VBN/provided by/IN/by a/DT/a device/NN/device driver/NN/driver or/CC/or by/IN/by a/DT/a privileged/JJ/privileged application/NN/application designed/VBN/designed for/IN/for backups/NNS/backups or/CC/or for/IN/for hsm/NN/hsm /./. three/CD/three important/JJ/important aspects/NNS/aspects of/IN/of performance/NN/performance are/VBP/are bandwidth/JJ/bandwidth /,/, latency/NN/latency /,/, and/CC/and reliability/NNP/reliability. many/JJ/many bandwidths/NNS/bandwidths are/VBP/are available/JJ/available for/IN/for both/DT/both disks/NNS/disks and/CC/and tapes/NNS/tapes /,/, but/CC/but the/DT/the random-access/JJ/random-access latency/NN/latency for/IN/for a/DT/a tape/NN/tape is/VBZ/is generally/RB/generally much/JJ/much greater/NN/greater than/IN/than that/DT/that for/IN/for a/DT/a disk/NN/disk /./. switching/VBG/switching cartridges/NNS/cartridges in/IN/in a/DT/a jukebox/NN/jukebox is/VBZ/is also/RB/also relatively/RB/relatively slow/NNP/slow. because/IN/because a/DT/a jukebox/NN/jukebox has/VBZ/has a/DT/a low/JJ/low ratio/NN/ratio of/IN/of drives/NNS/drives to/TO/to cartridges/NNS/cartridges /,/, reading/NN/reading a/DT/a large/JJ/large fraction/NN/fraction of/IN/of the/DT/the data/NNS/data in/IN/in a/DT/a jukebox/NN/jukebox can/MD/can take/VB/take a/DT/a long/JJ/long time/NNP/time. optical/JJ/optical media/NNS/media /,/, which/WDT/which protect/NN/protect the/DT/the sensitive/JJ/sensitive layer/NN/layer with/IN/with a/DT/a transparent/NN/transparent coating/VBG/coating /,/, are/VBP/are generally/RB/generally more/RBR/more robust/JJ/robust than/IN/than magnetic/JJ/magnetic media/NNS/media /,/, which/WDT/which are/VBP/are more/RBR/more likely/JJ/likely to/TO/to expose/VB/expose the/DT/the magnetic/JJ/magnetic material/NN/material to/TO/to physical/JJ/physical damage/NN/damage /./. lastly/RB/lastly /,/, the/DT/the cost/NN/cost of/IN/of storage/NN/storage has/VBZ/has decreased/VBN/decreased greatly/RB/greatly in/IN/in the/DT/the past/JJ/past two/CD/two decades/NNS/decades /,/, most/JJS/most notably/RB/notably for/IN/for disk/NN/disk storage/NN/storage /./. 12.1/CD/12.1 what/WP/what would/MD/would be/VB/be the/DT/the effects/NNS/effects on/IN/on cost/NN/cost and/CC/and performance/NN/performance if/IN/if tape/NN/tape storage/NN/storage had/VBD/had the/DT/the same/JJ/same areal/NN/areal density/NN/density as/IN/as disk/NN/disk storage/NN/storage /:/( areal/NN/areal density/NN/density is/VBZ/is the/DT/the number/NN/number of/IN/of gigabits/NNS/gigabits per/IN/per square/JJ/square inch/NNP/inch. /NNP/) 12.2/CD/12.2 it/PRP/it is/VBZ/is sometimes/RB/sometimes said/VBD/said that/IN/that tape/NN/tape is/VBZ/is a/DT/a sequential-access/JJ/sequential-access medium/NN/medium /,/, whereas/VBZ/whereas a/DT/a magnetic/JJ/magnetic disk/NN/disk is/VBZ/is a/DT/a random-access/JJ/random-access medium/NNP/medium. in/IN/in fact/NN/fact the/DT/the suitability/NN/suitability of/IN/of a/DT/a storage/NN/storage device/NN/device for/IN/for random/NN/random access/NN/access depends/NNS/depends on/IN/on the/DT/the transfer/NN/transfer size/NN/size /./. the/DT/the term/NN/term streaming/VBG/streaming transfer/NN/transfer rate/NN/rate denotes/VBZ/denotes the/DT/the rate/NN/rate for/IN/for a/DT/a data/NN/data transfer/NN/transfer that/WDT/that is/VBZ/is underway/RB/underway /,/, excluding/VBG/excluding the/DT/the effect/NN/effect of/IN/of access/NN/access latency/NNP/latency. by/IN/by contrast/NN/contrast /,/, the/DT/the effective/JJ/effective transfer/NN/transfer rate/NN/rate is/VBZ/is the/DT/the ratio/NN/ratio of/IN/of total/JJ/total bytes/NNS/bytes per/IN/per total/JJ/total seconds/NNS/seconds /,/, including/VBG/including overhead/NN/overhead time/NN/time such/JJ/such as/IN/as access/NN/access latency/NN/latency /./. suppose/NN/suppose that/IN/that /,/, in/IN/in a/DT/a computer/NN/computer /,/, the/DT/the level-2/-NONE-/level-2 cache/PRP/cache has/VBZ/has an/DT/an access/NN/access latency/NN/latency of/IN/of 8/CD/8 nanoseconds/NNS/nanoseconds and/CC/and a/DT/a streaming/NN/streaming transfer/NN/transfer rate/NN/rate of/IN/of 800/CD/800 megabytes/NNS/megabytes per/IN/per second/JJ/second /,/, the/DT/the main/JJ/main memory/NN/memory has/VBZ/has an/DT/an access/NN/access latency/NN/latency of/IN/of 60/CD/60 nanoseconds/NNS/nanoseconds and/CC/and a/DT/a streaming/NN/streaming transfer/NN/transfer rate/NN/rate of/IN/of 80/CD/80 megabytes/NNS/megabytes per/IN/per second/JJ/second /,/, the/DT/the magnetic/JJ/magnetic disk/NN/disk has/VBZ/has an/DT/an access/NN/access latency/NN/latency of/IN/of 15/CD/15 milliseconds/NNS/milliseconds and/CC/and a/DT/a streaming/NN/streaming transfer/NN/transfer rate/NN/rate of/IN/of 5/CD/5 megabytes/NNS/megabytes per/IN/per second/JJ/second /,/, and/CC/and a/DT/a tape/NN/tape drive/NN/drive has/VBZ/has an/DT/an access/NN/access latency/NN/latency of/IN/of 60/CD/60 seconds/NNS/seconds and/CC/and a/DT/a streaming/NN/streaming transfer/NN/transfer rate/NN/rate of/IN/of 2/CD/2 megabytes/NNS/megabytes per/IN/per seconds/NNS/seconds /./. a/NNP/a. random/NN/random access/NN/access causes/NNS/causes the/DT/the effective/JJ/effective transfer/NN/transfer rate/NN/rate of/IN/of a/DT/a device/NN/device to/TO/to decrease/VB/decrease /,/, because/IN/because no/DT/no data/NN/data are/VBP/are transferred/VBN/transferred during/IN/during the/DT/the access/NN/access time/NN/time /./. for/IN/for the/DT/the disk/NN/disk described/VBD/described /,/, what/WP/what is/VBZ/is the/DT/the effective/JJ/effective transfer/NN/transfer rate/NN/rate if/IN/if an/DT/an average/JJ/average access/NN/access is/VBZ/is followed/VBN/followed by/IN/by a/DT/a streaming/NN/streaming transfer/NN/transfer of/IN/of /NNP/( 1/CD/1 /CD/) 512/CD/512 bytes/NNS/bytes /,/, /:/( 2/CD/2 /CD/) 8/CD/8 kilobytes/NNS/kilobytes /,/, /:/( 3/LS/3 /:/) 1/CD/1 megabyte/NN/megabyte /,/, and/CC/and /:/( 4/CD/4 /CD/) 16/CD/16 megabytes/NNS/megabytes b/NNP/b. the/DT/the utilization/NN/utilization of/IN/of a/DT/a device/NN/device is/VBZ/is the/DT/the ratio/NN/ratio of/IN/of effective/JJ/effective transfer/NN/transfer rate/NN/rate to/TO/to streaming/VBG/streaming transfer/NN/transfer rate/NNP/rate. calculate/NN/calculate the/DT/the utilization/NN/utilization of/IN/of the/DT/the disk/NN/disk drive/VBP/drive for/IN/for each/DT/each of/IN/of the/DT/the four/CD/four transfer/NN/transfer sizes/NNS/sizes given/VBN/given in/IN/in part/NN/part a/DT/a /./. c/NNP/c. suppose/NN/suppose that/WDT/that a/DT/a utilization/NN/utilization of/IN/of 25/CD/25 percent/NN/percent /:/( or/CC/or higher/JJR/higher /:/) is/VBZ/is considered/VBN/considered acceptable/-NONE-/acceptable. using/VBG/using the/DT/the performance/NN/performance figures/NNS/figures given/VBN/given /,/, compute/JJ/compute the/DT/the smallest/JJS/smallest transfer/NN/transfer size/NN/size for/IN/for disk/NN/disk that/WDT/that gives/VBZ/gives acceptable/JJ/acceptable utilization/NN/utilization /./. 546/CD/546 chapter/NN/chapter 12/CD/12 d/NNP/d. complete/JJ/complete the/DT/the following/VBG/following sentence/NN/sentence /:/: a/DT/a disk/NN/disk is/VBZ/is a/DT/a random-access/JJ/random-access device/NN/device for/IN/for transfers/NNS/transfers larger/JJR/larger than/IN/than ______/NNP/______ bytes/NNS/bytes and/CC/and is/VBZ/is a/DT/a sequentialaccess/NN/sequentialaccess device/NN/device for/IN/for s1naller/NNP/s1naller transfers/NNS/transfers /./. e/NNP/e. compute/NN/compute the/DT/the minimum/JJ/minimum transfer/NN/transfer sizes/VBZ/sizes that/IN/that give/JJ/give acceptable/JJ/acceptable utilization/NN/utilization for/IN/for cache/NN/cache /,/, memory/NN/memory /,/, and/CC/and tape/NN/tape /./. f/NNP/f. when/WRB/when is/VBZ/is a/DT/a tape/NN/tape a/DT/a random-access/JJ/random-access device/NN/device /,/, and/CC/and when/WRB/when is/VBZ/is it/PRP/it a/DT/a sequential-access/JJ/sequential-access device/NN/device 12.3/CD/12.3 the/DT/the reliability/NN/reliability of/IN/of a/DT/a hard-disk/JJ/hard-disk drive/JJ/drive is/VBZ/is typically/RB/typically described/VBN/described in/IN/in terms/NNS/terms of/IN/of a/DT/a quantity/NN/quantity called/VBN/called mean/JJ/mean time/NN/time between/IN/between failures/NNS/failures /:/( mtbf/NN/mtbf /:/) /./. although/IN/although this/DT/this quantity/NN/quantity is/VBZ/is called/VBN/called a/DT/a time/NN/time /,/, the/DT/the mtbf/NN/mtbf actually/RB/actually is/VBZ/is measured/VBN/measured in/IN/in drive-hours/NNS/drive-hours per/IN/per failure/NN/failure /./. a/NNP/a. if/IN/if a/DT/a system/NN/system contains/VBZ/contains 1,000/CD/1,000 disk/NN/disk drives/NNS/drives /,/, each/DT/each of/IN/of which/WDT/which has/VBZ/has a/DT/a 750,000/CD/750,000- hour/NN/hour mtbf/NN/mtbf /,/, which/WDT/which of/IN/of the/DT/the following/JJ/following best/JJS/best describes/NNS/describes how/WRB/how often/RB/often a/DT/a drive/JJ/drive failure/NN/failure will/MD/will occur/VB/occur in/IN/in that/DT/that disk/NN/disk farm/NN/farm /:/: once/RB/once per/IN/per thousand/NN/thousand years/NNS/years /,/, once/RB/once per/IN/per century/NN/century /,/, once/RB/once per/IN/per decade/NN/decade /,/, once/RB/once per/IN/per year/NN/year /,/, once/RB/once per/IN/per month/NN/month /,/, once/RB/once per/IN/per week/NN/week /,/, once/RB/once per/IN/per day/NN/day /,/, once/RB/once per/IN/per hour/PRP$/hour /,/, once/RB/once per/IN/per minute/NN/minute /,/, or/CC/or once/RB/once per/IN/per second/JJ/second b/NNP/b. mortality/NN/mortality statistics/NNS/statistics indicate/VBP/indicate that/IN/that /,/, on/IN/on the/DT/the average/NN/average /,/, a/DT/a u.s/NNP/u.s. resident/NN/resident has/VBZ/has about/RB/about 1/CD/1 chance/NN/chance in/IN/in 1,000/CD/1,000 of/IN/of dying/NN/dying between/IN/between the/DT/the ages/NNS/ages of/IN/of 20/CD/20 and/CC/and 21/CD/21 /./. deduce/NN/deduce the/DT/the mtbf/NN/mtbf hours/NNS/hours for/IN/for 20-year-olds/CD/20-year-olds. convert/NN/convert this/DT/this figure/NN/figure from/IN/from hours/NNS/hours to/TO/to years/NNP/years. what/WP/what does/VBZ/does this/DT/this mtbf/NN/mtbf tell/NN/tell you/PRP/you about/IN/about the/DT/the expected/VBN/expected lifetime/NN/lifetime of/IN/of a/DT/a 20-year-old/JJ/20-year-old c/NNP/c. the/DT/the manufacturer/NN/manufacturer guarantees/NNS/guarantees a/DT/a 1-million-hour/CD/1-million-hour mtbf/NN/mtbf for/IN/for a/DT/a certain/JJ/certain model/NN/model of/IN/of disk/NN/disk drive/NNP/drive. what/WP/what can/MD/can you/PRP/you conclude/VB/conclude about/IN/about the/DT/the number/NN/number of/IN/of years/NNS/years for/IN/for which/WDT/which one/CD/one of/IN/of these/DT/these drives/NNS/drives is/VBZ/is under/IN/under warranty/NN/warranty 12.4/CD/12.4 discuss/NNS/discuss how/WRB/how an/DT/an operating/NN/operating system/NN/system could/MD/could maintain/VB/maintain a/DT/a free-space/NN/free-space list/NN/list for/IN/for a/DT/a tape-resident/JJ/tape-resident file/NN/file system/NNP/system. assume/NN/assume that/WDT/that the/DT/the tape/NN/tape technology/NN/technology is/VBZ/is append-only/RB/append-only and/CC/and that/IN/that it/PRP/it uses/VBZ/uses eot/NN/eot marks/NNS/marks and/CC/and locate/JJ/locate /,/, space/NN/space /,/, and/CC/and read/VB/read position/NN/position commands/NNS/commands as/IN/as described/VBN/described in/IN/in section/NN/section 12.9.2.1/CD/12.9.2.1 /./. 12.5/CD/12.5 imagine/NN/imagine that/WDT/that a/DT/a holographic/JJ/holographic storage/NN/storage drive/JJ/drive has/VBZ/has been/VBN/been invented/NNP/invented. the/DT/the drive/JJ/drive costs/NNS/costs $/$/$ 10,000/CD/10,000 and/CC/and has/VBZ/has an/DT/an average/JJ/average access/NN/access time/NN/time of/IN/of 40/CD/40 milliseconds/NNP/milliseconds. it/PRP/it uses/VBZ/uses a/DT/a $/$/$ 100/CD/100 cartridge/NN/cartridge the/DT/the size/NN/size of/IN/of a/DT/a cd/NNP/cd. this/DT/this cartridge/NN/cartridge holds/VBZ/holds 40,000/CD/40,000 images/NNS/images /,/, and/CC/and each/DT/each image/NN/image is/VBZ/is a/DT/a square/JJ/square black-and-white/JJ/black-and-white picture/NN/picture with/IN/with a/DT/a resolution/NN/resolution of/IN/of 6/CD/6 /,/, 000/CD/000 x/NN/x 6/CD/6 /,/, 000/CD/000 pixels/NNS/pixels /:/( each/DT/each pixel/NN/pixel stores/NNS/stores 1/CD/1 bit/NN/bit /:/) /./. the/DT/the drive/JJ/drive can/NN/can read/NN/read or/CC/or write/VB/write one/CD/one picture/NN/picture in/IN/in 1/CD/1 millisecond/NNP/millisecond. answer/NN/answer the/DT/the following/VBG/following questions/NNS/questions /./. a/NNP/a. what/WP/what would/MD/would be/VB/be some/DT/some good/JJ/good uses/NNS/uses for/IN/for this/DT/this device/NN/device b/NNP/b. how/WRB/how would/MD/would this/DT/this device/NN/device affect/NN/affect the/DT/the l/0/NN/l/0 performance/NN/performance of/IN/of a/DT/a computing/NN/computing system/NN/system c/NNP/c. what/WP/what kinds/NNS/kinds of/IN/of storage/NN/storage devices/NNS/devices /,/, if/IN/if any/DT/any /,/, would/MD/would become/VB/become obsolete/JJ/obsolete as/IN/as a/DT/a result/NN/result of/IN/of the/DT/the invention/NN/invention of/IN/of this/DT/this device/NN/device 547/CD/547 12.6/CD/12.6 the/DT/the term/NN/term fast/NN/fast wide/NN/wide scsi-ii/NN/scsi-ii denotes/VBZ/denotes a/DT/a scsi/NN/scsi bus/NN/bus that/WDT/that operates/VBZ/operates at/IN/at a/DT/a data/NN/data rate/NN/rate of/IN/of 20/CD/20 megabytes/NNS/megabytes per/IN/per second/JJ/second when/WRB/when it/PRP/it moves/VBZ/moves a/DT/a packet/NN/packet of/IN/of bytes/NNS/bytes between/IN/between the/DT/the host/NN/host and/CC/and a/DT/a device/NNP/device. suppose/NN/suppose that/WDT/that a/DT/a fast/NN/fast wide/NN/wide scsi-ii/NN/scsi-ii disk/NN/disk drive/VBP/drive spins/NNS/spins at/IN/at 7,200/CD/7,200 rpm/NN/rpm /,/, has/VBZ/has a/DT/a sector/NN/sector size/NN/size of/IN/of 512/CD/512 bytes/NNS/bytes /,/, and/CC/and holds/NNS/holds 160/CD/160 sectors/NNS/sectors per/IN/per track/NN/track a/NNP/a. estimate/NN/estimate the/DT/the sustained/VBN/sustained transfer/NN/transfer rate/NN/rate of/IN/of this/DT/this drive/JJ/drive in/IN/in megabytes/NNS/megabytes per/IN/per second/JJ/second /./. b/NNP/b. suppose/NN/suppose that/WDT/that the/DT/the drive/JJ/drive has/VBZ/has 7,000/CD/7,000 cylinders/NNS/cylinders /,/, 20/CD/20 tracks/NNS/tracks per/IN/per cylinde1/NNP/cylinde1 ~/NNP/~ a/DT/a head-switch/JJ/head-switch time/NN/time /:/( from/IN/from one/CD/one platter/NN/platter to/TO/to another/DT/another /NN/) of/IN/of 0.5/CD/0.5 millisecond/NN/millisecond /,/, and/CC/and an/DT/an adjacent-cylinder/JJ/adjacent-cylinder seek/NN/seek time/NN/time of/IN/of 2/CD/2 milliseconds/NNP/milliseconds. use/NN/use this/DT/this additional/JJ/additional information/NN/information to/TO/to give/VB/give an/DT/an accurate/JJ/accurate estimate/NN/estimate of/IN/of the/DT/the sustained/VBN/sustained transfer/NN/transfer rate/NN/rate for/IN/for a/DT/a huge/JJ/huge transfer/NN/transfer /./. c/NNP/c. suppose/NN/suppose that/WDT/that the/DT/the average/NN/average seek/NN/seek time/NN/time for/IN/for the/DT/the drive/JJ/drive is/VBZ/is 8/CD/8 milliseconds/NNS/milliseconds /./. estimate/NN/estimate the/DT/the i/0/NN/i/0 operations/NNS/operations per/IN/per second/JJ/second and/CC/and the/DT/the effective/JJ/effective transfer/NN/transfer rate/NN/rate for/IN/for a/DT/a random-access/JJ/random-access workload/NN/workload that/WDT/that reads/VBZ/reads individual/JJ/individual sectors/NNS/sectors that/WDT/that are/VBP/are scattered/VBN/scattered across/IN/across the/DT/the disk/NN/disk d/NNP/d. calculate/NN/calculate the/DT/the random-access/JJ/random-access i/0/-NONE-/i/0 operations/NNS/operations per/IN/per second/JJ/second and/CC/and transfer/VB/transfer rate/NN/rate for/IN/for i/0/-NONE-/i/0 sizes/VBZ/sizes of/IN/of 4/CD/4 kilobytes/NNS/kilobytes /,/, 8/CD/8 kilobytes/NNS/kilobytes /,/, and/CC/and 64/CD/64 kilobytes/NNS/kilobytes /./. e/NNP/e. if/IN/if multiple/NN/multiple requests/NNS/requests are/VBP/are in/IN/in the/DT/the queue/NN/queue /,/, a/DT/a scheduling/NN/scheduling algorithm/NN/algorithm such/JJ/such as/IN/as scan/JJ/scan should/MD/should be/VB/be able/JJ/able to/TO/to reduce/VB/reduce the/DT/the average/JJ/average seek/NN/seek distance/NNP/distance. suppose/NN/suppose that/WDT/that a/DT/a random-access/JJ/random-access workload/NN/workload is/VBZ/is reading/VBG/reading 8-kilobyte/JJ/8-kilobyte pages/NNS/pages /,/, the/DT/the average/JJ/average queue/NN/queue length/NN/length is/VBZ/is 10/CD/10 /,/, and/CC/and the/DT/the scheduling/NN/scheduling algorithm/NN/algorithm reduces/NNS/reduces the/DT/the average/JJ/average seek/NN/seek time/NN/time to/TO/to 3/CD/3 milliseconds/NNP/milliseconds. now/RB/now calculate/VBP/calculate the/DT/the i/0/NNP/i/0 operations/NNS/operations per/IN/per second/JJ/second and/CC/and the/DT/the effective/JJ/effective transfer/NN/transfer rate/NN/rate of/IN/of the/DT/the drive/JJ/drive /./. 12.7/CD/12.7 compare/NN/compare the/DT/the performance/NN/performance of/IN/of write/JJ/write operations/NNS/operations achieved/VBD/achieved by/IN/by a/DT/a raid/JJ/raid level/NN/level 5/CD/5 organization/NN/organization with/IN/with that/DT/that achieved/VBN/achieved by/IN/by a/DT/a raid/JJ/raid level1/NNP/level1 organization/NN/organization /./. 12.8/CD/12.8 suppose/NN/suppose that/WDT/that a/DT/a disk/NN/disk drive/NN/drive has/VBZ/has 5,000/CD/5,000 cylinders/NNS/cylinders /,/, numbered/VBD/numbered 0/-NONE-/0 to/TO/to 4999/CD/4999. the/DT/the drive/JJ/drive is/VBZ/is currently/RB/currently serving/VBG/serving a/DT/a request/NN/request at/IN/at cylinder/NN/cylinder 143/CD/143 /,/, and/CC/and the/DT/the previous/JJ/previous request/NN/request was/VBD/was at/IN/at cylinder/NN/cylinder 125/CD/125. the/DT/the queue/NN/queue of/IN/of pending/VBG/pending requests/NNS/requests /,/, in/IN/in fifo/NN/fifo order/NN/order /,/, is/VBZ/is /:/: 86,1470,913,1774,948,1509,1022,1750,130/CD/86,1470,913,1774,948,1509,1022,1750,130 starting/VBG/starting from/IN/from the/DT/the current/JJ/current head/NN/head position/NN/position /,/, what/WP/what is/VBZ/is the/DT/the total/JJ/total distance/NN/distance /:/( in/IN/in cylinders/NNS/cylinders /:/) that/IN/that the/DT/the disk/NN/disk arm/NN/arm moves/NNS/moves to/TO/to satisfy/VB/satisfy all/DT/all the/DT/the pending/VBG/pending requests/NNS/requests for/IN/for each/DT/each of/IN/of the/DT/the following/JJ/following disk-scheduling/JJ/disk-scheduling algorithms/NNS/algorithms a/NNP/a. fcfs/NNS/fcfs b/NNP/b. sstf/NN/sstf 548/CD/548 chapter/NN/chapter 12/CD/12 c/NNP/c. scan/NN/scan d/NNP/d. look/NN/look e/NNP/e. c-scan/NNP/c-scan f/NNP/f. c-look/NNP/c-look 12.9/CD/12.9 elementary/JJ/elementary physics/NNS/physics states/NNS/states that/WDT/that when/WRB/when an/DT/an object/NN/object is/VBZ/is subjected/VBN/subjected to/TO/to a/DT/a constant/NN/constant acceleration/NN/acceleration a/DT/a /,/, the/DT/the relationship/NN/relationship between/IN/between distance/NN/distance d/NN/d and/CC/and time/NN/time t/NN/t is/VBZ/is given/VBN/given by/IN/by d/NN/d =/:/= ~/:/~ at2/NNP/at2 /./. suppose/NN/suppose that/IN/that /,/, during/IN/during a/DT/a seek/NN/seek /,/, the/DT/the disk/NN/disk in/IN/in exercise/NN/exercise 12.8/CD/12.8 accelerates/NNS/accelerates the/DT/the disk/NN/disk arm/NN/arm at/IN/at a/DT/a constant/JJ/constant rate/NN/rate for/IN/for the/DT/the first/JJ/first half/DT/half of/IN/of the/DT/the seek/NN/seek /,/, then/RB/then decelerates/VBZ/decelerates the/DT/the disk/NN/disk arm/NN/arm at/IN/at the/DT/the same/JJ/same rate/NN/rate for/IN/for the/DT/the second/JJ/second half/DT/half of/IN/of the/DT/the seek/NNP/seek. assume/NN/assume that/WDT/that the/DT/the disk/NN/disk can/MD/can perform/VB/perform a/DT/a seek/NN/seek to/TO/to an/DT/an adjacent/NN/adjacent cylinder/NN/cylinder in/IN/in 1/CD/1 n/NN/n lillisecond/NN/lillisecond and/CC/and a/DT/a full-stroke/JJ/full-stroke seek/NN/seek over/IN/over all/DT/all 5,000/CD/5,000 cylinders/NNS/cylinders in/IN/in 18/CD/18 milliseconds/NNS/milliseconds /./. a/NNP/a. the/DT/the distance/NN/distance of/IN/of a/DT/a seek/NN/seek is/VBZ/is the/DT/the number/NN/number of/IN/of cylinders/NNS/cylinders that/WDT/that the/DT/the head/NN/head moves/NNP/moves. explain/NN/explain why/WRB/why the/DT/the seek/NN/seek time/NN/time is/VBZ/is proportional/JJ/proportional to/TO/to the/DT/the square/NN/square root/NN/root of/IN/of the/DT/the seek/NN/seek distance/NN/distance /./. b/NNP/b. write/NN/write an/DT/an equation/NN/equation for/IN/for the/DT/the seek/NN/seek time/NN/time as/IN/as a/DT/a function/NN/function of/IN/of the/DT/the seek/NN/seek distance/NNP/distance. this/DT/this equation/NN/equation should/MD/should be/VB/be of/IN/of the/DT/the form/NN/form t/NN/t =/:/= x/NN/x +/:/+ y/NN/y ~/:/~ /,/, where/WRB/where t/NN/t is/VBZ/is the/DT/the time/NN/time in/IN/in milliseconds/NNS/milliseconds and/CC/and l/NN/l is/VBZ/is the/DT/the seek/NN/seek distance/NN/distance in/IN/in cylinders/NNS/cylinders /./. c/NNP/c. calculate/NN/calculate the/DT/the total/NN/total seek/NN/seek time/NN/time for/IN/for each/DT/each of/IN/of the/DT/the schedules/NNS/schedules in/IN/in exercise/NN/exercise 12.8/CD/12.8. determine/NN/determine which/WDT/which schedule/NN/schedule is/VBZ/is the/DT/the fastest/JJS/fastest /:/( has/VBZ/has the/DT/the smallest/JJS/smallest total/JJ/total seek/NN/seek time/NN/time /:/) /./. d/NNP/d. the/DT/the percentage/NN/percentage speedup/NN/speedup is/VBZ/is the/DT/the time/NN/time saved/VBD/saved divided/VBN/divided by/IN/by the/DT/the original/JJ/original time/NNP/time. what/WP/what is/VBZ/is the/DT/the percentage/NN/percentage speedup/NN/speedup of/IN/of the/DT/the fastest/JJS/fastest schedule/NN/schedule over/IN/over fcfs/NNS/fcfs 12.10/CD/12.10 the/DT/the accelerating/NN/accelerating seek/NN/seek described/VBD/described in/IN/in exercise/NN/exercise 12.9/CD/12.9 is/VBZ/is typical/JJ/typical of/IN/of hard-disk/JJ/hard-disk drives/NNP/drives. by/IN/by contrast/NN/contrast /,/, floppy/NN/floppy disks/NNS/disks /:/( and/CC/and many/JJ/many hard/JJ/hard disks/NNS/disks manufactured/VBN/manufactured before/IN/before the/DT/the mid-1980s/NNS/mid-1980s /:/) typically/RB/typically seek/VBP/seek at/IN/at a/DT/a fixed/VBN/fixed rate/NNP/rate. suppose/NN/suppose that/WDT/that the/DT/the disk/NN/disk in/IN/in exercise/NN/exercise 12.9/CD/12.9 has/VBZ/has a/DT/a constant-rate/JJ/constant-rate seek/NN/seek rather/RB/rather than/IN/than a/DT/a constantacceleration/NN/constantacceleration seek/NN/seek /,/, so/RB/so the/DT/the seek/NN/seek time/NN/time is/VBZ/is of/IN/of the/DT/the form/NN/form t/NN/t =/:/= x/NN/x +/:/+ yl/NN/yl /,/, where/WRB/where t/NN/t is/VBZ/is the/DT/the time/NN/time in/IN/in milliseconds/NNS/milliseconds and/CC/and l/NN/l is/VBZ/is the/DT/the seek/NN/seek distance/NNP/distance. suppose/NN/suppose that/WDT/that the/DT/the time/NN/time to/TO/to seek/VB/seek to/TO/to an/DT/an adjacent/NN/adjacent cylinder/NN/cylinder is/VBZ/is 1/CD/1 millisecond/NN/millisecond /,/, as/IN/as before/IN/before /,/, and/CC/and the/DT/the time/NN/time to/TO/to seek/VB/seek to/TO/to each/DT/each additional/JJ/additional cylinder/NN/cylinder is/VBZ/is 0.5/CD/0.5 milliseconds/NNS/milliseconds /./. a/NNP/a. write/NN/write an/DT/an equation/NN/equation for/IN/for this/DT/this seek/NN/seek time/NN/time as/IN/as a/DT/a function/NN/function of/IN/of the/DT/the seek/NN/seek distance/NN/distance /./. b/NNP/b. using/VBG/using this/DT/this seek-time/JJ/seek-time function/NN/function /,/, calculate/JJ/calculate the/DT/the total/JJ/total seek/NN/seek time/NN/time or/CC/or each/DT/each of/IN/of the/DT/the schedules/NNS/schedules in/IN/in exercise/NN/exercise 12.8/CD/12.8. is/VBZ/is your/PRP$/your answer/NN/answer the/DT/the same/JJ/same as/IN/as the/DT/the one/CD/one or/CC/or exercise/VB/exercise 12.9/CD/12.9 /CD/( c/NN/c /:/) 549/CD/549 c/NNP/c. what/WP/what is/VBZ/is the/DT/the percentage/NN/percentage speedup/NN/speedup of/IN/of the/DT/the fastest/JJS/fastest scb.edule/JJ/scb.edule over/IN/over fcfs/NNS/fcfs in/IN/in this/DT/this case/NN/case 12.11/CD/12.11 suppose/NN/suppose that/WDT/that the/DT/the disk/NN/disk in/IN/in exercise/NN/exercise 12.9/CD/12.9 rotates/NNS/rotates at/IN/at 7,200/CD/7,200 rpm/NN/rpm /./. a/NNP/a. what/WP/what is/VBZ/is the/DT/the average/JJ/average rotational/JJ/rotational latency/NN/latency of/IN/of this/DT/this disk/NN/disk drive/VBP/drive b/NNP/b. what/WP/what seek/NN/seek distance/NN/distance can/MD/can be/VB/be covered/VBN/covered in/IN/in the/DT/the tim.e/JJ/tim.e that/IN/that you/PRP/you found/VBD/found or/CC/or part/NN/part a/DT/a 12.12/CD/12.12 suppose/NN/suppose that/WDT/that a/DT/a one-sided/JJ/one-sided 5.25-inch/JJ/5.25-inch optical-disk/JJ/optical-disk cartridge/NN/cartridge has/VBZ/has an/DT/an areal/NN/areal density/NN/density of/IN/of 1/CD/1 gigabit/NN/gigabit per/IN/per square/JJ/square inch/NNP/inch. further/RB/further suppose/VB/suppose that/IN/that a/DT/a magnetic/JJ/magnetic tape/NN/tape has/VBZ/has an/DT/an areal/NN/areal density/NN/density of/IN/of 20/CD/20 megabits/NNS/megabits per/IN/per square/JJ/square inch/NN/inch and/CC/and is/VBZ/is 1/2/CD/1/2 inch/NN/inch wide/NN/wide and/CC/and 1,800/CD/1,800 feet/NNS/feet long/NNP/long. calculate/NN/calculate an/DT/an estimate/NN/estimate of/IN/of the/DT/the storage/NN/storage capacities/NNS/capacities of/IN/of these/DT/these two/CD/two kinds/NNS/kinds of/IN/of storage/NN/storage media/NNP/media. suppose/NN/suppose that/WDT/that an/DT/an optical/JJ/optical tape/NN/tape exists/NNS/exists that/WDT/that has/VBZ/has the/DT/the same/JJ/same physical/JJ/physical size/NN/size as/IN/as the/DT/the magnetic/JJ/magnetic tape/NN/tape but/CC/but the/DT/the same/JJ/same storage/NN/storage density/NN/density as/IN/as the/DT/the optical/JJ/optical disk/NNP/disk. what/WP/what volume/NN/volume of/IN/of data/NNS/data could/MD/could the/DT/the optical/JJ/optical tape/NN/tape hold/NN/hold what/WP/what would/MD/would be/VB/be a/DT/a marketable/JJ/marketable price/NN/price for/IN/for the/DT/the optical/JJ/optical tape/NN/tape if/IN/if the/DT/the magnetic/JJ/magnetic tape/NN/tape cost/NN/cost $/$/$ 25/CD/25 12.13/CD/12.13 write/JJ/write a/DT/a program/NN/program that/WDT/that simulates/VBZ/simulates the/DT/the disk-scheduling/JJ/disk-scheduling algorithms/NNS/algorithms discussed/VBD/discussed in/IN/in section/NN/section 12.4/CD/12.4 /./. 12.14/CD/12.14 why/WRB/why is/VBZ/is rotational/JJ/rotational latency/NN/latency usually/RB/usually not/RB/not considered/VBN/considered in/IN/in disk/NN/disk scheduling/VBG/scheduling how/WRB/how would/MD/would you/PRP/you modify/VB/modify sstf/NN/sstf /,/, scan/JJ/scan /,/, and/CC/and c-scan/JJ/c-scan to/TO/to include/VB/include latency/NN/latency optimization/NN/optimization 12.15/CD/12.15 remapping/VBG/remapping bad/JJ/bad blocks/NNS/blocks by/IN/by sector/NN/sector sparing/VBG/sparing or/CC/or sector/NN/sector slipping/VBG/slipping can/MD/can influence/VB/influence perfonnance/NNP/perfonnance. suppose/NN/suppose that/WDT/that the/DT/the drive/JJ/drive in/IN/in exercise/NN/exercise 12.6/CD/12.6 has/VBZ/has a/DT/a total/NN/total of/IN/of 100/CD/100 bad/JJ/bad sectors/NNS/sectors at/IN/at random/NN/random locations/NNS/locations and/CC/and that/IN/that each/DT/each bad/JJ/bad sector/NN/sector is/VBZ/is mapped/VBN/mapped to/TO/to a/DT/a spare/NN/spare that/WDT/that is/VBZ/is located/VBN/located on/IN/on a/DT/a different/JJ/different track/NN/track within/IN/within the/DT/the same/JJ/same cylinder/NNP/cylinder. estimate/NN/estimate the/DT/the number/NN/number of/IN/of i/0/-NONE-/i/0 operations/NNS/operations per/IN/per second/JJ/second and/CC/and the/DT/the effective/JJ/effective transfer/NN/transfer rate/NN/rate for/IN/for a/DT/a random-access/JJ/random-access workload/NN/workload consisting/VBG/consisting of/IN/of 8/CD/8- kilobyte/NN/kilobyte reads/NNS/reads /,/, assuming/VBG/assuming a/DT/a queue/NN/queue length/NN/length of/IN/of 1/CD/1 /CD/( that/WDT/that is/VBZ/is /,/, the/DT/the choice/NN/choice of/IN/of scheduling/VBG/scheduling algorithm/NN/algorithm is/VBZ/is not/RB/not a/DT/a factor/NN/factor /:/) /./. what/WP/what is/VBZ/is the/DT/the effect/NN/effect of/IN/of a/DT/a bad/JJ/bad sector/NN/sector on/IN/on performance/NN/performance 12.16/CD/12.16 discuss/NNS/discuss the/DT/the relative/JJ/relative advantages/NNS/advantages and/CC/and disadvantages/NNS/disadvantages of/IN/of sector/NN/sector sparing/VBG/sparing and/CC/and sector/NN/sector slipping/VBG/slipping /./. 12.17/CD/12.17 compare/NN/compare the/DT/the performance/NN/performance of/IN/of c-scan/JJ/c-scan and/CC/and scan/JJ/scan scheduling/NN/scheduling /,/, assuming/VBG/assuming a/DT/a uniform/NN/uniform distribution/NN/distribution of/IN/of requests/NNP/requests. consider/NN/consider the/DT/the average/JJ/average response/NN/response time/NN/time /:/( the/DT/the time/NN/time between/IN/between the/DT/the arrival/NN/arrival of/IN/of a/DT/a request/NN/request and/CC/and the/DT/the completion/NN/completion of/IN/of that/DT/that request/NN/request 's/POS/'s service/NN/service /:/) /,/, the/DT/the variation/NN/variation in/IN/in response/NN/response time/NN/time /,/, and/CC/and the/DT/the effective/JJ/effective 550/CD/550 chapter/NN/chapter 12/CD/12 bandwidth/NNP/bandwidth. how/WRB/how does/VBZ/does performance/NN/performance depend/NN/depend on/IN/on the/DT/the relative/JJ/relative sizes/NNS/sizes of/IN/of seek/NN/seek time/NN/time and/CC/and rotational/JJ/rotational latency/NN/latency 12.18/CD/12.18 none/NN/none of/IN/of the/DT/the disk-scheduling/JJ/disk-scheduling disciplines/NNS/disciplines /,/, except/IN/except fcfs/NNS/fcfs /,/, is/VBZ/is truly/RB/truly fair/JJ/fair /NN/( starvation/NN/starvation may/MD/may occur/VB/occur /:/) /./. a/NNP/a. explain/NN/explain why/WRB/why this/DT/this assertion/NN/assertion is/VBZ/is true/JJ/true /./. b/NNP/b. describe/NN/describe a/DT/a way/NN/way to/TO/to modify/VB/modify algorithms/NNS/algorithms such/JJ/such as/IN/as scan/JJ/scan to/TO/to ensure/VB/ensure fairness/NN/fairness /./. c/NNP/c. explain/NN/explain why/WRB/why fairness/NN/fairness is/VBZ/is an/DT/an important/JJ/important goal/NN/goal in/IN/in a/DT/a time-sharing/JJ/time-sharing system/NN/system /./. d/NNP/d. give/VB/give three/CD/three or/CC/or more/JJR/more examples/NNS/examples of/IN/of circumstances/NNS/circumstances in/IN/in which/WDT/which it/PRP/it is/VBZ/is important/JJ/important that/IN/that the/DT/the operating/NN/operating system/NN/system be/VB/be unfair/JJ/unfair in/IN/in serving/NN/serving i/o/-NONE-/i/o requests/VBZ/requests /./. 12.19/CD/12.19 consider/NN/consider a/DT/a raid/NN/raid level/NN/level 5/CD/5 organization/NN/organization comprising/VBG/comprising five/CD/five disks/NNS/disks /,/, with/IN/with the/DT/the parity/NN/parity for/IN/for sets/NNS/sets of/IN/of four/CD/four blocks/NNS/blocks on/IN/on four/CD/four disks/NNS/disks stored/VBD/stored on/IN/on the/DT/the fifth/JJ/fifth disk/NNP/disk. how/WRB/how many/JJ/many blocks/NNS/blocks are/VBP/are accessed/VBN/accessed in/IN/in order/NN/order to/TO/to perform/VB/perform the/DT/the following/VBG/following a/NNP/a. a/DT/a write/JJ/write of/IN/of one/CD/one block/NN/block of/IN/of data/NNS/data b/NNP/b. a/DT/a write/JJ/write of/IN/of seven/CD/seven continuous/JJ/continuous blocks/NNS/blocks of/IN/of data/NNS/data 12.20/CD/12.20 the/DT/the operating/NN/operating system/NN/system generally/RB/generally treats/VBZ/treats removable/JJ/removable disks/NNS/disks as/IN/as shared/VBN/shared file/NN/file systems/NNS/systems but/CC/but assigns/NNS/assigns a/DT/a tape/NN/tape drive/NN/drive to/TO/to only/RB/only one/CD/one application/NN/application at/IN/at a/DT/a time/NNP/time. give/VBP/give three/CD/three reasons/NNS/reasons that/WDT/that could/MD/could explain/VB/explain this/DT/this difference/NN/difference in/IN/in treatment/NN/treatment of/IN/of disks/NNS/disks and/CC/and tapes/NNP/tapes. describe/NN/describe the/DT/the additional/JJ/additional features/NNS/features that/WDT/that an/DT/an operating/NN/operating system/NN/system would/MD/would need/VB/need to/TO/to support/VB/support shared/VBN/shared file-system/-NONE-/file-system access/NN/access to/TO/to a/DT/a tape/NN/tape jukebox/NNP/jukebox. would/MD/would the/DT/the applications/NNS/applications sharing/VBG/sharing the/DT/the tape/NN/tape jukebox/NN/jukebox need/VBP/need any/DT/any special/JJ/special properties/NNS/properties /,/, or/CC/or could/MD/could they/PRP/they use/VBP/use the/DT/the files/NNS/files as/IN/as though/IN/though the/DT/the files/NNS/files were/VBD/were disk-resident/JJ/disk-resident explain/NN/explain your/PRP$/your answer/NN/answer /./. 12.21/CD/12.21 how/WRB/how would/MD/would use/VB/use of/IN/of a/DT/a ram/NN/ram disk/NN/disk affect/NN/affect your/PRP$/your selection/NN/selection of/IN/of a/DT/a disk-scheduling/JJ/disk-scheduling algorithm/NN/algorithm what/WP/what factors/NNS/factors would/MD/would you/PRP/you need/VBP/need to/TO/to consider/VB/consider do/VBP/do the/DT/the same/JJ/same considerations/NNS/considerations apply/RB/apply to/TO/to hard-disk/VB/hard-disk scheduling/NN/scheduling /,/, given/VBN/given that/IN/that the/DT/the file/NN/file system/NN/system stores/NNS/stores recently/RB/recently used/VBN/used blocks/NNS/blocks in/IN/in a/DT/a buffer/NN/buffer cache/NN/cache in/IN/in main/NN/main memory/NN/memory 12.22/CD/12.22 you/PRP/you can/MD/can use/VB/use simple/JJ/simple estimates/NNS/estimates to/TO/to compare/VB/compare the/DT/the cost/NN/cost and/CC/and performance/NN/performance of/IN/of a/DT/a terabyte/NN/terabyte storage/NN/storage system/NN/system made/VBD/made entirely/RB/entirely from/IN/from disks/NNS/disks with/IN/with one/CD/one that/WDT/that incorporates/VBZ/incorporates tertiary/JJ/tertiary storage/NNP/storage. suppose/NN/suppose that/WDT/that each/DT/each magnetic/JJ/magnetic disk/NN/disk holds/NNS/holds 10gb/CD/10gb /,/, costs/NNS/costs $/$/$ 1,000/CD/1,000 /,/, transfers/NNS/transfers 5mb/CD/5mb per/IN/per second/JJ/second /,/, and/CC/and has/VBZ/has an/DT/an average/JJ/average access/NN/access latency/NN/latency of/IN/of 15/CD/15 milliseconds/NNP/milliseconds. also/RB/also suppose/VBD/suppose that/IN/that a/DT/a tape/NN/tape library/NN/library costs/NNS/costs $/$/$ 10/CD/10 per/IN/per gigabyte/JJ/gigabyte /,/, transfers/NNS/transfers 10/CD/10 mb/NN/mb per/IN/per second/JJ/second /,/, and/CC/and has/VBZ/has an/DT/an average/JJ/average access/NN/access latency/NN/latency of/IN/of 20/CD/20 seconds/NNP/seconds. compute/NN/compute the/DT/the total/NN/total cost/NN/cost /,/, the/DT/the maximum/NN/maximum total/NN/total data/NNS/data rate/NN/rate /,/, and/CC/and the/DT/the average/JJ/average waiting/NN/waiting time/NN/time for/IN/for a/DT/a pure/NN/pure disk/NN/disk system/NNP/system. if/IN/if you/PRP/you make/VBP/make 551/CD/551 any/DT/any assumptions/NNS/assumptions about/IN/about the/DT/the workload/NN/workload /,/, describe/VBP/describe and/CC/and justify/NN/justify them/NNP/them. now/RB/now /,/, suppose/VBP/suppose that/IN/that 5/CD/5 percent/NN/percent of/IN/of the/DT/the data/NNS/data are/VBP/are frequently/RB/frequently used/VBN/used /,/, so/RB/so they/PRP/they must/MD/must reside/VB/reside on/IN/on disk/NN/disk /,/, but/CC/but the/DT/the other/JJ/other 95/CD/95 percent/NN/percent are/VBP/are archived/VBN/archived in/IN/in the/DT/the tape/NN/tape library/NN/library /./. further/RB/further suppose/VB/suppose that/IN/that the/DT/the disk/NN/disk system/NN/system handles/NNS/handles 95/CD/95 percent/NN/percent of/IN/of the/DT/the requests/NNS/requests and/CC/and the/DT/the library/NN/library handles/VBZ/handles the/DT/the other/JJ/other 5/CD/5 percent/NNP/percent. what/WP/what are/VBP/are the/DT/the total/JJ/total cost/NN/cost /,/, the/DT/the maximum/NNP/maximum. total/NN/total data/NNS/data rate/NN/rate /,/, and/CC/and the/DT/the average/JJ/average waiting/NN/waiting time/NN/time for/IN/for this/DT/this hierarchical/JJ/hierarchical storage/NN/storage system/NN/system 12.23/CD/12.23 assume/NN/assume that/WDT/that you/PRP/you have/VBP/have a/DT/a mixed/VBN/mixed configuration/NN/configuration comprising/NN/comprising disks/NNS/disks organized/VBN/organized as/IN/as raid/JJ/raid levell/NN/levell and/CC/and raid/VBD/raid levels/NNS/levels disks/NNP/disks. assume/NN/assume that/WDT/that the/DT/the system/NN/system has/VBZ/has flexibility/NN/flexibility in/IN/in deciding/NN/deciding which/WDT/which disk/NN/disk organization/NN/organization to/TO/to use/VB/use for/IN/for storing/NN/storing a/DT/a particular/JJ/particular file/NNP/file. which/WDT/which files/NNS/files should/MD/should be/VB/be stored/VBN/stored in/IN/in the/DT/the raid/NN/raid level/NN/level 1/CD/1 disks/NNS/disks and/CC/and which/WDT/which in/IN/in the/DT/the raid/NN/raid levels/NNS/levels disks/NNS/disks in/IN/in order/NN/order to/TO/to optimize/VB/optimize performance/NN/performance 12.24/CD/12.24 what/WP/what are/VBP/are the/DT/the tradeoffs/NNS/tradeoffs involved/VBD/involved in/IN/in rereading/NN/rereading code/NN/code pages/NNS/pages from/IN/from the/DT/the file/NN/file system/NN/system versus/NN/versus using/VBG/using swap/NN/swap space/NN/space to/TO/to store/VB/store them/PRP/them 12.25/CD/12.25 requests/NNS/requests are/VBP/are not/RB/not usually/RB/usually uniformly/RB/uniformly distributed/NNP/distributed. for/IN/for example/NN/example /,/, we/PRP/we can/MD/can expect/VB/expect a/DT/a cylinder/NN/cylinder containing/VBG/containing the/DT/the file-system/JJ/file-system fat/NN/fat or/CC/or inodes/VBZ/inodes to/TO/to be/VB/be accessed/VBN/accessed more/RBR/more frequently/RB/frequently than/IN/than a/DT/a cylinder/NN/cylinder containing/VBG/containing only/RB/only files/NNP/files. suppose/NN/suppose you/PRP/you know/VBP/know that/IN/that 50/CD/50 percent/NN/percent of/IN/of the/DT/the requests/NNS/requests are/VBP/are for/IN/for a/DT/a small/JJ/small /,/, fixed/VBN/fixed number/NN/number of/IN/of cylinders/NNS/cylinders /./. a/NNP/a. would/MD/would any/DT/any of/IN/of the/DT/the scheduling/NN/scheduling algorithms/NNS/algorithms discussed/VBD/discussed in/IN/in this/DT/this chapter/NN/chapter be/VB/be particularly/RB/particularly good/JJ/good for/IN/for this/DT/this case/NN/case explain/NN/explain your/PRP$/your answer/NN/answer /./. b/NNP/b. propose/NN/propose a/DT/a disk-scheduling/JJ/disk-scheduling algorithm/NN/algorithm that/WDT/that gives/VBZ/gives even/RB/even better/JJR/better performance/NN/performance by/IN/by taking/NN/taking advantage/NN/advantage of/IN/of this/DT/this hot/NN/hot spot/NN/spot on/IN/on the/DT/the disk/NN/disk /./. c/NNP/c. file/NN/file systems/NNS/systems typically/RB/typically fil1.d/JJ/fil1.d data/NNS/data blocks/NNS/blocks via/IN/via an/DT/an indirection/NN/indirection table/NN/table /,/, such/JJ/such as/IN/as a/DT/a fat/JJ/fat in/IN/in dos/NNS/dos or/CC/or inodes/NNS/inodes in/IN/in unix/NNP/unix. describe/NN/describe one/CD/one or/CC/or more/JJR/more ways/NNS/ways to/TO/to take/VB/take advantage/NN/advantage of/IN/of this/DT/this indirection/NN/indirection to/TO/to improve/VB/improve disk/NN/disk performance/NN/performance /./. 12.26/CD/12.26 discuss/NNS/discuss the/DT/the reasons/NNS/reasons why/WRB/why the/DT/the operating/NN/operating system/NN/system might/MD/might require/VB/require accurate/JJ/accurate information/NN/information on/IN/on how/WRB/how blocks/NNS/blocks are/VBP/are stored/VBN/stored on/IN/on a/DT/a disk/NNP/disk. how/WRB/how could/MD/could the/DT/the operating/NN/operating system/NN/system improve/NN/improve file/NN/file system/NN/system performance/NN/performance with/IN/with this/DT/this knowledge/NN/knowledge 12.27/CD/12.27 in/IN/in a/DT/a disk/NN/disk jukebox/NN/jukebox /,/, what/WP/what would/MD/would be/VB/be the/DT/the effect/NN/effect of/IN/of having/VBG/having more/JJR/more open/JJ/open files/NNS/files than/IN/than the/DT/the number/NN/number of/IN/of drives/NNS/drives in/IN/in the/DT/the jukebox/NN/jukebox 12.28/CD/12.28 compare/NN/compare the/DT/the throughput/NN/throughput achieved/VBD/achieved by/IN/by a/DT/a raid/JJ/raid levels/NNS/levels organization/NN/organization with/IN/with that/DT/that achieved/VBN/achieved by/IN/by a/DT/a raid/JJ/raid levell/NN/levell organization/NN/organization for/IN/for the/DT/the following/VBG/following /:/: a/NNP/a. read/NN/read operations/NNS/operations on/IN/on single/JJ/single blocks/NNS/blocks b/NNP/b. read/NN/read operations/NNS/operations on/IN/on multiple/NN/multiple contiguous/JJ/contiguous blocks/NNS/blocks 552/CD/552 chapter/NN/chapter 12/CD/12 12.29/CD/12.29 could/MD/could a/DT/a raid/NN/raid level/NN/level 1/CD/1 organization/NN/organization achieve/NN/achieve better/NN/better performance/NN/performance for/IN/for read/NN/read requests/NNS/requests than/IN/than a/DT/a raid/NN/raid level/NN/level 0/-NONE-/0 organization/NN/organization /:/( with/IN/with nonredundant/JJ/nonredundant striping/NN/striping of/IN/of data/NNS/data /:/) if/IN/if so/RB/so /,/, how/WRB/how discussions/NNS/discussions of/IN/of redundant/JJ/redundant arrays/NNS/arrays of/IN/of independent/JJ/independent disks/NNS/disks /:/( raids/NNS/raids /VBP/) are/VBP/are presented/VBN/presented by/IN/by patterson/NN/patterson et/NN/et al/NNP/al. /NNP/[ 1988/CD/1988 /CD/] and/CC/and in/IN/in the/DT/the detailed/JJ/detailed survey/NN/survey of/IN/of chen/NN/chen et/NN/et al/NNP/al. /NNP/[ 1994/CD/1994 /CD/] /./. disk-system/JJ/disk-system architectures/NNS/architectures for/IN/for high-performance/NN/high-performance computing/VBG/computing are/VBP/are discussed/VBN/discussed by/IN/by katz/NN/katz et/NN/et al/NNP/al. /NNP/[ 1989/CD/1989 /CD/] /./. enhancements/NNS/enhancements to/TO/to raid/VB/raid systems/NNS/systems are/VBP/are discussed/VBN/discussed in/NNP/in. wilkes/VBZ/wilkes et/NN/et al/NNP/al. /NNP/[ 1996/CD/1996 /CD/] and/CC/and yu/NN/yu et/NN/et al/NNP/al. /NNP/[ 2000/CD/2000 /CD/] /./. teorey/NN/teorey and/CC/and pinkerton/NN/pinkerton /:/[ 1972/CD/1972 /CD/] present/NN/present an/DT/an early/JJ/early comparative/JJ/comparative analysis/NN/analysis of/IN/of disk-scheduling/JJ/disk-scheduling algorithms/NNP/algorithms. they/PRP/they use/VBP/use simulations/NNS/simulations that/IN/that model/NN/model a/DT/a disk/NN/disk for/IN/for which/WDT/which seek/NN/seek time/NN/time is/VBZ/is linear/JJ/linear in/IN/in the/DT/the number/NN/number of/IN/of cylinders/NNS/cylinders crossed/VBN/crossed /./. for/IN/for this/DT/this disk/NN/disk look/NN/look is/VBZ/is a/DT/a good/JJ/good choice/NN/choice for/IN/for queue/NN/queue lengths/NNS/lengths below/IN/below 140/CD/140 /,/, and/CC/and c-look/JJ/c-look is/VBZ/is good/JJ/good for/IN/for queue/JJ/queue lengths/NNS/lengths above/IN/above 100/CD/100. king/VBG/king /CD/[ 1990/CD/1990 /CD/] describes/NNS/describes ways/NNS/ways to/TO/to improve/VB/improve the/DT/the seek/NN/seek time/NN/time by/IN/by moving/NN/moving the/DT/the disk/NN/disk ann/NN/ann when/WRB/when the/DT/the disk/NN/disk is/VBZ/is otherwise/RB/otherwise idle/NNP/idle. seltzer/NN/seltzer et/NN/et al/NN/al /./. /NN/[ 1990/CD/1990 /CD/] and/CC/and jacobson/NN/jacobson and/CC/and wilkes/VBZ/wilkes /:/[ 1991/CD/1991 /CD/] describe/NN/describe disk-scheduling/JJ/disk-scheduling algorithms/NNS/algorithms that/WDT/that consider/NN/consider rotational/VBP/rotational latency/NN/latency in/IN/in addition/NN/addition to/TO/to seek/VB/seek time/NNP/time. scheduling/NN/scheduling optimizations/NNS/optimizations that/WDT/that exploit/NN/exploit disk/VBP/disk idle/JJ/idle times/NNS/times are/VBP/are discussed/VBN/discussed in/IN/in lumb/NN/lumb et/NN/et al/NNP/al. /NNP/[ 2000/CD/2000 /CD/] /./. worthington/NN/worthington et/NN/et al/NNP/al. /NNP/[ 1994/CD/1994 /CD/] discuss/NNS/discuss disk/NN/disk performance/NN/performance and/CC/and show/NN/show the/DT/the negligible/JJ/negligible performance/NN/performance impact/NN/impact of/IN/of defect/NN/defect management/NNP/management. the/DT/the placement/NN/placement of/IN/of hot/JJ/hot data/NNS/data to/TO/to improve/VB/improve seek/NN/seek times/NNS/times has/VBZ/has been/VBN/been considered/VBN/considered by/IN/by ruemmler/NN/ruemmler and/CC/and wilkes/VBZ/wilkes /:/[ 1991/CD/1991 /CD/] and/CC/and akyurek/NN/akyurek and/CC/and salen'l/JJ/salen'l /NN/[ 1993/CD/1993 /CD/] /./. ruemmler/NN/ruemmler and/CC/and wilkes/VBZ/wilkes /:/[ 1994/CD/1994 /CD/] describe/NN/describe an/DT/an accurate/JJ/accurate performance/NN/performance model/NN/model for/IN/for a/DT/a modern/JJ/modern disk/NN/disk drive/NNP/drive. worthington/NN/worthington et/NN/et al/NNP/al. /NNP/[ 1995/CD/1995 /CD/] tell/NN/tell how/WRB/how to/TO/to determine/VB/determine low-level/JJ/low-level disk/NN/disk properties/NNS/properties such/JJ/such as/IN/as the/DT/the zone/NN/zone structure/NN/structure /,/, and/CC/and this/DT/this work/NN/work is/VBZ/is further/RBR/further advanced/VBN/advanced by/IN/by schindler/NN/schindler and/CC/and gregory/NN/gregory /:/[ 1999/CD/1999 /CD/] /./. disk/NN/disk power/NN/power management/NN/management issues/NNS/issues are/VBP/are discussed/VBN/discussed in/IN/in douglis/NNS/douglis et/VBP/et al/NNP/al. /NNP/[ 1994l/CD/1994l douglis/NNS/douglis et/VBP/et al/NNP/al. /NNP/[ 1995l/CD/1995l greenawalt/NN/greenawalt /:/[ 1994l/CD/1994l and/CC/and golding/VBG/golding et/NN/et al/NNP/al. /NNP/[ 1995/CD/1995 /CD/] /./. the/DT/the i/0/NN/i/0 size/NN/size and/CC/and randomness/NN/randomness of/IN/of the/DT/the workload/NN/workload has/VBZ/has a/DT/a considerable/JJ/considerable influence/NN/influence on/IN/on disk/NN/disk performance/NNP/performance. ousterhout/IN/ousterhout et/NN/et al/NNP/al. /NNP/[ 1985/CD/1985 /CD/] and/CC/and ruemmler/NN/ruemmler and/CC/and wilkes/VBZ/wilkes /:/[ 1993/CD/1993 /CD/] report/NN/report numerous/JJ/numerous interesting/NN/interesting workload/NN/workload characteristics/NNS/characteristics /,/, including/VBG/including that/IN/that most/JJS/most files/NNS/files are/VBP/are smalt/VBN/smalt most/JJS/most newly/RB/newly created/VBN/created files/NNS/files are/VBP/are deleted/VBN/deleted soon/RB/soon thereafter/JJR/thereafter /,/, most/RBS/most files/NNS/files that/WDT/that are/VBP/are opened/VBN/opened for/IN/for reading/NN/reading are/VBP/are read/VBN/read sequentially/RB/sequentially in/IN/in their/PRP$/their entirety/NN/entirety /,/, and/CC/and most/JJS/most seeks/NNS/seeks are/VBP/are short/NNP/short. mckusick/NN/mckusick et/NN/et al/NNP/al. /NNP/[ 1984/CD/1984 /CD/] describe/NN/describe the/DT/the berkeley/NN/berkeley fast/NN/fast file/NN/file system/NN/system /:/( ffs/NNS/ffs /VBP/) /,/, which/WDT/which uses/NNS/uses many/JJ/many sophisticated/JJ/sophisticated techniques/NNS/techniques to/TO/to obtain/VB/obtain good/JJ/good performance/NN/performance for/IN/for a/DT/a wide/JJ/wide variety/NN/variety of/IN/of workloads/NNP/workloads. mcvoy/NN/mcvoy and/CC/and kleiman/NN/kleiman /:/[ 1991/CD/1991 /CD/] discuss/NNS/discuss further/RB/further improvements/NNS/improvements to/TO/to the/DT/the basic/JJ/basic ffs/NNP/ffs. quinlan/NN/quinlan /:/[ 1991/CD/1991 /CD/] describes/NNS/describes how/WRB/how to/TO/to implement/VB/implement a/DT/a file/NN/file system/NN/system on/IN/on worm/NN/worm storage/NN/storage with/IN/with a/DT/a magnetic/JJ/magnetic disk/NN/disk cache/NN/cache ;/:/; richards/NNS/richards /VBP/[ 1990/CD/1990 /CD/] discusses/NNS/discusses a/DT/a file-system/JJ/file-system approach/NN/approach to/TO/to tertiary/JJ/tertiary storage/NNP/storage. maher/NN/maher et/NN/et al/NNP/al. /NNP/[ 1994/CD/1994 /CD/] give/JJ/give an/DT/an overview/NN/overview of/IN/of the/DT/the integration/NN/integration of/IN/of distributed/VBN/distributed file/NN/file systems/NNS/systems and/CC/and tertiary/JJ/tertiary storage/NN/storage /./. the/DT/the concept/NN/concept of/IN/of a/DT/a storage/NN/storage hierarchy/NN/hierarchy has/VBZ/has been/VBN/been studied/VBN/studied for/IN/for more/JJR/more than/IN/than thirty/NN/thirty years/NNP/years. for/IN/for instance/NN/instance /,/, a/DT/a 1970/CD/1970 paper/NN/paper by/IN/by mattson/NN/mattson et/NN/et al/NNP/al. /NNP/[ 1970/CD/1970 /CD/] describes/NNS/describes a/DT/a mathematical/JJ/mathematical approach/NN/approach to/TO/to predicting/VBG/predicting the/DT/the performance/NN/performance of/IN/of a/DT/a storage/NN/storage hierarchy/NN/hierarchy /./. alt/NN/alt /:/[ 1993/CD/1993 /CD/] describes/NNS/describes the/DT/the accommodation/NN/accommodation of/IN/of removable/JJ/removable storage/NN/storage in/IN/in a/DT/a commercial/JJ/commercial operating/NN/operating system/NN/system /,/, and/CC/and miller/NN/miller and/CC/and katz/NN/katz /:/[ 1993/CD/1993 /CD/] describe/NN/describe the/DT/the characteristics/NNS/characteristics of/IN/of tertiary-storage/JJ/tertiary-storage access/NN/access in/IN/in a/DT/a supercomputing/NN/supercomputing environment/NNP/environment. benjamin/NN/benjamin /:/[ 1990/CD/1990 /CD/] gives/NNS/gives an/DT/an overview/NN/overview of/IN/of the/DT/the massive/JJ/massive storage/NN/storage requirements/NNS/requirements for/IN/for the/DT/the eosdis/NNS/eosdis project/VBP/project at/IN/at nasa/NNP/nasa. management/NN/management and/CC/and use/VB/use of/IN/of network-attached/JJ/network-attached disks/NNS/disks and/CC/and programmable/JJ/programmable 553/CD/553 disks/NNS/disks are/VBP/are discussed/VBN/discussed in/IN/in gibson/NN/gibson et/NN/et al/NNP/al. /NNP/[ 1997b/CD/1997b t/NN/t gibson/NN/gibson et/NN/et al/NNP/al. /NNP/[ 1997at/CD/1997at riedel/NN/riedel et/NN/et al/NN/al /./. /NN/[ 1998t/CD/1998t and/CC/and lee/NN/lee and/CC/and thekkath/NN/thekkath /:/[ 1996/CD/1996 /CD/] /./. holographic/JJ/holographic storage/NN/storage technology/NN/technology is/VBZ/is the/DT/the subject/NN/subject of/IN/of an/DT/an article/NN/article by/IN/by psaltis/NN/psaltis and/CC/and mok/NN/mok /:/[ 1995/CD/1995 /CD/] ;/:/; a/DT/a collection/NN/collection of/IN/of papers/NNS/papers on/IN/on this/DT/this topic/JJ/topic dating/NN/dating from/IN/from 1963/CD/1963 has/VBZ/has been/VBN/been assembled/VBN/assembled by/IN/by sincerbox/NN/sincerbox /:/[ 1994/CD/1994 /CD/] /./. asthana/NN/asthana and/CC/and finkelstein/NN/finkelstein /:/[ 1995/CD/1995 /CD/] describe/NN/describe several/JJ/several emerging/VBG/emerging storage/NN/storage technologies/NNS/technologies /,/, including/VBG/including holographic/JJ/holographic storage/NN/storage /,/, optical/JJ/optical tape/NN/tape /,/, and/CC/and electron/NN/electron trapping/NNP/trapping. toigo/NN/toigo /:/[ 2000/CD/2000 /CD/] gives/NNS/gives an/DT/an in-depth/JJ/in-depth description/NN/description of/IN/of modern/JJ/modern disk/NN/disk technology/NN/technology and/CC/and several/JJ/several potential/JJ/potential future/JJ/future storage/NN/storage technologies/NNS/technologies /./. 13.1/CD/13.1 r/NN/r the/DT/the two/CD/two main/JJ/main jobs/NNS/jobs of/IN/of a/DT/a computer/NN/computer are/VBP/are i/0/-NONE-/i/0 and/CC/and processing/NNP/processing. in/IN/in many/JJ/many cases/NNS/cases /,/, the/DT/the main/JJ/main job/NN/job is/VBZ/is i/0/-NONE-/i/0 /,/, and/CC/and the/DT/the processing/NN/processing is/VBZ/is merely/RB/merely incidental/NNP/incidental. for/IN/for instance/NN/instance /,/, when/WRB/when we/PRP/we browse/VBP/browse a/DT/a web/NN/web page/NN/page or/CC/or edit/NN/edit a/DT/a file/NN/file /,/, our/PRP$/our immediate/JJ/immediate interest/NN/interest is/VBZ/is to/TO/to read/VB/read or/CC/or enter/JJR/enter some/DT/some information/NN/information /,/, not/RB/not to/TO/to compute/VB/compute an/DT/an answer/NN/answer /./. the/DT/the role/NN/role of/IN/of the/DT/the operating/NN/operating system/NN/system in/IN/in computer/NN/computer i/0/-NONE-/i/0 is/VBZ/is to/TO/to manage/NN/manage and/CC/and control/NN/control i/0/-NONE-/i/0 operations/NNS/operations and/CC/and i/0/-NONE-/i/0 devices/NNP/devices. although/IN/although related/JJ/related topics/NNS/topics appear/VBP/appear in/IN/in other/JJ/other chapters/NNS/chapters /,/, here/RB/here we/PRP/we bring/VBG/bring together/RB/together the/DT/the pieces/NNS/pieces to/TO/to paint/VB/paint a/DT/a complete/JJ/complete picture/NN/picture of/IN/of i/0/NNP/i/0. first/JJ/first /,/, we/PRP/we describe/VBP/describe the/DT/the basics/NNS/basics of/IN/of i/o/NNP/i/o hardware/NN/hardware /,/, because/IN/because the/DT/the nature/NN/nature of/IN/of the/DT/the hardware/NN/hardware interface/NN/interface places/NNS/places constraints/NNS/constraints on/IN/on the/DT/the internal/JJ/internal facilities/NNS/facilities of/IN/of the/DT/the operating/NN/operating system/NNP/system. next/JJ/next /,/, we/PRP/we discuss/VBP/discuss the/DT/the i/0/NNP/i/0 services/NNS/services provided/VBN/provided by/IN/by the/DT/the operating/NN/operating system/NN/system and/CC/and the/DT/the embodiment/NN/embodiment of/IN/of these/DT/these services/NNS/services in/IN/in the/DT/the application/NN/application i/0/-NONE-/i/0 interface/NNP/interface. then/RB/then /,/, we/PRP/we explain/VBP/explain how/WRB/how the/DT/the operating/NN/operating system/NN/system bridges/NNS/bridges the/DT/the gap/NN/gap between/IN/between the/DT/the hardware/NN/hardware interface/NN/interface and/CC/and the/DT/the application/NN/application interface/NNP/interface. we/PRP/we also/RB/also discuss/VBZ/discuss the/DT/the unix/NN/unix system/NN/system v/NN/v streams/NNS/streams mechanism/NN/mechanism /,/, which/WDT/which enables/NNS/enables an/DT/an application/NN/application to/TO/to assemble/VB/assemble pipelines/NNS/pipelines of/IN/of driver/NN/driver code/NN/code dynamically/NNP/dynamically. finally/RB/finally /,/, we/PRP/we discuss/VBP/discuss the/DT/the performance/NN/performance aspects/NNS/aspects of/IN/of i/o/NNP/i/o and/CC/and the/DT/the principles/NNS/principles of/IN/of operating-system/JJ/operating-system design/NN/design that/WDT/that improve/VB/improve i/0/-NONE-/i/0 performance/NN/performance /./. to/TO/to explore/VB/explore the/DT/the structure/NN/structure of/IN/of an/DT/an operating/NN/operating system/NN/system 's/POS/'s 1/0/CD/1/0 subsystem/NN/subsystem /./. to/TO/to discuss/VB/discuss the/DT/the principles/NNS/principles and/CC/and complexities/NNS/complexities of/IN/of 110/CD/110 hardware/NN/hardware /./. to/TO/to explain/VB/explain the/DT/the performance/NN/performance aspects/NNS/aspects of/IN/of 110/CD/110 hardware/NN/hardware and/CC/and software/NN/software /./. the/DT/the control/NN/control of/IN/of devices/NNS/devices connected/VBN/connected to/TO/to the/DT/the computer/NN/computer is/VBZ/is a/DT/a major/JJ/major concern/NN/concern of/IN/of operating-system/JJ/operating-system designers/NNP/designers. because/IN/because i/o/NNP/i/o devices/NNS/devices vary/JJ/vary so/RB/so widely/RB/widely in/IN/in their/PRP$/their function/NN/function and/CC/and speed/VBD/speed /CD/( consider/NN/consider a/DT/a mouse/NN/mouse /,/, a/DT/a hard/JJ/hard disk/NN/disk /,/, and/CC/and a/DT/a cd-rom/JJ/cd-rom jukebox/NN/jukebox /:/) /,/, varied/VBD/varied methods/NNS/methods are/VBP/are needed/VBN/needed to/TO/to control/NN/control them/NNP/them. these/DT/these methods/NNS/methods form/NN/form the/DT/the i/0/NN/i/0 subsystem/NN/subsystem of/IN/of the/DT/the kernet/NN/kernet which/WDT/which separates/VBZ/separates the/DT/the rest/NN/rest of/IN/of the/DT/the kernel/NN/kernel from/IN/from the/DT/the complexities/NNS/complexities of/IN/of managing/VBG/managing i/0/-NONE-/i/0 devices/NNS/devices /./. 555/CD/555 556/CD/556 chapter/NN/chapter 13/CD/13 13.2/CD/13.2 i/o-device/JJ/i/o-device technology/NN/technology exhibits/NNS/exhibits two/CD/two conflicting/VBG/conflicting trends/NNP/trends. on/IN/on the/DT/the one/CD/one hand/NN/hand /,/, we/PRP/we see/VBP/see increasing/VBG/increasing standardization/NN/standardization of/IN/of software/NN/software and/CC/and hardware/NN/hardware interfaces/NNP/interfaces. this/DT/this trend/NN/trend helps/VBZ/helps 11s/CD/11s to/TO/to incorporate/VB/incorporate improved/VBN/improved device/NN/device generations/NNS/generations into/IN/into existing/VBG/existing computers/NNS/computers and/CC/and operating/NN/operating systems/NNP/systems. on/IN/on the/DT/the other/JJ/other hand/NN/hand /,/, we/PRP/we see/VBP/see an/DT/an increasingly/RB/increasingly broad/JJ/broad variety/NN/variety of/IN/of 1/0/CD/1/0 devices/NNP/devices. some/DT/some new/JJ/new devices/NNS/devices are/VBP/are so/RB/so unlike/IN/unlike previous/JJ/previous devices/NNS/devices that/WDT/that it/PRP/it is/VBZ/is a/DT/a challenge/NN/challenge to/TO/to incorporate/VB/incorporate them/PRP/them into/IN/into our/PRP$/our computers/NNS/computers and/CC/and operating/NN/operating systems/NNP/systems. this/DT/this challenge/NN/challenge is/VBZ/is met/VBN/met by/IN/by a/DT/a combination/NN/combination of/IN/of hardware/NN/hardware and/CC/and software/NN/software techniques/NNP/techniques. the/DT/the basic/JJ/basic i/0/-NONE-/i/0 hardware/NN/hardware elements/NNS/elements /,/, such/JJ/such as/IN/as ports/NNS/ports /,/, buses/NNS/buses /,/, and/CC/and device/NN/device controllers/NNS/controllers /,/, accommodate/VBP/accommodate a/DT/a wide/JJ/wide variety/NN/variety of/IN/of i/0/-NONE-/i/0 devices/NNP/devices. to/TO/to encapsulate/VB/encapsulate the/DT/the details/NNS/details and/CC/and oddities/NNS/oddities of/IN/of different/JJ/different devices/NNS/devices /,/, the/DT/the kernel/NN/kernel of/IN/of an/DT/an operating/NN/operating system/NN/system is/VBZ/is structured/VBN/structured to/TO/to use/VB/use device-driver/JJ/device-driver modules/NNP/modules. the/DT/the present/NN/present a/DT/a uniform/NN/uniform deviceaccess/NN/deviceaccess interface/NN/interface to/TO/to the/DT/the i/0/NN/i/0 subsystem/NN/subsystem /,/, much/RB/much as/IN/as system/NN/system calls/NNS/calls provide/VB/provide a/DT/a standard/JJ/standard interface/NN/interface between/IN/between the/DT/the application/NN/application and/CC/and the/DT/the operating/NN/operating system/NN/system /./. computers/NNS/computers operate/VBP/operate a/DT/a great/JJ/great many/JJ/many kinds/NNS/kinds of/IN/of devices/NNP/devices. most/RBS/most fit/JJ/fit into/IN/into the/DT/the general/JJ/general categories/NNS/categories of/IN/of storage/NN/storage devices/NNS/devices /:/( disks/NNS/disks /,/, tapes/NNS/tapes /:/) /,/, transmission/NN/transmission devices/NNS/devices /:/( network/NN/network cards/NNS/cards /,/, modems/NNS/modems /:/) /,/, and/CC/and human-interface/NN/human-interface devices/NNS/devices /:/( screen/NN/screen /,/, keyboard/NN/keyboard /,/, mouse/NN/mouse /:/) /./. other/JJ/other devices/NNS/devices are/VBP/are more/RBR/more specialized/VBN/specialized /,/, s11ch/NNP/s11ch as/IN/as those/DT/those involved/VBN/involved in/IN/in the/DT/the steering/NN/steering of/IN/of a/DT/a military/JJ/military fighter/NN/fighter jet/NN/jet or/CC/or a/DT/a space/NN/space shuttle/NNP/shuttle. in/IN/in these/DT/these aircraft/NN/aircraft /,/, a/DT/a human/NN/human gives/VBZ/gives input/NN/input to/TO/to the/DT/the flight/NN/flight computer/NN/computer via/IN/via a/DT/a joystick/NN/joystick and/CC/and foot/NN/foot pedals/NNS/pedals /,/, and/CC/and the/DT/the computer/NN/computer sends/NNS/sends output/VBD/output commands/NNS/commands that/IN/that cause/NN/cause motors/NNS/motors to/TO/to move/VB/move rudders/NNS/rudders /,/, flaps/RB/flaps /,/, and/CC/and thrusters/NNS/thrusters /./. despite/IN/despite the/DT/the incredible/JJ/incredible variety/NN/variety of/IN/of i/0/-NONE-/i/0 devices/NNS/devices /,/, though/IN/though /,/, we/PRP/we need/VBP/need only/RB/only a/DT/a few/JJ/few concepts/NNS/concepts to/TO/to understand/VB/understand how/WRB/how the/DT/the devices/NNS/devices are/VBP/are attached/VBN/attached and/CC/and how/WRB/how the/DT/the software/NN/software can/MD/can control/NN/control the/DT/the hardware/NN/hardware /./. a/DT/a device/NN/device communicates/VBZ/communicates with/IN/with a/DT/a computer/NN/computer system/NN/system by/IN/by sending/NN/sending signals/NNS/signals over/IN/over a/DT/a cable/JJ/cable or/CC/or even/RB/even through/IN/through the/DT/the air/NNP/air. the/DT/the device/NN/device communicates/VBZ/communicates with/IN/with the/DT/the machine/NN/machine via/IN/via a/DT/a connection/NN/connection point/NN/point /,/, or/CC/or example/NN/example /,/, a/DT/a serial/JJ/serial port/NNP/port. if/IN/if devices/NNS/devices use/VBP/use a/DT/a common/JJ/common set/NN/set of/IN/of wires/NNS/wires /,/, the/DT/the connection/NN/connection is/VBZ/is called/VBN/called a/DT/a bus/NNP/bus. a/DT/a is/VBZ/is a/DT/a set/NN/set of/IN/of wires/NNS/wires and/CC/and a/DT/a rigidly/RB/rigidly defined/VBN/defined protocol/NN/protocol that/IN/that specifies/NNS/specifies a/DT/a set/NN/set of/IN/of messages/NNS/messages that/WDT/that can/MD/can be/VB/be sent/VBN/sent on/IN/on the/DT/the wires/NNS/wires /./. in/IN/in terms/NNS/terms of/IN/of the/DT/the electronics/NNS/electronics /,/, the/DT/the messages/NNS/messages are/VBP/are conveyed/VBN/conveyed by/IN/by patterns/NNS/patterns of/IN/of electrical/JJ/electrical voltages/NNS/voltages applied/VBD/applied to/TO/to the/DT/the wires/NNS/wires with/IN/with defined/VBN/defined timings/NNP/timings. when/WRB/when device/NN/device a/DT/a has/VBZ/has a/DT/a cable/JJ/cable that/IN/that plugs/NNS/plugs into/IN/into device/NN/device b/NN/b /,/, and/CC/and device/NN/device b/NN/b has/VBZ/has a/DT/a cable/JJ/cable that/IN/that plugs/NNS/plugs into/IN/into device/NN/device c/NN/c /,/, and/CC/and device/NN/device c/NN/c plugs/NNS/plugs into/IN/into a/DT/a port/NN/port on/IN/on the/DT/the computer/NN/computer /,/, this/DT/this arrangement/NN/arrangement is/VBZ/is called/VBN/called a/DT/a a/DT/a daisy/NN/daisy chain/NN/chain usually/RB/usually operates/VBZ/operates as/IN/as a/DT/a bus/NN/bus /./. buses/NNS/buses are/VBP/are used/VBN/used widely/RB/widely in/IN/in computer/NN/computer architecture/NN/architecture and/CC/and vary/JJ/vary in/IN/in their/PRP$/their signaling/NN/signaling methods/NNS/methods /,/, speed/VBD/speed /,/, throughput/VBN/throughput /,/, and/CC/and connection/NN/connection methods/NNP/methods. a/DT/a typical/JJ/typical pc/NN/pc bus/VBZ/bus structure/NN/structure appears/VBZ/appears in/IN/in figure/NN/figure 13.1/CD/13.1. this/DT/this figure/NN/figure shows/VBZ/shows a/DT/a /NN/( the/DT/the common/JJ/common pc/NN/pc system/NN/system bus/VBZ/bus /:/) that/IN/that connects/NNS/connects the/DT/the processor-memory/JJ/processor-memory subsystem/NN/subsystem to/TO/to the/DT/the fast/NN/fast devices/NNS/devices and/CC/and an/DT/an that/WDT/that connects/VBZ/connects relatively/RB/relatively slow/JJ/slow devices/NNS/devices /,/, such/JJ/such as/IN/as the/DT/the keyboard/NN/keyboard and/CC/and serial/JJ/serial and/CC/and usb/NN/usb ports/NNP/ports. in/IN/in the/DT/the upper-right/JJ/upper-right portion/NN/portion of/IN/of the/DT/the figure/NN/figure /,/, four/CD/four disks/NNS/disks are/VBP/are c01mected/VBN/c01mected together/RB/together on/IN/on a/DT/a scsi/NN/scsi bus/NN/bus plugged/VBD/plugged into/IN/into a/DT/a scsi/NN/scsi controller/NN/controller /./. other/JJ/other common/JJ/common buses/NNS/buses used/VBN/used to/TO/to interconnect/VB/interconnect main/JJ/main parts/NNS/parts of/IN/of a/DT/a computer/NN/computer include/NN/include with/IN/with up/IN/up to/TO/to 4.3/CD/4.3 gb/NN/gb ;/:/; /:/( pcie/NN/pcie /:/) /,/, with/IN/with throughput/NN/throughput up/IN/up with/IN/with throughput/NN/throughput up/IN/up to/TO/to 20/CD/20 gb/NN/gb /./. is/VBZ/is a/DT/a collection/NN/collection of/IN/of electronics/NNS/electronics that/WDT/that can/MD/can operate/VB/operate a/DT/a port/NN/port /,/, a/DT/a bus/NN/bus /,/, or/CC/or a/DT/a device/NNP/device. a/DT/a serial-port/JJ/serial-port controller/NN/controller is/VBZ/is a/DT/a simple/JJ/simple device/NN/device controller/NNP/controller. it/PRP/it is/VBZ/is a/DT/a single/JJ/single chip/NN/chip /:/( or/CC/or portion/NN/portion of/IN/of a/DT/a chip/NN/chip /:/) in/IN/in the/DT/the computer/NN/computer that/IN/that controls/NNS/controls the/DT/the signals/NNS/signals on/IN/on the/DT/the 13.2/CD/13.2 557/CD/557 figure/NN/figure 13.1/CD/13.1 a/DT/a typical/JJ/typical pc/NN/pc bus/VBZ/bus structure/NN/structure /./. wires/NNS/wires of/IN/of a/DT/a serial/JJ/serial port/NNP/port. by/IN/by contrast/NN/contrast /,/, a/DT/a scsi/NN/scsi bus/NN/bus controller/NN/controller is/VBZ/is not/RB/not simple/NNP/simple. because/IN/because the/DT/the scsi/NN/scsi protocol/NN/protocol is/VBZ/is complex/JJ/complex /,/, the/DT/the scsi/NN/scsi bus/VBZ/bus controller/NN/controller is/VBZ/is often/RB/often implemented/VBN/implemented as/IN/as a/DT/a separate/JJ/separate circuit/NN/circuit board/NN/board /:/( or/CC/or a/DT/a that/IN/that plugs/NNS/plugs into/IN/into the/DT/the computer/NNP/computer. it/PRP/it typically/RB/typically contains/VBZ/contains a/DT/a processor/NN/processor /,/, microcode/NN/microcode /,/, and/CC/and some/DT/some private/JJ/private memory/NN/memory to/TO/to enable/JJ/enable it/PRP/it to/TO/to process/NN/process the/DT/the scsi/NN/scsi protocol/NN/protocol messages/NNP/messages. some/DT/some devices/NNS/devices have/VBP/have their/PRP$/their own/JJ/own built-in/NN/built-in controllers/NNP/controllers. if/IN/if you/PRP/you look/VBP/look at/IN/at a/DT/a disk/NN/disk drive/NN/drive /,/, you/PRP/you will/MD/will see/VB/see a/DT/a circuit/NN/circuit board/NN/board attached/VBD/attached to/TO/to one/CD/one side/NNP/side. this/DT/this board/NN/board is/VBZ/is the/DT/the disk/NN/disk controller/NNP/controller. it/PRP/it implements/VBZ/implements the/DT/the disk/NN/disk side/NN/side of/IN/of the/DT/the protocol/NN/protocol for/IN/for some/DT/some kind/NN/kind of/IN/of com1ection-scsi/NNP/com1ection-scsi or/CC/or ata/NNS/ata /,/, for/IN/for instance/NNP/instance. it/PRP/it has/VBZ/has microcode/VBN/microcode and/CC/and a/DT/a processor/NN/processor to/TO/to do/VB/do many/JJ/many tasks/NNS/tasks /,/, such/JJ/such as/IN/as bad-sector/NN/bad-sector mapping/VBG/mapping /,/, prefetching/VBG/prefetching /,/, buffering/VBG/buffering /,/, and/CC/and caching/VBG/caching /./. how/WRB/how can/MD/can the/DT/the processor/NN/processor give/VBP/give commands/NNS/commands and/CC/and data/NNS/data to/TO/to a/DT/a controller/NN/controller to/TO/to accomplish/VB/accomplish an/DT/an i/0/-NONE-/i/0 transfer/NN/transfer the/DT/the short/JJ/short answer/NN/answer is/VBZ/is that/IN/that the/DT/the controller/NN/controller has/VBZ/has one/CD/one or/CC/or more/JJR/more registers/NNS/registers for/IN/for data/NNS/data and/CC/and control/NN/control signals/NNP/signals. the/DT/the processor/NN/processor communicates/VBZ/communicates with/IN/with the/DT/the controller/NN/controller by/IN/by reading/NN/reading and/CC/and writing/VBG/writing bit/NN/bit patterns/NNS/patterns in/IN/in these/DT/these registers/NNP/registers. one/CD/one way/NN/way in/IN/in which/WDT/which this/DT/this communication/NN/communication can/MD/can occur/VB/occur is/VBZ/is through/IN/through the/DT/the use/NN/use of/IN/of special/JJ/special i/0/-NONE-/i/0 instructions/NNS/instructions that/WDT/that specify/NN/specify the/DT/the transfer/NN/transfer of/IN/of a/DT/a byte/NN/byte or/CC/or word/NN/word to/TO/to an/DT/an i/0/NN/i/0 port/NN/port address/NNP/address. the/DT/the i/0/NNP/i/0 instruction/NN/instruction triggers/NNS/triggers bus/VBZ/bus lines/NNS/lines to/TO/to select/VB/select the/DT/the proper/NN/proper device/NN/device and/CC/and to/TO/to move/VB/move bits/NNS/bits into/IN/into or/CC/or out/IN/out of/IN/of a/DT/a device/NN/device register/NNP/register. alternatively/RB/alternatively /,/, the/DT/the device/NN/device controller/NN/controller can/MD/can support/VB/support in/IN/in this/DT/this case/NN/case /,/, the/DT/the device-control/NN/device-control registers/NNS/registers are/VBP/are mapped/VBN/mapped into/IN/into the/DT/the address/NN/address space/NN/space of/IN/of the/DT/the processor/NNP/processor. the/DT/the cpu/NN/cpu executes/VBZ/executes i/0/-NONE-/i/0 requests/VBZ/requests using/VBG/using the/DT/the standard/JJ/standard data-transfer/NN/data-transfer instructions/NNS/instructions to/TO/to read/VB/read and/CC/and write/VB/write the/DT/the device-control/NN/device-control registers/NNS/registers /./. some/DT/some systems/NNS/systems use/VBP/use both/DT/both techniques/NNP/techniques. for/IN/for instance/NN/instance /,/, pcs/NNS/pcs use/VBP/use i/0/-NONE-/i/0 instructions/NNS/instructions to/TO/to control/NN/control some/DT/some devices/NNS/devices and/CC/and memory-mapped/JJ/memory-mapped i/0/NN/i/0 to/TO/to control/NN/control others/NNP/others. figure/NN/figure 13.2/CD/13.2 shows/NNS/shows the/DT/the usual/JJ/usual i/o/NN/i/o port/NN/port addresses/NNS/addresses for/IN/for pcs/NNP/pcs. the/DT/the graphics/NNS/graphics controller/VBP/controller has/VBZ/has i/o/-NONE-/i/o ports/NNS/ports for/IN/for basic/JJ/basic control/NN/control operations/NNS/operations /,/, but/CC/but the/DT/the controller/NN/controller has/VBZ/has a/DT/a large/JJ/large memory558/NNP/memory558 chapter/NN/chapter 13/CD/13 000-00f/CD/000-00f dma/NN/dma controller/NN/controller 020-021/CD/020-021 interrupt/NN/interrupt controller/NN/controller 040-043/CD/040-043 timer/NN/timer 200-20f/CD/200-20f game/NN/game controller/NN/controller 2f8-2ff/CD/2f8-2ff serial/JJ/serial port/NN/port /:/( secondary/JJ/secondary /NN/) 320-32f/CD/320-32f hard-disk/JJ/hard-disk controller/NN/controller 378-37f/CD/378-37f parallel/NN/parallel port/NN/port 3d0-3df/CD/3d0-3df graphics/NNS/graphics controller/JJR/controller 3f0-3f7/CD/3f0-3f7 diskette-drive/JJ/diskette-drive controller/NN/controller 3f8-3ff/CD/3f8-3ff serial/JJ/serial port/NN/port /:/( primary/JJ/primary /NN/) figure/NN/figure 13.2/CD/13.2 device/NN/device 1/0/CD/1/0 port/NN/port locations/NNS/locations on/IN/on pcs/NNS/pcs /:/( partial/JJ/partial /NN/) /./. mapped/VBN/mapped region/NN/region to/TO/to hold/VB/hold screen/JJ/screen contents/NNP/contents. the/DT/the process/NN/process sends/NNS/sends output/VBD/output to/TO/to the/DT/the screen/NN/screen by/IN/by writing/NN/writing data/NNS/data into/IN/into the/DT/the memory-mapped/JJ/memory-mapped region/NNP/region. the/DT/the controller/NN/controller generates/VBZ/generates the/DT/the screen/NN/screen image/NN/image based/VBN/based on/IN/on the/DT/the contents/NNS/contents of/IN/of this/DT/this memory/NNP/memory. this/DT/this technique/NN/technique is/VBZ/is simple/JJ/simple to/TO/to use/NNP/use. moreover/RB/moreover /,/, writing/VBG/writing millions/NNS/millions of/IN/of bytes/NNS/bytes to/TO/to the/DT/the graphics/NNS/graphics memory/NN/memory is/VBZ/is faster/JJR/faster than/IN/than issuing/VBG/issuing millions/NNS/millions of/IN/of i/0/-NONE-/i/0 instructions/NNP/instructions. but/CC/but the/DT/the ease/NN/ease of/IN/of writing/NN/writing to/TO/to a/DT/a memory-mapped/JJ/memory-mapped i/0/NN/i/0 controller/NN/controller is/VBZ/is offset/VBN/offset by/IN/by a/DT/a disadvantage/NNP/disadvantage. because/IN/because a/DT/a common/JJ/common type/NN/type of/IN/of software/NN/software fault/NN/fault is/VBZ/is a/DT/a write/JJ/write through/IN/through an/DT/an incorrect/NN/incorrect pointer/NN/pointer to/TO/to an/DT/an unintended/JJ/unintended region/NN/region of/IN/of memory/NN/memory /,/, a/DT/a memory-mapped/JJ/memory-mapped device/NN/device register/NN/register is/VBZ/is vulnerable/JJ/vulnerable to/TO/to accidental/JJ/accidental modification/NNP/modification. of/IN/of course/NN/course /,/, protected/VBN/protected memory/NN/memory helps/NNS/helps to/TO/to reduce/VB/reduce this/DT/this risk/NN/risk /./. an/DT/an i/0/-NONE-/i/0 port/NN/port typically/RB/typically consists/VBZ/consists of/IN/of four/CD/four registers/NNS/registers /,/, called/VBN/called the/DT/the /NNP/( 1/CD/1 /CD/) status/NN/status /,/, /:/( 2/CD/2 /CD/) control/NN/control /,/, /:/( 3/LS/3 /:/) data-in/JJ/data-in /,/, and/CC/and /:/( 4/CD/4 /CD/) data-out/-NONE-/data-out registers/NNS/registers /./. the/DT/the the/DT/the is/VBZ/is read/VBN/read by/IN/by the/DT/the host/NN/host to/TO/to get/VB/get input/VBN/input /./. is/VBZ/is written/VBN/written by/IN/by the/DT/the host/NN/host to/TO/to send/VB/send output/NN/output /./. the/DT/the contains/NNS/contains bits/VBZ/bits that/IN/that can/MD/can be/VB/be read/VBN/read by/IN/by the/DT/the host/NNP/host. these/DT/these bits/NNS/bits indicate/VBP/indicate states/NNS/states /,/, such/JJ/such as/IN/as whether/IN/whether the/DT/the current/JJ/current command/NN/command has/VBZ/has completed/VBN/completed /,/, whether/IN/whether a/DT/a byte/NN/byte is/VBZ/is available/JJ/available to/TO/to be/VB/be read/VBN/read from/IN/from the/DT/the data-in/JJ/data-in register/NN/register /,/, and/CC/and whether/IN/whether a/DT/a device/NN/device error/NN/error has/VBZ/has occurred/VBN/occurred /./. the/DT/the can/MD/can be/VB/be written/VBN/written by/IN/by the/DT/the host/NN/host to/TO/to start/VB/start a/DT/a command/NN/command or/CC/or to/TO/to change/VB/change the/DT/the nlode/NN/nlode of/IN/of a/DT/a device/NNP/device. for/IN/for instance/NN/instance /,/, a/DT/a certain/JJ/certain bit/NN/bit in/IN/in the/DT/the control/NN/control register/NN/register of/IN/of a/DT/a serial/JJ/serial port/NN/port chooses/NNS/chooses between/IN/between full-duplex/JJ/full-duplex and/CC/and half-duplex/JJ/half-duplex communication/NN/communication /,/, another/DT/another bit/NN/bit enables/VBZ/enables parity/NN/parity checking/VBG/checking /,/, a/DT/a third/JJ/third bit/NN/bit sets/VBZ/sets the/DT/the word/NN/word length/NN/length to/TO/to 7/CD/7 or/CC/or 8/CD/8 bits/NNS/bits /,/, and/CC/and other/JJ/other bits/NNS/bits select/VBP/select one/CD/one of/IN/of the/DT/the speeds/NNS/speeds supported/VBD/supported by/IN/by the/DT/the serial/JJ/serial port/NN/port /./. the/DT/the data/NNS/data registers/NNS/registers are/VBP/are typically/RB/typically 1/CD/1 to/TO/to 4/CD/4 bytes/NNS/bytes in/IN/in size/NNP/size. some/DT/some controllers/NNS/controllers have/VBP/have fifo/VBN/fifo chips/NNS/chips that/IN/that can/MD/can hold/VB/hold several/JJ/several bytes/NNS/bytes of/IN/of input/NN/input or/CC/or output/NN/output data/NNS/data to/TO/to expand/VB/expand the/DT/the capacity/NN/capacity of/IN/of the/DT/the controller/NN/controller beyond/NN/beyond the/DT/the size/NN/size of/IN/of the/DT/the data/NNS/data register/NNP/register. a/DT/a fifo/NN/fifo chip/NN/chip can/MD/can hold/VB/hold a/DT/a small/JJ/small burst/NN/burst of/IN/of data/NNS/data until/IN/until the/DT/the device/NN/device or/CC/or host/NN/host is/VBZ/is able/JJ/able to/TO/to receive/VB/receive those/DT/those data/NNS/data /./. 13.2/CD/13.2 559/CD/559 13.2.1/CD/13.2.1 polling/VBG/polling the/DT/the complete/JJ/complete protocol/NN/protocol for/IN/for interaction/NN/interaction between/IN/between the/DT/the host/NN/host and/CC/and a/DT/a controller/NN/controller can/MD/can be/VB/be intricate/JJ/intricate /,/, but/CC/but the/DT/the basic/JJ/basic handshaking/NN/handshaking notion/NN/notion is/VBZ/is simple/NNP/simple. we/PRP/we explain/VBP/explain handshaking/VBG/handshaking with/IN/with an/DT/an example/NNP/example. assume/NN/assume that/WDT/that 2/CD/2 bits/NNS/bits are/VBP/are used/VBN/used to/TO/to coordinate/VB/coordinate the/DT/the producer-consumer/JJ/producer-consumer relationship/NN/relationship between/IN/between the/DT/the controller/NN/controller and/CC/and the/DT/the host/NNP/host. the/DT/the controller/NN/controller indicates/VBZ/indicates its/PRP$/its state/NN/state through/IN/through the/DT/the busy/NN/busy bit/NN/bit in/IN/in the/DT/the status/NN/status register/NNP/register. /NNP/( recall/NN/recall that/WDT/that to/TO/to set/VB/set a/DT/a bit/NN/bit means/VBZ/means to/TO/to write/VB/write a/DT/a 1/CD/1 into/IN/into the/DT/the bit/NN/bit and/CC/and to/TO/to clear/VB/clear a/DT/a bit/NN/bit means/VBZ/means to/TO/to write/VB/write a/DT/a 0/-NONE-/0 into/IN/into it/NNP/it. /NNP/) the/DT/the controller/NN/controller sets/VBZ/sets the/DT/the busy/NN/busy bit/NN/bit when/WRB/when it/PRP/it is/VBZ/is busy/JJ/busy working/NN/working and/CC/and clears/NNS/clears the/DT/the busy/NN/busy bit/NN/bit when/WRB/when it/PRP/it is/VBZ/is ready/RB/ready to/TO/to accept/VB/accept the/DT/the next/JJ/next comm.and/NNP/comm.and. the/DT/the host/NN/host signals/VBZ/signals its/PRP$/its wishes/NNS/wishes via/IN/via the/DT/the command-ready/JJ/command-ready bit/NN/bit in/IN/in the/DT/the command/NN/command register/NNP/register. the/DT/the host/NN/host sets/VBZ/sets the/DT/the command-ready/JJ/command-ready bit/NN/bit when/WRB/when a/DT/a command/NN/command is/VBZ/is available/JJ/available for/IN/for the/DT/the controller/NN/controller to/TO/to execute/VB/execute /./. for/IN/for this/DT/this example/NN/example /,/, the/DT/the host/NN/host writes/VBZ/writes output/NN/output through/IN/through a/DT/a port/NN/port /,/, coordinating/VBG/coordinating with/IN/with the/DT/the controller/NN/controller by/IN/by handshaking/NN/handshaking as/IN/as follows/NNS/follows /./. the/DT/the host/NN/host repeatedly/RB/repeatedly reads/VBZ/reads the/DT/the busy/NN/busy bit/NN/bit until/IN/until that/DT/that bit/NN/bit becomes/VBZ/becomes clear/JJ/clear /./. the/DT/the host/NN/host sets/VBZ/sets the/DT/the write/NN/write bit/NN/bit in/IN/in the/DT/the command/NN/command register/NN/register and/CC/and writes/VBZ/writes a/DT/a byte/NN/byte into/IN/into the/DT/the data-out/JJ/data-out register/NN/register /./. the/DT/the host/NN/host sets/VBZ/sets the/DT/the command-ready/JJ/command-ready bit/NN/bit /./. when/WRB/when the/DT/the controller/NN/controller notices/NNS/notices that/WDT/that the/DT/the command-ready/JJ/command-ready bit/NN/bit is/VBZ/is set/VBN/set /,/, it/PRP/it sets/VBZ/sets the/DT/the busy/NN/busy bit/NN/bit /./. the/DT/the controller/NN/controller reads/NNS/reads the/DT/the command/NN/command register/NN/register and/CC/and sees/NNS/sees the/DT/the write/JJ/write command/NN/command /./. it/PRP/it reads/VBZ/reads the/DT/the data-out/NN/data-out register/NN/register to/TO/to get/VB/get the/DT/the byte/NN/byte and/CC/and does/VBZ/does the/DT/the i/o/NNP/i/o to/TO/to the/DT/the device/NN/device /./. the/DT/the controller/NN/controller clears/VBZ/clears the/DT/the command-ready/JJ/command-ready bit/NN/bit /,/, clears/NNS/clears the/DT/the error/NN/error bit/NN/bit in/IN/in the/DT/the status/NN/status register/NN/register to/TO/to indicate/VB/indicate that/IN/that the/DT/the device/NN/device i/o/-NONE-/i/o succeeded/VBD/succeeded /,/, and/CC/and clears/NNS/clears the/DT/the busy/NN/busy bit/NN/bit to/TO/to indicate/VB/indicate that/IN/that it/PRP/it is/VBZ/is finished/VBN/finished /./. this/DT/this loop/NN/loop is/VBZ/is repeated/VBN/repeated for/IN/for each/DT/each byte/NN/byte /./. in/IN/in step/NN/step 1/CD/1 /,/, the/DT/the host/NN/host is/VBZ/is or/CC/or it/PRP/it is/VBZ/is in/IN/in a/DT/a loop/NN/loop /,/, reading/NN/reading the/DT/the status/NN/status register/NN/register over/IN/over and/CC/and over/IN/over until/IN/until the/DT/the busy/NN/busy bit/NN/bit becomes/VBZ/becomes clear/NNP/clear. if/IN/if the/DT/the controller/NN/controller and/CC/and device/NN/device are/VBP/are fast/RB/fast /,/, this/DT/this method/NN/method is/VBZ/is a/DT/a reasonable/JJ/reasonable one/NNP/one. but/CC/but if/IN/if the/DT/the wait/NN/wait may/MD/may be/VB/be long/RB/long /,/, the/DT/the host/NN/host should/MD/should probably/RB/probably switch/VB/switch to/TO/to another/DT/another task/NNP/task. how/WRB/how /,/, then/RB/then /,/, does/VBZ/does the/DT/the host/NN/host know/NN/know when/WRB/when the/DT/the controller/NN/controller has/VBZ/has become/VBN/become idle/JJ/idle for/IN/for some/DT/some devices/NNS/devices /,/, the/DT/the host/NN/host must/MD/must service/NN/service the/DT/the device/NN/device quickly/RB/quickly /,/, or/CC/or data/NNS/data will/MD/will be/VB/be lost/NNP/lost. for/IN/for instance/NN/instance /,/, when/WRB/when data/NNS/data are/VBP/are streaming/VBG/streaming in/IN/in on/IN/on a/DT/a serial/JJ/serial port/NN/port or/CC/or from/IN/from a/DT/a keyboard/NN/keyboard /,/, the/DT/the small/JJ/small buffer/NN/buffer on/IN/on the/DT/the controller/NN/controller will/MD/will overflow/VB/overflow and/CC/and data/NNS/data will/MD/will be/VB/be lost/VBN/lost if/IN/if the/DT/the host/NN/host waits/VBZ/waits too/RB/too long/RB/long before/IN/before returning/VBG/returning to/TO/to read/VB/read the/DT/the bytes/NNS/bytes /./. in/IN/in many/JJ/many computer/NN/computer architectures/NNS/architectures /,/, three/CD/three cpu-instruction/NN/cpu-instruction cycles/NNS/cycles are/VBP/are sufficient/JJ/sufficient to/TO/to poll/VB/poll a/DT/a device/NN/device /:/: read/NN/read a/DT/a device/NN/device register/NN/register /,/, logical-and/NNP/logical-and to/TO/to extract/VB/extract a/DT/a status/NN/status bit/NN/bit /,/, and/CC/and branch/NN/branch if/IN/if not/RB/not zero/NNP/zero. clearly/RB/clearly /,/, the/DT/the basic/JJ/basic polling/NN/polling operation/NN/operation is/VBZ/is efficient/NNP/efficient. but/CC/but polling/VBG/polling becomes/NNS/becomes inefficient/NN/inefficient when/WRB/when it/PRP/it is/VBZ/is attempted/VBN/attempted repeatedly/RB/repeatedly yet/RB/yet rarely/RB/rarely finds/VBZ/finds a/DT/a device/NN/device to/TO/to be/VB/be ready/JJ/ready for/IN/for service/NN/service /,/, while/IN/while other/JJ/other useful/JJ/useful cpu/NN/cpu processing/NN/processing remains/VBZ/remains undone/NNP/undone. in/IN/in such/JJ/such instances/NNS/instances /,/, it/PRP/it may/MD/may be/VB/be more/RBR/more efficient/JJ/efficient to/TO/to arrange/VB/arrange for/IN/for the/DT/the hardware/NN/hardware controller/NN/controller to/TO/to notify/VB/notify the/DT/the cpu/NN/cpu when/WRB/when the/DT/the device/NN/device becomes/VBZ/becomes ready/JJ/ready for/IN/for service/NN/service /,/, rather/RB/rather than/IN/than to/TO/to require/VB/require the/DT/the cpu/NN/cpu to/TO/to poll/VB/poll repeatedly/RB/repeatedly for/IN/for an/DT/an i/0/JJ/i/0 completion/NNP/completion. the/DT/the hardware/NN/hardware mechanism/NN/mechanism that/WDT/that enables/VBZ/enables a/DT/a device/NN/device to/TO/to notify/VB/notify the/DT/the cpu/NN/cpu is/VBZ/is called/VBN/called an/DT/an 560/CD/560 chapter/NN/chapter 13/CD/13 7/CD/7 cpu/NN/cpu device/NN/device driver/NN/driver initiates/VBZ/initiates 1/0/CD/1/0 cpu/NN/cpu executing/VBG/executing checks/NNS/checks for/IN/for interrupts/NNS/interrupts between/IN/between instructions/NNS/instructions cpu/VBP/cpu resumes/NNS/resumes processing/VBG/processing of/IN/of interrupted/JJ/interrupted task/NN/task 1/0/CD/1/0 controller/NN/controller 4/CD/4 figure/NN/figure 13.3/CD/13.3 interrupt-driven/JJ/interrupt-driven 1/0/CD/1/0 cycle/NN/cycle /./. 13.2.2/CD/13.2.2 interrupts/NNS/interrupts the/DT/the basic/JJ/basic interrupt/NN/interrupt mechanism/NN/mechanism works/NNS/works as/IN/as follows/NNP/follows. the/DT/the cpu/NN/cpu hardware/NN/hardware has/VBZ/has a/DT/a wire/NN/wire called/VBN/called the/DT/the that/WDT/that the/DT/the cpu/NN/cpu senses/VBZ/senses after/IN/after executing/VBG/executing every/DT/every instruction/NNP/instruction. when/WRB/when the/DT/the cpu/NN/cpu detects/VBZ/detects that/IN/that a/DT/a controller/NN/controller has/VBZ/has asserted/VBN/asserted a/DT/a signal/NN/signal on/IN/on the/DT/the line/NN/line /,/, the/DT/the cpu/NN/cpu performs/NNS/performs a/DT/a state/NN/state save/NN/save and/CC/and jumps/NNS/jumps to/TO/to the/DT/the at/IN/at a/DT/a fixed/VBN/fixed address/NN/address in/IN/in memory/NNP/memory. the/DT/the interrupt/NN/interrupt handler/NN/handler determines/NNS/determines the/DT/the cause/NN/cause of/IN/of the/DT/the interrupt/JJ/interrupt /,/, performs/NNS/performs the/DT/the necessary/JJ/necessary processing/NN/processing /,/, performs/NNS/performs a/DT/a state/NN/state restore/NN/restore /,/, and/CC/and executes/VBZ/executes a/DT/a return/NN/return from/IN/from interrupt/NN/interrupt instruction/NN/instruction to/TO/to return/VB/return the/DT/the cpu/NN/cpu to/TO/to the/DT/the execution/NN/execution state/NN/state prior/RB/prior to/TO/to the/DT/the interrupt/NNP/interrupt. we/PRP/we say/VBP/say that/IN/that the/DT/the device/NN/device controller/NN/controller raises/VBZ/raises an/DT/an interrupt/JJ/interrupt by/IN/by asserting/NN/asserting a/DT/a signal/NN/signal on/IN/on the/DT/the interrupt/NN/interrupt request/NN/request line/NN/line /,/, the/DT/the cpu/NN/cpu catches/VBZ/catches the/DT/the interrupt/NN/interrupt and/CC/and dispatches/NNS/dispatches it/PRP/it to/TO/to the/DT/the interrupt/NN/interrupt handler/NN/handler /,/, and/CC/and the/DT/the handler/NN/handler clears/VBZ/clears the/DT/the interrupt/NN/interrupt by/IN/by servicing/NN/servicing the/DT/the device/NNP/device. figure/NN/figure 13.3/CD/13.3 summarizes/NNS/summarizes the/DT/the interrupt-driven/JJ/interrupt-driven i/0/-NONE-/i/0 cycle/NN/cycle /./. this/DT/this basic/JJ/basic interrupt/NN/interrupt mechanism/NN/mechanism enables/VBZ/enables the/DT/the cpu/NN/cpu to/TO/to respond/VB/respond to/TO/to an/DT/an asynchronous/JJ/asynchronous event/NN/event /,/, as/IN/as when/WRB/when a/DT/a device/NN/device controller/NN/controller becomes/VBZ/becomes ready/JJ/ready for/IN/for service/NNP/service. in/IN/in a/DT/a modern/JJ/modern operating/NN/operating system/NN/system /,/, however/RB/however /,/, we/PRP/we need/VBP/need nlore/RB/nlore sophisticated/JJ/sophisticated interrupthandling/NN/interrupthandling features/NNS/features /./. we/PRP/we need/VBP/need the/DT/the ability/NN/ability to/TO/to defer/VB/defer interrupt/JJ/interrupt handling/NN/handling during/IN/during critical/JJ/critical processing/NN/processing /./. 13.2/CD/13.2 561/CD/561 we/PRP/we need/VBP/need an/DT/an efficient/NN/efficient way/NN/way to/TO/to dispatch/VB/dispatch to/TO/to the/DT/the proper/NN/proper interrupt/NN/interrupt handler/NN/handler for/IN/for a/DT/a device/NN/device without/IN/without first/JJ/first polling/NN/polling all/DT/all the/DT/the devices/NNS/devices to/TO/to see/VB/see which/WDT/which one/CD/one raised/VBD/raised the/DT/the interrupt/NN/interrupt /./. we/PRP/we need/VBP/need multilevel/JJ/multilevel interrupts/NNS/interrupts /,/, so/RB/so that/IN/that the/DT/the operating/NN/operating system/NN/system can/MD/can distinguish/VB/distinguish between/IN/between high/JJ/high- and/CC/and low-priority/NN/low-priority interrupts/NNS/interrupts and/CC/and can/MD/can respond/VB/respond with/IN/with the/DT/the appropriate/JJ/appropriate degree/NN/degree of/IN/of urgency/NN/urgency /./. in/IN/in modern/JJ/modern computer/NN/computer hardware/NN/hardware /,/, these/DT/these three/CD/three features/NNS/features are/VBP/are provided/VBN/provided by/IN/by the/DT/the cpu/NN/cpu and/CC/and by/IN/by the/DT/the most/RBS/most cpus/JJ/cpus have/VBP/have two/CD/two interrupt/JJ/interrupt request/NN/request lines/NNP/lines. one/CD/one is/VBZ/is the/DT/the '/POS/' '/POS/' '/''/' '/NNP/'. which/WDT/which is/VBZ/is reserved/VBN/reserved for/IN/for events/NNS/events such/JJ/such as/IN/as unrecoverable/JJ/unrecoverable memory/NN/memory errors/NNS/errors /./. the/DT/the second/JJ/second interrupt/NN/interrupt line/NN/line is/VBZ/is it/PRP/it can/MD/can be/VB/be turned/VBN/turned off/RP/off by/IN/by the/DT/the cpu/NN/cpu before/IN/before the/DT/the execution/NN/execution of/IN/of critical/JJ/critical instruction/NN/instruction sequences/NNS/sequences that/WDT/that must/MD/must not/RB/not be/VB/be interrupted/VBN/interrupted /./. the/DT/the maskable/JJ/maskable interrupt/NN/interrupt is/VBZ/is used/VBN/used by/IN/by device/NN/device controllers/NNS/controllers to/TO/to request/NN/request service/NN/service /./. the/DT/the interrupt/NN/interrupt mechanism/NN/mechanism accepts/NNS/accepts an/DT/an number/NN/number that/IN/that selects/NNS/selects a/DT/a specific/JJ/specific interrupt-handling/JJ/interrupt-handling routine/NN/routine from/IN/from a/DT/a small/JJ/small set/NNP/set. in/IN/in most/JJS/most architectures/NNS/architectures /,/, this/DT/this address/NN/address is/VBZ/is an/DT/an offset/NN/offset in/IN/in a/DT/a table/NN/table called/VBN/called the/DT/the /./. this/DT/this vector/NN/vector contains/VBZ/contains the/DT/the memory/NN/memory addresses/VBZ/addresses of/IN/of specialized/VBN/specialized interrupt/JJ/interrupt handlers/NNP/handlers. the/DT/the purpose/NN/purpose of/IN/of a/DT/a vectored/VBN/vectored interrupt/NN/interrupt mechanism/NN/mechanism is/VBZ/is to/TO/to reduce/VB/reduce the/DT/the need/NN/need for/IN/for a/DT/a single/JJ/single interrupt/NN/interrupt handler/NN/handler to/TO/to search/NN/search all/DT/all possible/JJ/possible sources/NNS/sources of/IN/of interrupts/NNS/interrupts to/TO/to determine/VB/determine which/WDT/which one/CD/one needs/VBZ/needs service/NNP/service. in/IN/in practice/NN/practice /,/, however/RB/however /,/, computers/NNS/computers have/VBP/have more/JJR/more devices/NNS/devices /:/( and/CC/and /,/, hence/NN/hence /,/, interrupt/JJ/interrupt handlers/NNS/handlers /:/) than/IN/than they/PRP/they have/VBP/have address/JJ/address elements/NNS/elements in/IN/in the/DT/the interrupt/NN/interrupt vector/NN/vector /./. a/DT/a common/JJ/common way/NN/way to/TO/to solve/VB/solve this/DT/this problem/NN/problem is/VBZ/is to/TO/to use/VB/use the/DT/the technique/NN/technique of/IN/of interrupt/JJ/interrupt chaining/NN/chaining /,/, in/IN/in which/WDT/which each/DT/each element/NN/element in/IN/in the/DT/the interrupt/NN/interrupt vector/NN/vector points/NNS/points to/TO/to the/DT/the head/NN/head of/IN/of a/DT/a list/NN/list of/IN/of interrupt/JJ/interrupt handlers/NNP/handlers. when/WRB/when an/DT/an il1.terrupt/JJ/il1.terrupt is/VBZ/is raised/VBN/raised /,/, the/DT/the handlers/NNS/handlers on/IN/on the/DT/the corresponding/NN/corresponding list/NN/list are/VBP/are called/VBN/called one/CD/one by/IN/by one/CD/one /,/, until/IN/until one/CD/one is/VBZ/is found/VBN/found that/IN/that can/MD/can service/VB/service the/DT/the request/NNP/request. this/DT/this structure/NN/structure is/VBZ/is a/DT/a compromise/NN/compromise between/IN/between the/DT/the overhead/JJ/overhead of/IN/of a/DT/a huge/JJ/huge interrupt/NN/interrupt table/NN/table and/CC/and the/DT/the inefficiency/NN/inefficiency of/IN/of dispatching/VBG/dispatching to/TO/to a/DT/a single/JJ/single interrupt/NN/interrupt handler/NN/handler /./. figure/NN/figure 13.4/CD/13.4 illustrates/NNS/illustrates the/DT/the design/NN/design of/IN/of theinterruptvector/NN/theinterruptvector for/IN/for the/DT/the intel/NN/intel pentium/NN/pentium processor/NNP/processor. the/DT/the events/NNS/events from/IN/from 0/-NONE-/0 to/TO/to 31/CD/31 /,/, which/WDT/which are/VBP/are nonmaskable/JJ/nonmaskable /,/, are/VBP/are used/VBN/used to/TO/to signal/JJ/signal various/JJ/various error/NN/error conditions/NNP/conditions. the/DT/the events/NNS/events from/IN/from 32/CD/32 to/TO/to 255/CD/255 /,/, which/WDT/which are/VBP/are maskable/JJ/maskable /,/, are/VBP/are used/VBN/used for/IN/for purposes/NNS/purposes such/JJ/such as/IN/as device-generated/JJ/device-generated interrupts/NNS/interrupts /./. the/DT/the interrupt/NN/interrupt mechanism/NN/mechanism also/RB/also implements/VBZ/implements a/DT/a system/NN/system of/IN/of this/DT/this mechanism/NN/mechanism enables/VBZ/enables the/DT/the cpu/NN/cpu to/TO/to defer/VB/defer the/DT/the handling/NN/handling of/IN/of low-priority/NN/low-priority interrupts/NNS/interrupts without/IN/without maskii1.g/JJ/maskii1.g off/NN/off all/DT/all interrupts/NNS/interrupts and/CC/and makes/VBZ/makes it/PRP/it possible/JJ/possible for/IN/for a/DT/a high-priority/NN/high-priority interrupt/NN/interrupt to/TO/to preempt/VB/preempt the/DT/the execution/NN/execution of/IN/of a/DT/a low-priority/NN/low-priority interrupt/NN/interrupt /./. a/DT/a modern/JJ/modern operating/NN/operating system/NN/system interacts/NNS/interacts with/IN/with the/DT/the interrupt/JJ/interrupt mechanism/NN/mechanism in/IN/in several/JJ/several ways/NNP/ways. at/IN/at boot/NN/boot time/NN/time /,/, the/DT/the operating/NN/operating system/NN/system probes/NNS/probes the/DT/the hardware/NN/hardware buses/NNS/buses to/TO/to determine/VB/determine what/WDT/what devices/NNS/devices are/VBP/are present/JJ/present and/CC/and installs/NNS/installs the/DT/the corresponding/VBG/corresponding interrupt/NN/interrupt handlers/NNS/handlers into/IN/into the/DT/the interrupt/JJ/interrupt vector/NNP/vector. during/IN/during i/0/-NONE-/i/0 /,/, the/DT/the various/JJ/various device/NN/device controllers/NNS/controllers raise/VBP/raise interrupts/NNS/interrupts when/WRB/when they/PRP/they are/VBP/are ready/RB/ready for/IN/for service/NNP/service. these/DT/these interrupts/NNS/interrupts signify/VBP/signify that/IN/that output/NN/output has/VBZ/has cornpleted/VBN/cornpleted /,/, or/CC/or that/IN/that input/NN/input data/NNS/data are/VBP/are available/JJ/available /,/, or/CC/or that/IN/that a/DT/a failure/NN/failure has/VBZ/has been/VBN/been detected/NNP/detected. the/DT/the interrupt/NN/interrupt mechanism/NN/mechanism is/VBZ/is also/RB/also used/VBN/used to/TO/to handle/VB/handle a/DT/a wide/JJ/wide variety/NN/variety of/IN/of such/JJ/such as/IN/as dividing/NN/dividing by/IN/by zero/NN/zero /,/, accessing/VBG/accessing a/DT/a protected/JJ/protected or/CC/or nonexistent/NN/nonexistent memory/NN/memory address/NN/address /,/, or/CC/or attempting/VBG/attempting to/TO/to execute/VB/execute a/DT/a privileged/JJ/privileged instruction/NN/instruction from/IN/from user/NN/user mode/NNP/mode. the/DT/the events/NNS/events that/WDT/that trigger/JJR/trigger interrupts/NNS/interrupts have/VBP/have a/DT/a common/JJ/common property/NN/property /:/: they/PRP/they are/VBP/are occurrences/NNS/occurrences that/IN/that induce/NN/induce the/DT/the cpu/NN/cpu to/TO/to execute/VB/execute an/DT/an urgent/NN/urgent self-contained/JJ/self-contained routine/NN/routine /./. an/DT/an operating/NN/operating system/NN/system has/VBZ/has other/JJ/other good/JJ/good uses/NNS/uses for/IN/for an/DT/an efficient/NN/efficient hardware/NN/hardware and/CC/and software/NN/software mechanism/NN/mechanism that/WDT/that saves/VBZ/saves a/DT/a small/JJ/small amount/NN/amount of/IN/of processor/NN/processor state/NN/state and/CC/and then/RB/then 562/CD/562 chapter/NN/chapter 13/CD/13 2/CD/2 3/CD/3 4/CD/4 5/CD/5 6/CD/6 7/CD/7 8/CD/8 9/CD/9 10/CD/10 11/CD/11 12/CD/12 13/CD/13 14/CD/14 15/CD/15 16/CD/16 i/PRP/i 18/CD/18 19-31/CD/19-31 32-255/CD/32-255 breakpoint/NN/breakpoint into-detected/JJ/into-detected overflow/NN/overflow bound/NN/bound range/NN/range exception/NN/exception invalid/VBD/invalid opcode/NN/opcode device/NN/device not/RB/not available/JJ/available double/JJ/double fault/NN/fault coprocessor/NN/coprocessor segment/NN/segment overrun/NN/overrun /:/( reserved/VBD/reserved /CD/) invalid/JJ/invalid task/NN/task state/NN/state segment/NN/segment segment/NN/segment not/RB/not present/JJ/present stack/NN/stack fault/NN/fault general/NN/general protection/NN/protection page/NN/page fault/NN/fault /:/( intel/NN/intel reserved/VBD/reserved /,/, do/VBP/do not/RB/not use/VB/use /:/) floating-point/JJ/floating-point error/NN/error alignment/NN/alignment check/NN/check machine/NN/machine check/NN/check /:/( intel/NN/intel reserved/VBD/reserved /,/, do/VBP/do not/RB/not use/VB/use /:/) maskable/JJ/maskable interrupts/NNS/interrupts figure/VBP/figure i3.4/-NONE-/i3.4 intel/NN/intel pentium/NN/pentium processor/NN/processor event-vector/NN/event-vector table/NN/table /./. calls/NNS/calls a/DT/a privileged/JJ/privileged routine/NN/routine in/IN/in the/DT/the kernel/NNP/kernel. for/IN/for example/NN/example /,/, many/JJ/many operating/NN/operating systems/NNS/systems use/VBP/use the/DT/the interrupt/NN/interrupt mechanism/NN/mechanism for/IN/for virtual/JJ/virtual memory/NN/memory paging/NNP/paging. a/DT/a page/NN/page fault/NN/fault is/VBZ/is an/DT/an exception/NN/exception that/IN/that raises/VBZ/raises an/DT/an interrupt/NNP/interrupt. the/DT/the interrupt/NN/interrupt suspends/NNS/suspends the/DT/the current/JJ/current process/NN/process and/CC/and jumps/NNS/jumps to/TO/to the/DT/the page-fault/JJ/page-fault handler/NN/handler in/IN/in the/DT/the kernel/NNP/kernel. this/DT/this handler/NN/handler saves/VBZ/saves the/DT/the state/NN/state of/IN/of the/DT/the process/NN/process /,/, moves/VBZ/moves the/DT/the process/NN/process to/TO/to the/DT/the wait/NN/wait queue/NN/queue /,/, performs/NNS/performs page-cache/NNP/page-cache management/NN/management /,/, schedules/NNS/schedules an/DT/an i/0/-NONE-/i/0 operation/NN/operation to/TO/to fetch/VB/fetch the/DT/the page/NN/page /,/, schedules/NNS/schedules another/DT/another process/NN/process to/TO/to resume/VB/resume execution/NN/execution /,/, and/CC/and then/RB/then returns/NNS/returns from/IN/from the/DT/the interrupt/NN/interrupt /./. another/DT/another example/NN/example is/VBZ/is found/VBN/found in/IN/in the/DT/the implementation/NN/implementation of/IN/of system/NN/system calls/NNP/calls. usually/RB/usually /,/, a/DT/a program/NN/program uses/VBZ/uses library/JJ/library calls/NNS/calls to/TO/to issue/VB/issue system/NN/system calls/NNP/calls. the/DT/the library/NN/library routines/NNS/routines check/VBP/check the/DT/the arguments/NNS/arguments given/VBN/given by/IN/by the/DT/the application/NN/application /,/, build/NN/build a/DT/a data/NN/data structure/NN/structure to/TO/to convey/NN/convey the/DT/the arguments/NNS/arguments to/TO/to the/DT/the kernel/NN/kernel /,/, and/CC/and then/RB/then execute/VB/execute a/DT/a special/JJ/special instruction/NN/instruction called/VBN/called a/DT/a or/CC/or /./. this/DT/this instruction/NN/instruction has/VBZ/has an/DT/an operand/NN/operand that/IN/that identifies/NNS/identifies the/DT/the desired/VBN/desired kernel/NN/kernel service/NNP/service. when/WRB/when a/DT/a process/NN/process executes/VBZ/executes the/DT/the trap/NN/trap instruction/NN/instruction /,/, the/DT/the interrupt/NN/interrupt hardware/NN/hardware saves/NNS/saves the/DT/the state/NN/state of/IN/of the/DT/the user/NN/user code/NN/code /,/, switches/VBZ/switches to/TO/to supervisor/NN/supervisor mode/NN/mode /,/, and/CC/and dispatches/NNS/dispatches to/TO/to the/DT/the kernel/NN/kernel routine/NN/routine that/WDT/that implements/VBZ/implements the/DT/the requested/VBN/requested service/NNP/service. the/DT/the trap/NN/trap is/VBZ/is given/VBN/given a/DT/a relatively/RB/relatively low/JJ/low interrupt/NN/interrupt priority/NN/priority compared/VBN/compared with/IN/with those/DT/those assigned/VBN/assigned to/TO/to device/NN/device interrupts-executilcg/JJ/interrupts-executilcg a/DT/a system/NN/system call/NN/call on/IN/on behalf/NN/behalf of/IN/of an/DT/an application/NN/application is/VBZ/is less/JJR/less urgent/NN/urgent than/IN/than servicing/NN/servicing a/DT/a device/NN/device controller/NN/controller before/IN/before its/PRP$/its fifo/NN/fifo queue/NN/queue overflows/VBZ/overflows and/CC/and loses/NNS/loses data/NNS/data /./. interrupts/NNS/interrupts can/MD/can also/RB/also be/VB/be used/VBN/used to/TO/to manage/NN/manage the/DT/the flow/NN/flow of/IN/of control/NN/control within/IN/within the/DT/the kernel/NN/kernel /./. for/IN/for example/NN/example /,/, consider/NN/consider the/DT/the processing/NN/processing required/VBN/required to/TO/to complete/VB/complete a/DT/a disk/NN/disk read/NNP/read. one/CD/one step/NN/step is/VBZ/is to/TO/to copy/VB/copy data/NNS/data from/IN/from kernel/NN/kernel space/NN/space to/TO/to the/DT/the user/NN/user buffer/NNP/buffer. this/DT/this copying/NN/copying is/VBZ/is time/NN/time consuming/VBG/consuming but/CC/but not/RB/not urgent-it/JJ/urgent-it should/MD/should not/RB/not block/VB/block other/JJ/other high-priority/NN/high-priority interrupt/NN/interrupt 13.2/CD/13.2 563/CD/563 handling/NNP/handling. another/DT/another step/NN/step is/VBZ/is to/TO/to start/VB/start the/DT/the next/JJ/next pending/NN/pending l/0/-NONE-/l/0 for/IN/for that/DT/that disk/NN/disk drive/NNP/drive. this/DT/this step/NN/step has/VBZ/has higher/JJR/higher priority/NNP/priority. if/IN/if the/DT/the disks/NNS/disks are/VBP/are to/TO/to be/VB/be used/VBN/used efficiently/RB/efficiently /,/, we/PRP/we need/VBP/need to/TO/to start/VB/start the/DT/the next/JJ/next i/o/NN/i/o as/IN/as soon/RB/soon as/IN/as the/DT/the previous/JJ/previous one/CD/one completes/NNP/completes. consequently/RB/consequently /,/, a/DT/a pair/NN/pair of/IN/of interrupt/JJ/interrupt handlers/NNS/handlers implen/VBP/implen ents/NNS/ents the/DT/the kernel/NN/kernel code/NN/code that/WDT/that completes/VBZ/completes a/DT/a disk/NN/disk read/NNP/read. the/DT/the high-priority/NN/high-priority handler/NN/handler records/NNS/records the/DT/the l/0/NN/l/0 status/NN/status /,/, clears/NNS/clears the/DT/the device/NN/device interrupt/NN/interrupt /,/, starts/VBZ/starts the/DT/the next/JJ/next pending/NN/pending i/0/-NONE-/i/0 /,/, and/CC/and raises/VBZ/raises a/DT/a low-priority/NN/low-priority interrupt/NN/interrupt to/TO/to complete/VB/complete the/DT/the work/NN/work /./. later/JJ/later /,/, when/WRB/when the/DT/the cpu/NN/cpu is/VBZ/is not/RB/not occupied/VBN/occupied with/IN/with high-priority/JJ/high-priority work/NN/work /,/, the/DT/the low-priority/NN/low-priority interrupt/NN/interrupt will/MD/will be/VB/be dispatched/NNP/dispatched. the/DT/the corresponding/NN/corresponding handler/NN/handler completes/VBZ/completes the/DT/the userlevel/NN/userlevel i/0/-NONE-/i/0 by/IN/by copying/NN/copying data/NNS/data from/IN/from kernel/NN/kernel buffers/NNS/buffers to/TO/to the/DT/the application/NN/application space/NN/space and/CC/and then/RB/then calling/VBG/calling the/DT/the scheduler/NN/scheduler to/TO/to place/VB/place the/DT/the application/NN/application on/IN/on the/DT/the ready/JJ/ready queue/NN/queue /./. a/DT/a threaded/VBN/threaded kernel/NN/kernel architecture/NN/architecture is/VBZ/is well/RB/well suited/VBN/suited to/TO/to implement/VB/implement multiple/NN/multiple interrupt/NN/interrupt priorities/NNS/priorities and/CC/and to/TO/to enforce/VB/enforce the/DT/the precedence/NN/precedence of/IN/of interrupt/JJ/interrupt handling/NN/handling over/IN/over background/NN/background processing/NN/processing in/IN/in kernel/NN/kernel and/CC/and application/NN/application routines/NNP/routines. we/PRP/we illustrate/VBP/illustrate this/DT/this point/NN/point with/IN/with the/DT/the solaris/NNS/solaris kernel/NNP/kernel. in/IN/in solaris/NN/solaris /,/, interrupt/JJ/interrupt handlers/NNS/handlers are/VBP/are executed/VBN/executed as/IN/as kernel/NN/kernel threads/NNP/threads. a/DT/a range/NN/range of/IN/of high/JJ/high priorities/NNS/priorities is/VBZ/is reserved/VBN/reserved for/IN/for these/DT/these threads/NNS/threads /./. these/DT/these priorities/NNS/priorities give/VBP/give interrupt/JJ/interrupt handlers/NNS/handlers precedence/NN/precedence over/IN/over application/NN/application code/NN/code and/CC/and kernel/NN/kernel housekeeping/VBG/housekeeping and/CC/and implement/NN/implement the/DT/the priority/NN/priority relationships/NNS/relationships among/IN/among interrupt/JJ/interrupt handlers/NNP/handlers. the/DT/the priorities/NNS/priorities cause/VBP/cause the/DT/the solaris/NNS/solaris thread/VBP/thread scheduler/NN/scheduler to/TO/to preempt/VB/preempt lowpriority/NN/lowpriority interrupt/NN/interrupt handlers/NNS/handlers in/IN/in favor/NN/favor of/IN/of higher-priority/NN/higher-priority ones/NNS/ones /,/, and/CC/and the/DT/the threaded/JJ/threaded implementation/NN/implementation enables/NNS/enables multiprocessor/NN/multiprocessor hardware/NN/hardware to/TO/to run/VB/run several/JJ/several interrupt/JJ/interrupt handlers/NNS/handlers concurrently/NNP/concurrently. we/PRP/we describe/VBP/describe the/DT/the interrupt/NN/interrupt architecture/NN/architecture of/IN/of windows/NNS/windows xp/VBP/xp and/CC/and unix/NN/unix in/IN/in chapter/NN/chapter 22/CD/22 and/CC/and appendix/CD/appendix a/DT/a /,/, respectively/RB/respectively /./. in/IN/in summa/NN/summa /:/: r/NN/r /:/: y/NN/y /,/, interrupts/VBZ/interrupts are/VBP/are used/VBN/used throughout/IN/throughout modern/JJ/modern operating/NN/operating systems/NNS/systems to/TO/to handle/VB/handle asynchronous/JJ/asynchronous events/NNS/events and/CC/and to/TO/to trap/VB/trap to/TO/to supervisor-mode/JJ/supervisor-mode routines/NNS/routines in/IN/in the/DT/the kernel/NNP/kernel. to/TO/to enable/VB/enable the/DT/the most/JJS/most urgent/NN/urgent work/NN/work to/TO/to be/VB/be done/VBN/done first/JJ/first /,/, modern/JJ/modern computers/NNS/computers use/VBP/use a/DT/a system/NN/system of/IN/of interrupt/NN/interrupt priorities/NNP/priorities. device/NN/device controllers/NNS/controllers /,/, hardware/NN/hardware faults/NNS/faults /,/, and/CC/and system/NN/system calls/NNS/calls all/DT/all raise/NN/raise interrupts/NNS/interrupts to/TO/to trigger/VB/trigger kernel/NN/kernel routines/NNP/routines. because/IN/because interrupts/NNS/interrupts are/VBP/are used/VBN/used so/RB/so heavily/RB/heavily for/IN/for time-sensitive/JJ/time-sensitive processing/NN/processing /,/, efficient/NN/efficient interrupt/NN/interrupt handling/NN/handling is/VBZ/is required/VBN/required for/IN/for good/JJ/good system/NN/system performance/NN/performance /./. 13.2.3/CD/13.2.3 direct/JJ/direct memory/NN/memory access/NN/access for/IN/for a/DT/a device/NN/device that/WDT/that does/VBZ/does large/JJ/large transfers/NNS/transfers /,/, such/JJ/such as/IN/as a/DT/a disk/NN/disk drive/NN/drive /,/, it/PRP/it seems/VBZ/seems wasteful/JJ/wasteful to/TO/to use/VB/use an/DT/an expensive/JJ/expensive general-purpose/JJ/general-purpose processor/NN/processor to/TO/to watch/VB/watch status/NN/status bits/NNS/bits and/CC/and to/TO/to feed/VB/feed data/NNS/data into/IN/into a/DT/a controller/NN/controller register/NN/register one/CD/one byte/NN/byte at/IN/at a/DT/a time-a/JJ/time-a process/NN/process termed/VBD/termed many/JJ/many computers/NNS/computers avoid/VBP/avoid burdening/VBG/burdening the/DT/the main/JJ/main cpu/NN/cpu with/IN/with pio/NN/pio by/IN/by offloading/NN/offloading some/DT/some of/IN/of this/DT/this work/NN/work to/TO/to a/DT/a special-purpose/JJ/special-purpose processor/NN/processor called/VBN/called a/DT/a to/TO/to initiate/VB/initiate a/DT/a dma/NN/dma transfer/NN/transfer /,/, the/DT/the host/NN/host writes/VBZ/writes a/DT/a dma/NN/dma command/NN/command block/NN/block into/IN/into memory/NNP/memory. this/DT/this block/NN/block contains/VBZ/contains a/DT/a pointer/NN/pointer to/TO/to the/DT/the source/NN/source of/IN/of a/DT/a transfer/NN/transfer /,/, a/DT/a pointer/NN/pointer to/TO/to the/DT/the destination/NN/destination of/IN/of the/DT/the transfer/NN/transfer /,/, and/CC/and a/DT/a count/NN/count of/IN/of the/DT/the number/NN/number of/IN/of bytes/NNS/bytes to/TO/to be/VB/be transferred/NNP/transferred. the/DT/the cpu/NN/cpu writes/VBZ/writes the/DT/the address/NN/address of/IN/of this/DT/this command/NN/command block/NN/block to/TO/to the/DT/the dma/NN/dma controller/NN/controller /,/, then/RB/then goes/VBZ/goes on/IN/on with/IN/with other/JJ/other work/NNP/work. the/DT/the dma/NN/dma controller/NN/controller proceeds/NNS/proceeds to/TO/to operate/VB/operate the/DT/the memory/NN/memory bus/VBZ/bus directly/RB/directly /,/, placing/VBG/placing addresses/NNS/addresses on/IN/on the/DT/the bus/NN/bus to/TO/to perform/VB/perform transfers/NNS/transfers without/IN/without the/DT/the help/NN/help of/IN/of the/DT/the main/JJ/main cpu/NNP/cpu. a/DT/a simple/JJ/simple dma/NN/dma controller/NN/controller is/VBZ/is a/DT/a standard/JJ/standard component/NN/component in/IN/in pcs/NNS/pcs /,/, and/CC/and for/IN/for the/DT/the pc/NN/pc usually/RB/usually contain/VBP/contain their/PRP$/their own/JJ/own high-speed/JJ/high-speed dma/NN/dma hardware/NN/hardware /./. handshaking/VBG/handshaking between/IN/between the/DT/the dma/NN/dma controller/NN/controller and/CC/and the/DT/the device/NN/device controller/NN/controller is/VBZ/is performed/VBN/performed via/IN/via a/DT/a pair/NN/pair of/IN/of wires/NNS/wires called/VBN/called dma-request/JJ/dma-request and/CC/and dma-acknowledge/JJ/dma-acknowledge /./. the/DT/the device/NN/device controller/NN/controller places/NNS/places a/DT/a signal/NN/signal on/IN/on the/DT/the dma-request/JJ/dma-request wire/NN/wire when/WRB/when a/DT/a word/NN/word of/IN/of data/NNS/data is/VBZ/is available/JJ/available for/IN/for transfer/NNP/transfer. this/DT/this signal/NN/signal causes/NNS/causes the/DT/the dma/NN/dma controller/NN/controller to/TO/to seize/VB/seize 564/CD/564 chapter/NN/chapter 13/CD/13 the/DT/the memory/NN/memory bus/VBZ/bus /,/, place/NN/place the/DT/the desired/VBN/desired address/NN/address on/IN/on the/DT/the memory-address/JJ/memory-address wires/NNS/wires /,/, and/CC/and place/NN/place a/DT/a signal/NN/signal on/IN/on the/DT/the dl/NN/dl \/:/\ iia/NN/iia -acknowledge/NN/-acknowledge wire/NNP/wire. when/WRB/when the/DT/the device/NN/device controller/NN/controller receives/NNS/receives the/DT/the dma-acknowledge/JJ/dma-acknowledge signat/NN/signat it/PRP/it transfers/VBZ/transfers the/DT/the word/NN/word of/IN/of data/NNS/data to/TO/to memory/NN/memory and/CC/and removes/NNS/removes the/DT/the dma-request/JJS/dma-request signal/JJ/signal /./. when/WRB/when the/DT/the entire/JJ/entire transfer/NN/transfer is/VBZ/is finished/VBN/finished /,/, the/DT/the dma/NN/dma controller/NN/controller interrupts/NNS/interrupts the/DT/the cpu/NN/cpu /./. this/DT/this process/NN/process is/VBZ/is depicted/VBN/depicted in/IN/in figure/NN/figure 13.5/CD/13.5. when/WRB/when the/DT/the dma/NN/dma controller/NN/controller seizes/VBZ/seizes the/DT/the memory/NN/memory bus/VBZ/bus /,/, the/DT/the cpu/NN/cpu is/VBZ/is momentarily/RB/momentarily prevented/VBN/prevented from/IN/from accessing/VBG/accessing main/JJ/main memory/NN/memory although/IN/although it/PRP/it can/MD/can still/RB/still access/NN/access data/NNS/data items/NNS/items in/IN/in its/PRP$/its primary/JJ/primary and/CC/and secondary/JJ/secondary caches/NNS/caches /./. although/IN/although this/DT/this can/NN/can slow/NN/slow down/IN/down the/DT/the cpu/NN/cpu computation/NN/computation /,/, offloading/VBG/offloading the/DT/the data-transfer/JJ/data-transfer work/NN/work to/TO/to a/DT/a dma/NN/dma controller/NN/controller generally/RB/generally improves/VBZ/improves the/DT/the total/JJ/total system/NN/system performance/NNP/performance. some/DT/some computer/NN/computer architectures/NNS/architectures use/VBP/use physical/JJ/physical memory/NN/memory addresses/NNS/addresses for/IN/for dma/NN/dma /,/, but/CC/but others/NNS/others perform/VBP/perform mercwry/NN/mercwry using/VBG/using virtual/JJ/virtual addresses/NNS/addresses that/WDT/that undergo/IN/undergo translation/NN/translation to/TO/to physical/JJ/physical addresses/NNP/addresses. dvma/NN/dvma can/MD/can perform/VB/perform a/DT/a transfer/NN/transfer between/IN/between two/CD/two memory-mapped/JJ/memory-mapped devices/NNS/devices without/IN/without the/DT/the intervention/NN/intervention of/IN/of the/DT/the cpu/NN/cpu or/CC/or the/DT/the use/NN/use of/IN/of main/NN/main memory/NN/memory /./. on/IN/on protected-mode/JJ/protected-mode kernels/NNS/kernels /,/, the/DT/the operating/NN/operating system/NN/system generally/RB/generally prevents/VBZ/prevents processes/NNS/processes from/IN/from issuing/VBG/issuing device/NN/device commands/NNS/commands directly/NNP/directly. this/DT/this discipline/NN/discipline protects/VBZ/protects data/NNS/data from/IN/from access-control/JJ/access-control violations/NNS/violations and/CC/and also/RB/also protects/VBZ/protects the/DT/the system/NN/system from/IN/from erroneous/JJ/erroneous use/NN/use of/IN/of device/NN/device controllers/NNS/controllers that/WDT/that could/MD/could cause/VB/cause a/DT/a system/NN/system crash/NNP/crash. instead/RB/instead /,/, the/DT/the operating/NN/operating system/NN/system exports/NNS/exports functions/NNS/functions that/IN/that a/DT/a sufficiently/RB/sufficiently privileged/VBN/privileged process/NN/process can/MD/can use/VB/use to/TO/to access/NN/access low-level/NN/low-level operations/NNS/operations on/IN/on the/DT/the underlying/VBG/underlying hardware/NNP/hardware. on/IN/on kernels/NNS/kernels without/IN/without memory/NN/memory protection/NN/protection /,/, processes/NNS/processes can/MD/can access/NN/access device/NN/device controllers/NNS/controllers directly/NNP/directly. this/DT/this direct/JJ/direct access/NN/access can/MD/can be/VB/be used/VBN/used to/TO/to achieve/VB/achieve high/JJ/high performance//NN/performance/ since/IN/since it/PRP/it can/MD/can avoid/VB/avoid kernel/NN/kernel communication/NN/communication /,/, context/NN/context switches/NNS/switches /,/, and/CC/and layers/NNS/layers of/IN/of kernelsoftware/NNP/kernelsoftware. unfortunately/RB/unfortunately /,/, it/PRP/it interferes/VBZ/interferes with/IN/with system/NN/system security/NN/security and/CC/and stability/NNP/stability. the/DT/the trend/NN/trend in/IN/in general-purpose/JJ/general-purpose operating/NN/operating systems/NNS/systems is/VBZ/is to/TO/to protect/VB/protect memory/NN/memory and/CC/and devices/NNS/devices so/RB/so that/IN/that the/DT/the system/NN/system can/MD/can try/VB/try to/TO/to guard/VB/guard against/IN/against erroneous/JJ/erroneous or/CC/or malicious/JJ/malicious applications/NNS/applications /./. 5/CD/5. dma/NN/dma controller/NN/controller transfers/NNS/transfers bytes/VBZ/bytes to/TO/to buffer/VB/buffer x/NN/x /,/, increasing/VBG/increasing memory/NN/memory address/NN/address and/CC/and decreasing/VBG/decreasing c/NN/c until/IN/until c/NN/c =/:/= 0/-NONE-/0 1/CD/1. device/NN/device driver/NN/driver is/VBZ/is told/VBN/told to/TO/to transfer/VB/transfer disk/NN/disk data/NNS/data to/TO/to buffer/VB/buffer at/IN/at address/NN/address x/NN/x 2/CD/2. device/NN/device driver/NN/driver tells/NNS/tells l/VBP/l /:/- '/''/' '/:/'- /:/- ~/:/~ i/JJ/i- '/:/'- '/''/' ~/:/~ --'/:/--'-- '/''/' disk/NN/disk controller/NN/controller to/TO/to transfer/VB/transfer c/NN/c bytes/NNS/bytes from/IN/from disk/NN/disk to/TO/to buffer/VB/buffer at/IN/at address/NN/address x/NN/x 6/CD/6. when/WRB/when c/NN/c =/:/= 0/-NONE-/0 /,/, dma/NN/dma interrupts/NNS/interrupts cpu/VBP/cpu to/TO/to signal/VB/signal transfer/NN/transfer completion/NN/completion 1/CD/1 /:/: 2.'.c/CD/2.'.c ~/CD/~ li.ip/JJ/li.ip /:/: 2i/CD/2i /:/: .2-j/JJ/.2-j rc-c/NN/rc-c ~/:/~ .,.,---j'/JJ/.,.,---j'- =/NN/= ,._/NN/,._-- ~/:/~ 3/CD/3. disk/NN/disk controller/NN/controller initiates/VBZ/initiates dma/NN/dma transfer/NN/transfer c'g/NN/c'g !/./! ,or/JJ/,or /:/: tt_ront/NN/tt_ront ;/:/; r/NN/r '/''/' i/PRP/i 4/CD/4. disk/NN/disk controller/NN/controller sends/NNS/sends each/DT/each byte/NN/byte to/TO/to dma/VB/dma controller/NN/controller figure/NN/figure 13.5/CD/13.5 steps/NNS/steps in/IN/in a/DT/a dma/NN/dma transfer/NN/transfer /./. 13.3/CD/13.3 13.3/CD/13.3 565/CD/565 13.2.4/CD/13.2.4 1/0/CD/1/0 hardware/NN/hardware summary/NN/summary although/IN/although the/DT/the hardware/NN/hardware aspects/NNS/aspects of/IN/of i/0/-NONE-/i/0 are/VBP/are complex/JJ/complex when/WRB/when considered/VBN/considered at/IN/at the/DT/the level/NN/level of/IN/of detail/NN/detail of/IN/of electronics-hardware/JJ/electronics-hardware design/NN/design /,/, the/DT/the concepts/NNS/concepts that/WDT/that we/PRP/we have/VBP/have just/RB/just described/VBN/described are/VBP/are sufficient/JJ/sufficient to/TO/to enable/JJ/enable us/PRP/us to/TO/to understand/VB/understand many/JJ/many i/0/-NONE-/i/0 features/NNS/features of/IN/of operating/NN/operating systen/VBN/systen s/NNP/s. let/NN/let 's/POS/'s review/NN/review the/DT/the main/JJ/main concepts/NNS/concepts /:/: a/DT/a bus/NN/bus a/DT/a controller/NN/controller an/DT/an i/0/NN/i/0 port/NN/port and/CC/and its/PRP$/its registers/NNS/registers the/DT/the handshaking/VBG/handshaking relationship/NN/relationship between/IN/between the/DT/the host/NN/host and/CC/and a/DT/a device/NN/device controller/NN/controller the/DT/the execution/NN/execution of/IN/of this/DT/this handshaking/NN/handshaking in/IN/in a/DT/a polling/NN/polling loop/NN/loop or/CC/or via/IN/via interrupts/NNS/interrupts the/DT/the offloading/VBG/offloading of/IN/of this/DT/this work/NN/work to/TO/to a/DT/a dma/NN/dma controller/NN/controller for/IN/for large/JJ/large transfers/NNS/transfers we/PRP/we gave/VBP/gave a/DT/a basic/JJ/basic example/NN/example of/IN/of the/DT/the handshaking/NN/handshaking that/IN/that takes/VBZ/takes place/NN/place between/IN/between a/DT/a device/NN/device controller/NN/controller and/CC/and the/DT/the host/NN/host earlier/JJR/earlier in/IN/in this/DT/this section/NNP/section. in/IN/in reality/NN/reality /,/, the/DT/the wide/JJ/wide variety/NN/variety of/IN/of available/JJ/available devices/NNS/devices poses/NNS/poses a/DT/a problem/NN/problem for/IN/for operating-system/JJ/operating-system implementers/NNP/implementers. each/DT/each kind/NN/kind of/IN/of device/NN/device has/VBZ/has its/PRP$/its own/JJ/own set/NN/set of/IN/of capabilities/NNS/capabilities /,/, control-bit/JJ/control-bit definitions/NNS/definitions /,/, and/CC/and protocols/NNS/protocols for/IN/for interacting/VBG/interacting with/IN/with the/DT/the host-and/JJ/host-and they/PRP/they are/VBP/are all/RB/all different/NNP/different. how/WRB/how can/MD/can the/DT/the operating/NN/operating system/NN/system be/VB/be designed/VBN/designed so/RB/so that/IN/that we/PRP/we can/MD/can attach/VB/attach new/JJ/new devices/NNS/devices to/TO/to the/DT/the computer/NN/computer without/IN/without rewriting/NN/rewriting the/DT/the operating/NN/operating system/NN/system and/CC/and when/WRB/when the/DT/the devices/NNS/devices vary/JJ/vary so/RB/so widely/RB/widely /,/, how/WRB/how can/MD/can the/DT/the operating/NN/operating system/NN/system give/VBP/give a/DT/a convenient/JJ/convenient /,/, uniform/NN/uniform i/0/-NONE-/i/0 interface/NN/interface to/TO/to applications/NNS/applications we/PRP/we address/VBP/address those/DT/those questions/NNS/questions next/IN/next /./. in/IN/in this/DT/this section/NN/section /,/, we/PRP/we discuss/VBP/discuss structuring/VBG/structuring techniques/NNS/techniques and/CC/and interfaces/NNS/interfaces for/IN/for the/DT/the operating/NN/operating system/NN/system that/WDT/that enable/JJ/enable i/0/-NONE-/i/0 devices/NNS/devices to/TO/to be/VB/be treated/VBN/treated in/IN/in a/DT/a standard/JJ/standard /,/, uniform/NN/uniform way/NNP/way. we/PRP/we explain/VBP/explain /,/, for/IN/for instance/NN/instance /,/, how/WRB/how an/DT/an application/NN/application can/MD/can open/VB/open a/DT/a file/NN/file on/IN/on a/DT/a disk/NN/disk without/IN/without knowing/NN/knowing what/WP/what kind/NN/kind of/IN/of disk/NN/disk it/PRP/it is/VBZ/is and/CC/and how/WRB/how new/JJ/new disks/NNS/disks and/CC/and other/JJ/other devices/NNS/devices can/MD/can be/VB/be added/VBN/added to/TO/to a/DT/a cmnputer/NN/cmnputer without/IN/without disruption/NN/disruption of/IN/of the/DT/the operating/NN/operating system/NN/system /./. like/IN/like other/JJ/other complex/JJ/complex software-engineering/JJ/software-engineering problems/NNS/problems /,/, the/DT/the approach/NN/approach here/RB/here involves/VBZ/involves abstraction/NN/abstraction /,/, encapsulation/NN/encapsulation /,/, and/CC/and software/NN/software layering/NNP/layering. specifically/RB/specifically /,/, we/PRP/we can/MD/can abstract/VB/abstract away/RB/away the/DT/the detailed/JJ/detailed differences/NNS/differences in/IN/in i/0/-NONE-/i/0 devices/NNS/devices by/IN/by identifying/VBG/identifying a/DT/a few/JJ/few general/JJ/general kinds/NNP/kinds. each/DT/each kind/NN/kind is/VBZ/is accessed/VBN/accessed through/IN/through a/DT/a standardized/JJ/standardized set/NN/set of/IN/of functions-an/JJ/functions-an the/DT/the differences/NNS/differences are/VBP/are encapsulated/VBN/encapsulated in/IN/in kernel/NN/kernel modules/NNS/modules called/VBN/called device/NN/device drivers/NNS/drivers that/WDT/that internally/RB/internally are/VBP/are custom-tailored/JJ/custom-tailored to/TO/to specific/JJ/specific devices/NNS/devices but/CC/but that/IN/that export/NN/export one/CD/one of/IN/of the/DT/the standard/JJ/standard interfaces/NNP/interfaces. figure/NN/figure 13.6/CD/13.6 illustrates/NNS/illustrates how/WRB/how the/DT/the i/o-related/JJ/i/o-related portions/NNS/portions of/IN/of the/DT/the kernel/NN/kernel are/VBP/are structured/VBN/structured in/IN/in software/NN/software layers/NNS/layers /./. the/DT/the purpose/NN/purpose of/IN/of the/DT/the device-driver/JJ/device-driver layer/NN/layer is/VBZ/is to/TO/to hide/VB/hide the/DT/the differences/NNS/differences among/IN/among device/NN/device controllers/NNS/controllers from/IN/from the/DT/the i/o/NNP/i/o subsystem/NN/subsystem of/IN/of the/DT/the kernel/NN/kernel /,/, much/RB/much as/IN/as the/DT/the i/0/NNP/i/0 system/NN/system calls/VBZ/calls encapsulate/JJ/encapsulate the/DT/the behavior/NN/behavior of/IN/of devices/NNS/devices in/IN/in a/DT/a few/JJ/few generic/JJ/generic classes/NNS/classes that/WDT/that hide/IN/hide hardware/NN/hardware differences/NNS/differences from/IN/from applications/NNP/applications. making/VBG/making the/DT/the i/0/NN/i/0 subsystem/NN/subsystem independent/NN/independent of/IN/of the/DT/the hardware/NN/hardware simplifies/NNS/simplifies the/DT/the job/NN/job of/IN/of the/DT/the operating-system/JJ/operating-system developer/NNP/developer. it/PRP/it also/RB/also benefits/VBZ/benefits the/DT/the hardware/NN/hardware manufacturers/NNP/manufacturers. they/PRP/they either/VBP/either design/NN/design new/JJ/new devices/NNS/devices to/TO/to be/VB/be compatible/JJ/compatible with/IN/with an/DT/an existing/VBG/existing host/NN/host controller/NN/controller interface/NN/interface /:/( such/JJ/such as/IN/as scsi-2/-NONE-/scsi-2 /:/) /,/, or/CC/or they/PRP/they write/VBP/write device/NN/device drivers/NNS/drivers to/TO/to interface/VB/interface the/DT/the new/JJ/new hardware/NN/hardware to/TO/to popular/JJ/popular 566/CD/566 chapter/NN/chapter 13/CD/13 figure/NN/figure 13.6/CD/13.6 a/DT/a kernel/NN/kernel i/o/NN/i/o structure/NN/structure /./. operating/NN/operating systems/NNP/systems. thus/RB/thus /,/, we/PRP/we can/MD/can attach/VB/attach new/JJ/new peripherals/NNS/peripherals to/TO/to a/DT/a computer/NN/computer without/IN/without waiting/VBG/waiting for/IN/for the/DT/the operating-system/JJ/operating-system vendor/NN/vendor to/TO/to develop/VB/develop support/NN/support code/NN/code /./. unfortm1ately/RB/unfortm1ately for/IN/for device-hardware/JJ/device-hardware manufacturers/NNS/manufacturers /,/, each/DT/each type/NN/type of/IN/of operating/NN/operating system/NN/system has/VBZ/has its/PRP$/its own/JJ/own standards/NNS/standards for/IN/for the/DT/the device-driver/JJ/device-driver interface/NNP/interface. a/DT/a given/VBN/given device/NN/device may/MD/may ship/VB/ship with/IN/with multiple/JJ/multiple device/NN/device drivers-for/NN/drivers-for instance/NN/instance /,/, drivers/NNS/drivers for/IN/for ms-dos/NNS/ms-dos /,/, windows/VBZ/windows 95/98/CD/95/98 /,/, windows/VBZ/windows nt/2000/-NONE-/nt/2000 /,/, and/CC/and solaris/NNP/solaris. devices/NNS/devices vary/JJ/vary on/IN/on many/JJ/many dimensions/NNS/dimensions /,/, as/IN/as illustrated/VBN/illustrated in/IN/in figure/NN/figure 13.7/CD/13.7 /./. character-stream/JJ/character-stream or/CC/or block/NNP/block. a/DT/a character-stream/NN/character-stream device/NN/device transfers/NNS/transfers bytes/VBZ/bytes one/CD/one by/IN/by one/CD/one /,/, whereas/RB/whereas a/DT/a block/NN/block device/NN/device transfers/NNS/transfers a/DT/a block/NN/block of/IN/of bytes/NNS/bytes as/IN/as a/DT/a unit/NN/unit /./. sequential/JJ/sequential or/CC/or random/NN/random access/NNP/access. a/DT/a sequential/JJ/sequential device/NN/device transfers/NNS/transfers data/NNS/data in/IN/in a/DT/a fixed/VBN/fixed order/NN/order determined/VBN/determined by/IN/by the/DT/the device/NN/device /,/, whereas/VBZ/whereas the/DT/the user/NN/user of/IN/of a/DT/a random-access/JJ/random-access device/NN/device can/MD/can instruct/VB/instruct the/DT/the device/NN/device to/TO/to seek/VB/seek to/TO/to any/DT/any of/IN/of the/DT/the available/JJ/available data/NNS/data storage/NN/storage locations/NNS/locations /./. synchronous/JJ/synchronous or/CC/or asynchronous/NNP/asynchronous. a/DT/a synchronous/JJ/synchronous device/NN/device performs/NNS/performs data/NNS/data transfers/NNS/transfers with/IN/with predictable/JJ/predictable response/NN/response times/NNP/times. an/DT/an asynchronous/JJ/asynchronous device/NN/device exhibits/NNS/exhibits irregular/JJ/irregular or/CC/or unpredictable/JJ/unpredictable response/NN/response times/NNS/times /./. sharable/JJ/sharable or/CC/or dedicated/NNP/dedicated. a/DT/a sharable/JJ/sharable device/NN/device can/MD/can be/VB/be used/VBN/used concurrently/RB/concurrently by/IN/by several/JJ/several processes/NNS/processes or/CC/or threads/NNS/threads ;/:/; a/DT/a dedicated/VBN/dedicated device/NN/device can/MD/can not/RB/not /./. speed/NN/speed of/IN/of operation/NNP/operation. device/NN/device speeds/VBZ/speeds range/NN/range from/IN/from a/DT/a few/JJ/few bytes/NNS/bytes per/IN/per second/JJ/second to/TO/to a/DT/a few/JJ/few gigabytes/NNS/gigabytes per/IN/per second/JJ/second /./. read/NN/read -write/JJ/-write /,/, read/JJ/read only/RB/only /,/, or/CC/or write/VB/write only/NNP/only. some/DT/some devices/NNS/devices perform/NN/perform both/DT/both input/NN/input and/CC/and output/NN/output /,/, but/CC/but others/NNS/others support/VBP/support only/RB/only one/CD/one data/NNS/data transfer/VBP/transfer direction/NN/direction /./. access/NN/access method/NN/method transfer/NN/transfer schedule/NN/schedule i/o/-NONE-/i/o direction/NN/direction 13.3/CD/13.3 synchronous/JJ/synchronous asynchronous/JJ/asynchronous dedicated/JJ/dedicated sharable/JJ/sharable latency/NN/latency seek/NN/seek time/NN/time transfer/NN/transfer rate/NN/rate delay/NN/delay between/IN/between operations/NNS/operations read/VBP/read only/RB/only write/JJ/write only/RB/only read-write/JJ/read-write tape/NN/tape keyboard/NN/keyboard tape/NN/tape keyboard/NN/keyboard cd-rom/NN/cd-rom figure/NN/figure i/PRP/i 3/CD/3. 7/CD/7 characteristics/NNS/characteristics of/IN/of 1/0/CD/1/0 devices/NNS/devices /./. 567/CD/567 for/IN/for the/DT/the purpose/NN/purpose of/IN/of application/NN/application access/NN/access /,/, many/JJ/many of/IN/of these/DT/these differences/NNS/differences are/VBP/are hidden/VBN/hidden by/IN/by the/DT/the operating/NN/operating system/NN/system /,/, and/CC/and the/DT/the devices/NNS/devices are/VBP/are grouped/VBN/grouped into/IN/into a/DT/a few/JJ/few conventional/JJ/conventional types/NNP/types. the/DT/the resulting/VBG/resulting styles/NNS/styles of/IN/of device/NN/device access/NN/access have/VBP/have been/VBN/been found/VBN/found to/TO/to be/VB/be useful/JJ/useful and/CC/and broadly/RB/broadly applicable/NNP/applicable. although/IN/although the/DT/the exact/JJ/exact system/NN/system calls/VBZ/calls may/MD/may differ/VB/differ across/IN/across operating/NN/operating systems/NNS/systems /,/, the/DT/the device/NN/device categories/NNS/categories are/VBP/are fairly/RB/fairly standard/NNP/standard. the/DT/the major/JJ/major access/NN/access conventions/NNS/conventions include/VBP/include block/NN/block i/0/-NONE-/i/0 /,/, character-stream/JJ/character-stream i/0/-NONE-/i/0 /,/, memory-mapped/JJ/memory-mapped file/NN/file access/NN/access /,/, and/CC/and network/NN/network sockets/NNP/sockets. operating/NN/operating systems/NNS/systems also/RB/also provide/VB/provide special/JJ/special system/NN/system calls/VBZ/calls to/TO/to access/NN/access a/DT/a few/JJ/few additional/JJ/additional devices/NNS/devices /,/, such/JJ/such as/IN/as a/DT/a time-of-day/JJ/time-of-day clock/NN/clock and/CC/and a/DT/a timer/NN/timer /./. some/DT/some operating/NN/operating systems/NNS/systems provide/VB/provide a/DT/a set/NN/set of/IN/of system/NN/system calls/NNS/calls for/IN/for graphical/JJ/graphical display/NN/display /,/, video/NN/video /,/, and/CC/and audio/NN/audio devices/NNS/devices /./. most/JJS/most operating/VBG/operating systems/NNS/systems also/RB/also have/VBP/have an/DT/an /NN/( or/CC/or that/IN/that transparently/RB/transparently passes/VBZ/passes arbitrary/JJ/arbitrary conunands/NNS/conunands from/IN/from an/DT/an application/NN/application to/TO/to a/DT/a device/NN/device driver/NNP/driver. in/IN/in unix/NN/unix /,/, this/DT/this system/NN/system call/NN/call is/VBZ/is ioctl/NN/ioctl /:/( /:/) /:/( for/IN/for i/0/-NONE-/i/0 control/NN/control /:/) /./. the/DT/the ioctl/NN/ioctl /:/( /:/) system/NN/system call/NN/call enables/VBZ/enables an/DT/an application/NN/application to/TO/to access/NN/access any/DT/any functionality/NN/functionality that/IN/that can/MD/can be/VB/be implernented/VBN/implernented by/IN/by any/DT/any device/NN/device driver/NN/driver /,/, without/IN/without the/DT/the need/NN/need to/TO/to invent/VB/invent a/DT/a new/JJ/new system/NN/system call/NNP/call. the/DT/the ioctl/NN/ioctl /:/( /:/) system/NN/system call/NN/call has/VBZ/has three/CD/three arguments/NNP/arguments. the/DT/the first/JJ/first is/VBZ/is a/DT/a file/NN/file descriptor/NN/descriptor that/WDT/that connects/VBZ/connects the/DT/the application/NN/application to/TO/to the/DT/the driver/NN/driver by/IN/by referring/NN/referring to/TO/to a/DT/a hardware/NN/hardware device/NN/device managed/VBD/managed by/IN/by that/DT/that driver/NNP/driver. the/DT/the second/JJ/second is/VBZ/is an/DT/an integer/NN/integer that/IN/that selects/NNS/selects one/CD/one of/IN/of the/DT/the commands/NNS/commands implemented/VBD/implemented in/IN/in the/DT/the driver/NNP/driver. the/DT/the third/JJ/third is/VBZ/is a/DT/a pointer/NN/pointer to/TO/to an/DT/an arbitrary/JJ/arbitrary data/NNS/data structure/NN/structure in/IN/in memory/NN/memory that/IN/that enables/NNS/enables the/DT/the application/NN/application and/CC/and driver/NN/driver to/TO/to communicate/VB/communicate any/DT/any necessary/JJ/necessary control/NN/control information/NN/information or/CC/or data/NNS/data /./. 13.3.1/CD/13.3.1 block/NN/block and/CC/and character/NN/character devices/NNS/devices the/DT/the captures/NNS/captures all/DT/all the/DT/the aspects/NNS/aspects necessary/JJ/necessary for/IN/for accessing/NN/accessing disk/NN/disk drives/NNS/drives and/CC/and other/JJ/other block-oriented/JJ/block-oriented devices/NNP/devices. the/DT/the device/NN/device is/VBZ/is expected/VBN/expected to/TO/to understand/VB/understand commands/NNS/commands such/JJ/such as/IN/as read/JJ/read /NN/( /:/) and/CC/and write/JJ/write /NN/( /:/) ;/:/; if/IN/if it/PRP/it is/VBZ/is a/DT/a random-access/JJ/random-access device/NN/device /,/, it/PRP/it is/VBZ/is also/RB/also expected/VBN/expected to/TO/to have/VB/have a/DT/a seek/NN/seek /:/( /:/) command/NN/command to/TO/to specify/VB/specify which/WDT/which block/NN/block to/TO/to transfer/VB/transfer next/JJ/next /./. 568/CD/568 chapter/NN/chapter 13/CD/13 applications/NNS/applications normally/RB/normally access/NN/access such/JJ/such a/DT/a device/NN/device through/IN/through a/DT/a file-system/JJ/file-system interface/NN/interface /./. we/PRP/we can/MD/can see/VB/see that/IN/that read/NN/read /:/( /:/) /,/, write/JJ/write /NN/( /:/) /,/, and/CC/and seek/VB/seek 0/-NONE-/0 capture/NN/capture the/DT/the essen.tial/JJ/essen.tial behaviors/NNS/behaviors of/IN/of block-storage/JJ/block-storage devices/NNS/devices /,/, so/RB/so that/IN/that applications/NNS/applications are/VBP/are insulated/VBN/insulated from/IN/from the/DT/the low-level/JJ/low-level differences/NNS/differences among/IN/among those/DT/those devices/NNS/devices /./. the/DT/the operating/NN/operating system/NN/system itself/PRP/itself /,/, as/IN/as well/RB/well as/IN/as special/JJ/special applications/NNS/applications such/JJ/such as/IN/as databasemanagement/NN/databasemanagement systems/NNS/systems /,/, may/MD/may prefer/VB/prefer to/TO/to access/NN/access a/DT/a block/NN/block device/NN/device as/IN/as a/DT/a simple/JJ/simple linear/NN/linear array/NN/array of/IN/of blocks/NNP/blocks. this/DT/this mode/NN/mode of/IN/of access/NN/access is/VBZ/is sometimes/RB/sometimes called/VBN/called if/IN/if the/DT/the application/NN/application performs/NNS/performs its/PRP$/its own/JJ/own buffering/VBG/buffering /,/, then/RB/then using/VBG/using a/DT/a file/NN/file systen1/NNP/systen1. would/MD/would cause/VB/cause extra/JJ/extra /,/, unneeded/JJ/unneeded buffering/NNP/buffering. likewise/NN/likewise /,/, if/IN/if an/DT/an application/NN/application provides/VBZ/provides its/PRP$/its own/JJ/own locking/VBG/locking of/IN/of file/JJ/file blocks/NNS/blocks or/CC/or regions/NNS/regions /,/, then/RB/then any/DT/any operating-system/NN/operating-system locking/VBG/locking services/NNS/services would/MD/would be/VB/be redundant/JJ/redundant at/IN/at the/DT/the least/JJS/least and/CC/and contradictory/NN/contradictory at/IN/at the/DT/the worst/NNP/worst. to/TO/to avoid/VB/avoid these/DT/these conflicts/NNS/conflicts /,/, raw-device/JJ/raw-device access/NN/access passes/NNS/passes control/NN/control of/IN/of the/DT/the device/NN/device directly/RB/directly to/TO/to the/DT/the application/NN/application /,/, letting/VBG/letting the/DT/the operating/NN/operating system/NN/system step/NN/step out/RP/out of/IN/of the/DT/the way/NNP/way. unfortunately/RB/unfortunately /,/, no/DT/no operating-system/NN/operating-system services/NNS/services are/VBP/are then/RB/then performed/VBN/performed on/IN/on this/DT/this device/NNP/device. a/DT/a compromise/NN/compromise that/WDT/that is/VBZ/is becoming/VBG/becoming common/JJ/common is/VBZ/is for/IN/for the/DT/the operating/NN/operating system/NN/system to/TO/to allow/VB/allow a/DT/a mode/NN/mode of/IN/of operation/NN/operation on/IN/on a/DT/a file/NN/file that/WDT/that disables/VBZ/disables buffering/VBG/buffering and/CC/and locking/NNP/locking. in/IN/in the/DT/the unix/NN/unix world/NN/world /,/, this/DT/this is/VBZ/is called/VBN/called memory-mapped/JJ/memory-mapped file/NN/file access/NN/access can/MD/can be/VB/be layered/VBN/layered on/IN/on top/JJ/top of/IN/of block-device/JJ/block-device drivers/NNS/drivers /./. rather/RB/rather than/IN/than offering/NN/offering read/NN/read and/CC/and write/VB/write operations/NNS/operations /,/, a/DT/a memory-mapped/JJ/memory-mapped interface/NN/interface provides/VBZ/provides access/NN/access to/TO/to disk/VB/disk storage/NN/storage via/IN/via an/DT/an array/NN/array of/IN/of bytes/NNS/bytes in/IN/in main/JJ/main memory/NNP/memory. the/DT/the system/NN/system call/NN/call that/WDT/that maps/VBZ/maps a/DT/a file/NN/file into/IN/into memory/NN/memory returns/NNS/returns the/DT/the virtual/JJ/virtual memory/NN/memory address/NN/address that/WDT/that contains/VBZ/contains a/DT/a copy/NN/copy of/IN/of the/DT/the file/NNP/file. the/DT/the actual/JJ/actual data/NNS/data transfers/NNS/transfers are/VBP/are performed/VBN/performed only/RB/only when/WRB/when needed/VBN/needed to/TO/to satisfy/VB/satisfy access/NN/access to/TO/to the/DT/the memory/NN/memory image/NNP/image. because/IN/because the/DT/the transfers/NNS/transfers are/VBP/are handled/VBN/handled by/IN/by the/DT/the same/JJ/same mechanism/NN/mechanism as/IN/as that/DT/that used/VBN/used for/IN/for demand-paged/JJ/demand-paged virtual/JJ/virtual memory/NN/memory access/NN/access /,/, memory-mapped/JJ/memory-mapped i/o/NN/i/o is/VBZ/is efficient/NNP/efficient. memory/NN/memory mapping/VBG/mapping is/VBZ/is also/RB/also convenient/JJ/convenient for/IN/for programmers-access/JJ/programmers-access to/TO/to a/DT/a memory-mapped/JJ/memory-mapped file/NN/file is/VBZ/is as/IN/as simple/JJ/simple as/IN/as reading/NN/reading from/IN/from and/CC/and writing/VBG/writing to/TO/to memory/NNP/memory. operating/NN/operating systems/NNS/systems that/WDT/that offer/NN/offer virtual/VBP/virtual memory/NN/memory commonly/RB/commonly use/VBP/use the/DT/the mapping/NN/mapping interface/NN/interface for/IN/for kernel/NN/kernel services/NNP/services. for/IN/for instance/NN/instance /,/, to/TO/to execute/VB/execute a/DT/a program/NN/program /,/, the/DT/the operating/NN/operating system/NN/system maps/NNS/maps the/DT/the executable/JJ/executable into/IN/into memory/NN/memory and/CC/and then/RB/then transfers/NNS/transfers control/NN/control to/TO/to the/DT/the entry/NN/entry address/NN/address of/IN/of the/DT/the executable/NNP/executable. the/DT/the mapping/NN/mapping interface/NN/interface is/VBZ/is also/RB/also commonly/RB/commonly used/VBN/used for/IN/for kernel/NN/kernel access/NN/access to/TO/to swap/VB/swap space/NN/space on/IN/on disk/NN/disk /./. a/DT/a keyboard/NN/keyboard is/VBZ/is an/DT/an example/NN/example of/IN/of a/DT/a device/NN/device that/WDT/that is/VBZ/is accessed/VBN/accessed through/IN/through a/DT/a the/DT/the basic/JJ/basic system/NN/system calls/VBZ/calls in/IN/in this/DT/this interface/NN/interface enable/NN/enable an/DT/an application/NN/application to/TO/to get/VB/get /:/( /:/) or/CC/or put/VB/put /CD/( /CD/) one/CD/one character/NNP/character. on/IN/on top/JJ/top of/IN/of this/DT/this interface/NN/interface /,/, libraries/NNS/libraries can/MD/can be/VB/be built/VBN/built that/IN/that offer/NN/offer line-at-a-time/JJ/line-at-a-time access/NN/access /,/, with/IN/with buffering/NN/buffering and/CC/and editing/VBG/editing services/NNS/services /:/( for/IN/for example/NN/example /,/, when/WRB/when a/DT/a user/NN/user types/VBZ/types a/DT/a backspace/NN/backspace /,/, the/DT/the preceding/NN/preceding character/NN/character is/VBZ/is removed/VBN/removed from/IN/from the/DT/the input/NN/input stream/NN/stream /:/) /./. this/DT/this style/NN/style of/IN/of access/NN/access is/VBZ/is convenient/JJ/convenient for/IN/for input/NN/input devices/NNS/devices such/JJ/such as/IN/as keyboards/NNS/keyboards /,/, mice/NN/mice /,/, and/CC/and modems/NNS/modems that/WDT/that produce/NN/produce data/NNS/data for/IN/for input/NN/input spontaneously/RB/spontaneously -that/JJ/-that is/VBZ/is /,/, at/IN/at times/NNS/times that/WDT/that cam1.ot/-NONE-/cam1.ot necessarily/RB/necessarily be/VB/be predicted/VBN/predicted by/IN/by the/DT/the application/NNP/application. this/DT/this access/NN/access style/NN/style is/VBZ/is also/RB/also good/JJ/good for/IN/for output/NN/output devices/NNS/devices such/JJ/such as/IN/as printers/NNS/printers and/CC/and audio/NN/audio boards/NNS/boards /,/, which/WDT/which naturally/RB/naturally fit/VBP/fit the/DT/the concept/NN/concept of/IN/of a/DT/a linear/JJ/linear stream/NN/stream of/IN/of bytes/NNS/bytes /./. 13.3.2/CD/13.3.2 network/NN/network devices/NNS/devices because/IN/because the/DT/the performance/NN/performance and/CC/and addressing/VBG/addressing characteristics/NNS/characteristics of/IN/of network/NN/network i/0/-NONE-/i/0 differ/VBP/differ significantly/RB/significantly from/IN/from those/DT/those of/IN/of disk/NN/disk i/0/-NONE-/i/0 /,/, most/RBS/most operating/NN/operating systems/NNS/systems provide/VB/provide a/DT/a network/NN/network i/o/NN/i/o interface/NN/interface that/WDT/that is/VBZ/is different/JJ/different from/IN/from the/DT/the read/NN/read /:/( /:/) -write/JJ/-write /NN/( /:/) -seek/JJ/-seek /NN/( /:/) interface/NN/interface used/VBD/used for/IN/for disks/NNP/disks. one/CD/one interface/NN/interface available/JJ/available in/IN/in many/JJ/many operating/NN/operating systerns/NNS/systerns /,/, including/VBG/including unix/NN/unix and/CC/and windows/VBZ/windows nt/NN/nt /,/, is/VBZ/is the/DT/the network/NN/network interface/NN/interface /./. think/NN/think of/IN/of a/DT/a wall/NN/wall socket/NN/socket for/IN/for electricity/NN/electricity /:/: any/DT/any electrical/JJ/electrical appliance/NN/appliance can/MD/can be/VB/be plugged/VBN/plugged in/-NONE-/in. by/IN/by analogy/NN/analogy /,/, the/DT/the system/NN/system calls/VBZ/calls in/IN/in the/DT/the socket/NN/socket interface/NN/interface enable/JJ/enable an/DT/an application/NN/application 13.3/CD/13.3 569/CD/569 to/TO/to create/VB/create a/DT/a socket/NN/socket /,/, to/TO/to connect/VB/connect a/DT/a local/JJ/local socket/NN/socket to/TO/to a/DT/a remote/NN/remote address/NN/address /:/( which/WDT/which plugs/NNS/plugs this/DT/this application/NN/application into/IN/into a/DT/a socket/NN/socket created/VBN/created by/IN/by another/DT/another application/NN/application /:/) /,/, to/TO/to listen/VB/listen for/IN/for any/DT/any remote/NN/remote application/NN/application to/TO/to plug/VB/plug into/IN/into the/DT/the local/JJ/local socket/NN/socket /,/, and/CC/and to/TO/to send/VB/send and/CC/and receive/JJ/receive packets/NNS/packets over/IN/over the/DT/the connection/NNP/connection. to/TO/to support/VB/support the/DT/the implementation/NN/implementation of/IN/of servers/NNS/servers /,/, the/DT/the socket/NN/socket interface/NN/interface also/RB/also provides/VBZ/provides a/DT/a function/NN/function called/VBN/called select/NN/select /:/( /:/) that/IN/that manages/NNS/manages a/DT/a set/NN/set of/IN/of sockets/NNP/sockets. a/DT/a call/NN/call to/TO/to select/VB/select /:/( /:/) returns/NNS/returns information/NN/information about/IN/about which/WDT/which sockets/NNS/sockets have/VBP/have a/DT/a packet/NN/packet waiting/VBG/waiting to/TO/to be/VB/be received/VBN/received and/CC/and which/WDT/which sockets/NNS/sockets have/VBP/have room/NN/room to/TO/to accept/VB/accept a/DT/a packet/NN/packet to/TO/to be/VB/be sent/NNP/sent. the/DT/the use/NN/use of/IN/of select/NN/select /:/( /:/) eliminates/NNS/eliminates the/DT/the polling/VBG/polling and/CC/and busy/JJ/busy waiting/NN/waiting that/WDT/that would/MD/would otherwise/VB/otherwise be/VB/be necessary/JJ/necessary for/IN/for network/NN/network i/0/NNP/i/0. these/DT/these functions/NNS/functions encapsulate/VBP/encapsulate the/DT/the essential/JJ/essential behaviors/NNS/behaviors of/IN/of networks/NNS/networks /,/, greatly/RB/greatly facilitating/VBG/facilitating the/DT/the creation/NN/creation of/IN/of distributed/VBN/distributed applications/NNS/applications that/IN/that can/MD/can use/VB/use any/DT/any underlying/VBG/underlying network/NN/network hardware/NN/hardware and/CC/and protocol/NN/protocol stack/NN/stack many/JJ/many other/JJ/other approaches/NNS/approaches to/TO/to interprocess/NN/interprocess communication/NN/communication and/CC/and network/NN/network communication/NN/communication have/VBP/have been/VBN/been implemented/NNP/implemented. for/IN/for instance/NN/instance /,/, windows/VBZ/windows nt/NN/nt provides/VBZ/provides one/CD/one interface/NN/interface to/TO/to the/DT/the network/NN/network interface/NN/interface card/NN/card and/CC/and a/DT/a second/JJ/second interface/NN/interface to/TO/to the/DT/the network/NN/network protocols/NNS/protocols /:/( appendix/NN/appendix c.6/-NONE-/c.6 /./) /./. in/IN/in unix/NN/unix /,/, which/WDT/which has/VBZ/has a/DT/a long/JJ/long history/NN/history as/IN/as a/DT/a proving/NN/proving ground/NN/ground for/IN/for network/NN/network technology/NN/technology /,/, we/PRP/we find/VBP/find half-duplex/JJ/half-duplex pipes/NNS/pipes /,/, full-duplex/JJ/full-duplex fifos/NNS/fifos /,/, full-duplex/JJ/full-duplex streams/NNS/streams /,/, message/NN/message queues/NNS/queues /,/, and/CC/and sockets/NNP/sockets. information/NN/information on/IN/on unix/CD/unix networking/NN/networking is/VBZ/is given/VBN/given in/IN/in appendix/NN/appendix a.9/-NONE-/a.9 /./. 13.3.3/CD/13.3.3 clocks/NNS/clocks and/CC/and timers/NNS/timers most/RBS/most computers/NNS/computers have/VBP/have hardware/NN/hardware clocks/NNS/clocks and/CC/and timers/NNS/timers that/WDT/that provide/VB/provide three/CD/three basic/JJ/basic functions/NNS/functions /:/: give/JJ/give the/DT/the current/JJ/current time/NN/time /./. give/JJ/give the/DT/the elapsed/VBN/elapsed time/NN/time /./. set/NN/set a/DT/a timer/NN/timer to/TO/to trigger/VB/trigger operation/NN/operation x/NN/x at/IN/at time/NN/time t/NN/t /./. these/DT/these functions/NNS/functions are/VBP/are used/VBN/used heavily/RB/heavily by/IN/by the/DT/the operating/NN/operating system/NN/system /,/, as/IN/as well/RB/well as/IN/as by/IN/by timesensitive/JJ/timesensitive applications/NNP/applications. unfortunately/RB/unfortunately /,/, the/DT/the system/NN/system calls/VBZ/calls that/IN/that implement/NN/implement these/DT/these functions/NNS/functions are/VBP/are not/RB/not standardized/JJ/standardized across/NN/across operating/NN/operating systems/NNS/systems /./. the/DT/the hardware/NN/hardware to/TO/to measure/VB/measure elapsed/VBN/elapsed time/NN/time and/CC/and to/TO/to trigger/VB/trigger operations/NNS/operations is/VBZ/is called/VBN/called a/DT/a /./. it/PRP/it can/MD/can be/VB/be set/VBN/set to/TO/to wait/VB/wait a/DT/a certain/JJ/certain amount/NN/amount of/IN/of time/NN/time generate/NN/generate an/DT/an interrupt/NN/interrupt /,/, and/CC/and it/PRP/it can/MD/can be/VB/be set/VBN/set to/TO/to do/VB/do this/DT/this once/RB/once or/CC/or to/TO/to repeat/VB/repeat the/DT/the process/NN/process to/TO/to generate/VB/generate periodic/JJ/periodic interrupts/NNP/interrupts. the/DT/the scheduler/NN/scheduler uses/VBZ/uses this/DT/this mechanism/NN/mechanism to/TO/to generate/VB/generate an/DT/an interrupt/JJ/interrupt that/IN/that will/MD/will preempt/VB/preempt a/DT/a process/NN/process at/IN/at the/DT/the end/NN/end of/IN/of its/PRP$/its time/NN/time slice/NN/slice /./. the/DT/the disk/NN/disk i/o/-NONE-/i/o subsystem/NN/subsystem uses/NNS/uses it/PRP/it to/TO/to invoke/VB/invoke the/DT/the periodic/JJ/periodic flushing/NN/flushing of/IN/of dirty/NN/dirty cache/NN/cache buffers/NNS/buffers to/TO/to disk/VB/disk /,/, and/CC/and the/DT/the network/NN/network subsystem/NN/subsystem uses/NNS/uses it/PRP/it to/TO/to cancel/VB/cancel operations/NNS/operations that/WDT/that are/VBP/are proceeding/VBG/proceeding too/RB/too slowly/RB/slowly because/IN/because of/IN/of network/NN/network congestion/NN/congestion or/CC/or failures/NNP/failures. the/DT/the operating/NN/operating system/NN/system may/MD/may also/RB/also provide/VB/provide an/DT/an interface/NN/interface for/IN/for user/NN/user processes/NNS/processes to/TO/to use/VB/use timers/NNP/timers. the/DT/the operating/NN/operating system/NN/system can/MD/can support/VB/support more/RBR/more timer/JJ/timer requests/NNS/requests than/IN/than the/DT/the number/NN/number of/IN/of timer/NN/timer hardware/NN/hardware chan11els/NNS/chan11els by/IN/by simulating/VBG/simulating virtual/JJ/virtual clocks/NNP/clocks. to/TO/to do/VB/do so/RB/so /,/, the/DT/the kernel/NN/kernel /:/( or/CC/or the/DT/the timer/NN/timer device/NN/device driver/NN/driver /:/) maintains/NNS/maintains a/DT/a list/NN/list of/IN/of interrupts/NNS/interrupts wanted/VBD/wanted by/IN/by its/PRP$/its own/JJ/own routines/NNS/routines and/CC/and by/IN/by user/NN/user requests/NNS/requests /,/, sorted/VBD/sorted in/IN/in earliest-time-first/JJ/earliest-time-first order/NNP/order. it/PRP/it sets/VBZ/sets the/DT/the timer/NN/timer for/IN/for the/DT/the earliest/JJS/earliest tince/NNP/tince. when/WRB/when the/DT/the timer/NN/timer interrupts/VBZ/interrupts /,/, the/DT/the kernel/NN/kernel signals/VBZ/signals the/DT/the requester/NN/requester and/CC/and reloads/NNS/reloads the/DT/the timer/NN/timer with/IN/with the/DT/the next/JJ/next earliest/NN/earliest time/NN/time /./. on/IN/on many/JJ/many computers/NNS/computers /,/, the/DT/the interrupt/NN/interrupt rate/NN/rate generated/VBD/generated by/IN/by the/DT/the hardware/NN/hardware clock/NN/clock is/VBZ/is between/IN/between 18/CD/18 and/CC/and 60/CD/60 ticks/NNS/ticks per/IN/per second/NNP/second. this/DT/this resolution/NN/resolution is/VBZ/is coarse/NN/coarse /,/, since/IN/since a/DT/a modern/JJ/modern computer/NN/computer can/MD/can execute/VB/execute hundreds/NNS/hundreds of/IN/of millions/NNS/millions of/IN/of instructions/NNS/instructions per/IN/per second/NNP/second. the/DT/the 570/CD/570 chapter/NN/chapter 13/CD/13 precision/NN/precision of/IN/of triggers/NNS/triggers is/VBZ/is limited/VBN/limited by/IN/by the/DT/the coarse/NN/coarse resolution/NN/resolution of/IN/of the/DT/the timer/NN/timer /,/, together/RB/together with/IN/with the/DT/the overhead/JJ/overhead of/IN/of maintaining/VBG/maintaining virtual/JJ/virtual clocks/NNP/clocks. furthermore/NN/furthermore /,/, if/IN/if the/DT/the timer/NN/timer ticks/NNS/ticks are/VBP/are used/VBN/used to/TO/to maintain/VB/maintain the/DT/the system/NN/system time-of-day/NN/time-of-day clock/NN/clock /,/, the/DT/the system/NN/system clock/NN/clock can/MD/can drift/NNP/drift. in/IN/in most/JJS/most computers/NNS/computers /,/, the/DT/the hardware/NN/hardware clock/NN/clock is/VBZ/is constructed/VBN/constructed from/IN/from a/DT/a highfrequency/NN/highfrequency counter/NNP/counter. in/IN/in some/DT/some computers/NNS/computers /,/, the/DT/the value/NN/value of/IN/of this/DT/this counter/NN/counter can/MD/can be/VB/be read/VBN/read from/IN/from a/DT/a device/NN/device register/NN/register /,/, in/IN/in which/WDT/which case/NN/case the/DT/the counter/NN/counter can/MD/can be/VB/be considered/VBN/considered a/DT/a highresolution/NN/highresolution clock/NNP/clock. although/IN/although this/DT/this clock/NN/clock does/VBZ/does not/RB/not generate/VB/generate interrupts/NNS/interrupts /,/, it/PRP/it offers/VBZ/offers accurate/JJ/accurate measurements/NNS/measurements of/IN/of time/NN/time intervals/NNS/intervals /./. 13.3.4/CD/13.3.4 blocking/VBG/blocking and/CC/and nonblocking/VBG/nonblocking 1/0/CD/1/0 another/DT/another aspect/NN/aspect of/IN/of the/DT/the system-call/JJ/system-call interface/NN/interface relates/NNS/relates to/TO/to the/DT/the choice/NN/choice between/IN/between blocking/NN/blocking i/0/-NONE-/i/0 and/CC/and nonblocking/VBG/nonblocking i/0/NNP/i/0. when/WRB/when an/DT/an application/NN/application issues/NNS/issues a/DT/a system/NN/system call/NN/call /,/, the/DT/the execution/NN/execution of/IN/of the/DT/the application/NN/application is/VBZ/is suspended/NNP/suspended. the/DT/the application/NN/application is/VBZ/is moved/VBN/moved from/IN/from the/DT/the operating/NN/operating system/NN/system 's/POS/'s run/NN/run queue/NN/queue to/TO/to a/DT/a wait/NN/wait queue/NNP/queue. after/IN/after the/DT/the system/NN/system call/NN/call completes/VBZ/completes /,/, the/DT/the application/NN/application is/VBZ/is moved/VBN/moved back/RB/back to/TO/to the/DT/the run/NN/run queue/NN/queue /,/, where/WRB/where it/PRP/it is/VBZ/is eligible/JJ/eligible to/TO/to resume/VB/resume execution/NNP/execution. when/WRB/when it/PRP/it resumes/VBZ/resumes execution/NN/execution /,/, it/PRP/it will/MD/will receive/VB/receive the/DT/the values/NNS/values returned/VBD/returned by/IN/by the/DT/the system/NN/system call/NNP/call. the/DT/the physical/JJ/physical actions/NNS/actions performed/VBN/performed by/IN/by i/0/-NONE-/i/0 devices/NNS/devices are/VBP/are generally/RB/generally asynchronous-they/JJ/asynchronous-they take/NN/take a/DT/a varying/NN/varying or/CC/or unpredictable/JJ/unpredictable amount/NN/amount of/IN/of time/NNP/time. nevertheless/NN/nevertheless /,/, most/JJS/most operating/NN/operating systems/NNS/systems use/VBP/use blocking/VBG/blocking system/NN/system calls/NNS/calls for/IN/for the/DT/the application/NN/application interface/NN/interface /,/, because/IN/because blocking/VBG/blocking application/NN/application code/NN/code is/VBZ/is easier/JJR/easier to/TO/to understand/VB/understand than/IN/than nonblocking/VBG/nonblocking application/NN/application code/NN/code /./. some/DT/some user-level/JJ/user-level processes/NNS/processes need/VBP/need i/0/NNP/i/0. one/CD/one example/NN/example is/VBZ/is a/DT/a user/NN/user interface/NN/interface that/WDT/that receives/VBZ/receives keyboard/VBP/keyboard and/CC/and mouse/NN/mouse input/NN/input while/IN/while processing/NN/processing and/CC/and displaying/VBG/displaying data/NNS/data on/IN/on the/DT/the screen/NNP/screen. another/DT/another example/NN/example is/VBZ/is a/DT/a video/NN/video application/NN/application that/WDT/that reads/VBZ/reads frames/VBZ/frames from/IN/from a/DT/a file/NN/file on/IN/on disk/NN/disk while/IN/while simultaneously/RB/simultaneously decompressing/VBG/decompressing and/CC/and displaying/VBG/displaying the/DT/the output/NN/output on/IN/on the/DT/the display/NN/display /./. one/CD/one way/NN/way an/DT/an application/NN/application writer/NN/writer can/MD/can overlap/VB/overlap execution/NN/execution with/IN/with i/0/-NONE-/i/0 is/VBZ/is to/TO/to write/VB/write a/DT/a multithreaded/VBN/multithreaded application/NNP/application. some/DT/some threads/NNS/threads can/MD/can perform/VB/perform blocking/VBG/blocking system/NN/system calls/NNS/calls /,/, while/IN/while others/NNS/others continue/VBP/continue executing/NNP/executing. the/DT/the solaris/NNS/solaris developers/NNS/developers used/VBN/used this/DT/this technique/NN/technique to/TO/to implement/VB/implement a/DT/a user-level/JJ/user-level library/NN/library for/IN/for asynchronous/JJ/asynchronous i/0/-NONE-/i/0 /,/, freeing/VBG/freeing the/DT/the application/NN/application writer/NN/writer from/IN/from that/DT/that task/NNP/task. some/DT/some operating/NN/operating systems/NNS/systems provide/VB/provide nonblocking/VBG/nonblocking i/0/-NONE-/i/0 system/NN/system calls/NNP/calls. a/DT/a nonblocking/NN/nonblocking call/NN/call does/VBZ/does not/RB/not halt/VB/halt the/DT/the execution/NN/execution of/IN/of the/DT/the application/NN/application for/IN/for an/DT/an extended/JJ/extended time/NNP/time. h1.stead/JJ/h1.stead /,/, it/PRP/it returns/VBZ/returns quickly/RB/quickly /,/, with/IN/with a/DT/a return/NN/return value/NN/value that/WDT/that indicates/VBZ/indicates how/WRB/how many/JJ/many bytes/NNS/bytes were/VBD/were transferred/VBN/transferred /./. an/DT/an alternative/NN/alternative to/TO/to a/DT/a nonblocking/NN/nonblocking system/NN/system call/NN/call is/VBZ/is an/DT/an asynchronous/JJ/asynchronous system/NN/system call/NNP/call. an/DT/an asynchronous/JJ/asynchronous call/NN/call returns/NNS/returns immediately/RB/immediately /,/, without/IN/without waiting/VBG/waiting for/IN/for the/DT/the i/0/NN/i/0 to/TO/to complete/NNP/complete. the/DT/the application/NN/application continues/VBZ/continues to/TO/to execute/VB/execute its/PRP$/its code/NNP/code. the/DT/the completion/NN/completion of/IN/of the/DT/the i/0/NNP/i/0 at/IN/at some/DT/some future/JJ/future time/NN/time is/VBZ/is communicated/VBN/communicated to/TO/to the/DT/the application/NN/application /,/, either/DT/either through/IN/through the/DT/the setting/NN/setting of/IN/of some/DT/some variable/JJ/variable in/IN/in the/DT/the address/NN/address space/NN/space of/IN/of the/DT/the application/NN/application or/CC/or through/IN/through the/DT/the triggering/NN/triggering of/IN/of a/DT/a signal/NN/signal or/CC/or software/NN/software interrupt/NN/interrupt or/CC/or a/DT/a call-back/JJ/call-back routine/NN/routine that/WDT/that is/VBZ/is executed/VBN/executed outside/IN/outside the/DT/the linear/NN/linear control/NN/control flow/NN/flow of/IN/of the/DT/the application/NNP/application. the/DT/the difference/NN/difference between/IN/between nonblocking/NN/nonblocking and/CC/and asynchronous/JJ/asynchronous system/NN/system calls/VBZ/calls is/VBZ/is that/IN/that a/DT/a nonblocking/NN/nonblocking read/NN/read /:/( /:/) returns/NNS/returns immediately/RB/immediately with/IN/with whatever/NN/whatever data/NNS/data are/VBP/are available-the/JJ/available-the full/JJ/full number/NN/number of/IN/of bytes/NNS/bytes requested/VBN/requested /,/, fewer/JJR/fewer /,/, or/CC/or none/NN/none at/IN/at all/NNP/all. an/DT/an asynchronous/JJ/asynchronous read/NN/read /:/( /:/) call/NN/call requests/NNS/requests a/DT/a transfer/NN/transfer that/WDT/that will/MD/will be/VB/be performed/VBN/performed in/IN/in its/PRP$/its entirety/NN/entirety but/CC/but will/MD/will complete/VB/complete at/IN/at some/DT/some future/JJ/future time/NNP/time. these/DT/these two/CD/two i/0/-NONE-/i/0 methods/NNS/methods are/VBP/are shown/VBN/shown in/IN/in figure/NN/figure 13.8/CD/13.8 /./. a/DT/a good/JJ/good example/NN/example of/IN/of nonblocking/NN/nonblocking behavior/NN/behavior is/VBZ/is the/DT/the select/NN/select /:/( /:/) system/NN/system call/NN/call for/IN/for network/NN/network sockets/NNP/sockets. this/DT/this system/NN/system call/NN/call takes/VBZ/takes an/DT/an argument/NN/argument that/IN/that specifies/NNS/specifies a/DT/a maximum/NN/maximum waiting/VBG/waiting time/NNP/time. by/IN/by setting/NN/setting it/PRP/it to/TO/to 0/-NONE-/0 /,/, an/DT/an application/NN/application can/MD/can poll/VB/poll for/IN/for network/NN/network activity/NN/activity 13.4/CD/13.4 13.4/CD/13.4 571/CD/571 kernel/NN/kernel user/NN/user user/NN/user kernel/NN/kernel /:/( a/DT/a /NN/) /:/( b/NN/b /:/) figure/NN/figure 13.8/CD/13.8 two/CD/two 1/0/CD/1/0 methods/NNS/methods /:/: /:/( a/DT/a /NN/) synchronous/JJ/synchronous and/CC/and /:/( b/NN/b /:/) asynchronous/JJ/asynchronous /./. without/IN/without blocking/NNP/blocking. but/CC/but using/VBG/using select/NN/select /:/( /:/) introduces/NNS/introduces extra/VBP/extra overhead/JJ/overhead /,/, because/IN/because the/DT/the select/NN/select /:/( /:/) call/NN/call only/RB/only checks/VBZ/checks whether/IN/whether i/0/-NONE-/i/0 is/VBZ/is possible/NNP/possible. for/IN/for a/DT/a data/NN/data transfer/NN/transfer /,/, select/NN/select /:/( /:/) must/MD/must be/VB/be followed/VBN/followed by/IN/by some/DT/some kind/NN/kind of/IN/of read/JJ/read /NN/( /:/) or/CC/or write/VB/write /CD/( /CD/) command/NN/command /./. a/DT/a variation/NN/variation on/IN/on this/DT/this approach/NN/approach /,/, fotmd/NN/fotmd in/IN/in mach/NN/mach /,/, is/VBZ/is a/DT/a blocking/NN/blocking multiple-read/JJ/multiple-read call/NN/call /./. it/PRP/it specifies/VBZ/specifies desired/VBN/desired reads/NNS/reads for/IN/for several/JJ/several devices/NNS/devices in/IN/in one/CD/one system/NN/system call/NN/call and/CC/and returns/NNS/returns as/IN/as soon/RB/soon as/IN/as any/DT/any one/CD/one of/IN/of them/PRP/them completes/VBZ/completes /./. kernels/NNS/kernels provide/VB/provide many/JJ/many services/NNS/services related/VBN/related to/TO/to i/0/NNP/i/0. several/JJ/several services-scheduling/JJ/services-scheduling /,/, buffering/VBG/buffering /,/, caching/VBG/caching /,/, spooling/VBG/spooling /,/, device/NN/device reservation/NN/reservation /,/, and/CC/and error/NN/error handlil1.g-are/JJ/handlil1.g-are provided/VBN/provided by/IN/by the/DT/the kernel/NN/kernel 's/POS/'s i/0/-NONE-/i/0 subsystem/NN/subsystem and/CC/and build/VB/build on/IN/on the/DT/the hardware/NN/hardware and/CC/and devicedriver/NN/devicedriver infrastructure/NNP/infrastructure. the/DT/the i/o/NNP/i/o subsystem/NN/subsystem is/VBZ/is also/RB/also responsible/JJ/responsible for/IN/for protectil1.g/JJ/protectil1.g itself/NN/itself from/IN/from errant/JJ/errant processes/NNS/processes and/CC/and malicious/JJ/malicious users/NNS/users /./. 13.4.1/CD/13.4.1 1/0/CD/1/0 scheduling/VBG/scheduling to/TO/to schedule/VB/schedule a/DT/a set/NN/set of/IN/of i/o/NNP/i/o requests/NNS/requests means/VBZ/means to/TO/to determine/VB/determine a/DT/a good/JJ/good order/NN/order in/IN/in which/WDT/which to/TO/to execute/VB/execute them/NNP/them. the/DT/the order/NN/order in/IN/in which/WDT/which applications/NNS/applications issue/VBP/issue system/NN/system calls/NNS/calls rarely/RB/rarely is/VBZ/is the/DT/the best/JJS/best choice/NNP/choice. scheduling/NN/scheduling can/MD/can improve/VB/improve overall/JJ/overall system/NN/system performance/NN/performance /,/, can/MD/can share/VB/share device/NN/device access/NN/access fairly/RB/fairly among/IN/among processes/NNS/processes /,/, and/CC/and can/MD/can reduce/VB/reduce the/DT/the average/JJ/average waiting/NN/waiting time/NN/time for/IN/for i/0/-NONE-/i/0 to/TO/to complete/NNP/complete. here/RB/here is/VBZ/is a/DT/a simple/JJ/simple example/NN/example to/TO/to illustrate/NNP/illustrate. suppose/NN/suppose that/WDT/that a/DT/a disk/NN/disk arm/NN/arm is/VBZ/is near/IN/near the/DT/the begilming/NN/begilming of/IN/of a/DT/a disk/NN/disk and/CC/and that/IN/that three/CD/three applications/NNS/applications issue/NN/issue blocking/VBG/blocking read/NN/read calls/NNS/calls to/TO/to that/DT/that disk/NN/disk application/NN/application 1/CD/1 requests/NNS/requests a/DT/a block/NN/block near/IN/near the/DT/the end/NN/end of/IN/of the/DT/the disk/NN/disk /,/, application/NN/application 2/CD/2 requests/NNS/requests one/CD/one near/IN/near the/DT/the beginning/NN/beginning /,/, and/CC/and application/NN/application 3/CD/3 requests/NNS/requests one/CD/one in/IN/in the/DT/the middle/NN/middle of/IN/of the/DT/the disk/NN/disk the/DT/the operating/NN/operating system/NN/system can/MD/can reduce/VB/reduce the/DT/the distance/NN/distance that/IN/that the/DT/the disk/NN/disk ann/NN/ann travels/NNS/travels by/IN/by serving/VBG/serving the/DT/the applications/NNS/applications in/IN/in the/DT/the order/NN/order 2/CD/2 /,/, 3/CD/3 /,/, 1/CD/1. rearrangil1.g/JJ/rearrangil1.g the/DT/the order/NN/order of/IN/of service/NN/service in/IN/in this/DT/this way/NN/way is/VBZ/is the/DT/the essence/NN/essence of/IN/of i/0/-NONE-/i/0 scheduling/VBG/scheduling /./. operating-system/JJ/operating-system developers/NNS/developers implement/NN/implement scheduling/VBG/scheduling by/IN/by maintaining/VBG/maintaining a/DT/a wait/NN/wait queue/NN/queue of/IN/of requests/NNS/requests for/IN/for each/DT/each device/NNP/device. when/WRB/when an/DT/an application/NN/application issues/NNS/issues a/DT/a blocking/VBG/blocking i/0/-NONE-/i/0 system/NN/system call/NN/call /,/, the/DT/the request/NN/request is/VBZ/is placed/VBN/placed on/IN/on the/DT/the queue/NN/queue for/IN/for that/DT/that device/NNP/device. the/DT/the i/0/NNP/i/0 scheduler/NN/scheduler rearranges/NNS/rearranges the/DT/the order/NN/order of/IN/of the/DT/the queue/NN/queue to/TO/to improve/VB/improve the/DT/the overall/JJ/overall system/NN/system efficiency/NN/efficiency and/CC/and the/DT/the average/JJ/average response/NN/response time/NN/time experienced/VBN/experienced by/IN/by applications/NNP/applications. the/DT/the operating/NN/operating 572/CD/572 chapter/NN/chapter 13/CD/13 figure/NN/figure 13.9/CD/13.9 device-status/JJ/device-status table/JJ/table /./. system/NN/system may/MD/may also/RB/also try/VB/try to/TO/to be/VB/be fair/JJ/fair /,/, so/RB/so that/IN/that no/DT/no one/NN/one application/NN/application receives/NNS/receives especially/RB/especially poor/JJ/poor service/NN/service /,/, or/CC/or it/PRP/it may/MD/may give/VB/give priority/NN/priority service/NN/service for/IN/for delay-sensitive/JJ/delay-sensitive requests/NNP/requests. for/IN/for instance/NN/instance /,/, requests/NNS/requests from/IN/from the/DT/the virtual/JJ/virtual memory/NN/memory subsystem/NN/subsystem may/MD/may take/VB/take priority/NN/priority over/IN/over application/NN/application requests/NNP/requests. several/JJ/several scheduling/VBG/scheduling algorithms/NNS/algorithms for/IN/for disk/NN/disk i/0/-NONE-/i/0 are/VBP/are detailed/VBN/detailed in/IN/in section/NN/section 12.4/CD/12.4 /./. when/WRB/when a/DT/a kernel/NN/kernel supports/NNS/supports asynchronous/JJ/asynchronous i/0/-NONE-/i/0 /,/, it/PRP/it must/MD/must be/VB/be able/JJ/able to/TO/to keep/VB/keep track/NN/track of/IN/of many/JJ/many i/0/-NONE-/i/0 requests/VBZ/requests at/IN/at the/DT/the same/JJ/same time/NNP/time. for/IN/for this/DT/this purpose/NN/purpose /,/, the/DT/the operating/NN/operating system/NN/system might/MD/might attach/VB/attach the/DT/the wait/NN/wait queue/NN/queue to/TO/to a/DT/a /:/: able/NNP/able. the/DT/the kernel/NN/kernel manages/NNS/manages this/DT/this table/NN/table /,/, which/WDT/which contains/VBZ/contains an/DT/an entry/NN/entry for/IN/for each/DT/each i/0/-NONE-/i/0 device/NN/device /,/, as/IN/as shown/NN/shown in/IN/in figure/NN/figure 13.9/CD/13.9 /./. each/DT/each table/NN/table entry/NN/entry indicates/VBZ/indicates the/DT/the device/NN/device 's/POS/'s type/NN/type /,/, address/NN/address /,/, and/CC/and state/NN/state /:/( not/RB/not functioning/VBG/functioning /,/, idle/JJ/idle /,/, or/CC/or busy/JJ/busy /NN/) /./. if/IN/if the/DT/the device/NN/device is/VBZ/is busy/JJ/busy with/IN/with a/DT/a request/NN/request /,/, the/DT/the type/NN/type of/IN/of request/NN/request and/CC/and other/JJ/other parameters/NNS/parameters will/MD/will be/VB/be stored/VBN/stored in/IN/in the/DT/the table/NN/table entry/NN/entry for/IN/for that/DT/that device/NN/device /./. one/CD/one way/NN/way in/IN/in which/WDT/which the/DT/the i/0/-NONE-/i/0 subsystem/NN/subsystem improves/VBZ/improves the/DT/the efficiency/NN/efficiency of/IN/of the/DT/the computer/NN/computer is/VBZ/is by/IN/by scheduling/NN/scheduling i/0/-NONE-/i/0 operations/NNP/operations. another/DT/another way/NN/way is/VBZ/is by/IN/by using/VBG/using storage/NN/storage space/NN/space in/IN/in main/NN/main memory/NN/memory or/CC/or on/IN/on disk/NN/disk via/IN/via teclul.iques/NNS/teclul.iques called/VBN/called buffering/VBG/buffering /,/, caching/VBG/caching /,/, and/CC/and spooling/VBG/spooling /./. 13.4.2/CD/13.4.2 buffering/VBG/buffering a/DT/a is/VBZ/is a/DT/a memory/NN/memory area/NN/area that/IN/that stores/NNS/stores data/NNS/data being/VBG/being transferred/VBN/transferred between/IN/between two/CD/two devices/NNS/devices or/CC/or between/IN/between a/DT/a device/NN/device and/CC/and an/DT/an application/NNP/application. buffering/NN/buffering is/VBZ/is done/VBN/done for/IN/for three/CD/three reasons/NNP/reasons. one/CD/one reason/NN/reason is/VBZ/is to/TO/to cope/VB/cope with/IN/with a/DT/a speed/NN/speed mismatch/NN/mismatch between/IN/between the/DT/the producer/NN/producer and/CC/and consumer/NN/consumer of/IN/of a/DT/a data/NN/data stream/NNP/stream. suppose/NN/suppose /,/, for/IN/for example/NN/example /,/, that/IN/that a/DT/a file/NN/file is/VBZ/is being/VBG/being received/VBN/received via/IN/via modem/NN/modem for/IN/for storage/NN/storage on/IN/on the/DT/the hard/JJ/hard disk/NN/disk the/DT/the modem/NN/modem is/VBZ/is about/IN/about a/DT/a thousand/NN/thousand times/VBZ/times slower/JJR/slower than/IN/than the/DT/the hard/JJ/hard disk/NN/disk so/IN/so a/DT/a buffer/NN/buffer is/VBZ/is created/VBN/created in/IN/in main/JJ/main mernory/NN/mernory to/TO/to accumulate/VB/accumulate the/DT/the bytes/NNS/bytes received/VBD/received from/IN/from the/DT/the modem/NNP/modem. when/WRB/when an/DT/an entire/JJ/entire buffer/NN/buffer of/IN/of data/NNS/data has/VBZ/has arrived/VBN/arrived /,/, the/DT/the buffer/NN/buffer can/MD/can be/VB/be written/VBN/written to/TO/to disk/VB/disk in/IN/in a/DT/a single/JJ/single operation/NNP/operation. since/IN/since the/DT/the disk/NN/disk write/NN/write is/VBZ/is not/RB/not instantaneous/JJ/instantaneous and/CC/and the/DT/the modem/NN/modem still/RB/still needs/VBZ/needs a/DT/a place/NN/place to/TO/to store/VB/store additional/JJ/additional incoming/NN/incoming data/NNS/data /,/, two/CD/two buffers/NNS/buffers are/VBP/are used/NNP/used. after/IN/after the/DT/the modem/NN/modem fills/VBZ/fills the/DT/the first/JJ/first buffer/NN/buffer /,/, the/DT/the disk/NN/disk write/NN/write is/VBZ/is requested/NNP/requested. the/DT/the modem/NN/modem then/RB/then starts/VBZ/starts to/TO/to fill/VB/fill the/DT/the second/JJ/second buffer/NN/buffer while/IN/while the/DT/the first/JJ/first buffer/NN/buffer is/VBZ/is written/VBN/written to/TO/to disk/VB/disk by/IN/by the/DT/the time/NN/time the/DT/the modem/NN/modem has/VBZ/has filled/VBN/filled 13.4/CD/13.4 573/CD/573 the/DT/the second/JJ/second buffer/NN/buffer /,/, the/DT/the disk/NN/disk write/NN/write from/IN/from the/DT/the first/JJ/first one/CD/one should/MD/should have/VB/have completed/VBN/completed /,/, so/RB/so the/DT/the modem/NN/modem can/MD/can switch/VB/switch back/RB/back to/TO/to the/DT/the first/JJ/first buffer/NN/buffer while/IN/while the/DT/the disk/NN/disk writes/VBZ/writes the/DT/the second/JJ/second one/NNP/one. this/DT/this decouples/VBZ/decouples the/DT/the producer/NN/producer of/IN/of data/NNS/data from/IN/from the/DT/the consun1.er/JJ/consun1.er /,/, thus/RB/thus relaxing/VBG/relaxing timing/NN/timing requirements/NNS/requirements between/IN/between them/NNP/them. the/DT/the need/NN/need for/IN/for this/DT/this decoupling/NN/decoupling is/VBZ/is illustrated/VBN/illustrated in/IN/in figure/NN/figure 13.10/CD/13.10 /,/, which/WDT/which lists/NNS/lists the/DT/the enormous/JJ/enormous differences/NNS/differences in/IN/in device/NN/device speeds/NNS/speeds for/IN/for typical/JJ/typical computer/NN/computer hardware/NN/hardware /./. a/DT/a second/JJ/second use/NN/use of/IN/of buffering/VBG/buffering is/VBZ/is to/TO/to provide/VB/provide adaptations/NNS/adaptations for/IN/for devices/NNS/devices that/WDT/that have/VBP/have different/JJ/different data-transfer/JJ/data-transfer sizes/NNP/sizes. such/JJ/such disparities/NNS/disparities are/VBP/are especially/RB/especially common/JJ/common in/IN/in computer/NN/computer networking/NN/networking /,/, where/WRB/where buffers/NNS/buffers are/VBP/are used/VBN/used widely/RB/widely for/IN/for fragmentation/NN/fragmentation and/CC/and reassembly/RB/reassembly of/IN/of messages/NNP/messages. at/IN/at the/DT/the sending/NN/sending side/NN/side /,/, a/DT/a large/JJ/large message/NN/message is/VBZ/is fragmented/VBN/fragmented into/IN/into small/JJ/small network/NN/network packets/NNP/packets. the/DT/the packets/NNS/packets are/VBP/are sent/VBN/sent over/IN/over the/DT/the network/NN/network /,/, and/CC/and the/DT/the receiving/NN/receiving side/NN/side places/NNS/places them/PRP/them in/IN/in a/DT/a reassembly/RB/reassembly buffer/NN/buffer to/TO/to form/NN/form an/DT/an image/NN/image of/IN/of the/DT/the source/NN/source data/NNS/data /./. a/DT/a third/JJ/third use/NN/use of/IN/of buffering/VBG/buffering is/VBZ/is to/TO/to support/VB/support copy/NN/copy semantics/NNS/semantics for/IN/for application/NN/application i/0/-NONE-/i/0 /./. an/DT/an example/NN/example will/MD/will clarify/VB/clarify the/DT/the meaning/NN/meaning of/IN/of copy/NN/copy semantics/NNP/semantics. suppose/NN/suppose that/WDT/that an/DT/an application/NN/application has/VBZ/has a/DT/a buffer/NN/buffer of/IN/of data/NNS/data that/WDT/that it/PRP/it wishes/VBZ/wishes to/TO/to write/VB/write to/TO/to disk/VB/disk it/PRP/it calls/VBZ/calls the/DT/the write/NN/write /:/( /:/) systemcalt/NN/systemcalt providing/VBG/providing a/DT/a pointer/NN/pointer to/TO/to the/DT/the buffer/NN/buffer and/CC/and an/DT/an integer/NN/integer specifying/VBG/specifying the/DT/the number/NN/number of/IN/of bytes/NNS/bytes to/TO/to write/NNP/write. after/IN/after the/DT/the system/NN/system call/NN/call returns/NNS/returns /,/, what/WP/what happens/NNS/happens if/IN/if the/DT/the application/NN/application changes/NNS/changes the/DT/the contents/NNS/contents of/IN/of the/DT/the buffer/NN/buffer with/IN/with the/DT/the version/NN/version of/IN/of the/DT/the data/NNS/data written/VBN/written to/TO/to disk/VB/disk is/VBZ/is guaranteed/VBN/guaranteed to/TO/to be/VB/be version/NN/version at/IN/at the/DT/the time/NN/time of/IN/of the/DT/the application/NN/application system/NN/system calt/NN/calt independent/NN/independent of/IN/of any/DT/any subsequent/JJ/subsequent changes/NNS/changes in/IN/in the/DT/the application/NN/application 's/POS/'s buffer/NNP/buffer. a/DT/a simple/JJ/simple way/NN/way in/IN/in which/WDT/which the/DT/the operating/NN/operating system/NN/system can/MD/can guarantee/VB/guarantee copy/NN/copy semantics/NNS/semantics is/VBZ/is for/IN/for the/DT/the write/JJ/write /NN/( /:/) system/NN/system call/NN/call to/TO/to copy/VB/copy the/DT/the application/NN/application i/PRP/i system/VBP/system bus/RB/bus hype/NN/hype /:/( ~/:/~ ransport/NN/ransport /:/( 32,pair/JJ/32,pair /NN/) ~/:/~ ~/:/~ ~/:/~ iii/NN/iii ~/:/~ ~/:/~ ~/:/~ ~/:/~ ~/:/~ ~/:/~ ~/:/~ ~/:/~ i/PRP/i pci/VBP/pci ~/:/~ xpress/NN/xpress 2.0/CD/2.0 /CD/( 32/CD/32 /CD/) i/PRP/i lnfi/VBP/lnfi !/./! l.i/NNP/l.i band/NN/band /:/( qdr/NN/qdr ;/:/; .1/CD/.1 2x/CD/2x /CD/) 0.00001/CD/0.00001 0.001/CD/0.001 0.1/CD/0.1 10/CD/10 1000/CD/1000 100000/CD/100000 1/CD/1 efigure/NN/efigure 13.10/CD/13.10 sun/NN/sun enterprise/NN/enterprise 6000/CD/6000 device-transfer/JJ/device-transfer rates/NNS/rates /:/( logarithmic/JJ/logarithmic /NN/) /./. 574/CD/574 chapter/NN/chapter 13/CD/13 data/NNS/data into/IN/into a/DT/a kernel/NN/kernel buffer/NN/buffer before/IN/before returning/VBG/returning control/NN/control to/TO/to the/DT/the application/NNP/application. the/DT/the disk/NN/disk write/NN/write is/VBZ/is performed/VBN/performed from/IN/from the/DT/the kernel/NN/kernel buffer/NN/buffer /,/, so/RB/so that/IN/that subsequent/JJ/subsequent changes/NNS/changes to/TO/to the/DT/the application/NN/application buffer/NN/buffer have/VBP/have no/DT/no effect/NNP/effect. copying/NN/copying of/IN/of data/NNS/data between/IN/between kernel/NN/kernel buffers/NNS/buffers and/CC/and application/NN/application data/NNS/data space/NN/space is/VBZ/is common/JJ/common in/IN/in operating/NN/operating systems/NNS/systems /,/, despite/IN/despite the/DT/the overhead/JJ/overhead that/IN/that this/DT/this operation/NN/operation introduces/VBZ/introduces /,/, because/IN/because of/IN/of the/DT/the clean/JJ/clean semantics/NNP/semantics. the/DT/the same/JJ/same effect/NN/effect can/MD/can be/VB/be obtained/VBN/obtained more/RBR/more efficiently/RB/efficiently by/IN/by clever/NN/clever use/NN/use of/IN/of virtual/JJ/virtual memory/NN/memory mapping/VBG/mapping and/CC/and copy-on-write/JJ/copy-on-write page/NN/page protection/NN/protection /./. 13.4.3/CD/13.4.3 caching/VBG/caching a/DT/a is/VBZ/is a/DT/a region/NN/region of/IN/of fast/JJ/fast memory/NN/memory that/WDT/that holds/VBZ/holds copies/NNS/copies of/IN/of data/NNP/data. access/NN/access to/TO/to the/DT/the cached/JJ/cached copy/NN/copy is/VBZ/is more/RBR/more efficient/JJ/efficient than/IN/than access/NN/access to/TO/to the/DT/the original/NNP/original. for/IN/for instance/NN/instance /,/, the/DT/the instructions/NNS/instructions of/IN/of the/DT/the currently/RB/currently running/VBG/running process/NN/process are/VBP/are stored/VBN/stored on/IN/on disk/NN/disk /,/, cached/VBD/cached ilc/NN/ilc physical/JJ/physical memory/NN/memory /,/, and/CC/and copied/VBD/copied again/RB/again ill/JJ/ill the/DT/the cpu/NN/cpu 's/POS/'s secondary/JJ/secondary and/CC/and primary/JJ/primary caches/NNP/caches. the/DT/the difference/NN/difference between/IN/between a/DT/a buffer/NN/buffer and/CC/and a/DT/a cache/NN/cache is/VBZ/is that/IN/that a/DT/a buffer/NN/buffer may/MD/may hold/VB/hold the/DT/the only/JJ/only existing/VBG/existing copy/NN/copy of/IN/of a/DT/a data/NN/data item/NN/item /,/, whereas/VBZ/whereas a/DT/a cache/NN/cache /,/, by/IN/by definition/NN/definition /,/, holds/VBZ/holds a/DT/a copy/NN/copy on/IN/on faster/JJR/faster storage/NN/storage of/IN/of an/DT/an item/NN/item that/IN/that resides/NNS/resides elsewhere/RB/elsewhere /./. caching/VBG/caching and/CC/and buffering/VBG/buffering are/VBP/are distinct/JJ/distinct functions/NNS/functions /,/, but/CC/but sometinces/NNS/sometinces a/DT/a region/NN/region of/IN/of memory/NN/memory can/MD/can be/VB/be used/VBN/used for/IN/for both/DT/both purposes/NNP/purposes. for/IN/for illstance/NN/illstance /,/, to/TO/to preserve/VB/preserve copy/NN/copy semantics/NNS/semantics and/CC/and to/TO/to enable/VB/enable efficient/JJ/efficient scheduling/NN/scheduling of/IN/of disk/NN/disk i/0/-NONE-/i/0 /,/, the/DT/the operating/NN/operating system/NN/system uses/NNS/uses buffers/NNS/buffers in/IN/in maill/NN/maill memory/NN/memory to/TO/to hold/VB/hold disk/NN/disk data/NNP/data. these/DT/these buffers/NNS/buffers are/VBP/are also/RB/also used/VBN/used as/IN/as a/DT/a cache/NN/cache /,/, to/TO/to improve/VB/improve the/DT/the i/o/NNP/i/o efficiency/NN/efficiency for/IN/for files/NNS/files that/WDT/that are/VBP/are shared/VBN/shared by/IN/by applications/NNS/applications or/CC/or that/IN/that are/VBP/are being/VBG/being written/VBN/written and/CC/and reread/VB/reread rapidly/NNP/rapidly. when/WRB/when the/DT/the kernel/NN/kernel receives/VBZ/receives a/DT/a file/NN/file i/0/-NONE-/i/0 request/NN/request /,/, the/DT/the kernel/NN/kernel first/RB/first accesses/VBZ/accesses the/DT/the buffer/NN/buffer cache/NN/cache to/TO/to see/VB/see whether/IN/whether that/DT/that region/NN/region of/IN/of the/DT/the file/NN/file is/VBZ/is already/RB/already available/JJ/available in/IN/in main/JJ/main memory/NNP/memory. if/IN/if it/PRP/it is/VBZ/is /,/, a/DT/a physical/JJ/physical disk/NN/disk i/o/-NONE-/i/o can/MD/can be/VB/be avoided/VBN/avoided or/CC/or deferred/NNP/deferred. also/RB/also /,/, disk/NN/disk writes/NNS/writes are/VBP/are accumulated/VBN/accumulated ill/NN/ill the/DT/the buffer/NN/buffer cache/NN/cache for/IN/for several/JJ/several seconds/NNS/seconds /,/, so/RB/so that/IN/that large/JJ/large transfers/NNS/transfers are/VBP/are gathered/VBN/gathered to/TO/to allow/VB/allow efficient/JJ/efficient write/NN/write schedules/NNP/schedules. this/DT/this strategy/NN/strategy of/IN/of delayilcg/NN/delayilcg writes/NNS/writes to/TO/to improve/VB/improve i/o/JJ/i/o efficiency/NN/efficiency is/VBZ/is discussed/VBN/discussed /,/, in/IN/in the/DT/the context/NN/context of/IN/of remote/NN/remote file/NN/file access/NN/access /,/, ill/NN/ill section/NN/section 17.3/CD/17.3 /./. 13.4.4/CD/13.4.4 spooling/VBG/spooling and/CC/and device/NN/device reservation/NN/reservation a/DT/a is/VBZ/is a/DT/a buffer/NN/buffer that/WDT/that holds/VBZ/holds output/NN/output for/IN/for a/DT/a device/NN/device /,/, such/JJ/such as/IN/as a/DT/a printer/NN/printer /,/, that/IN/that can/MD/can not/RB/not accept/VB/accept ilcterleaved/VBN/ilcterleaved data/NNS/data streams/NNP/streams. although/IN/although a/DT/a prillter/NN/prillter can/MD/can serve/VB/serve only/RB/only one/CD/one job/NN/job at/IN/at a/DT/a time/NN/time /,/, several/JJ/several applications/NNS/applications may/MD/may wish/VB/wish to/TO/to print/VB/print their/PRP$/their output/NN/output concurrently/RB/concurrently /,/, without/IN/without having/VBG/having their/PRP$/their output/NN/output mixed/VBN/mixed together/NNP/together. the/DT/the operating/NN/operating system/NN/system solves/NNS/solves this/DT/this problem/NN/problem by/IN/by intercepting/NN/intercepting all/DT/all output/NN/output to/TO/to the/DT/the printer/NNP/printer. each/DT/each application/NN/application 's/POS/'s output/NN/output is/VBZ/is spooled/VBN/spooled to/TO/to a/DT/a separate/JJ/separate disk/NN/disk file/NNP/file. when/WRB/when an/DT/an application/NN/application finishes/VBZ/finishes printing/VBG/printing /,/, the/DT/the spooling/NN/spooling system/NN/system queues/NNS/queues the/DT/the correspondilcg/NN/correspondilcg spool/NN/spool file/NN/file for/IN/for output/NN/output to/TO/to the/DT/the printer/NN/printer /./. the/DT/the spooling/NN/spooling system/NN/system copies/NNS/copies the/DT/the queued/VBN/queued spool/NN/spool files/NNS/files to/TO/to the/DT/the printer/NN/printer one/CD/one at/IN/at a/DT/a time/NNP/time. in/IN/in some/DT/some operating/NN/operating systems/NNS/systems /,/, spooling/VBG/spooling is/VBZ/is managed/VBN/managed by/IN/by a/DT/a system/NN/system daemon/NN/daemon process/NNP/process. in/IN/in others/NNS/others /,/, it/PRP/it is/VBZ/is handled/VBN/handled by/IN/by an/DT/an in-kernel/JJ/in-kernel thread/NNP/thread. in/IN/in either/DT/either case/NN/case /,/, the/DT/the operating/NN/operating system/NN/system provides/VBZ/provides a/DT/a control/NN/control interface/NN/interface that/WDT/that enables/VBZ/enables users/NNS/users and/CC/and system/NN/system administrators/NNS/administrators to/TO/to display/VB/display the/DT/the queue/NN/queue /,/, remove/VBP/remove unwanted/VBN/unwanted jobs/NNS/jobs before/IN/before those/DT/those jobs/NNS/jobs print/VBP/print /,/, suspend/NN/suspend printing/VBG/printing while/IN/while the/DT/the printer/NN/printer is/VBZ/is serviced/VBN/serviced /,/, and/CC/and so/RB/so on/IN/on /./. some/DT/some devices/NNS/devices /,/, such/JJ/such as/IN/as tape/NN/tape drives/NNS/drives and/CC/and printers/NNS/printers /,/, can/MD/can not/RB/not usefully/RB/usefully multiplex/JJ/multiplex the/DT/the i/0/NN/i/0 requests/NNS/requests of/IN/of multiple/NN/multiple concurrent/NN/concurrent applications/NNP/applications. spooling/NN/spooling is/VBZ/is one/CD/one way/NN/way operating/NN/operating systems/NNS/systems can/MD/can coordinate/VB/coordinate concurrent/NN/concurrent output/NNP/output. another/DT/another way/NN/way to/TO/to deal/VB/deal with/IN/with concurrent/NN/concurrent device/NN/device access/NN/access is/VBZ/is to/TO/to provide/VB/provide explicit/JJ/explicit facilities/NNS/facilities for/IN/for coordination/NNP/coordination. some/DT/some operating/NN/operating systems/NNS/systems /:/( including/VBG/including vms/NNS/vms /:/) provide/VB/provide support/NN/support for/IN/for exclusive/JJ/exclusive device/NN/device access/NN/access by/IN/by enabling/NN/enabling a/DT/a process/NN/process to/TO/to allocate/VB/allocate an/DT/an idle/NN/idle device/NN/device and/CC/and to/TO/to deallocate/VB/deallocate that/IN/that device/NN/device 13.4/CD/13.4 575/CD/575 when/WRB/when it/PRP/it is/VBZ/is no/DT/no longer/NN/longer needed/NNP/needed. other/JJ/other operating/VBG/operating systems/NNS/systems enforce/NN/enforce a/DT/a limit/NN/limit of/IN/of one/CD/one open/JJ/open file/NN/file handle/NN/handle to/TO/to such/JJ/such a/DT/a device/NNP/device. many/JJ/many operating/VBG/operating systems/NNS/systems provide/VB/provide functions/NNS/functions that/IN/that enable/JJ/enable processes/NNS/processes to/TO/to coordinate/VB/coordinate exclusive/JJ/exclusive access/NN/access among/IN/among then'lselves/NNP/then'lselves. for/IN/for instance/NN/instance /,/, windows/VBZ/windows nt/NN/nt provides/VBZ/provides system/NN/system calls/VBZ/calls to/TO/to wait/VB/wait until/IN/until a/DT/a device/NN/device object/NN/object becomes/VBZ/becomes available/NNP/available. it/PRP/it also/RB/also has/VBZ/has a/DT/a parameter/NN/parameter to/TO/to the/DT/the open/JJ/open /NN/( /:/) system/NN/system call/NN/call that/WDT/that declares/VBZ/declares the/DT/the types/NNS/types of/IN/of access/NN/access to/TO/to be/VB/be permitted/VBN/permitted to/TO/to other/JJ/other concurrent/NN/concurrent threads/NNP/threads. on/IN/on these/DT/these systems/NNS/systems /,/, it/PRP/it is/VBZ/is up/RP/up to/TO/to the/DT/the applications/NNS/applications to/TO/to avoid/VB/avoid deadlock/NN/deadlock /./. 13.4.5/CD/13.4.5 error/NN/error handling/NN/handling an/DT/an operating/NN/operating system/NN/system that/WDT/that uses/VBZ/uses protected/VBN/protected memory/NN/memory can/MD/can guard/VB/guard against/IN/against many/JJ/many kinds/NNS/kinds of/IN/of hardware/NN/hardware and/CC/and application/NN/application errors/NNS/errors /,/, so/RB/so that/IN/that a/DT/a complete/JJ/complete system/NN/system failure/NN/failure is/VBZ/is not/RB/not the/DT/the usual/JJ/usual result/NN/result of/IN/of each/DT/each minor/NN/minor mechanical/JJ/mechanical glitch/NNP/glitch. devices/NNS/devices and/CC/and i/0/-NONE-/i/0 transfers/NNS/transfers can/MD/can fail/VB/fail in/IN/in many/JJ/many ways/NNS/ways /,/, either/DT/either for/IN/for transient/NN/transient reasons/NNS/reasons /,/, as/IN/as when/WRB/when a/DT/a network/NN/network becomes/VBZ/becomes overloaded/VBN/overloaded /,/, or/CC/or for/IN/for permanent/JJ/permanent reasons/NNS/reasons /,/, as/IN/as when/WRB/when a/DT/a disk/NN/disk controller/NN/controller becomes/VBZ/becomes defective/NNP/defective. operating/NN/operating systems/NNS/systems can/MD/can often/RB/often compensate/VB/compensate effectively/RB/effectively for/IN/for transient/NN/transient failures/NNP/failures. for/IN/for instance/NN/instance /,/, a/DT/a disk/NN/disk read/NN/read /:/( /:/) failure/NN/failure results/NNS/results in/IN/in a/DT/a read/NN/read /:/( /:/) retry/NN/retry /,/, and/CC/and a/DT/a network/NN/network send/NN/send /:/( /:/) error/NN/error results/NNS/results in/IN/in a/DT/a res/NNS/res end/NN/end /:/( /:/) /,/, if/IN/if the/DT/the protocol/NN/protocol so/RB/so specifies/VBZ/specifies /./. unfortunately/RB/unfortunately /,/, if/IN/if an/DT/an important/JJ/important component/NN/component experiences/NNS/experiences a/DT/a permanent/NN/permanent failure/NN/failure /,/, the/DT/the operating/NN/operating system/NN/system is/VBZ/is unlikely/RB/unlikely to/TO/to recover/VB/recover /./. as/IN/as a/DT/a general/JJ/general rule/NN/rule /,/, an/DT/an i/0/-NONE-/i/0 system/NN/system call/NN/call will/MD/will return/VB/return one/CD/one bit/NN/bit of/IN/of information/NN/information about/IN/about the/DT/the status/NN/status of/IN/of the/DT/the call/NN/call /,/, signifying/VBG/signifying either/DT/either success/NN/success or/CC/or failure/NNP/failure. in/IN/in the/DT/the unix/NN/unix operating/NN/operating system/NN/system /,/, an/DT/an additional/JJ/additional integer/NN/integer variable/JJ/variable named/VBN/named errno/NN/errno is/VBZ/is used/VBN/used to/TO/to return/VB/return an/DT/an error/NN/error code-one/NN/code-one of/IN/of about/RB/about a/DT/a hundred/CD/hundred values-indicating/JJ/values-indicating the/DT/the general/JJ/general nature/NN/nature of/IN/of the/DT/the failure/NN/failure /:/( for/IN/for example/NN/example /,/, argument/NN/argument out/IN/out of/IN/of range/NN/range /,/, bad/JJ/bad pointer/NN/pointer /,/, or/CC/or file/VB/file not/RB/not open/JJ/open /NN/) /./. by/IN/by contrast/NN/contrast /,/, some/DT/some hardware/NN/hardware can/MD/can provide/VB/provide highly/RB/highly detailed/VBN/detailed error/NN/error information/NN/information /,/, although/IN/although many/JJ/many current/JJ/current operating/NN/operating systems/NNS/systems are/VBP/are not/RB/not designed/VBN/designed to/TO/to convey/NN/convey this/DT/this information/NN/information to/TO/to the/DT/the application/NNP/application. for/IN/for instance/NN/instance /,/, a/DT/a failure/NN/failure of/IN/of a/DT/a scsi/NN/scsi device/NN/device is/VBZ/is reported/VBN/reported by/IN/by the/DT/the scsi/NN/scsi protocol/NN/protocol in/IN/in three/CD/three levels/NNS/levels of/IN/of detail/NN/detail /:/: a/DT/a key/JJ/key that/IN/that identifies/NNS/identifies the/DT/the general/JJ/general nature/NN/nature of/IN/of the/DT/the failure/NN/failure /,/, such/JJ/such as/IN/as a/DT/a hardware/NN/hardware error/NN/error or/CC/or an/DT/an illegal/JJ/illegal request/NN/request ;/:/; an/DT/an that/WDT/that states/VBZ/states the/DT/the category/NN/category of/IN/of failure/NN/failure /,/, such/JJ/such as/IN/as a/DT/a bad/JJ/bad command/NN/command parameter/NN/parameter or/CC/or a/DT/a self-test/JJ/self-test failure/NN/failure ;/:/; and/CC/and an/DT/an 'x/JJ/'x '/''/' l/NN/l '.l/NN/'.l that/WDT/that gives/VBZ/gives even/RB/even more/JJR/more detail/NN/detail /,/, such/JJ/such as/IN/as which/WDT/which command/NN/command parameter/NN/parameter was/VBD/was in/IN/in error/NN/error or/CC/or which/WDT/which hardware/NN/hardware subsystem/NN/subsystem failed/VBD/failed its/PRP$/its self-test/NNP/self-test. further/JJ/further /,/, many/JJ/many scsi/NN/scsi devices/NNS/devices maintain/VB/maintain internal/JJ/internal pages/NNS/pages of/IN/of error-log/JJ/error-log information/NN/information that/WDT/that can/MD/can be/VB/be requested/VBN/requested by/IN/by the/DT/the host-but/JJ/host-but seldom/NN/seldom are/VBP/are /./. 13.4.6/CD/13.4.6 1/0/CD/1/0 protection/NN/protection errors/NNS/errors are/VBP/are closely/RB/closely related/VBN/related to/TO/to the/DT/the issue/NN/issue of/IN/of protection/NNP/protection. a/DT/a user/NN/user process/NN/process may/MD/may accidentally/RB/accidentally or/CC/or purposely/RB/purposely attempt/JJ/attempt to/TO/to disrupt/VB/disrupt the/DT/the normal/JJ/normal operation/NN/operation of/IN/of a/DT/a systern/NN/systern by/IN/by attempting/NN/attempting to/TO/to issue/VB/issue illegal/JJ/illegal i/0/-NONE-/i/0 instructions/NNP/instructions. we/PRP/we can/MD/can use/VB/use various/JJ/various mechanisms/NNS/mechanisms to/TO/to ensure/VB/ensure that/IN/that such/JJ/such disruptions/NNS/disruptions cam'lot/JJ/cam'lot take/NN/take place/NN/place in/IN/in the/DT/the system/NN/system /./. to/TO/to prevent/VB/prevent users/NNS/users from/IN/from performing/VBG/performing illegal/JJ/illegal i/0/-NONE-/i/0 /,/, we/PRP/we define/VBP/define all/DT/all i/0/-NONE-/i/0 instructions/NNS/instructions to/TO/to be/VB/be privileged/VBN/privileged instructions/-NONE-/instructions. thus/RB/thus /,/, users/NNS/users can/MD/can not/RB/not issue/VB/issue i/o/JJ/i/o instructions/NNS/instructions directly/RB/directly ;/:/; they/PRP/they must/MD/must do/VB/do it/PRP/it through/IN/through the/DT/the operating/NN/operating system/NNP/system. to/TO/to do/VB/do i/0/-NONE-/i/0 /,/, a/DT/a user/NN/user program/NN/program executes/NNS/executes a/DT/a system/NN/system call/NN/call to/TO/to request/NN/request that/IN/that the/DT/the operating/NN/operating system/NN/system perform/NN/perform i/0/-NONE-/i/0 on/IN/on its/PRP$/its behalf/NN/behalf /:/( figure/NN/figure 13.11/CD/13.11 /CD/) /./. the/DT/the operating/NN/operating system/NN/system /,/, executing/VBG/executing in/IN/in monitor/NN/monitor mode/NN/mode /,/, checks/NNS/checks that/WDT/that the/DT/the request/NN/request is/VBZ/is valid/JJ/valid and/CC/and /,/, if/IN/if it/PRP/it is/VBZ/is /,/, does/VBZ/does the/DT/the i/0/NN/i/0 requested/NNP/requested. the/DT/the operating/NN/operating system/NN/system then/RB/then returns/VBZ/returns to/TO/to the/DT/the user/NN/user /./. 576/CD/576 chapter/NN/chapter 13/CD/13 cd/NN/cd trap/NN/trap to/TO/to monitor/NN/monitor kernel/NN/kernel perform/NN/perform 1/0/CD/1/0 return/NN/return to/TO/to user/NN/user user/NN/user program/NN/program figure/NN/figure 13.1/CD/13.1 1/CD/1 use/NN/use of/IN/of a/DT/a system/NN/system call/NN/call to/TO/to perform/VB/perform 1/0/CD/1/0 /./. in/IN/in addition/NN/addition /,/, any/DT/any memory-mapped/JJ/memory-mapped and/CC/and i/o/NNP/i/o port/NN/port memory/NN/memory locations/NNS/locations must/MD/must be/VB/be protected/VBN/protected from/IN/from user/NN/user access/NN/access by/IN/by the/DT/the memory-protection/NN/memory-protection system/NNP/system. note/NN/note that/IN/that a/DT/a kernel/NN/kernel can/MD/can not/RB/not simply/RB/simply deny/JJ/deny all/DT/all user/NN/user access/NNP/access. most/JJS/most graphics/NNS/graphics games/NNS/games and/CC/and video/NN/video editing/NN/editing and/CC/and playback/NN/playback software/NN/software need/VBP/need direct/JJ/direct access/NN/access to/TO/to memory-mapped/JJ/memory-mapped graphics/NNS/graphics controller/NN/controller memory/NN/memory to/TO/to speed/VB/speed the/DT/the performance/NN/performance of/IN/of the/DT/the graphics/NNS/graphics /,/, for/IN/for example/NNP/example. the/DT/the kernel/NN/kernel might/MD/might in/IN/in this/DT/this case/NN/case provide/VB/provide a/DT/a locking/NN/locking mechanism/NN/mechanism to/TO/to allow/VB/allow a/DT/a section/NN/section of/IN/of graphics/NNS/graphics memory/NN/memory /:/( representing/VBG/representing a/DT/a window/NN/window on/IN/on screen/NN/screen /:/) to/TO/to be/VB/be allocated/VBN/allocated to/TO/to one/CD/one process/NN/process at/IN/at a/DT/a time/NN/time /./. 13.4.7/CD/13.4.7 kernel/NN/kernel data/NNS/data structures/NNS/structures the/DT/the kernel/NN/kernel needs/VBZ/needs to/TO/to keep/VB/keep state/NN/state information/NN/information about/IN/about the/DT/the use/NN/use of/IN/of i/0/-NONE-/i/0 components/NNS/components /./. it/PRP/it does/VBZ/does so/RB/so through/IN/through a/DT/a variety/NN/variety of/IN/of in-kernel/NNP/in-kernel data/NNS/data structures/NNS/structures /,/, such/JJ/such as/IN/as the/DT/the open-file/JJ/open-file table/NN/table structure/NN/structure from/IN/from section/NN/section 11.1/CD/11.1. the/DT/the kernel/NN/kernel uses/VBZ/uses many/JJ/many similar/JJ/similar structures/NNS/structures to/TO/to track/VB/track network/NN/network connections/NNS/connections /,/, character-device/JJ/character-device communications/NNS/communications /,/, and/CC/and other/JJ/other i/0/-NONE-/i/0 activities/NNS/activities /./. unix/NN/unix provides/VBZ/provides file-system/JJ/file-system access/NN/access to/TO/to a/DT/a variety/NN/variety of/IN/of entities/NNS/entities /,/, such/JJ/such as/IN/as user/NN/user files/NNS/files /,/, raw/VBP/raw devices/NNS/devices /,/, and/CC/and the/DT/the address/NN/address spaces/NNS/spaces of/IN/of processes/NNP/processes. although/IN/although each/DT/each of/IN/of these/DT/these entities/NNS/entities supports/NNS/supports a/DT/a read/NN/read /:/( /:/) operation/NN/operation /,/, the/DT/the semantics/NNS/semantics differ/NNP/differ. for/IN/for instance/NN/instance /,/, to/TO/to read/VB/read a/DT/a user/NN/user file/NN/file /,/, the/DT/the kernel/NN/kernel needs/VBZ/needs to/TO/to probe/VB/probe the/DT/the buffer/NN/buffer cache/NN/cache before/IN/before deciding/VBG/deciding whether/IN/whether to/TO/to perform/NN/perform a/DT/a disk/NN/disk i/0/NNP/i/0. to/TO/to read/VB/read a/DT/a raw/NN/raw disk/NN/disk /,/, the/DT/the kernel/NN/kernel needs/VBZ/needs to/TO/to ensure/VB/ensure that/IN/that the/DT/the request/NN/request size/NN/size is/VBZ/is a/DT/a multiple/NN/multiple of/IN/of the/DT/the disk/NN/disk sector/NN/sector size/NN/size and/CC/and is/VBZ/is aligned/VBN/aligned on/IN/on a/DT/a sector/NN/sector boundary/NNP/boundary. to/TO/to read/VB/read a/DT/a process/NN/process image/NN/image /,/, it/PRP/it is/VBZ/is merely/RB/merely necessary/JJ/necessary to/TO/to copy/VB/copy data/NNS/data from/IN/from memory/NNP/memory. unix/CD/unix encapsulates/NNS/encapsulates these/DT/these differences/NNS/differences within/IN/within a/DT/a uniform/NN/uniform structure/NN/structure by/IN/by using/VBG/using an/DT/an object-oriented/JJ/object-oriented teclucique/NNP/teclucique. the/DT/the open-file/JJ/open-file record/NN/record /,/, shown/IN/shown in/IN/in 13.4/CD/13.4 577/CD/577 system-wide/JJ/system-wide open-file/JJ/open-file table/JJ/table 1/CD/1 ;/:/; /./. ;/:/; /:/: /./. /:/: /:/: /,/, /./. ;/:/; /NNP/,. '/POS/' ;/:/; t/NN/t ;/:/; ./:/., '/''/' file-system/JJ/file-system record/NN/record 1/CD/1 /:/: ~/:/~ /./. s/NNS/s /:/: 1/LS/1 ~/:/~ if/IN/if ~/CD/~ /./. /./. /./. inode/NN/inode pointer/NN/pointer +/:/+ /./. /,/, ;/:/; /:/: /,/, /:/: /./. /:/: /./. '/''/' pointer/NN/pointer to/TO/to read/VB/read and/CC/and write/VB/write functions/NNS/functions i/PRP/i /./. /./. /./. /:/: /:/: i/PRP/i /,/, ;/:/; .l/JJ/.l /,/, pointer/NN/pointer to/TO/to select/VB/select function/NN/function ;/:/; ;/:/; /:/: ;/:/; /:/: /,/, /:/: ;/:/; /./. ~/:/~ ti/NN/ti ~/:/~ ~/:/~ ~/:/~ ~/:/~ ~/:/~ ple/NN/ple pointer/NN/pointer to/TO/to ioctl/VB/ioctl function/NN/function file/NN/file descriptor/NN/descriptor .,_/NN/.,_ /:/.. /:/: ;/:/; /:/: \/:/\ '/''/' '/''/' /:/: '/POS/' '/''/' pointer/NN/pointer to/TO/to close/VB/close function/NN/function n/NN/n /./. /:/: .r/JJ/.r /:/.. /:/: /:/... /:/: /./. /./. /:/.. /:/: /:/: /./. /./. /./. /./. r/NN/r ;/:/; i/PRP/i ~/VBP/~ ~/:/~ ~/:/~ /:/} ~/:/~ ~/:/~ ~/:/~ kl/NN/kl /:/: f/NN/f user-process/NN/user-process memory/NN/memory networking/VBG/networking /NN/( socket/NN/socket /:/) record/NN/record i/PRP/i /:/: '/''/' ~/:/~ 1/CD/1 ~/CD/~ t/NN/t ~/:/~ 6/CD/6 ~/CD/~ !/./! v'.'/JJ/v'.' /./. pointer/NN/pointer to/TO/to network/VB/network info/NN/info +/:/+ f/NN/f /:/: /./. ;/:/; /./. /:/..... /./. pointer/NN/pointer to/TO/to read/VB/read and/CC/and write.functions/NNS/write.functions /:/: /,/, /,/, /./. ~/:/~ /:/.. /./. pointer/NN/pointer to/TO/to select/VB/select function/NN/function pointer/NN/pointer to/TO/to ioctl/VB/ioctl function/NN/function pointer/NN/pointer to/TO/to close/VB/close f..un/JJ/f..un ction/NN/ction /./. kernel/NN/kernel memory/NN/memory figure/NN/figure 13/CD/13. 12/CD/12 unix/CD/unix 1/0/CD/1/0 kernel/NN/kernel structure/NN/structure /./. figure/NN/figure 13.12/CD/13.12 /,/, contains/VBZ/contains a/DT/a dispatch/NN/dispatch table/NN/table that/WDT/that holds/VBZ/holds pointers/NNS/pointers to/TO/to the/DT/the appropriate/NN/appropriate routines/NNS/routines /,/, depending/VBG/depending on/IN/on the/DT/the type/NN/type of/IN/of file/NN/file /./. some/DT/some operating/NN/operating systems/NNS/systems use/VBP/use object-oriented/JJ/object-oriented methods/NNS/methods even/RB/even more/RBR/more extensively/RB/extensively /./. for/IN/for instance/NN/instance /,/, windows/VBZ/windows nt/NN/nt uses/NNS/uses a/DT/a message-passing/JJ/message-passing implementation/NN/implementation for/IN/for i/0/NNP/i/0. an/DT/an i/0/-NONE-/i/0 request/NN/request is/VBZ/is converted/VBN/converted into/IN/into a/DT/a message/NN/message that/WDT/that is/VBZ/is sent/VBN/sent through/IN/through the/DT/the kernel/NN/kernel to/TO/to the/DT/the ii/NN/ii 0/-NONE-/0 manager/NN/manager and/CC/and then/RB/then to/TO/to the/DT/the device/NN/device driver/NN/driver /,/, each/DT/each of/IN/of which/WDT/which may/MD/may change/VB/change the/DT/the message/NN/message contents/NNP/contents. for/IN/for output/NN/output /,/, the/DT/the message/NN/message contains/VBZ/contains the/DT/the data/NNS/data to/TO/to be/VB/be written/NNP/written. for/IN/for input/NN/input /,/, the/DT/the message/NN/message contains/VBZ/contains a/DT/a buffer/NN/buffer to/TO/to receive/VB/receive the/DT/the data/NNP/data. the/DT/the message-passing/JJ/message-passing approach/NN/approach can/MD/can add/VB/add overhead/JJ/overhead /,/, by/IN/by comparison/NN/comparison with/IN/with procedural/JJ/procedural techniques/NNS/techniques that/WDT/that use/NN/use shared/VBD/shared data/NNS/data structures/NNS/structures /,/, but/CC/but it/PRP/it simplifies/VBZ/simplifies the/DT/the structure/NN/structure and/CC/and design/NN/design of/IN/of the/DT/the i/0/NNP/i/0 system/NN/system and/CC/and adds/VBZ/adds flexibility/NN/flexibility /./. 13.4.8/CD/13.4.8 kernel/NN/kernel i/o/-NONE-/i/o subsystem/NN/subsystem summary/NN/summary in/IN/in summary/NN/summary /,/, the/DT/the i/0/NNP/i/0 subsystem/NN/subsystem coordinates/VBZ/coordinates an/DT/an extensive/JJ/extensive collection/NN/collection of/IN/of services/NNS/services that/WDT/that are/VBP/are available/JJ/available to/TO/to applications/NNS/applications and/CC/and to/TO/to other/JJ/other parts/NNS/parts of/IN/of the/DT/the kernel/NNP/kernel. the/DT/the i/0/NNP/i/0 subsystenc/NN/subsystenc supervises/NNS/supervises these/DT/these procedures/NNS/procedures /:/: management/NN/management of/IN/of the/DT/the name/NN/name space/NN/space for/IN/for files/NNS/files and/CC/and devices/NNS/devices access/NN/access control/NN/control to/TO/to files/NNS/files and/CC/and devices/NNS/devices operation/NN/operation control/NN/control /:/( for/IN/for example/NN/example /,/, a/DT/a modem/NN/modem can/MD/can not/RB/not seek/VB/seek /:/( /:/) /:/) file-system/JJ/file-system space/NN/space allocation/NN/allocation device/NN/device allocation/NN/allocation 578/CD/578 chapter/NN/chapter 13/CD/13 13.5/CD/13.5 buffering/VBG/buffering /,/, caching/VBG/caching /,/, and/CC/and spooling/VBG/spooling i/0/-NONE-/i/0 scheduling/VBG/scheduling device-status/JJ/device-status monitoring/NN/monitoring /,/, error/NN/error handling/NN/handling /,/, and/CC/and failure/NN/failure recovery/NN/recovery device-driver/NN/device-driver configuration/NN/configuration and/CC/and initialization/NN/initialization the/DT/the upper/JJ/upper levels/NNS/levels of/IN/of the/DT/the i/o/NNP/i/o subsystem/NN/subsystem access/NN/access devices/NNS/devices via/IN/via the/DT/the uniform/NN/uniform interface/NN/interface provided/VBD/provided by/IN/by the/DT/the device/NN/device drivers/NNS/drivers /./. earlier/JJR/earlier /,/, we/PRP/we described/VBD/described the/DT/the handshaking/NN/handshaking between/IN/between a/DT/a device/NN/device driver/NN/driver and/CC/and a/DT/a device/NN/device controller/NN/controller /,/, but/CC/but we/PRP/we did/VBD/did not/RB/not explain/VB/explain how/WRB/how the/DT/the operating/NN/operating system/NN/system connects/NNS/connects an/DT/an application/NN/application request/NN/request to/TO/to a/DT/a set/NN/set of/IN/of network/NN/network wires/NNS/wires or/CC/or to/TO/to a/DT/a specific/JJ/specific disk/NN/disk sector/NN/sector /./. consider/NN/consider /,/, for/IN/for example/NN/example /,/, reading/NN/reading a/DT/a file/NN/file from/IN/from disk/NNP/disk. the/DT/the application/NN/application refers/NNS/refers to/TO/to the/DT/the data/NNS/data by/IN/by a/DT/a file/JJ/file name/NNP/name. within/IN/within a/DT/a disk/NN/disk /,/, the/DT/the file/NN/file system/NN/system maps/NNS/maps from/IN/from the/DT/the file/NN/file name/NN/name through/IN/through the/DT/the file-system/JJ/file-system directories/NNS/directories to/TO/to obtain/VB/obtain the/DT/the space/NN/space allocation/NN/allocation of/IN/of the/DT/the file/NNP/file. for/IN/for instance/NN/instance /,/, in/IN/in ms-dos/NNP/ms-dos /,/, the/DT/the name/NN/name maps/VBZ/maps to/TO/to a/DT/a number/NN/number that/WDT/that indicates/VBZ/indicates an/DT/an entry/NN/entry in/IN/in the/DT/the file-access/JJ/file-access table/NN/table /,/, and/CC/and that/IN/that table/JJ/table entry/NN/entry tells/NNS/tells which/WDT/which disk/NN/disk blocks/VBZ/blocks are/VBP/are allocated/VBN/allocated to/TO/to the/DT/the file/NNP/file. in/IN/in unix/NN/unix /,/, the/DT/the name/NN/name maps/VBZ/maps to/TO/to an/DT/an inode/NN/inode number/NN/number /,/, and/CC/and the/DT/the corresponding/NN/corresponding inode/NN/inode contains/VBZ/contains the/DT/the space-allocation/NN/space-allocation information/NNP/information. but/CC/but how/WRB/how is/VBZ/is the/DT/the connection/NN/connection made/VBD/made from/IN/from the/DT/the file/NN/file name/NN/name to/TO/to the/DT/the disk/NN/disk controller/NN/controller /:/( the/DT/the hardware/NN/hardware port/NN/port address/NN/address or/CC/or the/DT/the memory-mapped/JJ/memory-mapped controller/NN/controller registers/NNS/registers /:/) one/CD/one method/NN/method is/VBZ/is that/IN/that used/VBN/used by/IN/by ms-dos/NNP/ms-dos /,/, a/DT/a relatively/RB/relatively simple/JJ/simple operating/NN/operating system/NN/system /./. the/DT/the first/JJ/first part/NN/part of/IN/of an/DT/an ms-dos/JJ/ms-dos file/NN/file name/NN/name /,/, preceding/VBG/preceding the/DT/the colon/NN/colon /,/, is/VBZ/is a/DT/a string/NN/string that/WDT/that identifies/VBZ/identifies a/DT/a specific/JJ/specific hardware/NN/hardware device/NNP/device. for/IN/for example/NN/example /,/, c/NN/c /:/: is/VBZ/is the/DT/the first/JJ/first part/NN/part of/IN/of every/DT/every file/NN/file name/NN/name on/IN/on the/DT/the primary/JJ/primary hard/JJ/hard disk/NNP/disk. the/DT/the fact/NN/fact that/IN/that c/NN/c /:/: represents/NNS/represents the/DT/the primary/JJ/primary hard/JJ/hard disk/NN/disk is/VBZ/is built/VBN/built into/IN/into the/DT/the operating/NN/operating system/NN/system ;/:/; c/NN/c /:/: is/VBZ/is mapped/VBN/mapped to/TO/to a/DT/a specific/JJ/specific port/NN/port address/NN/address through/IN/through a/DT/a device/NN/device table/NNP/table. because/IN/because of/IN/of the/DT/the colon/NN/colon separator/NN/separator /,/, the/DT/the device/NN/device name/NN/name space/NN/space is/VBZ/is separate/JJ/separate from/IN/from the/DT/the file-system/JJ/file-system name/NN/name space/NNP/space. this/DT/this separation/NN/separation makes/VBZ/makes it/PRP/it easy/JJ/easy for/IN/for the/DT/the operating/NN/operating system/NN/system to/TO/to associate/VB/associate extra/JJ/extra functionality/NN/functionality with/IN/with each/DT/each device/NNP/device. for/IN/for instance/NN/instance /,/, it/PRP/it is/VBZ/is easy/JJ/easy to/TO/to invoke/VB/invoke spooling/NN/spooling on/IN/on any/DT/any files/NNS/files written/VBN/written to/TO/to the/DT/the printer/NN/printer /./. if/IN/if /,/, instead/RB/instead /,/, the/DT/the device/NN/device name/NN/name space/NN/space is/VBZ/is incorporated/VBN/incorporated in/IN/in the/DT/the regular/JJ/regular file-system/NN/file-system name/NN/name space/NN/space /,/, as/IN/as it/PRP/it is/VBZ/is in/IN/in unix/NN/unix /,/, the/DT/the normal/JJ/normal file-system/NN/file-system name/NN/name services/NNS/services are/VBP/are provided/VBN/provided automatically/NNP/automatically. if/IN/if the/DT/the file/NN/file system/NN/system provides/VBZ/provides ownership/NN/ownership and/CC/and access/NN/access control/NN/control to/TO/to all/DT/all file/NN/file names/NNS/names /,/, then/RB/then devices/VBZ/devices have/VB/have owners/NNS/owners and/CC/and access/NN/access control/NNP/control. since/IN/since files/NNS/files are/VBP/are stored/VBN/stored on/IN/on devices/NNS/devices /,/, such/JJ/such an/DT/an interface/NN/interface provides/VBZ/provides access/NN/access to/TO/to the/DT/the i/o/NNP/i/o system/NN/system at/IN/at two/CD/two levels/NNS/levels /./. names/NNS/names can/MD/can be/VB/be used/VBN/used to/TO/to access/NN/access the/DT/the devices/NNS/devices themselves/PRP/themselves or/CC/or to/TO/to access/NN/access the/DT/the files/NNS/files stored/VBD/stored on/IN/on the/DT/the devices/NNS/devices /./. unix/NN/unix represents/NNS/represents device/NN/device names/NNS/names in/IN/in the/DT/the regular/JJ/regular file-system/NN/file-system name/NN/name space/NNP/space. unlike/IN/unlike an/DT/an ms-dos/JJ/ms-dos file/NN/file name/NN/name /,/, which/WDT/which has/VBZ/has a/DT/a colon/NN/colon separator/NN/separator /,/, a/DT/a unix/NN/unix path/NN/path name/NN/name has/VBZ/has no/DT/no clear/JJ/clear separation/NN/separation of/IN/of the/DT/the device/NN/device portion/NNP/portion. in/IN/in fact/NN/fact /,/, no/DT/no part/NN/part of/IN/of the/DT/the path/NN/path name/NN/name is/VBZ/is the/DT/the name/NN/name of/IN/of a/DT/a device/NNP/device. unix/NN/unix has/VBZ/has a/DT/a that/IN/that associates/NNS/associates prefixes/NNS/prefixes of/IN/of path/NN/path names/NNS/names with/IN/with specific/JJ/specific device/NN/device names/NNP/names. to/TO/to resolve/VB/resolve a/DT/a path/NN/path name/NN/name /,/, unix/NN/unix looks/NNS/looks up/IN/up the/DT/the name/NN/name in/IN/in the/DT/the mount/NN/mount table/NN/table to/TO/to find/VB/find the/DT/the longest/JJS/longest ncatchilcg/NN/ncatchilcg prefix/NN/prefix ;/:/; the/DT/the corresponding/NN/corresponding entry/NN/entry in/IN/in the/DT/the mount/NN/mount table/NN/table gives/VBZ/gives the/DT/the device/NN/device name/NNP/name. this/DT/this device/NN/device name/NN/name also/RB/also has/VBZ/has the/DT/the form/NN/form of/IN/of a/DT/a name/NN/name in/IN/in the/DT/the file-system/JJ/file-system name/NN/name space/NNP/space. when/WRB/when unix/NN/unix looks/VBZ/looks up/RP/up this/DT/this name/NN/name in/IN/in the/DT/the file-system/JJ/file-system directory/NN/directory structures/NNS/structures /,/, it/PRP/it finds/VBZ/finds not/RB/not an/DT/an inode/NN/inode number/NN/number but/CC/but a/DT/a major/JJ/major /,/, 13.5/CD/13.5 579/CD/579 minor/JJ/minor device/NN/device number/NNP/number. the/DT/the m.ajor/JJ/m.ajor device/NN/device number/NN/number identifies/NNS/identifies a/DT/a device/NN/device driver/NN/driver that/WDT/that should/MD/should be/VB/be called/VBN/called to/TO/to handle/VB/handle l/0/-NONE-/l/0 to/TO/to this/DT/this device/NNP/device. the/DT/the minor/NN/minor device/NN/device number/NN/number is/VBZ/is passed/VBN/passed to/TO/to the/DT/the device/NN/device driver/NN/driver to/TO/to index/NN/index into/IN/into a/DT/a device/NN/device table/NNP/table. the/DT/the corresponding/NN/corresponding device-table/JJ/device-table entry/NN/entry gives/VBZ/gives the/DT/the port/NN/port address/NN/address or/CC/or the/DT/the memory-mapped/JJ/memory-mapped address/NN/address of/IN/of the/DT/the device/NN/device controller/NN/controller /./. modern/JJ/modern operating/NN/operating systems/NNS/systems obtain/NN/obtain significant/JJ/significant flexibility/NN/flexibility from/IN/from the/DT/the multiple/NN/multiple stages/NNS/stages of/IN/of lookup/NN/lookup tables/NNS/tables in/IN/in the/DT/the path/NN/path between/IN/between a/DT/a request/NN/request and/CC/and a/DT/a physical/JJ/physical device/NN/device controller/NNP/controller. the/DT/the mechanisms/NNS/mechanisms that/WDT/that pass/NN/pass requests/VBZ/requests between/IN/between applications/NNS/applications and/CC/and drivers/NNS/drivers are/VBP/are general/NNP/general. thus/RB/thus /,/, we/PRP/we can/MD/can introduce/VB/introduce new/JJ/new devices/NNS/devices and/CC/and drivers/NNS/drivers into/IN/into a/DT/a computer/NN/computer without/IN/without recompiling/NN/recompiling the/DT/the kernel/NNP/kernel. in/IN/in fact/NN/fact /,/, some/DT/some operating/NN/operating systems/NNS/systems have/VBP/have the/DT/the ability/NN/ability to/TO/to load/VB/load device/NN/device drivers/NNS/drivers on/IN/on demand/NNP/demand. at/IN/at boot/NN/boot time/NN/time /,/, the/DT/the system/NN/system first/RB/first probes/VBZ/probes the/DT/the hardware/NN/hardware buses/NNS/buses to/TO/to determine/VB/determine what/WDT/what devices/NNS/devices are/VBP/are present/JJ/present ;/:/; it/PRP/it then/RB/then loads/VBZ/loads in/IN/in the/DT/the necessary/JJ/necessary drivers/NNS/drivers /,/, either/DT/either immediately/RB/immediately or/CC/or when/WRB/when first/JJ/first required/VBN/required by/IN/by an/DT/an i/0/JJ/i/0 request/NN/request /./. we/PRP/we next/JJ/next describe/NN/describe the/DT/the typical/JJ/typical life/NN/life cycle/NN/cycle of/IN/of a/DT/a blocking/NN/blocking read/NN/read request/NN/request /,/, as/IN/as depicted/VBN/depicted in/IN/in figure/NN/figure 13.13/CD/13.13. the/DT/the figure/NN/figure suggests/VBZ/suggests that/IN/that an/DT/an i/0/-NONE-/i/0 operation/NN/operation requires/VBZ/requires a/DT/a great/JJ/great many/JJ/many steps/NNS/steps that/WDT/that together/RB/together consume/VBP/consume a/DT/a tremendous/JJ/tremendous number/NN/number of/IN/of cpu/NN/cpu cycles/NNS/cycles /./. a/DT/a process/NN/process issues/NNS/issues a/DT/a blocking/VBG/blocking read/NN/read /:/( /:/) system/NN/system call/NN/call to/TO/to a/DT/a file/NN/file descriptor/NN/descriptor of/IN/of a/DT/a file/NN/file that/WDT/that has/VBZ/has been/VBN/been opened/VBN/opened previously/RB/previously /./. the/DT/the system-call/JJ/system-call code/NN/code in/IN/in the/DT/the kernel/NN/kernel checks/NNS/checks the/DT/the parameters/NNS/parameters for/IN/for correctness/NN/correctness /./. in/IN/in the/DT/the case/NN/case of/IN/of input/NN/input /,/, if/IN/if the/DT/the data/NNS/data are/VBP/are already/RB/already available/JJ/available irl/NN/irl the/DT/the buffer/NN/buffer cache/NN/cache /,/, the/DT/the data/NNS/data are/VBP/are returned/VBN/returned to/TO/to the/DT/the process/NN/process /,/, and/CC/and the/DT/the i/o/NNP/i/o request/NN/request is/VBZ/is completed/VBN/completed /./. otherwise/RB/otherwise /,/, a/DT/a physical/JJ/physical i/0/NN/i/0 must/MD/must be/VB/be performed/NNP/performed. the/DT/the process/NN/process is/VBZ/is removed/VBN/removed from/IN/from the/DT/the run/NN/run queue/NN/queue and/CC/and is/VBZ/is placed/VBN/placed on/IN/on the/DT/the wait/NN/wait queue/NN/queue for/IN/for the/DT/the device/NN/device /,/, and/CC/and the/DT/the i/0/NNP/i/0 request/NN/request is/VBZ/is scheduled/NNP/scheduled. eventually/RB/eventually /,/, the/DT/the i/0/NNP/i/0 subsystem/NN/subsystem sends/NNS/sends the/DT/the request/NN/request to/TO/to the/DT/the device/NN/device driver/NNP/driver. depending/NN/depending on/IN/on the/DT/the operating/NN/operating system/NN/system /,/, the/DT/the request/NN/request is/VBZ/is sent/VBN/sent via/IN/via a/DT/a subroutine/NN/subroutine call/NN/call or/CC/or an/DT/an in-kernel/JJ/in-kernel message/NN/message /./. the/DT/the device/NN/device driver/NN/driver allocates/VBZ/allocates kernel/NN/kernel buffer/NN/buffer space/NN/space to/TO/to receive/VB/receive the/DT/the data/NNS/data and/CC/and schedules/NNS/schedules the/DT/the i/0/NNP/i/0. eventually/RB/eventually /,/, the/DT/the driver/NN/driver sends/NNS/sends commands/NNS/commands to/TO/to the/DT/the device/NN/device controller/NN/controller by/IN/by writing/NN/writing into/IN/into the/DT/the device-control/JJ/device-control registers/NNS/registers /./. the/DT/the device/NN/device controller/NN/controller operates/VBZ/operates the/DT/the device/NN/device hardware/NN/hardware to/TO/to perform/NN/perform the/DT/the data/NNS/data transfer/VBP/transfer /./. the/DT/the driver/NN/driver may/MD/may poll/VB/poll for/IN/for status/NN/status and/CC/and data/NNS/data /,/, or/CC/or it/PRP/it may/MD/may have/VB/have set/VBN/set up/RP/up a/DT/a dma/NN/dma transfer/NN/transfer into/IN/into kernel/NN/kernel memory/NNP/memory. we/PRP/we assume/VBP/assume that/IN/that the/DT/the transfer/NN/transfer is/VBZ/is managed/VBN/managed by/IN/by a/DT/a dma/NN/dma controller/NN/controller /,/, which/WDT/which generates/VBZ/generates an/DT/an interrupt/JJ/interrupt when/WRB/when the/DT/the transfer/NN/transfer completes/VBZ/completes /./. the/DT/the correct/NN/correct interrupt/NN/interrupt handler/NN/handler receives/NNS/receives the/DT/the interrupt/NN/interrupt via/IN/via the/DT/the interruptvector/NN/interruptvector table/NN/table /,/, stores/NNS/stores any/DT/any necessary/JJ/necessary data/NNS/data /,/, signals/NNS/signals the/DT/the device/NN/device driver/NN/driver /,/, and/CC/and returns/NNS/returns from/IN/from the/DT/the interrupt/NN/interrupt /./. the/DT/the device/NN/device driver/NN/driver receives/NNS/receives the/DT/the signal/JJ/signal /,/, determines/NNS/determines which/WDT/which i/0/-NONE-/i/0 request/VBP/request has/VBZ/has completed/VBN/completed /,/, determines/NNS/determines the/DT/the request/NN/request 's/POS/'s status/NN/status /,/, and/CC/and signals/NNS/signals the/DT/the kernel/NN/kernel i/0/-NONE-/i/0 subsystem/NN/subsystem that/WDT/that the/DT/the request/NN/request has/VBZ/has been/VBN/been completed/VBN/completed /./. the/DT/the kernel/NN/kernel transfers/NNS/transfers data/NNS/data or/CC/or return/NN/return codes/VBZ/codes to/TO/to the/DT/the address/NN/address space/NN/space of/IN/of the/DT/the requesting/NN/requesting process/NN/process and/CC/and moves/NNS/moves the/DT/the process/NN/process from/IN/from the/DT/the wait/NN/wait queue/NN/queue back/RB/back to/TO/to the/DT/the ready/JJ/ready queue/NN/queue /./. 580/CD/580 chapter/NN/chapter 13/CD/13 13.6/CD/13.6 system/NN/system call/NN/call device-controller/NN/device-controller commands/NNS/commands user/NN/user process/NN/process kernel/NN/kernel 1/0/CD/1/0 subsystem/NN/subsystem kernel/NN/kernel 1/0/CD/1/0 subsystem/NN/subsystem device/NN/device driver/NN/driver interrupt/NN/interrupt handler/NN/handler device/NN/device controller/NN/controller return/NN/return from/IN/from system/NN/system call/NN/call interrupt/NN/interrupt ~/:/~ -------tim_e/JJ/-------tim_e ~/NN/~ /:/-- ~/CD/~ /:/- /CD/) figure/NN/figure 13.13/CD/13.13 the/DT/the life/NN/life cycle/NN/cycle of/IN/of an/DT/an 1/0/CD/1/0 request/NN/request /./. moving/VBG/moving the/DT/the process/NN/process to/TO/to the/DT/the ready/JJ/ready queue/NN/queue unblocks/NNS/unblocks the/DT/the process/NNP/process. when/WRB/when the/DT/the scheduler/NN/scheduler assigns/NNS/assigns the/DT/the process/NN/process to/TO/to the/DT/the cpu/NN/cpu /,/, the/DT/the process/NN/process resumes/VBZ/resumes execution/NN/execution at/IN/at the/DT/the completion/NN/completion of/IN/of the/DT/the system/NN/system call/NN/call /./. unix/NN/unix system/NN/system v/NN/v has/VBZ/has an/DT/an interesting/JJ/interesting mechanism/NN/mechanism /,/, called/VBN/called that/IN/that enables/NNS/enables an/DT/an application/NN/application to/TO/to assemble/VB/assemble pipelines/NNS/pipelines of/IN/of driver/NN/driver code/NN/code dynamically/NNP/dynamically. a/DT/a stream/NN/stream is/VBZ/is a/DT/a full-duplex/JJ/full-duplex connection/NN/connection between/IN/between a/DT/a device/NN/device driver/NN/driver and/CC/and a/DT/a user-level/JJ/user-level process/NNP/process. it/PRP/it consists/VBZ/consists of/IN/of a/DT/a that/WDT/that interfaces/VBZ/interfaces with/IN/with the/DT/the user/NN/user process/NN/process /,/, a/DT/a /:/: id/JJ/id that/IN/that controls/NNS/controls the/DT/the device/NN/device /,/, and/CC/and zero/NN/zero or/CC/or more/JJR/more between/IN/between the/DT/the stream/NN/stream user/NN/user process/NN/process 13.6/CD/13.6 i/PRP/i streams/VBZ/streams modules/NNS/modules _j/NNP/_j figure/NN/figure 13.14/CD/13.14 the/DT/the streams/NNS/streams structure/VBP/structure /./. 581/CD/581 head/NN/head and/CC/and the/DT/the driver/NN/driver end/NNP/end. each/DT/each of/IN/of these/DT/these components/NNS/components contains/VBZ/contains a/DT/a pair/NN/pair of/IN/of queues/NNS/queues -a/-NONE-/-a read/VB/read queue/JJ/queue and/CC/and a/DT/a write/JJ/write queue/NNP/queue. message/NN/message passing/VBG/passing is/VBZ/is used/VBN/used to/TO/to transfer/VB/transfer data/NNS/data between/IN/between queues/NNP/queues. the/DT/the streams/NNS/streams structure/VBP/structure is/VBZ/is shown/VBN/shown in/IN/in figure/NN/figure 13.14/CD/13.14 /./. modules/NNS/modules provide/VB/provide the/DT/the functionality/NN/functionality of/IN/of streams/NNS/streams processing/VBG/processing ;/:/; they/PRP/they are/VBP/are pushed/VBN/pushed onto/IN/onto a/DT/a stream/NN/stream by/IN/by use/NN/use of/IN/of the/DT/the ioctl/NN/ioctl /:/( /:/) system/NN/system call/NNP/call. for/IN/for examplef/NN/examplef a/DT/a process/NN/process can/MD/can open/VB/open a/DT/a serial-port/NN/serial-port device/NN/device via/IN/via a/DT/a stream/NN/stream and/CC/and can/MD/can push/VB/push on/IN/on a/DT/a module/NN/module to/TO/to handle/VB/handle input/NN/input editing/NNP/editing. because/IN/because messages/NNS/messages are/VBP/are exchanged/VBN/exchanged between/IN/between queues/NNS/queues in/IN/in adjacent/NN/adjacent modules/NNS/modules /,/, a/DT/a queue/NN/queue in/IN/in one/CD/one module/NN/module may/MD/may overflow/VB/overflow an/DT/an adjacent/NN/adjacent queue/NNP/queue. to/TO/to prevent/VB/prevent this/DT/this from/IN/from occurring/VBG/occurring /,/, a/DT/a queue/NN/queue may/MD/may support/VB/support without/IN/without flow/NN/flow control/NN/control /,/, a/DT/a queue/NN/queue accepts/VBZ/accepts all/DT/all messages/NNS/messages and/CC/and immediately/RB/immediately sends/VBZ/sends them/PRP/them on/IN/on to/TO/to the/DT/the queue/NN/queue in/IN/in the/DT/the adjacent/NN/adjacent module/NN/module without/IN/without buffering/NN/buffering them/NNP/them. a/DT/a queue/NN/queue supporting/VBG/supporting flow/NN/flow control/NN/control buffers/NNS/buffers messages/NNS/messages and/CC/and does/VBZ/does not/RB/not accept/VB/accept messages/NNS/messages without/IN/without sufficient/NN/sufficient buffer/NN/buffer space/NN/space ;/:/; this/DT/this process/NN/process involves/VBZ/involves exchanges/NNS/exchanges of/IN/of control/NN/control messages/NNS/messages between/IN/between queues/NNS/queues in/IN/in adjacent/NN/adjacent modules/NNS/modules /./. a/DT/a user/NN/user process/NN/process writes/VBZ/writes data/NNS/data to/TO/to a/DT/a device/NN/device using/VBG/using either/DT/either the/DT/the write/NN/write /:/( /:/) orputmsg/NN/orputmsg /:/( /:/) system/NN/system call/NNP/call. the/DT/the write/NN/write /:/( /:/) system/NN/system call/NN/call writes/VBZ/writes raw/NN/raw data/NNS/data to/TO/to the/DT/the stream/NN/stream /,/, whereas/VBZ/whereas putmsg/NN/putmsg /:/( /:/) allows/NNS/allows the/DT/the user/NN/user process/NN/process to/TO/to specify/VB/specify a/DT/a message/NNP/message. regardless/NN/regardless of/IN/of the/DT/the system/NN/system call/NN/call used/VBD/used by/IN/by the/DT/the user/NN/user process/NN/process /,/, the/DT/the stream/NN/stream head/NN/head copies/NNS/copies the/DT/the data/NNS/data into/IN/into a/DT/a message/NN/message and/CC/and delivers/NNS/delivers it/PRP/it to/TO/to the/DT/the queue/NN/queue for/IN/for the/DT/the next/JJ/next module/NN/module in/IN/in line/NNP/line. this/DT/this copying/NN/copying of/IN/of messages/NNS/messages continues/VBZ/continues until/IN/until the/DT/the message/NN/message is/VBZ/is copied/VBN/copied to/TO/to the/DT/the driver/NN/driver end/NN/end and/CC/and hence/NN/hence the/DT/the device/NNP/device. similarly/RB/similarly /,/, the/DT/the user/NN/user process/NN/process reads/NNS/reads data/NNS/data from/IN/from the/DT/the stream/NN/stream head/NN/head using/VBG/using either/DT/either the/DT/the read/NN/read /:/( /:/) or/CC/or getmsg/NN/getmsg /:/( /:/) system/NN/system call/NNP/call. if/IN/if read/JJ/read /NN/( /:/) is/VBZ/is used/VBN/used /,/, the/DT/the stream/NN/stream head/NN/head gets/VBZ/gets a/DT/a message/NN/message from/IN/from its/PRP$/its adjacent/NN/adjacent queue/NN/queue and/CC/and returns/NNS/returns ordinary/JJ/ordinary data/NNS/data /:/( an/DT/an unstructured/JJ/unstructured byte/NN/byte stream/NN/stream /:/) to/TO/to the/DT/the process/NNP/process. if/IN/if getmsg/NN/getmsg /:/( /:/) is/VBZ/is used/VBN/used /,/, a/DT/a message/NN/message is/VBZ/is returned/VBN/returned to/TO/to the/DT/the process/NN/process /./. 582/CD/582 chapter/NN/chapter 13/CD/13 13.7/CD/13.7 streams/NNS/streams i/0/-NONE-/i/0 is/VBZ/is asynchronous/JJ/asynchronous /NN/( or/CC/or nonblocking/VBG/nonblocking /CD/) except/IN/except when/WRB/when the/DT/the user/NN/user process/NN/process communicates/VBZ/communicates with/IN/with the/DT/the stream/NN/stream ~/:/~ head/NNP/head. when/WRB/when writing/VBG/writing to/TO/to the/DT/the stream/NN/stream /,/, the/DT/the user/NN/user process/NN/process will/MD/will block/VB/block /,/, assuming/VBG/assuming the/DT/the next/JJ/next queue/NN/queue uses/NNS/uses flow/VBP/flow controt/NN/controt until/IN/until there/EX/there is/VBZ/is room/NN/room to/TO/to copy/VB/copy the/DT/the message/NNP/message. likewise/NN/likewise /,/, the/DT/the user/NN/user process/NN/process will/MD/will block/VB/block when/WRB/when reading/NN/reading from/IN/from the/DT/the stream/NN/stream ~/:/~ until/IN/until data/NNS/data are/VBP/are available/JJ/available /./. as/IN/as mentioned/VBN/mentioned /,/, the/DT/the driver/NN/driver end-like/NN/end-like the/DT/the stream/NN/stream head/NN/head and/CC/and modules-has/JJ/modules-has a/DT/a read/NN/read and/CC/and write/VB/write queue/NNP/queue. however/RB/however /,/, the/DT/the driver/NN/driver end/NN/end must/MD/must respond/VB/respond to/TO/to interrupts/NNS/interrupts /,/, such/JJ/such as/IN/as one/CD/one triggered/VBN/triggered when/WRB/when a/DT/a frame/NN/frame is/VBZ/is ready/JJ/ready to/TO/to be/VB/be read/VBN/read from/IN/from a/DT/a network/NN/network unlike/IN/unlike the/DT/the stream/NN/stream head/NN/head /,/, which/WDT/which may/MD/may block/VB/block if/IN/if it/PRP/it is/VBZ/is unable/JJ/unable to/TO/to copy/VB/copy a/DT/a message/NN/message to/TO/to the/DT/the next/JJ/next queue/NN/queue in/IN/in line/NN/line /,/, the/DT/the driver/NN/driver end/NN/end must/MD/must handle/VB/handle all/DT/all incoming/VBG/incoming data/NNP/data. drivers/NNS/drivers must/MD/must support/VB/support flow/NN/flow control/NN/control as/IN/as well/NNP/well. however/RB/however /,/, if/IN/if a/DT/a device/NN/device 's/POS/'s buffer/NN/buffer is/VBZ/is fult/VBN/fult the/DT/the device/NN/device typically/RB/typically resorts/VBZ/resorts to/TO/to dropping/VBG/dropping incoming/NN/incoming messages/NNP/messages. consider/NN/consider a/DT/a network/NN/network card/NN/card whose/WP$/whose input/NN/input buffer/NN/buffer is/VBZ/is full/NNP/full. the/DT/the network/NN/network card/NN/card must/MD/must simply/RB/simply drop/VB/drop further/JJ/further messages/NNS/messages until/IN/until there/EX/there is/VBZ/is ample/JJ/ample buffer/NN/buffer space/NN/space to/TO/to store/VB/store incoming/NN/incoming messages/NNS/messages /./. the/DT/the benefit/NN/benefit of/IN/of using/VBG/using streams/NNS/streams is/VBZ/is that/IN/that it/PRP/it provides/VBZ/provides a/DT/a framework/NN/framework for/IN/for a/DT/a modular/JJ/modular and/CC/and incremental/JJ/incremental approach/NN/approach to/TO/to writing/NN/writing device/NN/device drivers/NNS/drivers and/CC/and network/NN/network protocols/NNP/protocols. modules/NNS/modules may/MD/may be/VB/be used/VBN/used by/IN/by different/JJ/different streams/NNS/streams and/CC/and hence/NN/hence by/IN/by different/JJ/different devices/NNP/devices. for/IN/for example/NN/example /,/, a/DT/a networking/NN/networking module/NN/module may/MD/may be/VB/be used/VBN/used by/IN/by both/DT/both an/DT/an ethernet/NN/ethernet network/NN/network card/NN/card and/CC/and a/DT/a 802.11/CD/802.11 wireless/NN/wireless network/NN/network card/NNP/card. furthermore/NN/furthermore /,/, rather/RB/rather than/IN/than treating/VBG/treating character-device/NN/character-device i/o/-NONE-/i/o as/IN/as an/DT/an unstructured/VBN/unstructured byte/NN/byte stream/NN/stream /,/, streams/NNS/streams allows/VBZ/allows support/NN/support for/IN/for message/NN/message boundaries/NNS/boundaries and/CC/and control/NN/control information/NN/information when/WRB/when communicating/VBG/communicating between/IN/between modules/NNP/modules. most/RBS/most unix/JJ/unix variants/NNS/variants support/NN/support streams/NNS/streams /,/, and/CC/and it/PRP/it is/VBZ/is the/DT/the preferred/VBN/preferred method/NN/method for/IN/for writing/NN/writing protocols/NNS/protocols and/CC/and device/NN/device drivers/NNP/drivers. for/IN/for example/NN/example /,/, system/NN/system v/NN/v unix/NN/unix and/CC/and solaris/VBZ/solaris implement/NN/implement the/DT/the socket/NN/socket mechanism/NN/mechanism using/VBG/using streams/NNS/streams /./. i//NN/i/ 0/-NONE-/0 is/VBZ/is a/DT/a major/JJ/major factor/NN/factor in/IN/in system/NN/system performance/NNP/performance. it/PRP/it places/VBZ/places heavy/JJ/heavy demands/NNS/demands on/IN/on the/DT/the cpu/NN/cpu to/TO/to execute/VB/execute device-driver/JJ/device-driver code/NN/code and/CC/and to/TO/to schedule/VB/schedule processes/NNS/processes fairly/RB/fairly and/CC/and efficiently/RB/efficiently as/IN/as they/PRP/they block/VBP/block and/CC/and unblock/NN/unblock the/DT/the resulting/VBG/resulting context/NN/context switches/NNS/switches stress/NN/stress the/DT/the cpu/NN/cpu and/CC/and its/PRP$/its hardware/NN/hardware caches/NNP/caches. i/o/NNP/i/o also/RB/also exposes/VBZ/exposes any/DT/any inefficiencies/NNS/inefficiencies in/IN/in the/DT/the interrupt-handling/JJ/interrupt-handling mechanisms/NNS/mechanisms in/IN/in the/DT/the kernel/NNP/kernel. in/IN/in addition/NN/addition /,/, i/o/NNP/i/o loads/NNS/loads down/IN/down the/DT/the memory/NN/memory bus/VBZ/bus during/IN/during data/NNS/data copies/NNS/copies between/IN/between controllers/NNS/controllers and/CC/and physical/JJ/physical memory/NN/memory and/CC/and again/RB/again durilcg/JJ/durilcg copies/NNS/copies between/IN/between kernel/NN/kernel buffers/NNS/buffers and/CC/and application/NN/application data/NNS/data space/NNP/space. coping/VBG/coping gracefully/RB/gracefully with/IN/with all/DT/all these/DT/these demands/NNS/demands is/VBZ/is one/CD/one of/IN/of the/DT/the major/JJ/major concerns/NNS/concerns of/IN/of a/DT/a computer/NN/computer architect/NN/architect /./. although/IN/although modern/JJ/modern computers/NNS/computers can/MD/can handle/VB/handle many/JJ/many thousands/NNS/thousands of/IN/of interrupts/NNS/interrupts per/IN/per second/JJ/second /,/, interrupt/JJ/interrupt handling/NN/handling is/VBZ/is a/DT/a relatively/RB/relatively expensive/JJ/expensive task/NN/task each/DT/each interrupt/NN/interrupt causes/NNS/causes the/DT/the system/NN/system to/TO/to perform/NN/perform a/DT/a state/NN/state change/NN/change /,/, to/TO/to execute/VB/execute the/DT/the interrupt/NN/interrupt handler/NN/handler /,/, and/CC/and then/RB/then to/TO/to restore/VB/restore state/NNP/state. programmed/VBD/programmed i/0/-NONE-/i/0 can/MD/can be/VB/be more/RBR/more efficient/JJ/efficient than/IN/than internjpt-driven/JJ/internjpt-driven i/0/-NONE-/i/0 /,/, if/IN/if the/DT/the number/NN/number of/IN/of cycles/NNS/cycles spent/VBN/spent in/IN/in busy/JJ/busy waiting/NN/waiting is/VBZ/is not/RB/not excessive/NNP/excessive. an/DT/an i/0/-NONE-/i/0 completion/NN/completion typically/RB/typically unblocks/VBZ/unblocks a/DT/a process/NN/process /,/, leading/VBG/leading to/TO/to the/DT/the full/JJ/full overhead/NN/overhead of/IN/of a/DT/a context/NN/context switch/NN/switch /./. network/NN/network traffic/NN/traffic can/MD/can also/RB/also cause/VB/cause a/DT/a high/JJ/high context-switch/JJ/context-switch rate/NNP/rate. consider/NN/consider /,/, for/IN/for instance/NN/instance /,/, a/DT/a remote/NN/remote login/NN/login from/IN/from one/CD/one machine/NN/machine to/TO/to another/NNP/another. each/DT/each character/NN/character typed/VBD/typed on/IN/on the/DT/the local/JJ/local machine/NN/machine must/MD/must be/VB/be transported/VBN/transported to/TO/to the/DT/the remote/NN/remote machine/NNP/machine. on/IN/on the/DT/the local/JJ/local machine/NN/machine /,/, the/DT/the character/NN/character is/VBZ/is typed/VBN/typed ;/:/; a/DT/a keyboard/NN/keyboard interrupt/NN/interrupt is/VBZ/is generated/VBN/generated ;/:/; and/CC/and the/DT/the character/NN/character is/VBZ/is passed/VBN/passed through/IN/through the/DT/the interrupt/JJ/interrupt handler/NN/handler to/TO/to the/DT/the device/NN/device driver/NN/driver /,/, to/TO/to the/DT/the kernet/NN/kernet and/CC/and then/RB/then to/TO/to the/DT/the user/NN/user process/NNP/process. the/DT/the user/NN/user process/NN/process issues/NNS/issues a/DT/a network/NN/network i/o/NN/i/o system/NN/system call/NN/call to/TO/to send/VB/send the/DT/the character/NN/character to/TO/to the/DT/the remote/NN/remote machine/NNP/machine. the/DT/the character/NN/character then/RB/then 13.7/CD/13.7 583/CD/583 flows/NNS/flows into/IN/into the/DT/the local/JJ/local kernel/NN/kernel /,/, through/IN/through the/DT/the network/NN/network layers/NNS/layers that/WDT/that construct/NN/construct a/DT/a network/NN/network packet/NN/packet /,/, and/CC/and into/IN/into the/DT/the network/NN/network device/NN/device driver/NNP/driver. the/DT/the network/NN/network device/NN/device driver/NN/driver transfers/NNS/transfers the/DT/the packet/NN/packet to/TO/to the/DT/the network/NN/network controller/NN/controller /,/, which/WDT/which sends/NNS/sends the/DT/the character/NN/character and/CC/and generates/VBZ/generates an/DT/an interrupt/NNP/interrupt. the/DT/the interrupt/NN/interrupt is/VBZ/is passed/VBN/passed back/RB/back up/RP/up through/IN/through the/DT/the kernel/NN/kernel to/TO/to cause/VB/cause the/DT/the network/NN/network l/0/-NONE-/l/0 system/NN/system call/NN/call to/TO/to complete/VB/complete /./. now/RB/now /,/, the/DT/the remote/NN/remote system/NN/system 's/POS/'s network/NN/network hardware/NN/hardware receives/NNS/receives the/DT/the packet/NN/packet /,/, and/CC/and an/DT/an interrupt/NN/interrupt is/VBZ/is generated/NNP/generated. the/DT/the character/NN/character is/VBZ/is unpacked/VBN/unpacked from/IN/from the/DT/the network/NN/network protocols/NNS/protocols and/CC/and is/VBZ/is given/VBN/given to/TO/to the/DT/the appropriate/NN/appropriate network/NN/network daemon/NNP/daemon. the/DT/the network/NN/network daemon/NN/daemon identifies/NNS/identifies which/WDT/which remote/NN/remote login/NN/login session/NN/session is/VBZ/is involved/VBN/involved and/CC/and passes/NNS/passes the/DT/the packet/NN/packet to/TO/to the/DT/the appropriate/NN/appropriate subdaemon/NN/subdaemon for/IN/for that/DT/that session/NNP/session. throughout/IN/throughout this/DT/this flow/NN/flow /,/, there/EX/there are/VBP/are context/JJ/context switches/NNS/switches and/CC/and state/NN/state switches/NNS/switches /:/( figure/NN/figure 13.15/CD/13.15 /CD/) /./. usually/RB/usually /,/, the/DT/the receiver/NN/receiver echoes/VBZ/echoes the/DT/the character/NN/character back/RB/back to/TO/to the/DT/the sender/NN/sender ;/:/; that/DT/that approach/NN/approach doubles/NNS/doubles the/DT/the work/NN/work /./. to/TO/to eliminate/VB/eliminate the/DT/the context/NN/context switches/VBZ/switches involved/VBN/involved in/IN/in moving/NN/moving each/DT/each character/NN/character between/IN/between daemons/NNS/daemons and/CC/and the/DT/the kernel/NN/kernel /,/, the/DT/the solaris/NNS/solaris developers/NNS/developers reimplemented/VBD/reimplemented the/DT/the daemon/NN/daemon using/VBG/using in-kernel/JJ/in-kernel threads/NNP/threads. sun/NN/sun estimates/VBZ/estimates that/IN/that this/DT/this improvement/NN/improvement sending/VBG/sending system/NN/system receiving/VBG/receiving system/NN/system figure/NN/figure 13.15/CD/13.15 lntercomputer/NN/lntercomputer communications/NNS/communications /./. 584/CD/584 chapter/NN/chapter 13/CD/13 increased/VBD/increased the/DT/the maximum/NN/maximum number/NN/number of/IN/of network/NN/network logins/NNS/logins from/IN/from a/DT/a few/JJ/few hundred/VBN/hundred to/TO/to a/DT/a few/JJ/few thousand/NN/thousand on/IN/on a/DT/a large/JJ/large server/NN/server /./. other/JJ/other systems/NNS/systems use/VBP/use separate/JJ/separate for/IN/for terminal/JJ/terminal i/0/-NONE-/i/0 to/TO/to reduce/VB/reduce the/DT/the interrupt/NN/interrupt burden/NN/burden on/IN/on the/DT/the main/JJ/main cpu/NNP/cpu. for/IN/for instance/NN/instance /,/, a/DT/a can/MD/can multiplex/VB/multiplex the/DT/the traffic/JJ/traffic from/IN/from hundreds/NNS/hundreds of/IN/of remote/NN/remote terminals/NNS/terminals into/IN/into one/CD/one port/NN/port on/IN/on a/DT/a large/JJ/large computer/NNP/computer. an/DT/an is/VBZ/is a/DT/a dedicated/VBN/dedicated /,/, special-purpose/JJ/special-purpose cpu/NN/cpu found/VBD/found in/IN/in mainframes/NNS/mainframes and/CC/and in/IN/in other/JJ/other high-end/JJ/high-end systems/NNP/systems. the/DT/the job/NN/job o/NN/o a/DT/a channel/NN/channel is/VBZ/is to/TO/to offload/VB/offload i/0/-NONE-/i/0 work/VB/work from/IN/from the/DT/the main/JJ/main cpu/NNP/cpu. the/DT/the idea/NN/idea is/VBZ/is that/IN/that the/DT/the cham1.els/NNS/cham1.els keep/VBP/keep the/DT/the data/NNS/data flowing/VBG/flowing smoothly/RB/smoothly /,/, while/IN/while the/DT/the main/JJ/main cpu/NN/cpu remains/VBZ/remains free/JJ/free to/TO/to process/NN/process the/DT/the data/NNP/data. like/IN/like the/DT/the device/NN/device controllers/NNS/controllers and/CC/and dma/NN/dma controllers/NNS/controllers found/VBD/found in/IN/in smaller/JJR/smaller computers/NNS/computers /,/, a/DT/a channel/NN/channel can/MD/can process/NN/process more/RBR/more general/JJ/general and/CC/and sophisticated/JJ/sophisticated programs/NNS/programs /,/, so/RB/so channels/VBZ/channels can/MD/can be/VB/be tuned/VBN/tuned for/IN/for particular/JJ/particular workloads/NNS/workloads /./. we/PRP/we can/MD/can employ/VB/employ several/JJ/several principles/NNS/principles to/TO/to improve/VB/improve the/DT/the efficiency/NN/efficiency of/IN/of i/0/-NONE-/i/0 /:/: reduce/VB/reduce the/DT/the number/NN/number of/IN/of context/NN/context switches/NNS/switches /./. reduce/NN/reduce the/DT/the number/NN/number of/IN/of times/NNS/times that/WDT/that data/NNS/data must/MD/must be/VB/be copied/VBN/copied in/IN/in memory/NN/memory while/IN/while passing/VBG/passing between/IN/between device/NN/device and/CC/and application/NN/application /./. reduce/NN/reduce the/DT/the frequency/NN/frequency of/IN/of interrupts/NNS/interrupts by/IN/by using/VBG/using large/JJ/large transfers/NNS/transfers /,/, smart/NN/smart controllers/NNS/controllers /,/, and/CC/and polling/VBG/polling /:/( if/IN/if busy/JJ/busy waiting/NN/waiting can/MD/can be/VB/be minimized/VBN/minimized /-NONE-/) /./. increase/NN/increase concurrency/NN/concurrency by/IN/by using/VBG/using dma-knowledgeable/JJ/dma-knowledgeable controllers/NNS/controllers or/CC/or channels/NNS/channels to/TO/to offload/VB/offload simple/JJ/simple data/NNS/data copying/VBG/copying from/IN/from the/DT/the cpu/NN/cpu /./. move/NN/move processing/NN/processing primitives/NNS/primitives into/IN/into hardware/NN/hardware /,/, to/TO/to allow/VB/allow their/PRP$/their operation/NN/operation in/IN/in device/NN/device controllers/NNS/controllers to/TO/to be/VB/be concurrent/JJ/concurrent with/IN/with cpu/NN/cpu and/CC/and bus/VBZ/bus operation/NN/operation /./. balance/NN/balance cpu/NN/cpu /,/, memory/NN/memory subsystem/NN/subsystem /,/, bus/VBZ/bus /,/, and/CC/and i/o/NNP/i/o performance/NN/performance /,/, because/IN/because an/DT/an overload/NN/overload in/IN/in any/DT/any one/CD/one area/NN/area will/MD/will cause/VB/cause idleness/NN/idleness in/IN/in others/NNS/others /./. i/0/-NONE-/i/0 devices/NNS/devices vary/VB/vary greatly/RB/greatly in/IN/in complexity/NNP/complexity. for/IN/for instance/NN/instance /,/, a/DT/a mouse/NN/mouse is/VBZ/is simple/NNP/simple. the/DT/the mouse/NN/mouse movements/NNS/movements and/CC/and button/NN/button clicks/NNS/clicks are/VBP/are converted/VBN/converted into/IN/into numeric/JJ/numeric values/NNS/values that/WDT/that are/VBP/are passed/VBN/passed from/IN/from hardware/NN/hardware /,/, through/IN/through the/DT/the mouse/NN/mouse device/NN/device driver/NN/driver /,/, to/TO/to the/DT/the application/NNP/application. by/IN/by contrast/NN/contrast /,/, the/DT/the functionality/NN/functionality provided/VBD/provided by/IN/by the/DT/the windows/NNS/windows nt/VBP/nt disk/NN/disk device/NN/device driver/NN/driver is/VBZ/is complex/NNP/complex. it/PRP/it not/RB/not only/RB/only manages/VBZ/manages individual/JJ/individual disks/NNS/disks but/CC/but also/RB/also implements/VBZ/implements raid/VBN/raid arrays/NNS/arrays /:/( section/NN/section 12.7/CD/12.7 /CD/) /./. to/TO/to do/VB/do so/RB/so /,/, it/PRP/it converts/VBZ/converts an/DT/an application/NN/application 's/POS/'s read/NN/read or/CC/or write/VB/write request/NN/request into/IN/into a/DT/a coordinated/JJ/coordinated set/NN/set of/IN/of disk/NN/disk i/0/-NONE-/i/0 operations/NNP/operations. moreover/RB/moreover /,/, it/PRP/it implements/VBZ/implements sophisticated/VBN/sophisticated error-handling/JJ/error-handling and/CC/and data-recovery/JJ/data-recovery algorithms/NNS/algorithms and/CC/and takes/VBZ/takes many/JJ/many steps/NNS/steps to/TO/to optimize/VB/optimize disk/NN/disk performance/NN/performance /./. where/WRB/where should/MD/should the/DT/the i/0/NNP/i/0 functionality/NN/functionality be/VB/be implemented/VBN/implemented -in/-NONE-/-in the/DT/the device/NN/device hardware/NN/hardware /,/, in/IN/in the/DT/the device/NN/device driver/NN/driver /,/, or/CC/or in/IN/in application/NN/application software/NN/software sometimes/RB/sometimes we/PRP/we observe/VBP/observe the/DT/the progression/NN/progression depicted/VBD/depicted in/IN/in figure/NN/figure 13.16/CD/13.16 /./. initially/RB/initially /,/, we/PRP/we implement/VBP/implement experimental/JJ/experimental i/0/-NONE-/i/0 algorithms/VBZ/algorithms at/IN/at the/DT/the application/NN/application level/NN/level /,/, because/IN/because application/NN/application code/NN/code is/VBZ/is f1exible/NNP/f1exible and/CC/and application/NN/application bugs/NNS/bugs are/VBP/are unlikely/RB/unlikely to/TO/to cause/VB/cause system/NN/system crashes/NNP/crashes. furthermore/NN/furthermore /,/, by/IN/by developing/VBG/developing code/NN/code at/IN/at the/DT/the application/NN/application level/NN/level /,/, we/PRP/we avoid/VBP/avoid the/DT/the need/NN/need to/TO/to reboot/VB/reboot or/CC/or reload/VB/reload device/NN/device drivers/NNS/drivers after/IN/after every/DT/every change/NN/change to/TO/to the/DT/the code/NNP/code. an/DT/an application-level/JJ/application-level implementation/NN/implementation can/MD/can be/VB/be inefficient/VBN/inefficient /,/, however/RB/however /,/, because/IN/because of/IN/of the/DT/the overhead/JJ/overhead o/NN/o context/NN/context switches/NNS/switches and/CC/and because/IN/because the/DT/the application/NN/application can/MD/can not/RB/not take/VB/take advantage/NN/advantage of/IN/of internal/JJ/internal kernel/NN/kernel data/NNS/data structures/NNS/structures and/CC/and 13.8/CD/13.8 13.8/CD/13.8 585/CD/585 device/NN/device code/NN/code /:/( hardware/NN/hardware /:/) figure/NN/figure 13.16/CD/13.16 device/NN/device functionality/NN/functionality progression/NN/progression /./. kernel/NN/kernel functionality/NN/functionality /:/( such/JJ/such as/IN/as efficient/JJ/efficient in-kernel/NN/in-kernel messaging/VBG/messaging /,/, threading/VBG/threading /,/, and/CC/and locking/VBG/locking /:/) /./. when/WRB/when an/DT/an application-level/JJ/application-level algorithm/NN/algorithm has/VBZ/has demonstrated/VBN/demonstrated its/PRP$/its worth/NN/worth /,/, we/PRP/we may/MD/may reimplement/VB/reimplement it/PRP/it in/IN/in the/DT/the kernel/NNP/kernel. this/DT/this can/MD/can improve/VB/improve performance/NN/performance /,/, but/CC/but the/DT/the development/NN/development effort/NN/effort is/VBZ/is more/RBR/more challenging/VBG/challenging /,/, because/IN/because an/DT/an operating-system/JJ/operating-system kernel/NN/kernel is/VBZ/is a/DT/a large/JJ/large /,/, complex/JJ/complex software/NN/software system/NNP/system. moreover/RB/moreover /,/, an/DT/an in-kernel/JJ/in-kernel implementation/NN/implementation must/MD/must be/VB/be thoroughly/RB/thoroughly debugged/VBN/debugged to/TO/to avoid/VB/avoid data/NNS/data corruption/NN/corruption and/CC/and system/NN/system crashes/NNS/crashes /./. the/DT/the highest/JJS/highest performance/NN/performance may/MD/may be/VB/be obtained/VBN/obtained through/IN/through a/DT/a specialized/VBN/specialized implementation/NN/implementation in/IN/in hardware/NN/hardware /,/, either/DT/either in/IN/in the/DT/the device/NN/device or/CC/or in/IN/in the/DT/the controller/NNP/controller. the/DT/the disadvantages/NNS/disadvantages of/IN/of a/DT/a hardware/NN/hardware implementation/NN/implementation include/NN/include the/DT/the difficulty/NN/difficulty and/CC/and expense/NN/expense of/IN/of making/VBG/making further/JJ/further improvements/NNS/improvements or/CC/or of/IN/of fixing/VBG/fixing bugs/NNS/bugs /,/, the/DT/the increased/VBN/increased development/NN/development time/NN/time /:/( months/NNS/months rather/RB/rather than/IN/than days/NNS/days /:/) /,/, and/CC/and the/DT/the decreased/VBN/decreased flexibility/NN/flexibility /./. for/IN/for instance/NN/instance /,/, a/DT/a hardware/NN/hardware raid/VBD/raid controller/NN/controller may/MD/may not/RB/not provide/VB/provide any/DT/any means/NNS/means for/IN/for the/DT/the kernel/NN/kernel to/TO/to influence/NN/influence the/DT/the order/NN/order or/CC/or location/NN/location of/IN/of individual/JJ/individual block/NN/block reads/NNS/reads and/CC/and writes/NNS/writes /,/, even/RB/even if/IN/if the/DT/the kernel/NN/kernel has/VBZ/has special/JJ/special information/NN/information about/IN/about the/DT/the workload/NN/workload that/IN/that would/MD/would enable/VB/enable it/PRP/it to/TO/to improve/VB/improve the/DT/the i/0/NN/i/0 performance/NN/performance /./. the/DT/the basic/JJ/basic hardware/NN/hardware elements/NNS/elements involved/VBD/involved in/IN/in i/0/-NONE-/i/0 are/VBP/are buses/NNS/buses /,/, device/NN/device controllers/NNS/controllers /,/, and/CC/and the/DT/the devices/NNS/devices themselves/NNP/themselves. the/DT/the work/NN/work of/IN/of moving/VBG/moving data/NNS/data between/IN/between devices/NNS/devices and/CC/and main/JJ/main memory/NN/memory is/VBZ/is perform.ed/JJ/perform.ed by/IN/by the/DT/the cpu/NN/cpu as/IN/as programmed/VBN/programmed i/0/-NONE-/i/0 or/CC/or is/VBZ/is offloaded/VBN/offloaded to/TO/to a/DT/a dma/NN/dma controller/NNP/controller. the/DT/the kernel/NN/kernel module/NN/module that/WDT/that controls/VBZ/controls a/DT/a device/NN/device is/VBZ/is a/DT/a device/NN/device driver/NNP/driver. the/DT/the system-call/JJ/system-call interface/NN/interface provided/VBN/provided to/TO/to applications/NNS/applications is/VBZ/is designed/VBN/designed to/TO/to handle/VB/handle several/JJ/several basic/JJ/basic categories/NNS/categories of/IN/of hardware/NN/hardware /,/, including/VBG/including block/NN/block devices/NNS/devices /,/, character/NN/character devices/NNS/devices /,/, memory-mapped/JJ/memory-mapped files/NNS/files /,/, network/NN/network sockets/NNS/sockets /,/, and/CC/and programmed/VBD/programmed interval/NN/interval timers/NNP/timers. the/DT/the system/NN/system calls/VBZ/calls usually/RB/usually block/NN/block the/DT/the processes/NNS/processes that/WDT/that issue/NN/issue them/PRP/them /,/, but/CC/but nonblocking/VBG/nonblocking and/CC/and 586/CD/586 chapter/NN/chapter 13/CD/13 asynchronous/JJ/asynchronous calls/NNS/calls are/VBP/are used/VBN/used by/IN/by the/DT/the kernel/NN/kernel itself/PRP/itself and/CC/and by/IN/by applications/NNS/applications that/IN/that must/MD/must not/RB/not sleep/VB/sleep while/IN/while waiting/VBG/waiting for/IN/for an/DT/an i/0/JJ/i/0 operation/NN/operation to/TO/to complete/VB/complete /./. the/DT/the kernel/NN/kernel 's/POS/'s i/o/JJ/i/o subsystem/NN/subsystem provides/VBZ/provides num.erous/JJ/num.erous services/NNP/services. among/IN/among these/DT/these are/VBP/are i/0/-NONE-/i/0 scheduling/VBG/scheduling /,/, buffering/VBG/buffering /,/, caching/VBG/caching /,/, spooling/VBG/spooling /,/, device/NN/device reservation/NN/reservation /,/, and/CC/and error/NN/error handling/NNP/handling. another/DT/another service/NN/service /,/, name/NN/name translation/NN/translation /,/, makes/VBZ/makes the/DT/the connections/NNS/connections between/IN/between hardware/NN/hardware devices/NNS/devices and/CC/and the/DT/the symbolic/JJ/symbolic file/NN/file names/NNS/names used/VBN/used by/IN/by applications/NNP/applications. it/PRP/it involves/VBZ/involves several/JJ/several levels/NNS/levels of/IN/of mapping/VBG/mapping that/IN/that translate/JJ/translate from/IN/from character-string/JJ/character-string names/NNS/names /,/, to/TO/to specific/JJ/specific device/NN/device drivers/NNS/drivers and/CC/and device/NN/device addresses/NNS/addresses /,/, and/CC/and then/RB/then to/TO/to physical/JJ/physical addresses/NNS/addresses of/IN/of ii/NN/ii 0/-NONE-/0 ports/NNS/ports or/CC/or bus/VBZ/bus controllers/NNP/controllers. this/DT/this mapping/NN/mapping may/MD/may occur/VB/occur within/IN/within the/DT/the file-system/JJ/file-system name/NN/name space/NN/space /,/, as/IN/as it/PRP/it does/VBZ/does in/IN/in unix/NN/unix /,/, or/CC/or in/IN/in a/DT/a separate/JJ/separate device/NN/device name/NN/name space/NN/space /,/, as/IN/as it/PRP/it does/VBZ/does in/IN/in ms-dos/NNP/ms-dos /./. streams/NNS/streams is/VBZ/is an/DT/an implementation/NN/implementation and/CC/and methodology/NN/methodology that/IN/that provides/VBZ/provides a/DT/a framework/NN/framework for/IN/for a/DT/a modular/JJ/modular and/CC/and incremental/JJ/incremental approach/NN/approach to/TO/to writing/NN/writing device/NN/device drivers/NNS/drivers and/CC/and network/NN/network protocols/NNP/protocols. through/IN/through streams/NNS/streams /,/, drivers/NNS/drivers can/MD/can be/VB/be stacked/VBN/stacked /,/, with/IN/with data/NNS/data passing/VBG/passing through/IN/through them/PRP/them sequentially/RB/sequentially and/CC/and bidirectionally/RB/bidirectionally for/IN/for processing/NN/processing /./. i/o/NN/i/o system/NN/system calls/VBZ/calls are/VBP/are costly/RB/costly in/IN/in terms/NNS/terms of/IN/of cpu/NN/cpu consumption/NN/consumption because/IN/because of/IN/of the/DT/the many/JJ/many layers/NNS/layers of/IN/of software/NN/software between/IN/between a/DT/a physical/JJ/physical device/NN/device and/CC/and an/DT/an application/NNP/application. these/DT/these layers/NNS/layers imply/VBP/imply overhead/JJ/overhead from/IN/from several/JJ/several sources/NNS/sources /:/: context/JJ/context switching/NN/switching to/TO/to cross/NNS/cross the/DT/the kernel/NN/kernel 's/POS/'s protection/NN/protection boundary/NN/boundary /,/, signal/JJ/signal and/CC/and interrupt/JJ/interrupt handling/NN/handling to/TO/to service/NN/service the/DT/the i/0/NNP/i/0 devices/NNS/devices /,/, and/CC/and the/DT/the load/NN/load on/IN/on the/DT/the cpu/NN/cpu and/CC/and memory/NN/memory system/NN/system to/TO/to copy/VB/copy data/NNS/data between/IN/between kernel/NN/kernel buffers/NNS/buffers and/CC/and application/NN/application space/NN/space /./. 13.1/CD/13.1 write/NN/write /:/( in/IN/in pseudocode/NN/pseudocode /:/) an/DT/an implementation/NN/implementation of/IN/of virtual/JJ/virtual clocks/NNS/clocks /,/, including/VBG/including the/DT/the queueing/NN/queueing and/CC/and management/NN/management of/IN/of timer/NN/timer requests/NNS/requests for/IN/for the/DT/the kernel/NN/kernel and/CC/and applications/NNP/applications. assume/NN/assume that/WDT/that the/DT/the hardware/NN/hardware provides/VBZ/provides three/CD/three timer/NN/timer channels/NNS/channels /./. 13.2/CD/13.2 what/WP/what are/VBP/are the/DT/the advantages/NNS/advantages and/CC/and disadvantages/NNS/disadvantages of/IN/of supporting/VBG/supporting memorymapped/VBN/memorymapped i/0/-NONE-/i/0 to/TO/to device/VB/device control/NN/control registers/NNS/registers 13.3/CD/13.3 typically/RB/typically /,/, at/IN/at the/DT/the completion/NN/completion of/IN/of a/DT/a device/NN/device i/0/-NONE-/i/0 /,/, a/DT/a single/JJ/single interrupt/NN/interrupt is/VBZ/is raised/VBN/raised and/CC/and appropriately/RB/appropriately handled/VBD/handled by/IN/by the/DT/the host/NN/host processor/NNP/processor. in/IN/in certain/JJ/certain settings/NNS/settings /,/, however/RB/however /,/, the/DT/the code/NN/code that/IN/that is/VBZ/is to/TO/to be/VB/be executed/VBN/executed at/IN/at the/DT/the completion/NN/completion of/IN/of the/DT/the i/0/NNP/i/0 can/MD/can be/VB/be broken/VBN/broken into/IN/into two/CD/two separate/JJ/separate pieces/NNP/pieces. the/DT/the first/JJ/first piece/NN/piece executes/NNS/executes immediately/RB/immediately after/IN/after the/DT/the i/0/NNP/i/0 completes/VBZ/completes and/CC/and schedules/NNS/schedules a/DT/a second/JJ/second interrupt/NN/interrupt for/IN/for the/DT/the remaining/VBG/remaining piece/NN/piece of/IN/of code/NN/code to/TO/to be/VB/be executed/VBN/executed at/IN/at a/DT/a later/JJ/later time/NNP/time. what/WP/what is/VBZ/is the/DT/the purpose/NN/purpose of/IN/of using/VBG/using this/DT/this strategy/NN/strategy in/IN/in the/DT/the design/NN/design of/IN/of interrupt/NN/interrupt handlers/NNS/handlers 13.4/CD/13.4 why/WRB/why might/MD/might a/DT/a system/NN/system use/NN/use interrupt-driven/JJ/interrupt-driven i/0/NN/i/0 to/TO/to manage/NN/manage a/DT/a single/JJ/single serial/NN/serial port/NN/port and/CC/and polling/VBG/polling i/0/-NONE-/i/0 to/TO/to manage/VB/manage a/DT/a front-end/JJ/front-end processor/NN/processor /,/, such/JJ/such as/IN/as a/DT/a termii1.al/JJ/termii1.al concentrator/NN/concentrator 13.5/CD/13.5 what/WP/what are/VBP/are the/DT/the various/JJ/various kinds/NNS/kinds of/IN/of performance/NN/performance overhead/NN/overhead associated/VBN/associated with/IN/with servicing/NN/servicing an/DT/an interrupt/NN/interrupt 13.6/CD/13.6 unix/CD/unix coordinates/NNS/coordinates the/DT/the activities/NNS/activities of/IN/of the/DT/the kernel/NN/kernel i/0/-NONE-/i/0 components/VBZ/components by/IN/by manipulating/NN/manipulating shared/VBD/shared in-kernel/JJ/in-kernel data/NNS/data structures/NNS/structures /,/, whereas/IN/whereas windows/NNS/windows nt/VBP/nt uses/NNS/uses object-oriented/JJ/object-oriented message/NN/message passing/VBG/passing between/IN/between kernel/NN/kernel i/o/-NONE-/i/o components/VBZ/components /./. discuss/NN/discuss three/CD/three pros/NNS/pros and/CC/and three/CD/three cons/NNS/cons of/IN/of each/DT/each approach/NN/approach /./. 587/CD/587 13.7/CD/13.7 in/IN/in most/JJS/most multiprogrammed/VBN/multiprogrammed systems/NNS/systems /,/, user/NN/user programs/NNS/programs access/NN/access memory/NN/memory through/IN/through virtual/JJ/virtual addresses/NNS/addresses /,/, while/IN/while the/DT/the operating/NN/operating system/NN/system uses/NNS/uses raw/VBP/raw physical/JJ/physical addresses/NNS/addresses to/TO/to access/NN/access men10ry/NNP/men10ry. what/WP/what are/VBP/are the/DT/the implications/NNS/implications of/IN/of this/DT/this design/NN/design for/IN/for the/DT/the initiation/NN/initiation of/IN/of i/0/-NONE-/i/0 operations/NNS/operations by/IN/by the/DT/the user/NN/user program/NN/program and/CC/and their/PRP$/their execution/NN/execution by/IN/by the/DT/the operating/NN/operating system/NN/system 13.8/CD/13.8 polling/VBG/polling for/IN/for an/DT/an i/0/JJ/i/0 completion/NN/completion can/MD/can waste/VB/waste a/DT/a large/JJ/large number/NN/number of/IN/of cpu/NN/cpu cycles/NNS/cycles if/IN/if the/DT/the processor/NN/processor iterates/VBZ/iterates a/DT/a busy-waiting/JJ/busy-waiting loop/NN/loop many/JJ/many times/NNS/times before/IN/before the/DT/the i/0/NN/i/0 completes/NNP/completes. but/CC/but if/IN/if the/DT/the i/0/NNP/i/0 device/NN/device is/VBZ/is ready/JJ/ready for/IN/for service/NN/service /,/, polling/VBG/polling can/MD/can be/VB/be much/RB/much more/RBR/more efficient/JJ/efficient than/IN/than is/VBZ/is catching/VBG/catching and/CC/and dispatching/VBG/dispatching an/DT/an interrupt/NNP/interrupt. describe/NN/describe a/DT/a hybrid/NN/hybrid strategy/NN/strategy that/WDT/that combines/VBZ/combines polling/VBG/polling /,/, sleeping/VBG/sleeping /,/, and/CC/and interrupts/NNS/interrupts for/IN/for i/0/-NONE-/i/0 device/NN/device service/NNP/service. for/IN/for each/DT/each of/IN/of these/DT/these three/CD/three strategies/NNS/strategies /:/( pure/NN/pure polling/NN/polling /,/, pure/NN/pure interrupts/NNS/interrupts /,/, hybrid/VBD/hybrid /:/) /,/, describe/VBP/describe a/DT/a computing/NN/computing environment/NN/environment in/IN/in which/WDT/which that/IN/that strategy/NN/strategy is/VBZ/is more/RBR/more efficient/JJ/efficient than/IN/than is/VBZ/is either/DT/either of/IN/of the/DT/the others/NNS/others /./. 13.9/CD/13.9 consider/NN/consider the/DT/the following/VBG/following i/0/-NONE-/i/0 scenarios/NNS/scenarios on/IN/on a/DT/a single-user/JJ/single-user pc/NN/pc /:/: a/NNP/a. a/DT/a mouse/NN/mouse used/VBN/used with/IN/with a/DT/a graphical/JJ/graphical user/NN/user interface/NN/interface b/NNP/b. a/DT/a tape/NN/tape drive/NN/drive on/IN/on a/DT/a multitasking/NN/multitasking operating/NN/operating system/NN/system /:/( with/IN/with no/DT/no device/NN/device preallocation/NN/preallocation available/JJ/available /NN/) c/NNP/c. a/DT/a disk/NN/disk drive/NN/drive containing/VBG/containing user/NN/user files/NNS/files d/NNP/d. a/DT/a graphics/NNS/graphics card/NN/card with/IN/with direct/JJ/direct bus/NNS/bus connection/NN/connection /,/, accessible/JJ/accessible through/IN/through memory-mapped/JJ/memory-mapped i/0/-NONE-/i/0 for/IN/for each/DT/each of/IN/of these/DT/these scenarios/NNS/scenarios /,/, would/MD/would you/PRP/you design/VB/design the/DT/the operating/NN/operating system/NN/system to/TO/to use/VB/use buffering/NN/buffering /,/, spooling/VBG/spooling /,/, caching/VBG/caching /,/, or/CC/or a/DT/a combin_ation/NN/combin_ation would/MD/would you/PRP/you use/VB/use polled/VBN/polled i/o/-NONE-/i/o or/CC/or interrupt-driven/JJ/interrupt-driven i/0/-NONE-/i/0 give/JJ/give reasons/NNS/reasons for/IN/for your/PRP$/your choices/NNS/choices /./. 13.10/CD/13.10 the/DT/the example/NN/example of/IN/of handshaking/NN/handshaking in/IN/in section/NN/section 13.2/CD/13.2 used/VBN/used 2/CD/2 bits/NNS/bits /:/: a/DT/a busy/NN/busy bit/NN/bit and/CC/and a/DT/a command-ready/JJ/command-ready bit/NNP/bit. is/VBZ/is it/PRP/it possible/JJ/possible to/TO/to implement/NN/implement this/DT/this handshaking/NN/handshaking with/IN/with only/RB/only 1/CD/1 bit/NN/bit if/IN/if it/PRP/it is/VBZ/is /,/, describe/VBP/describe the/DT/the protocol/NNP/protocol. if/IN/if it/PRP/it is/VBZ/is not/RB/not /,/, explain/VB/explain why/WRB/why 1/CD/1 bit/NN/bit is/VBZ/is insufficient/NN/insufficient /./. 13.11/CD/13.11 discuss/NNS/discuss the/DT/the advantages/NNS/advantages and/CC/and disadvantages/NNS/disadvantages of/IN/of guaranteeing/VBG/guaranteeing reliable/JJ/reliable transfer/NN/transfer of/IN/of data/NNS/data between/IN/between modules/NNS/modules in/IN/in the/DT/the streams/NNS/streams abstraction/NN/abstraction /./. 13.12/CD/13.12 some/DT/some dma/NN/dma controllers/NNS/controllers support/NN/support direct/NN/direct virtual/JJ/virtual memory/NN/memory access/NN/access /,/, where/WRB/where the/DT/the targets/NNS/targets of/IN/of i/0/-NONE-/i/0 operations/NNS/operations are/VBP/are specified/VBN/specified as/IN/as virtual/JJ/virtual addresses/NNS/addresses and/CC/and a/DT/a translation/NN/translation from/IN/from virtual/JJ/virtual to/TO/to physical/JJ/physical address/NN/address is/VBZ/is performed/VBN/performed during/IN/during the/DT/the dma/NNP/dma. how/WRB/how does/VBZ/does this/DT/this design/NN/design complicate/NN/complicate the/DT/the design/NN/design of/IN/of the/DT/the dma/NN/dma controller/NN/controller what/WP/what are/VBP/are the/DT/the advantages/NNS/advantages of/IN/of providing/VBG/providing such/JJ/such functionality/NN/functionality 13.13/CD/13.13 why/WRB/why is/VBZ/is it/PRP/it important/JJ/important to/TO/to scale/VB/scale up/RP/up system-bus/JJ/system-bus and/CC/and device/NN/device speeds/NNS/speeds as/IN/as cpu/NN/cpu speed/NN/speed increases/NNS/increases 13.14/CD/13.14 when/WRB/when multiple/JJ/multiple interrupts/NNS/interrupts from/IN/from different/JJ/different devices/NNS/devices appear/VBP/appear at/IN/at about/IN/about the/DT/the same/JJ/same time/NN/time /,/, a/DT/a priority/NN/priority scheme/NN/scheme could/MD/could be/VB/be used/VBN/used to/TO/to determine/VB/determine the/DT/the order/NN/order in/IN/in which/WDT/which the/DT/the interrupts/NNS/interrupts would/MD/would be/VB/be serviced/NNP/serviced. discuss/NN/discuss what/WP/what issues/NNS/issues need/VBP/need to/TO/to be/VB/be considered/VBN/considered in/IN/in assigning/NN/assigning priorities/NNS/priorities to/TO/to different/JJ/different interrupts/NNS/interrupts /./. 588/CD/588 chapter/NN/chapter 13/CD/13 13.15/CD/13.15 describe/NN/describe three/CD/three circumstances/NNS/circumstances under/IN/under which/WDT/which blocking/VBG/blocking ii/NN/ii 0/-NONE-/0 should/MD/should be/VB/be used/VBN/used /./. describe/NN/describe three/CD/three circumstances/NNS/circumstances under/IN/under which/WDT/which nonblocking/VBG/nonblocking i/0/-NONE-/i/0 should/MD/should be/VB/be used/NNP/used. why/WRB/why not/RB/not just/RB/just implement/JJ/implement nonblocking/NN/nonblocking i/0/-NONE-/i/0 and/CC/and have/VBP/have processes/NNS/processes busy-wait/JJ/busy-wait until/IN/until their/PRP$/their devices/NNS/devices are/VBP/are ready/RB/ready vahalia/IN/vahalia /CD/[ 1996/CD/1996 /CD/] provides/NNS/provides a/DT/a good/JJ/good overview/NN/overview of/IN/of i/o/NNP/i/o and/CC/and networking/VBG/networking in/IN/in unix/NN/unix /./. leffler/NN/leffler et/NN/et al/NNP/al. /NNP/[ 1989/CD/1989 /CD/] detail/NN/detail the/DT/the i/o/NNP/i/o structures/VBZ/structures and/CC/and methods/NNS/methods employed/VBD/employed in/IN/in bsd/NN/bsd unix/NNP/unix. milenkovic/JJ/milenkovic /NN/[ 1987/CD/1987 /CD/] discusses/NNS/discusses the/DT/the complexity/NN/complexity of/IN/of i/0/-NONE-/i/0 methods/NNS/methods and/CC/and implementation/NNP/implementation. the/DT/the use/NN/use and/CC/and programming/NN/programming of/IN/of the/DT/the various/JJ/various interprocesscommunication/NN/interprocesscommunication and/CC/and network/NN/network protocols/NNS/protocols in/IN/in unix/NN/unix are/VBP/are explored/VBN/explored in/IN/in stevens/NNS/stevens /:/[ 1992/CD/1992 /CD/] /./. brain/NN/brain /:/[ 1996/CD/1996 /CD/] documents/NNS/documents the/DT/the windows/NNS/windows nt/VBP/nt application/NN/application interface/NNP/interface. the/DT/the i/o/NNP/i/o implementation/NN/implementation in/IN/in the/DT/the sample/NN/sample minix/NN/minix operating/NN/operating system/NN/system is/VBZ/is described/VBN/described in/IN/in tanenbaum/NN/tanenbaum and/CC/and woodhull/JJ/woodhull /NN/[ 1997/CD/1997 /CD/] /./. custer/NN/custer /:/[ 1994/CD/1994 /CD/] includes/NNS/includes detailed/VBD/detailed information/NN/information on/IN/on the/DT/the nt/NN/nt message-passing/NN/message-passing implementation/NN/implementation of/IN/of i/0/-NONE-/i/0 /./. for/IN/for details/NNS/details of/IN/of hardware-level/JJ/hardware-level ii/NN/ii 0/-NONE-/0 handling/VBG/handling and/CC/and memory-mapping/JJ/memory-mapping functionality/NN/functionality /,/, processor/NN/processor reference/NN/reference manuals/NNS/manuals /:/( motorola/NN/motorola /:/[ 1993/CD/1993 /CD/] and/CC/and intel/NN/intel /:/[ 1993/CD/1993 /CD/] /CD/) are/VBP/are among/IN/among the/DT/the best/JJS/best sources/NNP/sources. hennessy/NN/hennessy and/CC/and patterson/NN/patterson /:/[ 2002/CD/2002 /CD/] describe/NN/describe multiprocessor/NN/multiprocessor systems/NNS/systems and/CC/and cache-consistency/JJ/cache-consistency issues/NNP/issues. tanenbaum/NN/tanenbaum /:/[ 1990/CD/1990 /CD/] describes/NNS/describes hardware/NN/hardware i/0/-NONE-/i/0 design/NN/design at/IN/at a/DT/a low/JJ/low level/NN/level /,/, and/CC/and sargent/NN/sargent and/CC/and shoemaker/NN/shoemaker /:/[ 1995/CD/1995 /CD/] provide/NN/provide a/DT/a programmer/NN/programmer 's/POS/'s guide/NN/guide to/TO/to low-level/NNP/low-level pc/NN/pc hardware/NN/hardware and/CC/and software/NNP/software. the/DT/the ibm/NN/ibm pc/NN/pc device/NN/device i/o/-NONE-/i/o address/NN/address map/NN/map is/VBZ/is given/VBN/given in/IN/in ibm/NN/ibm /:/[ 1983/CD/1983 /CD/] /./. the/DT/the march/NN/march 1994/CD/1994 issue/NN/issue of/IN/of ieee/NN/ieee computer/NN/computer is/VBZ/is devoted/VBN/devoted to/TO/to i/0/-NONE-/i/0 hardware/NN/hardware and/CC/and software/NNP/software. raga/NN/raga /:/[ 1993/CD/1993 /CD/] provides/NNS/provides a/DT/a good/JJ/good discussion/NN/discussion of/IN/of streams/NNS/streams /./. part/NN/part six/CD/six protection/NN/protection mechanisms/NNS/mechanisms control/NN/control access/NN/access to/TO/to a/DT/a system/NN/system by/IN/by limiting/NN/limiting the/DT/the types/NNS/types of/IN/of file/JJ/file access/NN/access permitted/VBD/permitted to/TO/to users/NNP/users. in/IN/in addition/NN/addition /,/, protection/NN/protection must/MD/must ensure/VB/ensure that/IN/that only/RB/only processes/VBZ/processes that/IN/that have/VBP/have gained/VBN/gained proper/NN/proper authorization/NN/authorization from/IN/from the/DT/the operating/NN/operating system/NN/system can/MD/can operate/VB/operate on/IN/on memory/NN/memory segments/NNS/segments /,/, the/DT/the cpu/NN/cpu /,/, and/CC/and other/JJ/other resources/NNS/resources /./. protection/NN/protection is/VBZ/is provided/VBN/provided by/IN/by a/DT/a mechanism/NN/mechanism that/WDT/that controls/VBZ/controls the/DT/the access/NN/access of/IN/of programs/NNS/programs /,/, processes/NNS/processes /,/, or/CC/or users/NNS/users to/TO/to the/DT/the resources/NNS/resources defined/VBD/defined by/IN/by a/DT/a computer/NN/computer system/NNP/system. this/DT/this mechanism/NN/mechanism must/MD/must provide/VB/provide a/DT/a means/NN/means for/IN/for specifying/NN/specifying the/DT/the controls/NNS/controls to/TO/to be/VB/be imposed/VBN/imposed /,/, together/RB/together with/IN/with a/DT/a means/NNS/means of/IN/of enforcing/VBG/enforcing them/PRP/them /./. security/NN/security ensures/NNS/ensures the/DT/the authentication/NN/authentication of/IN/of system/NN/system users/NNS/users to/TO/to protect/VB/protect the/DT/the integrity/NN/integrity of/IN/of the/DT/the information/NN/information stored/VBD/stored in/IN/in the/DT/the system/NN/system /:/( both/DT/both data/NNS/data and/CC/and code/NN/code /:/) /,/, as/IN/as well/RB/well as/IN/as the/DT/the physical/JJ/physical resources/NNS/resources of/IN/of the/DT/the computer/NN/computer system/NNP/system. the/DT/the security/NN/security system/NN/system prevents/NNS/prevents unauthorized/VBD/unauthorized access/NN/access /,/, malicious/JJ/malicious destruction/NN/destruction 01/CD/01- alteration/NN/alteration of/IN/of data/NNS/data /,/, and/CC/and accidental/JJ/accidental introduction/NN/introduction of/IN/of inconsistency/NN/inconsistency /./. 14.1/CD/14.1 chapter/NN/chapter the/DT/the processes/NNS/processes in/IN/in an/DT/an operating/NN/operating system/NN/system must/MD/must be/VB/be protected/VBN/protected from/IN/from one/CD/one another/DT/another 's/POS/'s activities/NNP/activities. to/TO/to provide/VB/provide such/JJ/such protection/NN/protection /,/, we/PRP/we can/MD/can use/VB/use various/JJ/various mechanisms/NNS/mechanisms to/TO/to ensure/VB/ensure that/IN/that only/RB/only processes/VBZ/processes that/IN/that have/VBP/have gained/VBN/gained proper/NN/proper authorization/NN/authorization from/IN/from the/DT/the operating/NN/operating system/NN/system can/MD/can operate/VB/operate on/IN/on the/DT/the files/NNS/files /,/, memory/NN/memory segments/NNS/segments /,/, cpu/VBP/cpu /,/, and/CC/and other/JJ/other resources/NNS/resources of/IN/of a/DT/a system/NN/system /./. protection/NN/protection refers/NNS/refers to/TO/to a/DT/a mechanism/NN/mechanism for/IN/for controlling/VBG/controlling the/DT/the access/NN/access of/IN/of programs/NNS/programs /,/, processes/NNS/processes /,/, or/CC/or users/NNS/users to/TO/to the/DT/the resources/NNS/resources defined/VBD/defined by/IN/by a/DT/a computer/NN/computer system/NNP/system. this/DT/this mechanism/NN/mechanism must/MD/must provide/VB/provide a/DT/a means/NN/means for/IN/for specifying/NN/specifying the/DT/the controls/NNS/controls to/TO/to be/VB/be imposed/VBN/imposed /,/, together/RB/together with/IN/with a/DT/a means/NNS/means of/IN/of enforcement/NNP/enforcement. we/PRP/we distinguish/VBP/distinguish between/IN/between protection/NN/protection and/CC/and security/NN/security /,/, which/WDT/which is/VBZ/is a/DT/a measure/NN/measure of/IN/of confidence/NN/confidence that/IN/that the/DT/the integrity/NN/integrity of/IN/of a/DT/a system/NN/system and/CC/and its/PRP$/its data/NNS/data will/MD/will be/VB/be preserved/NNP/preserved. in/IN/in this/DT/this chapter/NN/chapter /,/, we/PRP/we focus/VBZ/focus on/IN/on protection/NNP/protection. security/NN/security assurance/NN/assurance is/VBZ/is a/DT/a much/JJ/much broader/NN/broader topic/JJ/topic /,/, and/CC/and we/PRP/we address/VBP/address it/PRP/it in/IN/in chapter/NN/chapter 15/CD/15 /./. to/TO/to discuss/VB/discuss the/DT/the goals/NNS/goals and/CC/and principles/NNS/principles of/IN/of protection/NN/protection in/IN/in a/DT/a modern/JJ/modern computer/NN/computer system/NN/system /./. to/TO/to explain/VB/explain how/WRB/how protection/NN/protection domains/VBZ/domains /,/, combined/VBN/combined with/IN/with an/DT/an access/NN/access matrix/NN/matrix /,/, are/VBP/are used/VBN/used to/TO/to specify/VB/specify the/DT/the resources/NNS/resources a/DT/a process/NN/process may/MD/may access/NN/access /./. to/TO/to examine/VB/examine capability/JJ/capability- and/CC/and language-based/JJ/language-based protection/NN/protection systems/NNS/systems /./. as/IN/as computer/NN/computer systems/NNS/systems have/VBP/have become/VBN/become more/RBR/more sophisticated/JJ/sophisticated and/CC/and pervasive/JJ/pervasive in/IN/in their/PRP$/their applications/NNS/applications /,/, the/DT/the need/NN/need to/TO/to protect/VB/protect their/PRP$/their integrity/NN/integrity has/VBZ/has also/RB/also grown/NNP/grown. protection/NN/protection was/VBD/was originally/RB/originally conceived/VBN/conceived as/IN/as an/DT/an adjunct/NN/adjunct to/TO/to multiprogramming/NN/multiprogramming operating/NN/operating systems/NNS/systems /,/, so/RB/so that/IN/that untrustworthy/JJ/untrustworthy users/NNS/users might/MD/might safely/RB/safely share/VB/share a/DT/a common/JJ/common logical/JJ/logical name/NN/name space/NN/space /,/, such/JJ/such as/IN/as a/DT/a directory/NN/directory of/IN/of files/NNS/files /,/, or/CC/or share/NN/share a/DT/a common/JJ/common physical/JJ/physical name/NN/name space/NN/space /,/, such/JJ/such as/IN/as memory/NNP/memory. modern/NN/modern protection/NN/protection concepts/NNS/concepts have/VBP/have evolved/VBN/evolved to/TO/to increase/VB/increase the/DT/the reliability/NN/reliability of/IN/of any/DT/any complex/JJ/complex system/NN/system that/WDT/that makes/VBZ/makes use/VBP/use of/IN/of shared/VBN/shared resources/NNS/resources /./. we/PRP/we need/VBP/need to/TO/to provide/VB/provide protection/NN/protection for/IN/for several/JJ/several reasons/NNP/reasons. the/DT/the most/RBS/most obvious/JJ/obvious is/VBZ/is the/DT/the need/NN/need to/TO/to prevent/VB/prevent the/DT/the mischievous/JJ/mischievous /,/, intentional/JJ/intentional violation/NN/violation of/IN/of an/DT/an access/NN/access restriction/NN/restriction 591/CD/591 592/CD/592 chapter/NN/chapter 14/CD/14 14.2/CD/14.2 by/IN/by a/DT/a user/NNP/user. of/IN/of more/JJR/more general/JJ/general importance/NN/importance /,/, however/RB/however /,/, is/VBZ/is the/DT/the need/NN/need to/TO/to ensure/VB/ensure that/IN/that each/DT/each program/NN/program component/NN/component active/JJ/active in/IN/in a/DT/a system/NN/system uses/VBZ/uses system/NN/system resources/NNS/resources only/RB/only in/IN/in ways/NNS/ways consistent/NN/consistent with/IN/with stated/JJ/stated policies/NNP/policies. this/DT/this requirement/NN/requirement is/VBZ/is an/DT/an absolute/JJ/absolute one/CD/one for/IN/for a/DT/a reliable/JJ/reliable system/NN/system /./. protection/NN/protection can/MD/can improve/VB/improve reliability/NN/reliability by/IN/by detecting/NN/detecting latent/NN/latent errors/NNS/errors at/IN/at the/DT/the interfaces/NNS/interfaces between/IN/between component/NN/component subsystems/NNP/subsystems. early/RB/early detection/NN/detection of/IN/of interface/NN/interface errors/NNS/errors can/MD/can often/RB/often prevent/VB/prevent contamination/NN/contamination of/IN/of a/DT/a healthy/JJ/healthy subsystem/NN/subsystem by/IN/by a/DT/a malfunctioning/NN/malfunctioning subsystem/NN/subsystem /./. also/RB/also /,/, an/DT/an unprotected/JJ/unprotected resource/NN/resource can/MD/can not/RB/not defend/VB/defend against/IN/against use/NN/use /:/( or/CC/or misuse/VB/misuse /CD/) by/IN/by an/DT/an unauthorized/JJ/unauthorized or/CC/or incompetent/NN/incompetent user/NNP/user. a/DT/a protection-oriented/JJ/protection-oriented system/NN/system provides/VBZ/provides means/NNS/means to/TO/to distinguish/VB/distinguish between/IN/between authorized/VBN/authorized and/CC/and unauthorized/VBN/unauthorized usage/NN/usage /./. the/DT/the role/NN/role of/IN/of protection/NN/protection in/IN/in a/DT/a computer/NN/computer system/NN/system is/VBZ/is to/TO/to provide/VB/provide a/DT/a mechanism/NN/mechanism for/IN/for the/DT/the enforcement/NN/enforcement of/IN/of the/DT/the policies/NNS/policies governing/VBG/governing resource/NN/resource use/NNP/use. these/DT/these policies/NNS/policies can/MD/can be/VB/be established/VBN/established in/IN/in a/DT/a variety/NN/variety of/IN/of ways/NNP/ways. some/DT/some are/VBP/are fixed/VBN/fixed in/IN/in the/DT/the design/NN/design of/IN/of the/DT/the system/NN/system /,/, while/IN/while others/NNS/others are/VBP/are formulated/VBN/formulated by/IN/by the/DT/the management/NN/management of/IN/of a/DT/a system/NNP/system. still/RB/still others/NNS/others are/VBP/are defined/VBN/defined by/IN/by the/DT/the individual/JJ/individual users/NNS/users to/TO/to protect/VB/protect their/PRP$/their own/JJ/own files/NNS/files and/CC/and programs/NNP/programs. a/DT/a protection/NN/protection system/NN/system must/MD/must have/VB/have the/DT/the flexibility/NN/flexibility to/TO/to enforce/VB/enforce a/DT/a variety/NN/variety of/IN/of policies/NNS/policies /./. policies/NNS/policies for/IN/for resource/NN/resource use/NN/use may/MD/may vary/VB/vary by/IN/by application/NN/application /,/, and/CC/and they/PRP/they may/MD/may change/VB/change over/IN/over time/NNP/time. for/IN/for these/DT/these reasons/NNS/reasons /,/, protection/NN/protection is/VBZ/is no/DT/no longer/NN/longer the/DT/the concern/NN/concern solely/RB/solely of/IN/of the/DT/the designer/NN/designer of/IN/of an/DT/an operating/NN/operating system/NNP/system. the/DT/the application/NN/application programmer/NN/programmer needs/VBZ/needs to/TO/to use/VB/use protection/NN/protection mechanisms/NNS/mechanisms as/IN/as well/RB/well /,/, to/TO/to guard/VB/guard resources/NNS/resources created/VBN/created and/CC/and supported/VBN/supported by/IN/by an/DT/an application/NN/application subsystem/NN/subsystem against/IN/against misuse/NNP/misuse. in/IN/in this/DT/this chapter/NN/chapter /,/, we/PRP/we describe/VBP/describe the/DT/the protection/NN/protection mechanisms/NNS/mechanisms the/DT/the operating/NN/operating system/NN/system should/MD/should provide/VB/provide /,/, but/CC/but application/NN/application designers/NNS/designers can/MD/can use/VB/use them/PRP/them as/IN/as well/RB/well in/IN/in designing/NN/designing their/PRP$/their own/JJ/own protection/NN/protection software/NN/software /./. note/NN/note that/IN/that mechanisms/NNS/mechanisms are/VBP/are distinct/JJ/distinct from/IN/from policies/NNP/policies. mechanisms/NNS/mechanisms determine/VBP/determine how/WRB/how something/NN/something will/MD/will be/VB/be done/VBN/done ;/:/; policies/NNS/policies decide/VBP/decide what/WP/what will/MD/will be/VB/be done/NNP/done. the/DT/the separation/NN/separation of/IN/of policy/NN/policy and/CC/and mechanism/NN/mechanism is/VBZ/is important/JJ/important for/IN/for flexibility/NNP/flexibility. policies/NNS/policies are/VBP/are likely/JJ/likely to/TO/to change/VB/change from/IN/from place/NN/place to/TO/to place/VB/place or/CC/or time/NN/time to/TO/to time/NNP/time. in/IN/in the/DT/the worst/JJS/worst case/NN/case /,/, every/DT/every change/NN/change in/IN/in policy/NN/policy would/MD/would require/VB/require a/DT/a change/NN/change in/IN/in the/DT/the underlying/VBG/underlying mechanism/NNP/mechanism. using/VBG/using general/JJ/general mechanisms/NNS/mechanisms enables/NNS/enables us/PRP/us to/TO/to avoid/VB/avoid such/JJ/such a/DT/a situation/NN/situation /./. frequently/RB/frequently /,/, a/DT/a guiding/NN/guiding principle/NN/principle can/MD/can be/VB/be used/VBN/used throughout/IN/throughout a/DT/a project/NN/project /,/, such/JJ/such as/IN/as the/DT/the design/NN/design of/IN/of an/DT/an operating/NN/operating system/NNP/system. following/VBG/following this/DT/this principle/NN/principle simplifies/VBZ/simplifies design/NN/design decisions/NNS/decisions and/CC/and keeps/NNS/keeps the/DT/the system/NN/system consistent/NN/consistent and/CC/and easy/JJ/easy to/TO/to understand/NNP/understand. a/DT/a key/JJ/key /,/, time-tested/JJ/time-tested guiding/NN/guiding principle/NN/principle for/IN/for protection/NN/protection is/VBZ/is the/DT/the it/PRP/it dictates/VBZ/dictates that/IN/that programs/NNS/programs /,/, users/NNS/users /,/, and/CC/and even/RB/even systems/NNS/systems be/VB/be given/VBN/given just/RB/just enough/RB/enough privileges/VBZ/privileges to/TO/to perform/NN/perform their/PRP$/their tasks/NNS/tasks /./. consider/NN/consider the/DT/the analogy/NN/analogy of/IN/of a/DT/a security/NN/security guard/NN/guard with/IN/with a/DT/a passkey/NNP/passkey. if/IN/if this/DT/this key/JJ/key allows/NNS/allows the/DT/the guard/NN/guard into/IN/into just/RB/just the/DT/the public/NN/public areas/NNS/areas that/WDT/that she/PRP/she guards/VBZ/guards /,/, then/RB/then misuse/VB/misuse of/IN/of the/DT/the key/JJ/key will/MD/will result/VB/result in/IN/in minimal/JJ/minimal damage/NNP/damage. if/IN/if /,/, however/RB/however /,/, the/DT/the passkey/NN/passkey allows/VBZ/allows access/NN/access to/TO/to all/DT/all areas/NNS/areas /,/, then/RB/then damage/NN/damage from/IN/from its/PRP$/its being/VBG/being lost/VBN/lost /,/, stolen/VBN/stolen /,/, misused/VBN/misused /,/, copied/VBN/copied /,/, or/CC/or otherwise/RB/otherwise compromised/VBN/compromised will/MD/will be/VB/be much/RB/much greater/JJR/greater /./. an/DT/an operating/NN/operating system/NN/system following/VBG/following the/DT/the principle/NN/principle of/IN/of least/JJS/least privilege/NN/privilege implements/NNS/implements its/PRP$/its features/NNS/features /,/, programs/NNS/programs /,/, system/NN/system calls/VBZ/calls /,/, and/CC/and data/NNS/data structures/NNS/structures so/RB/so that/IN/that failure/NN/failure or/CC/or compromise/VB/compromise of/IN/of a/DT/a component/NN/component does/VBZ/does the/DT/the minimum/JJ/minimum damage/NN/damage and/CC/and allows/VBZ/allows the/DT/the n1inimum/NNP/n1inimum damage/NN/damage to/TO/to be/VB/be done/NNP/done. the/DT/the overflow/NN/overflow of/IN/of a/DT/a buffer/NN/buffer in/IN/in a/DT/a system/NN/system daemon/NN/daemon might/MD/might cause/VB/cause the/DT/the daemon/NN/daemon process/NN/process to/TO/to fail/VB/fail /,/, for/IN/for example/NN/example /,/, but/CC/but should/MD/should not/RB/not allow/VB/allow the/DT/the execution/NN/execution of/IN/of code/NN/code from/IN/from the/DT/the daemon/NN/daemon process/NN/process 's/POS/'s stack/NN/stack that/IN/that would/MD/would enable/VB/enable a/DT/a remote/NN/remote 14.3/CD/14.3 14.3/CD/14.3 593/CD/593 user/NN/user to/TO/to gain/VB/gain maximum/NN/maximum privileges/NNS/privileges and/CC/and access/NN/access to/TO/to the/DT/the entire/JJ/entire system/NN/system /:/( as/IN/as happens/NNS/happens too/RB/too often/RB/often today/NN/today /:/) /./. such/JJ/such an/DT/an operating/NN/operating system/NN/system also/RB/also provides/VBZ/provides system/NN/system calls/VBZ/calls and/CC/and services/NNS/services that/WDT/that allow/VBP/allow applications/NNS/applications to/TO/to be/VB/be written/VBN/written with/IN/with fine-grained/JJ/fine-grained access/NN/access controls/NNP/controls. it/PRP/it provides/VBZ/provides mechanisms/NNS/mechanisms to/TO/to enable/JJ/enable privileges/NNS/privileges when/WRB/when they/PRP/they are/VBP/are needed/VBN/needed and/CC/and to/TO/to disable/JJ/disable them/PRP/them when/WRB/when they/PRP/they are/VBP/are not/RB/not needed/NNP/needed. also/RB/also beneficial/JJ/beneficial is/VBZ/is the/DT/the creation/NN/creation of/IN/of audit/NN/audit trails/NNS/trails for/IN/for all/DT/all privileged/JJ/privileged function/NN/function access/NNP/access. the/DT/the audit/NN/audit trail/NN/trail allows/VBZ/allows the/DT/the prograrnmer/NN/prograrnmer /,/, systems/NNS/systems administrator/NN/administrator /,/, or/CC/or law-enforcement/JJ/law-enforcement officer/NN/officer to/TO/to trace/VB/trace all/DT/all protection/NN/protection and/CC/and security/NN/security activities/NNS/activities on/IN/on the/DT/the system/NN/system /./. managing/VBG/managing users/NNS/users with/IN/with the/DT/the principle/NN/principle of/IN/of least/JJS/least privilege/NN/privilege entails/NNS/entails creating/VBG/creating a/DT/a separate/JJ/separate account/NN/account for/IN/for each/DT/each user/NN/user /,/, with/IN/with just/RB/just the/DT/the privileges/NNS/privileges that/WDT/that the/DT/the user/NN/user needs/NNP/needs. an/DT/an operator/NN/operator who/WP/who needs/VBZ/needs to/TO/to mount/VB/mount tapes/NNS/tapes and/CC/and back/RB/back up/IN/up files/NNS/files on/IN/on the/DT/the system/NN/system has/VBZ/has access/NN/access to/TO/to just/RB/just those/DT/those commands/NNS/commands and/CC/and files/NNS/files needed/VBD/needed to/TO/to accomplish/VB/accomplish the/DT/the job/NNP/job. some/DT/some systems/NNS/systems implement/VBP/implement role-based/JJ/role-based access/NN/access control/NN/control /:/( rbac/NN/rbac /:/) to/TO/to provide/VB/provide this/DT/this functionality/NN/functionality /./. computers/NNS/computers implemented/VBD/implemented in/IN/in a/DT/a computing/NN/computing facility/NN/facility under/IN/under the/DT/the principle/NN/principle of/IN/of least/JJS/least privilege/NN/privilege can/MD/can be/VB/be limited/VBN/limited to/TO/to running/NN/running specific/NN/specific services/NNS/services /,/, accessing/VBG/accessing specific/JJ/specific remote/NN/remote hosts/NNS/hosts via/IN/via specific/JJ/specific services/NNS/services /,/, and/CC/and doing/VBG/doing so/RB/so during/IN/during specific/JJ/specific times/NNP/times. typically/RB/typically /,/, these/DT/these restrictions/NNS/restrictions are/VBP/are implemented/VBN/implemented through/IN/through enabling/NN/enabling or/CC/or disabling/VBG/disabling each/DT/each service/NN/service and/CC/and through/IN/through using/VBG/using access/NN/access control/NN/control lists/NNS/lists /,/, as/IN/as described/VBN/described in/IN/in sections/NNS/sections 10.6.2/CD/10.6.2 and/CC/and 14.6/CD/14.6 /./. the/DT/the principle/NN/principle of/IN/of least/JJS/least privilege/NN/privilege can/MD/can help/VB/help produce/VB/produce a/DT/a more/RBR/more secure/JJ/secure computing/NN/computing environment/NNP/environment. unfortunately/RB/unfortunately /,/, it/PRP/it frequently/RB/frequently does/VBZ/does not/NNP/not. for/IN/for example/NN/example /,/, windows/VBZ/windows 2000/CD/2000 has/VBZ/has a/DT/a complex/JJ/complex protection/NN/protection scheme/NN/scheme at/IN/at its/PRP$/its core/NN/core and/CC/and yet/RB/yet has/VBZ/has many/JJ/many security/NN/security holes/NNP/holes. by/IN/by comparison/NN/comparison /,/, solaris/VBZ/solaris is/VBZ/is considered/VBN/considered relatively/RB/relatively secure/JJ/secure /,/, even/RB/even though/IN/though it/PRP/it is/VBZ/is a/DT/a variant/JJ/variant of/IN/of unix/NN/unix /,/, which/WDT/which historically/RB/historically was/VBD/was designed/VBN/designed with/IN/with little/JJ/little protection/NN/protection in/IN/in mind/NNP/mind. one/CD/one reason/NN/reason for/IN/for the/DT/the difference/NN/difference may/MD/may be/VB/be that/IN/that windows/NNS/windows 2000/CD/2000 has/VBZ/has more/JJR/more lines/NNS/lines of/IN/of code/NN/code and/CC/and more/JJR/more services/NNS/services than/IN/than solaris/NNS/solaris and/CC/and thus/RB/thus has/VBZ/has more/JJR/more to/TO/to secure/VB/secure and/CC/and protect/NNP/protect. another/DT/another reason/NN/reason could/MD/could be/VB/be that/IN/that the/DT/the protection/NN/protection scheme/NN/scheme in/IN/in windows/NNS/windows 2000/CD/2000 is/VBZ/is irtcomplete/JJ/irtcomplete or/CC/or protects/NNS/protects the/DT/the wrong/JJ/wrong aspects/NNS/aspects of/IN/of the/DT/the operating/NN/operating system/NN/system /,/, leaving/VBG/leaving other/JJ/other areas/NNS/areas vulnerable/JJ/vulnerable /./. a/DT/a computer/NN/computer system/NN/system is/VBZ/is a/DT/a collection/NN/collection of/IN/of processes/NNS/processes and/CC/and objects/NNP/objects. by/IN/by objects/NNS/objects /,/, we/PRP/we mean/VBP/mean both/DT/both /NNP/( such/JJ/such as/IN/as the/DT/the cpu/NN/cpu /,/, memory/NN/memory segments/NNS/segments /,/, printers/NNS/printers /,/, disks/NNS/disks /,/, and/CC/and tape/NN/tape drives/NNS/drives /:/) and/CC/and /:/( such/JJ/such as/IN/as files/NNS/files /,/, programs/NNS/programs /,/, and/CC/and semaphores/NNS/semaphores /:/) /./. each/DT/each object/NN/object has/VBZ/has a/DT/a unique/JJ/unique name/NN/name that/WDT/that differentiates/VBZ/differentiates it/PRP/it from/IN/from all/DT/all other/JJ/other objects/NNS/objects in/IN/in the/DT/the system/NN/system /,/, and/CC/and each/DT/each can/MD/can be/VB/be accessed/VBN/accessed only/RB/only through/IN/through well-defined/JJ/well-defined and/CC/and meaningful/JJ/meaningful operations/NNP/operations. objects/NNS/objects are/VBP/are essentially/RB/essentially abstract/JJ/abstract data/NNS/data types/NNS/types /./. the/DT/the operations/NNS/operations that/IN/that are/VBP/are possible/JJ/possible may/MD/may depend/VB/depend on/IN/on the/DT/the object/NNP/object. for/IN/for example/NN/example /,/, on/IN/on a/DT/a cpu/NN/cpu /,/, we/PRP/we can/MD/can only/RB/only execute/NNP/execute. memory/NN/memory segments/NNS/segments can/MD/can be/VB/be read/VBN/read and/CC/and written/VBN/written /,/, whereas/RB/whereas a/DT/a cd-rom/JJ/cd-rom or/CC/or dvd-rom/JJ/dvd-rom can/MD/can only/RB/only be/VB/be read/NNP/read. tape/NN/tape drives/NNS/drives can/MD/can be/VB/be read/VBN/read /,/, written/VBN/written /,/, and/CC/and rewound/NNP/rewound. data/NNS/data files/NNS/files can/MD/can be/VB/be created/VBN/created /,/, opened/VBN/opened /,/, read/RB/read /,/, written/VBN/written /,/, closed/VBD/closed /,/, and/CC/and deleted/VBD/deleted ;/:/; program/NN/program files/NNS/files can/MD/can be/VB/be read/VBN/read /,/, written/VBN/written /,/, executed/VBN/executed /,/, and/CC/and deleted/VBD/deleted /./. a/DT/a process/NN/process should/MD/should be/VB/be allowed/VBN/allowed to/TO/to access/NN/access only/RB/only those/DT/those resources/NNS/resources for/IN/for which/WDT/which it/PRP/it has/VBZ/has authorization/NNP/authorization. furthermore/IN/furthermore /,/, at/IN/at any/DT/any time/NN/time /,/, a/DT/a process/NN/process should/MD/should be/VB/be able/JJ/able to/TO/to access/NN/access only/RB/only those/DT/those reso1jrces/NNS/reso1jrces that/IN/that it/PRP/it currently/RB/currently reqllires/VBZ/reqllires to/TO/to complete/VB/complete its/PRP$/its task/NNP/task. this/DT/this second/JJ/second requirement/NN/requirement /,/, conunonly/RB/conunonly referred/VBD/referred to/TO/to as/IN/as the/DT/the need-to-know/NNP/need-to-know principle/NN/principle /,/, is/VBZ/is useful/JJ/useful in/IN/in limiting/NN/limiting the/DT/the amount/NN/amount of/IN/of damage/NN/damage a/DT/a faulty/NN/faulty process/NN/process can/MD/can cause/VB/cause in/IN/in the/DT/the system/NNP/system. for/IN/for example/NN/example /,/, when/WRB/when process/NN/process p/NN/p invokes/VBZ/invokes procedure/NN/procedure a/DT/a /NN/( /:/) /,/, the/DT/the procedure/NN/procedure should/MD/should be/VB/be 594/CD/594 chapter14/NNP/chapter14 allowed/VBD/allowed to/TO/to access/NN/access only/RB/only its/PRP$/its own/JJ/own variables/NNS/variables and/CC/and the/DT/the formal/JJ/formal parameters/NNS/parameters passed/VBD/passed to/TO/to it/PRP/it ;/:/; it/PRP/it should/MD/should not/RB/not be/VB/be able/JJ/able to/TO/to access/NN/access all/DT/all the/DT/the variables/NNS/variables of/IN/of process/NN/process p/NNP/p. similarly/RB/similarly /,/, consider/NN/consider the/DT/the case/NN/case in/IN/in which/WDT/which process/NN/process p/NN/p invokes/VBZ/invokes a/DT/a compiler/NN/compiler to/TO/to compile/VB/compile a/DT/a particular/JJ/particular file/NNP/file. the/DT/the compiler/NN/compiler should/MD/should not/RB/not be/VB/be able/JJ/able to/TO/to access/NN/access files/NNS/files arbitrarily/RB/arbitrarily but/CC/but should/MD/should have/VB/have access/NN/access only/RB/only to/TO/to a/DT/a well-defined/JJ/well-defined subset/NN/subset of/IN/of files/NNS/files /:/( such/JJ/such as/IN/as the/DT/the source/NN/source file/NN/file /,/, listing/NN/listing file/NN/file /,/, and/CC/and so/RB/so on/IN/on /NNP/) related/JJ/related to/TO/to the/DT/the file/NN/file to/TO/to be/VB/be compiled/NNP/compiled. conversely/RB/conversely /,/, the/DT/the compiler/NN/compiler may/MD/may have/VB/have private/JJ/private files/NNS/files used/VBN/used for/IN/for accounting/NN/accounting or/CC/or optimization/NN/optimization purposes/NNS/purposes that/WDT/that process/NN/process p/VBP/p should/MD/should not/RB/not be/VB/be able/JJ/able to/TO/to access/NNP/access. the/DT/the need-to-know/NNP/need-to-know principle/NN/principle is/VBZ/is similar/JJ/similar to/TO/to the/DT/the principle/NN/principle of/IN/of least/JJS/least privilege/NN/privilege discussed/VBD/discussed in/IN/in section/NN/section 14.2/CD/14.2 in/IN/in that/DT/that the/DT/the goals/NNS/goals of/IN/of protection/NN/protection are/VBP/are to/TO/to minimize/VB/minimize the/DT/the risks/NNS/risks of/IN/of possible/JJ/possible security/NN/security violations/NNS/violations /./. 14.3.1/CD/14.3.1 domain/NN/domain structure/NN/structure to/TO/to facilitate/VB/facilitate the/DT/the scheme/NN/scheme just/RB/just described/VBN/described /,/, a/DT/a process/NN/process operates/VBZ/operates within/IN/within a/DT/a which/WDT/which specifies/NNS/specifies the/DT/the resources/NNS/resources that/WDT/that the/DT/the process/NN/process may/MD/may access/NNP/access. each/DT/each domain/NN/domain defines/VBZ/defines a/DT/a set/NN/set of/IN/of objects/NNS/objects and/CC/and the/DT/the types/NNS/types of/IN/of operations/NNS/operations that/WDT/that may/MD/may be/VB/be invoked/VBN/invoked on/IN/on each/DT/each object/NNP/object. the/DT/the ability/NN/ability to/TO/to execute/VB/execute an/DT/an operation/NN/operation on/IN/on an/DT/an object/NN/object is/VBZ/is an/DT/an a/DT/a domain/NN/domain is/VBZ/is a/DT/a collection/NN/collection of/IN/of access/NN/access rights/NNS/rights /,/, each/DT/each of/IN/of which/WDT/which is/VBZ/is an/DT/an ordered/VBN/ordered pair/NN/pair object-name/-NONE-/object-name /,/, rights-set/JJ/rights-set /./. for/IN/for example/NN/example /,/, if/IN/if domain/NN/domain d/NN/d has/VBZ/has the/DT/the access/NN/access right/RB/right file/JJ/file f/NN/f /,/, /:/{ read/NN/read /,/, write/JJ/write /NN/} /,/, then/RB/then a/DT/a process/NN/process executing/VBG/executing in/IN/in domain/NN/domain d/NN/d can/MD/can both/DT/both read/VB/read and/CC/and write/VB/write file/JJ/file f/NN/f ;/:/; it/PRP/it can/MD/can not/RB/not /,/, however/RB/however /,/, perform/NN/perform any/DT/any other/JJ/other operation/NN/operation on/IN/on that/DT/that object/NN/object /./. domains/NNS/domains do/VBP/do not/RB/not need/VB/need to/TO/to be/VB/be disjoint/JJ/disjoint ;/:/; they/PRP/they may/MD/may share/VB/share access/NN/access rights/NNP/rights. for/IN/for example/NN/example /,/, in/IN/in figure/NN/figure 14.1/CD/14.1 /,/, we/PRP/we have/VBP/have three/CD/three domains/NNS/domains /:/: d1/NNP/d1 /,/, d2/NNP/d2 /,/, and/CC/and d3/NNP/d3 /./. the/DT/the access/NN/access right/RB/right 0/-NONE-/0 4/CD/4 /,/, /:/{ print/NN/print /:/} is/VBZ/is shared/VBN/shared by/IN/by d2/NNP/d2 and/CC/and d3/NNP/d3 /,/, implying/VBG/implying that/IN/that a/DT/a process/NN/process executing/VBG/executing in/IN/in either/DT/either of/IN/of these/DT/these two/CD/two domains/NNS/domains can/MD/can print/VB/print object/NN/object 0/-NONE-/0 4/CD/4 /./. note/NN/note that/IN/that a/DT/a process/NN/process must/MD/must be/VB/be executing/VBG/executing in/IN/in domain/NN/domain d1/NNP/d1 to/TO/to read/VB/read and/CC/and write/VB/write object/JJ/object 0/-NONE-/0 1/CD/1 /,/, while/IN/while only/RB/only processes/VBZ/processes in/IN/in domain/NN/domain d3/NNP/d3 may/MD/may execute/VB/execute object/NN/object 0/-NONE-/0 1/CD/1 /./. the/DT/the association/NN/association between/IN/between a/DT/a process/NN/process and/CC/and a/DT/a domain/NN/domain may/MD/may be/VB/be either/RB/either if/IN/if the/DT/the set/NN/set of/IN/of resources/NNS/resources available/JJ/available to/TO/to the/DT/the process/NN/process is/VBZ/is fixed/VBN/fixed throughout/IN/throughout the/DT/the process/NN/process 's/POS/'s lifetime/NN/lifetime /,/, or/CC/or as/IN/as might/MD/might be/VB/be expected/VBN/expected /,/, establishing/NN/establishing dynamic/JJ/dynamic protection/NN/protection domains/NNS/domains is/VBZ/is more/RBR/more complicated/JJ/complicated than/IN/than establishing/NN/establishing static/JJ/static protection/NN/protection domains/NNS/domains /./. if/IN/if the/DT/the association/NN/association between/IN/between processes/NNS/processes and/CC/and domains/NNS/domains is/VBZ/is fixed/VBN/fixed /,/, and/CC/and we/PRP/we want/VBP/want to/TO/to adhere/VB/adhere to/TO/to the/DT/the need-to-know/JJ/need-to-know principle/NN/principle /,/, then/RB/then a/DT/a mechanism/NN/mechanism must/MD/must be/VB/be available/JJ/available to/TO/to change/VB/change the/DT/the content/NN/content of/IN/of a/DT/a domain/NNP/domain. the/DT/the reason/NN/reason stems/NNS/stems from/IN/from the/DT/the fact/NN/fact that/IN/that a/DT/a process/NN/process may/MD/may execute/VB/execute in/IN/in two/CD/two different/JJ/different phases/NNS/phases and/CC/and may/MD/may /,/, for/IN/for example/NN/example /,/, need/VBP/need read/VBN/read access/NN/access in/IN/in one/CD/one phase/NN/phase and/CC/and write/VB/write access/NN/access in/IN/in another/NNP/another. if/IN/if a/DT/a domain/NN/domain is/VBZ/is static/JJ/static /,/, we/PRP/we must/MD/must define/VB/define the/DT/the domain/NN/domain to/TO/to include/VB/include both/DT/both read/NN/read and/CC/and write/VB/write access/NNP/access. however/RB/however /,/, this/DT/this arrangement/NN/arrangement provides/VBZ/provides more/JJR/more rights/NNS/rights than/IN/than are/VBP/are needed/VBN/needed in/IN/in each/DT/each of/IN/of the/DT/the two/CD/two phases/NNS/phases /,/, since/IN/since we/PRP/we have/VBP/have read/VBN/read access/NN/access in/IN/in the/DT/the phase/NN/phase where/WRB/where we/PRP/we need/VBP/need only/RB/only write/JJ/write access/NN/access /,/, and/CC/and vice/NN/vice versa/NN/versa /./. thus/RB/thus /,/, the/DT/the need-to-know/JJ/need-to-know principle/NN/principle is/VBZ/is violated/NNP/violated. we/PRP/we must/MD/must allow/VB/allow the/DT/the contents/NNS/contents of/IN/of 0/-NONE-/0 3/CD/3 /,/, /:/{ read/NN/read /,/, write/JJ/write /NN/} 0/-NONE-/0 1/CD/1,. /:/{ read/JJ/read /,/, write/JJ/write /NN/} 0/-NONE-/0 2/CD/2 /,/, /:/{ execute/NN/execute /:/} 0/-NONE-/0 2/CD/2 /,/, /:/{ write/JJ/write /NN/} 01/CD/01 /,/, /:/{ execute/NN/execute /:/} 0/-NONE-/0 3/CD/3 /,/, /:/{ read/NN/read /:/} figure/NN/figure 14.1/CD/14.1 system/NN/system with/IN/with three/CD/three protection/NN/protection domains/NNS/domains /./. 14.3/CD/14.3 595/CD/595 a/DT/a domain/NN/domain to/TO/to be/VB/be modified/VBN/modified so/RB/so that/IN/that the/DT/the domain/NN/domain always/RB/always reflects/VBZ/reflects the/DT/the n1inimum/NNP/n1inimum necessary/JJ/necessary access/NN/access rights/NNS/rights /./. if/IN/if the/DT/the association/NN/association is/VBZ/is dynamic/JJ/dynamic /,/, a/DT/a mechanism/NN/mechanism is/VBZ/is available/JJ/available to/TO/to allow/VB/allow enabling/NN/enabling the/DT/the process/NN/process to/TO/to switch/VB/switch from/IN/from one/CD/one domain/NN/domain to/TO/to another/NNP/another. we/PRP/we may/MD/may also/RB/also want/VB/want to/TO/to allow/VB/allow the/DT/the content/NN/content of/IN/of a/DT/a domain/NN/domain to/TO/to be/VB/be changed/NNP/changed. if/IN/if we/PRP/we can/MD/can not/RB/not change/VB/change the/DT/the content/NN/content of/IN/of a/DT/a domain/NN/domain /,/, we/PRP/we can/MD/can provide/VB/provide the/DT/the same/JJ/same effect/NN/effect by/IN/by creating/NN/creating a/DT/a new/JJ/new domain/NN/domain with/IN/with the/DT/the changed/VBN/changed content/NN/content and/CC/and switching/VBG/switching to/TO/to that/DT/that new/JJ/new domain/NN/domain when/WRB/when we/PRP/we want/VBP/want to/TO/to change/VB/change the/DT/the domain/NN/domain content/NN/content /./. a/DT/a domain/NN/domain can/MD/can be/VB/be realized/VBN/realized in/IN/in a/DT/a variety/NN/variety of/IN/of ways/NNS/ways /:/: each/DT/each user/NN/user may/MD/may be/VB/be a/DT/a domain/NNP/domain. in/IN/in this/DT/this case/NN/case /,/, the/DT/the set/NN/set of/IN/of objects/NNS/objects that/WDT/that can/MD/can be/VB/be accessed/VBN/accessed depends/NNS/depends on/IN/on the/DT/the identity/NN/identity of/IN/of the/DT/the user/NNP/user. domain/NN/domain switching/VBG/switching occurs/NNS/occurs when/WRB/when the/DT/the user/NN/user is/VBZ/is changed/VBN/changed -generally/RB/-generally when/WRB/when one/CD/one user/NN/user logs/NNS/logs out/IN/out and/CC/and another/DT/another user/NN/user logs/NNS/logs in/IN/in /./. each/DT/each process/NN/process may/MD/may be/VB/be a/DT/a domain/NNP/domain. in/IN/in this/DT/this case/NN/case /,/, the/DT/the set/NN/set of/IN/of objects/NNS/objects that/WDT/that can/MD/can be/VB/be accessed/VBN/accessed depends/NNS/depends on/IN/on the/DT/the identity/NN/identity of/IN/of the/DT/the process/NNP/process. domain/NN/domain switching/VBG/switching occurs/NNS/occurs when/WRB/when one/CD/one process/NN/process sends/NNS/sends a/DT/a message/NN/message to/TO/to another/DT/another process/NN/process and/CC/and then/RB/then waits/VBZ/waits for/IN/for a/DT/a response/NN/response /./. each/DT/each procedure/NN/procedure may/MD/may be/VB/be a/DT/a domain/NNP/domain. in/IN/in this/DT/this case/NN/case /,/, the/DT/the set/NN/set of/IN/of objects/NNS/objects that/WDT/that can/MD/can be/VB/be accessed/VBN/accessed corresponds/NNS/corresponds to/TO/to the/DT/the local/JJ/local variables/NNS/variables defined/VBN/defined within/IN/within the/DT/the procedure/NN/procedure /./. domain/NN/domain switching/VBG/switching occurs/NNS/occurs when/WRB/when a/DT/a procedure/NN/procedure call/NN/call is/VBZ/is made/VBN/made /./. we/PRP/we discuss/VBZ/discuss domain/NN/domain switching/VBG/switching in/IN/in greater/JJR/greater detail/NN/detail in/IN/in section/NN/section 14.4/CD/14.4 /./. consider/NN/consider the/DT/the standard/JJ/standard dual-mode/JJ/dual-mode /NN/( monitor-user/NN/monitor-user mode/NN/mode /:/) model/NN/model of/IN/of operating-system/JJ/operating-system execution/NNP/execution. when/WRB/when a/DT/a process/NN/process executes/VBZ/executes in/IN/in monitor/NN/monitor mode/NN/mode /,/, it/PRP/it can/MD/can execute/VB/execute privileged/VBN/privileged instructions/NNS/instructions and/CC/and thus/RB/thus gain/VB/gain complete/JJ/complete control/NN/control of/IN/of the/DT/the computer/NN/computer system/NNP/system. in/IN/in contrast/NN/contrast /,/, when/WRB/when a/DT/a process/NN/process executes/VBZ/executes in/IN/in user/NN/user mode/NN/mode /,/, it/PRP/it can/MD/can invoke/VB/invoke only/RB/only nonprivileged/VBN/nonprivileged instructions/NNP/instructions. consequently/RB/consequently /,/, it/PRP/it can/MD/can execute/VB/execute only/RB/only within/IN/within its/PRP$/its predefined/VBN/predefined memory/NN/memory space/NNP/space. these/DT/these two/CD/two modes/NNS/modes protect/VBP/protect the/DT/the operating/NN/operating system/NN/system /:/( executing/VBG/executing in/IN/in monitor/NN/monitor domain/NN/domain /:/) from/IN/from the/DT/the user/NN/user processes/NNS/processes /:/( executing/VBG/executing in/IN/in user/NN/user domain/NN/domain /:/) /./. in/IN/in a/DT/a multiprogrammed/VBN/multiprogrammed operating/NN/operating system/NN/system /,/, two/CD/two protection/NN/protection domains/NNS/domains are/VBP/are insufficient/JJ/insufficient /,/, since/IN/since users/NNS/users also/RB/also want/VBP/want to/TO/to be/VB/be protected/VBN/protected from/IN/from one/CD/one another/NNP/another. therefore/RB/therefore /,/, a/DT/a more/RBR/more elaborate/JJ/elaborate scheme/NN/scheme is/VBZ/is needed/NNP/needed. we/PRP/we illustrate/VBP/illustrate such/JJ/such a/DT/a scheme/NN/scheme by/IN/by examining/NN/examining two/CD/two influential/JJ/influential operating/NN/operating systems-unix/NN/systems-unix and/CC/and multics/NNS/multics -to/-NONE-/-to see/VBP/see how/WRB/how they/PRP/they implement/VBP/implement these/DT/these concepts/NNS/concepts /./. 14.3.2/CD/14.3.2 an/DT/an example/NN/example /:/: unix/NN/unix in/IN/in the/DT/the unix/NN/unix operating/NN/operating system/NN/system /,/, a/DT/a domain/NN/domain is/VBZ/is associated/VBN/associated with/IN/with the/DT/the user/NNP/user. switching/NN/switching the/DT/the domain/NN/domain corresponds/NNS/corresponds to/TO/to changing/VBG/changing the/DT/the user/NN/user identification/NN/identification temporarily/RB/temporarily /./. this/DT/this change/NN/change is/VBZ/is accomplished/VBN/accomplished tbough/IN/tbough the/DT/the file/NN/file system/NN/system as/IN/as follows/NNP/follows. an/DT/an owner/NN/owner identification/NN/identification and/CC/and a/DT/a domain/NN/domain bit/NN/bit /:/( known/VBN/known as/IN/as the/DT/the setuid/NN/setuid bit/NN/bit /:/) are/VBP/are associated/VBN/associated with/IN/with each/DT/each file/NNP/file. when/WRB/when the/DT/the setuid/NN/setuid bit/NN/bit is/VBZ/is on/IN/on /,/, and/CC/and a/DT/a user/NN/user executes/VBZ/executes that/IN/that file/JJ/file /,/, the/DT/the user/NN/user id/VBD/id is/VBZ/is set/VBN/set to/TO/to that/DT/that of/IN/of the/DT/the owner/NN/owner of/IN/of the/DT/the file/NN/file ;/:/; when/WRB/when the/DT/the bit/NN/bit is/VBZ/is off/RP/off /,/, however/RB/however /,/, the/DT/the user/NN/user id/VBD/id does/VBZ/does not/RB/not change/NNP/change. for/IN/for example/NN/example /,/, when/WRB/when a/DT/a user/NN/user a/DT/a /NN/( that/WDT/that is/VBZ/is /,/, a/DT/a user/NN/user with/IN/with userid/JJ/userid =/NN/= a/DT/a /NN/) starts/VBZ/starts executing/VBG/executing a/DT/a file/NN/file owned/VBN/owned by/IN/by b/NN/b /,/, whose/WP$/whose associated/VBN/associated domain/NN/domain bit/NN/bit is/VBZ/is off/RP/off /,/, the/DT/the userid/NN/userid of/IN/of the/DT/the process/NN/process is/VBZ/is set/VBN/set to/TO/to a/NNP/a. when/WRB/when the/DT/the setuid/NN/setuid bit/NN/bit is/VBZ/is on/IN/on /,/, the/DT/the userid/NN/userid is/VBZ/is set/VBN/set to/TO/to that/DT/that of/IN/of the/DT/the owner/NN/owner of/IN/of the/DT/the file/NN/file /:/: b/NNP/b. when/WRB/when the/DT/the process/NN/process exits/VBZ/exits /,/, this/DT/this temporary/JJ/temporary userid/NN/userid change/NN/change ends/NNS/ends /./. 596/CD/596 chapter/NN/chapter 14/CD/14 other/JJ/other methods/NNS/methods are/VBP/are used/VBN/used to/TO/to change/VB/change domains/NNS/domains in/IN/in operating/NN/operating systems/NNS/systems in/IN/in which/WDT/which user/NN/user ids/VBZ/ids are/VBP/are used/VBN/used for/IN/for domain/NN/domain definition/NN/definition /,/, because/IN/because almost/RB/almost all/DT/all systems/NNS/systems need/VBP/need to/TO/to provide/VB/provide such/JJ/such a/DT/a mechanism/NNP/mechanism. this/DT/this mechanism/NN/mechanism is/VBZ/is used/VBN/used when/WRB/when an/DT/an otherwise/NN/otherwise privileged/VBD/privileged facility/NN/facility needs/NNS/needs to/TO/to be/VB/be made/VBN/made available/JJ/available to/TO/to the/DT/the general/JJ/general user/NN/user population/NN/population /./. for/IN/for instance/NN/instance /,/, it/PRP/it might/MD/might be/VB/be desirable/JJ/desirable to/TO/to allow/VB/allow users/NNS/users to/TO/to access/NN/access a/DT/a network/NN/network without/IN/without letting/NN/letting them/PRP/them write/VBP/write their/PRP$/their own/JJ/own networking/NN/networking programs/NNP/programs. in/IN/in such/JJ/such a/DT/a case/NN/case /,/, on/IN/on a/DT/a unix/NN/unix system/NN/system /,/, the/DT/the setuid/NN/setuid bit/NN/bit on/IN/on a/DT/a networking/NN/networking program/NNP/program. would/MD/would be/VB/be set/VBN/set /,/, causing/VBG/causing the/DT/the user/NN/user ld/NN/ld to/TO/to change/VB/change when/WRB/when the/DT/the program/NN/program was/VBD/was run/NNP/run. the/DT/the user/NN/user ld/NN/ld would/MD/would change/VB/change to/TO/to that/DT/that of/IN/of a/DT/a user/NN/user with/IN/with network/NN/network access/NN/access privilege/NN/privilege /:/( such/JJ/such as/IN/as root/NN/root /,/, the/DT/the most/RBS/most powerful/JJ/powerful user/NN/user id/VBD/id /CD/) /./. one/CD/one problem/NN/problem with/IN/with this/DT/this method/NN/method is/VBZ/is that/IN/that if/IN/if a/DT/a user/NN/user manages/NNS/manages to/TO/to create/VB/create a/DT/a file/NN/file with/IN/with user/NN/user id/VBD/id root/NN/root and/CC/and with/IN/with its/PRP$/its setuid/JJ/setuid bit/NN/bit on/IN/on /,/, that/IN/that user/NN/user can/MD/can become/VB/become root/NN/root and/CC/and do/VBP/do anything/NN/anything and/CC/and everything/NN/everything on/IN/on the/DT/the system/NNP/system. the/DT/the setuid/NN/setuid mechanism/NN/mechanism is/VBZ/is discussed/VBN/discussed further/JJ/further in/IN/in appendix/NN/appendix a/DT/a /./. an/DT/an alternative/NN/alternative to/TO/to this/DT/this method/NN/method used/VBD/used in/IN/in other/JJ/other operating/NN/operating systems/NNS/systems is/VBZ/is to/TO/to place/NN/place privileged/VBD/privileged programs/NNS/programs in/IN/in a/DT/a special/JJ/special directory/NNP/directory. the/DT/the operating/NN/operating system/NN/system would/MD/would be/VB/be designed/VBN/designed to/TO/to change/VB/change the/DT/the user/NN/user ld/NN/ld of/IN/of any/DT/any program/NN/program run/NN/run from/IN/from this/DT/this directory/NN/directory /,/, either/DT/either to/TO/to the/DT/the equivalent/NN/equivalent of/IN/of root/NN/root or/CC/or to/TO/to the/DT/the user/NN/user ld/NN/ld of/IN/of the/DT/the owner/NN/owner of/IN/of the/DT/the directory/NNP/directory. this/DT/this eliminates/VBZ/eliminates one/CD/one security/NN/security problem/NN/problem with/IN/with setuid/JJ/setuid programs/NNS/programs in/IN/in which/WDT/which crackers/NNS/crackers create/VBP/create and/CC/and hide/VB/hide such/JJ/such programs/NNS/programs for/IN/for later/JJ/later use/NN/use /:/( using/VBG/using obscure/NN/obscure file/NN/file or/CC/or directory/NN/directory names/NNS/names /:/) /./. this/DT/this method/NN/method is/VBZ/is less/JJR/less flexible/JJ/flexible than/IN/than that/DT/that used/VBN/used in/IN/in unix/NN/unix /,/, however/RB/however /./. even/RB/even more/RBR/more restrictive/JJ/restrictive /,/, and/CC/and thus/RB/thus more/RBR/more protective/JJ/protective /,/, are/VBP/are systems/NNS/systems that/IN/that simply/RB/simply do/VBP/do not/RB/not allow/VB/allow a/DT/a change/NN/change of/IN/of user/NN/user id/NNP/id. in/IN/in these/DT/these instances/NNS/instances /,/, special/JJ/special techniques/NNS/techniques must/MD/must be/VB/be used/VBN/used to/TO/to allow/VB/allow users/NNS/users access/NN/access to/TO/to privileged/JJ/privileged facilities/NNP/facilities. for/IN/for instance/NN/instance /,/, a/DT/a may/MD/may be/VB/be started/VBN/started at/IN/at boot/NN/boot time/NN/time and/CC/and run/VBP/run as/IN/as a/DT/a special/JJ/special user/NN/user id/NNP/id. users/NNS/users then/RB/then run/VBN/run a/DT/a separate/JJ/separate program/NN/program /,/, which/WDT/which sends/NNS/sends requests/VBZ/requests to/TO/to this/DT/this process/NN/process whenever/NN/whenever they/PRP/they need/VBP/need to/TO/to use/VB/use the/DT/the facility/NNP/facility. this/DT/this method/NN/method is/VBZ/is used/VBN/used by/IN/by the/DT/the tops-20/NNP/tops-20 operating/NN/operating system/NN/system /./. in/IN/in any/DT/any of/IN/of these/DT/these systems/NNS/systems /,/, great/JJ/great care/NN/care must/MD/must be/VB/be taken/VBN/taken in/IN/in writing/NN/writing privileged/VBD/privileged programs/NNP/programs. any/DT/any oversight/NN/oversight can/MD/can result/VB/result in/IN/in a/DT/a total/NN/total lack/NN/lack of/IN/of protection/NN/protection on/IN/on the/DT/the system/NN/system /./. generally/RB/generally /,/, these/DT/these programs/NNS/programs are/VBP/are the/DT/the first/JJ/first to/TO/to be/VB/be attacked/VBN/attacked by/IN/by people/NNS/people trying/VBG/trying to/TO/to break/VB/break into/IN/into a/DT/a system/NN/system ;/:/; unfortunately/RB/unfortunately /,/, the/DT/the attackers/NNS/attackers are/VBP/are frequently/RB/frequently successful/JJ/successful /./. for/IN/for example/NN/example /,/, security/NN/security has/VBZ/has been/VBN/been breached/VBN/breached on/IN/on many/JJ/many unix/NN/unix systems/NNS/systems because/IN/because of/IN/of the/DT/the setuid/NN/setuid feature/NNP/feature. we/PRP/we discuss/VBZ/discuss security/NN/security in/IN/in chapter/NN/chapter 15/CD/15 /./. 14.3.3/CD/14.3.3 an/DT/an example/NN/example /:/: mul/NN/mul tics/NNS/tics in/IN/in the/DT/the multics/NNS/multics system/NN/system /,/, the/DT/the protection/NN/protection domains/VBZ/domains are/VBP/are organized/VBN/organized hierarchically/RB/hierarchically into/IN/into a/DT/a ring/JJ/ring structure/NNP/structure. each/DT/each ring/VBG/ring corresponds/NNS/corresponds to/TO/to a/DT/a single/JJ/single domain/NN/domain /:/( figure/NN/figure 14.2/CD/14.2 /CD/) /./. the/DT/the rings/NNS/rings are/VBP/are numbered/VBN/numbered from/IN/from 0/-NONE-/0 to/TO/to 7/CD/7. let/VB/let d/JJ/d ;/:/; and/CC/and dj/NN/dj be/VB/be any/DT/any two/CD/two domain/NN/domain rings/NNS/rings /./. if/IN/if j/NN/j i/PRP/i /,/, then/RB/then d/VBD/d ;/:/; is/VBZ/is a/DT/a subset/NN/subset of/IN/of dj/NNP/dj- that/IN/that is/VBZ/is /,/, a/DT/a process/NN/process executing/VBG/executing in/IN/in domain/NN/domain dj/NN/dj has/VBZ/has more/JJR/more privileges/NNS/privileges than/IN/than does/NNS/does a/DT/a process/NN/process executing/VBG/executing in/IN/in domain/NN/domain d/NN/d ;/:/; /./. a/DT/a process/NN/process executing/VBG/executing in/IN/in domain/NN/domain do/VBP/do has/VBZ/has the/DT/the most/RBS/most privileges/NNP/privileges. if/IN/if only/RB/only two/CD/two rings/NNS/rings exist/VBP/exist /,/, this/DT/this scheme/NN/scheme is/VBZ/is equivalent/JJ/equivalent to/TO/to the/DT/the monitor-user/JJ/monitor-user n1ode/NNP/n1ode of/IN/of execution/NN/execution /,/, where/WRB/where monitor/NN/monitor mode/NN/mode corresponds/NNS/corresponds to/TO/to do/VB/do and/CC/and user/VB/user mode/NN/mode corresponds/NNS/corresponds to/TO/to d1/NNP/d1 /./. multics/NNS/multics has/VBZ/has a/DT/a segmented/VBN/segmented address/NN/address space/NN/space ;/:/; each/DT/each segment/NN/segment is/VBZ/is a/DT/a file/NN/file /,/, and/CC/and each/DT/each segment/NN/segment is/VBZ/is associated/VBN/associated with/IN/with one/CD/one of/IN/of the/DT/the rings/NNP/rings. a/DT/a segm.ent/JJ/segm.ent description/NN/description includes/VBZ/includes an/DT/an entry/NN/entry that/IN/that identifies/NNS/identifies the/DT/the ring/VBG/ring number/NNP/number. in/IN/in addition/NN/addition /,/, it/PRP/it includes/VBZ/includes three/CD/three access/NN/access bits/NNS/bits to/TO/to control/NN/control reading/NN/reading /,/, writing/VBG/writing /,/, and/CC/and execution/NNP/execution. the/DT/the association/NN/association between/IN/between segments/NNS/segments and/CC/and rings/NNS/rings is/VBZ/is a/DT/a policy/NN/policy decision/NN/decision with/IN/with which/WDT/which we/PRP/we are/VBP/are not/RB/not concerned/VBN/concerned here/RB/here /./. a/DT/a current-ring-number/JJ/current-ring-number counter/NN/counter is/VBZ/is associated/VBN/associated with/IN/with each/DT/each process/NN/process /,/, identifying/VBG/identifying the/DT/the ring/VBG/ring in/IN/in which/WDT/which the/DT/the process/NN/process is/VBZ/is executing/VBG/executing currently/NNP/currently. when/WRB/when a/DT/a process/NN/process is/VBZ/is executing/VBG/executing 14.3/CD/14.3 597/CD/597 figure/NN/figure 14.2/CD/14.2 multics/NNS/multics ring/VBG/ring structure/NN/structure /./. in/IN/in ring/NN/ring i/PRP/i /,/, it/PRP/it cmmot/VBD/cmmot access/NN/access a/DT/a segment/NN/segment associated/VBN/associated with/IN/with ring/NN/ring j/NN/j /:/( j/NN/j i/PRP/i /VBP/) /./. it/PRP/it can/MD/can access/VB/access a/DT/a segment/NN/segment associated/VBN/associated with/IN/with ring/NN/ring k/NN/k /:/( k/NN/k /:/: /:/: /:/: i/PRP/i /VBP/) /./. the/DT/the type/NN/type of/IN/of access/NN/access /,/, however/RB/however /,/, is/VBZ/is restricted/VBN/restricted according/VBG/according to/TO/to the/DT/the access/NN/access bits/VBZ/bits associated/VBN/associated with/IN/with that/DT/that segment/NN/segment /./. domain/NN/domain switching/VBG/switching in/IN/in multics/NNS/multics occurs/NNS/occurs when/WRB/when a/DT/a process/NN/process crosses/VBZ/crosses from/IN/from one/CD/one ring/VBG/ring to/TO/to another/DT/another by/IN/by calling/NN/calling a/DT/a procedure/NN/procedure in/IN/in a/DT/a different/JJ/different ring/NNP/ring. obviously/RB/obviously /,/, this/DT/this switch/NN/switch must/MD/must be/VB/be done/VBN/done in/IN/in a/DT/a controlled/JJ/controlled mmmer/NN/mmmer ;/:/; otherwise/NN/otherwise /,/, a/DT/a process/NN/process could/MD/could start/VB/start executing/VBG/executing in/IN/in ring/NN/ring 0/-NONE-/0 /,/, and/CC/and no/DT/no protection/NN/protection would/MD/would be/VB/be provided/NNP/provided. to/TO/to allow/VB/allow controlled/JJ/controlled domain/NN/domain switching/VBG/switching /,/, we/PRP/we modify/VBP/modify the/DT/the ring/VBG/ring field/NN/field of/IN/of the/DT/the segment/NN/segment descriptor/NN/descriptor to/TO/to include/VB/include the/DT/the following/VBG/following /:/: access/NN/access bracket/NNP/bracket. a/DT/a pair/NN/pair of/IN/of integers/NNS/integers /,/, bl/NN/bl and/CC/and b2/NNP/b2 /,/, such/JJ/such that/IN/that bl/NN/bl /:/: /:/: =/:/= /:/: b2/NNP/b2 /./. limit/NNP/limit. an/DT/an integer/NN/integer b3/NNP/b3 such/JJ/such that/IN/that b3/NNP/b3 b2/NNP/b2 /./. list/NN/list of/IN/of gates/NNP/gates. identifies/NNS/identifies the/DT/the entry/NN/entry points/NNS/points /:/( or/CC/or may/MD/may be/VB/be called/VBN/called /./. at/IN/at which/WDT/which the/DT/the segments/NNS/segments if/IN/if a/DT/a process/NN/process executing/VBG/executing in/IN/in ring/NN/ring i/PRP/i calls/VBZ/calls a/DT/a procedure/NN/procedure /:/( or/CC/or segncent/NN/segncent /:/) with/IN/with access/NN/access bracket/NN/bracket /:/( bl,b2/-NONE-/bl,b2 /:/) /,/, then/RB/then the/DT/the call/NN/call is/VBZ/is allowed/VBN/allowed if/IN/if bl/NN/bl /:/: /:/: =/:/= /:/: i/PRP/i /:/: /:/: =/:/= /:/: b2/NNP/b2 /,/, and/CC/and the/DT/the current/JJ/current ring/NN/ring number/NN/number of/IN/of the/DT/the process/NN/process remains/VBZ/remains i/NNP/i. otherwise/RB/otherwise /,/, a/DT/a trap/NN/trap to/TO/to the/DT/the operating/NN/operating system/NN/system occurs/NNS/occurs /,/, and/CC/and the/DT/the situation/NN/situation is/VBZ/is handled/VBN/handled as/RB/as follows/VBZ/follows /:/: if/IN/if i/PRP/i bl/VBP/bl /,/, then/RB/then the/DT/the call/NN/call is/VBZ/is allowed/VBN/allowed to/TO/to occur/VB/occur /,/, because/IN/because we/PRP/we have/VBP/have a/DT/a transfer/NN/transfer to/TO/to a/DT/a ring/NN/ring /:/( or/CC/or domain/VB/domain /CD/) with/IN/with fewer/JJR/fewer privileges/NNP/privileges. however/RB/however /,/, if/IN/if parameters/NNS/parameters are/VBP/are passed/VBN/passed that/IN/that refer/NN/refer to/TO/to segments/NNS/segments in/IN/in a/DT/a lower/JJR/lower ring/VBG/ring /:/( that/IN/that is/VBZ/is /,/, segments/NNS/segments not/RB/not accessible/JJ/accessible to/TO/to the/DT/the called/VBN/called procedure/NN/procedure /:/) /,/, then/RB/then these/DT/these segments/NNS/segments must/MD/must be/VB/be copied/VBN/copied into/IN/into an/DT/an area/NN/area that/IN/that can/MD/can be/VB/be accessed/VBN/accessed by/IN/by the/DT/the called/VBN/called procedure/NN/procedure /./. if/IN/if i/PRP/i b2/NNP/b2 /,/, then/RB/then the/DT/the call/NN/call is/VBZ/is allowed/VBN/allowed to/TO/to occur/VB/occur only/RB/only if/IN/if b3/NNP/b3 is/VBZ/is greater/JJR/greater than/IN/than or/CC/or equal/JJ/equal to/TO/to i/PRP/i and/CC/and the/DT/the call/NN/call has/VBZ/has been/VBN/been directed/VBN/directed to/TO/to one/CD/one of/IN/of the/DT/the designated/VBN/designated entry/NN/entry points/NNS/points in/IN/in the/DT/the list/NN/list of/IN/of gates/NNP/gates. this/DT/this scheme/NN/scheme allows/VBZ/allows processes/NNS/processes with/IN/with limited/JJ/limited access/NN/access rights/NNS/rights to/TO/to call/VB/call procedures/NNS/procedures in/IN/in lower/JJR/lower rings/NNS/rings that/WDT/that have/VBP/have more/JJR/more access/NN/access rights/NNS/rights /,/, but/CC/but only/RB/only in/IN/in a/DT/a carefully/RB/carefully controlled/JJ/controlled mmmer/NN/mmmer /./. 598/CD/598 chapter/NN/chapter 14/CD/14 14.4/CD/14.4 the/DT/the main/JJ/main disadvantage/NN/disadvantage of/IN/of the/DT/the ring/NN/ring /:/( or/CC/or hierarchical/JJ/hierarchical /NN/) structure/NN/structure is/VBZ/is that/IN/that it/PRP/it does/VBZ/does not/RB/not allow/VB/allow us/PRP/us to/TO/to enforce/VB/enforce the/DT/the need-to-know/JJ/need-to-know principle/NNP/principle. in/IN/in particular/JJ/particular /,/, if/IN/if an/DT/an object/NN/object must/MD/must be/VB/be accessible/JJ/accessible in/IN/in domain/NN/domain 0/-NONE-/0 j/NN/j but/CC/but not/RB/not accessible/JJ/accessible in/IN/in domain/NN/domain oi/NN/oi /,/, then/RB/then we/PRP/we must/MD/must have/VB/have j/NN/j i/NNP/i. but/CC/but this/DT/this requirement/NN/requirement means/VBZ/means that/DT/that every/DT/every segment/NN/segment accessible/JJ/accessible in/IN/in oi/NN/oi is/VBZ/is also/RB/also accessible/JJ/accessible in/IN/in 0/-NONE-/0 1/CD/1 /./. the/DT/the multics/NNS/multics protection/NN/protection system/NN/system is/VBZ/is generally/RB/generally more/RBR/more complex/JJ/complex and/CC/and less/JJR/less efficient/JJ/efficient than/IN/than are/VBP/are those/DT/those used/VBN/used in/IN/in current/JJ/current operating/NN/operating systems/NNP/systems. if/IN/if protection/NN/protection interferes/NNS/interferes with/IN/with the/DT/the ease/NN/ease of/IN/of use/NN/use of/IN/of the/DT/the system/NN/system or/CC/or significantly/RB/significantly decreases/VBZ/decreases system/NN/system performance/NN/performance /,/, then/RB/then its/PRP$/its use/NN/use must/MD/must be/VB/be weighed/VBN/weighed carefully/RB/carefully against/IN/against the/DT/the purpose/NN/purpose of/IN/of the/DT/the system/NNP/system. for/IN/for instance/NN/instance /,/, we/PRP/we would/MD/would want/VB/want to/TO/to have/VB/have a/DT/a complex/JJ/complex protection/NN/protection system/NN/system on/IN/on a/DT/a computer/NN/computer used/VBN/used by/IN/by a/DT/a university/NN/university to/TO/to process/NN/process students/NNS/students '/POS/' grades/NNS/grades and/CC/and also/RB/also used/VBD/used by/IN/by students/NNS/students for/IN/for classwork/NNP/classwork. a/DT/a similar/JJ/similar protection/NN/protection system/NN/system would/MD/would not/RB/not be/VB/be suited/VBN/suited to/TO/to a/DT/a computer/NN/computer being/VBG/being used/VBN/used for/IN/for number/NN/number crunching/VBG/crunching /,/, in/IN/in which/WDT/which performance/NN/performance is/VBZ/is of/IN/of utmost/NN/utmost importance/NNP/importance. we/PRP/we would/MD/would prefer/VB/prefer to/TO/to separate/VB/separate the/DT/the mechanism/NN/mechanism from/IN/from the/DT/the protection/NN/protection policy/NN/policy /,/, allowing/VBG/allowing the/DT/the same/JJ/same system/NN/system to/TO/to have/VB/have complex/JJ/complex or/CC/or simple/JJ/simple protection/NN/protection depending/VBG/depending on/IN/on the/DT/the needs/NNS/needs of/IN/of its/PRP$/its users/NNP/users. to/TO/to separate/VB/separate mechanism/NN/mechanism from/IN/from policy/NN/policy /,/, we/PRP/we require/VBP/require a/DT/a more/RBR/more general/JJ/general model/NN/model of/IN/of protection/NN/protection /./. our/PRP$/our model/NN/model of/IN/of protection/NN/protection can/MD/can be/VB/be viewed/VBN/viewed abstractly/RB/abstractly as/IN/as a/DT/a matrix/NN/matrix /,/, called/VBN/called an/DT/an the/DT/the rows/VBZ/rows of/IN/of the/DT/the access/NN/access matrix/NN/matrix represent/NN/represent domains/NNS/domains /,/, and/CC/and the/DT/the columns/NNS/columns represent/VBP/represent objects/NNP/objects. each/DT/each entry/NN/entry in/IN/in the/DT/the matrix/NN/matrix consists/VBZ/consists of/IN/of a/DT/a set/NN/set of/IN/of access/NN/access rights/NNS/rights /./. because/IN/because the/DT/the column/NN/column defines/VBZ/defines objects/NNS/objects explicitly/RB/explicitly /,/, we/PRP/we can/MD/can omit/VB/omit the/DT/the object/NN/object name/NN/name from/IN/from the/DT/the access/NN/access right/NNP/right. the/DT/the entry/NN/entry access/NN/access /:/( i,j/JJ/i,j /NN/) defines/NNS/defines the/DT/the set/NN/set of/IN/of operations/NNS/operations that/WDT/that a/DT/a process/NN/process executing/VBG/executing in/IN/in domain/NN/domain oi/NN/oi can/MD/can invoke/VB/invoke on/IN/on object/NN/object oj/NN/oj /./. to/TO/to illustrate/VB/illustrate these/DT/these concepts/NNS/concepts /,/, we/PRP/we consider/VBP/consider the/DT/the access/NN/access matrix/NN/matrix shown/NN/shown in/IN/in figure/NN/figure 14.3/CD/14.3. there/EX/there are/VBP/are four/CD/four domains/NNS/domains and/CC/and four/CD/four objects-three/JJ/objects-three files/NNS/files /:/( f1/NNP/f1 /,/, f2/NNP/f2 /,/, f3/NNP/f3 /NNP/) and/CC/and one/CD/one laser/NN/laser printer/NNP/printer. a/DT/a process/NN/process executing/VBG/executing in/IN/in domain/NN/domain 0/-NONE-/0 1/CD/1 can/MD/can read/VB/read files/NNS/files f1/NNP/f1 and/CC/and f3/NNP/f3 /./. a/DT/a process/NN/process executing/VBG/executing in/IN/in domain/NN/domain 0/-NONE-/0 4/CD/4 has/VBZ/has the/DT/the same/JJ/same privileges/NNS/privileges as/IN/as one/CD/one executing/VBG/executing in/IN/in domain/NN/domain 0/-NONE-/0 1/CD/1 ;/:/; but/CC/but in/IN/in addition/NN/addition /,/, it/PRP/it can/MD/can also/RB/also write/VB/write onto/IN/onto files/NNS/files f1/NNP/f1 and/CC/and f3/NNP/f3 /./. note/NN/note that/IN/that the/DT/the laser/NN/laser printer/NN/printer can/MD/can be/VB/be accessed/VBN/accessed only/RB/only by/IN/by a/DT/a process/NN/process executing/VBG/executing in/IN/in domain/NN/domain 0/-NONE-/0 2/CD/2 /./. the/DT/the access-matrix/JJ/access-matrix scheme/NN/scheme provides/VBZ/provides us/PRP/us with/IN/with the/DT/the mechanism/NN/mechanism for/IN/for specifying/NN/specifying a/DT/a variety/NN/variety of/IN/of policies/NNP/policies. the/DT/the mechanism/NN/mechanism consists/VBZ/consists of/IN/of implementing/VBG/implementing the/DT/the access/NN/access 01/CD/01 read/NN/read read/NN/read 02/CD/02 print/NN/print 03/CD/03 read/NN/read execute/NN/execute 04/CD/04 read/NN/read read/NN/read write/NN/write write/NN/write figure/NN/figure 14.3/CD/14.3 access/NN/access matrix/NN/matrix /./. 14.4/CD/14.4 599/CD/599 matrix/CD/matrix and/CC/and ensuring/VBG/ensuring that/IN/that the/DT/the semantic/JJ/semantic properties/NNS/properties we/PRP/we have/VBP/have outlined/VBN/outlined hold/NN/hold /./. more/JJR/more specifically/RB/specifically /,/, we/PRP/we must/MD/must ensure/VB/ensure that/IN/that a/DT/a process/NN/process executing/VBG/executing in/IN/in domain/NN/domain n/NN/n can/MD/can access/NN/access only/RB/only those/DT/those objects/NNS/objects specified/VBN/specified in/IN/in row/NN/row /:/( and/CC/and then/RB/then only/RB/only as/IN/as allowed/VBN/allowed by/IN/by the/DT/the access-matrix/JJ/access-matrix entries/NNS/entries /./. the/DT/the access/NN/access matrix/NN/matrix can/MD/can implement/VB/implement policy/NN/policy decisions/NNS/decisions concerning/VBG/concerning protection/NN/protection /./. the/DT/the policy/NN/policy decisions/NNS/decisions involve/VBP/involve which/WDT/which rights/NNS/rights should/MD/should be/VB/be included/VBN/included in/IN/in the/DT/the /NN/( i,j/NN/i,j /:/) th/NN/th entry/NNP/entry. we/PRP/we must/MD/must also/RB/also decide/VB/decide the/DT/the domain/NN/domain in/IN/in which/WDT/which each/DT/each process/NN/process executes/NNP/executes. this/DT/this last/JJ/last policy/NN/policy is/VBZ/is usually/RB/usually decided/VBN/decided by/IN/by the/DT/the operating/NN/operating system/NN/system /./. the/DT/the users/NNS/users normally/RB/normally decide/VBP/decide the/DT/the contents/NNS/contents of/IN/of the/DT/the access-matrix/JJ/access-matrix entries/NNP/entries. when/WRB/when a/DT/a user/NN/user creates/VBZ/creates a/DT/a new/JJ/new object/NN/object oi/NN/oi /,/, the/DT/the column/NN/column oi/NN/oi is/VBZ/is added/VBN/added to/TO/to the/DT/the access/NN/access matrix/NN/matrix with/IN/with the/DT/the appropriate/JJ/appropriate initialization/NN/initialization entries/NNS/entries /,/, as/IN/as dictated/VBN/dictated by/IN/by the/DT/the creator/NNP/creator. the/DT/the user/NN/user may/MD/may decide/VB/decide to/TO/to enter/VB/enter some/DT/some rights/NNS/rights in/IN/in some/DT/some entries/NNS/entries in/IN/in cohum1/NNP/cohum1 j/NN/j and/CC/and other/JJ/other rights/NNS/rights in/IN/in other/JJ/other entries/NNS/entries /,/, as/IN/as needed/VBN/needed /./. the/DT/the access/NN/access matrix/NN/matrix provides/VBZ/provides an/DT/an appropriate/JJ/appropriate mechanism/NN/mechanism for/IN/for defining/NN/defining and/CC/and implementing/VBG/implementing strict/NN/strict control/NN/control for/IN/for both/DT/both the/DT/the static/JJ/static and/CC/and dynamic/JJ/dynamic association/NN/association between/IN/between processes/NNS/processes and/CC/and domains/NNP/domains. when/WRB/when we/PRP/we switch/VBP/switch a/DT/a process/NN/process from/IN/from one/CD/one domain/NN/domain to/TO/to another/DT/another /,/, we/PRP/we are/VBP/are executing/VBG/executing an/DT/an operation/NN/operation /:/( switch/NN/switch /:/) on/IN/on an/DT/an object/NN/object /:/( the/DT/the domain/NN/domain /:/) /./. we/PRP/we can/MD/can control/VB/control domain/NN/domain switching/VBG/switching by/IN/by including/VBG/including domains/NNS/domains among/IN/among the/DT/the objects/NNS/objects of/IN/of the/DT/the access/NN/access matrix/NNP/matrix. similarly/RB/similarly /,/, when/WRB/when we/PRP/we change/VBP/change the/DT/the content/NN/content of/IN/of the/DT/the access/NN/access matrix/NN/matrix /,/, we/PRP/we are/VBP/are performing/VBG/performing an/DT/an operation/NN/operation on/IN/on an/DT/an object/NN/object /:/: the/DT/the access/NN/access matrix/NNP/matrix. again/RB/again /,/, we/PRP/we can/MD/can control/VB/control these/DT/these changes/NNS/changes by/IN/by including/VBG/including the/DT/the access/NN/access matrix/NN/matrix itself/PRP/itself as/IN/as an/DT/an object/NN/object /./. actually/RB/actually /,/, since/IN/since each/DT/each entry/NN/entry in/IN/in the/DT/the access/NN/access matrix/NN/matrix may/MD/may be/VB/be modified/VBN/modified individually/RB/individually /,/, we/PRP/we must/MD/must consider/VB/consider each/DT/each entry/NN/entry in/IN/in the/DT/the access/NN/access matrix/NN/matrix as/IN/as an/DT/an object/NN/object to/TO/to be/VB/be protected/VBN/protected /./. now/RB/now /,/, we/PRP/we need/VBP/need to/TO/to consider/VB/consider only/RB/only the/DT/the operations/NNS/operations possible/JJ/possible on/IN/on these/DT/these new/JJ/new objects/NNS/objects /VBP/( domains/NNS/domains and/CC/and the/DT/the access/NN/access matrix/NN/matrix /:/) and/CC/and decide/VB/decide how/WRB/how we/PRP/we want/VBP/want processes/NNS/processes to/TO/to be/VB/be able/JJ/able to/TO/to execute/VB/execute these/DT/these operations/NNS/operations /./. processes/NNS/processes should/MD/should be/VB/be able/JJ/able to/TO/to switch/VB/switch from/IN/from one/CD/one domain/NN/domain to/TO/to another/NNP/another. switching/NN/switching from/IN/from domain/NN/domain d/NN/d ;/:/; to/TO/to domain/VB/domain di/NN/di is/VBZ/is allowed/VBN/allowed if/IN/if and/CC/and only/RB/only if/IN/if the/DT/the access/NN/access right/RB/right switch/JJ/switch e/NN/e access/NN/access /:/( i,j/JJ/i,j /NN/) /./. thus/RB/thus /,/, in/IN/in figure/NN/figure 14.4/CD/14.4 /,/, a/DT/a process/NN/process executing/VBG/executing in/IN/in domain/NN/domain d2/NNP/d2 can/MD/can switch/VB/switch to/TO/to domain/VB/domain d3/NNP/d3 or/CC/or to/TO/to domain/VB/domain d4/NNP/d4 /./. a/DT/a process/NN/process in/IN/in domain/NN/domain d4/NNP/d4 can/MD/can switch/VB/switch to/TO/to d1/NNP/d1 /,/, and/CC/and one/CD/one in/IN/in domain/NN/domain d1/NNP/d1 can/MD/can switch/VB/switch to/TO/to d2/VB/d2- allowing/NN/allowing controlled/VBN/controlled change/NN/change in/IN/in the/DT/the contents/NNS/contents of/IN/of the/DT/the access-matrix/JJ/access-matrix entries/NNS/entries requires/VBZ/requires three/CD/three additional/JJ/additional operations/NNS/operations /:/: copy/NN/copy /,/, owner/NN/owner /,/, and/CC/and control/NNP/control. we/PRP/we examine/VBP/examine these/DT/these operations/NNS/operations next/IN/next /./. 01/CD/01 read/NN/read read/NN/read switch/NN/switch 02/CD/02 print/NN/print switch/NN/switch switch/NN/switch 03/CD/03 read/NN/read execute/NN/execute 04/CD/04 read/NN/read read/NN/read switch/NN/switch write/NN/write write/NN/write figure/NN/figure 14.4/CD/14.4 access/NN/access matrix/NN/matrix of/IN/of figure/NN/figure 14.3/CD/14.3 with/IN/with domains/NNS/domains as/IN/as objects/NNS/objects /./. 600/CD/600 chapter/NN/chapter 14/CD/14 /CD/( a/DT/a /NN/) execute/NN/execute read/NN/read execute/NN/execute execute/NN/execute read/NN/read /:/( b/NN/b /:/) figure/NN/figure 14.5/CD/14.5 access/NN/access matrix/NN/matrix with/IN/with copy/NN/copy rights/NNS/rights /./. the/DT/the ability/NN/ability to/TO/to copy/VB/copy an/DT/an access/NN/access right/RB/right from/IN/from one/CD/one domain/NN/domain /:/( or/CC/or row/NN/row /:/) of/IN/of the/DT/the access/NN/access matrix/NN/matrix to/TO/to another/DT/another is/VBZ/is denoted/VBN/denoted by/IN/by an/DT/an asterisk/NN/asterisk /:/( /:/) appended/VBD/appended to/TO/to the/DT/the access/NN/access right/RB/right /./. the/DT/the copy/NN/copy right/RB/right allows/VBZ/allows the/DT/the access/NN/access right/RB/right to/TO/to be/VB/be copied/VBN/copied only/RB/only within/IN/within the/DT/the colurrm/NN/colurrm /./. /NN/( that/IN/that is/VBZ/is /,/, for/IN/for the/DT/the object/NN/object /:/) for/IN/for which/WDT/which the/DT/the right/NN/right is/VBZ/is defined/NNP/defined. for/IN/for example/NN/example /,/, in/IN/in figure/NN/figure 14.5/CD/14.5 /CD/( a/DT/a /NN/) /,/, a/DT/a process/NN/process executing/VBG/executing in/IN/in domain/NN/domain d2/NNP/d2 can/MD/can copy/VB/copy the/DT/the read/NN/read operation/NN/operation into/IN/into any/DT/any entry/NN/entry associated/VBN/associated with/IN/with file/JJ/file f2/NNP/f2 /./. hence/NN/hence /,/, the/DT/the access/NN/access matrix/NN/matrix of/IN/of figure/NN/figure 14.5/CD/14.5 /CD/( a/DT/a /NN/) can/MD/can be/VB/be modified/VBN/modified to/TO/to the/DT/the access/NN/access matrix/NN/matrix shown/NN/shown in/IN/in figure/NN/figure 14.5/CD/14.5 /CD/( b/NN/b /:/) /./. this/DT/this scheme/NN/scheme has/VBZ/has two/CD/two variants/NNS/variants /:/: a/DT/a right/NN/right is/VBZ/is copied/VBN/copied from/IN/from access/NN/access /:/( i/PRP/i /,/, j/VBP/j /:/) to/TO/to access/NN/access /:/( jc/NN/jc /,/, j/NN/j /:/) ;/:/; it/PRP/it is/VBZ/is then/RB/then removed/VBN/removed from/IN/from access/NN/access /:/( i/PRP/i /,/, j/VBP/j /:/) /./. this/DT/this action/NN/action is/VBZ/is a/DT/a transfer/NN/transfer of/IN/of a/DT/a right/NN/right /,/, rather/RB/rather than/IN/than a/DT/a copy/NN/copy /./. propagation/NN/propagation of/IN/of the/DT/the copy/NN/copy right/RB/right may/MD/may be/VB/be limited/NNP/limited. that/IN/that is/VBZ/is /,/, when/WRB/when the/DT/the right/NN/right r/NN/r is/VBZ/is copied/VBN/copied from/IN/from access/NN/access /:/( i,j/JJ/i,j /NN/) to/TO/to access/NN/access /:/( lc,j/JJ/lc,j /NN/) /,/, only/RB/only the/DT/the right/NN/right r/NN/r /:/( not/RB/not r/VB/r /:/) is/VBZ/is created/NNP/created. a/DT/a process/NN/process executing/VBG/executing in/IN/in domain/NN/domain d/NN/d ~/:/~ r/NN/r can/MD/can not/RB/not further/RB/further copy/VB/copy the/DT/the right/NN/right r/NN/r /./. a/DT/a system/NN/system may/MD/may select/VB/select only/RB/only one/CD/one of/IN/of these/DT/these three/CD/three copy/NN/copy rights/NNS/rights /,/, or/CC/or it/PRP/it may/MD/may provide/VB/provide all/DT/all three/CD/three by/IN/by identifying/NN/identifying them/PRP/them as/IN/as separate/JJ/separate rights/NNS/rights /:/: copy/NN/copy /,/, transfer/NN/transfer /,/, and/CC/and limited/VBD/limited copy/NN/copy /./. we/PRP/we also/RB/also need/VBP/need a/DT/a mechanism/NN/mechanism to/TO/to allow/VB/allow addition/NN/addition of/IN/of new/JJ/new rights/NNS/rights and/CC/and removal/NN/removal of/IN/of some/DT/some rights/NNP/rights. the/DT/the owner/NN/owner right/RB/right controls/VBZ/controls these/DT/these operations/NNP/operations. if/IN/if access/NN/access /:/( i/PRP/i /,/, j/VBP/j /:/) includes/NNS/includes the/DT/the owner/NN/owner right/RB/right /,/, then/RB/then a/DT/a process/NN/process executing/VBG/executing in/IN/in domain/NN/domain di/NN/di can/MD/can add/VB/add and/CC/and remove/VB/remove any/DT/any right/NN/right in/IN/in any/DT/any entry/NN/entry in/IN/in column/NN/column j/NNP/j. for/IN/for example/NN/example /,/, in/IN/in figure/NN/figure 14.6/CD/14.6 /CD/( a/DT/a /NN/) /,/, domain/NN/domain d1/NNP/d1 is/VBZ/is the/DT/the owner/NN/owner of/IN/of f1/NNP/f1 and/CC/and thus/RB/thus can/MD/can add/VB/add and/CC/and delete/JJ/delete any/DT/any valid/JJ/valid right/NN/right in/IN/in column/NN/column f1/NNP/f1 /./. similarly/RB/similarly /,/, domain/NN/domain d2/NNP/d2 is/VBZ/is the/DT/the owner/NN/owner of/IN/of f2/NNP/f2 and/CC/and f3/NNP/f3 and/CC/and thus/RB/thus can/MD/can add/VB/add and/CC/and remove/VB/remove any/DT/any valid/JJ/valid right/NN/right within/IN/within these/DT/these two/CD/two columns/NNP/columns. thus/RB/thus /,/, the/DT/the access/NN/access matrix/NN/matrix of/IN/of figure/NN/figure 14.6/CD/14.6 /CD/( a/DT/a /NN/) can/MD/can be/VB/be modified/VBN/modified to/TO/to the/DT/the access/NN/access matrix/NN/matrix shown/NN/shown in/IN/in figure/NN/figure 14.6/CD/14.6 /CD/( b/NN/b /:/) /./. 14.4/CD/14.4 601/CD/601 01/CD/01 owner/NN/owner write/NN/write execute/NN/execute read/NN/read read/NN/read 02/CD/02 owner/NN/owner owner/NN/owner write/NN/write 03/CD/03 execute/NN/execute /:/( a/DT/a /NN/) 01/CD/01 owner/NN/owner write/NN/write execute/NN/execute owner/NN/owner read/NN/read 02/CD/02 read/NN/read owner/NN/owner write/NN/write write/NN/write 03/CD/03 write/NN/write write/NN/write /:/( b/NN/b /:/) figure/NN/figure 14.6/CD/14.6 access/NN/access matrix/NN/matrix with/IN/with owner/NN/owner rights/NNS/rights /./. the/DT/the copy/NN/copy and/CC/and owner/NN/owner rights/NNS/rights allow/VBP/allow a/DT/a process/NN/process to/TO/to change/VB/change the/DT/the entries/NNS/entries in/IN/in a/DT/a column/NN/column /./. a/DT/a mechanism/NN/mechanism is/VBZ/is also/RB/also needed/VBN/needed to/TO/to change/VB/change the/DT/the entries/NNS/entries in/IN/in a/DT/a row/NNP/row. the/DT/the control/NN/control right/RB/right is/VBZ/is applicable/JJ/applicable only/RB/only to/TO/to domain/VB/domain objects/NNP/objects. if/IN/if access/NN/access /:/( i/PRP/i /,/, j/VBP/j /:/) includes/NNS/includes the/DT/the control/NN/control right/RB/right /,/, then/RB/then a/DT/a process/NN/process executing/VBG/executing in/IN/in domain/NN/domain di/NN/di can/MD/can remove/VB/remove any/DT/any access/NN/access right/RB/right from/IN/from row/NN/row j/NNP/j. for/IN/for example/NN/example /,/, suppose/NN/suppose that/IN/that /,/, in/IN/in figure/NN/figure 14.4/CD/14.4 /,/, we/PRP/we include/VBP/include the/DT/the control/NN/control right/RB/right in/IN/in access/NN/access /:/( d2/NNP/d2 /,/, d4/NNP/d4 /NNP/) /./. then/RB/then /,/, a/DT/a process/NN/process executil1.g/NN/executil1.g in/IN/in domain/NN/domain d2/NNP/d2 could/MD/could modify/VB/modify domai11/NNP/domai11 d4/NNP/d4 /,/, as/IN/as shown/NN/shown in/IN/in figure/NN/figure 14.7/CD/14.7 /./. read/NN/read read/VBD/read switch/NN/switch print/NN/print switch/NN/switch switch/NN/switch control/NN/control read/NN/read execute/NN/execute write/NN/write write/NN/write switch/NN/switch figure/NN/figure 14.7/CD/14.7 modified/VBD/modified access/NN/access matrix/NN/matrix of/IN/of figure/NN/figure 14.4/CD/14.4 /./. 602/CD/602 chapter/NN/chapter 14/CD/14 14.5/CD/14.5 the/DT/the copy/NN/copy and/CC/and owner/NN/owner rights/NNS/rights provide/VB/provide us/PRP/us with/IN/with a/DT/a mechanism/NN/mechanism to/TO/to limit/VB/limit the/DT/the propagation/NN/propagation of/IN/of access/NN/access rights/NNP/rights. however/RB/however /,/, they/PRP/they do/VBP/do not/RB/not give/VB/give us/PRP/us the/DT/the appropriate/JJ/appropriate tools/NNS/tools for/IN/for preventing/VBG/preventing the/DT/the propagation/NN/propagation /:/( or/CC/or disclosure/NN/disclosure /:/) of/IN/of information/NNP/information. the/DT/the problem/NNP/problem. of/IN/of guaranteeing/VBG/guaranteeing that/IN/that no/DT/no information/NN/information initially/RB/initially held/VBN/held in/IN/in an/DT/an object/NN/object can/MD/can migrate/VB/migrate outside/JJ/outside of/IN/of its/PRP$/its execution/NN/execution environment/NN/environment is/VBZ/is called/VBN/called the/DT/the /./. this/DT/this problem/NN/problem is/VBZ/is in/IN/in general/JJ/general unsolvable/JJ/unsolvable /NN/( see/NN/see the/DT/the bibliographical/JJ/bibliographical notes/NNS/notes at/IN/at the/DT/the end/NN/end of/IN/of the/DT/the chapter/NN/chapter /:/) /./. these/DT/these operations/NNS/operations on/IN/on the/DT/the domains/NNS/domains and/CC/and the/DT/the access/NN/access matrix/NN/matrix are/VBP/are not/RB/not in/IN/in themselves/PRP/themselves important/JJ/important /,/, but/CC/but they/PRP/they illustrate/VBP/illustrate the/DT/the ability/NN/ability of/IN/of the/DT/the access-matrix/JJ/access-matrix model/NN/model to/TO/to allow/VB/allow the/DT/the implementation/NN/implementation and/CC/and control/NN/control of/IN/of dynamic/JJ/dynamic protection/NN/protection requirements/NNS/requirements /./. new/JJ/new objects/NNS/objects and/CC/and new/JJ/new domains/NNS/domains can/MD/can be/VB/be created/VBN/created dynamically/RB/dynamically and/CC/and included/VBD/included in/IN/in the/DT/the access-matrix/JJ/access-matrix model/NNP/model. however/RB/however /,/, we/PRP/we have/VBP/have shown/VBN/shown only/RB/only that/IN/that the/DT/the basic/JJ/basic mechanism/NN/mechanism exists/NNS/exists ;/:/; system/NN/system designers/NNS/designers and/CC/and users/NNS/users must/MD/must make/VB/make the/DT/the policy/NN/policy decisions/NNS/decisions concerning/VBG/concerning which/WDT/which domains/NNS/domains are/VBP/are to/TO/to have/VB/have access/NN/access to/TO/to which/WDT/which objects/NNS/objects in/IN/in which/WDT/which ways/NNS/ways /./. how/WRB/how can/MD/can the/DT/the access/NN/access matrix/NN/matrix be/VB/be implemented/VBN/implemented effectively/RB/effectively in/IN/in general/JJ/general /,/, the/DT/the matrix/NN/matrix will/MD/will be/VB/be sparse/RB/sparse ;/:/; that/DT/that is/VBZ/is /,/, most/RBS/most of/IN/of the/DT/the entries/NNS/entries will/MD/will be/VB/be empty/NNP/empty. although/IN/although datastructure/NN/datastructure techniques/NNS/techniques are/VBP/are available/JJ/available for/IN/for representing/VBG/representing sparse/NN/sparse matrices/NNS/matrices /,/, they/PRP/they are/VBP/are not/RB/not particularly/RB/particularly useful/JJ/useful for/IN/for this/DT/this application/NN/application /,/, because/IN/because of/IN/of the/DT/the way/NN/way in/IN/in which/WDT/which the/DT/the protection/NN/protection facility/NN/facility is/VBZ/is used/NNP/used. here/RB/here /,/, we/PRP/we first/RB/first describe/VBP/describe several/JJ/several methods/NNS/methods of/IN/of implementing/VBG/implementing the/DT/the access/NN/access matrix/NN/matrix and/CC/and then/RB/then compare/VB/compare the/DT/the methods/NNS/methods /./. 14.5.1/CD/14.5.1 global/JJ/global table/JJ/table the/DT/the simplest/JJS/simplest implementation/NN/implementation of/IN/of the/DT/the access/NN/access matrix/NN/matrix is/VBZ/is a/DT/a global/JJ/global table/JJ/table consisting/NN/consisting of/IN/of a/DT/a set/NN/set of/IN/of ordered/VBN/ordered triples/NNS/triples domain/VBP/domain /,/, object/NN/object /,/, rights-set/JJ/rights-set /./. whenever/NN/whenever an/DT/an operation/NN/operation m/NN/m is/VBZ/is executed/VBN/executed on/IN/on an/DT/an object/NN/object oj/NN/oj within/IN/within domain/NN/domain d/NN/d ;/:/; /,/, the/DT/the global/JJ/global table/JJ/table is/VBZ/is searched/VBN/searched for/IN/for a/DT/a triple/NN/triple d/NN/d ;/:/; /,/, 0/-NONE-/0 1/CD/1 /,/, r/NN/r ~/:/~ c/NN/c /,/, with/IN/with me/PRP/me r/VBP/r ~/:/~ c/NNP/c. if/IN/if this/DT/this triple/NN/triple is/VBZ/is found/VBN/found /,/, the/DT/the operation/NN/operation is/VBZ/is allowed/VBN/allowed to/TO/to continue/VB/continue ;/:/; otherwise/VB/otherwise /,/, an/DT/an exception/NN/exception /:/( or/CC/or error/NN/error /:/) condition/NN/condition is/VBZ/is raised/VBN/raised /./. this/DT/this implementation/NN/implementation suffers/NNS/suffers from/IN/from several/JJ/several drawbacks/NNP/drawbacks. the/DT/the table/NN/table is/VBZ/is usually/RB/usually large/JJ/large and/CC/and thus/RB/thus can/MD/can not/RB/not be/VB/be kept/VBN/kept in/IN/in main/JJ/main memory/NN/memory /,/, so/RB/so additional/JJ/additional i/0/-NONE-/i/0 is/VBZ/is needed/VBN/needed /./. virtual/JJ/virtual memory/NN/memory techniques/NNS/techniques are/VBP/are often/RB/often used/VBN/used for/IN/for managing/VBG/managing this/DT/this table/NNP/table. in/IN/in addition/NN/addition /,/, it/PRP/it is/VBZ/is difficult/JJ/difficult to/TO/to take/VB/take advantage/NN/advantage of/IN/of special/JJ/special groupings/NNS/groupings of/IN/of objects/NNS/objects or/CC/or domains/NNS/domains /./. for/IN/for example/NN/example /,/, if/IN/if everyone/NN/everyone can/MD/can read/VB/read a/DT/a particular/JJ/particular object/NN/object /,/, this/DT/this object/NN/object must/MD/must have/VB/have a/DT/a separate/JJ/separate entry/NN/entry in/IN/in every/DT/every domain/NN/domain /./. 14.5.2/CD/14.5.2 access/NN/access lists/NNS/lists for/IN/for objects/NNS/objects each/DT/each column/NN/column in/IN/in the/DT/the access/NN/access matrix/NN/matrix can/MD/can be/VB/be implemented/VBN/implemented as/IN/as an/DT/an access/NN/access list/NN/list for/IN/for one/CD/one object/NN/object /,/, as/IN/as described/VBN/described in/IN/in section/NN/section 10.6.2/CD/10.6.2. obviously/RB/obviously /,/, the/DT/the empty/NN/empty entries/NNS/entries can/MD/can be/VB/be discarded/NNP/discarded. the/DT/the resulting/VBG/resulting list/NN/list for/IN/for each/DT/each object/NN/object consists/VBZ/consists of/IN/of ordered/VBN/ordered pairs/NNS/pairs domain/VBP/domain /,/, rights-set/JJ/rights-set /,/, which/WDT/which define/NN/define all/DT/all domains/NNS/domains with/IN/with a/DT/a nonempty/NN/nonempty set/NN/set of/IN/of access/NN/access rights/NNS/rights for/IN/for that/DT/that object/NN/object /./. this/DT/this approach/NN/approach can/MD/can be/VB/be extended/VBN/extended easily/RB/easily to/TO/to define/VB/define a/DT/a list/NN/list plus/CC/plus a/DT/a default/NN/default set/NN/set of/IN/of access/NN/access rights/NNP/rights. when/WRB/when an/DT/an operation/NN/operation m/NN/m on/IN/on an/DT/an object/NN/object oi/NN/oi is/VBZ/is attempted/VBN/attempted in/IN/in domain/NN/domain d/NN/d ;/:/; /,/, we/PRP/we search/VBP/search the/DT/the access/NN/access list/NN/list for/IN/for object/NN/object 0/-NONE-/0 i/PRP/i /,/, looking/VBG/looking for/IN/for an/DT/an entry/NN/entry d/NN/d ;/:/; /,/, r1c/NNP/r1c with/IN/with me/PRP/me rjc/NNP/rjc. if/IN/if the/DT/the entry/NN/entry is/VBZ/is found/VBN/found /,/, we/PRP/we allow/VBP/allow the/DT/the operation/NN/operation ;/:/; if/IN/if it/PRP/it is/VBZ/is not/RB/not /,/, we/PRP/we check/VBP/check the/DT/the default/NN/default set/NNP/set. if/IN/if m/NN/m is/VBZ/is in/IN/in the/DT/the default/NN/default set/VBD/set /,/, we/PRP/we allow/VBP/allow the/DT/the access/NNP/access. otherwise/NN/otherwise /,/, access/NN/access is/VBZ/is 14.5/CD/14.5 603/CD/603 denied/VBN/denied /,/, and/CC/and an/DT/an exception/NN/exception condition/NN/condition occurs/NNP/occurs. for/IN/for efficiency/NN/efficiency /,/, we/PRP/we may/MD/may check/VB/check the/DT/the default/NN/default set/VBD/set first/JJ/first and/CC/and then/RB/then search/NN/search the/DT/the access/NN/access list/NN/list /./. 14.5.3/CD/14.5.3 capability/NN/capability lists/NNS/lists for/IN/for domains/NNS/domains rather/RB/rather than/IN/than associating/VBG/associating the/DT/the columns/NNS/columns of/IN/of the/DT/the access/NN/access matrix/NN/matrix with/IN/with the/DT/the objects/NNS/objects as/IN/as access/NN/access lists/NNS/lists /,/, we/PRP/we can/MD/can associate/VB/associate each/DT/each row/NN/row with/IN/with its/PRP$/its domain/NNP/domain. a/DT/a ltst/NN/ltst for/IN/for a/DT/a domain/NN/domain is/VBZ/is a/DT/a list/NN/list of/IN/of objects/NNS/objects together/RB/together with/IN/with the/DT/the operations/NNS/operations allowed/VBD/allowed on/IN/on tbose/NN/tbose objects/NNP/objects. an/DT/an object/NN/object is/VBZ/is often/RB/often represented/VBN/represented by/IN/by its/PRP$/its physical/JJ/physical name/NN/name or/CC/or address/NN/address /,/, called/VBN/called a/DT/a to/TO/to execute/VB/execute operation/NN/operation m/NN/m on/IN/on object/NN/object 0/-NONE-/0 1/CD/1 /,/, the/DT/the process/NN/process executes/VBZ/executes the/DT/the operation/NN/operation m/NN/m /,/, specifying/VBG/specifying the/DT/the capability/NN/capability /:/( or/CC/or pointer/JJR/pointer /:/) for/IN/for object/NN/object 0/-NONE-/0 j/NN/j as/IN/as a/DT/a parameter/NN/parameter /./. simple/NN/simple of/IN/of the/DT/the capability/NN/capability means/VBZ/means that/DT/that access/NN/access is/VBZ/is allowed/VBN/allowed /./. the/DT/the capability/NN/capability list/NN/list is/VBZ/is associated/VBN/associated with/IN/with a/DT/a domain/NN/domain /,/, but/CC/but it/PRP/it is/VBZ/is never/RB/never directly/RB/directly accessible/JJ/accessible to/TO/to a/DT/a process/NN/process executing/VBG/executing in/IN/in that/DT/that domain/NNP/domain. rather/RB/rather /,/, the/DT/the capability/NN/capability list/NN/list is/VBZ/is itself/PRP/itself a/DT/a protected/JJ/protected object/NN/object /,/, maintained/VBD/maintained by/IN/by the/DT/the operating/NN/operating system/NN/system and/CC/and accessed/VBD/accessed by/IN/by the/DT/the user/NN/user only/RB/only indirectly/NNP/indirectly. capability-based/JJ/capability-based protection/NN/protection relies/NNS/relies on/IN/on the/DT/the fact/NN/fact that/IN/that the/DT/the capabilities/NNS/capabilities are/VBP/are never/RB/never allowed/VBN/allowed to/TO/to migrate/VB/migrate into/IN/into any/DT/any address/NN/address space/NN/space directly/RB/directly accessible/JJ/accessible by/IN/by a/DT/a user/NN/user process/NN/process /:/( where/WRB/where they/PRP/they could/MD/could be/VB/be modified/VBN/modified /-NONE-/) /./. if/IN/if all/DT/all capabilities/NNS/capabilities are/VBP/are secure/JJ/secure /,/, the/DT/the object/NN/object they/PRP/they protect/VBP/protect is/VBZ/is also/RB/also secure/RB/secure against/IN/against unauthorized/JJ/unauthorized access/NN/access /./. capabilities/NNS/capabilities were/VBD/were originally/RB/originally proposed/VBN/proposed as/IN/as a/DT/a kind/NN/kind of/IN/of secure/NN/secure pointer/NN/pointer /,/, to/TO/to meet/VB/meet the/DT/the need/NN/need for/IN/for resource/NN/resource protection/NN/protection that/WDT/that was/VBD/was foreseen/VBN/foreseen as/IN/as multiprogrammed/VBN/multiprogrammed computer/NN/computer systems/NNS/systems came/VBD/came of/IN/of age/NNP/age. the/DT/the idea/NN/idea of/IN/of an/DT/an inherently/RB/inherently protected/VBN/protected pointer/NN/pointer provides/VBZ/provides a/DT/a fom1dation/NN/fom1dation for/IN/for protection/NN/protection that/WDT/that can/MD/can be/VB/be extended/VBN/extended up/RP/up to/TO/to the/DT/the applications/NNS/applications level/NN/level /./. to/TO/to provide/VB/provide inherent/JJ/inherent protection/NN/protection /,/, we/PRP/we must/MD/must distinguish/VB/distinguish capabilities/NNS/capabilities from/IN/from other/JJ/other kinds/NNS/kinds of/IN/of objects/NNS/objects /,/, and/CC/and they/PRP/they must/MD/must be/VB/be interpreted/VBN/interpreted by/IN/by an/DT/an abstract/NN/abstract machine/NN/machine on/IN/on which/WDT/which higher-level/-NONE-/higher-level programs/VBZ/programs run/NNP/run. capabilities/NNS/capabilities are/VBP/are usually/RB/usually distinguished/VBN/distinguished from/IN/from other/JJ/other data/NNS/data in/IN/in one/CD/one of/IN/of two/CD/two ways/NNS/ways /:/: each/DT/each object/NN/object has/VBZ/has a/DT/a to/TO/to denote/VB/denote whether/IN/whether it/PRP/it is/VBZ/is a/DT/a capability/NN/capability or/CC/or accessible/JJ/accessible data/NNP/data. the/DT/the tags/NNS/tags themselves/PRP/themselves must/MD/must not/RB/not be/VB/be directly/RB/directly accessible/JJ/accessible by/IN/by an/DT/an application/NN/application program/NNP/program. hardware/NN/hardware or/CC/or firmware/NN/firmware support/NN/support may/MD/may be/VB/be used/VBN/used to/TO/to enforce/VB/enforce this/DT/this restriction/NNP/restriction. although/IN/although only/RB/only one/CD/one bit/NN/bit is/VBZ/is necessary/JJ/necessary to/TO/to distinguish/VB/distinguish between/IN/between capabilities/NNS/capabilities and/CC/and other/JJ/other objects/NNS/objects /,/, more/RBR/more bits/NNS/bits are/VBP/are often/RB/often used/NNP/used. this/DT/this extension/NN/extension allows/VBZ/allows all/DT/all objects/NNS/objects to/TO/to be/VB/be tagged/VBN/tagged with/IN/with their/PRP$/their types/NNS/types by/IN/by the/DT/the hardware/NNP/hardware. thus/RB/thus /,/, the/DT/the hardware/NN/hardware can/MD/can distinguish/VB/distinguish integers/NNS/integers /,/, floating-point/JJ/floating-point numbers/NNS/numbers /,/, pointers/NNS/pointers /,/, booleans/NNS/booleans /,/, characters/NNS/characters /,/, instructions/NNS/instructions /,/, capabilities/NNS/capabilities /,/, and/CC/and uninitialized/VBD/uninitialized values/NNS/values by/IN/by their/PRP$/their tags/NNS/tags /./. alternatively/RB/alternatively /,/, the/DT/the address/NN/address space/NN/space associated/VBN/associated with/IN/with a/DT/a program/NN/program can/MD/can be/VB/be split/VBN/split into/IN/into two/CD/two parts/NNP/parts. one/CD/one part/NN/part is/VBZ/is accessible/JJ/accessible to/TO/to the/DT/the program/NN/program and/CC/and contains/VBZ/contains the/DT/the program/NN/program 's/POS/'s normal/JJ/normal data/NNS/data and/CC/and instructions/NNP/instructions. the/DT/the other/JJ/other part/NN/part /,/, containing/VBG/containing the/DT/the capability/NN/capability list/NN/list /,/, is/VBZ/is accessible/JJ/accessible only/RB/only by/IN/by the/DT/the operating/NN/operating system/NNP/system. a/DT/a segmented/JJ/segmented memory/NN/memory space/NN/space /:/( section/NN/section 8.6/CD/8.6 /CD/) is/VBZ/is useful/JJ/useful to/TO/to support/VB/support this/DT/this approach/NN/approach /./. several/JJ/several capability-based/JJ/capability-based protection/NN/protection systems/NNS/systems have/VBP/have been/VBN/been developed/VBN/developed ;/:/; we/PRP/we describe/VBP/describe them/PRP/them briefly/RB/briefly in/IN/in section/NN/section 14.8/CD/14.8. the/DT/the mach/NN/mach operating/NN/operating system/NN/system also/RB/also uses/VBZ/uses a/DT/a version/NN/version of/IN/of capability-based/JJ/capability-based protection/NN/protection ;/:/; it/PRP/it is/VBZ/is described/VBN/described in/IN/in appendix/NN/appendix b/NN/b /./. 604/CD/604 chapter/NN/chapter 14/CD/14 14.5.4/CD/14.5.4 a/DT/a lock-key/JJ/lock-key mechanism/NN/mechanism the/DT/the t/NN/t '/POS/' is/VBZ/is a/DT/a compromise/NN/compromise between/IN/between access/NN/access lists/NNS/lists and/CC/and capability/NN/capability lists/NNP/lists. each/DT/each object/NN/object has/VBZ/has a/DT/a list/NN/list of/IN/of unique/JJ/unique bit/NN/bit patterns/NNS/patterns /,/, called/VBN/called similarly/RB/similarly /,/, each/DT/each domain/NN/domain has/VBZ/has a/DT/a list/NN/list of/IN/of unique/JJ/unique bit/NN/bit patterns/NNS/patterns /,/, called/VBN/called a/DT/a process/NN/process executing/VBG/executing in/IN/in a/DT/a domain/NN/domain can/MD/can access/NN/access an/DT/an object/NN/object only/RB/only if/IN/if that/DT/that domain/NN/domain has/VBZ/has a/DT/a key/JJ/key that/IN/that matches/NNS/matches one/CD/one of/IN/of the/DT/the locks/NNS/locks of/IN/of the/DT/the object/NN/object /./. as/IN/as with/IN/with capability/NN/capability lists/NNS/lists /,/, the/DT/the list/NN/list of/IN/of keys/NNS/keys for/IN/for a/DT/a domain/NN/domain must/MD/must be/VB/be managed/VBN/managed by/IN/by the/DT/the operating/NN/operating system/NN/system on/IN/on behalf/NN/behalf of/IN/of the/DT/the domain/NNP/domain. users/NNS/users are/VBP/are not/RB/not allowed/VBN/allowed to/TO/to examine/VB/examine or/CC/or modify/VB/modify the/DT/the list/NN/list of/IN/of keys/NNS/keys /:/( or/CC/or locks/NNS/locks /:/) directly/RB/directly /./. 14.5.5/CD/14.5.5 comparison/NN/comparison as/IN/as you/PRP/you might/MD/might expect/VB/expect choosing/NN/choosing a/DT/a technique/NN/technique for/IN/for implementing/NN/implementing an/DT/an access/NN/access matrix/NN/matrix involves/VBZ/involves various/JJ/various trade-offs/NNP/trade-offs. using/NN/using a/DT/a global/JJ/global table/JJ/table is/VBZ/is simple/JJ/simple ;/:/; however/RB/however /,/, the/DT/the table/NN/table can/MD/can be/VB/be quite/RB/quite large/JJ/large and/CC/and often/RB/often can/MD/can not/RB/not take/VB/take advantage/NN/advantage of/IN/of special/JJ/special groupings/NNS/groupings of/IN/of objects/NNS/objects or/CC/or domains/NNP/domains. access/NN/access lists/NNS/lists correspond/VBP/correspond directly/RB/directly to/TO/to the/DT/the needs/NNS/needs of/IN/of users/NNS/users /./. when/WRB/when a/DT/a user/NN/user creates/VBZ/creates an/DT/an object/NN/object he/PRP/he can/MD/can specify/VB/specify which/WDT/which domains/NNS/domains can/MD/can access/NN/access the/DT/the object/NN/object as/IN/as well/RB/well as/IN/as what/WP/what operations/NNS/operations are/VBP/are allowed/NNP/allowed. however/RB/however /,/, because/IN/because access-rights/NNS/access-rights information/NN/information for/IN/for a/DT/a particular/JJ/particular domain/NN/domain is/VBZ/is not/RB/not localized/VBN/localized /,/, determining/VBG/determining the/DT/the set/NN/set of/IN/of access/NN/access rights/NNS/rights for/IN/for each/DT/each domain/NN/domain is/VBZ/is difficult/NNP/difficult. in/IN/in addition/NN/addition /,/, every/DT/every access/NN/access to/TO/to the/DT/the object/NN/object must/MD/must be/VB/be checked/VBN/checked /,/, requiring/VBG/requiring a/DT/a search/NN/search of/IN/of the/DT/the access/NN/access list/NNP/list. in/IN/in a/DT/a large/JJ/large system/NN/system with/IN/with long/JJ/long access/NN/access lists/NNS/lists /,/, this/DT/this search/NN/search can/MD/can be/VB/be time/NN/time consuming/VBG/consuming /./. capability/NN/capability lists/NNS/lists do/VBP/do not/RB/not correspond/VB/correspond directly/RB/directly to/TO/to the/DT/the needs/NNS/needs of/IN/of users/NNS/users ;/:/; they/PRP/they are/VBP/are usefut/RB/usefut however/RB/however /,/, for/IN/for localizing/NN/localizing information/NN/information for/IN/for a/DT/a given/VBN/given process/NNP/process. the/DT/the process/NN/process attempting/VBG/attempting access/NN/access must/MD/must present/VB/present a/DT/a capability/NN/capability for/IN/for that/DT/that access/NNP/access. then/RB/then /,/, the/DT/the protection/NN/protection system/NN/system needs/VBZ/needs only/RB/only to/TO/to verify/VB/verify that/IN/that the/DT/the capability/NN/capability is/VBZ/is valid/NNP/valid. revocation/NN/revocation of/IN/of capabilities/NNS/capabilities /,/, however/RB/however /,/, may/MD/may be/VB/be inefficient/VBN/inefficient /-NONE-/( section/NN/section 14.7/CD/14.7 /CD/) /./. the/DT/the lock-key/JJ/lock-key mechanism/NN/mechanism /,/, as/IN/as mentioned/VBN/mentioned /,/, is/VBZ/is a/DT/a compromise/NN/compromise between/IN/between access/NN/access lists/NNS/lists and/CC/and capability/NN/capability lists/NNP/lists. the/DT/the mechanism/NN/mechanism can/MD/can be/VB/be both/DT/both effective/JJ/effective and/CC/and flexible/JJ/flexible /,/, depending/VBG/depending on/IN/on the/DT/the length/NN/length of/IN/of the/DT/the keys/NNP/keys. the/DT/the keys/NNS/keys can/MD/can be/VB/be passed/VBN/passed freely/RB/freely from/IN/from domain/NN/domain to/TO/to domain/NNP/domain. in/IN/in addition/NN/addition /,/, access/NN/access privileges/NNS/privileges can/MD/can be/VB/be effectively/RB/effectively revoked/VBN/revoked by/IN/by the/DT/the simple/JJ/simple technique/NN/technique of/IN/of changing/VBG/changing some/DT/some of/IN/of the/DT/the locks/NNS/locks associated/VBN/associated with/IN/with the/DT/the object/NN/object /:/( section/NN/section 14.7/CD/14.7 /CD/) /./. most/JJS/most systems/NNS/systems use/VBP/use a/DT/a combination/NN/combination of/IN/of access/NN/access lists/NNS/lists and/CC/and capabilities/NNP/capabilities. when/WRB/when a/DT/a process/NN/process first/RB/first tries/VBZ/tries to/TO/to access/NN/access an/DT/an object/NN/object /,/, the/DT/the access/NN/access list/NN/list is/VBZ/is searched/NNP/searched. if/IN/if access/NN/access is/VBZ/is denied/VBN/denied /,/, an/DT/an exception/NN/exception condition/NN/condition occurs/NNP/occurs. otherwise/NN/otherwise /,/, a/DT/a capability/NN/capability is/VBZ/is created/VBN/created and/CC/and attached/VBN/attached to/TO/to the/DT/the process/NNP/process. additional/JJ/additional references/NNS/references use/VBP/use the/DT/the capability/NN/capability to/TO/to demonstrate/VB/demonstrate swiftly/RB/swiftly that/IN/that access/NN/access is/VBZ/is allowed/NNP/allowed. after/IN/after the/DT/the last/JJ/last access/NN/access /,/, the/DT/the capability/NN/capability is/VBZ/is destroyed/VBN/destroyed /./. this/DT/this strategy/NN/strategy is/VBZ/is used/VBN/used in/IN/in the/DT/the multics/NNS/multics system/NN/system and/CC/and in/IN/in the/DT/the cal/JJ/cal system/NN/system /./. as/IN/as an/DT/an example/NN/example of/IN/of how/WRB/how such/JJ/such a/DT/a strategy/NN/strategy works/VBZ/works /,/, consider/NN/consider a/DT/a file/NN/file system/NN/system in/IN/in which/WDT/which each/DT/each file/NN/file has/VBZ/has an/DT/an associated/VBN/associated access/NN/access list/NNP/list. when/WRB/when a/DT/a process/NN/process opens/VBZ/opens a/DT/a file/NN/file /,/, the/DT/the directory/NN/directory structure/NN/structure is/VBZ/is searched/VBN/searched to/TO/to find/VB/find the/DT/the file/NN/file /,/, access/NN/access permission/NN/permission is/VBZ/is checked/VBN/checked /,/, and/CC/and buffers/NNS/buffers are/VBP/are allocated/NNP/allocated. all/DT/all this/DT/this information/NN/information is/VBZ/is recorded/VBN/recorded in/NNP/in. a/DT/a new/JJ/new entry/NN/entry in/IN/in a/DT/a file/NN/file table/NN/table associated/VBN/associated with/IN/with the/DT/the process/NNP/process. the/DT/the operation/NN/operation returns/NNS/returns an/DT/an index/NN/index into/IN/into this/DT/this table/JJ/table for/IN/for the/DT/the newly/RB/newly opened/VBN/opened file/NNP/file. all/DT/all operations/NNS/operations on/IN/on the/DT/the file/NN/file are/VBP/are made/VBN/made by/IN/by specification/NN/specification of/IN/of the/DT/the index/NN/index into/IN/into the/DT/the file/JJ/file table/NNP/table. the/DT/the entry/NN/entry in/IN/in the/DT/the file/NN/file table/NN/table then/RB/then points/VBZ/points to/TO/to the/DT/the file/NN/file and/CC/and its/PRP$/its buffers/NNP/buffers. when/WRB/when the/DT/the file/NN/file is/VBZ/is closed/VBN/closed /,/, the/DT/the file-table/JJ/file-table entry/NN/entry is/VBZ/is deleted/NNP/deleted. since/IN/since the/DT/the file/NN/file table/NN/table is/VBZ/is maintained/VBN/maintained by/IN/by the/DT/the operating/NN/operating system/NN/system /,/, the/DT/the user/NN/user carmot/NN/carmot accidentally/RB/accidentally corrupt/JJ/corrupt it/NNP/it. thus/RB/thus /,/, the/DT/the user/NN/user can/MD/can access/NN/access only/RB/only those/DT/those files/NNS/files that/IN/that have/VBP/have been/VBN/been opened/VBN/opened /./. 14.6/CD/14.6 14.6/CD/14.6 605/CD/605 since/IN/since access/NN/access is/VBZ/is checked/VBN/checked when/WRB/when the/DT/the file/NN/file is/VBZ/is opened/VBN/opened /,/, protection/NN/protection is/VBZ/is ensured/NNP/ensured. this/DT/this strategy/NN/strategy is/VBZ/is used/VBN/used in/IN/in the/DT/the unix/NN/unix system/NN/system /./. the/DT/the right/NN/right to/TO/to access/NN/access must/MD/must still/RB/still be/VB/be checked/VBN/checked or1/NNP/or1 each/DT/each access/NN/access /,/, and/CC/and the/DT/the file-table/JJ/file-table entry/NN/entry has/VBZ/has a/DT/a capability/NN/capability only/RB/only for/IN/for the/DT/the allowed/VBN/allowed operations/NNP/operations. if/IN/if a/DT/a file/NN/file is/VBZ/is opened/VBN/opened for/IN/for reading/NN/reading /,/, then/RB/then a/DT/a capability/NN/capability for/IN/for read/NN/read access/NN/access is/VBZ/is placed/VBN/placed in/IN/in the/DT/the file-table/JJ/file-table entry/NNP/entry. if/IN/if an/DT/an attempt/NN/attempt is/VBZ/is made/VBN/made to/TO/to write/VB/write onto/IN/onto the/DT/the file/NN/file /,/, the/DT/the system/NN/system identifies/NNS/identifies this/DT/this protection/NN/protection violation/NN/violation by/IN/by com.paring/JJ/com.paring the/DT/the requested/VBN/requested operation/NN/operation with/IN/with the/DT/the capability/NN/capability in/IN/in the/DT/the file-table/JJ/file-table entry/NN/entry /./. in/IN/in section/NN/section 10.6.2/CD/10.6.2 /,/, we/PRP/we described/VBD/described how/WRB/how access/NN/access controls/NNS/controls can/MD/can be/VB/be used/VBN/used on/IN/on files/NNS/files within/IN/within a/DT/a file/NN/file system/NNP/system. each/DT/each file/NN/file and/CC/and directory/NN/directory are/VBP/are assigned/VBN/assigned an/DT/an owner/NN/owner /,/, a/DT/a group/NN/group /,/, or/CC/or possibly/RB/possibly a/DT/a list/NN/list of/IN/of users/NNS/users /,/, and/CC/and for/IN/for each/DT/each of/IN/of those/DT/those entities/NNS/entities /,/, access-control/JJ/access-control information/NN/information is/VBZ/is assigned/NNP/assigned. a/DT/a similar/JJ/similar function/NN/function can/MD/can be/VB/be added/VBN/added to/TO/to other/JJ/other aspects/NNS/aspects of/IN/of a/DT/a computer/NN/computer system/NNP/system. a/DT/a good/JJ/good example/NN/example of/IN/of this/DT/this is/VBZ/is found/VBN/found in/IN/in solaris/NN/solaris 10/CD/10 /./. solaris/NNS/solaris 10/CD/10 advances/NNS/advances the/DT/the protection/NN/protection available/JJ/available in/IN/in the/DT/the sun/NN/sun microsystems/NNS/microsystems operating/VBG/operating system/NN/system by/IN/by explicitly/RB/explicitly adding/VBG/adding the/DT/the principle/NN/principle of/IN/of least/JJS/least privilege/NN/privilege via/IN/via this/DT/this facility/NN/facility revolves/VBZ/revolves around/IN/around privileges/NNS/privileges /./. a/DT/a privilege/NN/privilege is/VBZ/is the/DT/the right/NN/right to/TO/to execute/VB/execute a/DT/a system/NN/system call/NN/call or/CC/or to/TO/to use/VB/use an/DT/an option/NN/option within/IN/within that/DT/that system/NN/system call/NN/call /:/( such/JJ/such as/IN/as opening/VBG/opening a/DT/a file/NN/file with/IN/with write/JJ/write access/NN/access /:/) /./. privileges/NNS/privileges can/MD/can be/VB/be assigned/VBN/assigned to/TO/to processes,limiting/JJ/processes,limiting them/PRP/them to/TO/to exactly/RB/exactly the/DT/the access/NN/access they/PRP/they need/VBP/need to/TO/to perform/VB/perform their/PRP$/their work/NNP/work. privileges/NNS/privileges and/CC/and programs/NNS/programs can/MD/can also/RB/also be/VB/be assigned/VBN/assigned to/TO/to users/NNS/users are/VBP/are assigned/VBN/assigned roles/NNS/roles or/CC/or can/MD/can take/VB/take roles/NNS/roles based/VBN/based on/IN/on passwords/NNS/passwords to/TO/to the/DT/the roles/NNP/roles. in/IN/in this/DT/this way/NN/way a/DT/a user/NN/user can/MD/can take/VB/take a/DT/a role/NN/role that/WDT/that enables/VBZ/enables a/DT/a privilege/NN/privilege /,/, allowing/VBG/allowing the/DT/the user/NN/user to/TO/to run/VB/run a/DT/a program/NN/program to/TO/to accomplish/VB/accomplish a/DT/a specific/JJ/specific task/NN/task /,/, as/IN/as depicted/VBN/depicted in/IN/in figure/NN/figure 14.8/CD/14.8. this/DT/this implementation/NN/implementation of/IN/of privileges/NNS/privileges decreases/NNS/decreases the/DT/the security/NN/security risk/NN/risk associated/VBN/associated with/IN/with superusers/NNS/superusers and/CC/and setuid/VBD/setuid programs/NNS/programs /./. user1/NNP/user1 executes/VBZ/executes with/IN/with role/NN/role 1/CD/1 privileges/NNS/privileges ~/:/~ figure/NN/figure 14.8/CD/14.8 role-based/JJ/role-based access/NN/access control/NN/control in/IN/in solaris/NN/solaris 10/CD/10 /./. 606/CD/606 chapter/NN/chapter 14/CD/14 14.7/CD/14.7 notice/NN/notice that/WDT/that this/DT/this facility/NN/facility is/VBZ/is similar/JJ/similar to/TO/to the/DT/the access/NN/access matrix/NN/matrix described/VBD/described in/IN/in section/NN/section 14.4/CD/14.4. this/DT/this relationship/NN/relationship is/VBZ/is further/RBR/further explored/VBN/explored in/IN/in the/DT/the exercises/NNS/exercises at/IN/at the/DT/the end/NN/end of/IN/of the/DT/the chapter/NN/chapter /./. in/IN/in a/DT/a dynamic/JJ/dynamic protection/NN/protection system/NN/system /,/, we/PRP/we may/MD/may sometimes/RB/sometimes need/VB/need to/TO/to revoke/VB/revoke access/NN/access rights/NNS/rights to/TO/to objects/NNS/objects shared/VBN/shared by/IN/by different/JJ/different users/NNP/users. various/JJ/various questions/NNS/questions about/IN/about revocation/NN/revocation may/MD/may arise/VB/arise /:/: immediate/JJ/immediate versus/NN/versus delayed/NNP/delayed. does/VBZ/does revocation/NN/revocation occur/NN/occur immediately/RB/immediately /,/, or/CC/or is/VBZ/is it/PRP/it delayed/VBD/delayed if/IN/if revocation/NN/revocation is/VBZ/is delayed/VBN/delayed /,/, can/MD/can we/PRP/we find/VB/find out/RP/out when/WRB/when it/PRP/it will/MD/will take/VB/take place/NN/place selective/JJ/selective versus/NN/versus general/NNP/general. when/WRB/when an/DT/an access/NN/access right/RB/right to/TO/to an/DT/an object/NN/object is/VBZ/is revoked/VBN/revoked /,/, does/VBZ/does it/PRP/it affect/VB/affect all/PDT/all the/DT/the users/NNS/users who/WP/who have/VBP/have an/DT/an access/NN/access right/RB/right to/TO/to that/DT/that object/NN/object /,/, or/CC/or can/MD/can we/PRP/we specify/VB/specify a/DT/a select/NN/select group/NN/group of/IN/of users/NNS/users whose/WP$/whose access/NN/access rights/NNS/rights should/MD/should be/VB/be revoked/VBN/revoked partial/JJ/partial versus/NN/versus total/NNP/total. can/MD/can a/DT/a subset/NN/subset of/IN/of the/DT/the rights/NNS/rights associated/VBN/associated with/IN/with an/DT/an object/NN/object be/VB/be revoked/VBN/revoked /,/, or/CC/or must/MD/must we/PRP/we revoke/VB/revoke all/PDT/all access/NN/access rights/NNS/rights for/IN/for this/DT/this object/NN/object temporary/NN/temporary versus/VBZ/versus permanent/NNP/permanent. can/MD/can access/NN/access be/VB/be revoked/VBN/revoked permanently/RB/permanently /:/( that/IN/that is/VBZ/is /,/, the/DT/the revoked/VBN/revoked access/NN/access right/RB/right will/MD/will never/RB/never again/VB/again be/VB/be available/JJ/available /NN/) /,/, or/CC/or can/MD/can access/NN/access be/VB/be revoked/VBN/revoked and/CC/and later/JJ/later be/VB/be obtained/VBN/obtained again/RB/again with/IN/with an/DT/an access-list/JJ/access-list scheme/NN/scheme /,/, revocation/NN/revocation is/VBZ/is easy/NNP/easy. the/DT/the access/NN/access list/NN/list is/VBZ/is searched/VBN/searched for/IN/for any/DT/any access/NN/access rights/NNS/rights to/TO/to be/VB/be revoked/VBN/revoked /,/, and/CC/and they/PRP/they are/VBP/are deleted/VBN/deleted from/IN/from the/DT/the list/NNP/list. revocation/NN/revocation is/VBZ/is immediate/JJ/immediate and/CC/and can/MD/can be/VB/be general/JJ/general or/CC/or selective/JJ/selective /,/, total/JJ/total or/CC/or partial/JJ/partial /,/, and/CC/and permanent/NN/permanent or/CC/or temporary/JJ/temporary /./. capabilities/NNS/capabilities /,/, howeve1/NNP/howeve1 ~/NNP/~ present/NN/present a/DT/a much/RB/much more/RBR/more difficult/JJ/difficult revocation/NN/revocation problem/NN/problem /,/, as/IN/as mentioned/VBN/mentioned earlier/NNP/earlier. since/IN/since the/DT/the capabilities/NNS/capabilities are/VBP/are distributed/VBN/distributed throughout/IN/throughout the/DT/the system/NN/system /,/, we/PRP/we must/MD/must find/VB/find them/PRP/them before/IN/before we/PRP/we can/MD/can revoke/VB/revoke them/NNP/them. schemes/NNS/schemes that/WDT/that implement/NN/implement revocation/NN/revocation for/IN/for capabilities/NNS/capabilities include/VBP/include the/DT/the following/VBG/following /:/: reacquisition/NNP/reacquisition. periodically/RB/periodically /,/, capabilities/NNS/capabilities are/VBP/are deleted/VBN/deleted from/IN/from each/DT/each domain/NNP/domain. if/IN/if a/DT/a process/NN/process wants/VBZ/wants to/TO/to use/VB/use a/DT/a capability/NN/capability /,/, it/PRP/it may/MD/may find/VB/find that/IN/that that/DT/that capability/NN/capability has/VBZ/has been/VBN/been deleted/NNP/deleted. the/DT/the process/NN/process may/MD/may then/RB/then try/VB/try to/TO/to reacquire/VB/reacquire the/DT/the capability/NNP/capability. if/IN/if access/NN/access has/VBZ/has been/VBN/been revoked/VBN/revoked /,/, the/DT/the process/NN/process will/MD/will not/RB/not be/VB/be able/JJ/able to/TO/to reacquire/VB/reacquire the/DT/the capability/NN/capability /./. back-pointers/NNP/back-pointers. a/DT/a list/NN/list of/IN/of pointers/NNS/pointers is/VBZ/is maintained/VBN/maintained with/IN/with each/DT/each object/NN/object /,/, pointing/VBG/pointing to/TO/to all/DT/all capabilities/NNS/capabilities associated/VBN/associated with/IN/with that/DT/that object/NNP/object. when/WRB/when revocation/NN/revocation is/VBZ/is required/VBN/required /,/, we/PRP/we can/MD/can follow/VB/follow these/DT/these pointers/NNS/pointers /,/, changing/VBG/changing the/DT/the capabilities/NNS/capabilities as/IN/as necessary/NNP/necessary. this/DT/this scheme/NN/scheme was/VBD/was adopted/VBN/adopted in/IN/in the/DT/the multics/NNS/multics system/NNP/system. it/PRP/it is/VBZ/is quite/RB/quite general/JJ/general /,/, but/CC/but its/PRP$/its implementation/NN/implementation is/VBZ/is costly/RB/costly /./. indirection/NNP/indirection. the/DT/the capabilities/NNS/capabilities point/VBP/point indirectly/RB/indirectly /,/, not/RB/not directly/RB/directly /,/, to/TO/to the/DT/the objects/NNS/objects /./. each/DT/each capability/NN/capability points/NNS/points to/TO/to a/DT/a unique/JJ/unique entry/NN/entry in/IN/in a/DT/a global/JJ/global table/JJ/table /,/, which/WDT/which in/IN/in turn/NN/turn points/NNS/points to/TO/to the/DT/the object/NNP/object. we/PRP/we implement/VBP/implement revocation/NN/revocation by/IN/by searching/NN/searching the/DT/the global/JJ/global table/JJ/table for/IN/for the/DT/the desired/VBN/desired entry/NN/entry and/CC/and deleting/VBG/deleting it/NNP/it. then/RB/then /,/, when/WRB/when an/DT/an access/NN/access is/VBZ/is attempted/VBN/attempted /,/, the/DT/the capability/NN/capability is/VBZ/is found/VBN/found to/TO/to point/NN/point to/TO/to an/DT/an illegal/JJ/illegal table/NN/table entry/NNP/entry. table/NN/table entries/NNS/entries can/MD/can be/VB/be reused/VBN/reused for/IN/for other/JJ/other capabilities/NNS/capabilities without/IN/without difficulty/NN/difficulty /,/, since/IN/since both/DT/both the/DT/the capability/NN/capability and/CC/and the/DT/the table/NN/table entry/NN/entry contain/NN/contain the/DT/the unique/JJ/unique name/NN/name of/IN/of the/DT/the object/NNP/object. the/DT/the object/NN/object for/IN/for a/DT/a 14.8/CD/14.8 14.8/CD/14.8 607/CD/607 capability/NN/capability and/CC/and its/PRP$/its table/JJ/table entry/NN/entry must/MD/must match/NNP/match. this/DT/this scheme/NN/scheme was/VBD/was adopted/VBN/adopted in/IN/in the/DT/the cal/JJ/cal system/NNP/system. it/PRP/it does/VBZ/does not/RB/not allow/VB/allow selective/JJ/selective revocation/NN/revocation /./. keys/NNP/keys. a/DT/a key/JJ/key is/VBZ/is a/DT/a unique/JJ/unique bit/NN/bit pattern/NN/pattern that/WDT/that can/MD/can be/VB/be associated/VBN/associated with/IN/with a/DT/a capability/NN/capability /./. this/DT/this key/JJ/key is/VBZ/is defined/VBN/defined when/WRB/when the/DT/the capability/NN/capability is/VBZ/is created/VBN/created /,/, and/CC/and it/PRP/it can/MD/can be/VB/be neither/DT/neither modified/VBN/modified nor/CC/nor inspected/VBN/inspected by/IN/by the/DT/the process/NN/process that/IN/that owns/VBZ/owns the/DT/the capability/NNP/capability. a/DT/a is/VBZ/is associated/VBN/associated with/IN/with each/DT/each object/NN/object ;/:/; it/PRP/it can/MD/can be/VB/be defined/VBN/defined or/CC/or replaced/VBN/replaced with/IN/with the/DT/the set-key/JJ/set-key operation/NNP/operation. when/WRB/when a/DT/a capability/NN/capability is/VBZ/is created/VBN/created /,/, the/DT/the current/JJ/current value/NN/value of/IN/of the/DT/the master/NN/master key/NN/key is/VBZ/is associated/VBN/associated with/IN/with the/DT/the capability/NNP/capability. when/WRB/when the/DT/the capability/NN/capability is/VBZ/is exercised/VBN/exercised /,/, its/PRP$/its key/JJ/key is/VBZ/is compared/VBN/compared with/IN/with the/DT/the master/NN/master key/NNP/key. if/IN/if the/DT/the keys/NNS/keys match/VBP/match /,/, the/DT/the operation/NN/operation is/VBZ/is allowed/VBN/allowed to/TO/to continue/VB/continue ;/:/; otherwise/VB/otherwise /,/, an/DT/an exception/NN/exception condition/NN/condition is/VBZ/is raised/NNP/raised. revocation/NN/revocation replaces/NNS/replaces the/DT/the master/NN/master key/NN/key with/IN/with a/DT/a new/JJ/new value/NN/value via/IN/via the/DT/the set-key/JJ/set-key operation/NN/operation /,/, invalidating/VBG/invalidating all/DT/all previous/JJ/previous capabilities/NNS/capabilities for/IN/for this/DT/this object/NN/object /./. this/DT/this scheme/NN/scheme does/VBZ/does not/RB/not allow/VB/allow selective/JJ/selective revocation/NN/revocation /,/, since/IN/since only/RB/only one/CD/one master/NN/master key/NN/key is/VBZ/is associated/VBN/associated with/IN/with each/DT/each object/NNP/object. if/IN/if we/PRP/we associate/VBP/associate a/DT/a list/NN/list of/IN/of keys/NNS/keys with/IN/with each/DT/each object/NN/object /,/, then/RB/then selective/JJ/selective revocation/NN/revocation can/MD/can be/VB/be implemented/NNP/implemented. finally/RB/finally /,/, we/PRP/we can/MD/can group/VB/group all/PDT/all keys/NNS/keys into/IN/into one/CD/one global/JJ/global table/JJ/table of/IN/of keys/NNP/keys. a/DT/a capability/NN/capability is/VBZ/is valid/JJ/valid only/RB/only if/IN/if its/PRP$/its key/JJ/key matches/NNS/matches some/DT/some key/JJ/key in/IN/in the/DT/the global/JJ/global table/NNP/table. we/PRP/we implement/VBP/implement revocation/NN/revocation by/IN/by removing/NN/removing the/DT/the matching/NN/matching key/NN/key from/IN/from the/DT/the table/NNP/table. with/IN/with this/DT/this scheme/NN/scheme /,/, a/DT/a key/JJ/key can/NN/can be/VB/be associated/VBN/associated with/IN/with several/JJ/several objects/NNS/objects /,/, and/CC/and several/JJ/several keys/NNS/keys can/MD/can be/VB/be associated/VBN/associated with/IN/with each/DT/each object/NN/object /,/, providing/VBG/providing maximum/NN/maximum flexibility/NN/flexibility /./. in/IN/in key-based/JJ/key-based schemes/NNS/schemes /,/, the/DT/the operations/NNS/operations of/IN/of defining/VBG/defining keys/NNS/keys /,/, inserting/VBG/inserting them/PRP/them into/IN/into lists/NNS/lists /,/, and/CC/and deleting/VBG/deleting them/PRP/them from/IN/from lists/NNS/lists should/MD/should not/RB/not be/VB/be available/JJ/available to/TO/to all/DT/all users/NNS/users /./. in/IN/in particular/JJ/particular /,/, it/PRP/it would/MD/would be/VB/be reasonable/JJ/reasonable to/TO/to allow/VB/allow only/RB/only the/DT/the owner/NN/owner of/IN/of an/DT/an object/NN/object to/TO/to set/VB/set the/DT/the keys/NNS/keys for/IN/for that/DT/that object/NNP/object. this/DT/this choice/NN/choice /,/, however/RB/however /,/, is/VBZ/is a/DT/a policy/NN/policy decision/NN/decision that/WDT/that the/DT/the protection/NN/protection system/NN/system can/MD/can implement/VB/implement but/CC/but should/MD/should not/RB/not define/VB/define /./. in/IN/in this/DT/this section/NN/section /,/, we/PRP/we survey/VBP/survey two/CD/two capability-based/JJ/capability-based protection/NN/protection systems/NNP/systems. these/DT/these systems/NNS/systems differ/VBP/differ in/IN/in their/PRP$/their complexity/NN/complexity and/CC/and in/IN/in the/DT/the types/NNS/types of/IN/of policies/NNS/policies that/WDT/that can/MD/can be/VB/be implemented/VBN/implemented on/IN/on them/NNP/them. neither/DT/neither system/NN/system is/VBZ/is widely/RB/widely used/VBN/used /,/, but/CC/but both/DT/both provide/NN/provide interesting/JJ/interesting proving/NN/proving grounds/NNS/grounds for/IN/for protection/NN/protection theories/NNS/theories /./. 14.8.1/CD/14.8.1 an/DT/an example/NN/example /:/: hydra/NN/hydra hydra/NN/hydra is/VBZ/is a/DT/a capability-based/JJ/capability-based protection/NN/protection system/NN/system that/WDT/that provides/VBZ/provides considerable/JJ/considerable flexibility/NNP/flexibility. the/DT/the system/NN/system implements/VBZ/implements a/DT/a fixed/VBN/fixed set/NN/set of/IN/of possible/JJ/possible access/NN/access rights/NNS/rights /,/, including/VBG/including such/JJ/such basic/JJ/basic forms/NNS/forms of/IN/of access/NN/access as/IN/as the/DT/the right/NN/right to/TO/to read/VB/read /,/, write/JJ/write /,/, or/CC/or execute/VB/execute a/DT/a memory/NN/memory segment/NNP/segment. in/IN/in addition/NN/addition /,/, a/DT/a user/NN/user /:/( of/IN/of the/DT/the protection/NN/protection system/NN/system /:/) can/MD/can declare/VB/declare other/JJ/other rights/NNS/rights /./. the/DT/the interpretation/NN/interpretation of/IN/of user-defined/JJ/user-defined rights/NNS/rights is/VBZ/is performed/VBN/performed solely/RB/solely by/IN/by the/DT/the user/NN/user 's/POS/'s program/NN/program /,/, but/CC/but the/DT/the system/NN/system provides/VBZ/provides access/NN/access protection/NN/protection for/IN/for the/DT/the use/NN/use of/IN/of these/DT/these rights/NNS/rights /,/, as/IN/as well/RB/well as/IN/as for/IN/for the/DT/the use/NN/use of/IN/of system-defined/JJ/system-defined rights/NNP/rights. these/DT/these facilities/NNS/facilities constitute/VBP/constitute a/DT/a significant/JJ/significant development/NN/development in/IN/in protection/NN/protection technology/NN/technology /./. operations/NNS/operations on/IN/on objects/NNS/objects are/VBP/are defined/VBN/defined procedurally/NNP/procedurally. the/DT/the procedures/NNS/procedures that/WDT/that implement/NN/implement such/JJ/such operations/NNS/operations are/VBP/are themselves/PRP/themselves a/DT/a form/NN/form of/IN/of object/NN/object /,/, and/CC/and they/PRP/they are/VBP/are accessed/VBN/accessed indirectly/RB/indirectly by/IN/by capabilities/NNP/capabilities. the/DT/the names/NNS/names of/IN/of user-defined/JJ/user-defined procedures/NNS/procedures must/MD/must be/VB/be identified/VBN/identified to/TO/to the/DT/the protection/NN/protection system/NN/system if/IN/if it/PRP/it is/VBZ/is to/TO/to deal/VB/deal with/IN/with objects/NNS/objects of/IN/of the/DT/the userdefined/VBN/userdefined type/NNP/type. when/WRB/when the/DT/the definition/NN/definition of/IN/of an/DT/an object/NN/object is/VBZ/is made/VBN/made krtown/RP/krtown to/TO/to hydra/VB/hydra /,/, the/DT/the names/NNS/names of/IN/of operations/NNS/operations on/IN/on the/DT/the type/NN/type become/NN/become auxiliary/NN/auxiliary rights/NNS/rights 608/CD/608 chapter/NN/chapter 14/CD/14 can/MD/can be/VB/be described/VBN/described in/IN/in a/DT/a capability/NN/capability for/IN/for an/DT/an instance/NN/instance of/IN/of the/DT/the type/NNP/type. for/IN/for a/DT/a process/NN/process to/TO/to perform/VB/perform an/DT/an operation/NN/operation on/IN/on a/DT/a typed/JJ/typed object/NN/object /,/, the/DT/the capability/NN/capability it/PRP/it holds/VBZ/holds for/IN/for that/DT/that object/NN/object must/MD/must contain/VB/contain the/DT/the name/NN/name of/IN/of the/DT/the operation/NN/operation being/VBG/being invoked/VBN/invoked among/IN/among its/PRP$/its auxiliary/JJ/auxiliary rights/NNP/rights. this/DT/this restriction/NN/restriction enables/VBZ/enables discrin/NN/discrin lination/NN/lination of/IN/of access/NN/access rights/NNS/rights to/TO/to be/VB/be made/VBN/made on/IN/on an/DT/an instance-by-instance/NN/instance-by-instance and/CC/and process-by-process/JJ/process-by-process basis/NN/basis /./. hydra/NN/hydra also/RB/also provides/VBZ/provides /:/: /:/: '/''/' !/./! fnrwk/NNP/fnrwk. ;/:/; /:/: j1o/NNP/j1o /:/: l/NN/l this/DT/this scheme/NN/scheme allows/VBZ/allows a/DT/a procedure/NN/procedure to/TO/to be/VB/be certified/VBN/certified as/IN/as to/TO/to act/VB/act on/IN/on a/DT/a formal/JJ/formal parameter/NN/parameter of/IN/of a/DT/a specified/VBN/specified type/NN/type on/IN/on behalf/NN/behalf of/IN/of any/DT/any process/NN/process that/WDT/that holds/VBZ/holds a/DT/a right/NN/right to/TO/to execute/VB/execute the/DT/the procedure/NNP/procedure. the/DT/the rights/NNS/rights held/VBD/held by/IN/by a/DT/a trustworthy/JJ/trustworthy procedure/NN/procedure are/VBP/are independent/JJ/independent oc/NN/oc and/CC/and may/MD/may exceed/VB/exceed /,/, the/DT/the rights/NNS/rights held/VBD/held by/IN/by the/DT/the calling/VBG/calling process/NNP/process. however/RB/however /,/, such/JJ/such a/DT/a procedure/NN/procedure must/MD/must not/RB/not be/VB/be regarded/VBN/regarded as/IN/as universally/RB/universally trustworthy/JJ/trustworthy /NN/( the/DT/the procedure/NN/procedure is/VBZ/is not/RB/not allowed/VBN/allowed to/TO/to act/VB/act on/IN/on other/JJ/other types/NNS/types /,/, for/IN/for instance/NN/instance /:/) /,/, and/CC/and the/DT/the trustworthiness/NN/trustworthiness must/MD/must not/RB/not be/VB/be extended/VBN/extended to/TO/to any/DT/any other/JJ/other procedures/NNS/procedures or/CC/or program/NN/program segments/NNS/segments that/WDT/that might/MD/might be/VB/be executed/VBN/executed by/IN/by a/DT/a process/NN/process /./. amplification/NN/amplification allows/VBZ/allows implementation/NN/implementation procedures/NNS/procedures access/NN/access to/TO/to the/DT/the representation/NN/representation variables/NNS/variables of/IN/of an/DT/an abstract/NN/abstract data/NNS/data type/NNP/type. if/IN/if a/DT/a process/NN/process holds/VBZ/holds a/DT/a capability/NN/capability to/TO/to a/DT/a typed/JJ/typed object/NN/object a/DT/a /,/, for/IN/for instance/NN/instance /,/, this/DT/this capability/NN/capability may/MD/may include/VB/include an/DT/an auxiliary/JJ/auxiliary right/NN/right to/TO/to invoke/VB/invoke some/DT/some operation/NN/operation p/NN/p but/CC/but does/VBZ/does not/RB/not include/VB/include any/DT/any of/IN/of the/DT/the so-called/JJ/so-called kernel/NN/kernel rights/NNS/rights /,/, such/JJ/such as/IN/as read/JJ/read /,/, write/JJ/write /,/, or/CC/or execute/VB/execute /,/, on/IN/on the/DT/the segment/NN/segment that/IN/that represents/NNS/represents a/NNP/a. such/JJ/such a/DT/a capability/NN/capability gives/VBZ/gives a/DT/a process/NN/process a/DT/a means/VBZ/means of/IN/of indirect/JJ/indirect access/NN/access /:/( through/IN/through the/DT/the operation/NN/operation p/NN/p /:/) to/TO/to the/DT/the representation/NN/representation of/IN/of a/DT/a /,/, but/CC/but only/RB/only for/IN/for specific/JJ/specific purposes/NNS/purposes /./. when/WRB/when a/DT/a process/NN/process invokes/VBZ/invokes the/DT/the operation/NN/operation p/NN/p on/IN/on an/DT/an object/NN/object a/DT/a /,/, howeve1/NNP/howeve1 ~/NNP/~ the/DT/the capability/NN/capability for/IN/for access/NN/access to/TO/to a/DT/a may/MD/may be/VB/be amplified/VBN/amplified as/IN/as control/NN/control passes/NNS/passes to/TO/to the/DT/the code/NN/code body/NN/body of/IN/of p/NNP/p. this/DT/this amplification/NN/amplification may/MD/may be/VB/be necessary/JJ/necessary to/TO/to allow/VB/allow p/NN/p the/DT/the right/NN/right to/TO/to access/NN/access the/DT/the storage/NN/storage segment/NN/segment representing/VBG/representing a/DT/a so/RB/so as/IN/as to/TO/to implement/NN/implement the/DT/the operation/NN/operation that/IN/that p/NN/p defines/NNS/defines on/IN/on the/DT/the abstract/NN/abstract data/NNS/data type/NNP/type. the/DT/the code/NN/code body/NN/body of/IN/of p/NN/p may/MD/may be/VB/be allowed/VBN/allowed to/TO/to read/VB/read or/CC/or to/TO/to write/VB/write to/TO/to the/DT/the segment/NN/segment of/IN/of a/DT/a directly/RB/directly /,/, even/RB/even though/IN/though the/DT/the calling/NN/calling process/NN/process cmmot/NN/cmmot /./. on/IN/on return/NN/return from/IN/from p/NN/p the/DT/the capability/NN/capability for/IN/for a/DT/a is/VBZ/is restored/VBN/restored to/TO/to its/PRP$/its originat/NN/originat unamplified/VBD/unamplified state/NNP/state. this/DT/this case/NN/case is/VBZ/is a/DT/a typical/JJ/typical one/CD/one in/IN/in which/WDT/which the/DT/the rights/NNS/rights held/VBD/held by/IN/by a/DT/a process/NN/process for/IN/for access/NN/access to/TO/to a/DT/a protected/JJ/protected segment/NN/segment must/MD/must change/VB/change dynamically/RB/dynamically /,/, depending/VBG/depending on/IN/on the/DT/the task/NN/task to/TO/to be/VB/be performed/NNP/performed. the/DT/the dynamic/JJ/dynamic adjustment/NN/adjustment of/IN/of rights/NNS/rights is/VBZ/is performed/VBN/performed to/TO/to guarantee/VB/guarantee consistency/NN/consistency of/IN/of a/DT/a programmer-defined/JJ/programmer-defined abstraction/NNP/abstraction. amplification/NN/amplification of/IN/of rights/NNS/rights can/MD/can be/VB/be stated/VBN/stated explicitly/RB/explicitly in/IN/in the/DT/the declaration/NN/declaration of/IN/of an/DT/an abstract/NN/abstract type/NN/type to/TO/to the/DT/the hydra/NN/hydra operating/NN/operating system/NN/system /./. when/WRB/when a/DT/a user/NN/user passes/VBZ/passes an/DT/an object/NN/object as/IN/as an/DT/an argument/NN/argument to/TO/to a/DT/a procedure/NN/procedure /,/, we/PRP/we may/MD/may need/VB/need to/TO/to ensure/VB/ensure that/IN/that the/DT/the procedure/NN/procedure can/MD/can not/RB/not modify/VB/modify the/DT/the object/NNP/object. we/PRP/we can/MD/can implement/VB/implement this/DT/this restriction/NN/restriction readily/RB/readily by/IN/by passing/NN/passing an/DT/an access/NN/access right/RB/right that/IN/that does/VBZ/does not/RB/not have/VB/have the/DT/the modification/NN/modification /:/( write/JJ/write /NN/) right/NNP/right. howeve1/NNP/howeve1 ~/NNP/~ if/IN/if amplification/NN/amplification may/MD/may occur/VB/occur /,/, the/DT/the right/NN/right to/TO/to modify/VB/modify may/MD/may be/VB/be reinstated/NNP/reinstated. thus/RB/thus /,/, the/DT/the user-protection/NN/user-protection requirement/NN/requirement can/MD/can be/VB/be circumvented/VBN/circumvented /./. in/IN/in generat/NN/generat of/IN/of course/NN/course /,/, a/DT/a user/NN/user may/MD/may trust/VB/trust that/IN/that a/DT/a procedure/NN/procedure performs/VBZ/performs its/PRP$/its task/NN/task correctly/NNP/correctly. this/DT/this assumption/NN/assumption is/VBZ/is not/RB/not always/RB/always correct/VB/correct however/RB/however /,/, because/IN/because of/IN/of hardware/NN/hardware or/CC/or software/NN/software errors/NNP/errors. hydra/NN/hydra solves/VBZ/solves this/DT/this problem/NN/problem by/IN/by restricting/NN/restricting amplifications/NNS/amplifications /./. the/DT/the procedure-call/JJ/procedure-call mechanism/NN/mechanism of/IN/of hydra/NN/hydra was/VBD/was designed/VBN/designed as/IN/as a/DT/a direct/JJ/direct solution/NN/solution to/TO/to the/DT/the problem/NN/problem of/IN/of mutually/RB/mutually suspicious/JJ/suspicious subsystems/NNP/subsystems. this/DT/this problem/NN/problem is/VBZ/is defined/VBN/defined as/RB/as follows/NNP/follows. suppose/NN/suppose that/WDT/that a/DT/a program/NN/program is/VBZ/is provided/VBN/provided that/IN/that can/MD/can be/VB/be invoked/VBN/invoked as/IN/as a/DT/a service/NN/service by/IN/by a/DT/a number/NN/number of/IN/of different/JJ/different users/NNS/users /:/( for/IN/for example/NN/example /,/, a/DT/a sort/NN/sort routine/NN/routine /,/, a/DT/a compile1/NNP/compile1 ~/NNP/~ a/DT/a game/NN/game /:/) /./. when/WRB/when users/NNS/users invoke/VBP/invoke this/DT/this service/NN/service program/NN/program /,/, they/PRP/they take/VBP/take the/DT/the risk/NN/risk that/IN/that the/DT/the program/NN/program will/MD/will malfunction/VB/malfunction and/CC/and will/MD/will either/VB/either damage/NN/damage the/DT/the given/VBN/given data/NNS/data or/CC/or retain/VB/retain some/DT/some access/NN/access right/RB/right to/TO/to the/DT/the data/NNS/data to/TO/to be/VB/be used/VBN/used /-NONE-/( without/IN/without authority/NN/authority /:/) later/NNP/later. similarly/RB/similarly /,/, the/DT/the service/NN/service program/NN/program may/MD/may have/VB/have som.e/JJ/som.e private/JJ/private files/NNS/files /:/( for/IN/for accounting/NN/accounting purposes/NNS/purposes /,/, 14.8/CD/14.8 609/CD/609 for/IN/for example/NN/example /:/) that/IN/that should/MD/should not/RB/not be/VB/be accessed/VBN/accessed directly/RB/directly by/IN/by the/DT/the calling/VBG/calling user/NN/user program/NN/program /./. hydra/NN/hydra provides/VBZ/provides mechanisms/NNS/mechanisms for/IN/for directly/RB/directly dealing/VBG/dealing with/IN/with this/DT/this problem/NN/problem /./. a/DT/a hydra/NN/hydra subsystem/NN/subsystem is/VBZ/is built/VBN/built on/IN/on top/JJ/top of/IN/of its/PRP$/its protection/NN/protection kernel/NN/kernel and/CC/and may/MD/may require/VB/require protection/NN/protection of/IN/of its/PRP$/its own/JJ/own components/NNP/components. a/DT/a subsystem/NN/subsystem interacts/VBZ/interacts with/IN/with the/DT/the kernel/NN/kernel through/IN/through calls/NNS/calls on/IN/on a/DT/a set/NN/set of/IN/of kernel-defined/JJ/kernel-defined primitives/NNS/primitives that/WDT/that define/NN/define access/NN/access rights/NNS/rights to/TO/to resources/NNS/resources defined/VBN/defined by/IN/by the/DT/the subsystenl/NNP/subsystenl.. the/DT/the subsystem/NN/subsystem designer/NN/designer can/MD/can define/VB/define policies/NNS/policies for/IN/for use/NN/use of/IN/of these/DT/these resources/NNS/resources by/IN/by user/NN/user processes/NNS/processes /,/, but/CC/but the/DT/the policies/NNS/policies are/VBP/are enforceable/JJ/enforceable by/IN/by use/NN/use of/IN/of the/DT/the standard/JJ/standard access/NN/access protection/NN/protection afforded/VBD/afforded by/IN/by the/DT/the capability/NN/capability system/NN/system /./. programmers/NNS/programmers can/MD/can make/VB/make direct/JJ/direct use/NN/use of/IN/of the/DT/the protection/NN/protection system/NN/system after/IN/after acquainting/VBG/acquainting themselves/PRP/themselves with/IN/with its/PRP$/its features/NNS/features in/IN/in the/DT/the appropriate/NN/appropriate reference/NN/reference rnanual/NNP/rnanual. hydra/NN/hydra provides/VBZ/provides a/DT/a large/JJ/large library/NN/library of/IN/of system-defined/JJ/system-defined procedures/NNS/procedures that/WDT/that can/MD/can be/VB/be called/VBN/called by/IN/by user/NN/user programs/NNP/programs. programmers/NNS/programmers can/MD/can explicitly/RB/explicitly incorporate/VB/incorporate calls/NNS/calls on/IN/on these/DT/these system/NN/system procedures/NNS/procedures into/IN/into their/PRP$/their program/NN/program code/NN/code or/CC/or can/MD/can use/VB/use a/DT/a program/NN/program translator/NN/translator that/WDT/that has/VBZ/has been/VBN/been interfaced/VBN/interfaced to/TO/to hydra/VB/hydra /./. 14.8.2/CD/14.8.2 an/DT/an example/NN/example /:/: cambridge/NN/cambridge cap/NN/cap system/NN/system a/DT/a different/JJ/different approach/NN/approach to/TO/to capability-based/JJ/capability-based protection/NN/protection has/VBZ/has been/VBN/been taken/VBN/taken in/IN/in the/DT/the design/NN/design of/IN/of the/DT/the cambridge/NN/cambridge cap/NN/cap system/NNP/system. cap/NN/cap 's/POS/'s capability/NN/capability system/NN/system is/VBZ/is simpler/JJR/simpler and/CC/and superficially/RB/superficially less/RBR/less powerful/JJ/powerful than/IN/than that/DT/that of/IN/of hydra/NNP/hydra. however/RB/however /,/, closer/NN/closer examination/NN/examination shows/VBZ/shows that/IN/that it/PRP/it /,/, too/RB/too /,/, can/MD/can be/VB/be used/VBN/used to/TO/to provide/VB/provide secure/NN/secure protection/NN/protection of/IN/of user-defined/JJ/user-defined objects/NNP/objects. cap/NN/cap has/VBZ/has two/CD/two kinds/NNS/kinds of/IN/of capabilities/NNP/capabilities. the/DT/the ordinary/JJ/ordinary kind/NN/kind is/VBZ/is called/VBN/called a/DT/a /./. it/PRP/it can/MD/can be/VB/be used/VBN/used to/TO/to provide/VB/provide access/NN/access to/TO/to objects/NNS/objects /,/, but/CC/but the/DT/the only/JJ/only rights/NNS/rights provided/VBN/provided are/VBP/are the/DT/the standard/JJ/standard read/NN/read /,/, write/JJ/write /,/, and/CC/and execute/VB/execute of/IN/of the/DT/the individual/JJ/individual storage/NN/storage segments/NNS/segments associated/VBN/associated with/IN/with the/DT/the object/NNP/object. data/NNS/data capabilities/NNS/capabilities are/VBP/are interpreted/VBN/interpreted by/IN/by microcode/NN/microcode in/IN/in the/DT/the cap/NN/cap machine/NN/machine /./. the/DT/the second/JJ/second kind/NN/kind of/IN/of capability/NN/capability is/VBZ/is the/DT/the so-called/JJ/so-called which/WDT/which is/VBZ/is protected/VBN/protected /,/, but/CC/but not/RB/not interpreted/VBN/interpreted /,/, by/IN/by the/DT/the cap/NN/cap microcode/NNP/microcode. it/PRP/it is/VBZ/is interpreted/VBN/interpreted by/IN/by a/DT/a protected/JJ/protected /NN/( that/WDT/that is/VBZ/is /,/, privileged/VBN/privileged /-NONE-/) procedure/NN/procedure /,/, which/WDT/which may/MD/may be/VB/be written/VBN/written by/IN/by an/DT/an application/NN/application programmer/NN/programmer as/IN/as part/NN/part of/IN/of a/DT/a subsystem/NNP/subsystem. a/DT/a particular/JJ/particular kind/NN/kind of/IN/of rights/NNS/rights amplification/NN/amplification is/VBZ/is associated/VBN/associated with/IN/with a/DT/a protected/VBN/protected procedure/NNP/procedure. when/WRB/when executing/VBG/executing the/DT/the code/NN/code body/NN/body of/IN/of such/JJ/such a/DT/a procedure/NN/procedure /,/, a/DT/a process/NN/process temporarily/RB/temporarily acquires/VBZ/acquires the/DT/the right/NN/right to/TO/to read/VB/read or/CC/or write/VB/write the/DT/the contents/NNS/contents of/IN/of a/DT/a software/NN/software capability/NN/capability itself/NNP/itself. this/DT/this specific/JJ/specific kind/NN/kind of/IN/of rights/NNS/rights amplification/NN/amplification corresponds/NNS/corresponds to/TO/to an/DT/an implementation/NN/implementation of/IN/of the/DT/the seal/NN/seal and/CC/and unseal/NN/unseal primitives/NNS/primitives on/IN/on capabilities/NNP/capabilities. of/IN/of course/NN/course /,/, this/DT/this privilege/NN/privilege is/VBZ/is still/RB/still subject/JJ/subject to/TO/to type/NN/type verification/NN/verification to/TO/to ensure/VB/ensure that/IN/that only/RB/only software/VBP/software capabilities/NNS/capabilities for/IN/for a/DT/a specified/VBN/specified abstract/NN/abstract type/NN/type are/VBP/are passed/VBN/passed to/TO/to any/DT/any such/JJ/such procedure/NNP/procedure. universal/NN/universal trust/NN/trust is/VBZ/is not/RB/not placed/VBN/placed in/IN/in any/DT/any code/NN/code other/JJ/other than/IN/than the/DT/the cap/NN/cap machine/NN/machine 's/POS/'s microcode/NNP/microcode. /NNP/( see/VB/see bibliographical/JJ/bibliographical notes/NNS/notes for/IN/for references/NNP/references. /:/) the/DT/the interpretation/NN/interpretation of/IN/of a/DT/a software/NN/software capability/NN/capability is/VBZ/is left/VBN/left completely/RB/completely to/TO/to the/DT/the subsystem/NN/subsystem /,/, through/IN/through the/DT/the protected/VBN/protected procedures/NNS/procedures it/PRP/it contains/NNP/contains. this/DT/this scheme/NN/scheme allows/VBZ/allows a/DT/a variety/NN/variety of/IN/of protection/NN/protection policies/NNS/policies to/TO/to be/VB/be implemented/NNP/implemented. although/IN/although programmers/NNS/programmers can/MD/can define/VB/define their/PRP$/their own/JJ/own protected/VBN/protected procedures/NNS/procedures /:/( any/DT/any of/IN/of which/WDT/which might/MD/might be/VB/be incorrect/JJ/incorrect /NN/) /,/, the/DT/the security/NN/security of/IN/of the/DT/the overall/JJ/overall system/NN/system can/MD/can not/RB/not be/VB/be compromised/NNP/compromised. the/DT/the basic/JJ/basic protection/NN/protection system/NN/system will/MD/will not/RB/not allow/VB/allow an/DT/an unverified/JJ/unverified /,/, user-defined/JJ/user-defined /,/, protected/VBN/protected procedure/NN/procedure access/NN/access to/TO/to any/DT/any storage/NN/storage segments/NNS/segments /:/( or/CC/or capabilities/NNS/capabilities /:/) that/IN/that do/VB/do not/RB/not belong/VB/belong to/TO/to the/DT/the protection/NN/protection environment/NN/environment in/IN/in which/WDT/which it/PRP/it resides/NNP/resides. the/DT/the most/RBS/most serious/JJ/serious consequence/NN/consequence of/IN/of an/DT/an insecure/NN/insecure protected/VBN/protected procedure/NN/procedure is/VBZ/is a/DT/a protection/NN/protection breakdown/NN/breakdown of/IN/of the/DT/the subsystem/NN/subsystem for/IN/for which/WDT/which that/DT/that procedure/NN/procedure has/VBZ/has responsibility/NN/responsibility /./. 610/CD/610 chapter/NN/chapter 14/CD/14 14.9/CD/14.9 the/DT/the designers/NNS/designers of/IN/of the/DT/the cap/NN/cap system/NN/system have/VBP/have noted/VBN/noted that/IN/that the/DT/the use/NN/use of/IN/of software/NN/software capabilities/NNS/capabilities allowed/VBD/allowed them/PRP/them to/TO/to realize/VB/realize considerable/JJ/considerable economies/NNS/economies in/IN/in formulating/VBG/formulating and/CC/and implementing/VBG/implementing protection/NN/protection policies/NNS/policies commensurate/VBP/commensurate with/IN/with the/DT/the requirements/NNS/requirements of/IN/of abstract/NN/abstract resources/NNP/resources. however/RB/however /,/, subsystem/NN/subsystem designers/NNS/designers who/WP/who want/VBP/want to/TO/to make/VB/make use/NN/use of/IN/of this/DT/this facility/NN/facility can/MD/can not/RB/not simply/RB/simply study/RB/study a/DT/a reference/NN/reference manual/JJ/manual /,/, as/IN/as is/VBZ/is the/DT/the case/NN/case with/IN/with hydra/NN/hydra /./. instead/RB/instead /,/, they/PRP/they must/MD/must learn/VB/learn the/DT/the principles/NNS/principles and/CC/and techniques/NNS/techniques of/IN/of protection/NN/protection /,/, since/IN/since the/DT/the system/NN/system provides/VBZ/provides them/PRP/them with/IN/with no/DT/no library/NN/library of/IN/of procedures/NNS/procedures /./. to/TO/to the/DT/the degree/NN/degree that/IN/that protection/NN/protection is/VBZ/is provided/VBN/provided in/IN/in existing/NN/existing computer/NN/computer systems/NNS/systems /,/, it/PRP/it is/VBZ/is usually/RB/usually achieved/VBN/achieved through/IN/through an/DT/an operating-system/JJ/operating-system kernel/NN/kernel /,/, which/WDT/which acts/NNS/acts as/IN/as a/DT/a security/NN/security agent/NN/agent to/TO/to inspect/VB/inspect and/CC/and validate/VB/validate each/DT/each attempt/NN/attempt to/TO/to access/NN/access a/DT/a protected/JJ/protected resource/NNP/resource. since/IN/since comprehensive/JJ/comprehensive access/NN/access validation/NN/validation may/MD/may be/VB/be a/DT/a source/NN/source of/IN/of considerable/JJ/considerable overhead/NN/overhead /,/, either/DT/either we/PRP/we must/MD/must give/VB/give it/PRP/it hardware/VB/hardware support/NN/support to/TO/to reduce/VB/reduce the/DT/the cost/NN/cost of/IN/of each/DT/each validation/NN/validation or/CC/or we/PRP/we must/MD/must allow/VB/allow the/DT/the system/NN/system designer/NN/designer to/TO/to compromise/VB/compromise the/DT/the goals/NNS/goals of/IN/of protection/NN/protection /./. satisfying/VBG/satisfying all/DT/all these/DT/these goals/NNS/goals is/VBZ/is difficult/JJ/difficult if/IN/if the/DT/the flexibility/NN/flexibility to/TO/to implement/VB/implement protection/NN/protection policies/NNS/policies is/VBZ/is restricted/VBN/restricted by/IN/by the/DT/the support/NN/support mechanisms/NNS/mechanisms provided/VBN/provided or/CC/or if/IN/if protection/NN/protection environments/NNS/environments are/VBP/are made/VBN/made larger/JJR/larger than/IN/than necessary/JJ/necessary to/TO/to secure/VB/secure greater/JJR/greater operational/JJ/operational efficiency/NN/efficiency /./. as/IN/as operating/NN/operating systems/NNS/systems have/VBP/have become/VBN/become more/RBR/more complex/JJ/complex /,/, and/CC/and particularly/RB/particularly as/IN/as they/PRP/they have/VBP/have attempted/VBN/attempted to/TO/to provide/VB/provide higher-level/JJ/higher-level user/NN/user interfaces/NNS/interfaces /,/, the/DT/the goals/NNS/goals of/IN/of protection/NN/protection have/VBP/have become/VBN/become much/RB/much more/RBR/more refined/NNP/refined. the/DT/the designers/NNS/designers of/IN/of protection/NN/protection systems/NNS/systems have/VBP/have drawn/VBN/drawn heavily/RB/heavily on/IN/on ideas/NNS/ideas that/IN/that originated/VBN/originated in/IN/in programming/NN/programming languages/NNS/languages and/CC/and especially/RB/especially on/IN/on the/DT/the concepts/NNS/concepts of/IN/of abstract/NN/abstract data/NNS/data types/NNS/types and/CC/and objects/NNP/objects. protection/NN/protection systems/NNS/systems are/VBP/are now/RB/now concerned/VBN/concerned not/RB/not only/RB/only with/IN/with the/DT/the identity/NN/identity of/IN/of a/DT/a resource/NN/resource to/TO/to which/WDT/which access/NN/access is/VBZ/is attempted/VBN/attempted but/CC/but also/RB/also with/IN/with the/DT/the functional/JJ/functional nature/NN/nature of/IN/of that/DT/that access/NNP/access. in/IN/in the/DT/the newest/JJS/newest protection/NN/protection systems/NNS/systems /,/, concern/NN/concern for/IN/for the/DT/the function/NN/function to/TO/to be/VB/be invoked/VBN/invoked extends/NNS/extends beyond/IN/beyond a/DT/a set/NN/set of/IN/of system-defined/JJ/system-defined functions/NNS/functions /,/, such/JJ/such as/IN/as standard/JJ/standard file-access/NN/file-access methods/NNS/methods /,/, to/TO/to include/VB/include functions/NNS/functions that/IN/that may/MD/may be/VB/be user-defined/JJ/user-defined as/IN/as well/RB/well /./. policies/NNS/policies for/IN/for resource/NN/resource use/NN/use may/MD/may also/RB/also vary/VB/vary /,/, depending/VBG/depending on/IN/on the/DT/the application/NN/application /,/, and/CC/and they/PRP/they may/MD/may be/VB/be subject/JJ/subject to/TO/to change/VB/change over/IN/over time/NNP/time. for/IN/for these/DT/these reasons/NNS/reasons /,/, protection/NN/protection can/MD/can no/RB/no longer/RBR/longer be/VB/be considered/VBN/considered a/DT/a matter/NN/matter of/IN/of concern/NN/concern only/RB/only to/TO/to the/DT/the designer/NN/designer of/IN/of an/DT/an operating/NN/operating system/NNP/system. it/PRP/it should/MD/should also/RB/also be/VB/be available/JJ/available as/IN/as a/DT/a tool/NN/tool for/IN/for use/NN/use by/IN/by the/DT/the application/NN/application designe1/NNP/designe1 ~/NNP/~ so/RB/so that/IN/that resources/NNS/resources of/IN/of an/DT/an applications/NNS/applications subsystem/VBP/subsystem can/MD/can be/VB/be guarded/VBN/guarded against/IN/against tampering/NN/tampering or/CC/or the/DT/the influence/NN/influence of/IN/of an/DT/an error/NN/error /./. 14.9.1/CD/14.9.1 compiler-based/JJ/compiler-based enforcement/NN/enforcement at/IN/at this/DT/this point/NN/point /,/, programming/NN/programming languages/NNS/languages enter/NN/enter the/DT/the picture/NNP/picture. specifying/NN/specifying the/DT/the desired/VBN/desired control/NN/control of/IN/of access/NN/access to/TO/to a/DT/a shared/VBN/shared resource/NN/resource in/IN/in a/DT/a system/NN/system is/VBZ/is making/VBG/making a/DT/a declarative/JJ/declarative statement/NN/statement about/IN/about the/DT/the resource/NNP/resource. this/DT/this kind/NN/kind of/IN/of statement/NN/statement can/MD/can be/VB/be integrated/VBN/integrated into/IN/into a/DT/a language/NN/language by/IN/by an/DT/an extension/NN/extension of/IN/of its/PRP$/its typing/NN/typing facility/NNP/facility. when/WRB/when protection/NN/protection is/VBZ/is declared/VBN/declared along/IN/along with/IN/with data/NNS/data typing/VBG/typing /,/, the/DT/the designer/NN/designer of/IN/of each/DT/each subsystem/NN/subsystem can/MD/can specify/VB/specify its/PRP$/its requirements/NNS/requirements for/IN/for protection/NN/protection /,/, as/IN/as well/RB/well as/IN/as its/PRP$/its need/NN/need for/IN/for use/NN/use of/IN/of other/JJ/other resources/NNS/resources in/IN/in a/DT/a system/NNP/system. such/JJ/such a/DT/a specification/NN/specification should/MD/should be/VB/be given/VBN/given directly/RB/directly as/IN/as a/DT/a program/NN/program is/VBZ/is composed/VBN/composed /,/, and/CC/and in/IN/in the/DT/the language/NN/language in/IN/in which/WDT/which the/DT/the program/NN/program itself/PRP/itself is/VBZ/is stated/NNP/stated. this/DT/this approach/NN/approach has/VBZ/has several/JJ/several significant/JJ/significant advantages/NNS/advantages /:/: 14.9/CD/14.9 611/CD/611 protection/NN/protection needs/VBZ/needs are/VBP/are simply/RB/simply declared/VBN/declared /,/, rather/RB/rather than/IN/than programmed/VBN/programmed as/IN/as a/DT/a sequence/NN/sequence of/IN/of calls/NNS/calls on/IN/on procedures/NNS/procedures of/IN/of an/DT/an operating/NN/operating system/NN/system /./. protection/NN/protection requirements/NNS/requirements can/MD/can be/VB/be stated/VBN/stated independently/RB/independently of/IN/of the/DT/the facilities/NNS/facilities provided/VBN/provided by/IN/by a/DT/a particular/JJ/particular operating/NN/operating system/NN/system /./. the/DT/the means/NNS/means for/IN/for enforcement/NN/enforcement need/VBP/need not/RB/not be/VB/be provided/VBN/provided by/IN/by the/DT/the designer/NN/designer of/IN/of a/DT/a subsystem/NN/subsystem /./. a/DT/a declarative/JJ/declarative notation/NN/notation is/VBZ/is natural/JJ/natural because/IN/because access/NN/access privileges/NNS/privileges are/VBP/are closely/RB/closely related/VBN/related to/TO/to the/DT/the linguistic/JJ/linguistic concept/NN/concept of/IN/of data/NNS/data type/NN/type /./. a/DT/a variety/NN/variety of/IN/of techniques/NNS/techniques can/MD/can be/VB/be provided/VBN/provided by/IN/by a/DT/a programming-language/JJ/programming-language implementation/NN/implementation to/TO/to enforce/VB/enforce protection/NN/protection /,/, but/CC/but any/DT/any of/IN/of these/DT/these must/MD/must depend/VB/depend on/IN/on some/DT/some degree/NN/degree of/IN/of support/NN/support from/IN/from an/DT/an underlying/VBG/underlying machine/NN/machine and/CC/and its/PRP$/its operating/NN/operating system/NNP/system. for/IN/for example/NN/example /,/, suppose/NN/suppose a/DT/a language/NN/language is/VBZ/is used/VBN/used to/TO/to generate/VB/generate code/NN/code to/TO/to run/VB/run on/IN/on the/DT/the cambridge/NN/cambridge cap/NN/cap system/NNP/system. on/IN/on this/DT/this system/NN/system /,/, every/DT/every storage/NN/storage reference/NN/reference made/VBD/made on/IN/on the/DT/the underlying/VBG/underlying hardware/NN/hardware occurs/NNS/occurs indirectly/RB/indirectly through/IN/through a/DT/a capability/NNP/capability. this/DT/this restriction/NN/restriction prevents/VBZ/prevents any/DT/any process/NN/process from/IN/from accessing/VBG/accessing a/DT/a resource/NN/resource outside/IN/outside of/IN/of its/PRP$/its protection/NN/protection environment/NN/environment at/IN/at any/DT/any time/NNP/time. however/RB/however /,/, a/DT/a program/NN/program may/MD/may impose/VB/impose arbitrary/JJ/arbitrary restrictions/NNS/restrictions on/IN/on how/WRB/how a/DT/a resource/NN/resource can/MD/can be/VB/be used/VBN/used during/IN/during execution/NN/execution of/IN/of a/DT/a particular/JJ/particular code/NN/code segment/NN/segment /./. we/PRP/we can/MD/can implement/VB/implement such/PDT/such restrictions/NNS/restrictions most/JJS/most readily/RB/readily by/IN/by usin.g/JJ/usin.g the/DT/the software/NN/software capabilities/NNS/capabilities provided/VBN/provided by/IN/by cap/NNP/cap. a/DT/a language/NN/language implementation/NN/implementation might/MD/might provide/VB/provide standard/JJ/standard protected/VBN/protected procedures/NNS/procedures to/TO/to interpret/VB/interpret software/NN/software capabilities/NNS/capabilities that/WDT/that would/MD/would realize/VB/realize the/DT/the protection/NN/protection policies/NNS/policies that/WDT/that could/MD/could be/VB/be specified/VBN/specified in/IN/in the/DT/the language/NNP/language. this/DT/this scheme/NN/scheme puts/VBZ/puts policy/NN/policy specification/NN/specification at/IN/at the/DT/the disposal/NN/disposal of/IN/of the/DT/the programmers/NNS/programmers /,/, while/IN/while freeing/NN/freeing them/PRP/them from/IN/from implementing/VBG/implementing its/PRP$/its enforcement/NN/enforcement /./. even/RB/even if/IN/if a/DT/a system/NN/system does/VBZ/does not/RB/not provide/VB/provide a/DT/a protection/NN/protection kernel/NN/kernel as/IN/as powerful/JJ/powerful as/IN/as those/DT/those of/IN/of hydra/NN/hydra or/CC/or cap/VB/cap /,/, mechanisms/NNS/mechanisms are/VBP/are still/RB/still available/JJ/available for/IN/for implementing/NN/implementing protection/NN/protection specifications/NNS/specifications given/VBN/given in/IN/in a/DT/a programming/NN/programming language/NNP/language. the/DT/the principal/JJ/principal distinction/NN/distinction is/VBZ/is that/IN/that the/DT/the security/NN/security of/IN/of this/DT/this protection/NN/protection will/MD/will not/RB/not be/VB/be as/RB/as great/JJ/great as/IN/as that/DT/that supported/VBN/supported by/IN/by a/DT/a protection/NN/protection kernel/NN/kernel /,/, because/IN/because the/DT/the mechanism/NN/mechanism must/MD/must rely/RB/rely on/IN/on more/JJR/more assumptions/NNS/assumptions about/IN/about the/DT/the operational/JJ/operational state/NN/state of/IN/of the/DT/the system/NNP/system. a/DT/a compiler/NN/compiler can/MD/can separate/VB/separate references/NNS/references for/IN/for which/WDT/which it/PRP/it can/MD/can certify/VB/certify that/IN/that no/DT/no protection/NN/protection violation/NN/violation could/MD/could occur/VB/occur from/IN/from those/DT/those for/IN/for which/WDT/which a/DT/a violation/NN/violation might/MD/might be/VB/be possible/JJ/possible /,/, and/CC/and it/PRP/it can/MD/can treat/VB/treat them/PRP/them differently/NNP/differently. the/DT/the security/NN/security provided/VBD/provided by/IN/by this/DT/this form/NN/form of/IN/of protection/NN/protection rests/NNS/rests on/IN/on the/DT/the assumption/NN/assumption that/IN/that the/DT/the code/NN/code generated/VBD/generated by/IN/by the/DT/the compiler/NN/compiler will/MD/will not/RB/not be/VB/be modified/VBN/modified prior/RB/prior to/TO/to or/CC/or during/IN/during its/PRP$/its execution/NN/execution /./. what/WP/what /,/, then/RB/then /,/, are/VBP/are the/DT/the relative/JJ/relative merits/NNS/merits of/IN/of enforcement/NN/enforcement based/VBN/based solely/RB/solely on/IN/on a/DT/a kernel/NN/kernel /,/, as/IN/as opposed/VBN/opposed to/TO/to enforcement/NN/enforcement provided/VBN/provided largely/RB/largely by/IN/by a/DT/a compiler/NN/compiler security/NNP/security. enforcement/NN/enforcement by/IN/by a/DT/a kernel/NN/kernel provides/VBZ/provides a/DT/a greater/JJR/greater degree/NN/degree of/IN/of security/NN/security of/IN/of the/DT/the protection/NN/protection system/NN/system itself/PRP/itself than/IN/than does/VBZ/does the/DT/the generation/NN/generation of/IN/of protectionchecking/VBG/protectionchecking code/NN/code by/IN/by a/DT/a compiler/NNP/compiler. in/IN/in a/DT/a compiler-supported/JJ/compiler-supported scheme/NN/scheme /,/, security/NN/security rests/NNS/rests on/IN/on correctness/NN/correctness of/IN/of the/DT/the translator/NN/translator /,/, on/IN/on some/DT/some underlying/VBG/underlying mechanism/NN/mechanism of/IN/of storage/NN/storage management/NN/management that/WDT/that protects/VBZ/protects the/DT/the segments/NNS/segments from/IN/from which/WDT/which compiled/VBN/compiled code/NN/code is/VBZ/is executed/VBN/executed /,/, and/CC/and /,/, ultimately/RB/ultimately /,/, on/IN/on the/DT/the security/NN/security of/IN/of files/NNS/files from/IN/from which/WDT/which a/DT/a program/NN/program is/VBZ/is loaded/NNP/loaded. some/DT/some of/IN/of these/DT/these considerations/NNS/considerations also/RB/also apply/RB/apply to/TO/to a/DT/a softwaresupported/JJ/softwaresupported protection/NN/protection kernel/NN/kernel /,/, but/CC/but to/TO/to a/DT/a lesser/NN/lesser degree/NN/degree /,/, since/IN/since the/DT/the kernel/NN/kernel may/MD/may reside/VB/reside in/IN/in fixed/VBN/fixed physical/JJ/physical storage/NN/storage segments/NNS/segments and/CC/and may/MD/may be/VB/be loaded/VBN/loaded only/RB/only from/IN/from a/DT/a designated/VBN/designated file/NNP/file. with/IN/with a/DT/a tagged-capability/NN/tagged-capability system/NN/system /,/, in/IN/in which/WDT/which all/DT/all address/NN/address 612/CD/612 chapter/NN/chapter 14/CD/14 computation/NN/computation is/VBZ/is performed/VBN/performed either/DT/either by/IN/by hardware/NN/hardware or/CC/or by/IN/by a/DT/a fixed/VBN/fixed microprogram/NN/microprogram /,/, even/RB/even greater/JJR/greater security/NN/security is/VBZ/is possible/NNP/possible. hardware-supported/JJ/hardware-supported protection/NN/protection is/VBZ/is also/RB/also relatively/RB/relatively immune/JJ/immune to/TO/to protection/NN/protection violations/NNS/violations that/WDT/that might/MD/might occur/VB/occur as/RB/as a/DT/a result/NN/result of/IN/of either/DT/either hardware/NN/hardware or/CC/or system/NN/system software/NN/software malfunction/NN/malfunction /./. flexibility/NNP/flexibility. there/RB/there are/VBP/are limits/NNS/limits to/TO/to the/DT/the flexibility/NN/flexibility of/IN/of a/DT/a protection/NN/protection kernel/NN/kernel in/IN/in implementing/NN/implementing a/DT/a user-defined/JJ/user-defined policy/NN/policy /,/, although/IN/although it/PRP/it may/MD/may supply/RB/supply adequate/VB/adequate facilities/NNS/facilities for/IN/for the/DT/the system/NN/system to/TO/to provide/VB/provide enforcement/NN/enforcement of/IN/of its/PRP$/its own/JJ/own policies/NNS/policies /./. with/IN/with a/DT/a programming/NN/programming language/NN/language /,/, protection/NN/protection policy/NN/policy can/MD/can be/VB/be declared/VBN/declared and/CC/and enforcem.ent/JJ/enforcem.ent provided/VBN/provided as/IN/as needed/VBN/needed by/IN/by an/DT/an implementation/NNP/implementation. if/IN/if a/DT/a language/NN/language does/VBZ/does not/RB/not provide/VB/provide sufficient/JJ/sufficient flexibility/NN/flexibility /,/, it/PRP/it can/MD/can be/VB/be extended/VBN/extended or/CC/or replaced/VBN/replaced with/IN/with less/JJR/less disturbance/NN/disturbance of/IN/of a/DT/a system/NN/system in/IN/in service/NN/service than/IN/than would/MD/would be/VB/be caused/VBN/caused by/IN/by the/DT/the modification/NN/modification of/IN/of an/DT/an operating-system/JJ/operating-system kernel/NN/kernel efficiency/NNP/efficiency. the/DT/the greatest/JJS/greatest efficiency/NN/efficiency is/VBZ/is obtained/VBN/obtained when/WRB/when enforcement/NN/enforcement of/IN/of protection/NN/protection is/VBZ/is supported/VBN/supported directly/RB/directly by/IN/by hardware/NN/hardware /:/( or/CC/or microcode/VB/microcode /CD/) /./. insofar/NN/insofar as/IN/as software/NN/software support/NN/support is/VBZ/is required/VBN/required /,/, language-based/JJ/language-based enforcement/NN/enforcement has/VBZ/has the/DT/the advantage/NN/advantage that/IN/that static/JJ/static access/NN/access enforcement/NN/enforcement can/MD/can be/VB/be verified/VBN/verified off-line/-NONE-/off-line at/IN/at compile/JJ/compile time/NNP/time. also/RB/also /,/, since/IN/since an/DT/an intelligent/NN/intelligent compiler/NN/compiler can/MD/can tailor/VB/tailor the/DT/the enforcement/NN/enforcement mechanism/NN/mechanism to/TO/to meet/VB/meet the/DT/the specified/VBN/specified need/NN/need /,/, the/DT/the fixed/VBN/fixed overhead/NN/overhead of/IN/of kernel/NN/kernel calls/NNS/calls can/MD/can often/RB/often be/VB/be avoided/VBN/avoided /./. in/IN/in summary/NN/summary /,/, the/DT/the specification/NN/specification of/IN/of protection/NN/protection in/IN/in a/DT/a programming/NN/programming language/NN/language allows/VBZ/allows the/DT/the high-level/JJ/high-level description/NN/description of/IN/of policies/NNS/policies for/IN/for the/DT/the allocation/NN/allocation and/CC/and use/VBP/use of/IN/of resources/NNP/resources. a/DT/a language/NN/language implementation/NN/implementation can/MD/can provide/VB/provide software/NN/software for/IN/for protection/NN/protection enforcement/NN/enforcement when/WRB/when automatic/JJ/automatic hardware-supported/JJ/hardware-supported checking/NN/checking is/VBZ/is unavailable/NNP/unavailable. in/IN/in addition/NN/addition /,/, it/PRP/it can/MD/can interpret/VB/interpret protection/NN/protection specifications/NNS/specifications to/TO/to generate/VB/generate calls/NNS/calls on/IN/on whatever/NN/whatever protection/NN/protection system/NN/system is/VBZ/is provided/VBN/provided by/IN/by the/DT/the hardware/NN/hardware and/CC/and the/DT/the operating/NN/operating system/NN/system /./. one/CD/one way/NN/way of/IN/of making/VBG/making protection/NN/protection available/JJ/available to/TO/to the/DT/the application/NN/application program/NN/program is/VBZ/is through/IN/through the/DT/the use/NN/use of/IN/of a/DT/a software/NN/software capability/NN/capability that/WDT/that could/MD/could be/VB/be used/VBN/used as/IN/as an/DT/an object/NN/object of/IN/of computation/NNP/computation. inherent/NN/inherent in/IN/in this/DT/this concept/NN/concept is/VBZ/is the/DT/the idea/NN/idea that/IN/that certain/JJ/certain program/NN/program components/NNS/components might/MD/might have/VB/have the/DT/the privilege/NN/privilege of/IN/of creating/VBG/creating or/CC/or examining/VBG/examining these/DT/these software/NN/software capabilities/NNP/capabilities. a/DT/a capability-creating/JJ/capability-creating program/NN/program would/MD/would be/VB/be able/JJ/able to/TO/to execute/VB/execute a/DT/a primitive/JJ/primitive operation/NN/operation that/WDT/that would/MD/would seal/VB/seal a/DT/a data/NN/data structure/NN/structure /,/, rendering/VBG/rendering the/DT/the latter/NN/latter 's/POS/'s contents/NNS/contents inaccessible/JJ/inaccessible to/TO/to any/DT/any program/NN/program components/NNS/components that/WDT/that did/VBD/did not/RB/not hold/VB/hold either/DT/either the/DT/the seal/NN/seal or/CC/or the/DT/the unseal/NN/unseal privilege/NNP/privilege. such/JJ/such components/NNS/components might/MD/might copy/VB/copy the/DT/the data/NNS/data structure/VBP/structure or/CC/or pass/NNS/pass its/PRP$/its address/NN/address to/TO/to other/JJ/other program/NN/program components/NNS/components /,/, but/CC/but they/PRP/they could/MD/could not/RB/not gain/VB/gain access/NN/access to/TO/to its/PRP$/its contents/NNP/contents. the/DT/the reason/NN/reason for/IN/for introducing/VBG/introducing such/JJ/such software/NN/software capabilities/NNS/capabilities is/VBZ/is to/TO/to bring/VB/bring a/DT/a protection/NN/protection mechanism/NN/mechanism into/IN/into the/DT/the programming/NN/programming language/NNP/language. the/DT/the only/JJ/only problem/NN/problem with/IN/with the/DT/the concept/NN/concept as/IN/as proposed/VBN/proposed is/VBZ/is that/IN/that the/DT/the use/NN/use of/IN/of the/DT/the seal/NN/seal and/CC/and unseal/NN/unseal operations/NNS/operations takes/VBZ/takes a/DT/a procedural/JJ/procedural approach/NN/approach to/TO/to specifying/NN/specifying protection/NNP/protection. a/DT/a nonprocedural/JJ/nonprocedural or/CC/or declarative/JJ/declarative notation/NN/notation seems/VBZ/seems a/DT/a preferable/JJ/preferable way/NN/way to/TO/to make/VB/make protection/NN/protection available/JJ/available to/TO/to the/DT/the application/NN/application programmer/NN/programmer /./. what/WP/what is/VBZ/is needed/VBN/needed is/VBZ/is a/DT/a safe/NN/safe /,/, dynamic/JJ/dynamic access-control/NN/access-control mechanism/NN/mechanism for/IN/for distributing/NN/distributing capabilities/NNS/capabilities to/TO/to system/VB/system resources/NNS/resources among/IN/among user/NN/user processes/NNP/processes. to/TO/to contribute/VB/contribute to/TO/to the/DT/the overall/JJ/overall reliability/NN/reliability of/IN/of a/DT/a system/NN/system /,/, the/DT/the access-control/NN/access-control mechanism/NN/mechanism should/MD/should be/VB/be safe/JJ/safe to/TO/to use/NNP/use. to/TO/to be/VB/be useful/JJ/useful in/IN/in practice/NN/practice /,/, it/PRP/it should/MD/should also/RB/also be/VB/be reasonably/RB/reasonably efficient/NNP/efficient. this/DT/this requirement/NN/requirement has/VBZ/has led/VBN/led to/TO/to the/DT/the development/NN/development of/IN/of a/DT/a number/NN/number of/IN/of language/NN/language constructs/NNS/constructs that/WDT/that allow/VBP/allow the/DT/the programmer/NN/programmer to/TO/to declare/VB/declare various/JJ/various restrictions/NNS/restrictions on/IN/on the/DT/the use/NN/use of/IN/of a/DT/a specific/JJ/specific managed/VBN/managed resource/NNP/resource. /NNP/( see/VB/see the/DT/the bibliographical/JJ/bibliographical notes/NNS/notes for/IN/for appropriate/JJ/appropriate references/NNP/references. /NNP/) these/DT/these constructs/NNS/constructs provide/VBP/provide mechanisms/NNS/mechanisms for/IN/for three/CD/three functions/NNS/functions /:/: 14.9/CD/14.9 613/CD/613 distributing/VBG/distributing capabilities/NNS/capabilities safely/RB/safely and/CC/and efficiently/RB/efficiently among/IN/among customer/NN/customer processes/NNS/processes /./. in/IN/in particular/JJ/particular /,/, mechanisms/NNS/mechanisms ensure/VBP/ensure that/IN/that a/DT/a user/NN/user process/NN/process will/MD/will use/VB/use the/DT/the managed/VBN/managed resource/NN/resource only/RB/only if/IN/if it/PRP/it was/VBD/was granted/VBN/granted a/DT/a capability/NN/capability to/TO/to that/DT/that resource/NN/resource /./. specifying/VBG/specifying the/DT/the type/NN/type of/IN/of operations/NNS/operations that/WDT/that a/DT/a particular/JJ/particular process/NN/process may/MD/may invoke/VB/invoke on/IN/on an/DT/an allocated/JJ/allocated resource/NN/resource /:/( for/IN/for example/NN/example /,/, a/DT/a reader/NN/reader of/IN/of a/DT/a file/NN/file should/MD/should be/VB/be allowed/VBN/allowed only/RB/only to/TO/to read/VB/read the/DT/the file/NN/file /,/, whereas/VBZ/whereas a/DT/a writer/NN/writer should/MD/should be/VB/be able/JJ/able both/DT/both to/TO/to read/VB/read and/CC/and to/TO/to write/VB/write /:/) /./. it/PRP/it should/MD/should not/RB/not be/VB/be necessary/JJ/necessary to/TO/to grant/JJ/grant the/DT/the same/JJ/same set/NN/set of/IN/of rights/NNS/rights to/TO/to every/DT/every user/NN/user process/NN/process /,/, and/CC/and it/PRP/it should/MD/should be/VB/be impossible/JJ/impossible for/IN/for a/DT/a process/NN/process to/TO/to enlarge/VB/enlarge its/PRP$/its set/NN/set of/IN/of access/NN/access rights/NNS/rights /,/, except/IN/except with/IN/with the/DT/the authorization/NN/authorization of/IN/of the/DT/the access-control/JJ/access-control mechanism/NN/mechanism /./. specifying/VBG/specifying the/DT/the order/NN/order in/IN/in which/WDT/which a/DT/a particular/JJ/particular process/NN/process may/MD/may invoke/VB/invoke the/DT/the various/JJ/various operations/NNS/operations of/IN/of a/DT/a resource/NN/resource /:/( for/IN/for example/NN/example /,/, a/DT/a file/NN/file must/MD/must be/VB/be opened/VBN/opened before/IN/before it/PRP/it can/MD/can be/VB/be read/VBN/read /-NONE-/) /./. it/PRP/it should/MD/should be/VB/be possible/JJ/possible to/TO/to give/VB/give two/CD/two processes/NNS/processes different/JJ/different restrictions/NNS/restrictions on/IN/on the/DT/the order/NN/order in/IN/in which/WDT/which they/PRP/they can/MD/can invoke/VB/invoke the/DT/the operations/NNS/operations of/IN/of the/DT/the allocated/VBN/allocated resource/NN/resource /./. the/DT/the incorporation/NN/incorporation of/IN/of protection/NN/protection concepts/NNS/concepts into/IN/into programming/NN/programming languages/NNS/languages /,/, as/IN/as a/DT/a practical/JJ/practical tool/NN/tool for/IN/for system/NN/system design/NN/design /,/, is/VBZ/is in/IN/in its/PRP$/its infancy/NNP/infancy. protection/NN/protection will/MD/will likely/RB/likely become/VB/become a/DT/a matter/NN/matter of/IN/of greater/JJR/greater concern/NN/concern to/TO/to the/DT/the designers/NNS/designers of/IN/of new/JJ/new systems/NNS/systems with/IN/with distributed/JJ/distributed architectures/NNS/architectures and/CC/and increasingly/RB/increasingly stringent/JJ/stringent requirements/NNS/requirements on/IN/on data/NNS/data security/NNP/security. then/RB/then the/DT/the importance/NN/importance of/IN/of suitable/JJ/suitable language/NN/language notations/NNS/notations in/IN/in which/WDT/which to/TO/to express/NN/express protection/NN/protection requirements/NNS/requirements will/MD/will be/VB/be recognized/VBN/recognized more/RBR/more widely/RB/widely /./. 14.9.2/CD/14.9.2 protection/NN/protection in/IN/in java/NN/java because/IN/because java/NN/java was/VBD/was designed/VBN/designed to/TO/to run/VB/run in/IN/in a/DT/a distributed/VBN/distributed environment/NN/environment /,/, the/DT/the java/NN/java virtual/JJ/virtual machine-or/NN/machine-or jvm-has/VBZ/jvm-has many/JJ/many built-in/JJ/built-in protection/NN/protection mechanisms/NNP/mechanisms. java/NN/java programs/NNS/programs are/VBP/are composed/VBN/composed of/IN/of each/DT/each of/IN/of which/WDT/which is/VBZ/is a/DT/a collection/NN/collection of/IN/of data/NNS/data fields/NNS/fields and/CC/and functions/NNS/functions /:/( called/VBN/called that/IN/that operate/JJ/operate on/IN/on those/DT/those fields/NNP/fields. the/DT/the jvm/NN/jvm loads/NNS/loads a/DT/a class/NN/class in/IN/in response/NN/response to/TO/to a/DT/a request/NN/request to/TO/to create/VB/create instances/NNS/instances /:/( or/CC/or objects/NNS/objects /:/) of/IN/of that/DT/that class/NNP/class. one/CD/one of/IN/of the/DT/the most/RBS/most novel/JJ/novel and/CC/and useful/JJ/useful features/NNS/features ofj/VBP/ofj ava/NN/ava is/VBZ/is its/PRP$/its support/NN/support for/IN/for dynamically/RB/dynamically loading/VBG/loading untrusted/VBN/untrusted classes/NNS/classes over/IN/over a/DT/a network/NN/network and/CC/and for/IN/for executing/NN/executing mutually/RB/mutually distrusting/VBG/distrusting classes/NNS/classes within/IN/within the/DT/the same/JJ/same jvm/NN/jvm /./. because/IN/because of/IN/of these/DT/these capabilities/NNS/capabilities of/IN/of java/NN/java /,/, protection/NN/protection is/VBZ/is a/DT/a paramount/NN/paramount concern/NN/concern /./. classes/NNS/classes running/VBG/running in/IN/in the/DT/the same/JJ/same jvm/NN/jvm may/MD/may be/VB/be from/IN/from different/JJ/different sources/NNS/sources and/CC/and may/MD/may not/RB/not be/VB/be equally/RB/equally trusted/NNP/trusted. as/IN/as a/DT/a result/NN/result /,/, enforcing/NN/enforcing protection/NN/protection at/IN/at the/DT/the granularity/NN/granularity of/IN/of the/DT/the jvm/NN/jvm process/NN/process is/VBZ/is insufficient/NNP/insufficient. intuitively/RB/intuitively /,/, whether/IN/whether a/DT/a request/NN/request to/TO/to open/VB/open a/DT/a file/NN/file should/MD/should be/VB/be allowed/VBN/allowed will/MD/will generally/RB/generally depend/VB/depend on/IN/on which/WDT/which class/NN/class has/VBZ/has requested/VBN/requested the/DT/the open/NNP/open. the/DT/the operating/NN/operating system/NN/system lacks/VBZ/lacks this/DT/this knowledge/NN/knowledge /./. thus/RB/thus /,/, such/JJ/such protection/NN/protection decisions/NNS/decisions are/VBP/are handled/VBN/handled within/IN/within the/DT/the jvm/NNP/jvm. when/WRB/when the/DT/the jvm/NN/jvm loads/NNS/loads a/DT/a class/NN/class /,/, it/PRP/it assigns/VBZ/assigns the/DT/the class/NN/class to/TO/to a/DT/a protection/NN/protection domain/NN/domain that/WDT/that gives/VBZ/gives the/DT/the permissions/NNS/permissions of/IN/of that/DT/that class/NNP/class. the/DT/the protection/NN/protection domain/NN/domain to/TO/to which/WDT/which the/DT/the class/NN/class is/VBZ/is assigned/VBN/assigned depends/NNS/depends on/IN/on the/DT/the url/NN/url from/IN/from which/WDT/which the/DT/the class/NN/class was/VBD/was loaded/VBN/loaded and/CC/and any/DT/any digital/JJ/digital signatures/NNS/signatures on/IN/on the/DT/the class/NN/class file/NNP/file. /NNP/( digital/NN/digital signatures/NNS/signatures are/VBP/are covered/VBN/covered in/IN/in section/NN/section 15.4.1.3/CD/15.4.1.3. /CD/) a/DT/a configurable/JJ/configurable policy/NN/policy file/NN/file determines/NNS/determines the/DT/the permissions/NNS/permissions granted/VBD/granted to/TO/to the/DT/the domain/NN/domain /:/( and/CC/and its/PRP$/its classes/NNS/classes /:/) /./. for/IN/for example/NN/example /,/, classes/NNS/classes loaded/VBD/loaded from/IN/from a/DT/a trusted/VBN/trusted server/NN/server might/MD/might be/VB/be placed/VBN/placed in/IN/in a/DT/a protection/NN/protection domain/NN/domain that/WDT/that allows/VBZ/allows them/PRP/them to/TO/to access/NN/access files/NNS/files in/IN/in the/DT/the user/NN/user 's/POS/'s home/NN/home directory/NN/directory /,/, whereas/VBZ/whereas classes/NNS/classes loaded/VBN/loaded from/IN/from an/DT/an untrusted/JJ/untrusted server/NN/server might/MD/might have/VB/have no/DT/no file/NN/file access/NN/access permissions/NNS/permissions at/IN/at all/DT/all /./. 614/CD/614 chapter/NN/chapter 14/CD/14 it/PRP/it can/MD/can be/VB/be complicated/VBN/complicated for/IN/for the/DT/the jvm/NN/jvm to/TO/to determine/VB/determine what/WDT/what class/NN/class is/VBZ/is responsible/JJ/responsible for/IN/for a/DT/a request/NN/request to/TO/to access/NN/access a/DT/a protected/JJ/protected resource/NNP/resource. accesses/NNS/accesses are/VBP/are often/RB/often performed/VBN/performed indirectly/RB/indirectly /,/, through/IN/through system/NN/system libraries/NNS/libraries or/CC/or other/JJ/other classes/NNP/classes. for/IN/for example/NN/example /,/, consider/NN/consider a/DT/a class/NN/class that/WDT/that is/VBZ/is not/RB/not allowed/VBN/allowed to/TO/to open/VB/open network/NN/network connections/NNP/connections. it/PRP/it could/MD/could call/VB/call a/DT/a system/NN/system library/NN/library to/TO/to request/NN/request the/DT/the load/NN/load of/IN/of the/DT/the contents/NNS/contents of/IN/of a/DT/a url/NNP/url. the/DT/the jvm/NN/jvm must/MD/must decide/VB/decide whether/IN/whether or/CC/or not/RB/not to/TO/to open/VB/open a/DT/a network/NN/network connection/NN/connection for/IN/for this/DT/this request/NNP/request. but/CC/but which/WDT/which class/NN/class should/MD/should be/VB/be used/VBN/used to/TO/to determine/VB/determine if/IN/if the/DT/the connection/NN/connection should/MD/should be/VB/be allowed/VBN/allowed /,/, the/DT/the application/NN/application or/CC/or the/DT/the system/NN/system library/NN/library the/DT/the philosophy/NN/philosophy adopted/VBD/adopted in/IN/in java/NN/java is/VBZ/is to/TO/to require/VB/require the/DT/the library/NN/library class/NN/class to/TO/to explicitly/RB/explicitly permit/VB/permit a/DT/a network/NN/network corucection/NNP/corucection. more/RBR/more generally/RB/generally /,/, in/IN/in order/NN/order to/TO/to access/NN/access a/DT/a protected/JJ/protected resource/NN/resource /,/, some/DT/some method/NN/method in/IN/in the/DT/the calling/NN/calling sequence/NN/sequence that/WDT/that resulted/VBN/resulted in/IN/in the/DT/the request/NN/request must/MD/must explicitly/RB/explicitly assert/VB/assert the/DT/the privilege/NN/privilege to/TO/to access/NN/access the/DT/the resource/NNP/resource. by/IN/by doing/VBG/doing so/RB/so /,/, this/DT/this method/NN/method takes/VBZ/takes responsibility/NN/responsibility for/IN/for the/DT/the request/NN/request ;/:/; presumably/RB/presumably /,/, it/PRP/it will/MD/will also/RB/also perform/VB/perform whatever/RB/whatever checks/NNS/checks are/VBP/are necessary/JJ/necessary to/TO/to ensure/VB/ensure the/DT/the safety/NN/safety of/IN/of the/DT/the request/NNP/request. of/IN/of course/NN/course /,/, not/RB/not every/DT/every method/NN/method is/VBZ/is allowed/VBN/allowed to/TO/to assert/VB/assert a/DT/a privilege/NN/privilege ;/:/; a/DT/a method/NN/method can/MD/can assert/VB/assert a/DT/a privilege/NN/privilege only/RB/only if/IN/if its/PRP$/its class/NN/class is/VBZ/is in/IN/in a/DT/a protection/NN/protection domain/NN/domain that/WDT/that is/VBZ/is itself/PRP/itself allowed/VBD/allowed to/TO/to exercise/VB/exercise the/DT/the privilege/NN/privilege /./. this/DT/this implementation/NN/implementation approach/NN/approach is/VBZ/is called/VBN/called every/DT/every thread/NN/thread in/IN/in the/DT/the jvm/NN/jvm has/VBZ/has an/DT/an associated/VBN/associated stack/NN/stack of/IN/of its/PRP$/its ongoing/JJ/ongoing invocations/NNP/invocations. when/WRB/when a/DT/a caller/NN/caller may/MD/may not/RB/not be/VB/be trusted/VBN/trusted /,/, a/DT/a method/NN/method executes/VBZ/executes an/DT/an access/NN/access request/NN/request within/IN/within a/DT/a dopri/NN/dopri vileged/VBD/vileged block/NN/block to/TO/to perform/NN/perform the/DT/the access/NN/access to/TO/to a/DT/a protected/JJ/protected resource/NN/resource directly/RB/directly or/CC/or indirectly/NNP/indirectly. dopri/NN/dopri vileged/VBD/vileged /CD/( /CD/) is/VBZ/is a/DT/a static/JJ/static method/NN/method in/IN/in the/DT/the accesscontroller/NN/accesscontroller class/NN/class that/WDT/that is/VBZ/is passed/VBN/passed a/DT/a class/NN/class with/IN/with a/DT/a run/NN/run /:/( /:/) method/NN/method to/TO/to invoke/NNP/invoke. when/WRB/when the/DT/the dopri/NN/dopri vileged/VBD/vileged block/NN/block is/VBZ/is entered/VBN/entered /,/, the/DT/the stack/NN/stack frame/NN/frame for/IN/for this/DT/this method/NN/method is/VBZ/is annotated/VBN/annotated to/TO/to indicate/VB/indicate this/DT/this fact/NNP/fact. then/RB/then /,/, the/DT/the contents/NNS/contents of/IN/of the/DT/the block/NN/block are/VBP/are executed/NNP/executed. when/WRB/when an/DT/an access/NN/access to/TO/to a/DT/a protected/JJ/protected resource/NN/resource is/VBZ/is subsequently/RB/subsequently requested/VBN/requested /,/, either/DT/either by/IN/by this/DT/this method/NN/method or/CC/or a/DT/a method/NN/method it/PRP/it calls/VBZ/calls /,/, a/DT/a call/NN/call to/TO/to checkpermissions/NNS/checkpermissions /:/( /:/) is/VBZ/is used/VBN/used to/TO/to invoke/VB/invoke stack/NN/stack inspection/NN/inspection to/TO/to determine/VB/determine if/IN/if the/DT/the request/NN/request should/MD/should be/VB/be allowed/NNP/allowed. the/DT/the inspection/NN/inspection examines/NNS/examines stack/VBP/stack frames/NNS/frames on/IN/on the/DT/the calling/NN/calling thread/NN/thread 's/POS/'s stack/NN/stack /,/, starting/VBG/starting from/IN/from the/DT/the most/RBS/most recently/RB/recently added/VBD/added frame/NN/frame and/CC/and working/VBG/working toward/IN/toward the/DT/the oldest/NNP/oldest. if/IN/if a/DT/a stack/NN/stack frame/NN/frame is/VBZ/is first/JJ/first found/NN/found that/IN/that has/VBZ/has the/DT/the dopri/NN/dopri vileged/VBD/vileged /CD/( /CD/) annotation/NN/annotation /,/, then/RB/then checkpermissions/NNS/checkpermissions /:/( /:/) returns/NNS/returns immediately/RB/immediately and/CC/and silently/RB/silently /,/, allowing/VBG/allowing the/DT/the access/NNP/access. if/IN/if a/DT/a stack/NN/stack frame/NN/frame is/VBZ/is first/JJ/first found/NN/found for/IN/for which/WDT/which access/NN/access is/VBZ/is disallowed/VBN/disallowed based/VBN/based on/IN/on the/DT/the protection/NN/protection domain/NN/domain of/IN/of the/DT/the method/NN/method 's/POS/'s class/NN/class /,/, then/RB/then checkpermissions/NNS/checkpermissions /:/( /:/) throws/VBZ/throws an/DT/an accesscontrolexception/NNP/accesscontrolexception. if/IN/if the/DT/the stack/NN/stack inspection/NN/inspection exhausts/NNS/exhausts the/DT/the stack/NN/stack without/IN/without finding/NN/finding either/DT/either type/NN/type of/IN/of frame/NN/frame /,/, then/RB/then whether/IN/whether access/NN/access is/VBZ/is allowed/VBN/allowed depends/NNS/depends on/IN/on the/DT/the implementation/NN/implementation /:/( for/IN/for example/NN/example /,/, some/DT/some implementations/NNS/implementations of/IN/of the/DT/the jvm/NN/jvm may/MD/may allow/VB/allow access/NN/access /,/, while/IN/while other/JJ/other implementations/NNS/implementations may/MD/may disallow/VB/disallow it/PRP/it /:/) /./. stack/NN/stack inspection/NN/inspection is/VBZ/is illustrated/VBN/illustrated in/IN/in figure/NN/figure 14.9/CD/14.9. here/RB/here /,/, the/DT/the gui/NN/gui /:/( /:/) method/NN/method of/IN/of a/DT/a class/NN/class in/IN/in the/DT/the untrusted/VBN/untrusted applet/NN/applet protection/NN/protection domain/NN/domain performs/NNS/performs two/CD/two operations/NNS/operations /,/, first/JJ/first a/DT/a get/NN/get /:/( /:/) and/CC/and then/RB/then an/DT/an open/JJ/open /NN/( /:/) /./. the/DT/the former/JJ/former is/VBZ/is an/DT/an invocation/NN/invocation of/IN/of the/DT/the get/NN/get /:/( /:/) method/NN/method of/IN/of a/DT/a class/NN/class in/IN/in the/DT/the url/NN/url loader/NN/loader protection/NN/protection domain/NN/domain /,/, which/WDT/which is/VBZ/is permitted/VBN/permitted to/TO/to open/VB/open /:/( /:/) sessions/NNS/sessions to/TO/to sites/NNS/sites in/IN/in the/DT/the lucent/NNP/lucent. com/NN/com domain/NN/domain /,/, in/IN/in particular/JJ/particular a/DT/a proxy/NN/proxy server/NN/server proxy/NN/proxy .lucent/NNP/.lucent. com/NN/com for/IN/for retrieving/NN/retrieving urls/NNP/urls. for/IN/for this/DT/this reason/NN/reason /,/, the/DT/the untrusted/VBN/untrusted applet/NN/applet 's/POS/'s get/NN/get /:/( /:/) invocation/NN/invocation will/MD/will succeed/VB/succeed /:/: the/DT/the checkpermissions/NNS/checkpermissions /:/( /:/) call/NN/call in/IN/in the/DT/the networking/NN/networking library/NN/library encounters/NNS/encounters the/DT/the stack/NN/stack frame/NN/frame of/IN/of the/DT/the get/NN/get /:/( /:/) method/NN/method /,/, which/WDT/which performed/VBN/performed its/PRP$/its open/JJ/open /NN/( /:/) in/IN/in a/DT/a dopri/NN/dopri vileged/VBD/vileged block/NNP/block. however/RB/however /,/, the/DT/the untrusted/VBN/untrusted applet/NN/applet 's/POS/'s open/JJ/open /NN/( /:/) invocation/NN/invocation will/MD/will result/VB/result in/IN/in an/DT/an exception/NN/exception /,/, because/IN/because the/DT/the checkpermissions/NNS/checkpermissions /:/( /:/) call/NN/call finds/NNS/finds no/DT/no dopri/NN/dopri vileged/VBD/vileged annotation/NN/annotation before/IN/before encountering/VBG/encountering the/DT/the stack/NN/stack frame/NN/frame of/IN/of the/DT/the gui/NN/gui /:/( /:/) method/NN/method /./. 14.10/CD/14.10 protection/NN/protection domain/NN/domain /:/: socket/NN/socket permission/NN/permission /:/: class/NN/class /:/: none/NN/none gui/NN/gui /:/: get/NN/get /:/( uri/NN/uri /:/) ;/:/; open/JJ/open /NN/( addr/NN/addr /:/) ;/:/; 14.10/CD/14.10 .lucent.com/NN/.lucent.com /:/: 80/CD/80 /,/, connect/JJ/connect get/NN/get /:/( url/NN/url u/NN/u /:/) /:/: doprivileged/JJ/doprivileged /NN/{ open/JJ/open /NN/( 'proxy.lucent.com/NN/'proxy.lucent.com /:/: 80/CD/80 '/''/' /CD/) ;/:/; /:/} request/NN/request u/NN/u from/IN/from proxy/NN/proxy figure/NN/figure 14.9/CD/14.9 stack/NN/stack inspection/NN/inspection /./. 615/CD/615 any/DT/any open/JJ/open /NN/( addr/NN/addr a/DT/a /NN/) /:/: checkpermission/NN/checkpermission /:/( a/DT/a /,/, connect/NN/connect /:/) ;/:/; connect/NN/connect /:/( a/DT/a /NN/) ;/:/; of/IN/of course/NN/course /,/, for/IN/for stack/NN/stack inspection/NN/inspection to/TO/to work/VB/work /,/, a/DT/a program/NN/program must/MD/must be/VB/be unable/JJ/unable to/TO/to modify/VB/modify the/DT/the annotations/NNS/annotations on/IN/on its/PRP$/its own/JJ/own stack/NN/stack frame/NN/frame or/CC/or to/TO/to do/VB/do other/JJ/other manipulations/NNS/manipulations of/IN/of stack/NN/stack inspection/NNP/inspection. this/DT/this is/VBZ/is one/CD/one of/IN/of the/DT/the most/RBS/most important/JJ/important differences/NNS/differences between/IN/between java/NN/java and/CC/and many/JJ/many other/JJ/other languages/NNS/languages /:/( including/VBG/including c/NN/c +/:/+ +/:/+ /:/) /./. a/DT/a java/NN/java program/NN/program can/MD/can not/RB/not directly/RB/directly access/NN/access memory/NN/memory ;/:/; it/PRP/it can/MD/can manipulate/VB/manipulate only/RB/only an/DT/an object/NN/object for/IN/for which/WDT/which it/PRP/it has/VBZ/has a/DT/a reference/NNP/reference. references/VBZ/references can/MD/can not/RB/not be/VB/be forged/VBN/forged /,/, and/CC/and the/DT/the manipulations/NNS/manipulations are/VBP/are made/VBN/made only/RB/only through/IN/through well-defined/JJ/well-defined interfaces/NNP/interfaces. compliance/NN/compliance is/VBZ/is enforced/VBN/enforced through/IN/through a/DT/a sophisticated/JJ/sophisticated collection/NN/collection of/IN/of load-time/JJ/load-time and/CC/and run-time/JJ/run-time checks/NNP/checks. as/IN/as a/DT/a result/NN/result /,/, an/DT/an object/NN/object can/MD/can not/RB/not manipulate/VB/manipulate its/PRP$/its run-time/JJ/run-time stack/NN/stack /,/, because/IN/because it/PRP/it camlot/VBD/camlot get/VB/get a/DT/a reference/NN/reference to/TO/to the/DT/the stack/NN/stack or/CC/or other/JJ/other components/NNS/components of/IN/of the/DT/the protection/NN/protection system/NN/system /./. more/JJR/more generally/RB/generally /,/, java/NN/java 's/POS/'s load-time/JJ/load-time and/CC/and run-time/JJ/run-time checks/NNS/checks enforce/NN/enforce of/IN/of java/NN/java classes/NNP/classes. type/NN/type safety/NN/safety ensures/NNS/ensures that/WDT/that classes/VBZ/classes can/MD/can not/RB/not treat/VB/treat integers/NNS/integers as/IN/as pointers/NNS/pointers /,/, write/JJ/write past/NN/past the/DT/the end/NN/end of/IN/of an/DT/an array/NN/array /,/, or/CC/or otherwise/RB/otherwise access/NN/access memory/NN/memory in/IN/in arbitrary/JJ/arbitrary ways/NNS/ways /./. rather/RB/rather /,/, a/DT/a program/NN/program can/MD/can access/VB/access an/DT/an object/NN/object only/RB/only via/IN/via the/DT/the methods/NNS/methods defined/VBD/defined on/IN/on that/DT/that object/NN/object by/IN/by its/PRP$/its class/NNP/class. this/DT/this is/VBZ/is the/DT/the f01mdation/NNP/f01mdation of/IN/of java/NN/java protection/NN/protection /,/, since/IN/since it/PRP/it enables/VBZ/enables a/DT/a class/NN/class to/TO/to effectively/RB/effectively /:/- and/CC/and protect/VB/protect its/PRP$/its data/NNS/data and/CC/and methods/NNS/methods from/IN/from other/JJ/other classes/NNS/classes loaded/VBD/loaded in/IN/in the/DT/the same/JJ/same jvm/NNP/jvm. for/IN/for example/NN/example /,/, a/DT/a variable/JJ/variable can/NN/can be/VB/be defined/VBN/defined as/IN/as private/JJ/private so/IN/so that/IN/that only/RB/only the/DT/the class/NN/class that/IN/that contains/NNS/contains it/PRP/it can/MD/can access/VB/access it/PRP/it or/CC/or protected/VBN/protected so/RB/so that/IN/that it/PRP/it can/MD/can be/VB/be accessed/VBN/accessed only/RB/only by/IN/by the/DT/the class/NN/class that/IN/that contains/NNS/contains it/PRP/it /,/, subclasses/VBZ/subclasses of/IN/of that/DT/that class/NN/class /,/, or/CC/or classes/NNS/classes in/IN/in the/DT/the same/JJ/same package/NNP/package. type/NN/type safety/NN/safety ensures/NNS/ensures that/WDT/that these/DT/these restrictions/NNS/restrictions can/MD/can be/VB/be enforced/VBN/enforced /./. computer/NN/computer systems/NNS/systems contain/VBP/contain many/JJ/many objects/NNS/objects /,/, and/CC/and they/PRP/they need/VBP/need to/TO/to be/VB/be protected/VBN/protected from/IN/from misuse/NNP/misuse. objects/NNS/objects may/MD/may be/VB/be hardware/NN/hardware /:/( such/JJ/such as/IN/as memory/NN/memory /,/, cpu/NN/cpu time/NN/time /,/, and/CC/and i/0/-NONE-/i/0 devices/NNS/devices /:/) or/CC/or software/NN/software /:/( such/JJ/such as/IN/as files/NNS/files /,/, programs/NNS/programs /,/, and/CC/and semaphores/NNS/semaphores /:/) /./. an/DT/an access/NN/access right/RB/right is/VBZ/is permission/NN/permission to/TO/to perform/VB/perform an/DT/an operation/NN/operation on/IN/on an/DT/an object/NNP/object. a/DT/a domain/NN/domain is/VBZ/is a/DT/a set/NN/set of/IN/of access/NN/access rights/NNP/rights. processes/NNS/processes execute/VBP/execute in/IN/in domains/NNS/domains and/CC/and may/MD/may use/VB/use any/DT/any of/IN/of the/DT/the access/NN/access rights/NNS/rights in/IN/in the/DT/the domain/NN/domain to/TO/to access/NN/access and/CC/and manipulate/JJ/manipulate objects/NNP/objects. during/IN/during its/PRP$/its lifetime/NN/lifetime /,/, a/DT/a process/NN/process may/MD/may be/VB/be either/RB/either bound/VB/bound to/TO/to a/DT/a protection/NN/protection domain/NN/domain or/CC/or allowed/VBN/allowed to/TO/to switch/VB/switch from/IN/from one/CD/one domain/NN/domain to/TO/to another/DT/another /./. 616/CD/616 chapter/NN/chapter 14/CD/14 the/DT/the access/NN/access matrix/NN/matrix is/VBZ/is a/DT/a general/JJ/general model/NN/model of/IN/of protection/NN/protection that/IN/that provides/VBZ/provides a/DT/a mechanisnc/NN/mechanisnc for/IN/for protection/NN/protection without/IN/without imposing/VBG/imposing a/DT/a particular/JJ/particular protection/NN/protection policy/NN/policy on/IN/on the/DT/the system/NN/system or/CC/or its/PRP$/its users/NNP/users. the/DT/the separation/NN/separation of/IN/of policy/NN/policy and/CC/and mechanism/NN/mechanism is/VBZ/is an/DT/an important/JJ/important design/NN/design property/NN/property /./. the/DT/the access/NN/access matrix/NN/matrix is/VBZ/is sparse/NNP/sparse. it/PRP/it is/VBZ/is normally/RB/normally implemented/VBN/implemented either/DT/either as/IN/as access/NN/access lists/NNS/lists associated/VBN/associated with/IN/with each/DT/each object/NN/object or/CC/or as/IN/as capability/NN/capability lists/NNS/lists associated/VBN/associated with/IN/with each/DT/each domain/NN/domain /./. we/PRP/we can/MD/can include/VB/include dynamic/JJ/dynamic protection/NN/protection in/IN/in the/DT/the access-matrix/JJ/access-matrix model/NN/model by/IN/by considering/NN/considering domains/NNS/domains and/CC/and the/DT/the access/NN/access matrix/NN/matrix itself/PRP/itself as/IN/as objects/NNP/objects. revocation/NN/revocation of/IN/of access/NN/access rights/NNS/rights in/IN/in a/DT/a dynamic/JJ/dynamic protection/NN/protection model/NN/model is/VBZ/is typically/RB/typically easier/JJR/easier to/TO/to implement/VB/implement with/IN/with an/DT/an access-list/JJ/access-list scheme/NN/scheme than/IN/than with/IN/with a/DT/a capability/NN/capability list/NN/list /./. real/JJ/real systems/NNS/systems are/VBP/are much/RB/much more/RBR/more limited/VBN/limited than/IN/than the/DT/the general/JJ/general model/NN/model and/CC/and tend/NN/tend to/TO/to provide/VB/provide protection/NN/protection only/RB/only for/IN/for files/NNP/files. unix/CD/unix is/VBZ/is representative/JJ/representative /,/, providing/VBG/providing read/NN/read /,/, write/JJ/write /,/, and/CC/and execution/NN/execution protection/NN/protection separately/RB/separately for/IN/for the/DT/the owner/NN/owner /,/, group/NN/group /,/, and/CC/and general/JJ/general public/JJ/public for/IN/for each/DT/each file/NNP/file. multics/NNS/multics uses/VBZ/uses a/DT/a ring/NN/ring structure/NN/structure in/IN/in addition/NN/addition to/TO/to file/VB/file access/NNP/access. hydra/NN/hydra /,/, the/DT/the cambridge/NN/cambridge cap/NN/cap system/NN/system /,/, and/CC/and mach/DT/mach are/VBP/are capability/NN/capability systems/NNS/systems that/WDT/that extend/VBP/extend protection/NN/protection to/TO/to user-defined/JJ/user-defined software/NN/software objects/NNP/objects. solaris/VBZ/solaris 10/CD/10 implements/NNS/implements the/DT/the principle/NN/principle of/IN/of least/JJS/least privilege/NN/privilege via/IN/via role-based/JJ/role-based access/NN/access controt/NN/controt a/DT/a form/NN/form of/IN/of the/DT/the access/NN/access matrix/NN/matrix /./. language-based/JJ/language-based protection/NN/protection provides/VBZ/provides finer-grained/JJ/finer-grained arbitration/NN/arbitration of/IN/of requests/NNS/requests and/CC/and privileges/NNS/privileges than/IN/than the/DT/the operating/NN/operating system/NN/system is/VBZ/is able/JJ/able to/TO/to provide/NNP/provide. for/IN/for example/NN/example /,/, a/DT/a single/JJ/single java/NN/java jvm/NN/jvm can/MD/can run/VB/run several/JJ/several threads/NNS/threads /,/, each/DT/each in/IN/in a/DT/a different/JJ/different protection/NN/protection class/NNP/class. it/PRP/it enforces/VBZ/enforces the/DT/the resource/NN/resource requests/NNS/requests through/IN/through sophisticated/JJ/sophisticated stack/NN/stack inspection/NN/inspection and/CC/and via/IN/via the/DT/the type/NN/type safety/NN/safety of/IN/of the/DT/the language/NN/language /./. 14.1/CD/14.1 consider/NN/consider a/DT/a computer/NN/computer system/NN/system in/IN/in which/WDT/which computer/NN/computer games/VBZ/games can/MD/can be/VB/be played/VBN/played by/IN/by students/NNS/students only/RB/only between/IN/between 10/CD/10 p.m/NN/p.m. and/CC/and 6/CD/6 a.m/NNP/a.m. /,/, by/IN/by faculty/NN/faculty members/NNS/members between/IN/between 5/CD/5 p.m/NN/p.m. and/CC/and 8/CD/8 a.m/NNP/a.m. /,/, and/CC/and by/IN/by the/DT/the computer/NN/computer center/NN/center staff/NN/staff at/IN/at all/DT/all times/NNP/times. suggest/VBP/suggest a/DT/a scheme/NN/scheme for/IN/for implementing/NN/implementing this/DT/this policy/NN/policy efficiently/RB/efficiently /./. 14.2/CD/14.2 the/DT/the rc/NN/rc 4000/CD/4000 system/NN/system /,/, among/IN/among others/NNS/others /,/, has/VBZ/has defined/VBN/defined a/DT/a tree/NN/tree of/IN/of processes/NNS/processes /:/( called/VBN/called a/DT/a process/NN/process tree/NN/tree /:/) such/JJ/such that/IN/that all/DT/all the/DT/the descendants/NNS/descendants of/IN/of a/DT/a process/NN/process can/MD/can be/VB/be given/VBN/given resources/NNS/resources /:/( objects/NNS/objects /VBP/) and/CC/and access/NN/access rights/NNS/rights by/IN/by their/PRP$/their ancestors/NNS/ancestors only/NNP/only. thus/RB/thus /,/, a/DT/a descendant/NN/descendant can/MD/can never/RB/never have/VB/have the/DT/the ability/NN/ability to/TO/to do/VB/do anything/NN/anything that/WDT/that its/PRP$/its ancestors/NNS/ancestors can/MD/can not/RB/not do/VB/do. the/DT/the root/NN/root of/IN/of the/DT/the tree/NN/tree is/VBZ/is the/DT/the operating/NN/operating system/NN/system /,/, which/WDT/which has/VBZ/has the/DT/the ability/NN/ability to/TO/to do/VB/do anything/NNP/anything. assume/VB/assume the/DT/the set/NN/set of/IN/of access/NN/access rights/NNS/rights is/VBZ/is represented/VBN/represented by/IN/by an/DT/an access/NN/access matrix/NN/matrix /,/, a/NNP/a. a/DT/a /NN/( x,y/NN/x,y /:/) defines/NNS/defines the/DT/the access/NN/access rights/NNS/rights of/IN/of process/NN/process x/NN/x to/TO/to object/VB/object y/NNP/y. if/IN/if xis/NNS/xis a/DT/a descendant/JJ/descendant of/IN/of z/NN/z /,/, what/WP/what is/VBZ/is the/DT/the relationship/NN/relationship between/IN/between a/DT/a /NN/( x,y/NN/x,y /:/) and/CC/and a/DT/a /NN/( z,y/NN/z,y /:/) for/IN/for an/DT/an arbitrary/JJ/arbitrary object/NN/object y/NN/y 14.3/CD/14.3 how/WRB/how are/VBP/are the/DT/the access-matrix/JJ/access-matrix facility/NN/facility and/CC/and the/DT/the role-based/JJ/role-based access-control/NN/access-control facility/NN/facility similar/JJ/similar how/WRB/how do/VBP/do they/PRP/they differ/VBP/differ 14.4/CD/14.4 discuss/NNS/discuss the/DT/the need/NN/need for/IN/for rights/NNS/rights amplification/NN/amplification in/IN/in hydra/NNP/hydra. how/WRB/how does/VBZ/does this/DT/this practice/NN/practice compare/NN/compare with/IN/with the/DT/the cross-ring/JJ/cross-ring calls/NNS/calls in/IN/in a/DT/a ring-protection/NN/ring-protection scheme/NN/scheme 617/CD/617 14.5/CD/14.5 explain/NN/explain why/WRB/why a/DT/a capability-based/JJ/capability-based system/NN/system such/JJ/such as/IN/as hydra/NN/hydra provides/VBZ/provides greater/JJR/greater flexibility/NN/flexibility than/IN/than the/DT/the ring-protection/NN/ring-protection scheme/NN/scheme in/IN/in enforcing/NN/enforcing protection/NN/protection policies/NNS/policies /./. 14.6/CD/14.6 consider/NN/consider the/DT/the ring-protection/NN/ring-protection scheme/NN/scheme in/IN/in multics/NNP/multics. if/IN/if we/PRP/we were/VBD/were to/TO/to implement/VB/implement the/DT/the system/NN/system calls/VBZ/calls of/IN/of a/DT/a typical/JJ/typical operating/NN/operating system/NN/system and/CC/and store/NN/store them/PRP/them in/IN/in a/DT/a segment/NN/segment associated/VBN/associated with/IN/with ring/NN/ring 0/-NONE-/0 /,/, what/WP/what should/MD/should be/VB/be the/DT/the values/NNS/values stored/VBD/stored in/IN/in the/DT/the ring/NN/ring field/NN/field of/IN/of the/DT/the segment/NN/segment descriptor/NN/descriptor what/WP/what happens/NNS/happens during/IN/during a/DT/a system/NN/system call/NN/call when/WRB/when a/DT/a process/NN/process executing/VBG/executing in/IN/in a/DT/a higher-numbered/JJ/higher-numbered ring/NN/ring invokes/VBZ/invokes a/DT/a procedure/NN/procedure in/IN/in ring/NN/ring 0/-NONE-/0 14.7/CD/14.7 discuss/NNS/discuss the/DT/the strengths/NNS/strengths and/CC/and weaknesses/NNS/weaknesses of/IN/of implementing/VBG/implementing an/DT/an access/NN/access matrix/NN/matrix using/VBG/using capabilities/NNS/capabilities that/WDT/that are/VBP/are associated/VBN/associated with/IN/with domains/NNS/domains /./. 14.8/CD/14.8 discuss/NNS/discuss the/DT/the strengths/NNS/strengths and/CC/and weaknesses/NNS/weaknesses of/IN/of implementing/VBG/implementing an/DT/an access/NN/access matrix/NN/matrix using/VBG/using access/NN/access lists/NNS/lists that/WDT/that are/VBP/are associated/VBN/associated with/IN/with objects/NNS/objects /./. 14.9/CD/14.9 the/DT/the access-control/JJ/access-control matrix/NN/matrix can/MD/can be/VB/be used/VBN/used to/TO/to determine/VB/determine whether/IN/whether a/DT/a process/NN/process can/MD/can switch/VB/switch from/IN/from /,/, say/VBP/say /,/, domain/NN/domain a/DT/a to/TO/to domain/VB/domain b/NN/b and/CC/and enjoy/NN/enjoy the/DT/the access/NN/access privileges/NNS/privileges of/IN/of domain/NN/domain b/NNP/b. is/VBZ/is this/DT/this approach/NN/approach equivalent/NN/equivalent to/TO/to including/VBG/including the/DT/the access/NN/access privileges/NNS/privileges of/IN/of domain/NN/domain b/NN/b in/IN/in those/DT/those of/IN/of domain/NN/domain a/DT/a 14.10/CD/14.10 how/WRB/how can/MD/can systems/NNS/systems that/WDT/that implement/NN/implement the/DT/the principle/NN/principle of/IN/of least/JJS/least privilege/NN/privilege still/RB/still have/VBP/have protection/NN/protection failures/NNS/failures that/WDT/that lead/NN/lead to/TO/to security/NN/security violations/NNS/violations 14.11/CD/14.11 how/WRB/how does/VBZ/does the/DT/the principle/NN/principle of/IN/of least/JJS/least privilege/NN/privilege aid/NN/aid in/IN/in the/DT/the creation/NN/creation of/IN/of protection/NN/protection systems/NNS/systems 14.12/CD/14.12 what/WP/what protection/NN/protection problems/NNS/problems may/MD/may arise/VB/arise if/IN/if a/DT/a shared/VBN/shared stack/NN/stack is/VBZ/is used/VBN/used for/IN/for parameter/NN/parameter passing/VBG/passing 14.13/CD/14.13 if/IN/if all/DT/all the/DT/the access/NN/access rights/NNS/rights to/TO/to an/DT/an object/NN/object are/VBP/are deleted/VBN/deleted /,/, the/DT/the object/NN/object can/MD/can no/RB/no longer/RBR/longer be/VB/be accessed/NNP/accessed. at/IN/at this/DT/this point/NN/point the/DT/the object/NN/object should/MD/should also/RB/also be/VB/be deleted/VBN/deleted /,/, and/CC/and the/DT/the space/NN/space it/PRP/it occupies/VBZ/occupies should/MD/should be/VB/be returned/VBN/returned to/TO/to the/DT/the system/NNP/system. suggest/VBP/suggest an/DT/an efficient/NN/efficient implementation/NN/implementation of/IN/of this/DT/this scheme/NN/scheme /./. 14.14/CD/14.14 discuss/NNS/discuss which/WDT/which of/IN/of the/DT/the following/JJ/following systems/NNS/systems allow/VBP/allow module/NN/module designers/NNS/designers to/TO/to enforce/VB/enforce the/DT/the need-to-know/JJ/need-to-know principle/NN/principle /./. a/NNP/a. the/DT/the multics/NNS/multics ring-protection/NN/ring-protection scheme/NN/scheme b/NNP/b. hydra/NN/hydra 's/POS/'s capabilities/NNS/capabilities c/NNP/c. jvm/NN/jvm 's/POS/'s stack-inspection/NN/stack-inspection scheme/NN/scheme 618/CD/618 chapter/NN/chapter 14/CD/14 14.15/CD/14.15 consider/NN/consider a/DT/a computing/NN/computing environment/NN/environment where/WRB/where a/DT/a unique/JJ/unique number/NN/number is/VBZ/is associated/VBN/associated with/IN/with each/DT/each process/NN/process and/CC/and each/DT/each object/NN/object in/IN/in the/DT/the system/NNP/system. suppose/NN/suppose that/WDT/that we/PRP/we allow/VBP/allow a/DT/a process/NN/process with/IN/with number/NN/number n/NN/n to/TO/to access/NN/access an/DT/an object/NN/object with/IN/with number/NN/number m/NN/m only/RB/only if/IN/if n/NN/n m/NNP/m. what/WP/what type/NN/type of/IN/of protection/NN/protection structure/NN/structure do/VBP/do we/PRP/we have/VB/have 14.16/CD/14.16 what/WP/what is/VBZ/is the/DT/the need-to-know/JJ/need-to-know principle/NN/principle why/WRB/why is/VBZ/is it/PRP/it important/JJ/important for/IN/for a/DT/a protection/NN/protection system/NN/system to/TO/to adhere/VB/adhere to/TO/to this/DT/this principle/NN/principle 14.17/CD/14.17 what/WP/what hardware/NN/hardware features/NNS/features does/VBZ/does a/DT/a computer/NN/computer system/NN/system need/VBP/need for/IN/for efficient/NN/efficient capability/NN/capability manipulation/NN/manipulation can/MD/can these/DT/these features/NNS/features be/VB/be used/VBN/used for/IN/for memory/NN/memory protection/NN/protection 14.18/CD/14.18 describe/NN/describe how/WRB/how the/DT/the java/NN/java protection/NN/protection model/NN/model would/MD/would be/VB/be compromised/VBN/compromised if/IN/if a/DT/a java/NN/java program/NN/program were/VBD/were allowed/VBN/allowed to/TO/to directly/RB/directly alter/JJR/alter the/DT/the annotations/NNS/annotations of/IN/of its/PRP$/its stack/NN/stack frame/NN/frame /./. 14.19/CD/14.19 a/DT/a burroughs/NNS/burroughs b7000/b6000/-NONE-/b7000/b6000 mcp/VB/mcp file/JJ/file can/NN/can be/VB/be tagged/VBN/tagged as/IN/as sensitive/JJ/sensitive data/NNS/data /./. when/WRB/when such/JJ/such a/DT/a file/NN/file is/VBZ/is deleted/VBN/deleted /,/, its/PRP$/its storage/NN/storage area/NN/area is/VBZ/is overwritten/VBN/overwritten by/IN/by some/DT/some random/NN/random bits/NNP/bits. for/IN/for what/WP/what purpose/NN/purpose would/MD/would such/VB/such a/DT/a scheme/NN/scheme be/VB/be useful/JJ/useful the/DT/the access-matrix/JJ/access-matrix model/NN/model of/IN/of protection/NN/protection between/IN/between domains/NNS/domains and/CC/and objects/NNS/objects was/VBD/was developed/VBN/developed by/IN/by lampson/NN/lampson /:/[ 1969/CD/1969 /CD/] and/CC/and lampson/NN/lampson /:/[ 1971/CD/1971 /CD/] /./. popek/NN/popek /:/[ 1974/CD/1974 /CD/] and/CC/and saltzer/NN/saltzer and/CC/and schroeder/NN/schroeder /:/[ 1975/CD/1975 /CD/] provided/VBN/provided excellent/NN/excellent surveys/NNS/surveys on/IN/on the/DT/the subject/NN/subject of/IN/of protection/NN/protection /./. harrison/NN/harrison et/NN/et al/NNP/al. /NNP/[ 1976/CD/1976 /CD/] used/VBN/used a/DT/a formal/JJ/formal version/NN/version of/IN/of this/DT/this model/NN/model to/TO/to enable/JJ/enable them/PRP/them to/TO/to prove/VB/prove properties/NNS/properties of/IN/of a/DT/a protection/NN/protection system/NN/system mathematically/RB/mathematically /./. the/DT/the concept/NN/concept of/IN/of a/DT/a capability/NN/capability evolved/VBD/evolved from/IN/from iliffe/NN/iliffe 's/POS/'s and/CC/and jodeit/NN/jodeit 's/POS/'s codewords/NNS/codewords /,/, which/WDT/which were/VBD/were implemented/VBN/implemented in/IN/in the/DT/the rice/NN/rice university/NN/university computer/NN/computer /:/( iliffe/NN/iliffe and/CC/and jodeit/NN/jodeit /:/[ 1962/CD/1962 /CD/] /CD/) /./. the/DT/the term/NN/term capability/NN/capability was/VBD/was introduced/VBN/introduced by/IN/by dennis/NNS/dennis and/CC/and horn/NN/horn /:/[ 1966/CD/1966 /CD/] /./. the/DT/the hydra/NN/hydra system/NN/system was/VBD/was described/VBN/described by/IN/by wulf/NN/wulf et/NN/et al/NNP/al. /NNP/[ 1981/CD/1981 /CD/] /./. the/DT/the cap/NN/cap system/NN/system was/VBD/was described/VBN/described by/IN/by needham/NN/needham and/CC/and walker/NN/walker /:/[ 1977/CD/1977 /CD/] /./. organick/NN/organick /:/[ 1972/CD/1972 /CD/] discussed/VBN/discussed the/DT/the multics/NNS/multics ring-protection/NN/ring-protection system/NN/system /./. revocation/NN/revocation was/VBD/was discussed/VBN/discussed by/IN/by redell/NN/redell and/CC/and fabry/NN/fabry /:/[ 1974/CD/1974 /CD/] /,/, cohen/RB/cohen and/CC/and jefferson/NN/jefferson /:/[ 1975/CD/1975 /CD/] /,/, and/CC/and ekanadham/NN/ekanadham and/CC/and bernstein/NN/bernstein /:/[ 1979/CD/1979 /CD/] /./. the/DT/the principle/NN/principle of/IN/of separation/NN/separation of/IN/of policy/NN/policy and/CC/and mechanism/NN/mechanism was/VBD/was advocated/VBN/advocated by/IN/by the/DT/the designer/NN/designer of/IN/of hydra/NN/hydra /:/( levin/NN/levin et/NN/et al/NN/al /./. /NN/[ 1975/CD/1975 /CD/] /CD/) /./. the/DT/the confinement/NN/confinement problem/NN/problem was/VBD/was first/JJ/first discussed/VBN/discussed by/IN/by lampson/NN/lampson /:/[ 1973/CD/1973 /CD/] and/CC/and was/VBD/was further/JJ/further examined/VBN/examined by/IN/by lipner/NN/lipner /:/[ 1975/CD/1975 /CD/] /./. the/DT/the use/NN/use of/IN/of higher-level/JJ/higher-level languages/NNS/languages for/IN/for specifying/VBG/specifying access/NN/access control/NN/control was/VBD/was suggested/VBN/suggested first/JJ/first by/IN/by morris/NNS/morris /:/[ 1973/CD/1973 /CD/] /,/, who/WP/who proposed/VBN/proposed the/DT/the use/NN/use of/IN/of the/DT/the seal/NN/seal and/CC/and unseal/NN/unseal operations/NNS/operations discussed/VBD/discussed in/IN/in section/NN/section 14.9/CD/14.9. kieburtz/NN/kieburtz and/CC/and silberschatz/NN/silberschatz /:/[ 1978/CD/1978 /CD/] /,/, kieburtz/NN/kieburtz and/CC/and silberschatz/NN/silberschatz /:/[ 1983/CD/1983 /CD/] /,/, and/CC/and mcgraw/VB/mcgraw and/CC/and andrews/NNS/andrews /:/[ 1979/CD/1979 /CD/] proposed/VBN/proposed various/JJ/various language/NN/language constructs/NNS/constructs for/IN/for dealing/VBG/dealing with/IN/with general/JJ/general dynamic-resource-management/JJ/dynamic-resource-management schemes/NNP/schemes. jones/NNS/jones and/CC/and liskov/NN/liskov /:/[ 1978/CD/1978 /CD/] considered/VBN/considered how/WRB/how a/DT/a static/JJ/static access-control/NN/access-control scheme/NN/scheme can/MD/can be/VB/be incorporated/VBN/incorporated in/IN/in a/DT/a programming/NN/programming language/NN/language that/IN/that supports/NNS/supports abstract/VBP/abstract data/NNS/data types/NNP/types. the/DT/the use/NN/use of/IN/of minimal/JJ/minimal operating-system/JJ/operating-system support/NN/support to/TO/to enforce/VB/enforce protection/NN/protection was/VBD/was advocated/VBN/advocated by/IN/by the/DT/the exokernel/NN/exokernel project/NN/project /:/( ganger/NN/ganger et/NN/et al/NNP/al. /NNP/[ 2002/CD/2002 /CD/] /,/, kaashoek/NN/kaashoek et/NN/et al/NNP/al. /NNP/[ 1997/CD/1997 /CD/] /CD/) /./. 15.1/CD/15.1 protection/NN/protection /,/, as/IN/as we/PRP/we discussed/VBD/discussed in/IN/in chapter/NN/chapter 14/CD/14 /,/, is/VBZ/is strictly/RB/strictly an/DT/an internal/JJ/internal problem/NN/problem /:/: how/WRB/how do/VBP/do we/PRP/we provide/VB/provide controlled/JJ/controlled access/NN/access to/TO/to programs/NNS/programs and/CC/and data/NNS/data stored/VBD/stored in/IN/in a/DT/a computer/NN/computer system/NN/system on/IN/on the/DT/the other/JJ/other hand/NN/hand /,/, requires/VBZ/requires not/RB/not only/RB/only an/DT/an adequate/JJ/adequate protection/NN/protection system/NN/system but/CC/but also/RB/also consideration/NN/consideration of/IN/of the/DT/the external/JJ/external environment/NN/environment within/IN/within which/WDT/which the/DT/the system/NN/system operates/NNP/operates. a/DT/a protection/NN/protection system/NN/system is/VBZ/is ineffective/JJ/ineffective if/IN/if user/NN/user authentication/NN/authentication is/VBZ/is compromised/VBN/compromised or/CC/or a/DT/a program/NN/program is/VBZ/is run/VBN/run by/IN/by an/DT/an unauthorized/JJ/unauthorized user/NN/user /./. computer/NN/computer resources/NNS/resources must/MD/must be/VB/be guarded/VBN/guarded against/IN/against unauthorized/JJ/unauthorized access/NN/access /,/, malicious/JJ/malicious destruction/NN/destruction or/CC/or alteration/NN/alteration /,/, and/CC/and accidental/JJ/accidental introduction/NN/introduction of/IN/of inconsistency/NN/inconsistency /./. these/DT/these resources/NNS/resources include/VBP/include information/NN/information stored/VBD/stored in/IN/in the/DT/the system/NN/system /:/( both/DT/both data/NNS/data and/CC/and code/NN/code /:/) /,/, as/IN/as well/RB/well as/IN/as the/DT/the cpu/NN/cpu /,/, memory/NN/memory /,/, disks/VBZ/disks /,/, tapes/NNS/tapes /,/, and/CC/and networking/NN/networking that/IN/that are/VBP/are the/DT/the computer/NN/computer /./. in/IN/in this/DT/this chapter/NN/chapter /,/, we/PRP/we start/VBP/start by/IN/by examining/NN/examining ways/NNS/ways in/IN/in which/WDT/which resources/NNS/resources may/MD/may be/VB/be accidentally/RB/accidentally or/CC/or purposely/RB/purposely misused/NNP/misused. we/PRP/we then/RB/then explore/VBP/explore a/DT/a key/JJ/key security/NN/security enabler/NN/enabler -cryptography/NNP/-cryptography. finally/RB/finally /,/, we/PRP/we look/VBP/look at/IN/at mechanisms/NNS/mechanisms to/TO/to guard/VB/guard against/IN/against or/CC/or detect/NN/detect attacks/NNS/attacks /./. to/TO/to discuss/VB/discuss security/NN/security threats/NNS/threats and/CC/and attacks/NNS/attacks /./. to/TO/to explain/VB/explain the/DT/the fundamentals/NNS/fundamentals of/IN/of encryption/NN/encryption /,/, authentication/NN/authentication /,/, and/CC/and hashing/VBG/hashing /./. to/TO/to examine/VB/examine the/DT/the uses/NNS/uses of/IN/of cryptography/NN/cryptography in/IN/in computing/NN/computing /./. to/TO/to describe/VB/describe various/JJ/various countermeasures/NNS/countermeasures to/TO/to security/NN/security attacks/NNS/attacks /./. in/IN/in many/JJ/many applications/NNS/applications /,/, ensuring/VBG/ensuring the/DT/the security/NN/security of/IN/of the/DT/the computer/NN/computer system/NN/system is/VBZ/is worth/JJ/worth considerable/JJ/considerable effort/NNP/effort. large/JJ/large commercial/JJ/commercial systems/NNS/systems containing/VBG/containing payroll/NN/payroll or/CC/or other/JJ/other financial/JJ/financial data/NNS/data are/VBP/are inviting/VBG/inviting targets/NNS/targets to/TO/to thieves/NNP/thieves. systems/NNS/systems that/WDT/that contain/NN/contain data/NNS/data pertaining/VBG/pertaining to/TO/to corporate/JJ/corporate operations/NNS/operations may/MD/may be/VB/be of/IN/of interest/NN/interest to/TO/to unscrupulous/JJ/unscrupulous competitors/NNS/competitors /./. furthermore/NN/furthermore /,/, loss/NN/loss of/IN/of such/JJ/such data/NNS/data /,/, whether/IN/whether by/IN/by accident/NN/accident or/CC/or fraud/NN/fraud /,/, can/MD/can seriously/RB/seriously impair/VB/impair the/DT/the ability/NN/ability of/IN/of the/DT/the corporation/NN/corporation to/TO/to function/NN/function /./. in/IN/in chapter/NN/chapter 14/CD/14 /,/, we/PRP/we discussed/VBD/discussed mechanisms/NNS/mechanisms that/IN/that the/DT/the operating/NN/operating system/NN/system can/MD/can provide/VB/provide /:/( with/IN/with appropriate/JJ/appropriate aid/NN/aid from/IN/from the/DT/the hardware/NN/hardware /:/) that/IN/that allow/JJ/allow users/NNS/users to/TO/to protect/VB/protect 621/CD/621 622/CD/622 chapter/NN/chapter 15/CD/15 their/PRP$/their resources/NNS/resources /,/, including/VBG/including programs/NNS/programs and/CC/and data/NNP/data. these/DT/these mechanisms/NNS/mechanisms work/VBP/work well/RB/well only/RB/only as/IN/as long/RB/long as/IN/as the/DT/the users/NNS/users conform/NN/conform to/TO/to the/DT/the intended/VBN/intended use/NN/use of/IN/of and/CC/and access/NN/access to/TO/to these/DT/these resources/NNP/resources. we/PRP/we say/VBP/say that/IN/that a/DT/a system/NN/system is/VBZ/is if/IN/if its/PRP$/its resources/NNS/resources are/VBP/are used/VBN/used and/CC/and accessed/VBN/accessed as/IN/as intended/VBN/intended under/IN/under all/DT/all circumstances/NNP/circumstances. unfortunately/RB/unfortunately total/JJ/total security/NN/security can/MD/can not/RB/not be/VB/be achieved/NNP/achieved. nonetheless/NN/nonetheless /,/, we/PRP/we must/MD/must have/VB/have mechanisms/NNS/mechanisms to/TO/to make/VB/make security/NN/security breaches/NNS/breaches a/DT/a rare/NN/rare occurrence/NN/occurrence /,/, rather/RB/rather than/IN/than the/DT/the norm/NN/norm /./. security/NN/security violations/NNS/violations /:/( or/CC/or misuse/VB/misuse /CD/) of/IN/of the/DT/the system/NNP/system. can/MD/can be/VB/be categorized/VBN/categorized as/IN/as intentional/JJ/intentional /NN/( malicious/JJ/malicious /NN/) or/CC/or accidental/NNP/accidental. it/PRP/it is/VBZ/is easier/JJR/easier to/TO/to protect/VB/protect against/IN/against accidental/JJ/accidental misuse/NN/misuse than/IN/than against/IN/against malicious/JJ/malicious misuse/NNP/misuse. for/IN/for the/DT/the most/JJS/most part/NN/part protection/NN/protection mechanisms/NNS/mechanisms are/VBP/are the/DT/the core/NN/core of/IN/of protection/NN/protection from/IN/from accidents/NNP/accidents. the/DT/the following/VBG/following list/NN/list includes/VBZ/includes several/JJ/several forms/NNS/forms of/IN/of accidental/JJ/accidental and/CC/and malicious/JJ/malicious security/NN/security violations/NNP/violations. we/PRP/we should/MD/should note/VB/note that/IN/that in/IN/in our/PRP$/our discussion/NN/discussion of/IN/of security/NN/security /,/, we/PRP/we use/VBP/use the/DT/the terms/NNS/terms intruder/VBP/intruder and/CC/and cracker/NN/cracker for/IN/for those/DT/those attempting/VBG/attempting to/TO/to breach/VB/breach security/NNP/security. in/IN/in addition/NN/addition /,/, a/DT/a is/VBZ/is the/DT/the potential/JJ/potential for/IN/for a/DT/a security/NN/security violation/NN/violation /,/, such/JJ/such as/IN/as the/DT/the discovery/NN/discovery of/IN/of a/DT/a vulnerability/NN/vulnerability /,/, whereas/VBZ/whereas an/DT/an is/VBZ/is the/DT/the attempt/NN/attempt to/TO/to break/VB/break security/NN/security /./. breach/NN/breach of/IN/of confidentiality/NNP/confidentiality. this/DT/this type/NN/type of/IN/of violation/NN/violation involves/NNS/involves 1mauthorized/JJ/1mauthorized reading/NN/reading of/IN/of data/NNS/data /:/( or/CC/or theft/VB/theft of/IN/of information/NN/information /:/) /./. typically/RB/typically /,/, a/DT/a breach/NN/breach of/IN/of confidentiality/NN/confidentiality is/VBZ/is the/DT/the goal/NN/goal of/IN/of an/DT/an intruder/NNP/intruder. capturing/NN/capturing secret/NN/secret data/NNS/data from/IN/from a/DT/a system/NN/system or/CC/or a/DT/a data/NN/data stream/NN/stream /,/, such/JJ/such as/IN/as credit-card/JJ/credit-card information/NN/information or/CC/or identity/NN/identity information/NN/information for/IN/for identity/NN/identity theft/NN/theft /,/, can/MD/can result/VB/result directly/RB/directly in/IN/in money/NN/money for/IN/for the/DT/the intruder/NN/intruder /./. breach/NN/breach of/IN/of integrity/NNP/integrity. this/DT/this violation/NN/violation involves/VBZ/involves unauthorized/VBN/unauthorized modification/NN/modification of/IN/of data/NNP/data. such/JJ/such attacks/NNS/attacks can/MD/can /,/, for/IN/for example/NN/example /,/, result/NN/result in/IN/in passing/NN/passing of/IN/of liability/NN/liability to/TO/to an/DT/an innocent/NN/innocent party/NN/party or/CC/or modification/NN/modification of/IN/of the/DT/the source/NN/source code/NN/code of/IN/of an/DT/an important/JJ/important commercial/NN/commercial application/NN/application /./. breach/NN/breach of/IN/of availability/NNP/availability. this/DT/this violation/NN/violation involves/VBZ/involves unauthorized/VBN/unauthorized destruction/NN/destruction of/IN/of data/NNP/data. some/DT/some crackers/NNS/crackers would/MD/would rather/RB/rather wreak/VB/wreak havoc/NN/havoc and/CC/and gain/NN/gain status/NN/status or/CC/or bragging/VBG/bragging rights/NNS/rights than/IN/than gain/NN/gain financially/NNP/financially. web-site/NNP/web-site defacement/NN/defacement is/VBZ/is a/DT/a common/JJ/common example/NN/example of/IN/of this/DT/this type/NN/type of/IN/of security/NN/security breach/NN/breach /./. theft/NN/theft of/IN/of service/NNP/service. this/DT/this violation/NN/violation involves/VBZ/involves unauthorized/VBN/unauthorized use/NN/use of/IN/of resources/NNS/resources /./. for/IN/for example/NN/example /,/, an/DT/an intruder/NN/intruder /:/( or/CC/or intrusion/NN/intrusion program/NN/program /:/) may/MD/may install/VB/install a/DT/a daemon/NN/daemon on/IN/on a/DT/a system/NN/system that/WDT/that acts/VBZ/acts as/RB/as a/DT/a file/NN/file server/NN/server /./. denial/NN/denial of/IN/of service/NNP/service. this/DT/this violation/NN/violation involves/VBZ/involves preventing/VBG/preventing legitimate/NN/legitimate use/NN/use of/IN/of the/DT/the system/NNP/system. or/CC/or attacks/NNS/attacks are/VBP/are sometimes/RB/sometimes accidental/NNP/accidental. the/DT/the original/JJ/original internet/NN/internet worm/NN/worm turned/VBD/turned into/IN/into a/DT/a dos/NNS/dos attack/VBP/attack when/WRB/when a/DT/a bug/NN/bug failed/VBD/failed to/TO/to delay/VB/delay its/PRP$/its rapid/JJ/rapid spread/NNP/spread. we/PRP/we discuss/VBZ/discuss dos/NNS/dos attacks/NNS/attacks further/RB/further in/IN/in section/NN/section 15.3.3/CD/15.3.3 /./. attackers/NNS/attackers use/VBP/use several/JJ/several standard/JJ/standard methods/NNS/methods in/IN/in their/PRP$/their attempts/NNS/attempts to/TO/to breach/VB/breach security/NNP/security. the/DT/the most/RBS/most common/JJ/common is/VBZ/is in/IN/in which/WDT/which one/CD/one participant/NN/participant in/IN/in a/DT/a communication/NN/communication pretends/VBZ/pretends to/TO/to be/VB/be someone/NN/someone /:/( another/DT/another host/NN/host or/CC/or another/DT/another person/NN/person /:/) /./. by/IN/by masquerading/NN/masquerading /,/, attackers/NNS/attackers breach/VBP/breach the/DT/the correctness/NN/correctness of/IN/of identification/NN/identification ;/:/; they/PRP/they can/MD/can then/RB/then gain/VB/gain access/NN/access that/IN/that they/PRP/they would/MD/would not/RB/not normally/RB/normally be/VB/be allowed/VBN/allowed or/CC/or escalate/JJ/escalate their/PRP$/their privileges-obtain/JJ/privileges-obtain privileges/NNS/privileges to/TO/to which/WDT/which they/PRP/they would/MD/would not/RB/not normally/RB/normally be/VB/be entitled/NNP/entitled. another/DT/another common/JJ/common attack/NN/attack is/VBZ/is to/TO/to replay/VB/replay a/DT/a captured/VBN/captured exchange/NN/exchange of/IN/of data/NNP/data. a/DT/a consists/NNS/consists of/IN/of the/DT/the malicious/JJ/malicious or/CC/or fraudulent/NN/fraudulent repeat/NN/repeat of/IN/of a/DT/a valid/JJ/valid data/NNS/data transmission/NNP/transmission. sometimes/RB/sometimes the/DT/the replay/NN/replay comprises/VBZ/comprises the/DT/the entire/JJ/entire attackfor/NN/attackfor example/NN/example /,/, in/IN/in a/DT/a repeat/NN/repeat of/IN/of a/DT/a to/TO/to transfer/VB/transfer money/NNP/money. but/CC/but frequently/RB/frequently it/PRP/it is/VBZ/is done/VBN/done along/IN/along with/IN/with again/RB/again to/TO/to escalate/VB/escalate privileges/NNP/privileges. consider/NN/consider 15.1/CD/15.1 623/CD/623 normal/JJ/normal attacker/NN/attacker masquerading/VBG/masquerading attacker/NN/attacker man-in-the-middle/JJ/man-in-the-middle attacker/NN/attacker figure/NN/figure 15.1/CD/15.1 standard/JJ/standard security/NN/security attacks/NNS/attacks /./. the/DT/the damage/NN/damage that/IN/that could/MD/could be/VB/be done/VBN/done if/IN/if a/DT/a request/NN/request for/IN/for authentication/NN/authentication had/VBD/had a/DT/a legitimate/NN/legitimate user/NN/user 's/POS/'s information/NN/information with/IN/with an/DT/an unauthorized/JJ/unauthorized user/NN/user 's/NNP/'s. yet/CC/yet another/DT/another kind/NN/kind of/IN/of attack/NN/attack is/VBZ/is the/DT/the in/IN/in which/WDT/which an/DT/an attacker/NN/attacker sits/VBZ/sits in/IN/in the/DT/the data/NN/data flow/NN/flow of/IN/of a/DT/a communication/NN/communication /,/, masquerading/VBG/masquerading as/IN/as the/DT/the sender/NN/sender to/TO/to the/DT/the receiver/NN/receiver /,/, and/CC/and vice/NN/vice versa/NNP/versa. in/IN/in a/DT/a network/NN/network communication/NN/communication /,/, a/DT/a man-in-the-middle/JJ/man-in-the-middle attack/NN/attack may/MD/may be/VB/be preceded/VBN/preceded by/IN/by a/DT/a in/IN/in which/WDT/which an/DT/an active/JJ/active communication/NN/communication session/NN/session is/VBZ/is intercepted/NNP/intercepted. several/JJ/several attack/NN/attack methods/NNS/methods are/VBP/are depicted/VBN/depicted in/IN/in figure/NN/figure 15.1/CD/15.1 /./. as/IN/as we/PRP/we have/VBP/have already/RB/already suggested/VBN/suggested /,/, absolute/JJ/absolute protection/NN/protection of/IN/of the/DT/the system/NN/system from/IN/from malicious/JJ/malicious abuse/NN/abuse is/VBZ/is not/RB/not possible/JJ/possible /,/, but/CC/but the/DT/the cost/NN/cost to/TO/to the/DT/the perpetrator/NN/perpetrator can/MD/can be/VB/be made/VBN/made sufficiently/RB/sufficiently high/JJ/high to/TO/to deter/VB/deter most/JJS/most intruders/NNP/intruders. in/IN/in some/DT/some cases/NNS/cases /,/, such/JJ/such as/IN/as a/DT/a denial-ofservice/NN/denial-ofservice attack/NN/attack /,/, it/PRP/it is/VBZ/is preferable/JJ/preferable to/TO/to prevent/VB/prevent the/DT/the attack/NN/attack but/CC/but sufficient/NN/sufficient to/TO/to detect/VB/detect the/DT/the attack/NN/attack so/RB/so that/IN/that cmmtermeasures/NNS/cmmtermeasures can/MD/can be/VB/be taken/VBN/taken /./. to/TO/to protect/VB/protect a/DT/a system/NN/system /,/, we/PRP/we must/MD/must take/VB/take security/NN/security measures/NNS/measures at/IN/at four/CD/four levels/NNS/levels /:/: physical/NNP/physical. the/DT/the site/NN/site or/CC/or sites/NNS/sites containing/VBG/containing the/DT/the computer/NN/computer systems/NNS/systems must/MD/must be/VB/be physically/RB/physically secured/VBN/secured against/IN/against armed/VBN/armed or/CC/or surreptitious/JJ/surreptitious entry/NN/entry by/IN/by intruders/NNS/intruders /./. both/DT/both the/DT/the machine/NN/machine rooms/NNS/rooms and/CC/and the/DT/the terminals/NNS/terminals or/CC/or workstations/NNS/workstations that/IN/that have/VBP/have access/NN/access to/TO/to the/DT/the machines/NNS/machines must/MD/must be/VB/be secured/VBN/secured /./. 624/CD/624 chapter/NN/chapter 15/CD/15 must/MD/must be/VB/be done/VBN/done carefully/RB/carefully to/TO/to assure/VB/assure that/IN/that only/RB/only access/NN/access to/TO/to the/DT/the system/NNP/system. even/RB/even authorized/VBD/authorized users//JJ/users/ to/TO/to let/VB/let others/NNS/others use/VBP/use their/PRP$/their access/NN/access /:/( in/IN/in exchange/NN/exchange they/PRP/they may/MD/may also/RB/also be/VB/be tricked/VBN/tricked into/IN/into allowing/NN/allowing one/CD/one type/NN/type of/IN/of social-engineering/JJ/social-engineering attack/NN/attack here/RB/here /,/, a/DT/a legitimate-looking/JJ/legitimate-looking e-mail/NN/e-mail or/CC/or web/NN/web page/NN/page misleads/NNS/misleads a/DT/a user/NN/user into/IN/into entering/NN/entering confidential/JJ/confidential information/NNP/information. another/DT/another teclucique/NN/teclucique is/VBZ/is human/NNP/human. authorization/NN/authorization appropriate/NN/appropriate users/NNS/users have/VBP/have however/RB/however /,/, may/MD/may be/VB/be for/IN/for a/DT/a bribe/NN/bribe /,/, for/IN/for access/NN/access via/IN/via is/VBZ/is a/DT/a general/JJ/general term/NN/term for/IN/for attempting/VBG/attempting to/TO/to gather/DT/gather information/NN/information in/IN/in order/NN/order to/TO/to gain/VB/gain unauthorized/VBN/unauthorized access/NN/access to/TO/to the/DT/the computer/NN/computer /:/( by/IN/by looking/NN/looking through/IN/through trash/NN/trash /,/, finding/NN/finding phone/NN/phone books/NNS/books /,/, or/CC/or finding/VBG/finding notes/NNS/notes containing/VBG/containing passwords/NNS/passwords /,/, for/IN/for example/NN/example /:/) /./. these/DT/these security/NN/security problems/NNS/problems are/VBP/are management/NN/management and/CC/and personnel/NN/personnel issues/NNS/issues /,/, not/RB/not problems/NNS/problems pertaining/VBG/pertaining to/TO/to operating/NN/operating systems/NNS/systems /./. operating/NN/operating system/NNP/system. the/DT/the system/NN/system must/MD/must protect/VB/protect itself/PRP/itself from/IN/from accidental/JJ/accidental or/CC/or purposeful/JJ/purposeful security/NN/security breaches/NNP/breaches. a/DT/a runaway/NN/runaway process/NN/process could/MD/could constitute/VB/constitute an/DT/an accidental/JJ/accidental denial-of-service/NN/denial-of-service attack/NNP/attack. a/DT/a query/NN/query to/TO/to a/DT/a service/NN/service could/MD/could reveal/VB/reveal passwords/NNS/passwords /./. a/DT/a stack/NN/stack overflow/NN/overflow could/MD/could the/DT/the launching/NN/launching of/IN/of an/DT/an unauthorized/JJ/unauthorized process/NNP/process. list/NN/list of/IN/of possible/JJ/possible breaches/NNS/breaches is/VBZ/is almost/RB/almost endless/JJ/endless /./. network/NNP/network. much/RB/much computer/NN/computer data/NNS/data in/IN/in modern/JJ/modern systems/NNS/systems travels/NNS/travels over/IN/over private/JJ/private leased/VBN/leased lines/NNS/lines /,/, shared/VBD/shared lines/NNS/lines like/IN/like the/DT/the internet/NN/internet /,/, wireless/NN/wireless connections/NNS/connections /,/, or/CC/or dial-up/JJ/dial-up lines/NNP/lines. intercepting/NN/intercepting these/DT/these data/NNS/data could/MD/could be/VB/be just/RB/just as/IN/as harmful/JJ/harmful as/IN/as breaking/NN/breaking into/IN/into a/DT/a computer/NN/computer ;/:/; and/CC/and interruption/NN/interruption communications/NNS/communications could/MD/could constitute/VB/constitute a/DT/a remote/NN/remote denial-of-service/NN/denial-of-service attack/NN/attack /,/, diminishing/VBG/diminishing users/NNS/users '/POS/' use/NN/use of/IN/of and/CC/and trust/NN/trust in/IN/in the/DT/the system/NN/system /./. at/IN/at the/DT/the first/JJ/first two/CD/two levels/NNS/levels must/MD/must be/VB/be inaintained/VBN/inaintained if/IN/if operating-system/JJ/operating-system is/VBZ/is to/TO/to be/VB/be ensured/NNP/ensured. a/DT/a weakness/NN/weakness at/IN/at a/DT/a high/JJ/high security/NN/security /:/( physical/JJ/physical or/CC/or allows/VBZ/allows circumvention/NN/circumvention of/IN/of strict/JJ/strict low-level/JJ/low-level /NN/( operating-system/NN/operating-system /:/) security/NN/security measures/NNP/measures. the/DT/the old/JJ/old adage/NN/adage that/WDT/that a/DT/a chal.'l/JJ/chal.'l is/VBZ/is as/IN/as weak/JJ/weak as/IN/as its/PRP$/its weakest/NN/weakest link/NN/link is/VBZ/is true/JJ/true of/IN/of system/NN/system security/NNP/security. all/DT/all these/DT/these aspects/NNS/aspects must/MD/must be/VB/be addressed/VBN/addressed for/IN/for to/TO/to be/VB/be maintained/VBN/maintained /./. to/TO/to allow/VB/allow the/DT/the more/RBR/more is/VBZ/is as/RB/as intruders/NNS/intruders countermeasures/NNS/countermeasures are/VBP/are created/VBN/created and/CC/and deployed/VBN/deployed /./. this/DT/this causes/NNS/causes intruders/NNS/intruders to/TO/to become/VB/become more/JJR/more in/IN/in their/PRP$/their attacks/NNP/attacks. for/IN/for incidents/NNS/incidents include/VBP/include the/DT/the use/NN/use of/IN/of to/TO/to section/NN/section tools/NNS/tools needed/VBD/needed to/TO/to block/VB/block the/DT/the in/IN/in the/DT/the remainder/NN/remainder of/IN/of this/DT/this 15/CD/15 15.2/CD/15.2 625/CD/625 ways/NNS/ways /,/, ranging/VBG/ranging from/IN/from passwords/NNS/passwords for/IN/for authentication/NN/authentication through/IN/through guarding/VBG/guarding against/IN/against viruses/NNS/viruses to/TO/to detecting/VBG/detecting intrusions/NNP/intrusions. we/PRP/we start/VBP/start with/IN/with an/DT/an exploration/NN/exploration of/IN/of security/NN/security threats/NNS/threats /./. processes/NNS/processes /,/, along/IN/along with/IN/with the/DT/the kernel/NN/kernel /,/, are/VBP/are the/DT/the only/JJ/only means/NNS/means of/IN/of accomplishing/VBG/accomplishing work/NN/work on/IN/on a/DT/a computer/NNP/computer. therefore/NN/therefore /,/, writing/VBG/writing a/DT/a program/NN/program that/WDT/that creates/VBZ/creates a/DT/a breach/NN/breach of/IN/of security/NN/security /,/, or/CC/or causing/VBG/causing a/DT/a normal/JJ/normal process/NN/process to/TO/to change/VB/change its/PRP$/its behavior/JJ/behavior and/CC/and create/VB/create a/DT/a breach/NN/breach /,/, is/VBZ/is a/DT/a common/JJ/common goal/NN/goal of/IN/of crackers/NNP/crackers. in/IN/in fact/NN/fact even/RB/even most/JJS/most nonprogram/NN/nonprogram security/NN/security events/NNS/events have/VBP/have as/RB/as their/PRP$/their goal/NN/goal causing/VBG/causing a/DT/a program/NN/program threat/NNP/threat. for/IN/for example/NN/example /,/, while/IN/while it/PRP/it is/VBZ/is useful/JJ/useful to/TO/to log/VB/log in/IN/in to/TO/to a/DT/a without/IN/without authorization/NN/authorization /,/, it/PRP/it is/VBZ/is quite/RB/quite a/DT/a lot/NN/lot more/RBR/more useful/JJ/useful to/TO/to leave/VB/leave behind/IN/behind a/DT/a daemon/NN/daemon that/WDT/that provides/VBZ/provides information/NN/information or/CC/or allows/VBZ/allows easy/JJ/easy access/NN/access even/RB/even if/IN/if the/DT/the original/JJ/original exploit/NN/exploit is/VBZ/is blocked/NNP/blocked. in/IN/in this/DT/this section/NN/section /,/, we/PRP/we describe/VBP/describe common/JJ/common methods/NNS/methods which/WDT/which programs/NNS/programs cause/VBP/cause security/NN/security breaches/NNP/breaches. note/NN/note that/IN/that there/EX/there is/VBZ/is considerable/JJ/considerable variation/NN/variation in/IN/in the/DT/the naming/NN/naming conventions/NNS/conventions of/IN/of security/NN/security holes/NNS/holes and/CC/and that/IN/that we/PRP/we use/VBP/use the/DT/the most/RBS/most common/JJ/common or/CC/or descriptive/JJ/descriptive terms/NNS/terms /./. 15.2.1/CD/15.2.1 horse/NN/horse systems/NNS/systems have/VBP/have mechanisms/NNS/mechanisms for/IN/for allowing/VBG/allowing programs/NNS/programs written/VBN/written by/IN/by users/NNS/users to/TO/to be/VB/be executed/VBN/executed by/IN/by other/JJ/other users/NNP/users. if/IN/if these/DT/these programs/NNS/programs are/VBP/are executed/VBN/executed in/IN/in a/DT/a domain/NN/domain that/WDT/that provides/VBZ/provides the/DT/the access/NN/access rights/NNS/rights of/IN/of the/DT/the executing/NN/executing user/NN/user /,/, the/DT/the other/JJ/other users/NNS/users may/MD/may misuse/VB/misuse these/DT/these rights/NNP/rights. a/DT/a text-editor/NN/text-editor program/NN/program /,/, for/IN/for example/NN/example /,/, may/MD/may include/VB/include code/NN/code to/TO/to search/NN/search the/DT/the file/NN/file to/TO/to be/VB/be edited/VBN/edited for/IN/for certairl/NN/certairl keywords/NNP/keywords. if/IN/if any/DT/any are/VBP/are found/VBN/found /,/, the/DT/the entire/JJ/entire file/NN/file may/MD/may be/VB/be to/TO/to a/DT/a special/JJ/special area/NN/area accessible/JJ/accessible to/TO/to the/DT/the creator/NN/creator of/IN/of the/DT/the text/NN/text editor/NN/editor /./. a/DT/a code/NN/code segment/NN/segment that/WDT/that misuses/VBZ/misuses its/PRP$/its environment/NN/environment is/VBZ/is called/VBN/called a/DT/a long/JJ/long search/NN/search paths/NNS/paths /,/, as/IN/as are/VBP/are common/JJ/common on/IN/on unix/NN/unix systems/NNS/systems /,/, exacerbate/VBP/exacerbate the/DT/the trojanhorse/NN/trojanhorse the/DT/the search/NN/search path/NN/path lists/NNS/lists the/DT/the set/NN/set of/IN/of directories/NNS/directories to/TO/to search/VB/search when/WRB/when an/DT/an program/NN/program name/NN/name is/VBZ/is given/NNP/given. the/DT/the is/VBZ/is searched/VBN/searched for/IN/for a/DT/a file/NN/file of/IN/of that/DT/that name/NN/name /,/, and/CC/and the/DT/the file/NN/file is/VBZ/is executed/NNP/executed. all/DT/all the/DT/the directories/NNS/directories in/IN/in such/JJ/such a/DT/a search/NN/search path/NN/path must/MD/must be/VB/be secure/NN/secure /,/, or/CC/or a/DT/a horse/NN/horse could/MD/could be/VB/be slipped/VBN/slipped into/IN/into the/DT/the user/NN/user 's/POS/'s and/CC/and executed/VBD/executed consider/NN/consider the/DT/the use/NN/use of/IN/of the/DT/the /./. character/NN/character in/IN/in a/DT/a search/NN/search path/NNP/path. the/DT/the /./. to/TO/to include/VB/include the/DT/the current/JJ/current directory/NN/directory in/IN/in the/DT/the search/NNP/search. if/IN/if a/DT/a user/NN/user has/VBZ/has /./. in/IN/in her/PRP$/her search/NN/search has/VBZ/has set/VBN/set her/PRP$/her current/JJ/current to/TO/to a/DT/a friend/NN/friend 's/POS/'s directory/NN/directory /,/, and/CC/and enters/NNS/enters the/DT/the name/NN/name of/IN/of a/DT/a normal/JJ/normal system/NN/system commanct/NN/commanct be/VB/be executed/VBN/executed from/IN/from the/DT/the friend/NN/friend 's/POS/'s instead/NNP/instead. the/DT/the program/NN/program would/MD/would run/VB/run the/DT/the user/NN/user 's/POS/'s to/TO/to do/VB/do anything/NN/anything that/WDT/that the/DT/the user/NN/user is/VBZ/is allowed/VBN/allowed to/TO/to the/DT/the user/NN/user 's/POS/'s instance/NN/instance /./. horse/NN/horse is/VBZ/is a/DT/a that/IN/that emulates/VBZ/emulates a/DT/a what/WP/what 626/CD/626 chapter/NN/chapter 15/CD/15 such/JJ/such as/IN/as the/DT/the control-alt-delete/JJ/control-alt-delete conlbination/NN/conlbination used/VBN/used by/IN/by all/DT/all modern/JJ/modern windows/NNS/windows operating/VBG/operating systems/NNS/systems /./. another/DT/another variation/NN/variation on/IN/on the/DT/the trojan/NN/trojan horse/NN/horse is/VBZ/is spyware/JJ/spyware sometimes/RB/sometimes accompanies/VBZ/accompanies a/DT/a program/NN/program that/WDT/that the/DT/the user/NN/user has/VBZ/has chosen/VBN/chosen to/TO/to install/NNP/install. most/JJS/most frequently/RB/frequently /,/, it/PRP/it comes/VBZ/comes along/IN/along with/IN/with freeware/JJ/freeware or/CC/or shareware/JJ/shareware programs/NNS/programs /,/, but/CC/but sometimes/RB/sometimes it/PRP/it is/VBZ/is included/VBN/included with/IN/with commercial/JJ/commercial software/NNP/software. the/DT/the goal/NN/goal of/IN/of spyware/NN/spyware is/VBZ/is to/TO/to download/VB/download ads/NNS/ads to/TO/to display/VB/display on/IN/on the/DT/the user/NN/user 's/POS/'s system/NN/system /,/, create/VB/create when/WRB/when certain/JJ/certain sites/NNS/sites are/VBP/are visited/VBN/visited /,/, or/CC/or capture/NN/capture information/NN/information from/IN/from the/DT/the user/NN/user 's/POS/'s system/NN/system and/CC/and return/NN/return it/PRP/it to/TO/to a/DT/a central/JJ/central site/NNP/site. this/DT/this latter/NN/latter is/VBZ/is an/DT/an example/NN/example of/IN/of a/DT/a general/JJ/general category/NN/category of/IN/of attacks/NNS/attacks known/VBN/known as/IN/as in/IN/in which/WDT/which surreptitious/JJ/surreptitious communication/NN/communication occurs/NNP/occurs. for/IN/for example/NN/example /,/, the/DT/the installation/NN/installation of/IN/of an/DT/an innocuous-seeming/JJ/innocuous-seeming program/NN/program on/IN/on a/DT/a windows/NN/windows system/NN/system could/MD/could result/VB/result in/IN/in the/DT/the loading/NN/loading of/IN/of a/DT/a spyware/NN/spyware daemon/NNP/daemon. the/DT/the spyware/NN/spyware could/MD/could contact/VB/contact a/DT/a central/JJ/central site/NN/site /,/, be/VB/be given/VBN/given a/DT/a message/NN/message and/CC/and a/DT/a list/NN/list of/IN/of recipient/JJ/recipient addresses/NNS/addresses /,/, and/CC/and deliver/RB/deliver the/DT/the spam/NN/spam message/NN/message to/TO/to those/DT/those users/NNS/users from/IN/from the/DT/the windows/NNS/windows machine/NNP/machine. this/DT/this process/NN/process continues/VBZ/continues until/IN/until the/DT/the user/NN/user discovers/NNS/discovers the/DT/the spyware/NNP/spyware. frequently/RB/frequently /,/, the/DT/the spyware/NN/spyware is/VBZ/is not/RB/not discovered/VBN/discovered /./. in/IN/in 2004/CD/2004 /,/, it/PRP/it was/VBD/was estimated/VBN/estimated that/IN/that 80/CD/80 percent/NN/percent of/IN/of spam/NN/spam was/VBD/was being/VBG/being delivered/VBN/delivered by/IN/by this/DT/this method/NNP/method. this/DT/this theft/NN/theft of/IN/of service/NN/service is/VBZ/is not/RB/not even/RB/even considered/VBN/considered a/DT/a crime/NN/crime in/IN/in most/JJS/most countries/NNS/countries !/./! spyware/NN/spyware is/VBZ/is a/DT/a micro/NN/micro example/NN/example of/IN/of a/DT/a macro/NN/macro problem/NN/problem /:/: violation/NN/violation of/IN/of the/DT/the principle/NN/principle of/IN/of least/JJS/least privilege/NNP/privilege. under/IN/under most/JJS/most circumstances/NNS/circumstances /,/, a/DT/a user/NN/user of/IN/of an/DT/an operating/NN/operating system/NN/system does/VBZ/does not/RB/not need/VBP/need to/TO/to install/VB/install network/NN/network daemons/NNP/daemons. such/JJ/such daemons/NNS/daemons are/VBP/are installed/VBN/installed via/IN/via two/CD/two mistakes/NNP/mistakes. first/JJ/first /,/, a/DT/a user/NN/user may/MD/may run/VB/run with/IN/with more/JJR/more privileges/NNS/privileges than/IN/than necessary/JJ/necessary /NN/( for/IN/for example/NN/example /,/, as/IN/as the/DT/the administrator/NN/administrator /:/) /,/, allowing/VBG/allowing programs/NNS/programs that/WDT/that she/PRP/she runs/VBZ/runs to/TO/to have/VB/have more/JJR/more access/NN/access to/TO/to the/DT/the system/NN/system than/IN/than is/VBZ/is necessary/NNP/necessary. this/DT/this is/VBZ/is a/DT/a case/NN/case of/IN/of human/NN/human error-a/NNP/error-a common/JJ/common security/NN/security weakness/NNP/weakness. second/JJ/second /,/, an/DT/an operating/NN/operating system/NN/system may/MD/may allow/VB/allow by/IN/by default/NN/default more/JJR/more privileges/NNS/privileges than/IN/than a/DT/a normal/JJ/normal user/NN/user needs/NNP/needs. this/DT/this is/VBZ/is a/DT/a case/NN/case of/IN/of poor/JJ/poor operating-system/JJ/operating-system design/NN/design decisions/NNP/decisions. an/DT/an operating/NN/operating system/NN/system /:/( and/CC/and /,/, indeed/RB/indeed /,/, software/NN/software in/IN/in general/JJ/general /NN/) should/MD/should allow/VB/allow fine-grained/JJ/fine-grained control/NN/control of/IN/of access/NN/access and/CC/and security/NN/security /,/, but/CC/but it/PRP/it must/MD/must also/RB/also be/VB/be easy/JJ/easy to/TO/to manage/NN/manage and/CC/and understand/NNP/understand. inconvenient/NN/inconvenient or/CC/or inadequate/JJ/inadequate security/NN/security measures/VBZ/measures are/VBP/are bound/VBN/bound to/TO/to be/VB/be circumvented/VBN/circumvented /,/, causing/VBG/causing an/DT/an overall/JJ/overall weakening/NN/weakening of/IN/of the/DT/the security/NN/security they/PRP/they were/VBD/were designed/VBN/designed to/TO/to implement/VB/implement /./. 15.2.2/CD/15.2.2 trap/NN/trap door/NN/door the/DT/the designer/NN/designer of/IN/of a/DT/a program/NN/program or/CC/or system/NN/system might/MD/might leave/VB/leave a/DT/a hole/NN/hole in/IN/in the/DT/the software/NN/software that/IN/that only/RB/only he/PRP/he is/VBZ/is capable/JJ/capable of/IN/of using/NNP/using. this/DT/this type/NN/type of/IN/of security/NN/security breach/NN/breach /:/( or/CC/or was/VBD/was shown/VBN/shown in/IN/in the/DT/the movie/NN/movie war/NN/war games/NNP/games. for/IN/for instance/NN/instance /,/, the/DT/the code/NN/code inight/NN/inight check/NN/check a/DT/a specific/JJ/specific user/NN/user id/VBD/id or/CC/or password/NN/password /,/, and/CC/and it/PRP/it might/MD/might circumvent/VB/circumvent normal/JJ/normal security/NN/security procedures/NNP/procedures. programmers/NNS/programmers have/VBP/have been/VBN/been arrested/VBN/arrested for/IN/for embezzling/NN/embezzling from/IN/from banks/NNS/banks by/IN/by including/VBG/including rounding/NN/rounding errors/NNS/errors in/IN/in their/PRP$/their code/NN/code and/CC/and having/VBG/having the/DT/the occasional/JJ/occasional half-cent/JJ/half-cent credited/JJ/credited to/TO/to their/PRP$/their accounts/NNS/accounts /./. this/DT/this account/NN/account credititrg/NN/credititrg can/MD/can add/VB/add up/RP/up to/TO/to a/DT/a large/JJ/large amount/NN/amount of/IN/of money/NN/money /,/, considering/VBG/considering the/DT/the number/NN/number of/IN/of transactions/NNS/transactions that/WDT/that a/DT/a large/JJ/large bank/NN/bank executes/NNS/executes /./. a/DT/a clever/NN/clever trap/NN/trap door/NN/door could/MD/could be/VB/be included/VBN/included in/IN/in a/DT/a compiler/NNP/compiler. the/DT/the compiler/NN/compiler could/MD/could generate/VB/generate standard/JJ/standard object/NN/object code/NN/code as/IN/as well/RB/well as/IN/as a/DT/a trap/NN/trap door/NN/door /,/, regardless/RB/regardless of/IN/of the/DT/the source/NN/source code/NN/code being/VBG/being compiled/NNP/compiled. this/DT/this activity/NN/activity is/VBZ/is particularly/RB/particularly nefarious/JJ/nefarious /,/, since/IN/since a/DT/a search/NN/search of/IN/of the/DT/the source/NN/source code/NN/code of/IN/of the/DT/the program/NN/program will/MD/will not/RB/not reveal/VB/reveal any/DT/any problems/NNP/problems. only/RB/only the/DT/the source/NN/source code/NN/code of/IN/of the/DT/the compiler/NN/compiler would/MD/would contain/VB/contain the/DT/the information/NN/information /./. trap/NN/trap doors/NNS/doors pose/VBP/pose a/DT/a difficult/NN/difficult problem/NN/problem because/IN/because /,/, to/TO/to detect/VB/detect them/PRP/them /,/, we/PRP/we have/VBP/have to/TO/to analyze/VB/analyze all/DT/all the/DT/the source/NN/source code/NN/code for/IN/for all/DT/all components/NNS/components of/IN/of a/DT/a system/NNP/system. given/VBN/given that/IN/that software/NN/software systems/NNS/systems may/MD/may consist/VB/consist of/IN/of millions/NNS/millions of/IN/of lines/NNS/lines of/IN/of code/NN/code /,/, this/DT/this analysis/NN/analysis is/VBZ/is not/RB/not done/VBN/done frequently/RB/frequently /,/, and/CC/and frequently/RB/frequently it/PRP/it is/VBZ/is not/RB/not done/VBN/done at/IN/at all/DT/all !/./! 15.2/CD/15.2 627/CD/627 15.2.3/CD/15.2.3 logic/NN/logic bomb/NN/bomb consider/NN/consider a/DT/a program/NN/program that/WDT/that initiates/VBZ/initiates a/DT/a security/NN/security incident/NN/incident only/RB/only under/IN/under certain/JJ/certain circltmstances/NNP/circltmstances. it/PRP/it would/MD/would be/VB/be hard/RB/hard to/TO/to detect/VB/detect because/IN/because under/IN/under normal/JJ/normal operations/NNS/operations /,/, there/EX/there would/MD/would be/VB/be no/RB/no security/NN/security hole/NNP/hole. however/RB/however /,/, when/WRB/when a/DT/a predefined/VBN/predefined set/NN/set of/IN/of parameters/NNS/parameters were/VBD/were met/VBN/met /,/, the/DT/the security/NN/security hole/NN/hole would/MD/would be/VB/be created/NNP/created. this/DT/this scenario/NN/scenario is/VBZ/is known/VBN/known as/IN/as a/DT/a a/DT/a programmer/NN/programmer /,/, for/IN/for example/NN/example /,/, might/MD/might write/VB/write code/NN/code to/TO/to detect/VB/detect whether/IN/whether was/VBD/was still/RB/still employed/VBN/employed ;/:/; if/IN/if that/DT/that check/NN/check failed/VBD/failed /,/, a/DT/a daemon/NN/daemon could/MD/could be/VB/be spawned/VBN/spawned to/TO/to allow/VB/allow remote/NN/remote access/NN/access /,/, or/CC/or code/VB/code could/MD/could be/VB/be launched/VBN/launched to/TO/to cause/VB/cause damage/NN/damage to/TO/to the/DT/the site/NN/site /./. 15.2.4/CD/15.2.4 stack/NN/stack and/CC/and buffer/NN/buffer overflow/NN/overflow the/DT/the stack/NN/stack- or/CC/or buffer-overflow/JJ/buffer-overflow attack/NN/attack is/VBZ/is the/DT/the most/RBS/most common/JJ/common way/NN/way for/IN/for an/DT/an attacker/NN/attacker outside/IN/outside the/DT/the system/NN/system /,/, on/IN/on a/DT/a network/NN/network or/CC/or dial-up/JJ/dial-up connection/NN/connection /,/, to/TO/to gain/VB/gain unauthorized/VBN/unauthorized access/NN/access to/TO/to the/DT/the target/NN/target system/NNP/system. an/DT/an authorized/JJ/authorized user/NN/user of/IN/of the/DT/the system/NN/system may/MD/may also/RB/also use/VB/use this/DT/this exploit/NN/exploit for/IN/for privilege/NN/privilege escalation/NN/escalation /./. essentially/RB/essentially /,/, the/DT/the attack/NN/attack exploits/VBZ/exploits a/DT/a bug/NN/bug in/IN/in a/DT/a program/NNP/program. the/DT/the bug/NN/bug can/MD/can be/VB/be a/DT/a simple/JJ/simple case/NN/case of/IN/of poor/JJ/poor programming/NN/programming /,/, in/IN/in which/WDT/which the/DT/the programmer/NN/programmer neglected/VBD/neglected to/TO/to code/VB/code bounds/NNS/bounds checking/VBG/checking on/IN/on an/DT/an input/NN/input field/NNP/field. in/IN/in this/DT/this case/NN/case /,/, the/DT/the attacker/NN/attacker sends/NNS/sends more/RBR/more data/NNS/data than/IN/than the/DT/the program/NN/program was/VBD/was expecting/NNP/expecting. by/IN/by using/VBG/using trial/NN/trial and/CC/and error/NN/error /,/, or/CC/or by/IN/by examining/NN/examining the/DT/the source/NN/source code/NN/code of/IN/of the/DT/the attacked/VBN/attacked program/NN/program if/IN/if it/PRP/it is/VBZ/is available/JJ/available /,/, the/DT/the attacker/NN/attacker determines/NNS/determines the/DT/the vulnerability/NN/vulnerability and/CC/and writes/VBZ/writes a/DT/a program/NN/program to/TO/to do/VB/do the/DT/the following/VBG/following /:/: overflow/JJ/overflow an/DT/an input/NN/input field/NN/field /,/, command-line/JJ/command-line argument/NN/argument /,/, or/CC/or input/VB/input buffer-for/JJ/buffer-for example/NN/example /,/, on/IN/on a/DT/a network/NN/network daemon-wl.til/NN/daemon-wl.til it/PRP/it writes/VBZ/writes into/IN/into the/DT/the stack/NN/stack /./. overwrite/NN/overwrite the/DT/the current/JJ/current return/NN/return address/NN/address on/IN/on the/DT/the stack/NN/stack with/IN/with the/DT/the address/NN/address of/IN/of the/DT/the exploit/NN/exploit code/NN/code loaded/VBD/loaded in/IN/in step/NN/step 3/CD/3 /./. write/JJ/write a/DT/a simple/JJ/simple set/NN/set of/IN/of code/NN/code for/IN/for the/DT/the next/JJ/next space/NN/space in/IN/in the/DT/the stack/NN/stack that/IN/that includes/VBZ/includes the/DT/the commands/NNS/commands that/WDT/that the/DT/the attacker/NN/attacker wishes/VBZ/wishes to/TO/to execute-for/JJ/execute-for instance/NN/instance /,/, spawn/NN/spawn a/DT/a shell/NN/shell /./. the/DT/the result/NN/result of/IN/of this/DT/this attack/NN/attack program/NN/program 's/POS/'s execution/NN/execution will/MD/will be/VB/be a/DT/a root/NN/root shell/NN/shell or/CC/or other/JJ/other privileged/JJ/privileged command/NN/command execution/NN/execution /./. for/IN/for instance/NN/instance /,/, if/IN/if a/DT/a web-page/JJ/web-page form/NN/form expects/VBZ/expects a/DT/a user/NN/user name/NN/name to/TO/to be/VB/be entered/VBN/entered into/IN/into a/DT/a field/NN/field /,/, the/DT/the attacker/NN/attacker could/MD/could send/VB/send the/DT/the user/NN/user name/NN/name /,/, plus/CC/plus extra/JJ/extra characters/NNS/characters to/TO/to overflow/VB/overflow the/DT/the buffer/NN/buffer and/CC/and reach/NN/reach the/DT/the stack/NN/stack /,/, plus/CC/plus a/DT/a new/JJ/new return/NN/return address/NN/address to/TO/to load/VB/load onto/IN/onto the/DT/the stack/NN/stack /,/, plus/CC/plus the/DT/the code/NN/code the/DT/the attacker/NN/attacker wants/VBZ/wants to/TO/to run/NNP/run. when/WRB/when the/DT/the buffer-reading/JJ/buffer-reading subroutine/NN/subroutine returns/NNS/returns from/IN/from execution/NN/execution /,/, the/DT/the return/NN/return address/NN/address is/VBZ/is the/DT/the exploit/NN/exploit code/NN/code /,/, and/CC/and the/DT/the code/NN/code is/VBZ/is run/VBN/run /./. let/NN/let 's/POS/'s look/NN/look at/IN/at a/DT/a buffer-overflow/JJ/buffer-overflow exploit/NN/exploit in/IN/in more/JJR/more detail/NNP/detail. consider/NN/consider the/DT/the simple/NN/simple c/NN/c program/NN/program in/IN/in fig1-1re/JJ/fig1-1re 15.2/CD/15.2. this/DT/this program/NN/program creates/VBZ/creates a/DT/a character/NN/character array/NN/array size/NN/size buffer_size/NNP/buffer_size and/CC/and copies/NNS/copies the/DT/the contents/NNS/contents of/IN/of the/DT/the parameter/NN/parameter provided/VBD/provided on/IN/on the/DT/the command/NN/command line-argv/NN/line-argv /:/[ 1/CD/1 /CD/] /./. as/IN/as long/RB/long as/IN/as the/DT/the size/NN/size of/IN/of this/DT/this parameter/NN/parameter is/VBZ/is less/JJR/less than/IN/than buffer_size/NNP/buffer_size /NNP/( we/PRP/we need/VBP/need one/CD/one byte/NN/byte to/TO/to store/VB/store the/DT/the null/NN/null terminator/NN/terminator /:/) /,/, this/DT/this program/NN/program works/VBZ/works properly/NNP/properly. but/CC/but consider/NN/consider what/WP/what happens/NNS/happens if/IN/if the/DT/the parameter/NN/parameter provided/VBD/provided on/IN/on the/DT/the command/NN/command line/NN/line is/VBZ/is longer/JJR/longer than/IN/than buffer_size/NNP/buffer_size. in/IN/in this/DT/this scenario/NN/scenario /,/, the/DT/the strcpy/NN/strcpy /:/( /:/) function/NN/function will/MD/will begin/VB/begin copying/NN/copying from/IN/from argv/NN/argv /:/[ 1/CD/1 /CD/] until/IN/until it/PRP/it encounters/VBZ/encounters a/DT/a null/NN/null terminator/NN/terminator /:/( \/:/\ 0/-NONE-/0 /:/) or/CC/or until/IN/until the/DT/the program/NN/program crashes/NNP/crashes. thus/RB/thus /,/, this/DT/this program/NN/program suffers/NNS/suffers from/IN/from a/DT/a potential/JJ/potential problem/NN/problem in/IN/in which/WDT/which copied/VBN/copied data/NNS/data overflow/VBP/overflow the/DT/the buffer/NN/buffer array/NN/array /./. 628/CD/628 chapter/NN/chapter 15/CD/15 #/#/# include/NN/include stdio.h/NN/stdio.h #/#/# define/NN/define buffer_size/NNP/buffer_size 256/CD/256 int/NN/int main/NN/main /:/( int/NN/int argc/NN/argc /,/, char/NN/char argv/NN/argv /:/[ /:/] /:/) /:/{ /:/} char/NN/char buffer/NN/buffer /:/[ buffer_size/NNP/buffer_size /:/] ;/:/; if/IN/if /CD/( argc/NN/argc 2/CD/2 /CD/) return/NN/return -1/-NONE-/-1 ;/:/; else/RB/else /:/{ strcpy/JJ/strcpy /NN/( buffer,argv/NN/buffer,argv /:/[ 1/CD/1 /CD/] /CD/) ;/:/; return/NN/return 0/-NONE-/0 ;/:/; /NNP/} figure/NN/figure 15.2/CD/15.2 c/NN/c program/NN/program with/IN/with buffer-overflow/JJ/buffer-overflow condition/NN/condition /./. note/NN/note that/IN/that a/DT/a careful/JJ/careful programmer/NN/programmer could/MD/could have/VB/have performed/VBN/performed bounds/NNS/bounds checking/VBG/checking on/IN/on the/DT/the size/NN/size of/IN/of argv/NN/argv /:/[ 1/CD/1 /CD/] by/IN/by using/NN/using the/DT/the strncpy/NN/strncpy /:/( /:/) function/NN/function rather/RB/rather than/IN/than strcpy/NN/strcpy /:/( /:/) /,/, replacing/VBG/replacing the/DT/the line/NN/line strcpy/NN/strcpy /:/( buffer/NN/buffer /,/, argv/NN/argv /:/[ 1/CD/1 /CD/] /CD/) ;/:/; with/IN/with strncpy/NN/strncpy /:/( buffer/NN/buffer /,/, argv/NN/argv /:/[ 1/CD/1 /CD/] /,/, sizeof/IN/sizeof /NNP/( buffer/NN/buffer /:/) -1/-NONE-/-1 /:/) ;/:/; .unfortunately/JJ/.unfortunately /,/, good/JJ/good bounds/NNS/bounds checking/VBG/checking is/VBZ/is the/DT/the exception/NN/exception rather/RB/rather than/IN/than the/DT/the norm/NN/norm /./. furthermore/NN/furthermore /,/, lack/VBP/lack of/IN/of bounds/NNS/bounds checking/VBG/checking is/VBZ/is not/RB/not the/DT/the only/JJ/only possible/JJ/possible cause/NN/cause of/IN/of the/DT/the behavior/NN/behavior of/IN/of the/DT/the program/NN/program in/IN/in figure/NN/figure 15.2/CD/15.2. the/DT/the program/NN/program could/MD/could instead/VB/instead have/VB/have been/VBN/been carefully/RB/carefully designed/VBN/designed to/TO/to compromise/VB/compromise the/DT/the integrity/NN/integrity of/IN/of the/DT/the system/NNP/system. we/PRP/we now/RB/now consider/VBP/consider the/DT/the possible/JJ/possible security/NN/security vulnerabilities/NNS/vulnerabilities of/IN/of a/DT/a buffer/NN/buffer overflow/NN/overflow /./. when/WRB/when a/DT/a function/NN/function is/VBZ/is invoked/VBN/invoked in/IN/in a/DT/a typical/JJ/typical computer/NN/computer architecture/NN/architecture /,/, the/DT/the variables/NNS/variables defined/VBD/defined locally/RB/locally to/TO/to the/DT/the function/NN/function /:/( sometimes/RB/sometimes known/VBN/known as/IN/as automatic/JJ/automatic variables/NNS/variables /:/) /,/, the/DT/the parameters/NNS/parameters passed/VBD/passed to/TO/to the/DT/the function/NN/function /,/, and/CC/and the/DT/the address/NN/address to/TO/to which/WDT/which control/NN/control returns/NNS/returns once/RB/once the/DT/the function/NN/function exits/VBZ/exits are/VBP/are stored/VBN/stored in/IN/in a/DT/a stack/NN/stack frame/NNP/frame. the/DT/the layout/NN/layout for/IN/for a/DT/a typical/JJ/typical stack/NN/stack frame/NN/frame is/VBZ/is shown/VBN/shown in/IN/in figure/NN/figure 15.3/CD/15.3. examining/VBG/examining the/DT/the stack/NN/stack frame/NN/frame from/IN/from top/JJ/top to/TO/to bottom/VB/bottom /,/, we/PRP/we first/RB/first see/VB/see the/DT/the parameters/NNS/parameters passed/VBD/passed to/TO/to the/DT/the function/NN/function /,/, followed/VBN/followed by/IN/by any/DT/any automatic/JJ/automatic variables/NNS/variables declared/VBD/declared in/IN/in the/DT/the function/NNP/function. we/PRP/we next/JJ/next see/NN/see the/DT/the frame/NN/frame pointer/NN/pointer /,/, which/WDT/which is/VBZ/is the/DT/the address/NN/address of/IN/of the/DT/the beginning/NN/beginning of/IN/of the/DT/the stack/NN/stack frame/NNP/frame. finally/RB/finally /,/, we/PRP/we have/VBP/have the/DT/the return/NN/return bottom/NN/bottom ~/:/~ frame/NN/frame pointer/NN/pointer grows/VBZ/grows top/JJ/top figure/NN/figure 15.3/CD/15.3 the/DT/the layout/NN/layout for/IN/for a/DT/a typical/JJ/typical stack/NN/stack frame/NN/frame /./. 15.2/CD/15.2 629/CD/629 address/NN/address /,/, which/WDT/which specifies/NNS/specifies where/WRB/where to/TO/to return/VB/return control/NN/control once/RB/once the/DT/the function/NN/function exits/NNP/exits. the/DT/the frame/NN/frame pointer/NN/pointer must/MD/must be/VB/be saved/VBN/saved on/IN/on the/DT/the stack/NN/stack /,/, as/IN/as the/DT/the value/NN/value of/IN/of the/DT/the stack/NN/stack pointer/NN/pointer can/MD/can vary/VB/vary during/IN/during the/DT/the function/NN/function call/NN/call ;/:/; the/DT/the saved/VBN/saved frame/NN/frame pointer/NN/pointer allows/VBZ/allows relative/JJ/relative access/NN/access to/TO/to parameters/NNS/parameters and/CC/and automatic/JJ/automatic variables/NNS/variables /./. given/VBN/given this/DT/this standard/JJ/standard memory/NN/memory layout/IN/layout /,/, a/DT/a cracker/NN/cracker could/MD/could execute/VB/execute a/DT/a bufferoverflow/NN/bufferoverflow attack/NNP/attack. i/NNP/i- /:/: ter/NN/ter goal/NN/goal is/VBZ/is to/TO/to replace/VB/replace the/DT/the return/NN/return address/NN/address in/IN/in the/DT/the stack/NN/stack frame/NN/frame so/RB/so that/IN/that it/PRP/it now/RB/now points/VBZ/points to/TO/to the/DT/the code/NN/code segment/NN/segment containing/VBG/containing the/DT/the attacking/VBG/attacking program/NN/program /./. the/DT/the programmer/NN/programmer first/RB/first writes/VBZ/writes a/DT/a short/JJ/short code/NN/code segment/NN/segment such/JJ/such as/IN/as the/DT/the following/JJ/following /:/: #/#/# include/NN/include stdio.h/NN/stdio.h int/NN/int main/NN/main /:/( int/NN/int argc/NN/argc /,/, char/NN/char argv/NN/argv /:/[ /:/] /:/) /:/{ execvp/NN/execvp /:/( '/''/' '/''/' \/:/\ bin/NN/bin \/:/\ sh'/JJ/sh' '/''/' /,/, '/''/' '/''/' \/:/\ bin/NN/bin \/:/\ sh'/JJ/sh' '/''/' /,/, null/RB/null /:/) ;/:/; return/NN/return 0/-NONE-/0 ;/:/; using/VBG/using the/DT/the execvp/NN/execvp /:/( /:/) system/NN/system call/NN/call /,/, this/DT/this code/NN/code segment/NN/segment creates/VBZ/creates a/DT/a shell/NN/shell process/NN/process /./. if/IN/if the/DT/the program/NN/program being/VBG/being attacked/VBN/attacked runs/NNS/runs with/IN/with system-wide/JJ/system-wide permissions/NNS/permissions /,/, this/DT/this newly/RB/newly created/VBN/created shell/NN/shell will/MD/will gain/VB/gain complete/JJ/complete access/NN/access to/TO/to the/DT/the system/NNP/system. of/IN/of course/NN/course /,/, the/DT/the code/NN/code segment/NN/segment could/MD/could do/VB/do anything/NN/anything allowed/VBN/allowed by/IN/by the/DT/the privileges/NNS/privileges of/IN/of the/DT/the attacked/VBN/attacked process/NN/process /./. this/DT/this code/NN/code segment/NN/segment is/VBZ/is then/RB/then compiled/VBN/compiled so/RB/so that/IN/that the/DT/the assembly/RB/assembly language/NN/language instructions/NNS/instructions can/MD/can be/VB/be modified/NNP/modified. the/DT/the primary/JJ/primary modification/NN/modification is/VBZ/is to/TO/to remove/VB/remove unnecessary/JJ/unnecessary features/NNS/features in/IN/in the/DT/the code/NN/code /,/, thereby/RB/thereby reducing/VBG/reducing the/DT/the code/NN/code size/NN/size so/RB/so that/IN/that it/PRP/it can/MD/can fit/VB/fit into/IN/into a/DT/a stack/NN/stack frame/NN/frame /./. this/DT/this assembled/VBN/assembled code/NN/code fragment/NN/fragment is/VBZ/is now/RB/now a/DT/a binary/JJ/binary sequence/NN/sequence that/WDT/that will/MD/will be/VB/be at/IN/at the/DT/the heart/NN/heart of/IN/of the/DT/the attack/NN/attack /./. refer/NN/refer again/RB/again to/TO/to the/DT/the program/NN/program shown/NN/shown in/IN/in figure/NN/figure 15.2/CD/15.2. let/NN/let 's/POS/'s assume/NN/assume that/IN/that when/WRB/when the/DT/the main/JJ/main /NN/( /:/) function/NN/function is/VBZ/is called/VBN/called in/IN/in that/DT/that program/NN/program /,/, the/DT/the stack/NN/stack frame/NN/frame appears/VBZ/appears as/IN/as shown/JJ/shown in/IN/in figure/NN/figure 15.4/CD/15.4 /CD/( a/DT/a /NN/) /./. using/VBG/using a/DT/a debugger/NN/debugger /,/, the/DT/the programmer/NN/programmer then/RB/then finds/VBZ/finds the/DT/the copied/JJ/copied /NN/( a/DT/a /NN/) /:/( b/NN/b /:/) figure/NN/figure 15.4/CD/15.4 hypothetical/JJ/hypothetical stack/NN/stack frame/NN/frame for/IN/for figure/NN/figure 15.2/CD/15.2 /,/, /:/( a/DT/a /NN/) before/IN/before and/CC/and /CD/( b/NN/b /:/) after/IN/after /./. 630/CD/630 chapter/NN/chapter 15/CD/15 address/NN/address of/IN/of buffer/NN/buffer /:/[ 0/-NONE-/0 /:/] in/IN/in the/DT/the stack/NNP/stack. that/IN/that address/NN/address is/VBZ/is the/DT/the location/NN/location of/IN/of the/DT/the code/NN/code the/DT/the attacker/NN/attacker wants/VBZ/wants executed/NNP/executed. the/DT/the binary/JJ/binary sequence/NN/sequence is/VBZ/is appended/VBN/appended with/IN/with the/DT/the necessary/JJ/necessary amount/NN/amount of/IN/of no-op/JJ/no-op instructions/NNS/instructions /:/( for/IN/for no-operation/NN/no-operation /:/) to/TO/to fill/VB/fill the/DT/the stack/NN/stack frame/NN/frame up/IN/up to/TO/to the/DT/the location/NN/location of/IN/of the/DT/the return/NN/return address/NN/address ;/:/; and/CC/and the/DT/the location/NNP/location. of/IN/of buffer/NN/buffer /:/[ 0/-NONE-/0 /:/] /,/, the/DT/the new/JJ/new return/NN/return address/NN/address /,/, is/VBZ/is added/NNP/added. the/DT/the attack/NN/attack is/VBZ/is complete/JJ/complete when/WRB/when the/DT/the attacker/NN/attacker gives/VBZ/gives this/DT/this constructed/VBN/constructed binary/NN/binary sequence/NN/sequence as/IN/as input/NN/input to/TO/to the/DT/the process/NNP/process. the/DT/the process/NN/process then/RB/then copies/VBZ/copies the/DT/the binary/JJ/binary sequence/NN/sequence from/IN/from argv/NN/argv /:/[ 1/CD/1 /CD/] to/TO/to position/NN/position buffer/NN/buffer /:/[ 0/-NONE-/0 /:/] in/IN/in the/DT/the stack/NN/stack frame/NN/frame /./. now/RB/now /,/, when/WRB/when control/NN/control returns/NNS/returns from/IN/from main/JJ/main /NN/( /:/) /,/, instead/RB/instead of/IN/of returning/VBG/returning to/TO/to the/DT/the location/NN/location specified/VBD/specified by/IN/by the/DT/the old/JJ/old value/NN/value of/IN/of the/DT/the return/NN/return address/NN/address /,/, we/PRP/we return/VBP/return to/TO/to the/DT/the modified/JJ/modified shell/NN/shell code/NN/code /,/, which/WDT/which runs/VBZ/runs with/IN/with the/DT/the access/NN/access rights/NNS/rights of/IN/of the/DT/the attacked/VBN/attacked process/NN/process !/./! figure/NN/figure 15.4/CD/15.4 /CD/( b/NN/b /:/) contains/NNS/contains the/DT/the modified/JJ/modified shell/NN/shell code/NN/code /./. there/EX/there are/VBP/are many/JJ/many ways/NNS/ways to/TO/to exploit/VB/exploit potential/JJ/potential buffer-overflow/JJ/buffer-overflow problems/NNP/problems. in/IN/in this/DT/this example/NN/example /,/, we/PRP/we considered/VBD/considered the/DT/the possibility/NN/possibility that/IN/that the/DT/the program/NN/program being/VBG/being attackedthe/DT/attackedthe code/NN/code shown/NN/shown in/IN/in figure/NN/figure 15.2-ran/CD/15.2-ran with/IN/with system-wide/JJ/system-wide permissions/NNP/permissions. however/RB/however /,/, the/DT/the code/NN/code segment/NN/segment that/WDT/that runs/VBZ/runs once/RB/once the/DT/the value/NN/value of/IN/of the/DT/the return/NN/return address/NN/address has/VBZ/has been/VBN/been modified/VBN/modified might/MD/might perform/VB/perform any/DT/any type/NN/type of/IN/of malicious/JJ/malicious act/NN/act /,/, such/JJ/such as/IN/as deleting/NN/deleting files/NNS/files /,/, opening/VBG/opening network/NN/network ports/NNS/ports for/IN/for further/JJ/further exploitation/NN/exploitation /,/, and/CC/and so/RB/so on/IN/on /./. this/DT/this example/NN/example buffer-overflow/-NONE-/buffer-overflow attack/NN/attack reveals/NNS/reveals that/WDT/that considerable/JJ/considerable knowledge/NN/knowledge and/CC/and programming/NN/programming skill/NN/skill are/VBP/are needed/VBN/needed to/TO/to recognize/VB/recognize exploitable/JJ/exploitable code/NN/code and/CC/and then/RB/then to/TO/to exploit/VB/exploit it/NNP/it. unfortunately/RB/unfortunately /,/, it/PRP/it does/VBZ/does not/RB/not take/VB/take great/JJ/great programmers/NNS/programmers to/TO/to launch/VB/launch security/NN/security attacks/NNP/attacks. rather/RB/rather /,/, one/CD/one cracker/NN/cracker can/MD/can determine/VB/determine the/DT/the bug/NN/bug and/CC/and then/RB/then write/VB/write an/DT/an exploit/NNP/exploit. anyone/NN/anyone with/IN/with rudimentary/JJ/rudimentary computer/NN/computer skills/NNS/skills and/CC/and access/NN/access to/TO/to the/DT/the exploita/NN/exploita so-called/JJ/so-called then/RB/then try/JJ/try to/TO/to launch/VB/launch the/DT/the attack/NN/attack at/IN/at target/NN/target systems/NNS/systems /./. the/DT/the buffer-overflow/JJ/buffer-overflow attack/NN/attack is/VBZ/is especially/RB/especially pernicious/JJ/pernicious because/IN/because it/PRP/it can/MD/can be/VB/be run/VBN/run between/IN/between systems/NNS/systems and/CC/and can/MD/can travel/VB/travel over/IN/over allowed/VBN/allowed communication/NN/communication channels/NNP/channels. such/JJ/such attacks/NNS/attacks can/MD/can occur/VB/occur within/IN/within protocols/NNS/protocols that/WDT/that are/VBP/are expected/VBN/expected to/TO/to be/VB/be used/VBN/used to/TO/to communicate/VB/communicate with/IN/with the/DT/the target/NN/target machine/NN/machine /,/, and/CC/and they/PRP/they can/MD/can therefore/VB/therefore be/VB/be hard/RB/hard to/TO/to detect/VB/detect and/CC/and prevent/VB/prevent /./. they/PRP/they can/MD/can even/RB/even bypass/VB/bypass the/DT/the security/NN/security added/VBD/added by/IN/by firewalls/NNS/firewalls /:/( section/NN/section 15.7/CD/15.7 /CD/) /./. one/CD/one solution/NN/solution to/TO/to this/DT/this problem/NN/problem is/VBZ/is for/IN/for the/DT/the cpu/NN/cpu to/TO/to have/VB/have a/DT/a feature/NN/feature that/WDT/that disallows/VBZ/disallows execution/NN/execution of/IN/of code/NN/code in/IN/in a/DT/a stack/NN/stack section/NN/section of/IN/of memory/NNP/memory. recent/JJ/recent versions/NNS/versions of/IN/of sun/NN/sun 's/POS/'s sparc/NN/sparc chip/NN/chip include/NN/include this/DT/this setting/NN/setting /,/, and/CC/and recent/JJ/recent versions/NNS/versions of/IN/of solaris/NNS/solaris enable/JJ/enable it/NNP/it. the/DT/the return/NN/return address/NN/address of/IN/of the/DT/the overflowed/VBN/overflowed routine/NN/routine can/MD/can still/RB/still be/VB/be modified/VBN/modified ;/:/; but/CC/but when/WRB/when the/DT/the return/NN/return address/NN/address is/VBZ/is within/IN/within the/DT/the stack/NN/stack and/CC/and the/DT/the code/NN/code there/RB/there attempts/VBZ/attempts to/TO/to execute/VB/execute /,/, an/DT/an exception/NN/exception is/VBZ/is generated/VBN/generated /,/, and/CC/and the/DT/the program/NN/program is/VBZ/is halted/VBN/halted with/IN/with an/DT/an error/NN/error /./. recent/JJ/recent versions/NNS/versions of/IN/of amd/NN/amd and/CC/and intel/NN/intel x86/NNP/x86 chips/NNS/chips include/VBP/include the/DT/the nx/NN/nx feature/NN/feature to/TO/to prevent/VB/prevent this/DT/this type/NN/type of/IN/of attack/NN/attack the/DT/the use/NN/use of/IN/of the/DT/the feature/NN/feature is/VBZ/is supported/VBN/supported in/IN/in several/JJ/several x86/CD/x86 operating/NN/operating systems/NNS/systems /,/, including/VBG/including linux/NN/linux and/CC/and windows/VBZ/windows xp/NN/xp sp2/NNP/sp2. the/DT/the hardware/NN/hardware implementation/NN/implementation involves/VBZ/involves the/DT/the use/NN/use of/IN/of a/DT/a new/JJ/new bit/NN/bit in/IN/in the/DT/the page/NN/page tables/NNS/tables of/IN/of the/DT/the cpus/NNP/cpus. this/DT/this bit/NN/bit marks/VBZ/marks the/DT/the associated/VBN/associated page/NN/page as/IN/as nonexecutable/JJ/nonexecutable /,/, so/RB/so that/IN/that instructions/NNS/instructions can/MD/can not/RB/not be/VB/be read/VBN/read from/IN/from it/PRP/it and/CC/and executed/NNP/executed. as/IN/as this/DT/this feature/NN/feature becomes/VBZ/becomes prevalent/NN/prevalent /,/, buffer-overflow/JJ/buffer-overflow attacks/NNS/attacks should/MD/should greatly/RB/greatly diminish/VB/diminish /./. 15.2.5/CD/15.2.5 viruses/NNS/viruses another/DT/another form/NN/form of/IN/of program/NN/program threat/NN/threat is/VBZ/is a/DT/a a/DT/a virus/NN/virus is/VBZ/is a/DT/a fragment/NN/fragment of/IN/of code/NN/code embedded/VBD/embedded in/IN/in a/DT/a legitimate/NN/legitimate program/NNP/program. viruses/NNS/viruses are/VBP/are self-replicating/JJ/self-replicating and/CC/and are/VBP/are designed/VBN/designed to/TO/to infect/VB/infect other/JJ/other programs/NNP/programs. they/PRP/they can/MD/can wreak/VB/wreak havoc/NN/havoc in/IN/in a/DT/a system/NN/system by/IN/by modifying/NN/modifying or/CC/or destroying/VBG/destroying files/NNS/files and/CC/and causing/VBG/causing system/NN/system crashes/NNS/crashes and/CC/and program/NN/program malfunctions/NNP/malfunctions. as/IN/as with/IN/with most/JJS/most penetration/NN/penetration attacks/NNS/attacks /,/, viruses/NNS/viruses are/VBP/are very/RB/very specific/JJ/specific to/TO/to architectures/NNS/architectures /,/, operating/VBG/operating systems/NNS/systems /,/, and/CC/and applications/NNP/applications. viruses/NNS/viruses are/VBP/are a/DT/a particular/JJ/particular problem/NN/problem for/IN/for users/NNS/users of/IN/of 15.2/CD/15.2 631/CD/631 pcs/NNP/pcs. unix/CD/unix and/CC/and other/JJ/other multiuser/NN/multiuser operating/VBG/operating systems/NNS/systems generally/RB/generally are/VBP/are not/RB/not susceptible/JJ/susceptible to/TO/to viruses/NNS/viruses because/IN/because the/DT/the executable/JJ/executable programs/NNS/programs are/VBP/are protected/VBN/protected from/IN/from writing/VBG/writing by/IN/by the/DT/the operating/NN/operating system/NNP/system. even/RB/even if/IN/if a/DT/a virus/NN/virus does/VBZ/does infect/NN/infect such/JJ/such a/DT/a progran/NN/progran /:/: 1/LS/1 /,/, its/PRP$/its powers/NNS/powers usually/RB/usually are/VBP/are limited/VBN/limited because/IN/because other/JJ/other aspects/NNS/aspects of/IN/of the/DT/the system/NN/system are/VBP/are protected/VBN/protected /./. viruses/NNS/viruses are/VBP/are usually/RB/usually borne/JJ/borne via/IN/via e-mail/JJ/e-mail /,/, with/IN/with spam/NN/spam the/DT/the most/JJS/most comrnon/NN/comrnon vector/NN/vector /./. they/PRP/they can/MD/can also/RB/also spread/VB/spread when/WRB/when users/NNS/users download/VBP/download viral/JJ/viral programs/NNS/programs internet/VBP/internet file-sharing/JJ/file-sharing services/NNS/services or/CC/or exchange/NN/exchange infected/VBD/infected disks/NNS/disks /./. another/DT/another common/JJ/common form/NN/form of/IN/of virus/NN/virus transmission/NN/transmission uses/NNS/uses microsoft/VBP/microsoft office/NN/office files/NNS/files /,/, such/JJ/such as/IN/as microsoft/JJ/microsoft word/NN/word documents/NNP/documents. these/DT/these documents/NNS/documents can/MD/can contain/VB/contain macros/NNS/macros visual/JJ/visual basic/JJ/basic programs/NNS/programs /:/) that/IN/that programs/NNS/programs in/IN/in the/DT/the office/NN/office suite/NN/suite powerpoint/NN/powerpoint /,/, and/CC/and excel/NN/excel /:/) will/MD/will execute/VB/execute automatically/NNP/automatically. because/IN/because these/DT/these programs/NNS/programs run/VBP/run under/IN/under the/DT/the user/NN/user 's/POS/'s own/JJ/own account/NN/account /,/, the/DT/the macros/NNS/macros can/MD/can run/VB/run largely/RB/largely unconstrained/VBN/unconstrained /-NONE-/( for/IN/for example/NN/example /,/, deleting/NN/deleting user/NN/user files/NNS/files at/IN/at will/MD/will /VB/) /./. commonly/RB/commonly /,/, the/DT/the virus/NN/virus will/MD/will also/RB/also e-mail/JJ/e-mail itself/PRP/itself to/TO/to others/NNS/others in/IN/in the/DT/the user/NN/user 's/POS/'s contact/NN/contact list/NNP/list. here/RB/here is/VBZ/is a/DT/a code/NN/code sample/NN/sample that/WDT/that shows/VBZ/shows the/DT/the simplicity/NN/simplicity of/IN/of writing/VBG/writing a/DT/a visual/JJ/visual basic/JJ/basic macro/NN/macro that/WDT/that a/DT/a virus/NN/virus could/MD/could use/VB/use to/TO/to format/VB/format the/DT/the hard/JJ/hard drive/JJ/drive of/IN/of a/DT/a windows/NN/windows computer/NN/computer as/IN/as soon/RB/soon as/IN/as the/DT/the file/NN/file containing/VBG/containing the/DT/the macro/NN/macro was/VBD/was opened/VBN/opened /:/: sub/NN/sub autoopen/NN/autoopen /:/( /:/) dim/NN/dim ofs/NNS/ofs set/VBD/set ofs/NNS/ofs =/:/= createobject/NN/createobject /:/( '/''/' 'scripting.filesystemobject'/-NONE-/'scripting.filesystemobject' '/''/' /:/) vs/NNS/vs =/VBP/= shell/NN/shell /:/( '/''/' 'c/JJ/'c /:/: command.com/JJ/command.com /k/NN//k format/NN/format c/NN/c /:/: '/''/' ',vbhide/JJ/',vbhide /NN/) end/NN/end sub/NN/sub how/WRB/how do/VBP/do viruses/NNS/viruses work/VB/work once/RB/once a/DT/a virus/NN/virus reaches/VBZ/reaches a/DT/a target/NN/target machine/NN/machine /,/, a/DT/a program/NN/program known/VBN/known as/IN/as a/DT/a inserts/NNS/inserts the/DT/the virus/NN/virus into/IN/into the/DT/the system/NNP/system. the/DT/the virus/NN/virus dropper/NN/dropper is/VBZ/is usually/RB/usually a/DT/a trojan/NN/trojan horse/NN/horse /,/, executed/VBN/executed for/IN/for other/JJ/other reasons/NNS/reasons but/CC/but installing/VBG/installing the/DT/the virus/NN/virus as/IN/as its/PRP$/its core/NN/core activity/NNP/activity. once/RB/once installed/VBD/installed /,/, the/DT/the virus/NN/virus may/MD/may do/VB/do any/DT/any one/CD/one of/IN/of a/DT/a number/NN/number of/IN/of things/NNP/things. there/EX/there are/VBP/are literally/RB/literally thousands/NNS/thousands of/IN/of viruses/NNS/viruses /,/, but/CC/but they/PRP/they fall/VBP/fall into/IN/into several/JJ/several main/JJ/main categories/NNP/categories. note/NN/note that/IN/that many/JJ/many viruses/NNS/viruses belong/VBP/belong to/TO/to more/JJR/more than/IN/than one/CD/one category/NN/category /./. file/NNP/file. a/DT/a standard/JJ/standard file/NN/file virus/VBZ/virus infects/NNS/infects a/DT/a system/NN/system by/IN/by appending/NN/appending itself/PRP/itself to/TO/to a/DT/a file/NN/file /./. it/PRP/it changes/VBZ/changes the/DT/the start/NN/start of/IN/of the/DT/the program/NN/program so/RB/so that/IN/that execution/NN/execution jumps/NNS/jumps to/TO/to its/PRP$/its code/NN/code /./. after/IN/after it/PRP/it executes/VBZ/executes /,/, it/PRP/it returns/VBZ/returns control/NN/control to/TO/to the/DT/the program/NN/program so/RB/so that/IN/that its/PRP$/its execution/NN/execution is/VBZ/is not/RB/not noticed/NNP/noticed. file/NN/file viruses/NNS/viruses are/VBP/are sometimes/RB/sometimes known/VBN/known as/IN/as parasitic/JJ/parasitic viruses/NNS/viruses /,/, as/IN/as they/PRP/they leave/VBP/leave no/DT/no full/JJ/full files/NNS/files behind/IN/behind and/CC/and leave/VB/leave the/DT/the host/NN/host program/NN/program still/RB/still functional/JJ/functional /./. boot/NNP/boot. a/DT/a boot/NN/boot virus/NN/virus infects/NNS/infects the/DT/the boot/NN/boot sector/NN/sector of/IN/of the/DT/the system/NN/system /,/, executing/VBG/executing every/DT/every time/NN/time the/DT/the system/NN/system is/VBZ/is booted/VBN/booted and/CC/and before/IN/before the/DT/the operating/NN/operating system/NN/system is/VBZ/is loaded/NNP/loaded. it/PRP/it watches/VBZ/watches for/IN/for other/JJ/other boatable/JJ/boatable media/NNS/media /:/( that/IN/that is/VBZ/is /,/, floppy/JJ/floppy disks/NNS/disks /:/) and/CC/and infects/NNS/infects them/PRP/them /./. these/DT/these viruses/NNS/viruses are/VBP/are also/RB/also known/VBN/known as/IN/as memory/NN/memory viruses/NNS/viruses /,/, because/IN/because they/PRP/they do/VBP/do not/RB/not appear/VB/appear in/IN/in the/DT/the file/NN/file system/NNP/system. figure/NN/figure 15.5/CD/15.5 shows/NNS/shows how/WRB/how a/DT/a boot/NN/boot virus/NN/virus works/NNS/works /./. macro/NNP/macro. most/JJS/most viruses/NNS/viruses are/VBP/are written/VBN/written in/IN/in a/DT/a low-levellanguage/NN/low-levellanguage /,/, such/JJ/such as/IN/as assembly/RB/assembly or/CC/or c/NNP/c. macro/NN/macro viruses/NNS/viruses are/VBP/are written/VBN/written in/IN/in a/DT/a high-level/JJ/high-level language/NN/language /,/, such/JJ/such as/IN/as visual/JJ/visual basic/NNP/basic. these/DT/these viruses/NNS/viruses are/VBP/are triggered/VBN/triggered when/WRB/when a/DT/a program/NN/program capable/JJ/capable of/IN/of executing/NN/executing the/DT/the macro/NN/macro is/VBZ/is run/NNP/run. for/IN/for example/NN/example /,/, a/DT/a macro/NN/macro virus/NN/virus could/MD/could be/VB/be contained/VBN/contained in/IN/in a/DT/a spreadsheet/NN/spreadsheet file/NN/file /./. source/NN/source code/NNP/code. a/DT/a source/NN/source code/NN/code virus/VBZ/virus looks/NNS/looks for/IN/for source/NN/source code/NN/code and/CC/and modifies/NNS/modifies it/PRP/it to/TO/to include/VB/include the/DT/the virus/NN/virus and/CC/and to/TO/to help/VB/help spread/VBN/spread the/DT/the virus/NN/virus /./. 632/CD/632 chapter/NN/chapter 15/CD/15 figure/NN/figure i/PRP/i 5.5/CD/5.5 a/DT/a boot-sector/NN/boot-sector computer/NN/computer virus/VBZ/virus /./. polymorphic/NNP/polymorphic. a/DT/a polymorphic/JJ/polymorphic virus/NN/virus changes/NNS/changes each/DT/each time/NN/time it/PRP/it is/VBZ/is installed/VBN/installed to/TO/to avoid/VB/avoid detection/NN/detection by/IN/by antivirus/NN/antivirus software/NNP/software. the/DT/the changes/NNS/changes do/VBP/do not/RB/not affect/VB/affect the/DT/the virus/NN/virus 's/POS/'s functionality/NN/functionality but/CC/but rather/RB/rather change/VBP/change the/DT/the virus/NN/virus 's/POS/'s signature/NNP/signature. a/DT/a a/DT/a pattern/NN/pattern that/WDT/that cili'i/-NONE-/cili'i be/VB/be used/VBN/used to/TO/to identify/VB/identify a/DT/a virus/NN/virus /,/, typically/RB/typically a/DT/a series/NN/series make/NN/make up/IN/up the/DT/the virus/NN/virus code/NN/code /./. encrypted/NNP/encrypted. an/DT/an encrypted/JJ/encrypted virus/NN/virus includes/VBZ/includes decryption/NN/decryption code/NN/code along/IN/along with/IN/with the/DT/the encrypted/VBN/encrypted virus/NN/virus /,/, again/RB/again to/TO/to avoid/VB/avoid detection/NNP/detection. the/DT/the virus/NN/virus first/RB/first decrypts/VBZ/decrypts and/CC/and then/RB/then executes/VBZ/executes /./. stealth/NNP/stealth. this/DT/this tricky/NN/tricky virus/VBZ/virus attempts/NNS/attempts to/TO/to avoid/VB/avoid detection/NN/detection by/IN/by modifying/NN/modifying parts/NNS/parts of/IN/of the/DT/the system/NN/system that/IN/that could/MD/could be/VB/be used/VBN/used to/TO/to detect/VB/detect it/NNP/it. for/IN/for example/NN/example /,/, it/PRP/it could/MD/could modify/VB/modify the/DT/the read/NN/read system/NN/system call/NN/call so/RB/so that/IN/that if/IN/if the/DT/the file/NN/file it/PRP/it has/VBZ/has modified/VBN/modified is/VBZ/is read/VBN/read /,/, the/DT/the original/JJ/original form/NN/form of/IN/of the/DT/the code/NN/code is/VBZ/is returned/VBN/returned rather/RB/rather than/IN/than the/DT/the infected/VBN/infected code/NN/code /./. tunneling/NNP/tunneling. this/DT/this virus/NN/virus attempts/VBZ/attempts to/TO/to bypass/NN/bypass detection/NN/detection by/IN/by an/DT/an anti/NN/anti virus/VBZ/virus scanner/NN/scanner by/IN/by installing/NN/installing itself/PRP/itself in/IN/in the/DT/the interrupt-handler/JJ/interrupt-handler chain/NNP/chain. similar/JJ/similar viruses/NNS/viruses install/VBP/install themselves/PRP/themselves in/IN/in device/NN/device drivers/NNS/drivers /./. 15.3/CD/15.3 15.3/CD/15.3 633/CD/633 multipartite/NNP/multipartite. a/DT/a virus/NN/virus of/IN/of this/DT/this type/NN/type is/VBZ/is able/JJ/able to/TO/to infect/VB/infect nmltiple/NN/nmltiple parts/NNS/parts of/IN/of a/DT/a system/NN/system /,/, including/VBG/including boot/NN/boot sectors/NNS/sectors /,/, memory/NN/memory /,/, and/CC/and files/NNP/files. this/DT/this makes/VBZ/makes it/PRP/it difficult/VBD/difficult to/TO/to detect/VB/detect and/CC/and contain/VB/contain /./. armored/NNP/armored. an/DT/an armored/JJ/armored virus/NN/virus is/VBZ/is coded/VBN/coded to/TO/to ncake/VB/ncake it/PRP/it hard/RB/hard for/IN/for antivirus/NNS/antivirus researchers/NNS/researchers to/TO/to unravel/VB/unravel and/CC/and understand/NNP/understand. it/PRP/it can/MD/can also/RB/also be/VB/be compressed/VBN/compressed to/TO/to avoid/VB/avoid detection/NN/detection and/CC/and disinfection/NNP/disinfection. in/IN/in addition/NN/addition /,/, virus/VBZ/virus droppers/NNS/droppers and/CC/and other/JJ/other full/JJ/full files/NNS/files that/WDT/that are/VBP/are part/NN/part of/IN/of a/DT/a virus/NN/virus infestation/NN/infestation are/VBP/are frequently/RB/frequently hidden/VBN/hidden via/IN/via file/JJ/file attributes/NNS/attributes or/CC/or unviewable/JJ/unviewable file/NN/file names/NNS/names /./. this/DT/this vast/NN/vast variety/NN/variety of/IN/of viruses/NNS/viruses is/VBZ/is likely/JJ/likely to/TO/to continue/VB/continue to/TO/to grow/NNP/grow. in/IN/in fact/NN/fact /,/, in/IN/in 2004/CD/2004 a/DT/a new/JJ/new and/CC/and widespread/JJ/widespread virus/NN/virus was/VBD/was detected/NNP/detected. it/PRP/it exploited/VBD/exploited three/CD/three separate/JJ/separate bugs/NNS/bugs for/IN/for its/PRP$/its operation/NNP/operation. this/DT/this virus/NN/virus started/VBD/started by/IN/by infecting/NN/infecting hundreds/NNS/hundreds of/IN/of windows/NNS/windows servers/NNS/servers /VBP/( including/VBG/including many/JJ/many trusted/JJ/trusted sites/NNS/sites /:/) running/VBG/running microsoft/NN/microsoft internet/NN/internet information/NN/information server/NN/server /:/( iis/NNS/iis /VBP/) /./. any/DT/any vulnerable/JJ/vulnerable microsoft/NN/microsoft explorer/NN/explorer web/NN/web browser/NN/browser visiting/VBG/visiting those/DT/those sites/NNS/sites received/VBD/received a/DT/a browser/NN/browser virus/NN/virus with/IN/with any/DT/any download/NNP/download. the/DT/the browser/NN/browser virus/VBZ/virus installed/VBN/installed several/JJ/several back-door/JJ/back-door programs/NNS/programs /,/, including/VBG/including a/DT/a which/WDT/which records/NNS/records all/DT/all things/NNS/things entered/VBN/entered on/IN/on the/DT/the keyboard/NN/keyboard /:/( including/VBG/including and/CC/and credit-card/JJ/credit-card numbers/NNS/numbers /:/) /./. it/PRP/it also/RB/also installed/VBD/installed a/DT/a daemon/NN/daemon to/TO/to allow/VB/allow unlimited/VBN/unlimited remote/NN/remote access/NN/access by/IN/by an/DT/an intruder/NN/intruder and/CC/and another/DT/another that/WDT/that allowed/VBN/allowed an/DT/an intruder/NN/intruder to/TO/to route/VB/route spam/NN/spam through/IN/through the/DT/the infected/VBN/infected desktop/NN/desktop computer/NN/computer /./. generally/RB/generally /,/, viruses/NNS/viruses are/VBP/are the/DT/the most/RBS/most disruptive/JJ/disruptive security/NN/security attacks/NNS/attacks ;/:/; and/CC/and because/IN/because they/PRP/they are/VBP/are effective/JJ/effective /,/, they/PRP/they will/MD/will continue/VB/continue to/TO/to be/VB/be written/VBN/written and/CC/and to/TO/to spread/NNP/spread. the/DT/the active/JJ/active debates/NNS/debates within/IN/within the/DT/the computing/NN/computing community/NN/community is/VBZ/is whether/IN/whether a/DT/a jth'-yhcn/JJ/jth'-yhcn ;/:/; _/NNP/_ in/IN/in which/WDT/which many/JJ/many systems/NNS/systems run/VBP/run the/DT/the same/JJ/same hardware/NN/hardware /,/, operating/NN/operating system/NN/system /,/, and//JJ/and/ or/CC/or application/NN/application software/NN/software /,/, is/VBZ/is increasing/VBG/increasing the/DT/the threat/NN/threat of/IN/of and/CC/and damage/NN/damage caused/VBD/caused by/IN/by security/NN/security intrusions/NNP/intrusions. this/DT/this monoculture/NN/monoculture supposedly/RB/supposedly consists/VBZ/consists of/IN/of microsoft/NN/microsoft products/NNS/products /,/, and/CC/and part/NN/part of/IN/of the/DT/the debate/NN/debate concerns/NNS/concerns whether/IN/whether such/JJ/such a/DT/a monoculture/NN/monoculture even/RB/even exists/VBZ/exists today/NN/today /./. program/NN/program threats/NNS/threats typically/RB/typically use/VB/use a/DT/a breakdown/NN/breakdown in/IN/in the/DT/the protection/NN/protection mechanisms/NNS/mechanisms of/IN/of a/DT/a system/NN/system to/TO/to attack/VB/attack programs/NNP/programs. in/IN/in contrast/NN/contrast /,/, system/NN/system and/CC/and network/NN/network threats/NNS/threats involve/VBP/involve the/DT/the abuse/NN/abuse of/IN/of services/NNS/services and/CC/and network/NN/network comcections/NNP/comcections. system/NN/system and/CC/and network/NN/network threats/NNS/threats create/VBP/create a/DT/a situation/NN/situation in/IN/in which/WDT/which operating-system/-NONE-/operating-system resources/VBZ/resources and/CC/and user/NN/user files/NNS/files are/VBP/are inisused/VBN/inisused /./. sometimes/RB/sometimes a/DT/a system/NN/system and/CC/and network/NN/network attack/NN/attack is/VBZ/is used/VBN/used to/TO/to launch/VB/launch a/DT/a program/NN/program attack/NN/attack /,/, and/CC/and vice/NN/vice versa/NN/versa /./. the/DT/the more/RBR/more an/DT/an operating/NN/operating system/NN/system is-the/NN/is-the more/RBR/more services/NNS/services it/PRP/it has/VBZ/has enabled/VBN/enabled and/CC/and the/DT/the more/RBR/more functions/NNS/functions it/PRP/it allows-the/NNP/allows-the more/RBR/more likely/JJ/likely it/PRP/it is/VBZ/is that/IN/that a/DT/a is/VBZ/is available/JJ/available to/TO/to exploit/NNP/exploit. increasingly/RB/increasingly /,/, operating/VBG/operating systems/NNS/systems strive/JJ/strive to/TO/to be/VB/be for/IN/for example/NN/example /,/, solaris/VBZ/solaris 10/CD/10 moved/VBN/moved from/IN/from a/DT/a model/NN/model in/IN/in which/WDT/which many/JJ/many services/NNS/services /:/( ftp/NN/ftp /,/, telnet/NN/telnet /,/, and/CC/and others/NNS/others /:/) were/VBD/were enabled/VBN/enabled by/IN/by default/NN/default when/WRB/when the/DT/the system/NN/system was/VBD/was installed/VBN/installed to/TO/to a/DT/a model/NN/model in/IN/in which/WDT/which almost/RB/almost all/DT/all services/NNS/services are/VBP/are disabled/VBN/disabled at/IN/at installation/NN/installation time/NN/time and/CC/and must/MD/must specifically/RB/specifically be/VB/be enabled/VBN/enabled system/NN/system administrators/NNP/administrators. such/JJ/such changes/NNS/changes reduce/VBP/reduce the/DT/the system/NN/system 's/POS/'s set/NN/set of/IN/of ways/NNS/ways in/IN/in which/WDT/which an/DT/an attacker/NN/attacker can/MD/can to/TO/to break/VB/break into/IN/into the/DT/the system/NN/system /./. in/IN/in the/DT/the remainder/NN/remainder of/IN/of this/DT/this section/NN/section /,/, we/PRP/we discuss/VBP/discuss some/DT/some examples/NNS/examples of/IN/of system/NN/system and/CC/and network/NN/network threats/NNS/threats /,/, including/VBG/including worms/NNS/worms /,/, port/NN/port scamcing/VBG/scamcing /,/, and/CC/and denial-of-service/JJ/denial-of-service attacks/NNP/attacks. it/PRP/it is/VBZ/is important/JJ/important to/TO/to note/VB/note that/IN/that masquerading/VBG/masquerading and/CC/and replay/NN/replay attacks/NNS/attacks are/VBP/are also/RB/also 634/CD/634 chapter/NN/chapter 15/CD/15 commonly/RB/commonly launched/VBN/launched over/IN/over netvvorks/NNS/netvvorks between/IN/between systems/NNP/systems. in/IN/in fact/NN/fact /,/, these/DT/these attacks/NNS/attacks are/VBP/are more/RBR/more effective/JJ/effective and/CC/and harder/NN/harder to/TO/to counter/VB/counter when/WRB/when multiple/JJ/multiple systems/NNS/systems are/VBP/are involved/VBN/involved /./. for/IN/for example/NN/example /,/, within/IN/within a/DT/a computer/NN/computer /,/, the/DT/the operating/NN/operating system/NN/system usually/RB/usually can/MD/can determine/VB/determine the/DT/the sender/NN/sender and/CC/and receiver/NN/receiver of/IN/of a/DT/a message/NNP/message. even/RB/even if/IN/if the/DT/the sender/NN/sender changes/NNS/changes to/TO/to the/DT/the id/NN/id of/IN/of someone/NN/someone else/RB/else /,/, there/EX/there may/MD/may be/VB/be a/DT/a record/NN/record of/IN/of that/DT/that id/JJ/id change/NNP/change. when/WRB/when multiple/JJ/multiple systems/NNS/systems are/VBP/are involved/VBN/involved /,/, especially/RB/especially systems/VBZ/systems controlled/VBN/controlled by/IN/by attackers/NNS/attackers /,/, then/RB/then such/JJ/such tracing/NN/tracing is/VBZ/is much/JJ/much more/RBR/more difficult/JJ/difficult /./. in/IN/in general/JJ/general /,/, we/PRP/we can/MD/can say/VB/say that/IN/that sharing/VBG/sharing secrets/NNS/secrets /:/( to/TO/to prove/VB/prove identity/NN/identity and/CC/and as/IN/as keys/NNS/keys to/TO/to encryption/NN/encryption /:/) is/VBZ/is required/VBN/required for/IN/for authentication/NN/authentication and/CC/and encryption/NN/encryption /,/, and/CC/and sharing/VBG/sharing secrets/NNS/secrets is/VBZ/is easier/JJR/easier in/IN/in environments/NNS/environments /:/( such/JJ/such as/IN/as a/DT/a single/JJ/single operating/NN/operating system/NN/system /:/) in/IN/in which/WDT/which secure/NN/secure sharing/VBG/sharing methods/NNS/methods exist/NNP/exist. these/DT/these methods/NNS/methods include/VBP/include shared/VBN/shared memory/NN/memory and/CC/and interprocess/NN/interprocess comnmnications/NNP/comnmnications. creating/NN/creating secure/NN/secure communication/NN/communication and/CC/and authentication/NN/authentication is/VBZ/is discussed/VBN/discussed in/IN/in sections/NNS/sections 15.4/CD/15.4 and/CC/and 15.5/CD/15.5 /./. 15.3.1/CD/15.3.1 worms/NNS/worms a/DT/a is/VBZ/is a/DT/a process/NN/process that/WDT/that uses/VBZ/uses the/DT/the mechanism/NN/mechanism to/TO/to ravage/NN/ravage system/NN/system performance/NNP/performance. the/DT/the worm/NN/worm spawns/VBZ/spawns copies/NNS/copies of/IN/of itself/PRP/itself /,/, using/VBG/using up/RP/up system/NN/system resources/NNS/resources and/CC/and perhaps/RB/perhaps locking/VBG/locking out/RP/out all/DT/all other/JJ/other processes/NNP/processes. on/IN/on computer/NN/computer networks/NNS/networks /,/, worms/NNS/worms are/VBP/are particularly/RB/particularly potent/JJ/potent /,/, since/IN/since they/PRP/they may/MD/may reproduce/VB/reproduce themselves/PRP/themselves among/IN/among systems/NNS/systems and/CC/and thus/RB/thus shut/VBN/shut down/IN/down an/DT/an entire/JJ/entire network/NNP/network. such/JJ/such an/DT/an event/NN/event occurred/VBD/occurred in/IN/in 1988/CD/1988 to/TO/to unix/CD/unix systems/NNS/systems on/IN/on the/DT/the internet/NN/internet /,/, causing/VBG/causing the/DT/the loss/NN/loss of/IN/of system/NN/system and/CC/and system-administrator/NN/system-administrator time/NN/time worth/NN/worth millions/NNS/millions of/IN/of dollars/NNS/dollars /./. at/IN/at the/DT/the close/NN/close of/IN/of the/DT/the workday/NN/workday on/IN/on november/NN/november 2/CD/2 /,/, 1988/CD/1988 /,/, robert/NN/robert tappan/NN/tappan morris/VBZ/morris /,/, jr/NNP/jr. /,/, a/DT/a first-year/JJ/first-year cornell/NN/cornell graduate/NN/graduate student/NN/student /,/, unleashed/VBD/unleashed a/DT/a worm/NN/worm program/NN/program on/IN/on one/CD/one or/CC/or more/JJR/more hosts/NNS/hosts corm.ected/JJ/corm.ected to/TO/to the/DT/the internet/NNP/internet. targeting/NN/targeting sun/NN/sun microsystems/NNS/microsystems '/POS/' sun/NN/sun 3/CD/3 workstations/NNS/workstations and/CC/and vax/NN/vax computers/NNS/computers running/VBG/running variants/NNS/variants of/IN/of version/NN/version 4/CD/4 bsd/NN/bsd unix/NN/unix /,/, the/DT/the worm/NN/worm quickly/RB/quickly spread/JJ/spread over/IN/over great/JJ/great distances/NNS/distances ;/:/; within/IN/within a/DT/a few/JJ/few hours/NNS/hours of/IN/of its/PRP$/its release/NN/release /,/, it/PRP/it had/VBD/had consumed/VBN/consumed system/NN/system resources/NNS/resources to/TO/to the/DT/the point/NN/point of/IN/of bringing/VBG/bringing down/IN/down the/DT/the infected/VBN/infected machines/NNS/machines /./. although/IN/although robert/NN/robert morris/NNS/morris designed/VBN/designed the/DT/the self-replicating/JJ/self-replicating program/NN/program for/IN/for rapid/JJ/rapid reproduction/NN/reproduction and/CC/and distribution/NN/distribution /,/, some/DT/some of/IN/of the/DT/the features/NNS/features of/IN/of the/DT/the unix/NN/unix networking/VBG/networking environment/NN/environment provided/VBN/provided the/DT/the means/NNS/means to/TO/to propagate/VB/propagate the/DT/the worm/NN/worm throughout/IN/throughout the/DT/the system/NN/system /./. it/PRP/it is/VBZ/is likely/JJ/likely that/IN/that morris/NNS/morris chose/VBP/chose for/IN/for in.itial/JJ/in.itial infection/NN/infection an/DT/an internet/NN/internet host/NN/host left/VBD/left open/JJ/open for/IN/for and/CC/and accessible/JJ/accessible to/TO/to outside/VB/outside users/NNP/users. from/IN/from there/EX/there /,/, the/DT/the worm/NN/worm program/NN/program exploited/VBD/exploited flaws/NNS/flaws in/IN/in the/DT/the unix/NN/unix operating/NN/operating system/NN/system 's/POS/'s security/NN/security routines/NNS/routines and/CC/and took/VBD/took advantage/NN/advantage of/IN/of unix/NN/unix utilities/NNS/utilities that/WDT/that simplify/NN/simplify resource/NN/resource sharing/VBG/sharing in/IN/in local-area/NNP/local-area networks/NNS/networks to/TO/to gain/VB/gain unauthorized/VBN/unauthorized access/NN/access to/TO/to thousands/NNS/thousands of/IN/of other/JJ/other connected/VBN/connected sites/NNP/sites. morris/NN/morris 's/POS/'s methods/NNS/methods of/IN/of attack/NN/attack are/VBP/are outlined/VBN/outlined next/JJ/next /./. the/DT/the worm/NN/worm was/VBD/was made/VBN/made up/RP/up of/IN/of two/CD/two programs/NNS/programs /,/, a/DT/a /NN/( also/RB/also called/VBN/called a/DT/a or/CC/or program/NN/program and/CC/and the/DT/the main/JJ/main program/NNP/program. ll.c/NNP/ll.c /,/, the/DT/the grappling/NN/grappling hook/NN/hook consisted/VBD/consisted of/IN/of 99/CD/99 lines/NNS/lines of/IN/of c/NN/c code/NN/code compiled/VBD/compiled and/CC/and run/VBN/run on/IN/on each/DT/each machine/NN/machine it/PRP/it accessed/NNP/accessed. once/RB/once established/VBD/established on/IN/on the/DT/the computer/NN/computer system/NN/system under/IN/under attack/NN/attack /,/, the/DT/the grappling/NN/grappling hook/NN/hook connected/VBD/connected to/TO/to the/DT/the machine/NN/machine where/WRB/where it/PRP/it originated/VBD/originated and/CC/and uploaded/VBN/uploaded a/DT/a copy/NN/copy of/IN/of the/DT/the main/JJ/main worm/NN/worm onto/IN/onto the/DT/the hooked/VBN/hooked system/NN/system /:/( figure/NN/figure 15.6/CD/15.6 /CD/) /./. the/DT/the main/JJ/main program/NN/program proceeded/VBD/proceeded to/TO/to search/NN/search for/IN/for other/JJ/other machines/NNS/machines to/TO/to which/WDT/which the/DT/the newly/RB/newly infected/VBN/infected system/NN/system could/MD/could connect/VB/connect easily/NNP/easily. in/IN/in these/DT/these actions/NNS/actions /,/, morris/NNS/morris exploited/VBD/exploited the/DT/the unix/NN/unix networking/VBG/networking utility/NN/utility rsh/NN/rsh for/IN/for easy/JJ/easy remote/NN/remote task/NN/task execution/NNP/execution. by/IN/by setting/NN/setting up/IN/up special/JJ/special files/NNS/files that/WDT/that list/NN/list host-login/-NONE-/host-login name/NN/name pairs/NNS/pairs /,/, users/NNS/users can/MD/can omit/VB/omit entering/VBG/entering a/DT/a password/NN/password each/DT/each time/NN/time they/PRP/they access/VBP/access a/DT/a remote/NN/remote account/NN/account on/IN/on the/DT/the paired/VBN/paired list/NNP/list. the/DT/the worm/NN/worm searched/VBD/searched these/DT/these special/JJ/special files/NNS/files for/IN/for site/JJ/site names/NNS/names 15.3/CD/15.3 635/CD/635 rsh/JJ/rsh attack/NN/attack finger/NN/finger attack/NN/attack sendmail/NN/sendmail attack/NN/attack worm/NN/worm sent/NN/sent target/NN/target system/NN/system infected/VBD/infected system/NN/system figure/NN/figure 15.6/CD/15.6 the/DT/the morris/NNS/morris internet/VBP/internet worm/NN/worm /./. that/IN/that would/MD/would allow/VB/allow remote/VB/remote execution/NN/execution without/IN/without a/DT/a password/NNP/password. where/WRB/where remote/NN/remote shells/NNS/shells were/VBD/were established/VBN/established /,/, the/DT/the worm/NN/worm program/NN/program was/VBD/was uploaded/VBN/uploaded and/CC/and began/VBD/began executing/VBG/executing anew/NN/anew /./. the/DT/the attack/NN/attack via/IN/via remote/NN/remote access/NN/access was/VBD/was one/CD/one of/IN/of three/CD/three infection/NN/infection methods/NNS/methods built/VBN/built into/IN/into the/DT/the worm/NNP/worm. the/DT/the other/JJ/other two/CD/two methods/NNS/methods involved/VBN/involved operating-system/JJ/operating-system bugs/NNS/bugs in/IN/in the/DT/the unix/NN/unix finger/NN/finger and/CC/and sendmail/NN/sendmail programs/NNS/programs /./. the/DT/the finger/NN/finger utility/NN/utility functions/NNS/functions as/IN/as an/DT/an electronic/JJ/electronic telephone/NN/telephone directory/NN/directory ;/:/; the/DT/the command/NN/command finger/NN/finger user-name/NN/user-name hostname/NN/hostname returns/NNS/returns a/DT/a person/NN/person 's/POS/'s real/JJ/real and/CC/and login/NN/login names/NNS/names along/IN/along with/IN/with other/JJ/other information/NN/information that/IN/that the/DT/the user/NN/user may/MD/may have/VB/have provided/VBN/provided /,/, such/JJ/such as/IN/as office/NN/office and/CC/and home/NN/home address/NN/address and/CC/and telephone/NN/telephone number/NN/number /,/, research/NN/research plan/NN/plan /,/, or/CC/or clever/RB/clever quotation/NNP/quotation. finger/NN/finger runs/VBZ/runs as/RB/as a/DT/a background/NN/background process/NN/process /:/( or/CC/or daemon/VB/daemon /CD/) at/IN/at each/DT/each bsd/NN/bsd site/NN/site and/CC/and responds/NNS/responds to/TO/to queries/NNS/queries throughout/IN/throughout the/DT/the internet/NNP/internet. the/DT/the worm/NN/worm executed/VBD/executed a/DT/a buffer-overflow/JJ/buffer-overflow attack/NN/attack on/IN/on finger/NNP/finger. the/DT/the program/NN/program queried/VBD/queried finger/JJR/finger with/IN/with a/DT/a 536-byte/JJ/536-byte string/NN/string crafted/VBD/crafted to/TO/to exceed/VB/exceed the/DT/the buffer/NN/buffer allocated/VBD/allocated for/IN/for input/NN/input and/CC/and to/TO/to overwrite/VB/overwrite the/DT/the stack/NN/stack frame/NNP/frame. instead/RB/instead of/IN/of returning/VBG/returning to/TO/to the/DT/the main/JJ/main routine/NN/routine where/WRB/where it/PRP/it resided/VBD/resided before/IN/before morris/NNS/morris 's/POS/'s calt/NN/calt the/DT/the finger/NN/finger daemon/NN/daemon was/VBD/was routed/VBN/routed to/TO/to a/DT/a procedure/NN/procedure within/IN/within the/DT/the invading/NN/invading 536-byte/JJ/536-byte string/NN/string now/RB/now residing/VBG/residing on/IN/on the/DT/the stack/NN/stack the/DT/the new/JJ/new procedure/NN/procedure executed/VBN/executed /bin//-NONE-//bin/ sh/JJ/sh /,/, which/WDT/which /,/, if/IN/if successful/JJ/successful /,/, gave/VBD/gave the/DT/the worm/NN/worm a/DT/a remote/NN/remote shell/NN/shell on/IN/on the/DT/the machine/NN/machine under/IN/under attack/NN/attack /./. the/DT/the bug/NN/bug exploited/VBD/exploited in/IN/in sendmail/NN/sendmail also/RB/also involved/VBD/involved using/VBG/using a/DT/a daemon/NN/daemon process/NN/process for/IN/for malicious/JJ/malicious entry/NNP/entry. sendmail/NN/sendmail sends/NNS/sends /,/, receives/NNS/receives /,/, and/CC/and routes/VBZ/routes electronic/JJ/electronic mail/NN/mail /./. debugging/VBG/debugging code/NN/code in/IN/in the/DT/the utility/NN/utility permits/VBZ/permits testers/NNS/testers to/TO/to verify/VB/verify and/CC/and display/VB/display the/DT/the state/NN/state of/IN/of the/DT/the ncail/NN/ncail system/NNP/system. the/DT/the debugging/NN/debugging option/NN/option was/VBD/was useful/JJ/useful to/TO/to system/NN/system administrators/NNS/administrators and/CC/and was/VBD/was often/RB/often left/VBN/left on/NNP/on. morris/NN/morris included/VBD/included in/IN/in his/PRP$/his attack/NN/attack arsenal/JJ/arsenal a/DT/a call/NN/call to/TO/to debug/VB/debug that/IN/that -instead/JJ/-instead of/IN/of specifying/NN/specifying a/DT/a user/NN/user address/NN/address /,/, as/IN/as would/MD/would be/VB/be normal/JJ/normal in/IN/in testing-issued/JJ/testing-issued a/DT/a set/NN/set of/IN/of cornmands/NNS/cornmands that/WDT/that mailed/VBN/mailed and/CC/and executed/VBN/executed a/DT/a copy/NN/copy of/IN/of the/DT/the grappling-hook/JJ/grappling-hook program/NN/program /./. once/RB/once in/IN/in place/NN/place /,/, the/DT/the main/JJ/main worm/NN/worm systematically/RB/systematically attempted/VBN/attempted to/TO/to discover/RB/discover user/JJR/user passwords/NNP/passwords. it/PRP/it began/VBD/began by/IN/by trying/NN/trying simple/NN/simple cases/NNS/cases of/IN/of no/DT/no password/NN/password or/CC/or passwords/NNS/passwords constructed/VBN/constructed of/IN/of account-user-name/JJ/account-user-name combinations/NNS/combinations /,/, then/RB/then used/VBN/used comparisons/NNS/comparisons with/IN/with an/DT/an internal/JJ/internal dictionary/NN/dictionary of/IN/of 432/CD/432 favorite/JJ/favorite password/NN/password choices/NNS/choices /,/, and/CC/and then/RB/then went/VBD/went to/TO/to the/DT/the 636/CD/636 chapter/NN/chapter 15/CD/15 final/JJ/final stage/NN/stage of/IN/of trying/VBG/trying each/DT/each word/NN/word in/IN/in the/DT/the standard/JJ/standard unix/NN/unix on-line/NN/on-line dictionary/NN/dictionary as/IN/as a/DT/a possible/JJ/possible password/NNP/password. this/DT/this elaborate/NN/elaborate and/CC/and efficient/NN/efficient three-stage/NN/three-stage password-cracking/NN/password-cracking algorithm/NN/algorithm enabled/VBD/enabled the/DT/the worm/NN/worm to/TO/to gain/VB/gain access/NN/access to/TO/to other/JJ/other user/NN/user accounts/NNS/accounts on/IN/on the/DT/the infected/VBN/infected system/NNP/system. the/DT/the wontt/NN/wontt then/RB/then searched/VBD/searched for/IN/for rsh/JJ/rsh data/NNS/data files/NNS/files in/IN/in these/DT/these newly/RB/newly broken/VBN/broken accounts/NNS/accounts and/CC/and used/VBD/used them/PRP/them as/IN/as described/VBN/described previously/RB/previously to/TO/to gain/VB/gain access/NN/access to/TO/to user/NN/user accounts/NNS/accounts on/IN/on remote/NN/remote systems/NNS/systems /./. with/IN/with each/DT/each new/JJ/new access/NN/access /,/, the/DT/the worm/NN/worm program/NN/program searched/VBD/searched for/IN/for already/RB/already active/JJ/active copies/NNS/copies of/IN/of itself/NNP/itself. if/IN/if it/PRP/it found/VBD/found one/CD/one /,/, the/DT/the new/JJ/new copy/NN/copy exited/VBN/exited /,/, except/IN/except in/IN/in every/DT/every seventh/NN/seventh instance/NNP/instance. had/VBD/had the/DT/the worm/NN/worm exited/VBD/exited on/IN/on all/DT/all duplicate/NN/duplicate sightings/NNS/sightings /,/, it/PRP/it might/MD/might have/VB/have remained/VBN/remained undetected/NNP/undetected. allowing/NN/allowing every/DT/every seventh/NN/seventh duplicate/NN/duplicate to/TO/to proceed/VB/proceed /:/( possibly/RB/possibly to/TO/to confound/VB/confound efforts/NNS/efforts to/TO/to stop/VB/stop its/PRP$/its spread/NN/spread baiting/VBG/baiting with/IN/with fake/NN/fake worms/NNS/worms /:/) created/VBN/created a/DT/a wholesale/JJ/wholesale infestation/NN/infestation of/IN/of sun/NN/sun and/CC/and vax/NN/vax systems/NNS/systems on/IN/on the/DT/the internet/NN/internet /./. the/DT/the very/JJ/very features/NNS/features of/IN/of the/DT/the unix/NN/unix network/NN/network environment/NN/environment that/WDT/that assisted/VBN/assisted il/NN/il l/NN/l the/DT/the worm/NN/worm 's/POS/'s propagation/NN/propagation also/RB/also helped/VBD/helped to/TO/to stop/VB/stop its/PRP$/its advance/NNP/advance. ease/NN/ease of/IN/of electronic/JJ/electronic communication/NN/communication /,/, mechanisms/NNS/mechanisms to/TO/to copy/VB/copy source/NN/source and/CC/and binary/JJ/binary files/NNS/files to/TO/to remote/VB/remote machines/NNS/machines /,/, and/CC/and access/NN/access to/TO/to both/DT/both source/NN/source code/NN/code and/CC/and human/NN/human expertise/NN/expertise allowed/VBD/allowed cooperative/JJ/cooperative efforts/NNS/efforts to/TO/to develop/VB/develop solutions/NNS/solutions quickly/NNP/quickly. by/IN/by the/DT/the evening/NN/evening of/IN/of the/DT/the next/JJ/next day/NN/day /,/, november/NN/november 3/LS/3 /,/, methods/NNS/methods of/IN/of halting/VBG/halting the/DT/the invading/VBG/invading program/NN/program were/VBD/were circulated/VBN/circulated to/TO/to system/NN/system administrators/NNS/administrators via/IN/via the/DT/the internet/NNP/internet. within/IN/within days/NNS/days /,/, specific/JJ/specific software/NN/software patches/NNS/patches for/IN/for the/DT/the exploited/VBN/exploited security/NN/security flaws/NNS/flaws were/VBD/were available/JJ/available /./. why/WRB/why did/VBD/did morris/NNS/morris unleash/NN/unleash the/DT/the worm/NN/worm the/DT/the action/NN/action has/VBZ/has been/VBN/been characterized/VBN/characterized as/IN/as both/DT/both a/DT/a harmless/NN/harmless prank/NN/prank gone/NN/gone awry/NN/awry and/CC/and a/DT/a serious/JJ/serious criminal/NN/criminal offense/NNP/offense. based/VBN/based on/IN/on the/DT/the complexity/NN/complexity of/IN/of the/DT/the attack/NN/attack /,/, it/PRP/it is/VBZ/is unlikely/RB/unlikely that/IN/that the/DT/the worm/NN/worm 's/POS/'s release/NN/release or/CC/or the/DT/the scope/NN/scope of/IN/of its/PRP$/its spread/NN/spread was/VBD/was unintentional/NNP/unintentional. the/DT/the worm/NN/worm program/NN/program took/VBD/took elaborate/JJ/elaborate steps/NNS/steps to/TO/to cover/VB/cover its/PRP$/its tracks/NNS/tracks and/CC/and to/TO/to repel/VB/repel efforts/NNS/efforts to/TO/to stop/VB/stop its/PRP$/its spread/NNP/spread. yet/RB/yet the/DT/the program/NN/program contained/VBD/contained no/DT/no code/NN/code aimed/VBN/aimed at/IN/at damaging/JJ/damaging or/CC/or destroying/VBG/destroying the/DT/the systems/NNS/systems on/IN/on which/WDT/which it/PRP/it ran/NNP/ran. the/DT/the author/NN/author clearly/RB/clearly had/VBD/had the/DT/the expertise/NN/expertise to/TO/to include/VB/include such/JJ/such commands/NNS/commands ;/:/; in/IN/in fact/NN/fact /,/, data/NNS/data structures/NNS/structures were/VBD/were present/JJ/present in/IN/in the/DT/the bootstrap/NN/bootstrap code/NN/code that/WDT/that could/MD/could have/VB/have been/VBN/been used/VBN/used to/TO/to transfer/VB/transfer trojan-horse/JJ/trojan-horse or/CC/or virus/VBZ/virus programs/NNP/programs. the/DT/the behavior/NN/behavior of/IN/of the/DT/the program/NN/program may/MD/may lead/VB/lead to/TO/to interesting/JJ/interesting observations/NNS/observations /,/, but/CC/but it/PRP/it does/VBZ/does not/RB/not provide/VB/provide a/DT/a sound/NN/sound basis/NN/basis for/IN/for inferring/NN/inferring motive/NNP/motive. what/WP/what is/VBZ/is not/RB/not open/JJ/open to/TO/to speculation/NN/speculation /,/, however/RB/however /,/, is/VBZ/is the/DT/the legal/JJ/legal outcome/NN/outcome /:/: a/DT/a federal/JJ/federal court/NN/court convicted/VBD/convicted morris/NNS/morris and/CC/and handed/VBD/handed down/RP/down a/DT/a sentence/NN/sentence of/IN/of three/CD/three years/NNS/years '/POS/' probation/NN/probation /,/, 400/CD/400 hours/NNS/hours of/IN/of community/NN/community service/NN/service ;/:/; and/CC/and a/DT/a $/$/$ 10,000/CD/10,000 fine/NNP/fine. morris/NN/morris 's/POS/'s legal/JJ/legal costs/NNS/costs probably/RB/probably exceeded/VBD/exceeded $/$/$ 100,000/CD/100,000 /./. security/NN/security experts/NNS/experts continue/VBP/continue to/TO/to evaluate/VB/evaluate methods/NNS/methods to/TO/to decrease/VB/decrease or/CC/or eliminate/VB/eliminate worms/NNP/worms. a/DT/a more/JJR/more recent/JJ/recent event/NN/event ;/:/; though/IN/though /,/, shows/VBZ/shows that/IN/that worms/NNS/worms are/VBP/are still/RB/still a/DT/a fact/NN/fact of/IN/of life/NN/life on/IN/on the/DT/the internet/NNP/internet. it/PRP/it also/RB/also shows/VBZ/shows that/IN/that as/IN/as the/DT/the internet/NN/internet grows/VBZ/grows /,/, the/DT/the damage/NN/damage that/IN/that even/RB/even harmless/JJR/harmless worms/NNS/worms can/MD/can do/VB/do also/RB/also grows/VBZ/grows and/CC/and can/MD/can be/VB/be significant/NNP/significant. this/DT/this example/NN/example occurred/VBD/occurred during/IN/during august/JJ/august 2003/CD/2003. the/DT/the fifth/JJ/fifth version/NN/version of/IN/of the/DT/the sobig/JJ/sobig worm/NN/worm /,/, more/RBR/more properly/RB/properly known/VBN/known as/IN/as w32.sobig.f/JJ/w32.sobig.f @/NN/@ mm/NN/mm /,/, was/VBD/was released/VBN/released by/IN/by persons/NNS/persons at/IN/at this/DT/this time/NN/time unknown/NNP/unknown. it/PRP/it was/VBD/was the/DT/the fastest-spreading/JJ/fastest-spreading worm/NN/worm released/VBN/released to/TO/to date/NN/date /,/, at/IN/at its/PRP$/its peak/NN/peak mfecting/VBG/mfecting hundreds/NNS/hundreds of/IN/of thousands/NNS/thousands of/IN/of computers/NNS/computers and/CC/and one/CD/one in/IN/in seventeen/CD/seventeen e-mail/JJ/e-mail messages/NNS/messages on/IN/on the/DT/the internet/NNP/internet. it/PRP/it clogged/VBD/clogged e-mail/JJ/e-mail inboxes/NNS/inboxes /,/, slowed/VBD/slowed networks/NNS/networks /,/, and/CC/and took/VBD/took a/DT/a huge/JJ/huge number/NN/number of/IN/of hours/NNS/hours to/TO/to clean/VB/clean up/RP/up /./. sobig.f/JJ/sobig.f was/VBD/was launched/VBN/launched by/IN/by being/VBG/being uploaded/VBN/uploaded to/TO/to a/DT/a pornography/NN/pornography newsgroup/NN/newsgroup via/IN/via an/DT/an account/NN/account created/VBN/created with/IN/with a/DT/a stolen/NN/stolen credit/NN/credit card/NNP/card. it/PRP/it was/VBD/was disguised/VBN/disguised as/IN/as a/DT/a photo/NNP/photo. the/DT/the virus/NN/virus targeted/VBD/targeted microsoft/NN/microsoft windows/NNS/windows systems/NNS/systems and/CC/and used/VBD/used its/PRP$/its own/JJ/own smtp/NN/smtp engine/NN/engine to/TO/to e-mail/JJ/e-mail itself/PRP/itself to/TO/to all/DT/all the/DT/the addresses/NNS/addresses found/VBD/found on/IN/on an/DT/an infected/JJ/infected system/NNP/system. it/PRP/it used/VBD/used a/DT/a variety/NN/variety of/IN/of subject/JJ/subject lines/NNS/lines to/TO/to help/VB/help avoid/JJ/avoid detection/NN/detection /,/, including/VBG/including thank/NN/thank you/PRP/you !/./! your/PRP$/your details,'/NN/details,' '/''/' and/CC/and re/VB/re /:/: approved/NNP/approved. it/PRP/it also/RB/also used/VBD/used a/DT/a random/NN/random address/NN/address on/IN/on the/DT/the host/NN/host as/IN/as the/DT/the from/IN/from /:/: 15.3/CD/15.3 637/CD/637 address/NN/address /,/, making/VBG/making it/PRP/it difficult/VBD/difficult to/TO/to determine/VB/determine from/IN/from the/DT/the message/NN/message which/WDT/which machine/NN/machine was/VBD/was the/DT/the infected/VBN/infected source/NNP/source. sobig.f/NNP/sobig.f included/VBD/included an/DT/an attachment/NN/attachment for/IN/for the/DT/the target/NN/target e-mail/NN/e-mail reader/NN/reader to/TO/to click/VB/click on/IN/on /,/, again/RB/again with/IN/with a/DT/a variety/NN/variety of/IN/of names/NNP/names. if/IN/if this/DT/this payload/NN/payload was/VBD/was executed/VBN/executed /,/, it/PRP/it stored/VBD/stored a/DT/a program/NN/program called/VBN/called winppr32.exe/JJ/winppr32.exe in/IN/in the/DT/the default/NN/default windows/VBZ/windows directory/NN/directory /,/, along/IN/along with/IN/with a/DT/a text/NN/text file/NNP/file. it/PRP/it also/RB/also modified/VBD/modified the/DT/the windows/NNS/windows registry/NN/registry /./. the/DT/the code/NN/code included/VBD/included in/IN/in the/DT/the attachment/NN/attachment was/VBD/was also/RB/also programmed/VBN/programmed to/TO/to periodically/RB/periodically attempt/VB/attempt to/TO/to connect/VB/connect to/TO/to one/CD/one of/IN/of twenty/NN/twenty servers/NNS/servers and/CC/and download/VB/download and/CC/and execute/VB/execute a/DT/a program/NN/program from/IN/from them/NNP/them. fortunately/RB/fortunately /,/, the/DT/the servers/NNS/servers were/VBD/were disabled/VBN/disabled before/IN/before the/DT/the code/NN/code could/MD/could be/VB/be downloaded/NNP/downloaded. the/DT/the content/NN/content of/IN/of the/DT/the program/NN/program from/IN/from these/DT/these servers/NNS/servers has/VBZ/has not/RB/not yet/RB/yet been/VBN/been determined/NNP/determined. if/IN/if the/DT/the code/NN/code was/VBD/was malevolent/JJ/malevolent /,/, untold/JJ/untold damage/NN/damage to/TO/to a/DT/a vast/JJ/vast number/NN/number of/IN/of machines/NNS/machines could/MD/could have/VB/have resulted/VBN/resulted /./. 15.3.2/CD/15.3.2 port/NN/port scanning/VBG/scanning port/NN/port scanning/VBG/scanning is/VBZ/is not/RB/not an/DT/an attack/NN/attack but/CC/but rather/RB/rather a/DT/a means/NNS/means for/IN/for a/DT/a cracker/NN/cracker to/TO/to detect/VB/detect a/DT/a system/NN/system 's/POS/'s vulnerabilities/NNS/vulnerabilities to/TO/to attack/NNP/attack. port/NN/port scanning/VBG/scanning typically/RB/typically is/VBZ/is automated/VBN/automated /,/, involving/VBG/involving a/DT/a tool/NN/tool that/WDT/that attempts/VBZ/attempts to/TO/to create/VB/create a/DT/a tcp/NN/tcp lip/NN/lip connection/NN/connection to/TO/to a/DT/a specific/JJ/specific port/NN/port or/CC/or a/DT/a range/NN/range of/IN/of ports/NNP/ports. for/IN/for example/NN/example /,/, suppose/NN/suppose there/EX/there is/VBZ/is a/DT/a known/VBN/known vulnerability/NN/vulnerability /:/( or/CC/or bug/NN/bug /:/) in/IN/in sendmail/NNP/sendmail. a/DT/a cracker/NN/cracker could/MD/could launch/VB/launch a/DT/a port/NN/port scanner/NN/scanner to/TO/to try/VB/try to/TO/to connect/VB/connect /,/, say/VB/say /,/, to/TO/to port/VB/port 25/CD/25 of/IN/of a/DT/a particular/JJ/particular system/NN/system or/CC/or to/TO/to a/DT/a range/NN/range of/IN/of systems/NNP/systems. if/IN/if the/DT/the connection/NN/connection was/VBD/was successful/JJ/successful /,/, the/DT/the cracker/NN/cracker /:/( or/CC/or tool/NN/tool /:/) could/MD/could attempt/VB/attempt to/TO/to communicate/VB/communicate with/IN/with the/DT/the answering/VBG/answering service/NN/service to/TO/to determine/VB/determine if/IN/if the/DT/the service/NN/service was/VBD/was indeed/VBN/indeed sendmail/NN/sendmail and/CC/and /,/, if/IN/if so/RB/so /,/, if/IN/if it/PRP/it was/VBD/was the/DT/the version/NN/version with/IN/with the/DT/the bug/NN/bug /./. now/RB/now imagine/NN/imagine a/DT/a tool/NN/tool in/IN/in which/WDT/which each/DT/each bug/NN/bug of/IN/of every/DT/every service/NN/service of/IN/of every/DT/every operath/NN/operath g/NN/g system/NN/system was/VBD/was encoded/NNP/encoded. the/DT/the tool/NN/tool could/MD/could attempt/VB/attempt to/TO/to connect/VB/connect to/TO/to every/DT/every port/NN/port of/IN/of one/CD/one or/CC/or nwre/NN/nwre systems/NNP/systems. for/IN/for every/DT/every service/NN/service that/IN/that answered/VBN/answered /,/, it/PRP/it could/MD/could try/VB/try to/TO/to use/VB/use each/DT/each known/VBN/known bug/NNP/bug. frequently/RB/frequently /,/, the/DT/the bugs/NNS/bugs are/VBP/are buffer/RB/buffer overflows/VBZ/overflows /,/, allowing/VBG/allowing the/DT/the creation/NN/creation of/IN/of a/DT/a privileged/JJ/privileged command/NN/command shell/NN/shell on/IN/on the/DT/the system/NNP/system. from/IN/from there/EX/there /,/, of/IN/of course/NN/course /,/, the/DT/the cracker/NN/cracker could/MD/could install/VB/install trojan/JJ/trojan horses/NNS/horses /,/, back-door/JJ/back-door programs/NNS/programs /,/, and/CC/and so/RB/so on/IN/on /./. there/EX/there is/VBZ/is no/DT/no such/JJ/such tool/NN/tool /,/, but/CC/but there/EX/there are/VBP/are tools/NNS/tools that/IN/that perform/NN/perform subsets/NNS/subsets of/IN/of that/DT/that functionality/NNP/functionality. for/IN/for example/NN/example /,/, nmap/NN/nmap /:/( from/IN/from http/NN/http /:/: //:// /www.insecure.org/mrtap//JJ//www.insecure.org/mrtap/ /NN/) is/VBZ/is a/DT/a very/RB/very versatile/JJ/versatile open-source/NN/open-source utility/NN/utility for/IN/for network/NN/network exploration/NN/exploration and/CC/and security/NN/security auditing/NNP/auditing. when/WRB/when pointed/VBD/pointed at/IN/at a/DT/a target/NN/target /,/, it/PRP/it will/MD/will determine/VB/determine what/WP/what services/NNS/services are/VBP/are n.1n..tling/JJ/n.1n..tling /,/, including/VBG/including application/NN/application names/NNS/names and/CC/and versions/NNP/versions. it/PRP/it can/MD/can identify/VB/identify the/DT/the host/NN/host operating/NN/operating system/NNP/system. it/PRP/it can/MD/can also/RB/also provide/VB/provide information/NN/information about/IN/about defenses/NNS/defenses /,/, such/JJ/such as/IN/as what/WP/what firewalls/NNS/firewalls are/VBP/are defending/VBG/defending the/DT/the target/NNP/target. it/PRP/it does/VBZ/does not/RB/not exploit/VB/exploit any/DT/any known/NN/known bugs/NNS/bugs /./. nessus/NN/nessus /:/( from/IN/from http/NN/http /:/: //:// /www.nessus.org//JJ//www.nessus.org/ /NN/) performs/NNS/performs a/DT/a similar/JJ/similar function/NN/function /,/, but/CC/but it/PRP/it has/VBZ/has a/DT/a database/NN/database of/IN/of bugs/NNS/bugs and/CC/and their/PRP$/their exploits/NNP/exploits. it/PRP/it can/MD/can scan/VB/scan a/DT/a range/NN/range of/IN/of systems/NNS/systems /,/, determine/NN/determine the/DT/the services/NNS/services running/VBG/running on/IN/on those/DT/those systems/NNS/systems /,/, and/CC/and attempt/NN/attempt to/TO/to attack/VB/attack all/DT/all appropriate/JJ/appropriate bugs/NNP/bugs. it/PRP/it generates/VBZ/generates reports/NNS/reports about/IN/about the/DT/the results/NNP/results. it/PRP/it does/VBZ/does not/RB/not perform/VB/perform the/DT/the final/JJ/final step/NN/step of/IN/of exploiting/VBG/exploiting the/DT/the found/NN/found bugs/NNS/bugs /,/, but/CC/but a/DT/a knowledgeable/JJ/knowledgeable cracker/NN/cracker or/CC/or a/DT/a script/NN/script kiddie/NN/kiddie could/MD/could /./. because/IN/because port/NN/port scans/NNS/scans are/VBP/are detectable/JJ/detectable /NN/( section/NN/section 15.6.3/CD/15.6.3 /CD/) /,/, they/PRP/they frequently/RB/frequently are/VBP/are launched/VBN/launched from/IN/from such/JJ/such systems/NNS/systems are/VBP/are previously/RB/previously compromised/VBN/compromised /,/, independent/JJ/independent systems/NNS/systems that/WDT/that are/VBP/are serving/VBG/serving their/PRP$/their owners/NNS/owners while/IN/while being/VBG/being used/VBN/used for/IN/for nefarious/JJ/nefarious purposes/NNS/purposes /,/, including/VBG/including denial-of-service/NN/denial-of-service attacks/NNS/attacks and/CC/and spam/NN/spam relay/NNP/relay. zombies/NNS/zombies make/VBP/make crackers/NNS/crackers particularly/RB/particularly difficult/JJ/difficult to/TO/to prosecute/VB/prosecute because/IN/because determining/VBG/determining the/DT/the source/NN/source of/IN/of the/DT/the attack/NN/attack and/CC/and the/DT/the person/NN/person that/IN/that launched/JJ/launched it/PRP/it is/VBZ/is challenging/NNP/challenging. this/DT/this is/VBZ/is one/CD/one of/IN/of many/JJ/many reasons/NNS/reasons for/IN/for securing/VBG/securing inconsequential/JJ/inconsequential systems/NNS/systems /,/, not/RB/not just/RB/just systems/VBZ/systems containing/VBG/containing valuable/JJ/valuable information/NN/information or/CC/or services/NNS/services /./. 638/CD/638 chapter/NN/chapter 15/CD/15 15.3.3/CD/15.3.3 denial/JJ/denial of/IN/of service/NN/service as/IN/as mentioned/VBN/mentioned earlier/JJR/earlier /,/, denial-of-service/JJ/denial-of-service attacks/NNS/attacks are/VBP/are aimed/VBN/aimed not/RB/not at/IN/at gaming/VBG/gaming information/NN/information or/CC/or stealing/VBG/stealing resources/NNS/resources but/CC/but rather/RB/rather at/IN/at disrupting/VBG/disrupting legitimate/NN/legitimate use/NN/use of/IN/of a/DT/a system/NN/system or/CC/or facility/NNP/facility. most/RBS/most such/JJ/such attacks/NNS/attacks involve/VBP/involve systems/NNS/systems that/IN/that the/DT/the attacker/NN/attacker has/VBZ/has not/RB/not penetrated/NNP/penetrated. indeed/RB/indeed /,/, launching/VBG/launching an/DT/an attack/NN/attack that/IN/that prevents/NNS/prevents legitimate/VBP/legitimate use/NN/use is/VBZ/is frequently/RB/frequently easier/JJR/easier than/IN/than breaking/VBG/breaking into/IN/into a/DT/a machine/NN/machine or/CC/or facility/NN/facility /./. denial-of-service/NN/denial-of-service attacks/NNS/attacks are/VBP/are generally/RB/generally network/NN/network based/NNP/based. they/PRP/they fall/VBP/fall into/IN/into two/CD/two categories/NNP/categories. attacks/NNS/attacks in/IN/in the/DT/the first/JJ/first category/NN/category use/NN/use so/RB/so many/JJ/many facility/NN/facility resources/NNS/resources that/WDT/that /,/, in/IN/in essence/NN/essence /,/, no/DT/no useful/JJ/useful work/NN/work can/MD/can be/VB/be done/NNP/done. for/IN/for example/NN/example /,/, a/DT/a web-site/JJ/web-site click/NN/click could/MD/could download/VB/download a/DT/a java/NN/java applet/NN/applet that/WDT/that proceeds/VBZ/proceeds to/TO/to use/VB/use all/DT/all available/JJ/available cpu/NN/cpu time/NN/time or/CC/or to/TO/to pop/VB/pop up/RP/up windows/NNS/windows infinitely/NNP/infinitely. the/DT/the second/JJ/second category/NN/category involves/VBZ/involves disrupting/VBG/disrupting the/DT/the network/NN/network of/IN/of the/DT/the facility/NNP/facility. there/RB/there have/VBP/have been/VBN/been several/JJ/several successful/JJ/successful denial-of-service/NN/denial-of-service attacks/NNS/attacks of/IN/of this/DT/this kind/NN/kind against/IN/against major/JJ/major web/NN/web sites/NNP/sites. these/DT/these attacks/NNS/attacks result/VBP/result from/IN/from abuse/NN/abuse of/IN/of some/DT/some of/IN/of the/DT/the fundamental/JJ/fundamental functionality/NN/functionality of/IN/of tcp/NN/tcp lip/NNP/lip. for/IN/for instance/NN/instance /,/, if/IN/if the/DT/the attacker/NN/attacker sends/NNS/sends the/DT/the part/NN/part of/IN/of the/DT/the protocol/NN/protocol that/IN/that says/VBZ/says i/PRP/i want/VBP/want to/TO/to start/VB/start a/DT/a tcp/NN/tcp connection/NN/connection /,/, but/CC/but never/RB/never follows/VBZ/follows with/IN/with the/DT/the standard/JJ/standard the/DT/the connection/NN/connection is/VBZ/is now/RB/now complete/JJ/complete /,/, the/DT/the result/NN/result can/MD/can be/VB/be partially/RB/partially started/VBN/started tcp/NN/tcp sessions/NNP/sessions. if/IN/if enough/JJ/enough of/IN/of these/DT/these sessions/NNS/sessions are/VBP/are launched/VBN/launched /,/, they/PRP/they can/MD/can eat/VB/eat up/RP/up all/DT/all the/DT/the network/NN/network resources/NNS/resources of/IN/of the/DT/the system/NN/system /,/, disabling/VBG/disabling any/DT/any further/JJ/further legitimate/NN/legitimate tcp/NN/tcp connections/NNP/connections. such/JJ/such attacks/NNS/attacks /,/, which/WDT/which can/MD/can last/VB/last hours/NNS/hours or/CC/or days/NNS/days /,/, have/VBP/have caused/VBN/caused partial/JJ/partial or/CC/or full/JJ/full failure/NN/failure of/IN/of attempts/NNS/attempts to/TO/to use/VB/use the/DT/the target/NN/target facility/NNP/facility. the/DT/the attacks/NNS/attacks are/VBP/are usually/RB/usually stopped/VBN/stopped at/IN/at the/DT/the network/NN/network level/NN/level until/IN/until the/DT/the operating/NN/operating systems/NNS/systems can/MD/can be/VB/be updated/VBN/updated to/TO/to reduce/VB/reduce their/PRP$/their vulnerability/NN/vulnerability /./. generally/RB/generally /,/, it/PRP/it is/VBZ/is impossible/JJ/impossible to/TO/to prevent/VB/prevent denial-of-service/JJ/denial-of-service attacks/NNP/attacks. the/DT/the attacks/NNS/attacks use/VBP/use the/DT/the same/JJ/same mechanisms/NNS/mechanisms as/IN/as normal/JJ/normal even/RB/even more/RBR/more difficult/JJ/difficult to/TO/to prevent/VB/prevent and/CC/and resolve/VB/resolve are/VBP/are these/DT/these attacks/NNS/attacks are/VBP/are launched/VBN/launched from/IN/from multiple/JJ/multiple sites/NNS/sites at/IN/at once/RB/once /,/, toward/IN/toward a/DT/a common/JJ/common target/NN/target /,/, typically/RB/typically by/IN/by zombies/NNP/zombies. ddos/NNS/ddos attacks/NNS/attacks have/VBP/have become/VBN/become more/RBR/more comncon/JJ/comncon and/CC/and are/VBP/are sometimes/RB/sometimes associated/VBN/associated with/IN/with blackmail/NN/blackmail attempts/NNP/attempts. a/DT/a site/JJ/site comes/NNS/comes under/IN/under attack/NN/attack /,/, and/CC/and the/DT/the attackers/NNS/attackers offer/VBP/offer to/TO/to halt/VB/halt the/DT/the attack/NN/attack in/IN/in exchange/NN/exchange for/IN/for money/NN/money /./. sometimes/RB/sometimes a/DT/a site/JJ/site does/VBZ/does not/RB/not even/RB/even know/VB/know it/PRP/it is/VBZ/is under/IN/under attack/NNP/attack. it/PRP/it can/MD/can be/VB/be difficult/JJ/difficult to/TO/to determine/VB/determine whether/IN/whether a/DT/a system/NN/system slowdown/NN/slowdown is/VBZ/is an/DT/an attack/NN/attack or/CC/or just/RB/just a/DT/a surge/NN/surge in/IN/in system/NN/system use/NNP/use. consider/NN/consider that/WDT/that a/DT/a successful/JJ/successful advertising/NN/advertising campaign/NN/campaign that/WDT/that greatly/RB/greatly increases/VBZ/increases traffic/JJ/traffic to/TO/to a/DT/a site/JJ/site could/MD/could be/VB/be considered/VBN/considered a/DT/a ddos/NN/ddos /./. there/EX/there are/VBP/are other/JJ/other interesting/JJ/interesting aspects/NNS/aspects of/IN/of dos/NNS/dos attacks/NNP/attacks. for/IN/for example/NN/example /,/, if/IN/if an/DT/an authentication/NN/authentication algorithm/NN/algorithm locks/NNS/locks an/DT/an account/NN/account for/IN/for a/DT/a period/NN/period of/IN/of time/NN/time after/IN/after several/JJ/several incorrect/NN/incorrect attempts/VBZ/attempts to/TO/to access/NN/access the/DT/the account/NN/account /,/, then/RB/then an/DT/an attacker/NN/attacker could/MD/could cause/VB/cause all/DT/all authentication/NN/authentication to/TO/to be/VB/be blocked/VBN/blocked by/IN/by purposely/RB/purposely making/VBG/making incorrect/NN/incorrect attempts/NNS/attempts to/TO/to access/NN/access all/DT/all accounts/NNP/accounts. similarly/RB/similarly /,/, a/DT/a firewall/NN/firewall that/WDT/that automatically/RB/automatically blocks/VBZ/blocks certain/JJ/certain kinds/NNS/kinds of/IN/of traffic/JJ/traffic could/MD/could be/VB/be induced/VBN/induced to/TO/to block/VB/block that/IN/that traffic/JJ/traffic when/WRB/when it/PRP/it should/MD/should not/NNP/not. these/DT/these examples/NNS/examples suggest/VBP/suggest that/IN/that programmers/NNS/programmers and/CC/and systems/NNS/systems managers/NNS/managers need/VBP/need to/TO/to fully/RB/fully understand/VB/understand the/DT/the algorithms/NNS/algorithms and/CC/and technologies/NNS/technologies they/PRP/they are/VBP/are deploying/NNP/deploying. finally/RB/finally /,/, computer/NN/computer science/NN/science classes/NNS/classes are/VBP/are notorious/JJ/notorious sources/NNS/sources of/IN/of accidental/JJ/accidental system/NN/system dos/NNS/dos attacks/NNP/attacks. consider/NN/consider the/DT/the first/JJ/first programming/NN/programming exercises/NNS/exercises in/IN/in which/WDT/which students/NNS/students learn/VBP/learn to/TO/to create/VB/create subprocesses/NNS/subprocesses or/CC/or threads/NNP/threads. a/DT/a common/JJ/common bug/NN/bug involves/VBZ/involves spawning/VBG/spawning subprocesses/NNS/subprocesses infinitely/NNP/infinitely. the/DT/the system/NN/system 's/POS/'s free/JJ/free memory/NN/memory and/CC/and cpu/NN/cpu resources/NNS/resources do/VBP/do n't/RB/n't stand/VB/stand a/DT/a chance/NN/chance /./. there/EX/there are/VBP/are many/JJ/many defenses/NNS/defenses against/IN/against computer/NN/computer attacks/NNS/attacks /,/, running/VBG/running the/DT/the gamut/NN/gamut from/IN/from methodology/NN/methodology to/TO/to technology/NNP/technology. the/DT/the broadest/JJS/broadest tool/NN/tool available/JJ/available to/TO/to system/NN/system designers/NNS/designers 15.4/CD/15.4 639/CD/639 and/CC/and users/NNS/users is/VBZ/is cryptography/NNP/cryptography. in/IN/in this/DT/this section/NN/section /,/, we/PRP/we discuss/VBP/discuss the/DT/the details/NNS/details of/IN/of cryptography/NN/cryptography and/CC/and its/PRP$/its use/NN/use in/IN/in computer/NN/computer security/NN/security /./. in/IN/in an/DT/an isolated/JJ/isolated computer/NN/computer /,/, the/DT/the operating/NN/operating system/NN/system can/MD/can reliably/RB/reliably determine/VB/determine the/DT/the sender/NN/sender and/CC/and recipient/JJ/recipient of/IN/of ali/NN/ali interprocess/NN/interprocess communication/NN/communication /,/, since/IN/since it/PRP/it controls/VBZ/controls all/DT/all communication/NN/communication channels/NNS/channels in/IN/in the/DT/the computer/NNP/computer. in/IN/in a/DT/a network/NN/network of/IN/of computers/NNS/computers /,/, the/DT/the situation/NN/situation is/VBZ/is quite/RB/quite different/NNP/different. a/DT/a networked/JJ/networked computer/NN/computer receives/NNS/receives bits/NNS/bits from/IN/from the/DT/the wire/NN/wire with/IN/with no/DT/no immediate/JJ/immediate and/CC/and reliable/JJ/reliable way/NN/way of/IN/of determining/VBG/determining what/WP/what machine/NN/machine or/CC/or application/NN/application sent/NN/sent those/DT/those bits/NNP/bits. similarly/RB/similarly /,/, the/DT/the computer/NN/computer sends/NNS/sends bits/NNS/bits onto/IN/onto the/DT/the network/NN/network with/IN/with no/DT/no of/IN/of knowing/VBG/knowing who/WP/who might/MD/might eventually/RB/eventually receive/VB/receive them/PRP/them /./. commonly/RB/commonly /,/, network/NN/network addresses/NNS/addresses are/VBP/are used/VBN/used to/TO/to infer/VB/infer the/DT/the potential/JJ/potential senders/NNS/senders and/CC/and receivers/NNS/receivers of/IN/of network/NN/network messages/NNP/messages. network/NN/network packets/NNS/packets arrive/VBP/arrive with/IN/with a/DT/a source/NN/source address/NN/address /,/, such/JJ/such as/IN/as an/DT/an ip/NN/ip address/NNP/address. and/CC/and when/WRB/when a/DT/a computer/NN/computer sends/NNS/sends a/DT/a message/NN/message /,/, it/PRP/it names/VBZ/names the/DT/the intended/VBN/intended receiver/NN/receiver by/IN/by specifying/NN/specifying a/DT/a destination/NN/destination address/NNP/address. however/RB/however /,/, for/IN/for applications/NNS/applications where/WRB/where security/NN/security matters/NNS/matters /,/, we/PRP/we are/VBP/are asking/VBG/asking for/IN/for trouble/NN/trouble if/IN/if we/PRP/we assume/VBP/assume that/IN/that the/DT/the source/NN/source or/CC/or destination/NN/destination address/NN/address of/IN/of a/DT/a packet/NN/packet reliably/RB/reliably determines/VBZ/determines who/WP/who sent/NN/sent or/CC/or received/VBD/received that/IN/that packet/NNP/packet. a/DT/a rogue/NN/rogue computer/NN/computer can/MD/can send/VB/send a/DT/a message/NN/message with/IN/with a/DT/a falsified/JJ/falsified source/NN/source address/NN/address /,/, and/CC/and numerous/JJ/numerous computers/NNS/computers other/JJ/other than/IN/than the/DT/the /NNP/.. one/CD/one specified/VBN/specified by/IN/by the/DT/the destination/NN/destination address/NN/address can/MD/can /VB/( and/CC/and typically/RB/typically do/VBP/do /:/) receive/JJ/receive a/DT/a packet/NNP/packet. for/IN/for example/NN/example /,/, all/DT/all of/IN/of the/DT/the routers/NNS/routers on/IN/on the/DT/the way/NN/way to/TO/to the/DT/the destination/NN/destination will/MD/will receive/VB/receive the/DT/the packet/NN/packet /,/, too/NNP/too. how/WRB/how /,/, then/RB/then /,/, is/VBZ/is an/DT/an operating/NN/operating system/NN/system to/TO/to decide/VB/decide whether/IN/whether to/TO/to grant/JJ/grant a/DT/a request/NN/request when/WRB/when it/PRP/it can/MD/can not/RB/not trust/VB/trust the/DT/the named/VBN/named source/NN/source of/IN/of the/DT/the request/NN/request and/CC/and how/WRB/how is/VBZ/is it/PRP/it supposed/VBD/supposed to/TO/to provide/VB/provide protection/NN/protection for/IN/for a/DT/a request/NN/request or/CC/or data/NNS/data when/WRB/when it/PRP/it can/MD/can not/RB/not determine/VB/determine who/WP/who will/MD/will receive/VB/receive the/DT/the response/NN/response or/CC/or message/NN/message contents/NNS/contents it/PRP/it sends/VBZ/sends over/IN/over the/DT/the network/NN/network it/PRP/it is/VBZ/is generally/RB/generally considered/VBN/considered infeasible/JJ/infeasible to/TO/to build/VB/build a/DT/a network/NN/network of/IN/of any/DT/any scale/NN/scale in/IN/in which/WDT/which the/DT/the source/NN/source and/CC/and destination/NN/destination addresses/NNS/addresses of/IN/of packets/NNS/packets can/MD/can be/VB/be trusted/VBN/trusted in/IN/in this/DT/this sense/NNP/sense. therefore/NN/therefore /,/, the/DT/the only/JJ/only alternative/NN/alternative is/VBZ/is somehow/WRB/somehow to/TO/to eliminate/VB/eliminate the/DT/the need/NN/need to/TO/to trust/VB/trust the/DT/the network/NNP/network. this/DT/this is/VBZ/is the/DT/the job/NN/job of/IN/of cryptography/NNP/cryptography. abstractly/RB/abstractly /,/, ~/:/~ '/''/' '/''/' ~/:/~ .,-ro.rnron/JJ/.,-ro.rnron ~/NN/~ used/VBN/used to/TO/to constrain/VB/constrain the/DT/the potential/JJ/potential senders/NNS/senders and//-NONE-/and/ or/CC/or receivers/NNS/receivers of/IN/of a/DT/a message/NN/message /./. cryptography/NN/cryptography is/VBZ/is based/VBN/based on/IN/on secrets/NNS/secrets called/VBN/called that/IN/that are/VBP/are selectively/RB/selectively distributed/VBN/distributed to/TO/to computers/NNS/computers in/IN/in a/DT/a network/NN/network and/CC/and used/VBD/used to/TO/to process/NN/process messages/NNP/messages. cryptography/NN/cryptography enables/VBZ/enables a/DT/a recipient/JJ/recipient of/IN/of a/DT/a message/NN/message to/TO/to verify/VB/verify that/IN/that the/DT/the message/NN/message was/VBD/was created/VBN/created by/IN/by some/DT/some computer/NN/computer possessing/VBG/possessing a/DT/a certain/JJ/certain key-the/NN/key-the key/NN/key is/VBZ/is the/DT/the source/NN/source of/IN/of the/DT/the message/NNP/message. similarly/RB/similarly /:/: a/DT/a sender/NN/sender can/MD/can encode/VB/encode its/PRP$/its message/NN/message so/IN/so that/IN/that only/RB/only a/DT/a computer/NN/computer with/IN/with a/DT/a certain/JJ/certain key/JJ/key can/MD/can decode/VB/decode the/DT/the message/NN/message /,/, so/RB/so that/IN/that the/DT/the key/JJ/key becomes/NNS/becomes the/DT/the destination/NNP/destination. unlike/IN/unlike network/NN/network addresses/NNS/addresses /,/, however/RB/however /,/, keys/NNS/keys are/VBP/are designed/VBN/designed so/RB/so that/IN/that it/PRP/it is/VBZ/is not/RB/not computationally/RB/computationally feasible/JJ/feasible to/TO/to derive/JJ/derive them/PRP/them from/IN/from the/DT/the messages/NNS/messages they/PRP/they were/VBD/were used/VBN/used to/TO/to generate/VB/generate or/CC/or from/IN/from any/DT/any other/JJ/other public/JJ/public information/NNP/information. thus/RB/thus /,/, they/PRP/they provide/VBP/provide a/DT/a much/RB/much more/RBR/more trustworthy/JJ/trustworthy means/NNS/means of/IN/of constraining/VBG/constraining senders/NNS/senders and/CC/and receivers/NNS/receivers of/IN/of messages/NNP/messages. note/NN/note that/IN/that cryptography/NN/cryptography is/VBZ/is a/DT/a field/NN/field of/IN/of study/NN/study unto/IN/unto itself/PRP/itself /,/, with/IN/with large/JJ/large and/CC/and small/JJ/small complexities/NNS/complexities and/CC/and subtleties/NNS/subtleties /./. here/RB/here /,/, we/PRP/we explore/VBP/explore the/DT/the most/RBS/most important/JJ/important aspects/NNS/aspects of/IN/of the/DT/the parts/NNS/parts of/IN/of cryptography/NN/cryptography that/IN/that pertain/NN/pertain to/TO/to operating/NN/operating systems/NNS/systems /./. 15.4.1/CD/15.4.1 encryption/NN/encryption because/IN/because it/PRP/it solves/VBZ/solves a/DT/a wide/JJ/wide variety/NN/variety of/IN/of communication/NN/communication security/NN/security problems/NNS/problems /,/, is/VBZ/is used/VBN/used frequently/RB/frequently in/IN/in many/JJ/many aspects/NNS/aspects of/IN/of modern/JJ/modern computing/NNP/computing. encryption/NN/encryption a/DT/a means/VBZ/means for/IN/for constraining/NN/constraining the/DT/the possible/JJ/possible receivers/NNS/receivers of/IN/of a/DT/a message/NNP/message. an/DT/an encryption/NN/encryption algorithm/NN/algorithm enables/VBZ/enables the/DT/the sender/NN/sender of/IN/of a/DT/a message/NN/message to/TO/to ensure/VB/ensure that/IN/that only/RB/only a/DT/a computer/NN/computer possessing/VBG/possessing a/DT/a certain/JJ/certain key/JJ/key can/MD/can read/VB/read the/DT/the message/NNP/message. encryption/NN/encryption of/IN/of messages/NNS/messages is/VBZ/is an/DT/an ancient/JJ/ancient practice/NN/practice /,/, of/IN/of course/NN/course /,/, and/CC/and there/EX/there have/VBP/have been/VBN/been many/JJ/many encryption/NN/encryption algorithms/NNS/algorithms /,/, 640/CD/640 chapter/NN/chapter 15/CD/15 dating/VBG/dating back/RB/back to/TO/to ancient/VB/ancient times/NNP/times. in/IN/in this/DT/this section/NN/section /,/, we/PRP/we describe/VBP/describe important/JJ/important modern/NN/modern encryption/NN/encryption principles/NNS/principles and/CC/and algorithms/NNS/algorithms /./. figure/NN/figure 15.7/CD/15.7 shows/NNS/shows an/DT/an example/NN/example of/IN/of two/CD/two users/NNS/users communicating/VBG/communicating securely/RB/securely over/IN/over an/DT/an insecure/NN/insecure channel/NNP/channel. we/PRP/we refer/VBP/refer to/TO/to this/DT/this figure/NN/figure throughout/IN/throughout the/DT/the section/NNP/section. note/NN/note that/IN/that the/DT/the key/JJ/key exchange/NN/exchange can/MD/can take/VB/take place/NN/place directly/RB/directly between/IN/between the/DT/the two/CD/two parties/NNS/parties or/CC/or via/IN/via a/DT/a trusted/VBN/trusted third/JJ/third party/NN/party /:/( that/IN/that is/VBZ/is /,/, a/DT/a certificate/NN/certificate authority/NN/authority /:/) /,/, as/IN/as discussed/VBN/discussed in/IN/in section/NN/section 15.4.1.4/CD/15.4.1.4 /./. an/DT/an encryption/NN/encryption algorithm/NN/algorithm consists/NNS/consists of/IN/of the/DT/the following/JJ/following components/NNS/components /:/: a/DT/a set/NN/set k/NN/k of/IN/of keys/NNS/keys /./. a/DT/a set/NN/set m/NN/m of/IN/of messages/NNS/messages /./. a/DT/a set/NN/set c/NN/c of/IN/of ciphertexts/NNS/ciphertexts /./. a/DT/a function/NN/function e/NN/e /:/: k/NN/k /:/-- +/CD/+ /CD/( m/NN/m /:/-- +/CD/+ c/NN/c /:/) /./. thatis/NNS/thatis /,/, for/IN/for each/DT/each k/NN/k e/NN/e k/NN/k /,/, e/NN/e /:/( k/NN/k /:/) is/VBZ/is a/DT/a function/NN/function for/IN/for generating/NN/generating ciphertexts/NNS/ciphertexts from/IN/from messages/NNP/messages. both/DT/both e/NN/e and/CC/and e/NN/e /:/( lc/NN/lc /:/) for/IN/for any/DT/any k/NN/k should/MD/should be/VB/be efficiently/RB/efficiently computable/JJ/computable functions/NNS/functions /./. a/DT/a function/NN/function d/NN/d /:/: i/PRP/i /:/-- +/:/+ /:/( c/NN/c /:/-- +/CD/+ m/NN/m /:/) /./. thatis/NNS/thatis /,/, for/IN/for eachlc/NN/eachlc e/NN/e i/PRP/i /,/, d/VBD/d /:/( k/NN/k /:/) is/VBZ/is a/DT/a function/NN/function for/IN/for generating/NN/generating messages/NNS/messages from/IN/from ciphertexts/NNP/ciphertexts. both/DT/both d/NN/d and/CC/and d/VBD/d /CD/( lc/NN/lc /:/) for/IN/for any/DT/any k/NN/k should/MD/should be/VB/be efficiently/RB/efficiently computable/JJ/computable functions/NNS/functions /./. an/DT/an encryption/NN/encryption algorithm/NN/algorithm must/MD/must provide/VB/provide this/DT/this essential/JJ/essential property/NN/property /:/: given/VBN/given a/DT/a ciphertext/JJ/ciphertext c/NN/c e/NN/e c/NN/c a/DT/a computer/NN/computer can/MD/can compute/VB/compute m/NN/m such/JJ/such that/IN/that e/NN/e /:/( lc/NN/lc /:/) /:/( m/NN/m /:/) =/:/= c/NN/c only/RB/only if/IN/if it/PRP/it possesses/VBZ/possesses write/JJ/write ----1/-NONE-/----1 rnessage/NN/rnessage rn/NN/rn 1/CD/1 i/PRP/i ii/VBP/ii 12/CD/12 /./. 0/-NONE-/0 ~/:/~ /:/- z/NN/z ~/:/~ -x/JJ/-x ~/NN/~ /:/- read/NN/read 1/CD/1 message/NN/message ml/NN/ml figure/NN/figure i5.7/-NONE-/i5.7 a/DT/a secure/NN/secure communication/NN/communication over/IN/over an/DT/an insecure/NN/insecure medium/NN/medium /./. 15.4/CD/15.4 641/CD/641 d/NN/d /:/( lc/NN/lc /:/) /./. thus/RB/thus /,/, a/DT/a computer/NN/computer holding/VBG/holding d/NN/d /:/( lc/NN/lc /:/) can/MD/can decrypt/VB/decrypt ciphertexts/NNS/ciphertexts to/TO/to the/DT/the plaintexts/NNS/plaintexts used/VBN/used to/TO/to produce/VB/produce them/PRP/them /,/, but/CC/but a/DT/a computer/NN/computer not/RB/not holding/VBG/holding d/NN/d /:/( lc/NN/lc /:/) can/MD/can not/RB/not decrypt/VB/decrypt ciphertexts/NNS/ciphertexts /./. since/IN/since ciphertexts/NNS/ciphertexts are/VBP/are generally/RB/generally exposed/VBN/exposed /-NONE-/( for/IN/for example/NN/example /,/, sent/NN/sent on/IN/on a/DT/a network/NN/network /:/) /,/, it/PRP/it is/VBZ/is important/JJ/important that/IN/that it/PRP/it be/VB/be infeasible/JJ/infeasible to/TO/to derive/JJ/derive d/NN/d /:/( lc/NN/lc /:/) from/IN/from the/DT/the ciphertexts/NNS/ciphertexts /./. there/RB/there are/VBP/are two/CD/two main/JJ/main types/NNS/types of/IN/of encryption/NN/encryption algorithms/NNS/algorithms /:/: symmetric/JJ/symmetric and/CC/and asymmetric/NNP/asymmetric. we/PRP/we discuss/VBZ/discuss both/DT/both types/NNS/types in/IN/in the/DT/the following/JJ/following sections/NNS/sections /./. 15.4.1.1/CD/15.4.1.1 symmetric/JJ/symmetric encryption/NN/encryption in/IN/in a/DT/a the/DT/the same/JJ/same key/NN/key is/VBZ/is used/VBN/used to/TO/to encrypt/VB/encrypt and/CC/and to/TO/to decrypt/NNP/decrypt. that/IN/that is/VBZ/is /,/, e/NN/e can/MD/can be/VB/be from/IN/from d/JJ/d /NN/( lc/NN/lc /:/) /,/, and/CC/and vice/NN/vice versa/NNP/versa. therefore/RB/therefore /,/, the/DT/the secrecy/NN/secrecy of/IN/of e/NN/e /:/( lc/NN/lc /:/) must/MD/must be/VB/be protected/VBN/protected to/TO/to the/DT/the same/JJ/same extent/NN/extent as/IN/as that/DT/that of/IN/of d/NN/d /:/( lc/NN/lc /:/) /./. for/IN/for the/DT/the past/JJ/past several/JJ/several decades/NNS/decades /,/, the/DT/the most/RBS/most commonly/RB/commonly used/JJ/used symmetric/JJ/symmetric encryption/NN/encryption algorithm/NN/algorithm in/IN/in the/DT/the united/VBN/united states/NNS/states for/IN/for civilian/JJ/civilian applications/NNS/applications has/VBZ/has been/VBN/been the/DT/the adopted/VBN/adopted by/IN/by the/DT/the national/JJ/national institute/NN/institute of/IN/of stantechxwlogy/NN/stantechxwlogy /:/( nist/NN/nist /:/) /./. des/NNS/des works/NNS/works by/IN/by taking/VBG/taking a/DT/a 64-bit/JJ/64-bit value/NN/value and/CC/and a/DT/a 56-bit/JJ/56-bit key/JJ/key and/CC/and performing/VBG/performing a/DT/a series/NN/series of/IN/of transformations/NNP/transformations. these/DT/these transformations/NNS/transformations are/VBP/are based/VBN/based on/IN/on substitution/NN/substitution and/CC/and permutation/NN/permutation operations/NNS/operations /,/, as/IN/as is/VBZ/is generally/RB/generally the/DT/the case/NN/case for/IN/for symmetric/JJ/symmetric encryption/NN/encryption transformations/NNP/transformations. some/DT/some of/IN/of the/DT/the transformations/NNS/transformations are/VBP/are in/IN/in that/DT/that their/PRP$/their algorithms/NNS/algorithms are/VBP/are hidden/NNP/hidden. in/IN/in fact/NN/fact /,/, these/DT/these so-called/JJ/so-called s-boxes/NNS/s-boxes are/VBP/are classified/VBN/classified by/IN/by the/DT/the united/VBN/united states/NNS/states government/NNP/government. messages/NNS/messages longer/JJR/longer than/IN/than 64/CD/64 bits/NNS/bits are/VBP/are broken/VBN/broken into/IN/into 64-bit/JJ/64-bit chunks/NNP/chunks. because/IN/because des/NNS/des works/NNS/works on/IN/on a/DT/a chunk/NN/chunk of/IN/of bits/NNS/bits at/IN/at a/DT/a time/NN/time /,/, is/VBZ/is known/VBN/known as/IN/as a/DT/a cipher/NNP/cipher. if/IN/if the/DT/the same/JJ/same key/NN/key is/VBZ/is used/VBN/used for/IN/for encrypting/NN/encrypting an/DT/an extended/JJ/extended anwunt/NN/anwunt of/IN/of data/NNS/data /,/, it/PRP/it becomes/VBZ/becomes vulnerable/JJ/vulnerable to/TO/to attack/VB/attack /./. consider/NN/consider /,/, for/IN/for example/NN/example /,/, that/IN/that the/DT/the same/JJ/same source/NN/source block/NN/block would/MD/would result/VB/result in/IN/in the/DT/the same/JJ/same ciphertext/NN/ciphertext if/IN/if the/DT/the same/JJ/same key/NN/key and/CC/and encryption/NN/encryption algorithm/NN/algorithm were/VBD/were used/NNP/used. therefore/RB/therefore /,/, the/DT/the chunks/NNS/chunks are/VBP/are not/RB/not just/RB/just encrypted/VBN/encrypted but/CC/but also/RB/also exclusive-or'ed/JJ/exclusive-or'ed /NN/( xored/VBD/xored /CD/) with/IN/with the/DT/the ciphertext/JJ/ciphertext block/NN/block before/IN/before encryption/NNP/encryption. this/DT/this is/VBZ/is known/VBN/known as/IN/as des/NNS/des is/VBZ/is now/RB/now considered/VBN/considered insecure/NN/insecure for/IN/for many/JJ/many applications/NNS/applications because/IN/because its/PRP$/its keys/NNS/keys can/MD/can be/VB/be exhaustively/RB/exhaustively searched/VBN/searched with/IN/with moderate/JJ/moderate computing/VBG/computing resources/NNP/resources. rather/RB/rather than/IN/than giving/VBG/giving up/RP/up on/IN/on des/NNS/des /,/, though/IN/though /,/, nist/NN/nist created/VBD/created a/DT/a modification/NN/modification called/VBN/called in/IN/in which/WDT/which the/DT/the des/VBZ/des algorithm/NN/algorithm is/VBZ/is repeated/VBN/repeated three/CD/three times/NNS/times /:/( two/CD/two encryptions/NNS/encryptions and/CC/and one/CD/one decryption/NN/decryption /:/) on/IN/on the/DT/the same/JJ/same plaintext/NN/plaintext usli'lg/JJ/usli'lg two/CD/two or/CC/or three/CD/three keys-for/JJ/keys-for example/NN/example /,/, c/NN/c =/:/= e/NN/e /:/( k3/NNP/k3 /:/) /:/( d/NN/d /:/( lc2/NNP/lc2 /:/) /:/( e/NN/e /:/( k1/NNP/k1 /:/) /:/( m/NN/m /:/) /:/) /:/) /./. when/WRB/when three/CD/three keys/NNS/keys are/VBP/are used/VBN/used /,/, the/DT/the effective/JJ/effective key/NN/key length/NN/length is/VBZ/is 168/CD/168 bits/NNP/bits. triple/NN/triple des/VBZ/des is/VBZ/is in/IN/in widespread/JJ/widespread use/NN/use today/NN/today /./. in/IN/in 2001/CD/2001 /,/, nist/JJ/nist a/DT/a new/JJ/new encryption/NN/encryption algorithm/NN/algorithm /,/, called/VBN/called the/DT/the to/TO/to replace/VB/replace des/NNP/des. aes/NNS/aes is/VBZ/is another/DT/another symmetric/JJ/symmetric block/NN/block cipher/NNP/cipher. it/PRP/it can/MD/can use/VB/use key/JJ/key lengths/NNS/lengths of/IN/of 128/CD/128 /,/, 192/CD/192 /,/, and/CC/and 256/CD/256 bits/NNS/bits and/CC/and works/NNS/works on/IN/on 128-bit/JJ/128-bit blocks/NNP/blocks. it/PRP/it works/VBZ/works by/IN/by performing/VBG/performing 10/CD/10 to/TO/to 14/CD/14 rounds/NNS/rounds of/IN/of transformations/NNS/transformations on/IN/on a/DT/a matrix/NN/matrix formed/VBN/formed from/IN/from a/DT/a block/NN/block generally/RB/generally /,/, the/DT/the algorithm/NN/algorithm is/VBZ/is compact/NN/compact and/CC/and efficient/NN/efficient /./. several/JJ/several other/JJ/other symmetric/JJ/symmetric block/NN/block encryption/NN/encryption algorithms/NNS/algorithms in/IN/in use/NN/use today/NN/today bear/NN/bear mentioning/NNP/mentioning. the/DT/the algorithm/NN/algorithm is/VBZ/is fast/VBN/fast compact/NN/compact /,/, and/CC/and easy/JJ/easy to/TO/to implement/NNP/implement. it/PRP/it can/MD/can use/VB/use a/DT/a variable/JJ/variable key/JJ/key length/NN/length of/IN/of up/IN/up to/TO/to 256/CD/256 bits/NNS/bits and/CC/and works/NNS/works on/IN/on 128-bit/JJ/128-bit blocks/NNS/blocks /./. can/MD/can vary/VB/vary in/IN/in key/JJ/key length/NN/length /,/, number/NN/number of/IN/of transformations/NNS/transformations /,/, and/CC/and block/NN/block size/NNP/size. because/IN/because it/PRP/it uses/VBZ/uses only/RB/only basic/JJ/basic computational/JJ/computational operations/NNS/operations /,/, it/PRP/it can/MD/can run/VB/run on/IN/on a/DT/a wide/JJ/wide variety/NN/variety of/IN/of crus/NN/crus /./. is/VBZ/is perhaps/RB/perhaps the/DT/the most/RBS/most common/JJ/common stream/NN/stream cipher/NNP/cipher. a/DT/a is/VBZ/is designed/VBN/designed to/TO/to encrypt/VB/encrypt and/CC/and decrypt/VB/decrypt a/DT/a stream/NN/stream of/IN/of bytes/NNS/bytes or/CC/or bits/NNS/bits rather/RB/rather than/IN/than a/DT/a block/NN/block /./. this/DT/this is/VBZ/is useful/JJ/useful when/WRB/when the/DT/the length/NN/length of/IN/of a/DT/a communication/NN/communication would/MD/would make/VB/make a/DT/a block/NN/block cipher/NN/cipher too/RB/too slow/NNP/slow. the/DT/the key/JJ/key is/VBZ/is input/VBN/input into/IN/into a/DT/a pseudo-random-bit/JJ/pseudo-random-bit generator/NN/generator /,/, which/WDT/which is/VBZ/is an/DT/an 642/CD/642 chapter/NN/chapter 15/CD/15 algorithm/NN/algorithm that/IN/that attempts/NNS/attempts to/TO/to produce/VB/produce random/NN/random bits/NNP/bits. the/DT/the output/NN/output of/IN/of the/DT/the generator/NN/generator when/WRB/when fed/VBN/fed a/DT/a key/JJ/key is/VBZ/is a/DT/a keystream/NNP/keystream. a/DT/a is/VBZ/is an/DT/an infinite/JJ/infinite set/NN/set of/IN/of keys/NNS/keys that/WDT/that can/MD/can be/VB/be used/VBN/used for/IN/for the/DT/the input/NN/input plaintext/NN/plaintext stream/NNP/stream. rc4/NNP/rc4 is/VBZ/is used/VBN/used in/IN/in encrypting/NN/encrypting steams/NNS/steams of/IN/of data/NNS/data /,/, such/JJ/such as/IN/as in/IN/in wep/NN/wep /,/, the/DT/the wireless/NN/wireless lan/NN/lan protocol/NNP/protocol. lt/NN/lt is/VBZ/is also/RB/also used/VBN/used in/IN/in communications/NNS/communications between/IN/between web/NN/web browsers/NNS/browsers and/CC/and web/NN/web servers/NNS/servers /,/, as/IN/as we/PRP/we discuss/VBP/discuss below/NNP/below. unfortunately/RB/unfortunately /,/, rc4/NNP/rc4 as/IN/as used/VBN/used in/IN/in wep/NN/wep /:/( ieee/NN/ieee standard/NN/standard 802.11/CD/802.11 /CD/) has/VBZ/has been/VBN/been found/VBN/found to/TO/to be/VB/be breakable/JJ/breakable in/IN/in a/DT/a reasonable/JJ/reasonable amount/NN/amount of/IN/of con1.puter/JJ/con1.puter time/NNP/time. in/IN/in fact/NN/fact rc4/NNP/rc4 itself/PRP/itself has/VBZ/has vulnerabilities/NNS/vulnerabilities /./. 15.4.1.2/CD/15.4.1.2 asymmetric/JJ/asymmetric encryption/NN/encryption in/IN/in an/DT/an there/EX/there are/VBP/are different/JJ/different encryption/NN/encryption and/CC/and decryption/NN/decryption keys/NNP/keys. here/RB/here /,/, we/PRP/we one/CD/one such/JJ/such algorithm/NN/algorithm /,/, known/VBN/known as/IN/as rsa/NN/rsa after/IN/after the/DT/the names/NNS/names of/IN/of its/PRP$/its inventors/NNS/inventors /:/( rivest/JJS/rivest /,/, shamir/NN/shamir /,/, and/CC/and adleman/NN/adleman /:/) /./. the/DT/the rsa/NN/rsa cipher/NN/cipher is/VBZ/is a/DT/a block-cipher/JJ/block-cipher public-key/JJ/public-key algorithm/NN/algorithm and/CC/and is/VBZ/is the/DT/the most/RBS/most widely/RB/widely used/JJ/used asymmetrical/JJ/asymmetrical algorithm/NNP/algorithm. asymmetrical/JJ/asymmetrical algorithms/NNS/algorithms based/VBN/based on/IN/on elliptical/JJ/elliptical curves/NNS/curves are/VBP/are gaining/VBG/gaining ground/NN/ground /,/, however/RB/however /,/, because/IN/because the/DT/the key/JJ/key length/NN/length of/IN/of such/JJ/such an/DT/an algorithm/NN/algorithm can/MD/can be/VB/be shorter/RBR/shorter for/IN/for the/DT/the same/JJ/same amount/NN/amount of/IN/of cryptographic/JJ/cryptographic strength/NN/strength /./. it/PRP/it is/VBZ/is computationally/RB/computationally infeasible/JJ/infeasible to/TO/to derive/JJ/derive d/NN/d /:/( kd/NN/kd /,/, n/NN/n /:/) from/IN/from e/NN/e /:/( lee/NN/lee /,/, n/NN/n /:/) /,/, and/CC/and so/RB/so e/VB/e /:/( ke/NN/ke /,/, n/NN/n /:/) need/VBP/need not/RB/not be/VB/be kept/VBN/kept secret/NN/secret and/CC/and can/MD/can be/VB/be widely/RB/widely disseminated/VBN/disseminated ;/:/; thus/RB/thus /,/, e/NN/e /:/( lee/NN/lee /,/, n/NN/n /:/) /:/( or/CC/or just/RB/just ice/NN/ice /:/) is/VBZ/is the/DT/the and/CC/and d/VBD/d /CD/( kd/NN/kd /,/, n/NN/n /:/) /:/( or/CC/or just/RB/just led/VBN/led /-NONE-/) is/VBZ/is the/DT/the n/NN/n is/VBZ/is the/DT/the write/JJ/write 'i/NN/'i messlge/NN/messlge 69//CD/69/ 0/-NONE-/0 isl/NN/isl l/NN/l m/NN/m ~/:/~ encryption_.../NNP/encryption_...,. 695/CD/695 mod/NN/mod 91/CD/91 key/JJ/key k5.91/-NONE-/k5.91 ~/:/~ /:/----- +/:/+ '/''/' gl/-NONE-/gl- ~/:/~ gl/NN/gl /:/: j/NN/j c/NN/c uc/NN/uc m/NN/m m/NN/m /:/( f/NN/f /:/) .r/JJ/.r /:/: /:/: /:/: /:/- ~/:/~ 0/-NONE-/0 '/''/' 1/CD/1------ /CD/) /./. /CD/( /CD/] /CD/) n/NN/n read/NN/read ~/:/~ figure/NN/figure 15.8/CD/15.8 encryption/NN/encryption and/CC/and decryption/NN/decryption using/VBG/using rsa/NN/rsa asymmetric/JJ/asymmetric cryptography/NN/cryptography /./. 15.4/CD/15.4 643/CD/643 product/NN/product of/IN/of two/CD/two large/JJ/large /,/, randomly/RB/randomly chosen/VBN/chosen prime/JJ/prime numbers/NNS/numbers p/VBP/p and/CC/and q/NN/q /:/( for/IN/for example/NN/example /,/, p/NN/p andq/NN/andq are512bitseach/NNP/are512bitseach /NNP/) /./. theencryptionalgorithmis/NNS/theencryptionalgorithmis e/VBP/e /:/( kc/NN/kc /,/, n/NN/n /:/) /:/( rn/NN/rn /:/) =/:/= mk/NN/mk /,/, mod/NN/mod n/NN/n /,/, where/WRB/where icc/NN/icc satisfies/NNS/satisfies leekd/VBD/leekd mod/NN/mod /:/( p/NN/p -1/-NONE-/-1 /./) /:/( q/NN/q -1/-NONE-/-1 /./) =/:/= 1/CD/1. the/DT/the decryption/NN/decryption algorithm/NN/algorithm is/VBZ/is then/RB/then d/VBN/d /-NONE-/( kd/VBN/kd /,/, n/NN/n /:/) /:/( c/NN/c /:/) =/:/= ckd/NN/ckd mod/NN/mod n/NN/n an/DT/an example/NN/example using/VBG/using small/JJ/small values/NNS/values is/VBZ/is shown/VBN/shown in/IN/in figure/NN/figure 15.8/CD/15.8. in/IN/in this/DT/this example/NN/example /,/, we/PRP/we make/VBP/make p/RP/p =/:/= 7/CD/7 and/CC/and q/NN/q =/:/= 13/CD/13. we/PRP/we then/RB/then calculate/VBP/calculate n/NN/n =/:/= 7/CD/7 13/CD/13 =/CD/= 91/CD/91 and/CC/and /CD/( p-1/-NONE-/p-1 /:/) /:/( q/NN/q -1/-NONE-/-1 /./) =/:/= 72/CD/72 /./. we/PRP/we next/JJ/next select/NN/select kc/NN/kc relatively/RB/relatively prime/JJ/prime to/TO/to 72/CD/72 and/CC/and 72/CD/72 /,/, yielding/JJ/yielding 5/CD/5. finally/RB/finally /,/, we/PRP/we calculate/VBP/calculate kd/VBN/kd such/JJ/such that/IN/that kekrt/NN/kekrt mod/NN/mod 72/CD/72 =/CD/= 1/CD/1 /,/, yielding/JJ/yielding 29/CD/29. we/PRP/we now/RB/now have/VBP/have our/PRP$/our keys/NNS/keys /:/: the/DT/the public/NN/public key/JJ/key /,/, lee/NN/lee /,/, n/NN/n =/:/= 5/CD/5 /,/, 91/CD/91 /,/, and/CC/and the/DT/the private/JJ/private key/JJ/key /,/, led/VBN/led /,/, n/NN/n =/:/= 29/CD/29 /,/, 91/CD/91. encrypting/VBG/encrypting the/DT/the message/NN/message 69/CD/69 with/IN/with the/DT/the public/NN/public key/JJ/key results/NNS/results in/IN/in the/DT/the message/NN/message 62/CD/62 /,/, which/WDT/which is/VBZ/is then/RB/then decoded/VBN/decoded by/IN/by the/DT/the receiver/NN/receiver via/IN/via the/DT/the private/JJ/private key/JJ/key /./. the/DT/the use/NN/use of/IN/of asymmetric/JJ/asymmetric encryption/NN/encryption begins/VBZ/begins with/IN/with the/DT/the publication/NN/publication of/IN/of the/DT/the public/NN/public key/JJ/key of/IN/of the/DT/the destination/NNP/destination. for/IN/for bidirectional/JJ/bidirectional communication/NN/communication /,/, the/DT/the source/NN/source also/RB/also must/MD/must publish/VB/publish its/PRP$/its public/JJ/public key/NNP/key. publication/NN/publication can/MD/can be/VB/be as/RB/as simple/JJ/simple as/IN/as handing/NN/handing over/IN/over an/DT/an electronic/JJ/electronic copy/NN/copy of/IN/of the/DT/the key/JJ/key /,/, or/CC/or it/PRP/it can/MD/can be/VB/be more/RBR/more complex/NNP/complex. the/DT/the private/JJ/private key/JJ/key /NN/( or/CC/or secret/NN/secret key/JJ/key /NN/) must/MD/must be/VB/be jealously/RB/jealously guarded/VBN/guarded /,/, as/IN/as anyone/NN/anyone holding/VBG/holding that/IN/that key/JJ/key can/MD/can decrypt/VB/decrypt any/DT/any message/NN/message created/VBD/created by/IN/by the/DT/the matching/VBG/matching public/NN/public key/JJ/key /./. we/PRP/we should/MD/should note/VB/note that/IN/that the/DT/the seemingly/RB/seemingly small/JJ/small difference/NN/difference in/IN/in key/JJ/key use/NN/use between/IN/between asymmetric/JJ/asymmetric and/CC/and symmetric/JJ/symmetric cryptography/NN/cryptography is/VBZ/is quite/RB/quite large/JJ/large in/IN/in practice/NNP/practice. asymmetric/JJ/asymmetric cryptography/NN/cryptography is/VBZ/is based/VBN/based on/IN/on mathematical/JJ/mathematical functions/NNS/functions rather/RB/rather than/IN/than transformations/NNS/transformations /,/, inaking/VBG/inaking it/PRP/it much/RB/much more/JJR/more computationally/RB/computationally expensive/JJ/expensive to/TO/to execute/NNP/execute. it/PRP/it is/VBZ/is much/RB/much faster/JJR/faster for/IN/for a/DT/a computer/NN/computer to/TO/to encode/VB/encode and/CC/and decode/VB/decode ciphertext/JJ/ciphertext by/IN/by using/NN/using the/DT/the usual/JJ/usual symmetric/JJ/symmetric algorithms/NNS/algorithms than/IN/than by/IN/by using/NN/using asymmetric/JJ/asymmetric algorithms/NNP/algorithms. why/WRB/why /,/, then/RB/then /,/, use/NN/use an/DT/an asymmetric/JJ/asymmetric algorithm/NN/algorithm in/IN/in truth/NN/truth /,/, these/DT/these algorithms/NNS/algorithms are/VBP/are not/RB/not used/VBN/used for/IN/for generalpurpose/NN/generalpurpose encryption/NN/encryption of/IN/of large/JJ/large amounts/NNS/amounts of/IN/of data/NNP/data. however/RB/however /,/, they/PRP/they are/VBP/are used/VBN/used not/RB/not only/RB/only for/IN/for encryption/NN/encryption of/IN/of small/JJ/small amounts/NNS/amounts of/IN/of data/NNS/data but/CC/but also/RB/also for/IN/for authentication/NN/authentication /,/, confidentiality/NN/confidentiality /,/, and/CC/and key/JJ/key distribution/NN/distribution /,/, as/IN/as we/PRP/we show/VBP/show in/IN/in the/DT/the following/JJ/following sections/NNS/sections /./. 15.4.1.3/CD/15.4.1.3 authentication/NN/authentication we/PRP/we have/VBP/have seen/VBN/seen that/IN/that encryption/NN/encryption offers/NNS/offers a/DT/a way/NN/way of/IN/of constraining/VBG/constraining the/DT/the set/NN/set of/IN/of possible/JJ/possible receivers/NNS/receivers of/IN/of a/DT/a message/NNP/message. constraining/NN/constraining the/DT/the set/NN/set of/IN/of potential/JJ/potential senders/NNS/senders of/IN/of a/DT/a message/NN/message is/VBZ/is called/VBN/called authentication/NN/authentication is/VBZ/is thus/RB/thus complementary/JJ/complementary to/TO/to encryption/NNP/encryption. in/IN/in fact/NN/fact /,/, sometimes/RB/sometimes their/PRP$/their functions/NNS/functions overlap/NNP/overlap. consider/NN/consider that/WDT/that an/DT/an encrypted/VBD/encrypted message/NN/message can/MD/can also/RB/also prove/VB/prove the/DT/the identity/NN/identity of/IN/of the/DT/the sender/NNP/sender. for/IN/for example/NN/example /,/, if/IN/if d/NN/d /:/( kd/NN/kd /,/, n/NN/n /:/) /:/( e/NN/e /:/( ke/NNP/ke. n/NN/n /:/) /:/( m/NN/m /:/) /:/) produces/NNS/produces a/DT/a valid/JJ/valid message/NN/message /,/, then/RB/then we/PRP/we know/VBP/know that/IN/that the/DT/the creator/NN/creator of/IN/of the/DT/the message/NN/message must/MD/must hold/VB/hold ke/NNP/ke. authentication/NN/authentication is/VBZ/is also/RB/also useful/JJ/useful for/IN/for proving/NN/proving that/WDT/that a/DT/a message/NN/message has/VBZ/has not/RB/not been/VBN/been modified/NNP/modified. in/IN/in this/DT/this section/NN/section /,/, we/PRP/we discuss/VBP/discuss authentication/NN/authentication as/IN/as a/DT/a constraint/NN/constraint on/IN/on possible/JJ/possible receivers/NNS/receivers of/IN/of a/DT/a message/NNP/message. note/NN/note that/IN/that this/DT/this sort/NN/sort of/IN/of authentication/NN/authentication is/VBZ/is similar/JJ/similar to/TO/to but/CC/but distinct/VB/distinct from/IN/from user/NN/user authentication/NN/authentication /,/, which/WDT/which we/PRP/we discuss/VBP/discuss in/IN/in section/NN/section 15.5/CD/15.5 /./. an/DT/an authentication/NN/authentication algorithm/NN/algorithm consists/NNS/consists of/IN/of the/DT/the following/JJ/following components/NNS/components /:/: a/DT/a set/NN/set k/NN/k of/IN/of keys/NNS/keys /./. a/DT/a set/NN/set m/NN/m of/IN/of messages/NNS/messages /./. a/DT/a set/NN/set a/DT/a of/IN/of authenticators/NNS/authenticators /./. a/DT/a functions/NNS/functions /:/: k/NN/k /:/- /:/- /:/( m/JJ/m- +/NN/+ a/DT/a /NN/) /./. that/IN/that is/VBZ/is /,/, for/IN/for each/DT/each k/NN/k e/NN/e k/NN/k /,/, s/VBZ/s /:/( k/NN/k /:/) is/VBZ/is a/DT/a function/NN/function for/IN/for generating/NN/generating authenticators/NNS/authenticators from/IN/from messages/NNP/messages. both/DT/both sand/NN/sand s/NNS/s /:/( k/NN/k /:/) for/IN/for any/DT/any k/NN/k should/MD/should be/VB/be efficiently/RB/efficiently computable/JJ/computable functions/NNS/functions /./. 644/CD/644 chapter/NN/chapter 15/CD/15 a/DT/a function/NN/function v/NN/v /:/: /:/[ /:/( /:/- +/:/+ /:/( m/NN/m x/NN/x a/NN/a- +/:/+ /:/{ true/JJ/true /,/, false/NN/false /:/} /:/) /./. that/IN/that is/VBZ/is /,/, for/IN/for each/DT/each lc/NN/lc e/NN/e k/NN/k /,/, v/NN/v /:/( lc/NN/lc /:/) is/VBZ/is a/DT/a function/NN/function for/IN/for verifying/NN/verifying authenticators/NNS/authenticators on/IN/on messages/NNP/messages. both/DT/both v/NN/v and/CC/and v/NN/v /:/( lc/NN/lc /:/) for/IN/for any/DT/any lc/NN/lc should/MD/should be/VB/be efficiently/RB/efficiently computable/JJ/computable functions/NNS/functions /./. the/DT/the critical/JJ/critical property/NN/property that/WDT/that an/DT/an authentication/NN/authentication algorithm/NN/algorithm must/MD/must possess/VB/possess is/VBZ/is this/DT/this /:/: for/IN/for a/DT/a message/NN/message m/NN/m /,/, a/DT/a computer/NN/computer can/MD/can generate/VB/generate an/DT/an authenticator/NN/authenticator a/DT/a e/NN/e a/DT/a such/JJ/such that/IN/that v/NN/v /:/( lc/NN/lc /:/) /:/( m/NN/m /,/, a/DT/a /NN/) =/:/= true/JJ/true only/RB/only if/IN/if it/PRP/it possesses/VBZ/possesses s/NNS/s /:/( lc/NN/lc /:/) /./. thus/RB/thus /,/, a/DT/a computer/NN/computer holding/VBG/holding s/NNS/s /:/( lc/NN/lc /:/) can/MD/can generate/VB/generate authenticators/NNS/authenticators on/IN/on messages/NNS/messages so/IN/so that/IN/that any/DT/any computer/NN/computer possessing/VBG/possessing v/NN/v /:/( lc/NN/lc /:/) can/MD/can verify/VB/verify them/NNP/them. however/RB/however /,/, a/DT/a computer/NN/computer not/RB/not holding/VBG/holding s/NNS/s /:/( lc/NN/lc /:/) can/MD/can not/RB/not generate/VB/generate authenticators/NNS/authenticators on/IN/on messages/NNS/messages that/IN/that can/MD/can be/VB/be verified/VBN/verified using/VBG/using v/NN/v /:/( lc/NN/lc /:/) /./. since/IN/since authenticators/NNS/authenticators are/VBP/are generally/RB/generally exposed/VBN/exposed /-NONE-/( for/IN/for example/NN/example /,/, sent/NN/sent on/IN/on a/DT/a network/NN/network with/IN/with the/DT/the messages/NNS/messages themselves/PRP/themselves /VBP/) /,/, it/PRP/it must/MD/must not/RB/not be/VB/be feasible/JJ/feasible to/TO/to derive/JJ/derive s/NNS/s /:/( lc/NN/lc /:/) from/IN/from the/DT/the authenticators/NNS/authenticators /./. just/RB/just as/IN/as there/EX/there are/VBP/are two/CD/two types/NNS/types of/IN/of encryption/NN/encryption algorithms/NNS/algorithms /,/, there/EX/there are/VBP/are two/CD/two main/JJ/main varieties/NNS/varieties of/IN/of authentication/NN/authentication algorithms/NNP/algorithms. the/DT/the first/JJ/first in/IN/in understanding/NN/understanding these/DT/these algorithms/NNS/algorithms is/VBZ/is to/TO/to explore/VB/explore hash/NN/hash functions/NNP/functions. a/DT/a h/NN/h /:/( m/NN/m /:/) creates/NNS/creates a/DT/a small/JJ/small /,/, fixed-sized/JJ/fixed-sized block/NN/block of/IN/of data/NNS/data /,/, known/VBN/known as/IN/as a/DT/a or/CC/or from/IN/from a/DT/a message/NN/message m/NNP/m. hash/NN/hash functions/NNS/functions work/VBP/work by/IN/by taking/VBG/taking a/DT/a message/NN/message in/IN/in n-bit/JJ/n-bit blocks/NNS/blocks and/CC/and processing/VBG/processing the/DT/the blocks/NNS/blocks to/TO/to produce/VB/produce an/DT/an n-bit/JJ/n-bit hash/NNP/hash. h/NN/h must/MD/must be/VB/be collision/NN/collision resistant/NN/resistant on/IN/on m-that/JJ/m-that is/VBZ/is /,/, it/PRP/it must/MD/must be/VB/be infeasible/JJ/infeasible to/TO/to find/VB/find an/DT/an 1111/CD/1111 #/#/# m/NN/m such/JJ/such that/IN/that h/NN/h /:/( m/NN/m /:/) =/:/= h/NN/h /:/( n//JJ/n/ /NN/) /./. now/RB/now /,/, if/IN/if h/NN/h /:/( m/NN/m /:/) =/:/= h/NN/h /:/( m1/NNP/m1 /:/) /,/, we/PRP/we know/VBP/know that/IN/that m/NN/m m1/NNP/m1 -that/NNP/-that is/VBZ/is /,/, we/PRP/we know/VBP/know that/IN/that the/DT/the message/NN/message has/VBZ/has not/RB/not been/VBN/been modified/NNP/modified. common/JJ/common message-digest/JJ/message-digest functions/NNS/functions include/VBP/include which/WDT/which produces/NNS/produces a/DT/a 128-bit/JJ/128-bit hash/NN/hash /,/, and/CC/and which/WDT/which outputs/NNS/outputs a/DT/a 160-bit/JJ/160-bit hash/NN/hash /./. message/NN/message digests/NNS/digests are/VBP/are useful/JJ/useful for/IN/for detecting/NN/detecting changed/VBD/changed messages/NNS/messages but/CC/but are/VBP/are not/RB/not useful/JJ/useful as/IN/as authenticators/NNP/authenticators. for/IN/for example/NN/example /,/, h/NN/h /:/( m/NN/m /:/) can/MD/can be/VB/be sent/VBN/sent along/IN/along with/IN/with a/DT/a message/NN/message ;/:/; but/CC/but if/IN/if his/PRP$/his known/VBN/known /,/, then/RB/then someone/NN/someone could/MD/could modify/VB/modify m/NN/m and/CC/and recompute/NN/recompute h/NN/h /:/( m/NN/m /:/) /,/, and/CC/and the/DT/the message/NN/message modification/NN/modification would/MD/would not/RB/not be/VB/be detected/NNP/detected. therefore/RB/therefore /,/, an/DT/an authentication/NN/authentication algorithm/NN/algorithm takes/VBZ/takes the/DT/the message/NN/message digest/NN/digest and/CC/and encrypts/NNS/encrypts it/PRP/it /./. the/DT/the first/JJ/first main/NN/main type/NN/type of/IN/of authentication/NN/authentication algorithm/NN/algorithm uses/NNS/uses symmetric/JJ/symmetric encryption/NN/encryption /./. in/IN/in a/DT/a a/DT/a cryptographic/JJ/cryptographic checksum/NN/checksum is/VBZ/is generated/VBN/generated from/IN/from message/NN/message using/VBG/using a/DT/a secret/NN/secret key/NNP/key. knowledge/NN/knowledge of/IN/of v/NN/v /:/( lc/NN/lc /:/) and/CC/and knowledge/NN/knowledge of/IN/of s/NNS/s /:/( lc/NN/lc /:/) are/VBP/are equivalent/JJ/equivalent /:/: one/CD/one can/MD/can be/VB/be derived/VBN/derived from/IN/from the/DT/the other/JJ/other /,/, so/IN/so lc/NN/lc must/MD/must be/VB/be kept/VBN/kept secret/NNP/secret. a/DT/a simple/JJ/simple example/NN/example of/IN/of a/DT/a mac/NN/mac defines/VBZ/defines s/NNS/s /:/( lc/NN/lc /:/) /:/( m/NN/m /:/) =/:/= f/NN/f /:/( k/NN/k /,/, h/NN/h /:/( m/NN/m /:/) /:/) /,/, where/WRB/where f/NN/f is/VBZ/is a/DT/a function/NN/function that/WDT/that is/VBZ/is one-way/NNP/one-way on/IN/on its/PRP$/its first/JJ/first argument/NN/argument /:/( that/IN/that is/VBZ/is /,/, k/NN/k cam10t/NNP/cam10t be/VB/be derived/VBN/derived from/IN/from f/NN/f /:/( k/NN/k /,/, h/NN/h /:/( m/NN/m /:/) /:/) /:/) /./. because/IN/because of/IN/of the/DT/the collision/NN/collision resistance/NN/resistance in/IN/in the/DT/the hash/NN/hash function/NN/function /,/, we/PRP/we are/VBP/are reasonably/RB/reasonably assured/VBN/assured that/IN/that no/DT/no other/JJ/other message/NN/message could/MD/could create/VB/create the/DT/the same/JJ/same mac/NNP/mac. a/DT/a suitable/JJ/suitable verification/NN/verification algorithm/NNP/algorithm. is/VBZ/is then/RB/then v/NN/v /:/( lc/NN/lc /:/) /:/( m/NN/m /,/, a/DT/a /NN/) =/:/= /:/( j/NN/j /:/( lc/NN/lc /,/, m/NN/m /:/) =/:/= a/DT/a /NN/) /./. note/NN/note that/IN/that k/NN/k is/VBZ/is needed/VBN/needed to/TO/to compute/VB/compute both/DT/both s/NNS/s /VBP/( lc/NN/lc /:/) and/CC/and v/NN/v /:/( lc/NN/lc /:/) /,/, so/RB/so anyone/NN/anyone able/JJ/able to/TO/to compute/VB/compute one/CD/one can/MD/can compute/VB/compute the/DT/the other/JJ/other /./. the/DT/the second/JJ/second main/NN/main type/NN/type of/IN/of authentication/NN/authentication algorithm/NN/algorithm is/VBZ/is a/DT/a and/CC/and the/DT/the authenticators/NNS/authenticators thus/RB/thus produced/VBN/produced are/VBP/are called/VBN/called in/IN/in a/DT/a digital-signature/JJ/digital-signature algorithm/NN/algorithm /,/, it/PRP/it is/VBZ/is computationally/RB/computationally to/TO/to derive/VB/derive s/NNS/s /:/( ks/NNS/ks /VBP/) from/IN/from v/NN/v /:/( lcv/NN/lcv /:/) ;/:/; in/IN/in particular/JJ/particular /,/, vis/VBZ/vis a/DT/a one-way/JJ/one-way function/NNP/function. thus/RB/thus /,/, kv/NN/kv is/VBZ/is the/DT/the public/NN/public key/JJ/key and/CC/and lc5/NNP/lc5 is/VBZ/is the/DT/the private/JJ/private key/JJ/key /./. consider/NN/consider as/IN/as an/DT/an example/NN/example the/DT/the rsa/NN/rsa digital-signature/NN/digital-signature algorithm/NNP/algorithm. it/PRP/it is/VBZ/is similar/JJ/similar to/TO/to the/DT/the rsa/NN/rsa encryption/NN/encryption algorithm/NN/algorithm /,/, but/CC/but the/DT/the key/JJ/key use/NN/use is/VBZ/is reversed/NNP/reversed. the/DT/the digital/JJ/digital signature/NN/signature of/IN/of a/DT/a message/NN/message is/VBZ/is derived/VBN/derived by/IN/by computing/NN/computing s/NNS/s /:/( lcs/NNS/lcs /VBP/) /:/( m/NN/m /:/) =/:/= h/NN/h /:/( m/NN/m /:/) s/NNS/s mod/VBD/mod n/NN/n /./. the/DT/the key/JJ/key /c5/NN//c5 again/RB/again is/VBZ/is a/DT/a pair/NN/pair /:/( d/NN/d /,/, n/NN/n /:/) /,/, where/WRB/where n/NN/n is/VBZ/is the/DT/the product/NN/product of/IN/of two/CD/two large/JJ/large /,/, randomly/RB/randomly chosen/VBN/chosen prime/JJ/prime numbers/NNS/numbers p/VBP/p and/CC/and q/NNP/q. the/DT/the verification/NN/verification algorithm/NN/algorithm is/VBZ/is then/RB/then v/NN/v /:/( kv/NN/kv /:/) /:/( m/NN/m /,/, a/DT/a /NN/) =/:/= /:/( ak/NN/ak mod/NN/mod n/NN/n =/:/= h/NN/h /:/( m/NN/m /:/) /:/) /,/, where/WRB/where kv/NN/kv satisfies/NNS/satisfies lc/VBP/lc /,/, /NNP/) c5/NNP/c5 mod/NN/mod /:/( p/NN/p /:/- 1/CD/1 /CD/) /CD/( q/NN/q /:/- 1/CD/1 /CD/) =/CD/= 1/CD/1 /./. 15.4/CD/15.4 645/CD/645 lf/NN/lf encryption/NN/encryption can/MD/can prove/VB/prove the/DT/the identity/NN/identity of/IN/of the/DT/the sender/NN/sender of/IN/of a/DT/a m/NN/m ~/:/~ essage/NN/essage /,/, then/RB/then why/WRB/why do/VBP/do we/PRP/we need/VBP/need separate/JJ/separate authentication/NN/authentication algorithms/NNS/algorithms there/EX/there are/VBP/are three/CD/three primary/JJ/primary reasons/NNS/reasons /./. authentication/NN/authentication algorithms/NNS/algorithms generally/RB/generally require/VBP/require fewer/JJR/fewer computations/NNS/computations /:/( with/IN/with the/DT/the notable/JJ/notable exception/NN/exception of/IN/of h.sa/NNP/h.sa digital/JJ/digital signatures/NNS/signatures /:/) /./. over/IN/over large/JJ/large amounts/NNS/amounts of/IN/of plaintext/JJ/plaintext /,/, this/DT/this efficiency/NN/efficiency can/MD/can make/VB/make a/DT/a huge/JJ/huge difference/NN/difference in/IN/in resource/NN/resource use/NN/use and/CC/and the/DT/the time/NN/time needed/VBN/needed to/TO/to authenticate/VB/authenticate a/DT/a message/NN/message /./. the/DT/the authenticator/NN/authenticator of/IN/of a/DT/a message/NN/message is/VBZ/is almost/RB/almost always/RB/always shorter/JJR/shorter than/IN/than the/DT/the message/NN/message and/CC/and its/PRP$/its ciphertext/NNP/ciphertext. this/DT/this improves/VBZ/improves space/NN/space use/NN/use and/CC/and transmission/NN/transmission time/NN/time efficiency/NN/efficiency /./. sometimes/RB/sometimes /,/, we/PRP/we want/VBP/want authentication/NN/authentication but/CC/but not/RB/not confidentiality/NNP/confidentiality. for/IN/for example/NN/example /,/, a/DT/a company/NN/company could/MD/could provide/VB/provide a/DT/a software/NN/software patch/NN/patch and/CC/and could/MD/could sign/VB/sign that/IN/that patch/NN/patch to/TO/to prove/VB/prove that/IN/that it/PRP/it came/VBD/came from/IN/from the/DT/the company/NN/company and/CC/and that/IN/that it/PRP/it has/VBZ/has n't/RB/n't been/VBN/been modified/VBN/modified /./. authentication/NN/authentication is/VBZ/is a/DT/a component/NN/component of/IN/of many/JJ/many aspects/NNS/aspects of/IN/of security/NNP/security. for/IN/for example/NN/example /,/, it/PRP/it is/VBZ/is the/DT/the core/NN/core of/IN/of which/WDT/which supplies/NNS/supplies proof/VBP/proof that/IN/that an/DT/an entity/NN/entity performed/VBN/performed an/DT/an action/NNP/action. a/DT/a typical/JJ/typical example/NN/example of/IN/of nonrepudiation/NN/nonrepudiation involves/NNS/involves the/DT/the filling/NN/filling out/RP/out of/IN/of electronic/JJ/electronic forms/NNS/forms as/IN/as an/DT/an alternative/NN/alternative to/TO/to the/DT/the signing/NN/signing of/IN/of paper/NN/paper contracts/NNP/contracts. nonrepudiation/NN/nonrepudiation assures/NNS/assures that/WDT/that a/DT/a person/NN/person filling/VBG/filling out/RP/out an/DT/an electronic/JJ/electronic form/NN/form can/MD/can not/RB/not deny/VB/deny that/IN/that he/PRP/he did/VBD/did so/RB/so /./. 15.4.1.4/CD/15.4.1.4 key/JJ/key distribution/NN/distribution certainly/RB/certainly /,/, a/DT/a good/JJ/good part/NN/part of/IN/of the/DT/the battle/NN/battle between/IN/between cryptographers/NNS/cryptographers /:/( those/DT/those inventing/VBG/inventing ciphers/NNS/ciphers /:/) and/CC/and cryptanalysts/NNS/cryptanalysts /:/( those/DT/those trying/VBG/trying to/TO/to break/VB/break them/PRP/them /:/) involves/NNS/involves keys/NNP/keys. with/IN/with symmetric/JJ/symmetric algorithms/NNS/algorithms /,/, both/DT/both parties/NNS/parties need/VBP/need the/DT/the key/JJ/key /,/, and/CC/and no/DT/no one/NN/one else/NN/else should/MD/should have/VB/have it/NNP/it. the/DT/the delivery/NN/delivery of/IN/of the/DT/the symmetric/JJ/symmetric key/JJ/key is/VBZ/is a/DT/a huge/JJ/huge challenge/NNP/challenge. sometimes/RB/sometimes it/PRP/it is/VBZ/is performed/VBN/performed cut-or-band/-NONE-/cut-or-band -say/JJ/-say /,/, via/IN/via a/DT/a paper/NN/paper document/NN/document or/CC/or a/DT/a conversation/NN/conversation /./. these/DT/these methods/NNS/methods do/VBP/do not/RB/not scale/VB/scale well/RB/well /,/, however/NNP/however. also/RB/also consider/JJR/consider the/DT/the key-management/JJ/key-management challenge/NNP/challenge. suppose/NN/suppose a/DT/a user/NN/user wanted/VBD/wanted to/TO/to communicate/VB/communicate with/IN/with n/NN/n other/JJ/other users/NNS/users privately/RB/privately /./. that/IN/that user/NN/user would/MD/would need/VB/need n/NN/n keys/NNS/keys and/CC/and /,/, for/IN/for more/JJR/more security/NN/security /,/, would/MD/would need/VB/need to/TO/to change/VB/change those/DT/those keys/NNS/keys frequently/RB/frequently /./. these/DT/these are/VBP/are the/DT/the very/JJ/very reasons/NNS/reasons for/IN/for efforts/NNS/efforts to/TO/to create/VB/create asymmetric/JJ/asymmetric key/JJ/key algorithms/NNS/algorithms /./. not/RB/not only/RB/only can/MD/can the/DT/the keys/NNS/keys be/VB/be exchanged/VBN/exchanged in/IN/in public/JJ/public /,/, but/CC/but a/DT/a given/VBN/given user/NN/user needs/VBZ/needs only/RB/only one/CD/one private/JJ/private key/JJ/key /,/, no/DT/no matter/NN/matter how/WRB/how many/JJ/many other/JJ/other people/NNS/people she/PRP/she wants/VBZ/wants to/TO/to communicate/VB/communicate with/NNP/with. there/RB/there is/VBZ/is still/RB/still the/DT/the matter/NN/matter of/IN/of managing/VBG/managing a/DT/a public/JJ/public key/JJ/key for/IN/for each/DT/each party/NN/party to/TO/to be/VB/be communicated/VBN/communicated with/IN/with /,/, but/CC/but since/IN/since public/JJ/public keys/NNS/keys need/VBP/need not/RB/not be/VB/be secured/VBN/secured /,/, simple/JJ/simple storage/NN/storage can/MD/can be/VB/be used/VBN/used for/IN/for that/DT/that unfortunately/RB/unfortunately /,/, even/RB/even the/DT/the distribution/NN/distribution of/IN/of public/JJ/public keys/NNS/keys requires/VBZ/requires some/DT/some care/NN/care /./. consider/NN/consider the/DT/the man-in-the-middle/JJ/man-in-the-middle attack/NN/attack shown/NN/shown in/IN/in figure/NN/figure 15.9/CD/15.9. here/RB/here /,/, the/DT/the person/NN/person who/WP/who wants/VBZ/wants to/TO/to receive/VB/receive an/DT/an encrypted/JJ/encrypted message/NN/message sends/NNS/sends out/IN/out his/PRP$/his public/JJ/public key/JJ/key /,/, but/CC/but an/DT/an attacker/NN/attacker also/RB/also sends/VBZ/sends her/PRP$/her bad/JJ/bad public/JJ/public key/JJ/key /NN/( which/WDT/which matches/NNS/matches her/PRP$/her private/JJ/private key/NN/key /:/) /./. the/DT/the person/NN/person who/WP/who wants/VBZ/wants to/TO/to send/VB/send the/DT/the encrypted/VBN/encrypted message/NN/message knows/VBZ/knows no/DT/no better/JJR/better and/CC/and so/RB/so uses/VBZ/uses the/DT/the bad/JJ/bad key/JJ/key to/TO/to encrypt/VB/encrypt the/DT/the message/NNP/message. the/DT/the attacker/NN/attacker then/RB/then happily/RB/happily decrypts/VBZ/decrypts it/PRP/it /./. the/DT/the problem/NN/problem is/VBZ/is one/CD/one of/IN/of authentication-what/JJ/authentication-what we/PRP/we need/VBP/need is/VBZ/is proof/IN/proof of/IN/of who/WP/who /-NONE-/( or/CC/or what/WP/what /-NONE-/) owns/VBZ/owns a/DT/a public/JJ/public one/CD/one to/TO/to solve/VB/solve that/IN/that problem/NN/problem involves/VBZ/involves the/DT/the use/NN/use of/IN/of digital/JJ/digital certificates/NNP/certificates. a/DT/a is/VBZ/is a/DT/a public/JJ/public key/JJ/key digitally/RB/digitally signed/VBN/signed by/IN/by a/DT/a trusted/JJ/trusted party/NNP/party. the/DT/the trusted/VBN/trusted party/NN/party receives/NNS/receives proof/IN/proof of/IN/of identification/NN/identification from/IN/from some/DT/some entity/NN/entity 646/CD/646 chapter/NN/chapter 15/CD/15 encryption/NN/encryption __/-NONE-/__, /./. key/JJ/key kbad/NN/kbad attacker/NN/attacker decryption/NN/decryption key/NN/key kd/NN/kd __/NN/__, /./. co/NN/co '/''/' -.u/NNP/-.u '/POS/' c/NN/c ;/:/; aq/NN/aq cd/NN/cd 0/-NONE-/0 _/NNP/_ decryption/NN/decryption .../,/..., /./. key/JJ/key kbad/NN/kbad .,......_read/JJ/.,......_read /:/- +/:/+ message/NN/message m/NN/m i/PRP/i figure/VBP/figure 15.9/CD/15.9 a/DT/a man-in-the-middle/JJ/man-in-the-middle attack/NN/attack on/IN/on asymmetric/JJ/asymmetric cryptography/NN/cryptography /./. and/CC/and certifies/NNS/certifies that/WDT/that the/DT/the public/NN/public key/JJ/key we/PRP/we can/MD/can trust/VB/trust the/DT/the certifier/NN/certifier these/DT/these have/VBP/have their/PRP$/their public/JJ/public keys/NNS/keys i.j.l.cluded/JJ/i.j.l.cluded within/IN/within web/NN/web browsers/NNS/browsers /:/( and/CC/and other/JJ/other consumers/NNS/consumers of/IN/of certificates/NNS/certificates /:/) before/IN/before they/PRP/they are/VBP/are distributed/NNP/distributed. the/DT/the certificate/NN/certificate authorities/NNS/authorities can/MD/can then/RB/then vouch/VB/vouch for/IN/for other/JJ/other authorities/NNS/authorities /:/( digitally/RB/digitally signing/VBG/signing the/DT/the public/NN/public keys/NNS/keys of/IN/of these/DT/these other/JJ/other authorities/NNS/authorities /:/) /,/, and/CC/and so/RB/so on/IN/on /,/, creating/VBG/creating a/DT/a web/NN/web of/IN/of trust/NNP/trust. the/DT/the certificates/NNS/certificates can/MD/can be/VB/be distributed/VBN/distributed in/IN/in a/DT/a standard/JJ/standard x.509/NN/x.509 digital/NN/digital certificate/NN/certificate format/NN/format that/WDT/that can/MD/can be/VB/be parsed/VBN/parsed by/IN/by computer/NNP/computer. this/DT/this scheme/NN/scheme is/VBZ/is used/VBN/used for/IN/for secure/NN/secure web/NN/web communication/NN/communication /,/, as/IN/as we/PRP/we discuss/VBP/discuss in/IN/in section/NN/section 15.4.3/CD/15.4.3 /./. 15.4.2/CD/15.4.2 implementation/NN/implementation of/IN/of cryptography/NN/cryptography network/NN/network protocols/NNS/protocols are/VBP/are typically/RB/typically organized/VBN/organized in/IN/in each/DT/each layer/NN/layer acting/VBG/acting as/IN/as a/DT/a client/NN/client of/IN/of the/DT/the one/CD/one below/IN/below it/NNP/it. that/IN/that is/VBZ/is /,/, when/WRB/when one/CD/one protocol/NN/protocol generates/NNS/generates a/DT/a message/NN/message to/TO/to send/VB/send to/TO/to its/PRP$/its protocol/NN/protocol peer/NN/peer on/IN/on another/DT/another machine/NN/machine /,/, it/PRP/it hands/VBZ/hands its/PRP$/its message/NN/message to/TO/to the/DT/the protocol/NN/protocol below/IN/below it/PRP/it in/IN/in the/DT/the network-protocol/NN/network-protocol stack/NN/stack for/IN/for delivery/NN/delivery to/TO/to its/PRP$/its peer/NN/peer on/IN/on that/DT/that machine/NN/machine /./. for/IN/for example/NN/example /,/, in/IN/in an/DT/an ip/NN/ip network/NN/network /,/, tcp/NN/tcp /:/( a/DT/a transport-layer/NN/transport-layer protocol/NN/protocol /:/) acts/NNS/acts as/IN/as a/DT/a client/NN/client of/IN/of ip/NN/ip /:/( a/DT/a network-layer/NN/network-layer protocol/NN/protocol /:/) /:/: tcp/NN/tcp packets/NNS/packets are/VBP/are passed/VBN/passed down/RP/down to/TO/to ip/VB/ip for/IN/for delivery/NN/delivery to/TO/to the/DT/the tcp/NN/tcp peer/NN/peer at/IN/at the/DT/the other/JJ/other end/NN/end of/IN/of the/DT/the tcp/NN/tcp connection/NNP/connection. ip/NN/ip encapsulates/VBZ/encapsulates the/DT/the tcp/NN/tcp 15.4/CD/15.4 647/CD/647 packet/NN/packet in/IN/in an/DT/an ip/NN/ip packet/NN/packet /,/, which/WDT/which it/PRP/it similarly/RB/similarly passes/VBZ/passes down/IN/down to/TO/to the/DT/the data-link/NN/data-link layer/NN/layer to/TO/to be/VB/be transmitted/VBN/transmitted across/IN/across the/DT/the network/NN/network to/TO/to its/PRP$/its ip/NN/ip peer/NN/peer on/IN/on the/DT/the destination/NN/destination computer/NNP/computer. this/DT/this ip/NN/ip peer/NN/peer then/RB/then delivers/NNS/delivers the/DT/the tcp/NN/tcp up/RP/up to/TO/to the/DT/the tcp/NN/tcp peer/NN/peer on/IN/on that/DT/that machine/NNP/machine. all/DT/all in/IN/in all/DT/all /,/, the/DT/the which/WDT/which has/VBZ/has been/VBN/been almost/RB/almost universally/RB/universally adopted/VBN/adopted as/IN/as a/DT/a model/NN/model for/IN/for data/NNS/data networking/VBG/networking /,/, defines/NNS/defines seven/CD/seven such/JJ/such protocol/NN/protocol layers/NNP/layers. /NNP/( you/PRP/you will/MD/will read/VB/read more/RBR/more about/IN/about the/DT/the iso/NN/iso model/NN/model of/IN/of networking/NN/networking in/IN/in chapter/NN/chapter 16/CD/16 ;/:/; figure/NN/figure 16.6/CD/16.6 shows/NNS/shows a/DT/a diagram/NN/diagram of/IN/of the/DT/the model/NNP/model. /NNP/) cryptography/NN/cryptography can/MD/can be/VB/be inserted/VBN/inserted at/IN/at almost/RB/almost any/DT/any layer/NN/layer in/IN/in the/DT/the iso/NN/iso model/NNP/model. ssl/NN/ssl /:/( section/NN/section 15.4.3/CD/15.4.3 /CD/) /,/, for/IN/for example/NN/example /,/, provides/VBZ/provides security/NN/security at/IN/at the/DT/the transport/NN/transport layer/NNP/layer. networklayer/NN/networklayer security/NN/security generally/RB/generally has/VBZ/has been/VBN/been standardized/JJ/standardized on/IN/on which/WDT/which defines/NNS/defines ip/VBP/ip packet/NN/packet formats/NNS/formats that/WDT/that allow/VBP/allow the/DT/the insertion/NN/insertion of/IN/of authenticators/NNS/authenticators and/CC/and the/DT/the encryption/NN/encryption of/IN/of packet/NN/packet contents/NNP/contents. it/PRP/it uses/VBZ/uses symmetric/JJ/symmetric encryption/NN/encryption and/CC/and uses/NNS/uses the/DT/the protocol/NN/protocol for/IN/for key/JJ/key ipsec/NN/ipsec is/VBZ/is becoming/VBG/becoming widely/RB/widely used/JJ/used as/IN/as the/DT/the basis/NN/basis for/IN/for in/IN/in which/WDT/which all/DT/all traffic/JJ/traffic between/IN/between two/CD/two ipsec/NN/ipsec endpoints/NNS/endpoints is/VBZ/is encrypted/VBN/encrypted to/TO/to make/VB/make a/DT/a private/JJ/private network/NN/network out/IN/out of/IN/of one/CD/one that/WDT/that may/MD/may otherwise/VB/otherwise be/VB/be public/NNP/public. numerous/JJ/numerous protocols/NNS/protocols also/RB/also have/VBP/have been/VBN/been developed/VBN/developed for/IN/for use/NN/use by/IN/by applications/NNS/applications /,/, but/CC/but then/RB/then the/DT/the applications/NNS/applications themselves/PRP/themselves must/MD/must be/VB/be coded/VBN/coded to/TO/to implement/VB/implement security/NN/security /./. where/WRB/where is/VBZ/is cryptographic/JJ/cryptographic protection/NN/protection best/JJS/best placed/VBN/placed in/IN/in a/DT/a protocol/NN/protocol stack/NN/stack in/IN/in general/JJ/general /,/, there/EX/there is/VBZ/is no/DT/no definitive/JJ/definitive answer/NNP/answer. on/IN/on the/DT/the one/CD/one hand/NN/hand /,/, more/RBR/more protocols/NNS/protocols benefit/VBP/benefit from/IN/from protections/NNS/protections placed/VBN/placed lower/JJR/lower in/IN/in the/DT/the stack/NNP/stack. for/IN/for example/NN/example /,/, since/IN/since ip/NN/ip packets/NNS/packets encapsulate/VBP/encapsulate tcp/NN/tcp packets/NNS/packets /,/, encryption/NN/encryption of/IN/of ip/NN/ip packets/NNS/packets /:/( using/VBG/using ipsec/NN/ipsec /,/, for/IN/for example/NN/example /:/) also/RB/also hides/VBZ/hides the/DT/the contents/NNS/contents of/IN/of the/DT/the encapsulated/VBN/encapsulated tcp/NN/tcp packets/NNP/packets. similarly/RB/similarly /,/, authenticators/NNS/authenticators on/IN/on ip/NN/ip packets/NNS/packets detect/VBP/detect the/DT/the modification/NN/modification of/IN/of contaii1.ed/JJ/contaii1.ed tcp/NN/tcp header/NN/header information/NN/information /./. on/IN/on the/DT/the other/JJ/other hand/NN/hand /,/, protection/NN/protection at/IN/at lower/JJR/lower layers/NNS/layers in/IN/in the/DT/the protocol/NN/protocol stack/NN/stack may/MD/may give/VB/give insufficient/NN/insufficient protection/NN/protection to/TO/to higher-layer/JJ/higher-layer protocols/NNP/protocols. for/IN/for example/NN/example /,/, an/DT/an application/NN/application server/NN/server that/WDT/that runs/VBZ/runs over/IN/over ipsec/NN/ipsec might/MD/might be/VB/be able/JJ/able to/TO/to authenticate/VB/authenticate the/DT/the client/NN/client computers/NNS/computers from/IN/from which/WDT/which requests/NNS/requests are/VBP/are received/NNP/received. however/RB/however /,/, to/TO/to authenticate/VB/authenticate a/DT/a user/NN/user at/IN/at a/DT/a client/NN/client computer/NN/computer /,/, the/DT/the server/NN/server may/MD/may need/VB/need to/TO/to use/VB/use an/DT/an application-level/JJ/application-level protocol-for/NN/protocol-for example/NN/example /,/, the/DT/the user/NN/user may/MD/may be/VB/be required/VBN/required to/TO/to type/NN/type a/DT/a password/NNP/password. also/RB/also consider/JJR/consider the/DT/the problem/NN/problem of/IN/of e-mail/NNP/e-mail. e-mail/JJ/e-mail delivered/VBN/delivered via/IN/via the/DT/the industry/NN/industry standard/NN/standard smtp/NN/smtp protocol/NN/protocol is/VBZ/is stored/VBN/stored and/CC/and forwarded/VBD/forwarded /,/, frequently/RB/frequently multiple/JJ/multiple times/NNS/times /,/, before/IN/before it/PRP/it is/VBZ/is delivered/NNP/delivered. each/DT/each of/IN/of these/DT/these transmissions/NNS/transmissions could/MD/could go/VB/go over/IN/over a/DT/a secure/NN/secure or/CC/or an/DT/an insecure/NN/insecure network/NNP/network. for/IN/for e-mail/JJ/e-mail to/TO/to be/VB/be secure/NN/secure /,/, the/DT/the e-mail/JJ/e-mail message/NN/message needs/VBZ/needs to/TO/to be/VB/be encrypted/VBN/encrypted so/RB/so that/IN/that its/PRP$/its security/NN/security is/VBZ/is independent/JJ/independent of/IN/of the/DT/the transports/NNS/transports that/WDT/that carry/VBP/carry it/PRP/it /./. 15.4.3/CD/15.4.3 an/DT/an example/NN/example /:/: ssl/NN/ssl ssl/NN/ssl 3.0/CD/3.0 is/VBZ/is a/DT/a cryptographic/JJ/cryptographic protocol/NN/protocol that/WDT/that enables/VBZ/enables two/CD/two computers/NNS/computers to/TO/to corrumjj1icate/NNP/corrumjj1icate securely-that/NNP/securely-that is/VBZ/is /,/, so/RB/so that/IN/that each/DT/each can/MD/can limit/VB/limit the/DT/the sender/NN/sender and/CC/and receiver/NN/receiver of/IN/of to/TO/to the/DT/the other/NNP/other. it/PRP/it is/VBZ/is perhaps/RB/perhaps the/DT/the most/RBS/most commonly/RB/commonly used/JJ/used cryptographic/JJ/cryptographic on/IN/on the/DT/the internet/NN/internet today/NN/today /,/, since/IN/since it/PRP/it is/VBZ/is the/DT/the standard/JJ/standard protocol/NN/protocol by/IN/by which/WDT/which web/NN/web communicate/VBP/communicate securely/RB/securely with/IN/with web/NN/web servers/NNP/servers. for/IN/for completeness/NN/completeness /,/, we/PRP/we should/MD/should note/VB/note that/IN/that ssl/NN/ssl was/VBD/was designed/VBN/designed by/IN/by netscape/NN/netscape and/CC/and that/IN/that it/PRP/it evolved/VBD/evolved into/IN/into the/DT/the industry/NN/industry standard/NN/standard tls/NNS/tls protocol/NNP/protocol. in/IN/in this/DT/this discussion/NN/discussion /,/, we/PRP/we use/VBP/use ssl/NN/ssl to/TO/to mean/VB/mean both/DT/both ssl/NN/ssl and/CC/and tls/NNS/tls /./. ssl/NN/ssl is/VBZ/is a/DT/a complex/JJ/complex protocol/NN/protocol with/IN/with many/JJ/many options/NNP/options. here/RB/here /,/, we/PRP/we present/VBP/present only/RB/only a/DT/a single/JJ/single variation/NN/variation of/IN/of it/PRP/it /,/, and/CC/and even/RB/even then/RB/then in/IN/in a/DT/a very/RB/very simplified/VBN/simplified and/CC/and abstract/NN/abstract form/NN/form /,/, so/RB/so as/IN/as to/TO/to maintain/VB/maintain focus/NN/focus on/IN/on its/PRP$/its use/NN/use of/IN/of cryptographic/JJ/cryptographic primitives/NNP/primitives. what/WP/what we/PRP/we are/VBP/are about/IN/about to/TO/to see/VB/see is/VBZ/is a/DT/a complex/JJ/complex dance/NN/dance in/IN/in which/WDT/which asymmetric/JJ/asymmetric cryptography/NN/cryptography is/VBZ/is used/VBN/used so/RB/so that/IN/that a/DT/a client/NN/client and/CC/and a/DT/a server/NN/server can/MD/can establish/VB/establish a/DT/a secure/NN/secure /:/) -cey/JJ/-cey that/IN/that can/MD/can be/VB/be used/VBN/used for/IN/for symmetric/JJ/symmetric encryption/NN/encryption of/IN/of the/DT/the session/NN/session between/IN/between the/DT/the two-all/JJ/two-all of/IN/of this/DT/this while/NN/while 648/CD/648 chapter/NN/chapter 15/CD/15 avoiding/VBG/avoiding man-in-the-middle/JJ/man-in-the-middle and/CC/and replay/NN/replay attacks/NNP/attacks. for/IN/for added/VBD/added cryptographic/JJ/cryptographic strength/NN/strength /,/, the/DT/the session/NN/session keys/NNS/keys are/VBP/are forgotten/VBN/forgotten once/RB/once a/DT/a session/NN/session is/VBZ/is completed/NNP/completed. another/DT/another communication/NN/communication between/IN/between the/DT/the two/CD/two will/MD/will generation/VB/generation of/IN/of new/JJ/new session/NN/session keys/NNS/keys /./. the/DT/the ssl/NN/ssl protocol/NN/protocol is/VBZ/is initiated/VBN/initiated by/IN/by a/DT/a c/NN/c to/TO/to communicate/VB/communicate securely/RB/securely with/IN/with a/DT/a prior/JJ/prior to/TO/to the/DT/the protocol/NN/protocol 's/POS/'s use/NN/use /,/, the/DT/the server/NN/server s/VBZ/s is/VBZ/is assumed/VBN/assumed to/TO/to have/VB/have obtained/VBN/obtained a/DT/a certificate/NN/certificate /,/, denoted/VBD/denoted cert/NN/cert /,/, from/IN/from certification/NN/certification authority/NN/authority ca/NNP/ca. this/DT/this certificate/NN/certificate is/VBZ/is a/DT/a structure/NN/structure containing/VBG/containing the/DT/the following/VBG/following /:/: various/JJ/various attributes/NNS/attributes attrs/NNS/attrs of/IN/of the/DT/the server/NN/server /,/, such/JJ/such as/IN/as its/PRP$/its unique/JJ/unique distinguished/JJ/distinguished name/NN/name and/CC/and its/PRP$/its common/JJ/common /NN/( dns/NNS/dns /:/) name/NN/name the/DT/the identity/NN/identity of/IN/of a/DT/a public/JJ/public encryption/NN/encryption algorithm/NN/algorithm e/NN/e /:/( /:/) for/IN/for the/DT/the server/NN/server the/DT/the public/NN/public key/JJ/key kc/NN/kc of/IN/of this/DT/this server/NN/server a/DT/a validity/NN/validity interval/NN/interval interval/NN/interval durirtg/NN/durirtg which/WDT/which the/DT/the certificate/NN/certificate should/MD/should be/VB/be considered/VBN/considered valid/JJ/valid a/DT/a digital/JJ/digital signature/NN/signature a/DT/a on/NN/on the/DT/the above/NN/above information/NN/information made/VBD/made by/IN/by theca-that/JJ/theca-that is/VBZ/is /,/, a/DT/a =/NN/= s/VBZ/s /:/( kca/NN/kca /:/) /:/( /:/( attrs/NNS/attrs /,/, e/VBP/e /:/( ke/NN/ke /:/) /,/, interval/NN/interval /:/) /:/) in/IN/in addition/NN/addition /,/, prior/RB/prior to/TO/to the/DT/the protocol/NN/protocol 's/POS/'s use/NN/use /,/, the/DT/the client/NN/client is/VBZ/is presumed/VBN/presumed to/TO/to have/VB/have obtained/VBN/obtained the/DT/the public/NN/public verification/NN/verification algorithm/NN/algorithm v/NN/v /:/( kca/NN/kca /:/) for/IN/for ca/NNP/ca. in/IN/in the/DT/the case/NN/case of/IN/of the/DT/the web/NN/web /,/, the/DT/the user/NN/user 's/POS/'s browser/NN/browser is/VBZ/is shipped/VBN/shipped from/IN/from its/PRP$/its vendor/NN/vendor containing/VBG/containing the/DT/the verification/NN/verification algorithms/NNS/algorithms and/CC/and public/JJ/public keys/NNS/keys of/IN/of certain/JJ/certain certification/NN/certification authorities/NNP/authorities. the/DT/the user/NN/user can/MD/can add/VB/add or/CC/or delete/VB/delete these/DT/these for/IN/for certification/NN/certification authorities/NNS/authorities as/IN/as she/PRP/she chooses/VBZ/chooses /./. when/WRB/when c/NN/c connects/VBZ/connects to/TO/to s/NNS/s 1/CD/1 it/PRP/it sends/VBZ/sends a/DT/a 28-byte/JJ/28-byte random/NN/random value/NN/value nc/NN/nc to/TO/to the/DT/the server/NN/server /,/, which/WDT/which responds/NNS/responds with/IN/with a/DT/a random/NN/random value/NN/value n5/NNP/n5 of/IN/of its/PRP$/its own/JJ/own /,/, plus/CC/plus its/PRP$/its certificate/NN/certificate cert5/NNP/cert5 the/DT/the client/NN/client verifies/NNS/verifies that/WDT/that v/NN/v /:/( kca/NN/kca /:/) /:/( /:/( attrs/NNS/attrs /,/, e/VBP/e /:/( lee/NN/lee /:/) /,/, interval/NN/interval /:/) /,/, a/DT/a /NN/) =/:/= true/JJ/true and/CC/and that/IN/that the/DT/the current/JJ/current time/NN/time is/VBZ/is in/IN/in the/DT/the validity/NN/validity interval/NN/interval interval/NNP/interval. if/IN/if both/DT/both of/IN/of these/DT/these tests/NNS/tests are/VBP/are satisfied/VBN/satisfied /,/, the/DT/the server/NN/server has/VBZ/has proved/VBN/proved its/PRP$/its identity/NNP/identity. then/RB/then the/DT/the client/NN/client generates/VBZ/generates a/DT/a random/NN/random 46-byte/JJ/46-byte and/CC/and sends/NNS/sends cpms/NNS/cpms =/VBP/= e/NN/e /:/( ks/NNS/ks /VBP/) /:/( pms/NNS/pms /VBP/) to/TO/to the/DT/the server/NNP/server. the/DT/the server/NN/server recovers/NNS/recovers pms/NNS/pms =/VBP/= d/JJ/d /NN/( kd/NN/kd /:/) /:/( cpms/NNS/cpms /VBP/) /./. now/RB/now both/DT/both the/DT/the client/NN/client and/CC/and the/DT/the server/NN/server are/VBP/are in/IN/in possession/NN/possession of/IN/of nc/NN/nc /,/, n5/NNP/n5 /,/, and/CC/and pms/NNS/pms /,/, and/CC/and each/DT/each can/MD/can cmnpute/VB/cmnpute a/DT/a shared/VBN/shared 48-byte/JJ/48-byte l/NN/l '/''/' ''/''/'' '/''/' c/NN/c f/NN/f /:/( nc/NN/nc /,/, 715/CD/715 /,/, pms/NNS/pms /:/) /,/, where/WRB/where f/NN/f is/VBZ/is a/DT/a one-way/JJ/one-way and/CC/and collision-resistant/JJ/collision-resistant function/NN/function /./. server/NN/server and/CC/and client/NN/client can/MD/can compute/VB/compute ms/NNS/ms /,/, since/IN/since only/RB/only they/PRP/they know/VBP/know pms/NNS/pms /./. dependence/NN/dependence of/IN/of ms/NNS/ms on/IN/on nc/NN/nc and/CC/and n5/NNP/n5 ensures/NNS/ensures that/WDT/that ms/VBZ/ms is/VBZ/is a/DT/a fresh/JJ/fresh value-that/JJ/value-that is/VBZ/is /,/, a/DT/a session/NN/session key/NN/key that/WDT/that has/VBZ/has not/RB/not been/VBN/been used/VBN/used in/IN/in a/DT/a previous/JJ/previous communication/NNP/communication. at/IN/at this/DT/this point/NN/point /,/, the/DT/the client/NN/client and/CC/and the/DT/the server/NN/server both/DT/both compute/NN/compute the/DT/the keys/NNS/keys the/DT/the ms/NNS/ms /:/: a/DT/a symmetric/JJ/symmetric encryption/NN/encryption key/JJ/key k/NN/k ~/:/~ /:/[ ypt/NN/ypt for/IN/for encrypting/NN/encrypting messages/NNS/messages from/IN/from to/TO/to the/DT/the server/NN/server client/NN/client a/DT/a symmetric/JJ/symmetric encryption/NN/encryption to/TO/to the/DT/the client/NN/client lc/NN/lc ~/:/~ rypt/NN/rypt for/IN/for encrypting/NN/encrypting messages/NNS/messages from/IN/from the/DT/the server/NN/server a/DT/a mac/NN/mac generation/NN/generation jc/NN/jc ~/:/~ ac/NN/ac generating/NN/generating authenticators/NNS/authenticators on/IN/on from/IN/from the/DT/the client/NN/client to/TO/to the/DT/the server/NN/server a/DT/a mac/NN/mac generation/NN/generation k/NN/k ~/:/~ ~/:/~ ac/NN/ac for/IN/for generating/NN/generating authenticators/NNS/authenticators on/IN/on from/IN/from the/DT/the server/NN/server to/TO/to the/DT/the to/TO/to send/VB/send a/DT/a message/NN/message m/NN/m to/TO/to the/DT/the server/NN/server /,/, the/DT/the client/NN/client sends/NNS/sends 15.5/CD/15.5 15.5/CD/15.5 649/CD/649 upon/IN/upon receiving/NN/receiving c/NN/c /,/, the/DT/the server/NN/server recovers/NNS/recovers /:/( m/NNP/m. a/DT/a /NNP/) =/NNP/= d/VBD/d /NNP/( jc/NN/jc ~/:/~ pt/NN/pt /:/) /:/( c/NN/c /:/) and/CC/and accepts/NNS/accepts m/VBP/m if/IN/if v/NN/v /:/( lc/NN/lc ~/:/~ ac/NN/ac /:/) /:/( m/NN/m /,/, a/DT/a /NN/) =/:/= true/NNP/true. similarly/RB/similarly /,/, to/TO/to send/VB/send a/DT/a message/NN/message m/NN/m to/TO/to the/DT/the client/NN/client /,/, the/DT/the server/NN/server sends/NNS/sends and/CC/and the/DT/the client/NN/client recovers/NNS/recovers and/CC/and accepts/NNS/accepts m/VBP/m if/IN/if v/NN/v /:/( k/NN/k ~/:/~ ac/NN/ac /:/) /:/( m/NN/m /,/, a/DT/a /NN/) =/:/= true/JJ/true /./. this/DT/this protocol/NN/protocol enables/VBZ/enables the/DT/the server/NN/server to/TO/to limit/VB/limit the/DT/the recipients/NNS/recipients of/IN/of its/PRP$/its messages/NNS/messages to/TO/to the/DT/the client/NN/client that/IN/that generated/VBN/generated pms/NNS/pms and/CC/and to/TO/to limit/VB/limit the/DT/the senders/NNS/senders of/IN/of the/DT/the messages/NNS/messages it/PRP/it accepts/VBZ/accepts to/TO/to that/DT/that same/JJ/same client/NNP/client. similarly/RB/similarly /,/, the/DT/the client/NN/client can/MD/can limit/VB/limit the/DT/the recipients/NNS/recipients of/IN/of the/DT/the messages/NNS/messages it/PRP/it sends/VBZ/sends and/CC/and the/DT/the senders/NNS/senders of/IN/of the/DT/the messages/NNS/messages it/PRP/it accepts/VBZ/accepts to/TO/to the/DT/the party/NN/party that/IN/that knows/VBZ/knows s/NNS/s /:/( kd/NN/kd /:/) /:/( that/IN/that is/VBZ/is /,/, the/DT/the party/NN/party that/IN/that can/MD/can decrypt/VB/decrypt cpms/NNS/cpms /:/) /./. in/IN/in many/JJ/many applications/NNS/applications /,/, such/JJ/such as/IN/as web/NN/web transactions/NNS/transactions /,/, the/DT/the client/NN/client needs/VBZ/needs to/TO/to verify/VB/verify the/DT/the identity/NN/identity of/IN/of the/DT/the party/NN/party that/IN/that knows/VBZ/knows s/NNS/s /:/( lcd/NN/lcd /:/) /./. this/DT/this is/VBZ/is one/CD/one purpose/NN/purpose of/IN/of the/DT/the certificate/NN/certificate cert5/NNP/cert5 ;/:/; in/IN/in particular/JJ/particular /,/, the/DT/the attrs/NNS/attrs field/NN/field contains/NNS/contains information/NN/information that/IN/that the/DT/the client/NN/client can/MD/can use/VB/use to/TO/to determine/VB/determine the/DT/the identityfor/NN/identityfor example/NN/example /,/, the/DT/the domain/NN/domain name-of/-NONE-/name-of the/DT/the server/NN/server with/IN/with which/WDT/which it/PRP/it is/VBZ/is communicating/VBG/communicating /./. for/IN/for applications/NNS/applications in/IN/in which/WDT/which the/DT/the server/NN/server also/RB/also needs/VBZ/needs information/NN/information about/IN/about the/DT/the client/NN/client /,/, ssl/NN/ssl supports/NNS/supports an/DT/an option/NN/option by/IN/by which/WDT/which a/DT/a client/NN/client can/MD/can send/VB/send a/DT/a certificate/NN/certificate to/TO/to the/DT/the server/NN/server /./. in/IN/in addition/NN/addition to/TO/to its/PRP$/its use/NN/use on/IN/on the/DT/the internet/NN/internet /,/, ssl/NN/ssl is/VBZ/is being/VBG/being used/VBN/used for/IN/for a/DT/a wide/JJ/wide variety/NN/variety of/IN/of tasks/NNP/tasks. for/IN/for example/NN/example /,/, ipsec/NN/ipsec vpns/NNS/vpns now/RB/now have/VBP/have a/DT/a competitor/NN/competitor in/IN/in ssl/NN/ssl vpns/NNP/vpns. ipsec/NN/ipsec is/VBZ/is good/JJ/good for/IN/for point-to-point/JJ/point-to-point encryption/NN/encryption of/IN/of traffic-say/JJ/traffic-say /,/, between/IN/between two/CD/two company/NN/company offices/NNP/offices. ssl/NN/ssl vpns/NNS/vpns are/VBP/are more/RBR/more flexible/JJ/flexible but/CC/but not/RB/not as/IN/as efficient/JJ/efficient /,/, so/RB/so they/PRP/they might/MD/might be/VB/be used/VBN/used between/IN/between an/DT/an individual/NN/individual employee/NN/employee working/VBG/working remotely/RB/remotely and/CC/and the/DT/the corporate/JJ/corporate office/NN/office /./. our/PRP$/our earlier/JJR/earlier discussion/NN/discussion of/IN/of authentication/NN/authentication involves/NNS/involves messages/NNS/messages and/CC/and sessions/NNP/sessions. but/CC/but what/WP/what about/IN/about users/NNS/users if/IN/if a/DT/a system/NN/system can/MD/can not/RB/not authenticate/VB/authenticate a/DT/a user/NN/user /,/, then/RB/then authenticating/VBG/authenticating that/IN/that a/DT/a message/NN/message can'le/JJ/can'le from/IN/from that/DT/that user/NN/user is/VBZ/is thus/RB/thus /,/, a/DT/a major/JJ/major security/NN/security problem/NN/problem for/IN/for operating/NN/operating systems/NNS/systems is/VBZ/is the/DT/the protection/NN/protection system/NN/system depends/NNS/depends on/IN/on the/DT/the ability/NN/ability to/TO/to identify/VB/identify the/DT/the programs/NNS/programs and/CC/and processes/NNS/processes currently/RB/currently executing/VBG/executing /,/, which/WDT/which in/IN/in turn/NN/turn depends/NNS/depends on/IN/on the/DT/the ability/NN/ability to/TO/to identify/VB/identify each/DT/each user/NN/user the/DT/the system/NNP/system. users/NNS/users identify/VBP/identify themselves/NNP/themselves. how/WRB/how do/VBP/do we/PRP/we determine/VB/determine a/DT/a user/NN/user 's/POS/'s is/VBZ/is authentic/JJ/authentic generally/RB/generally /,/, user/NN/user authentication/NN/authentication is/VBZ/is based/VBN/based on/IN/on one/CD/one or/CC/or more/JJR/more things/NNS/things /:/: the/DT/the user/NN/user 's/POS/'s possession/NN/possession of/IN/of something/NN/something /:/( a/DT/a or/CC/or card/NN/card /:/) /,/, the/DT/the user/NN/user 's/POS/'s of/IN/of something/NN/something user/NN/user identifier/NN/identifier and/CC/and password/NN/password /:/) /,/, an/DT/an attribute/NN/attribute retina/NN/retina or/CC/or signature/NN/signature /:/) /./. 15.5.1/CD/15.5.1 passwords/NNS/passwords the/DT/the most/JJS/most comm.on/JJ/comm.on when/WRB/when the/DT/the user/NN/user a/DT/a user/NN/user is/VBZ/is the/DT/the use/NN/use of/IN/of user/NN/user id/VBD/id or/CC/or account/NN/account name/NN/name /,/, she/PRP/she 650/CD/650 chapter/NN/chapter 15/CD/15 is/VBZ/is asked/VBN/asked for/IN/for a/DT/a password/NNP/password. i/PRP/i the/DT/the user-supplied/JJ/user-supplied password/NN/password matches/NNS/matches the/DT/the password/NN/password stored/VBD/stored in/IN/in the/DT/the system/NN/system /,/, the/DT/the system/NN/system assumes/VBZ/assumes that/IN/that the/DT/the account/NN/account is/VBZ/is being/VBG/being accessed/VBN/accessed by/IN/by the/DT/the owner/NN/owner of/IN/of that/DT/that account/NN/account /./. passwords/NNS/passwords are/VBP/are often/RB/often used/VBN/used to/TO/to protect/VB/protect objects/NNS/objects in/IN/in the/DT/the computer/NN/computer system/NN/system /,/, in/IN/in the/DT/the absence/NN/absence of/IN/of more/JJR/more complete/JJ/complete protection/NN/protection schemes/NNP/schemes. they/PRP/they can/MD/can be/VB/be considered/VBN/considered a/DT/a special/JJ/special case/NN/case of/IN/of either/DT/either keys/NNS/keys or/CC/or capabilities/NNP/capabilities. for/IN/for instance/NN/instance /,/, a/DT/a password/NN/password may/MD/may be/VB/be associated/VBN/associated with/IN/with each/DT/each resource/NN/resource /:/( such/JJ/such as/IN/as a/DT/a file/NN/file /:/) /./. whenever/NN/whenever a/DT/a request/NN/request is/VBZ/is made/VBN/made to/TO/to use/VB/use the/DT/the resource/NN/resource /,/, the/DT/the password/NN/password nmst/NN/nmst be/VB/be given/NNP/given. if/IN/if the/DT/the password/NN/password is/VBZ/is correct/JJ/correct /,/, access/NN/access is/VBZ/is granted/NNP/granted. different/JJ/different passwords/NNS/passwords may/MD/may be/VB/be associated/VBN/associated with/IN/with different/JJ/different access/NN/access rights/NNS/rights /./. for/IN/for example/NN/example /,/, different/JJ/different passwords/NNS/passwords may/MD/may be/VB/be used/VBN/used for/IN/for reading/NN/reading files/NNS/files /,/, appending/VBG/appending files/NNS/files /,/, and/CC/and updating/VBG/updating files/NNS/files /./. in/IN/in practice/NN/practice /,/, most/JJS/most systems/NNS/systems require/VBP/require only/RB/only one/CD/one password/NN/password for/IN/for a/DT/a user/NN/user to/TO/to gain/VB/gain full/JJ/full rights/NNP/rights. although/IN/although more/JJR/more passwords/NNS/passwords theoretically/RB/theoretically would/MD/would be/VB/be more/RBR/more secure/JJ/secure /,/, such/JJ/such systems/NNS/systems tend/VBP/tend not/RB/not to/TO/to be/VB/be implemented/VBN/implemented due/JJ/due to/TO/to the/DT/the classic/JJ/classic trade-off/NN/trade-off between/IN/between security/NN/security and/CC/and convenience/NNP/convenience. if/IN/if security/NN/security makes/VBZ/makes something/NN/something inconvenient/NN/inconvenient then/RB/then the/DT/the security/NN/security is/VBZ/is frequently/RB/frequently bypassed/VBN/bypassed or/CC/or otherwise/RB/otherwise circumvented/VBN/circumvented /./. 15.5.2/CD/15.5.2 password/NN/password vulnerabilities/NNS/vulnerabilities passwords/NNS/passwords are/VBP/are extremely/RB/extremely common/JJ/common because/IN/because they/PRP/they are/VBP/are easy/JJ/easy to/TO/to understand/VB/understand and/CC/and use/VB/use /./. unfortunately/RB/unfortunately /,/, passwords/NNS/passwords can/MD/can often/RB/often be/VB/be guessed/VBN/guessed /,/, accidentally/RB/accidentally exposed/VBN/exposed /,/, sniffed/VBN/sniffed /,/, or/CC/or illegally/RB/illegally transferred/VBN/transferred from/IN/from an/DT/an authorized/JJ/authorized user/NN/user to/TO/to an/DT/an unauthorized/JJ/unauthorized one/CD/one /,/, as/IN/as we/PRP/we show/VBP/show next/JJ/next /./. there/EX/there are/VBP/are two/CD/two common/JJ/common ways/NNS/ways to/TO/to guess/NN/guess a/DT/a password/NNP/password. one/CD/one way/NN/way is/VBZ/is for/IN/for the/DT/the intruder/NN/intruder /:/( either/DT/either human/NN/human or/CC/or program/NN/program /:/) to/TO/to know/VB/know the/DT/the user/NN/user or/CC/or to/TO/to have/VB/have information/NN/information about/IN/about the/DT/the user/NNP/user. all/DT/all too/RB/too frequently/RB/frequently /,/, people/NNS/people use/VBP/use obvious/JJ/obvious information/NN/information /:/( such/JJ/such as/IN/as the/DT/the names/NNS/names of/IN/of their/PRP$/their cats/NNS/cats or/CC/or spouses/NNS/spouses /:/) as/IN/as their/PRP$/their passwords/NNP/passwords. the/DT/the other/JJ/other way/NN/way is/VBZ/is to/TO/to use/VB/use brute/NN/brute force/NN/force /,/, trying/VBG/trying enumeration-or/JJ/enumeration-or all/DT/all possible/JJ/possible combinations/NNS/combinations of/IN/of valid/JJ/valid password/NN/password characters/NNS/characters /:/( letters/NNS/letters /,/, numbers/NNS/numbers /,/, and/CC/and punctuation/NN/punctuation on/IN/on some/DT/some systems/NNS/systems /VBP/) -until/JJ/-until the/DT/the password/NN/password is/VBZ/is found/NNP/found. short/RB/short passwords/VBZ/passwords are/VBP/are especially/RB/especially vulnerable/JJ/vulnerable to/TO/to this/DT/this method/NN/method /./. for/IN/for example/NN/example /,/, a/DT/a four-character/JJ/four-character password/NN/password provides/VBZ/provides only/RB/only 10,000/CD/10,000 variations/NNP/variations. on/IN/on average/JJ/average /,/, guessing/VBG/guessing 5,000/CD/5,000 times/NNS/times would/MD/would produce/VB/produce a/DT/a correct/NN/correct hit/NNP/hit. a/DT/a program/NN/program that/WDT/that could/MD/could try/VB/try a/DT/a password/NN/password every/DT/every millisecond/NN/millisecond would/MD/would take/VB/take only/RB/only about/IN/about 5/CD/5 seconds/NNS/seconds to/TO/to guess/NN/guess a/DT/a four-character/JJ/four-character password/NNP/password. enumeration/NN/enumeration is/VBZ/is less/JJR/less successful/JJ/successful where/WRB/where systems/NNS/systems allow/VBP/allow longer/JJR/longer passwords/NNS/passwords that/WDT/that include/VBP/include both/DT/both uppercase/NN/uppercase and/CC/and lowercase/NN/lowercase letters/NNS/letters /,/, along/IN/along with/IN/with numbers/NNS/numbers and/CC/and all/DT/all punctuation/NN/punctuation characters/NNP/characters. of/IN/of course/NN/course /,/, users/NNS/users must/MD/must take/VB/take advantage/NN/advantage of/IN/of the/DT/the large/JJ/large password/NN/password space/NN/space and/CC/and must/MD/must not/RB/not /,/, for/IN/for example/NN/example /,/, use/NN/use only/RB/only lowercase/VB/lowercase letters/NNS/letters /./. in/IN/in addition/NN/addition to/TO/to being/VBG/being guessed/VBN/guessed /,/, passwords/NNS/passwords can/MD/can be/VB/be exposed/VBN/exposed as/IN/as a/DT/a result/NN/result of/IN/of visual/JJ/visual or/CC/or electronic/JJ/electronic monitoring/NNP/monitoring. an/DT/an intruder/NN/intruder can/MD/can look/VB/look over/IN/over the/DT/the shoulder/NN/shoulder of/IN/of a/DT/a user/NN/user when/WRB/when the/DT/the user/NN/user is/VBZ/is logging/VBG/logging iil/NN/iil and/CC/and can/MD/can learn/VB/learn the/DT/the password/NN/password easily/RB/easily by/IN/by watching/NN/watching the/DT/the keyboard/NNP/keyboard. alternatively/RB/alternatively /,/, anyone/NN/anyone with/IN/with access/NN/access to/TO/to the/DT/the network/NN/network on/IN/on which/WDT/which a/DT/a computer/NN/computer resides/VBZ/resides can/MD/can seamlessly/RB/seamlessly add/VB/add a/DT/a network/NN/network monitor/NN/monitor /,/, allowing/VBG/allowing him/PRP/him to/TO/to watch/VB/watch all/DT/all data/NNS/data being/VBG/being transferred/VBN/transferred on/IN/on the/DT/the network/NN/network including/VBG/including user/NN/user ids/NNS/ids and/CC/and passwords/NNP/passwords. encrypting/NN/encrypting the/DT/the data/NNS/data stream/VBP/stream containing/VBG/containing the/DT/the password/NN/password solves/VBZ/solves this/DT/this problem/NNP/problem. even/RB/even such/JJ/such a/DT/a system/NN/system could/MD/could have/VB/have passwords/NNS/passwords stolen/VBN/stolen /,/, however/NNP/however. for/IN/for example/NN/example /,/, if/IN/if a/DT/a file/NN/file is/VBZ/is used/VBN/used to/TO/to contain/VB/contain the/DT/the passwords/NNS/passwords /,/, it/PRP/it could/MD/could be/VB/be copied/VBN/copied for/IN/for off-system/JJ/off-system analysis/NNP/analysis. or/CC/or consider/JJR/consider a/DT/a trojan-horse/JJ/trojan-horse program/NN/program installed/VBN/installed on/IN/on the/DT/the system/NN/system that/IN/that captures/NNS/captures every/DT/every keystroke/NN/keystroke before/IN/before sending/VBG/sending it/PRP/it on/IN/on to/TO/to the/DT/the application/NN/application /./. 15.5/CD/15.5 651/CD/651 exposure/NN/exposure is/VBZ/is a/DT/a particularly/RB/particularly severe/JJ/severe problem/NN/problem if/IN/if the/DT/the password/NN/password is/VBZ/is written/VBN/written down/RP/down where/WRB/where it/PRP/it can/MD/can be/VB/be read/VBN/read or/CC/or lost/NNP/lost. as/IN/as we/PRP/we shall/MD/shall see/VB/see /,/, some/DT/some systems/NNS/systems force/VBP/force users/NNS/users to/TO/to select/VB/select hard-to-remember/JJ/hard-to-remember or/CC/or long/RB/long passwords/NNS/passwords /,/, which/WDT/which may/MD/may cause/VB/cause a/DT/a user/NN/user to/TO/to record/VB/record the/DT/the password/NN/password or/CC/or to/TO/to reuse/VB/reuse it/NNP/it. as/IN/as a/DT/a result/NN/result /,/, such/JJ/such systems/NNS/systems provide/VBP/provide much/JJ/much less/NN/less security/NN/security than/IN/than systems/NNS/systems that/WDT/that allow/VBP/allow users/NNS/users to/TO/to select/VB/select easy/JJ/easy passwords/NNS/passwords !/./! the/DT/the final/JJ/final type/NN/type of/IN/of password/NN/password compromise/NN/compromise /,/, illegal/JJ/illegal transfer/NN/transfer /,/, is/VBZ/is the/DT/the result/NN/result of/IN/of human/NN/human nature/NNP/nature. most/JJS/most computer/NN/computer installations/NNS/installations have/VBP/have a/DT/a rule/NN/rule that/WDT/that forbids/VBZ/forbids users/NNS/users to/TO/to share/VB/share accounts/NNP/accounts. this/DT/this rule/NN/rule is/VBZ/is sometimes/RB/sometimes implemented/VBN/implemented for/IN/for accounting/NN/accounting reasons/NNS/reasons but/CC/but is/VBZ/is often/RB/often aimed/VBN/aimed at/IN/at improving/NN/improving security/NNP/security. for/IN/for instance/NN/instance /,/, suppose/NN/suppose one/CD/one user/NN/user id/VBD/id is/VBZ/is shared/VBN/shared by/IN/by several/JJ/several users/NNS/users /,/, and/CC/and a/DT/a security/NN/security breach/NN/breach occurs/NNS/occurs from/IN/from that/DT/that user/NN/user id/NNP/id. it/PRP/it is/VBZ/is impossible/JJ/impossible to/TO/to know/VB/know who/WP/who was/VBD/was using/VBG/using the/DT/the id/NN/id at/IN/at the/DT/the time/NN/time the/DT/the break/NN/break occurred/VBD/occurred or/CC/or even/RB/even whether/IN/whether the/DT/the user/NN/user was/VBD/was an/DT/an authorized/VBN/authorized one/NNP/one. with/IN/with one/CD/one user/NN/user per/IN/per user/NN/user id/VBD/id /,/, any/DT/any user/NN/user can/MD/can be/VB/be questioned/VBN/questioned directly/RB/directly about/IN/about use/NN/use of/IN/of the/DT/the account/NN/account ;/:/; in/IN/in addition/NN/addition /,/, the/DT/the user/NN/user might/MD/might notice/VB/notice something/NN/something different/JJ/different about/IN/about the/DT/the account/NN/account and/CC/and detect/VB/detect the/DT/the break-in/NNP/break-in. sometimes/RB/sometimes /,/, users/NNS/users break/VBP/break account-sharing/JJ/account-sharing rules/NNS/rules to/TO/to help/VB/help friends/NNS/friends or/CC/or to/TO/to circumvent/NN/circumvent accounting/VBG/accounting /,/, and/CC/and this/DT/this behavior/NN/behavior can/MD/can result/VB/result in/IN/in a/DT/a system/NN/system 's/POS/'s being/VBG/being accessed/VBN/accessed by/IN/by unauthorized/JJ/unauthorized users/NNS/users -possibly/RB/-possibly harmful/JJ/harmful ones/NNS/ones /./. passwords/NNS/passwords can/MD/can be/VB/be either/RB/either generated/VBN/generated by/IN/by the/DT/the system/NN/system or/CC/or selected/VBN/selected by/IN/by a/DT/a user/NN/user /./. system-generated/JJ/system-generated passwords/NNS/passwords may/MD/may be/VB/be difficult/JJ/difficult to/TO/to remember/VB/remember /,/, and/CC/and thus/RB/thus users/NNS/users may/MD/may write/VB/write them/PRP/them down/NNP/down. as/IN/as mentioned/VBN/mentioned /,/, however/RB/however /,/, user-selected/JJ/user-selected passwords/NNS/passwords are/VBP/are often/RB/often easy/JJ/easy to/TO/to guess/NN/guess /:/( the/DT/the user/NN/user 's/POS/'s name/NN/name or/CC/or favorite/JJ/favorite car/NN/car /,/, for/IN/for example/NN/example /:/) /./. some/DT/some systems/NNS/systems will/MD/will check/VB/check a/DT/a proposed/VBN/proposed password/NN/password for/IN/for ease/NN/ease of/IN/of guessing/NN/guessing or/CC/or cracking/VBG/cracking before/IN/before accepting/VBG/accepting it/PRP/it /./. at/IN/at some/DT/some sites/NNS/sites /,/, administrators/NNS/administrators occasionally/RB/occasionally check/VBP/check user/NN/user passwords/NNS/passwords and/CC/and notify/VB/notify a/DT/a user/NN/user if/IN/if his/PRP$/his password/NN/password is/VBZ/is easy/JJ/easy to/TO/to guess/NNP/guess. some/DT/some systems/NNS/systems also/RB/also age/NN/age passwords/NNS/passwords /,/, forcing/JJ/forcing users/NNS/users to/TO/to change/VB/change their/PRP$/their passwords/NNS/passwords at/IN/at regular/JJ/regular intervals/NNS/intervals /:/( every/DT/every three/CD/three months/NNS/months /,/, for/IN/for instance/NN/instance /:/) /./. this/DT/this method/NN/method is/VBZ/is not/RB/not foolproof/IN/foolproof either/DT/either /,/, because/IN/because users/NNS/users can/MD/can easily/RB/easily toggle/VB/toggle between/IN/between two/CD/two passwords/NNP/passwords. the/DT/the solution/NN/solution /,/, as/IN/as implemented/VBN/implemented on/IN/on some/DT/some systems/NNS/systems /,/, is/VBZ/is to/TO/to record/VB/record a/DT/a password/NN/password history/NN/history for/IN/for each/DT/each user/NNP/user. for/IN/for instance/NN/instance /,/, the/DT/the system/NN/system could/MD/could record/VB/record the/DT/the last/JJ/last n/NN/n passwords/NNS/passwords and/CC/and not/RB/not allow/VB/allow their/PRP$/their reuse/NN/reuse /./. several/JJ/several variants/NNS/variants on/IN/on these/DT/these simple/JJ/simple password/NN/password schemes/NNS/schemes can/MD/can be/VB/be used/NNP/used. for/IN/for example/NN/example /,/, the/DT/the password/NN/password can/MD/can be/VB/be changed/VBN/changed more/RBR/more frequently/NNP/frequently. in/IN/in the/DT/the extren/NN/extren /:/: 1e/JJ/1e /,/, the/DT/the password/NN/password is/VBZ/is changed/VBN/changed from/IN/from session/NN/session to/TO/to session/NNP/session. a/DT/a new/JJ/new password/NN/password is/VBZ/is selected/VBN/selected /-NONE-/( either/RB/either by/IN/by the/DT/the system/NN/system or/CC/or by/IN/by the/DT/the user/NN/user /:/) at/IN/at the/DT/the end/NN/end of/IN/of each/DT/each session/NN/session /,/, and/CC/and that/IN/that password/NN/password must/MD/must be/VB/be used/VBN/used for/IN/for the/DT/the next/JJ/next session/NNP/session. in/IN/in such/JJ/such a/DT/a case/NN/case /,/, even/RB/even if/IN/if a/DT/a password/NN/password is/VBZ/is misused/VBN/misused /,/, it/PRP/it can/MD/can be/VB/be used/VBN/used only/RB/only once/NNP/once. when/WRB/when the/DT/the legitimate/NN/legitimate user/NN/user tries/NNS/tries to/TO/to use/VB/use a/DT/a now-invalid/JJ/now-invalid password/NN/password at/IN/at the/DT/the next/JJ/next session/NN/session /,/, he/PRP/he discovers/VBZ/discovers the/DT/the security/NN/security violation/NNP/violation. steps/VBZ/steps can/MD/can then/RB/then be/VB/be taken/VBN/taken to/TO/to repair/VB/repair the/DT/the breached/JJ/breached security/NN/security /./. 15.5.3/CD/15.5.3 encrypted/VBD/encrypted passwords/NNS/passwords one/CD/one problem/NN/problem with/IN/with all/DT/all these/DT/these approaches/NNS/approaches is/VBZ/is the/DT/the difficulty/NN/difficulty of/IN/of keeping/VBG/keeping the/DT/the password/NN/password secret/NN/secret within/IN/within the/DT/the computer/NNP/computer. how/WRB/how can/MD/can the/DT/the system/NN/system store/NN/store a/DT/a password/NN/password securely/RB/securely yet/RB/yet allow/VBP/allow its/PRP$/its use/NN/use for/IN/for authentication/NN/authentication when/WRB/when the/DT/the user/NN/user presents/NNS/presents her/PRP$/her password/NN/password the/DT/the unix/NN/unix system/NN/system uses/NNS/uses encryption/NN/encryption to/TO/to avoid/VB/avoid the/DT/the necessity/NN/necessity of/IN/of keeping/VBG/keeping its/PRP$/its password/NN/password list/NN/list secret/NNP/secret. each/DT/each user/NN/user has/VBZ/has a/DT/a password/NNP/password. the/DT/the system/NN/system contains/VBZ/contains a/DT/a function/NN/function that/WDT/that is/VBZ/is extremely/RB/extremely difficult-the/JJ/difficult-the designers/NNS/designers hope/VBP/hope impossible-to/JJ/impossible-to invert/NN/invert but/CC/but is/VBZ/is simple/JJ/simple to/TO/to compute/NNP/compute. that/IN/that is/VBZ/is /,/, given/VBN/given a/DT/a value/NN/value x/NN/x /,/, it/PRP/it is/VBZ/is easy/JJ/easy to/TO/to compute/VB/compute the/DT/the function/NN/function value/NN/value f/NN/f /:/( x/NN/x /:/) /./. given/VBN/given a/DT/a function/NN/function value/NN/value j/NN/j /:/( x/NN/x /:/) /,/, however/RB/however /,/, it/PRP/it is/VBZ/is impossible/JJ/impossible to/TO/to compute/VB/compute x/NNP/x. this/DT/this function/NN/function is/VBZ/is used/VBN/used to/TO/to encode/VB/encode all/DT/all passwords/NNP/passwords. only/RB/only encoded/VBD/encoded passwords/NNS/passwords are/VBP/are stored/VBN/stored /./. when/WRB/when a/DT/a user/NN/user presents/NNS/presents a/DT/a password/NN/password /,/, it/PRP/it is/VBZ/is encoded/VBN/encoded and/CC/and compared/VBN/compared against/IN/against the/DT/the 652/CD/652 chapter/NN/chapter 15/CD/15 stored/VBD/stored encoded/VBN/encoded password/NNP/password. even/RB/even if/IN/if the/DT/the stored/VBN/stored encoded/VBN/encoded password/NN/password is/VBZ/is seen/VBN/seen /,/, it/PRP/it cam1ot/NNP/cam1ot be/VB/be decoded/VBN/decoded /,/, so/RB/so the/DT/the password/NN/password can/MD/can not/RB/not be/VB/be determined/NNP/determined. thus/RB/thus /,/, the/DT/the password/NN/password file/NN/file does/VBZ/does not/RB/not need/VBP/need to/TO/to be/VB/be kept/VBN/kept secret/NNP/secret. the/DT/the functionf/NN/functionf /:/( x/NN/x /:/) is/VBZ/is typically/RB/typically an/DT/an encryption/NN/encryption algorithm/NN/algorithm that/WDT/that has/VBZ/has been/VBN/been designed/VBN/designed and/CC/and tested/VBN/tested rigorously/RB/rigorously /./. the/DT/the flaw/NN/flaw in/IN/in this/DT/this method/NN/method is/VBZ/is that/IN/that the/DT/the system/NN/system no/DT/no longer/NN/longer has/VBZ/has control/NN/control over/IN/over the/DT/the passwords/NNP/passwords. although/IN/although the/DT/the passwords/NNS/passwords are/VBP/are encrypted/VBN/encrypted /,/, anyone/NN/anyone with/IN/with a/DT/a copy/NN/copy of/IN/of the/DT/the password/NN/password file/NN/file can/MD/can run/VB/run fast/JJ/fast encryption/NN/encryption routines/NNS/routines against/IN/against it-encrypting/JJ/it-encrypting each/DT/each word/NN/word in/IN/in a/DT/a dictionary/JJ/dictionary /,/, for/IN/for instance/NN/instance /,/, and/CC/and comparing/VBG/comparing the/DT/the results/NNS/results against/IN/against the/DT/the passwords/NNP/passwords. if/IN/if the/DT/the user/NN/user has/VBZ/has selected/VBN/selected a/DT/a password/NN/password that/WDT/that is/VBZ/is also/RB/also a/DT/a word/NN/word in/IN/in the/DT/the dictionary/JJ/dictionary /,/, the/DT/the password/NN/password is/VBZ/is cracked/NNP/cracked. on/IN/on sufficiently/RB/sufficiently fast/JJ/fast computers/NNS/computers /,/, or/CC/or even/RB/even on/IN/on clusters/NNS/clusters of/IN/of slow/JJ/slow computers/NNS/computers /,/, such/JJ/such a/DT/a comparison/NN/comparison may/MD/may take/VB/take only/RB/only a/DT/a few/JJ/few hours/NNS/hours /./. furthermore/NN/furthermore /,/, because/IN/because unix/NN/unix systems/NNS/systems use/VBP/use a/DT/a well-known/JJ/well-known encryption/NN/encryption algorithm/NN/algorithm /,/, a/DT/a cracker/NN/cracker might/MD/might keep/VB/keep a/DT/a cache/NN/cache of/IN/of passwords/NNS/passwords that/WDT/that have/VBP/have been/VBN/been cracked/VBN/cracked previously/RB/previously /./. for/IN/for these/DT/these reasons/NNS/reasons /,/, new/JJ/new versions/NNS/versions of/IN/of unix/NN/unix store/NN/store the/DT/the encrypted/VBN/encrypted password/NN/password entries/NNS/entries in/IN/in a/DT/a file/NN/file readable/JJ/readable only/RB/only by/IN/by the/DT/the the/DT/the programs/NNS/programs that/WDT/that compare/NN/compare a/DT/a presented/JJ/presented password/NN/password to/TO/to the/DT/the stored/VBN/stored password/NN/password run/VBN/run setuid/NN/setuid to/TO/to root/VB/root ;/:/; so/RB/so they/PRP/they can/MD/can read/VB/read this/DT/this file/NN/file /,/, but/CC/but other/JJ/other users/NNS/users can/MD/can not/NNP/not. they/PRP/they also/RB/also include/VBP/include a/DT/a salt/NN/salt /,/, or/CC/or recorded/VBN/recorded random/NN/random number/NN/number /,/, in/IN/in the/DT/the encryption/NN/encryption algorithm/NNP/algorithm. the/DT/the salt/NN/salt is/VBZ/is added/VBN/added to/TO/to the/DT/the password/NN/password to/TO/to ensure/VB/ensure that/IN/that if/IN/if two/CD/two plaintext/JJ/plaintext passwords/NNS/passwords are/VBP/are the/DT/the same/JJ/same /,/, they/PRP/they result/VBP/result in/IN/in different/JJ/different ciphertexts/NNS/ciphertexts /./. another/DT/another weakness/NN/weakness in/IN/in the/DT/the unix/NN/unix password/NN/password methods/NNS/methods is/VBZ/is that/IN/that many/JJ/many unix/NN/unix systems/NNS/systems treat/VBP/treat only/RB/only the/DT/the first/JJ/first eight/CD/eight characters/NNS/characters as/IN/as significant/NNP/significant. it/PRP/it is/VBZ/is therefore/RB/therefore extremely/RB/extremely important/JJ/important for/IN/for users/NNS/users to/TO/to take/VB/take advantage/NN/advantage of/IN/of the/DT/the available/JJ/available password/NN/password space/NNP/space. to/TO/to avoid/VB/avoid the/DT/the dictionary/JJ/dictionary encryption/NN/encryption method/NN/method /,/, some/DT/some systems/NNS/systems disallow/VBP/disallow the/DT/the use/NN/use of/IN/of dictionary/JJ/dictionary words/NNS/words as/IN/as passwords/NNP/passwords. a/DT/a good/JJ/good technique/NN/technique is/VBZ/is to/TO/to generate/VB/generate your/PRP$/your password/NN/password by/IN/by using/VBG/using the/DT/the first/JJ/first letter/NN/letter of/IN/of each/DT/each word/NN/word of/IN/of an/DT/an easily/RB/easily remembered/VBN/remembered phrase/NN/phrase using/VBG/using both/DT/both upper/NN/upper and/CC/and lower/JJR/lower characters/NNS/characters with/IN/with a/DT/a number/NN/number or/CC/or punctuation/NN/punctuation mark/NN/mark thrown/NN/thrown in/IN/in for/IN/for good/NN/good measure/NNP/measure. for/IN/for example/NN/example /,/, the/DT/the phrase/NN/phrase my/PRP$/my mother/NN/mother 's/POS/'s name/NN/name is/VBZ/is katherine/NN/katherine might/MD/might yield/VB/yield the/DT/the password/NN/password mmn.isk/NN/mmn.isk !/./! /./. the/DT/the password/NN/password is/VBZ/is hard/JJ/hard to/TO/to crack/VB/crack but/CC/but easy/JJ/easy for/IN/for the/DT/the user/NN/user to/TO/to remember/VB/remember /./. 15.5.4/CD/15.5.4 one-time/JJ/one-time passwords/NNS/passwords to/TO/to avoid/VB/avoid the/DT/the problems/NNS/problems of/IN/of password/NN/password sniffing/VBG/sniffing and/CC/and shoulder/NN/shoulder surfing/VBG/surfing /,/, a/DT/a system/NN/system could/MD/could use/VB/use a/DT/a set/NN/set of/IN/of paired/VBN/paired when/WRB/when a/DT/a session/NN/session begins/VBZ/begins /,/, the/DT/the system/NN/system randomly/RB/randomly selects/VBZ/selects and/CC/and presents/NNS/presents one/CD/one part/NN/part of/IN/of a/DT/a password/NN/password pair/NN/pair ;/:/; the/DT/the user/NN/user must/MD/must supply/RB/supply the/DT/the other/JJ/other part/NNP/part. in/IN/in this/DT/this system/NN/system /,/, the/DT/the user/NN/user is/VBZ/is challenged/VBN/challenged and/CC/and must/MD/must with/IN/with the/DT/the correct/JJ/correct answer/NN/answer to/TO/to that/DT/that challenge/NN/challenge /./. this/DT/this approach/NN/approach can/MD/can be/VB/be generalized/VBN/generalized to/TO/to the/DT/the use/NN/use of/IN/of an/DT/an algorithm/NN/algorithm as/IN/as a/DT/a password/NN/password /./. the/DT/the algorithm/NN/algorithm might/MD/might be/VB/be an/DT/an integer/NN/integer function/NN/function /,/, for/IN/for example/NNP/example. the/DT/the system/NN/system selects/VBZ/selects a/DT/a random/NN/random integer/NN/integer and/CC/and presents/NNS/presents it/PRP/it to/TO/to the/DT/the user/NNP/user. the/DT/the user/NN/user applies/NNS/applies a/DT/a function/NN/function and/CC/and replies/NNS/replies with/IN/with the/DT/the correct/JJ/correct result/NNP/result. the/DT/the system/NN/system also/RB/also applies/VBZ/applies the/DT/the function/NNP/function. if/IN/if the/DT/the two/CD/two results/NNS/results match/VBP/match /,/, access/NN/access is/VBZ/is allowed/VBN/allowed /./. such/JJ/such algorithmic/JJ/algorithmic passwords/NNS/passwords are/VBP/are not/RB/not susceptible/JJ/susceptible to/TO/to reuse/VB/reuse ;/:/; that/DT/that is/VBZ/is /,/, a/DT/a user/NN/user can/MD/can type/VB/type in/IN/in a/DT/a password/NN/password /,/, and/CC/and no/DT/no entity/NN/entity intercepting/VBG/intercepting that/IN/that password/NN/password will/MD/will be/VB/be able/JJ/able to/TO/to reuse/VB/reuse it/NNP/it. in/IN/in this/DT/this scheme/NN/scheme /,/, the/DT/the system/NN/system and/CC/and the/DT/the user/NN/user share/NN/share a/DT/a secret/NNP/secret. the/DT/the secret/NN/secret is/VBZ/is never/RB/never transmitted/VBN/transmitted over/IN/over a/DT/a medium/NN/medium that/WDT/that allows/VBZ/allows exposure/NNP/exposure. rather/RB/rather /,/, the/DT/the secret/NN/secret is/VBZ/is used/VBN/used as/RB/as input/VBN/input to/TO/to the/DT/the function/NN/function /,/, along/IN/along with/IN/with a/DT/a shared/VBN/shared seed/NNP/seed. a/DT/a is/VBZ/is a/DT/a random/NN/random number/NN/number or/CC/or alphanumeric/JJ/alphanumeric sequence/NNP/sequence. the/DT/the seed/NN/seed is/VBZ/is the/DT/the authentication/NN/authentication challenge/NN/challenge from/IN/from the/DT/the computer/NNP/computer. the/DT/the secret/NN/secret and/CC/and the/DT/the seed/NN/seed are/VBP/are used/VBN/used as/IN/as input/NN/input to/TO/to the/DT/the function/NN/function f/NN/f /:/( secret/NN/secret /,/, seed/VBD/seed /:/) /./. the/DT/the result/NN/result of/IN/of this/DT/this function/NN/function is/VBZ/is transmitted/VBN/transmitted as/RB/as the/DT/the password/NN/password to/TO/to the/DT/the 15.5/CD/15.5 653/CD/653 computer/NNP/computer. becallse/NN/becallse the/DT/the computer/NN/computer also/RB/also knows/VBZ/knows the/DT/the secret/NN/secret and/CC/and the/DT/the seed/NN/seed /,/, it/PRP/it can/MD/can perform/VB/perform the/DT/the same/JJ/same computation/NNP/computation. if/IN/if the/DT/the results/NNS/results match/VBP/match /,/, the/DT/the user/NN/user is/VBZ/is authenticated/VBN/authenticated /./. the/DT/the next/JJ/next time/NN/time the/DT/the user/NN/user needs/VBZ/needs to/TO/to be/VB/be authenticated/VBN/authenticated /,/, another/DT/another seed/NN/seed is/VBZ/is generated/VBN/generated /,/, and/CC/and the/DT/the same/JJ/same ensue/NNP/ensue. this/DT/this time/NN/time /,/, the/DT/the password/NN/password is/VBZ/is different/JJ/different /./. in/IN/in this/DT/this system/NN/system /,/, the/DT/the password/NN/password is/VBZ/is different/JJ/different in/IN/in each/DT/each instance/NNP/instance. anyone/NN/anyone capturing/VBG/capturing the/DT/the password/NN/password from/IN/from one/CD/one session/NN/session and/CC/and trying/VBG/trying to/TO/to reuse/VB/reuse it/PRP/it in/IN/in another/DT/another session/NN/session will/MD/will fail/VB/fail one-time/JJ/one-time passwords/NNS/passwords are/VBP/are among/IN/among the/DT/the only/JJ/only ways/NNS/ways to/TO/to prevent/VB/prevent improper/JJ/improper authentication/NN/authentication clue/NN/clue to/TO/to password/VB/password exposure/NN/exposure /./. one-time/JJ/one-time password/NN/password systems/NNS/systems are/VBP/are implemented/VBN/implemented in/IN/in various/JJ/various ways/NNP/ways. commercial/JJ/commercial implementations/NNS/implementations /,/, such/JJ/such as/IN/as securid/JJ/securid /,/, use/NN/use hardware/NN/hardware calculators/NNP/calculators. most/JJS/most of/IN/of these/DT/these calculators/NNS/calculators are/VBP/are shaped/VBN/shaped like/IN/like a/DT/a credit/NN/credit card/NN/card /,/, a/DT/a key-chain/JJ/key-chain dangle/NN/dangle /,/, or/CC/or a/DT/a usb/NN/usb device/NN/device ;/:/; they/PRP/they include/VBP/include a/DT/a display/NN/display and/CC/and may/MD/may or/CC/or may/MD/may not/RB/not also/RB/also have/VBP/have a/DT/a keypad/NNP/keypad. some/DT/some use/NN/use the/DT/the current/JJ/current time/NN/time as/IN/as the/DT/the random/NN/random seed/NNP/seed. others/NNS/others the/DT/the user/NN/user to/TO/to enter/VB/enter the/DT/the shared/VBN/shared secret/NN/secret /,/, also/RB/also known/VBN/known as/IN/as a/DT/a or/CC/or on/IN/on the/DT/the keypad/NNP/keypad. the/DT/the display/NN/display then/RB/then shows/VBZ/shows the/DT/the one-time/JJ/one-time password/NNP/password. the/DT/the use/NN/use of/IN/of both/DT/both a/DT/a one-time/JJ/one-time password/NN/password generator/NN/generator and/CC/and a/DT/a pin/NN/pin is/VBZ/is one/CD/one form/NN/form of/IN/of n/NN/n !/./! jn/NN/jn- /./. '/''/' '/:/'- '/POS/' '/''/' two/CD/two different/JJ/different types/NNS/types of/IN/of components/NNS/components are/VBP/are needed/VBN/needed in/IN/in this/DT/this case/NNP/case. two-factor/NNP/two-factor authentication/NN/authentication offers/VBZ/offers far/RB/far better/JJR/better authentication/NN/authentication protection/NN/protection than/IN/than single-factor/NN/single-factor authentication/NN/authentication /./. another/DT/another variation/NN/variation on/IN/on one-time/JJ/one-time passwords/NNS/passwords uses/NNS/uses a/DT/a or/CC/or which/WDT/which is/VBZ/is a/DT/a list/NN/list of/IN/of single-use/JJ/single-use passwords/NNP/passwords. each/DT/each password/NN/password on/IN/on the/DT/the list/NN/list is/VBZ/is used/VBN/used once/RB/once and/CC/and then/RB/then is/VBZ/is crossed/VBN/crossed out/RP/out or/CC/or erased/NNP/erased. the/DT/the commonly/RB/commonly used/JJ/used s/key/JJ/s/key system/NN/system uses/NNS/uses either/DT/either a/DT/a software/NN/software calculator/NN/calculator or/CC/or a/DT/a code/NN/code book/NN/book based/VBN/based on/IN/on these/DT/these calculations/NNS/calculations as/IN/as a/DT/a source/NN/source of/IN/of one-time/JJ/one-time passwords/NNP/passwords. of/IN/of course/NN/course /,/, the/DT/the user/NN/user must/MD/must protect/VB/protect his/PRP$/his code/NN/code book/NN/book /./. 15.5.5/CD/15.5.5 biometrics/NNS/biometrics yet/RB/yet another/DT/another variation/NN/variation on/IN/on the/DT/the use/NN/use of/IN/of passwords/NNS/passwords for/IN/for authentication/NN/authentication involves/NNS/involves the/DT/the use/NN/use of/IN/of biometric/JJ/biometric measures/NNP/measures. palm/NNP/palm- or/CC/or hand-readers/NNS/hand-readers are/VBP/are commonly/RB/commonly used/VBN/used to/TO/to secure/VB/secure physical/JJ/physical access-for/JJ/access-for example/NN/example /,/, access/NN/access to/TO/to a/DT/a data/NN/data center/NNP/center. these/DT/these readers/NNS/readers match/VBP/match stored/VBN/stored parameters/NNS/parameters against/IN/against what/WP/what is/VBZ/is being/VBG/being read/NN/read from/IN/from hand-reader/JJ/hand-reader pads/NNS/pads /./. the/DT/the parameters/NNS/parameters can/MD/can include/VB/include a/DT/a temperature/NN/temperature map/NN/map /,/, as/IN/as well/RB/well as/IN/as finger/JJR/finger length/NN/length /,/, finger/NN/finger width/NN/width /,/, and/CC/and line/NN/line patterns/NNP/patterns. these/DT/these devices/NNS/devices are/VBP/are currently/RB/currently too/RB/too large/JJ/large and/CC/and expensive/JJ/expensive to/TO/to be/VB/be used/VBN/used for/IN/for normal/JJ/normal computer/NN/computer authentication/NN/authentication /./. fingerprint/NN/fingerprint readers/NNS/readers have/VBP/have become/VBN/become accurate/JJ/accurate and/CC/and cost-effective/JJ/cost-effective and/CC/and should/MD/should become/VB/become more/RBR/more common/JJ/common in/IN/in the/DT/the future/NNP/future. these/DT/these devices/NNS/devices read/VBD/read finger/JJR/finger ridge/NN/ridge patterns/NNS/patterns and/CC/and convert/VB/convert them/PRP/them into/IN/into a/DT/a sequence/NN/sequence of/IN/of numbers/NNP/numbers. over/IN/over time/NN/time /,/, they/PRP/they can/MD/can store/VB/store a/DT/a set/NN/set of/IN/of sequences/NNS/sequences to/TO/to adjust/VB/adjust for/IN/for the/DT/the location/NN/location of/IN/of the/DT/the finger/NN/finger on/IN/on the/DT/the reading/NN/reading pad/VBD/pad and/CC/and other/JJ/other factors/NNP/factors. software/NN/software can/MD/can then/RB/then scan/VB/scan a/DT/a finger/NN/finger on/IN/on the/DT/the pad/NN/pad and/CC/and compare/NN/compare its/PRP$/its features/NNS/features with/IN/with these/DT/these stored/VBN/stored sequences/NNS/sequences to/TO/to determine/VB/determine if/IN/if they/PRP/they match/NNP/match. of/IN/of course/NN/course /,/, multiple/NN/multiple users/NNS/users can/MD/can have/VB/have profiles/NNS/profiles stored/VBN/stored /,/, and/CC/and the/DT/the scanner/NN/scanner can/MD/can differentiate/VB/differentiate among/IN/among them/PRP/them /./. a/DT/a very/RB/very accurate/JJ/accurate two-factor/NN/two-factor authentication/NN/authentication scheme/NN/scheme can/MD/can result/VB/result from/IN/from requiring/VBG/requiring a/DT/a password/NN/password as/IN/as well/RB/well as/IN/as a/DT/a user/NN/user name/NN/name and/CC/and fingerprint/NN/fingerprint scan/NNP/scan. if/IN/if this/DT/this information/NN/information is/VBZ/is encrypted/VBN/encrypted in/IN/in transit/NN/transit /,/, the/DT/the system/NN/system can/MD/can be/VB/be very/RB/very resistant/JJ/resistant to/TO/to spoofing/NN/spoofing or/CC/or replay/NN/replay attack/NN/attack /./. is/VBZ/is better/RBR/better still/NNP/still. consider/NN/consider how/WRB/how strong/JJ/strong authentication/NN/authentication can/MD/can be/VB/be with/IN/with a/DT/a usb/NN/usb device/NN/device that/WDT/that must/MD/must be/VB/be plugged/VBN/plugged into/IN/into the/DT/the system/NN/system /,/, a/DT/a pin/NN/pin /,/, and/CC/and a/DT/a fingerprint/NN/fingerprint scan/NNP/scan. except/IN/except for/IN/for the/DT/the user/NN/user 's/POS/'s having/NN/having to/TO/to place/NN/place her/PRP$/her finger/NN/finger on/IN/on a/DT/a pad/NN/pad and/CC/and plug/NN/plug the/DT/the usb/NN/usb into/IN/into the/DT/the system/NN/system /,/, this/DT/this authentication/NN/authentication method/NN/method is/VBZ/is no/DT/no less/JJR/less convenient/JJ/convenient 654/CD/654 chapter/NN/chapter 15/CD/15 15.6/CD/15.6 that/WDT/that using/VBG/using normal/JJ/normal passwords/NNP/passwords. recall/NN/recall /,/, though/IN/though /,/, that/IN/that strong/JJ/strong authentication/NN/authentication by/IN/by itself/PRP/itself is/VBZ/is not/RB/not sufficient/JJ/sufficient to/TO/to guarantee/VB/guarantee the/DT/the id/NN/id of/IN/of the/DT/the user/NNP/user. an/DT/an authenticated/JJ/authenticated session/NN/session can/MD/can still/RB/still be/VB/be hijacked/VBN/hijacked if/IN/if it/PRP/it is/VBZ/is not/RB/not encrypted/VBN/encrypted /./. just/RB/just as/IN/as there/EX/there are/VBP/are myriad/JJ/myriad threats/NNS/threats to/TO/to system/VB/system and/CC/and network/NN/network security/NN/security /,/, there/EX/there are/VBP/are many/JJ/many security/NN/security solutions/NNP/solutions. the/DT/the solutions/NNS/solutions run/VBP/run the/DT/the gamut/NN/gamut from/IN/from improved/VBN/improved user/NN/user education/NN/education /,/, through/IN/through technology/NN/technology /,/, to/TO/to bug-free/JJ/bug-free software/NNP/software. most/JJS/most security/NN/security professionals/NNS/professionals subscribe/VBP/subscribe to/TO/to the/DT/the theory/NN/theory of/IN/of which/WDT/which states/NNS/states that/WDT/that more/JJR/more layers/NNS/layers of/IN/of defense/NN/defense are/VBP/are better/RBR/better than/IN/than fewer/JJR/fewer layers/NNP/layers. of/IN/of course/NN/course /,/, this/DT/this theory/NN/theory applies/VBZ/applies to/TO/to any/DT/any kind/NN/kind of/IN/of security/NNP/security. consider/NN/consider the/DT/the security/NN/security of/IN/of a/DT/a house/NN/house without/IN/without a/DT/a door/NN/door lock/NN/lock /,/, with/IN/with a/DT/a door/NN/door lock/NN/lock /,/, and/CC/and with/IN/with a/DT/a lock/NN/lock and/CC/and an/DT/an alarm/NNP/alarm. in/IN/in this/DT/this section/NN/section /,/, we/PRP/we look/VBP/look at/IN/at the/DT/the major/JJ/major methods/NNS/methods /,/, tools/NNS/tools /,/, and/CC/and techniques/NNS/techniques that/WDT/that can/MD/can be/VB/be used/VBN/used to/TO/to improve/VB/improve resistance/NN/resistance to/TO/to threats/NNS/threats /./. 15.6.1/CD/15.6.1 security/NN/security policy/NN/policy toward/IN/toward improving/VBG/improving the/DT/the security/NN/security of/IN/of any/DT/any aspect/NN/aspect of/IN/of computing/NN/computing is/VBZ/is to/TO/to have/VB/have a/DT/a /./. policies/NNS/policies vary/VB/vary widely/RB/widely but/CC/but generally/RB/generally include/VBP/include a/DT/a statement/NN/statement of/IN/of what/WP/what is/VBZ/is being/VBG/being secured/NNP/secured. for/IN/for example/NN/example /,/, a/DT/a policy/NN/policy might/MD/might state/VB/state that/IN/that all/DT/all outsideaccessible/JJ/outsideaccessible applications/NNS/applications must/MD/must have/VB/have a/DT/a code/NN/code review/NN/review before/IN/before being/VBG/being deployed/VBN/deployed /,/, or/CC/or that/IN/that users/NNS/users should/MD/should not/RB/not share/VB/share their/PRP$/their passwords/NNS/passwords /,/, or/CC/or that/IN/that all/DT/all connection/NN/connection points/NNS/points between/IN/between a/DT/a company/NN/company and/CC/and the/DT/the outside/NN/outside must/MD/must have/VB/have port/NN/port scans/NNS/scans nm/VBP/nm every/DT/every six/CD/six months/NNP/months. without/IN/without a/DT/a policy/NN/policy in/IN/in place/NN/place /,/, it/PRP/it is/VBZ/is impossible/JJ/impossible for/IN/for users/NNS/users and/CC/and administrators/NNS/administrators to/TO/to know/VB/know what/WP/what is/VBZ/is permissible/JJ/permissible /,/, what/WP/what is/VBZ/is required/VBN/required /,/, and/CC/and what/WP/what is/VBZ/is not/RB/not allowed/NNP/allowed. the/DT/the policy/NN/policy is/VBZ/is a/DT/a road/NN/road map/NN/map to/TO/to security/NN/security /,/, and/CC/and if/IN/if a/DT/a site/JJ/site is/VBZ/is trying/VBG/trying to/TO/to move/VB/move from/IN/from less/JJR/less secure/NN/secure to/TO/to more/JJR/more secure/NN/secure /,/, it/PRP/it needs/VBZ/needs a/DT/a map/NN/map to/TO/to know/VB/know how/WRB/how to/TO/to get/VB/get there/RB/there /./. once/RB/once the/DT/the security/NN/security policy/NN/policy is/VBZ/is in/IN/in place/NN/place /,/, the/DT/the people/NNS/people it/PRP/it affects/VBZ/affects should/MD/should know/VB/know it/PRP/it well/NNP/well. it/PRP/it should/MD/should be/VB/be their/PRP$/their guide/NNP/guide. the/DT/the policy/NN/policy should/MD/should also/RB/also be/VB/be a/DT/a that/WDT/that is/VBZ/is reviewed/VBN/reviewed and/CC/and updated/VBN/updated periodically/RB/periodically to/TO/to ensure/VB/ensure that/IN/that it/PRP/it is/VBZ/is still/RB/still pertinent/JJ/pertinent and/CC/and still/RB/still followed/VBD/followed /./. 15.6.2/CD/15.6.2 vulnerability/NN/vulnerability assessment/NN/assessment how/WRB/how can/MD/can we/PRP/we determine/VB/determine whether/IN/whether a/DT/a security/NN/security policy/NN/policy has/VBZ/has been/VBN/been correctly/RB/correctly implemented/VBN/implemented the/DT/the best/JJS/best way/NN/way is/VBZ/is to/TO/to execute/VB/execute a/DT/a vulnerability/NN/vulnerability assessment/NNP/assessment. such/JJ/such assessments/NNS/assessments can/MD/can cover/VB/cover broad/JJ/broad ground/NN/ground /,/, from/IN/from social/JJ/social engineering/NN/engineering through/IN/through risk/NN/risk assessment/NN/assessment to/TO/to port/VB/port scans/NNP/scans. rlsl/NN/rlsl for/IN/for example/NN/example /,/, endeavors/NNS/endeavors to/TO/to value/VB/value the/DT/the assets/NNS/assets of/IN/of the/DT/the entity/NN/entity in/IN/in question/NN/question /:/( a/DT/a program/NN/program /,/, a/DT/a management/NN/management team/NN/team /,/, a/DT/a system/NN/system /,/, or/CC/or a/DT/a facility/NN/facility /:/) and/CC/and determine/NN/determine the/DT/the odds/NNS/odds that/WDT/that a/DT/a security/NN/security incident/NN/incident will/MD/will affect/VB/affect the/DT/the entity/NN/entity and/CC/and decrease/VB/decrease its/PRP$/its value/NNP/value. when/WRB/when the/DT/the odds/NNS/odds of/IN/of suffering/VBG/suffering a/DT/a loss/NN/loss and/CC/and the/DT/the amount/NN/amount of/IN/of the/DT/the potential/JJ/potential loss/NN/loss are/VBP/are known/VBN/known /,/, a/DT/a value/NN/value can/MD/can be/VB/be placed/VBN/placed on/IN/on trying/VBG/trying to/TO/to secure/VB/secure the/DT/the entity/NN/entity /./. the/DT/the core/NN/core activity/NN/activity of/IN/of most/JJS/most vulnerability/NN/vulnerability assessments/NNS/assessments is/VBZ/is a/DT/a '.,/NN/'.,- ~/:/~ '''--in/JJ/'''--in which/WDT/which the/DT/the entity/NN/entity is/VBZ/is scanned/VBN/scanned for/IN/for known/VBN/known vulnerabilities/NNP/vulnerabilities. because/IN/because this/DT/this book/NN/book is/VBZ/is concerned/VBN/concerned with/IN/with operating/NN/operating systems/NNS/systems and/CC/and the/DT/the software/NN/software that/IN/that runs/NNS/runs on/IN/on them/PRP/them /,/, we/PRP/we concentrate/VBP/concentrate on/IN/on those/DT/those aspects/NNS/aspects of/IN/of vulnerability/NN/vulnerability assessment/NN/assessment /./. vulnerability/NN/vulnerability scans/NNS/scans typically/RB/typically are/VBP/are done/VBN/done at/IN/at times/NNS/times when/WRB/when computer/NN/computer use/NN/use is/VBZ/is relatively/RB/relatively low/JJ/low /,/, to/TO/to minimize/VB/minimize their/PRP$/their impact/NNP/impact. when/WRB/when appropriate/JJ/appropriate /,/, they/PRP/they are/VBP/are done/VBN/done on/IN/on 15.6/CD/15.6 655/CD/655 test/NN/test systems/NNS/systems rather/RB/rather than/IN/than production/NN/production systems/NNS/systems /,/, because/IN/because they/PRP/they can/MD/can induce/VB/induce unhappy/JJ/unhappy behavior/NN/behavior from/IN/from the/DT/the target/NN/target systems/NNS/systems or/CC/or network/NN/network devices/NNS/devices /./. a/DT/a scan/NN/scan within/IN/within an/DT/an individual/NN/individual system/NN/system can/MD/can check/VB/check a/DT/a variety/NN/variety of/IN/of aspects/NNS/aspects of/IN/of the/DT/the system/NN/system /:/: short/JJ/short or/CC/or easy-to-guess/JJ/easy-to-guess passwords/NNS/passwords unauthorized/VBN/unauthorized privileged/JJ/privileged programs/NNS/programs /,/, such/JJ/such as/IN/as setuid/JJ/setuid programs/NNS/programs unauthorized/VBN/unauthorized programs/NNS/programs in/IN/in system/NN/system directories/NNS/directories unexpectedly/RB/unexpectedly long-running/JJ/long-running processes/NNS/processes improper/JJ/improper directory/NN/directory protections/NNS/protections on/IN/on user/NN/user and/CC/and system/NN/system directories/NNS/directories improper/NN/improper protections/NNS/protections on/IN/on system/NN/system data/NNS/data files/NNS/files /,/, such/JJ/such as/IN/as the/DT/the password/NN/password file/NN/file /,/, device/NN/device drivers/NNS/drivers /,/, or/CC/or the/DT/the operating-system/JJ/operating-system kernel/NN/kernel itself/PRP/itself dangerous/VBZ/dangerous entries/NNS/entries in/IN/in the/DT/the program/NN/program search/NN/search path/NN/path /:/( for/IN/for example/NN/example /,/, the/DT/the trojan/NN/trojan horse/NN/horse discussed/VBD/discussed in/IN/in section/NN/section 15.2.1/CD/15.2.1 /CD/) changes/NNS/changes to/TO/to system/VB/system programs/NNS/programs detected/VBN/detected with/IN/with checksum/NN/checksum values/NNS/values unexpected/VBD/unexpected or/CC/or hidden/VBN/hidden network/NN/network daemons/NNS/daemons any/DT/any problems/NNS/problems found/VBD/found by/IN/by a/DT/a security/NN/security scan/NN/scan can/MD/can be/VB/be either/RB/either fixed/VBN/fixed automatically/RB/automatically or/CC/or reported/VBN/reported to/TO/to the/DT/the managers/NNS/managers of/IN/of the/DT/the system/NN/system /./. networked/VBN/networked computers/NNS/computers are/VBP/are much/RB/much more/RBR/more susceptible/JJ/susceptible to/TO/to security/NN/security attacks/NNS/attacks than/IN/than are/VBP/are standalone/VBN/standalone systems/NNP/systems. rather/RB/rather than/IN/than attacks/NNS/attacks from/IN/from a/DT/a known/NN/known set/NN/set of/IN/of access/NN/access points/NNS/points /,/, such/JJ/such as/IN/as directly/RB/directly connected/VBN/connected terminals/NNS/terminals /,/, we/PRP/we face/VBP/face attacks/NNS/attacks from/IN/from an/DT/an unknown/NN/unknown and/CC/and large/JJ/large set/NN/set of/IN/of access/NN/access points-a/NNP/points-a potentially/RB/potentially severe/JJ/severe security/NN/security problem/NNP/problem. to/TO/to a/DT/a lesser/NN/lesser extent/NN/extent /,/, systems/NNS/systems connected/VBD/connected to/TO/to telephone/NN/telephone lines/NNS/lines via/IN/via modems/NNS/modems are/VBP/are also/RB/also more/RBR/more exposed/VBN/exposed /./. in/IN/in fact/NN/fact /,/, the/DT/the u.s/NNP/u.s. government/NN/government considers/NNS/considers a/DT/a system/NN/system to/TO/to be/VB/be only/RB/only as/IN/as secure/NN/secure as/IN/as its/PRP$/its most/RBS/most far-reaching/JJ/far-reaching connection/NNP/connection. for/IN/for instance/NN/instance /,/, a/DT/a top-secret/JJ/top-secret system/NN/system may/MD/may be/VB/be accessed/VBN/accessed only/RB/only from/IN/from within/IN/within a/DT/a building/NN/building also/RB/also considered/VBD/considered top-secret/NNP/top-secret. the/DT/the system/NN/system loses/VBZ/loses its/PRP$/its topsecret/NN/topsecret rating/NN/rating if/IN/if any/DT/any form/NN/form of/IN/of communication/NN/communication call/NNP/call. occur/NN/occur outside/IN/outside that/DT/that environment/NN/environment /./. some/DT/some government/NN/government facilities/NNS/facilities take/VBP/take extreme/NN/extreme security/NN/security precautions/NNP/precautions. the/DT/the connectors/NNS/connectors that/WDT/that plug/NN/plug a/DT/a terminal/JJ/terminal into/IN/into the/DT/the secure/NN/secure computer/NN/computer are/VBP/are locked/VBN/locked in/IN/in a/DT/a safe/NN/safe in/IN/in the/DT/the office/NN/office when/WRB/when the/DT/the terminal/JJ/terminal is/VBZ/is not/RB/not in/IN/in use/NNP/use. a/DT/a person/NN/person must/MD/must have/VB/have proper/JJR/proper id/JJ/id to/TO/to gain/VB/gain access/NN/access to/TO/to the/DT/the building/NN/building and/CC/and her/PRP$/her office/NN/office /,/, must/MD/must know/VB/know a/DT/a physical/JJ/physical lock/NN/lock combination/NN/combination /,/, and/CC/and must/MD/must know/VB/know authentication/NN/authentication information/NN/information for/IN/for the/DT/the computer/NN/computer itself/PRP/itself to/TO/to gain/VB/gain access/NN/access to/TO/to the/DT/the computer-an/JJ/computer-an example/NN/example of/IN/of multifactor/NN/multifactor authentication/NN/authentication /./. unfortunately/RB/unfortunately for/IN/for systems/NNS/systems administrators/NNS/administrators and/CC/and computer-security/NN/computer-security professionals/NNS/professionals /,/, it/PRP/it is/VBZ/is frequently/RB/frequently impossible/JJ/impossible to/TO/to lock/VB/lock a/DT/a machine/NN/machine in/IN/in a/DT/a room/NN/room and/CC/and disallow/VB/disallow all/DT/all remote/NN/remote access/NNP/access. for/IN/for instance/NN/instance /,/, the/DT/the internet/NN/internet network/NN/network currently/RB/currently connects/VBZ/connects millions/NNS/millions of/IN/of computers/NNP/computers. it/PRP/it is/VBZ/is becoming/VBG/becoming a/DT/a mission-critical/JJ/mission-critical /,/, indispensable/JJ/indispensable resource/NN/resource for/IN/for many/JJ/many companies/NNS/companies and/CC/and individuals/NNP/individuals. if/IN/if you/PRP/you consider/VBP/consider the/DT/the internet/NN/internet a/DT/a club/NN/club /,/, then/RB/then /,/, as/IN/as in/IN/in any/DT/any club/NN/club with/IN/with millions/NNS/millions of/IN/of members/NNS/members /,/, there/EX/there are/VBP/are many/JJ/many good/JJ/good members/NNS/members and/CC/and some/DT/some bad/JJ/bad members/NNP/members. the/DT/the bad/JJ/bad members/NNS/members have/VBP/have many/JJ/many tools/NNS/tools they/PRP/they can/MD/can use/VB/use to/TO/to attempt/VB/attempt to/TO/to gain/VB/gain access/NN/access to/TO/to the/DT/the interconnected/VBN/interconnected computers/NNS/computers /,/, just/RB/just as/IN/as morris/NNS/morris did/VBD/did with/IN/with his/PRP$/his worm/NN/worm /./. vulnerability/NN/vulnerability scans/NNS/scans can/MD/can be/VB/be applied/VBN/applied to/TO/to networks/NNS/networks to/TO/to address/VB/address some/DT/some of/IN/of the/DT/the problems/NNS/problems with/IN/with network/NN/network security/NNP/security. the/DT/the scans/NNS/scans search/VBP/search a/DT/a network/NN/network for/IN/for ports/NNS/ports that/WDT/that respond/NN/respond to/TO/to a/DT/a request/NNP/request. if/IN/if services/NNS/services are/VBP/are enabled/VBN/enabled that/IN/that should/MD/should not/RB/not be/VB/be /,/, access/NN/access to/TO/to them/PRP/them can/MD/can be/VB/be blocked/VBN/blocked /,/, or/CC/or they/PRP/they can/MD/can be/VB/be disabled/NNP/disabled. the/DT/the scans/NNS/scans then/RB/then determine/VBP/determine the/DT/the details/NNS/details of/IN/of 656/CD/656 chapter/NN/chapter 15/CD/15 the/DT/the application/NN/application listening/VBG/listening on/IN/on that/DT/that port/NN/port and/CC/and try/NN/try to/TO/to determine/VB/determine if/IN/if it/PRP/it has/VBZ/has any/DT/any known/VBN/known vulnerabilities/NNP/vulnerabilities. testing/NN/testing those/DT/those vulnerabilities/NNS/vulnerabilities can/MD/can determine/VB/determine if/IN/if the/DT/the system/NN/system is/VBZ/is ncisconfigured/VBN/ncisconfigured or/CC/or lacks/NNS/lacks needed/VBD/needed patches/NNS/patches /./. finally/RB/finally though/IN/though /,/, consider/NN/consider the/DT/the use/NN/use of/IN/of port/NN/port scanners/NNS/scanners in/IN/in the/DT/the hands/NNS/hands of/IN/of a/DT/a cracker/NN/cracker rather/RB/rather than/IN/than someone/NN/someone trying/VBG/trying to/TO/to improve/VB/improve security/NNP/security. these/DT/these tools/NNS/tools could/MD/could help/VB/help crackers/NNS/crackers find/VB/find vulnerabilities/NNS/vulnerabilities to/TO/to attack/NNP/attack. /NNP/( fortunately/RB/fortunately /,/, it/PRP/it is/VBZ/is possible/JJ/possible to/TO/to detect/VB/detect port/NN/port scans/NNS/scans through/IN/through anomaly/RB/anomaly detection/NN/detection /,/, as/IN/as we/PRP/we discuss/VBP/discuss next/NNP/next. /NNP/) it/PRP/it is/VBZ/is a/DT/a general/JJ/general challenge/NN/challenge to/TO/to security/NN/security that/IN/that the/DT/the same/JJ/same tools/NNS/tools can/MD/can be/VB/be used/VBN/used for/IN/for good/JJ/good and/CC/and for/IN/for harm/NNP/harm. in/IN/in fact/NN/fact /,/, some/DT/some people/NNS/people advocate/VBP/advocate stating/VBG/stating that/IN/that no/DT/no tools/NNS/tools should/MD/should be/VB/be written/VBN/written to/TO/to test/NN/test security/NN/security /,/, because/IN/because such/JJ/such tools/NNS/tools can/MD/can be/VB/be used/VBN/used to/TO/to find/VB/find /:/( and/CC/and exploit/NN/exploit /:/) security/NN/security holes/NNP/holes. others/NNS/others believe/VBP/believe that/IN/that this/DT/this approach/NN/approach to/TO/to security/NN/security is/VBZ/is not/RB/not a/DT/a valid/JJ/valid one/CD/one /,/, pointing/VBG/pointing out/RP/out /,/, for/IN/for example/NN/example /,/, that/IN/that crackers/NNS/crackers could/MD/could write/VB/write their/PRP$/their own/JJ/own tools/NNP/tools. it/PRP/it seems/VBZ/seems reasonable/JJ/reasonable that/IN/that security/NN/security through/IN/through obscurity/NN/obscurity be/VB/be considered/VBN/considered one/CD/one of/IN/of the/DT/the layers/NNS/layers of/IN/of security/NN/security only/RB/only so/RB/so long/RB/long as/IN/as it/PRP/it is/VBZ/is not/RB/not the/DT/the only/JJ/only layer/NNP/layer. for/IN/for example/NN/example /,/, a/DT/a company/NN/company could/MD/could publish/VB/publish its/PRP$/its entire/JJ/entire network/NN/network configuration/NN/configuration ;/:/; but/CC/but keeping/VBG/keeping that/IN/that information/NN/information secret/NN/secret makes/VBZ/makes it/PRP/it harder/JJR/harder for/IN/for intruders/NNS/intruders to/TO/to know/VB/know what/WP/what to/TO/to attack/VB/attack or/CC/or to/TO/to determine/VB/determine what/WDT/what might/MD/might be/VB/be detected/NNP/detected. even/RB/even here/RB/here /,/, though/IN/though /,/, a/DT/a company/NN/company assuming/VBG/assuming that/IN/that such/JJ/such information/NN/information will/MD/will remain/VB/remain a/DT/a secret/NN/secret has/VBZ/has a/DT/a false/NN/false sense/NN/sense of/IN/of security/NN/security /./. 15.6.3/CD/15.6.3 intrusion/NN/intrusion detection/NN/detection and/CC/and facilities/NNS/facilities is/VBZ/is intimately/RB/intimately linked/VBN/linked to/TO/to intrusion/NN/intrusion detection/NN/detection /./. as/IN/as its/PRP$/its name/NN/name suggests/VBZ/suggests /,/, strives/NNS/strives to/TO/to detect/VB/detect attempted/VBN/attempted or/CC/or successful/JJ/successful intrusions/NNS/intrusions into/IN/into computer/NN/computer systems/NNS/systems and/CC/and to/TO/to initiate/VB/initiate appropriate/JJ/appropriate responses/NNS/responses to/TO/to the/DT/the intrusions/NNP/intrusions. intrusion/NN/intrusion detection/NN/detection encompasses/NNS/encompasses a/DT/a wide/JJ/wide array/NN/array of/IN/of techniques/NNS/techniques that/WDT/that vary/JJ/vary on/IN/on a/DT/a number/NN/number of/IN/of axes/NNS/axes /,/, including/VBG/including the/DT/the following/VBG/following /:/: the/DT/the time/NN/time at/IN/at which/WDT/which detection/NN/detection occurs/NNP/occurs. detection/NN/detection can/MD/can occur/VB/occur in/IN/in real/JJ/real time/NN/time /:/( while/IN/while the/DT/the intrusion/NN/intrusion is/VBZ/is occurring/VBG/occurring /NN/) or/CC/or after/IN/after the/DT/the fact/NN/fact /./. the/DT/the types/NNS/types of/IN/of inputs/NNS/inputs examined/VBN/examined to/TO/to detect/VB/detect intrusive/JJ/intrusive activity/NNP/activity. these/DT/these may/MD/may include/VB/include user-shell/NNP/user-shell commands/NNS/commands /,/, process/NN/process system/NN/system calls/VBZ/calls /,/, and/CC/and network/NN/network packet/NN/packet headers/NNS/headers or/CC/or contents/NNP/contents. some/DT/some forms/NNS/forms of/IN/of intrusion/NN/intrusion might/MD/might be/VB/be detected/VBN/detected only/RB/only by/IN/by correlating/NN/correlating information/NN/information from/IN/from several/JJ/several such/JJ/such sources/NNS/sources /./. the/DT/the range/NN/range of/IN/of response/NN/response capabilities/NNP/capabilities. simple/NN/simple forms/NNS/forms of/IN/of response/NN/response include/NN/include alerting/VBG/alerting an/DT/an administrator/NN/administrator to/TO/to the/DT/the potential/JJ/potential intrusion/NN/intrusion or/CC/or somehow/NN/somehow halting/VBG/halting the/DT/the potentially/RB/potentially intrusive/JJ/intrusive activity-for/JJ/activity-for example/NN/example /,/, killing/NN/killing a/DT/a process/NN/process engaged/VBN/engaged in/IN/in such/JJ/such activity/NNP/activity. in/IN/in a/DT/a sophisticated/JJ/sophisticated fonn/NN/fonn of/IN/of response/NN/response ;/:/; a/DT/a system/NN/system might/MD/might transparently/RB/transparently divert/VB/divert an/DT/an intruder/NN/intruder 's/POS/'s activity/NN/activity to/TO/to a/DT/a false/NN/false resource/NN/resource exposed/VBD/exposed to/TO/to the/DT/the attacker/NNP/attacker. the/DT/the resource/NN/resource appears/VBZ/appears real/JJ/real to/TO/to the/DT/the attacker/NN/attacker and/CC/and enables/VBZ/enables the/DT/the system/NN/system to/TO/to monitor/NN/monitor and/CC/and gain/NN/gain information/NN/information about/IN/about the/DT/the attack/NN/attack these/DT/these degrees/NNS/degrees of/IN/of freedom/NN/freedom in/IN/in the/DT/the design/NN/design space/NN/space for/IN/for detecting/NN/detecting intrusions/NNS/intrusions have/VBP/have a/DT/a wide/JJ/wide range/NN/range of/IN/of solutions/NNS/solutions /,/, known/VBN/known as/IN/as and/CC/and ids/NNS/ids systems/NNS/systems raise/VBP/raise an/DT/an alarm/NN/alarm when/WRB/when an/DT/an intrusion/NN/intrusion is/VBZ/is detected/VBN/detected /,/, while/IN/while idp/NN/idp systems/NNS/systems act/NN/act as/IN/as routers/NNS/routers /,/, passing/VBG/passing traffic/JJ/traffic unless/NN/unless an/DT/an intrusion/NN/intrusion is/VBZ/is detected/VBN/detected /-NONE-/( at/IN/at which/WDT/which point/NN/point that/WDT/that traffic/JJ/traffic is/VBZ/is blocked/VBN/blocked /-NONE-/) /./. but/CC/but just/RB/just what/WP/what constitutes/NNS/constitutes an/DT/an intrusion/NN/intrusion defining/VBG/defining a/DT/a suitable/JJ/suitable specification/NN/specification of/IN/of intrusion/NN/intrusion turns/VBZ/turns out/RP/out to/TO/to be/VB/be quite/RB/quite difficult/JJ/difficult /,/, and/CC/and thus/RB/thus automatic/JJ/automatic idss/NNS/idss and/CC/and idps/NNS/idps today/NN/today settle/NN/settle for/IN/for one/CD/one of/IN/of two/CD/two less/JJR/less ambitious/JJ/ambitious approaches/NNP/approaches. in/IN/in the/DT/the first/JJ/first /,/, called/VBN/called system/NN/system input/NN/input or/CC/or network/NN/network traffic/JJ/traffic is/VBZ/is examined/VBN/examined for/IN/for 15.6/CD/15.6 657/CD/657 specific/JJ/specific behavior/NN/behavior patterns/NNS/patterns /:/( or/CC/or known/VBN/known to/TO/to indicate/VB/indicate attacks/NNP/attacks. a/DT/a simple/JJ/simple example/NN/example of/IN/of signature-based/JJ/signature-based detection/NN/detection is/VBZ/is scanning/VBG/scanning network/NN/network packets/NNS/packets for/IN/for the/DT/the string/VBG/string /etc/passwd//NN//etc/passwd/ targeted/VBD/targeted for/IN/for a/DT/a unix/NN/unix systenl/NN/systenl another/DT/another example/NN/example is/VBZ/is virus-detection/NN/virus-detection software/NN/software /,/, which/WDT/which scans/NNS/scans binaries/VBZ/binaries or/CC/or network/NN/network packets/NNS/packets for/IN/for lmown/NN/lmown viruses/NNS/viruses /./. the/DT/the second/JJ/second approach/NN/approach /,/, typically/RB/typically called/VBN/called attempts/NNS/attempts through/IN/through various/JJ/various techniques/NNS/techniques to/TO/to detect/VB/detect anomalous/JJ/anomalous behavior/NN/behavior within/IN/within computer/NN/computer systen/NNS/systen s/NNP/s. of/IN/of course/NN/course /,/, not/RB/not all/DT/all anomalous/JJ/anomalous system/NN/system activity/NN/activity indicates/VBZ/indicates an/DT/an intrusion/NN/intrusion /,/, but/CC/but the/DT/the presumption/NN/presumption is/VBZ/is that/IN/that intrusions/NNS/intrusions often/RB/often induce/VBP/induce anomalous/JJ/anomalous behavior/NNP/behavior. an/DT/an example/NN/example of/IN/of anomaly/RB/anomaly detection/NN/detection is/VBZ/is monitoring/VBG/monitoring system/NN/system calls/NNS/calls of/IN/of a/DT/a daemon/NN/daemon process/NN/process to/TO/to detect/VB/detect whether/IN/whether the/DT/the system-call/JJ/system-call behavior/NN/behavior deviates/NNS/deviates from/IN/from normal/JJ/normal patterns/NNS/patterns /,/, possibly/RB/possibly indicating/VBG/indicating that/IN/that a/DT/a buffer/NN/buffer overflow/NN/overflow has/VBZ/has been/VBN/been exploited/VBN/exploited in/IN/in the/DT/the daemon/NN/daemon to/TO/to corrupt/VB/corrupt its/PRP$/its behavior/NNP/behavior. another/DT/another example/NN/example is/VBZ/is monitoring/VBG/monitoring shell/NN/shell commands/NNS/commands to/TO/to detect/VB/detect anomalous/JJ/anomalous commands/NNS/commands for/IN/for a/DT/a given/VBN/given user/NN/user or/CC/or detecting/VBG/detecting an/DT/an anomalous/JJ/anomalous login/NN/login time/NN/time for/IN/for a/DT/a user/NN/user /,/, either/DT/either of/IN/of which/WDT/which may/MD/may indicate/VB/indicate that/IN/that an/DT/an attacker/NN/attacker has/VBZ/has succeeded/VBN/succeeded in/IN/in gaining/NN/gaining access/NN/access to/TO/to that/DT/that user/NN/user 's/POS/'s account/NN/account /./. signature-based/JJ/signature-based detection/NN/detection and/CC/and anomaly/RB/anomaly detection/NN/detection can/MD/can be/VB/be viewed/VBN/viewed as/IN/as two/CD/two sides/NNS/sides of/IN/of the/DT/the same/JJ/same coin/NN/coin /:/: signature-based/JJ/signature-based detection/NN/detection attempts/VBZ/attempts to/TO/to characterize/VB/characterize dangerous/JJ/dangerous behaviors/NNS/behaviors and/CC/and to/TO/to detect/VB/detect when/WRB/when one/CD/one of/IN/of these/DT/these behaviors/NNS/behaviors occurs/VBZ/occurs /,/, whereas/IN/whereas anomaly/RB/anomaly detection/NN/detection attempts/NNS/attempts to/TO/to characterize/VB/characterize normal/JJ/normal /NN/( or/CC/or non/NN/non dangerous/JJ/dangerous /NN/) behaviors/NNS/behaviors and/CC/and to/TO/to detect/VB/detect when/WRB/when something/NN/something other/JJ/other than/IN/than these/DT/these behaviors/NNS/behaviors occurs/VBZ/occurs /./. these/DT/these different/JJ/different approaches/NNS/approaches yield/NN/yield idss/NNS/idss and/CC/and idps/NNS/idps with/IN/with very/RB/very different/JJ/different properties/NNS/properties /,/, however/NNP/however. in/IN/in particular/JJ/particular /,/, anomaly/RB/anomaly detection/NN/detection can/MD/can find/VB/find previously/RB/previously unknown/VB/unknown methods/NNS/methods of/IN/of intrusion/NN/intrusion /:/( so-called/JJ/so-called signature-based/JJ/signature-based detection/NN/detection /,/, in/IN/in contrast/NN/contrast /,/, will/MD/will identify/VB/identify only/RB/only known/VBN/known attacks/NNS/attacks that/IN/that can/MD/can be/VB/be codified/VBN/codified in/IN/in a/DT/a recognizable/JJ/recognizable pattern/NNP/pattern. thus/RB/thus /,/, new/JJ/new attacks/NNS/attacks that/WDT/that were/VBD/were not/RB/not contemplated/VBN/contemplated when/WRB/when the/DT/the signatures/NNS/signatures were/VBD/were generated/VBN/generated will/MD/will evade/VB/evade signature-based/JJ/signature-based detection/NNP/detection. this/DT/this problem/NN/problem is/VBZ/is well/RB/well known/VBN/known to/TO/to vendors/NNS/vendors of/IN/of virus-detection/NN/virus-detection software/NN/software /,/, who/WP/who must/MD/must release/VB/release new/JJ/new signatures/NNS/signatures with/IN/with great/JJ/great frequency/NN/frequency as/IN/as new/JJ/new viruses/NNS/viruses are/VBP/are detected/VBN/detected manually/RB/manually /./. anomaly/RB/anomaly detection/NN/detection is/VBZ/is not/RB/not necessarily/RB/necessarily superior/JJ/superior to/TO/to signature-based/JJ/signature-based detection/NN/detection /,/, however/NNP/however. indeed/RB/indeed /,/, a/DT/a significant/JJ/significant challenge/NN/challenge for/IN/for systems/NNS/systems that/WDT/that attempt/NN/attempt anomaly/RB/anomaly detection/NN/detection is/VBZ/is to/TO/to benchmark/VB/benchmark normal/JJ/normal system/NN/system behavior/NN/behavior accurately/NNP/accurately. if/IN/if the/DT/the system/NN/system has/VBZ/has already/RB/already been/VBN/been penetrated/VBN/penetrated when/WRB/when it/PRP/it is/VBZ/is benchmarked/VBN/benchmarked /,/, then/RB/then the/DT/the intrusive/JJ/intrusive activity/NN/activity may/MD/may be/VB/be included/VBN/included in/IN/in the/DT/the normal/JJ/normal benchmark/NNP/benchmark. even/RB/even if/IN/if the/DT/the system/NN/system is/VBZ/is benchinarked/VBN/benchinarked cleanly/RB/cleanly /,/, without/IN/without influence/NN/influence from/IN/from intrusive/JJ/intrusive behaviorf/NN/behaviorf the/DT/the benchmark/NN/benchmark must/MD/must give/VB/give a/DT/a fairly/RB/fairly complete/JJ/complete picture/NN/picture of/IN/of normal/JJ/normal behavior/NNP/behavior. otherwise/NN/otherwise /,/, the/DT/the number/NN/number of/IN/of /NNP/( false/NN/false alarms/NNS/alarms /:/) orf/NN/orf worse/NN/worse /,/, /:/( missed/VBN/missed intrusions/NNS/intrusions /:/) will/MD/will be/VB/be excessive/JJ/excessive /./. to/TO/to illustrate/VB/illustrate the/DT/the impact/NN/impact of/IN/of even/RB/even a/DT/a marginally/RB/marginally high/JJ/high rate/NN/rate of/IN/of false/NN/false alarms/NNS/alarms /,/, consider/NN/consider an/DT/an installation/NN/installation consisting/VBG/consisting of/IN/of a/DT/a hundred/CD/hundred unix/NN/unix workstations/NNS/workstations from/IN/from which/WDT/which security-relevant/JJ/security-relevant events/NNS/events are/VBP/are recorded/VBN/recorded for/IN/for purposes/NNS/purposes of/IN/of intrusion/NN/intrusion detection/NNP/detection. a/DT/a small/JJ/small installation/NN/installation such/JJ/such as/IN/as this/DT/this could/MD/could easily/RB/easily generate/VB/generate a/DT/a million/NN/million audit/NN/audit records/NNS/records per/IN/per day/NNP/day. only/RB/only one/CD/one or/CC/or two/CD/two might/MD/might be/VB/be worthy/JJ/worthy of/IN/of an/DT/an administrator/NN/administrator 's/POS/'s investigation/NNP/investigation. if/IN/if we/PRP/we suppose/VBP/suppose /,/, optimistically/RB/optimistically /,/, that/IN/that each/DT/each actual/JJ/actual attack/NN/attack is/VBZ/is reflected/VBN/reflected in/IN/in ten/NN/ten audit/NN/audit recordsf/NN/recordsf we/PRP/we can/MD/can roughly/RB/roughly compute/VB/compute the/DT/the rate/NN/rate of/IN/of occurrence/NN/occurrence of/IN/of audit/NN/audit records/NNS/records reflecting/VBG/reflecting truly/RB/truly intrusive/JJ/intrusive activity/NN/activity as/IN/as follows/NNS/follows /:/: 2/CD/2 intrusions/NNS/intrusions /./. 10/CD/10 /./. recor/NN/recor s/NNS/s mtrus10n/NNP/mtrus10n 0.00002/CD/0.00002 /./. 658/CD/658 chapter/NN/chapter 15/CD/15 interpreting/VBG/interpreting this/DT/this as/IN/as a/DT/a probability/NN/probability of/IN/of occurrence/NN/occurrence of/IN/of intrusive/JJ/intrusive records//NN/records/ '/''/' we/PRP/we denote/VBP/denote it/PRP/it as/IN/as p/NN/p /:/( i/PRP/i /VBP/) ;/:/; that/IN/that is/VBZ/is /,/, event/NN/event i/PRP/i is/VBZ/is the/DT/the occurrence/NN/occurrence of/IN/of a/DT/a record/NN/record reflecting/VBG/reflecting truly/RB/truly intrusive/JJ/intrusive behavior/NNP/behavior. since/IN/since p/NN/p /:/( i/PRP/i /VBP/) =/:/= 0.00002/CD/0.00002 /,/, we/PRP/we also/RB/also know/VBP/know that/IN/that p/NN/p /:/( ~/:/~ i/PRP/i /VBP/) =/:/= 1-p/CD/1-p /CD/( i/PRP/i /VBP/) =/:/= 0.99998/CD/0.99998. now/RB/now we/PRP/we let/VBP/let a/DT/a denote/NN/denote the/DT/the raising/NN/raising of/IN/of an/DT/an alarm/NN/alarm by/IN/by an/DT/an ids/NNP/ids. an/DT/an accurate/JJ/accurate ids/NNS/ids should/MD/should maximize/VB/maximize both/DT/both p/NN/p /:/( i/PRP/i la/VBP/la /:/) and/CC/and p/VB/p /:/( ~/:/~ i/PRP/i i/PRP/i ~/VBP/~ a/DT/a /NN/) -that/WDT/-that is/VBZ/is /,/, the/DT/the probabilities/NNS/probabilities that/WDT/that an/DT/an alarm/NN/alarm indicates/VBZ/indicates an/DT/an intrusion/NN/intrusion and/CC/and that/IN/that no/DT/no alarm/NN/alarm indicates/VBZ/indicates no/DT/no intrusion/NNP/intrusion. focusil/NN/focusil g/NN/g on/IN/on p/NN/p /:/( i/PRP/i i/PRP/i a/DT/a /JJ/) for/IN/for the/DT/the moment/NN/moment /,/, we/PRP/we can/MD/can compute/VB/compute it/PRP/it using/VBG/using p/NN/p /:/( iia/NN/iia /:/) p/NN/p /:/( i/PRP/i /VBP/) p/NN/p /:/( aii/NN/aii /:/) p/NN/p /:/( i/PRP/i /VBP/) p/NN/p /:/( aii/NN/aii /:/) +/:/+ p/NN/p /:/( ~/:/~ i/PRP/i /VBP/) p/NN/p /:/( ai/NN/ai ~/:/~ i/PRP/i /VBP/) 0.00002/CD/0.00002 p/NN/p /:/( aii/NN/aii /:/) 0.00002/CD/0.00002 p/NN/p /:/( aii/NN/aii /:/) +/:/+ 0.99998/CD/0.99998 p/NN/p /:/( ai/NN/ai ~/:/~ i/PRP/i /VBP/) now/RB/now consider/JJR/consider the/DT/the impact/NN/impact ofthe/DT/ofthe false-alarm/NN/false-alarm rate/NN/rate p/NN/p /:/( ai/NN/ai ~/:/~ i/PRP/i /VBP/) on/IN/on p/NN/p /:/( iia/NN/iia /:/) /./. even/RB/even with/IN/with a/DT/a very/RB/very good/JJ/good true-alarm/NN/true-alarm rate/NN/rate of/IN/of p/NN/p /:/( ail/NN/ail /:/) =/:/= 0.8/CD/0.8 /,/, a/DT/a seemingly/RB/seemingly good/JJ/good falsealarm/NN/falsealarm rate/NN/rate of/IN/of p/NN/p /:/( ai/NN/ai ~/:/~ i/PRP/i /VBP/) =/:/= 0.0001/CD/0.0001 yields/NNS/yields p/VBP/p /:/( iia/NN/iia /:/) ~/:/~ 0.14/CD/0.14. that/WDT/that is/VBZ/is /,/, fewer/JJR/fewer than/IN/than one/CD/one ill/NN/ill every/DT/every seven/CD/seven alarms/NNS/alarms indicates/VBZ/indicates a/DT/a real/JJ/real intrusion/NN/intrusion !/./! in/IN/in systems/NNS/systems where/WRB/where a/DT/a security/NN/security administrator/NN/administrator ilwestigates/VBZ/ilwestigates each/DT/each alarm/NN/alarm /,/, a/DT/a high/JJ/high rate/NN/rate of/IN/of false/NN/false alarms-called/JJ/alarms-called a/DT/a christmas/NN/christmas tree/NN/tree effect/NN/effect -is/NN/-is exceedingly/RB/exceedingly wasteful/JJ/wasteful and/CC/and will/MD/will quickly/RB/quickly teach/VB/teach the/DT/the admilcistrator/NN/admilcistrator to/TO/to ignore/VB/ignore alarms/NNS/alarms /./. this/DT/this example/NN/example illustrates/VBZ/illustrates a/DT/a general/JJ/general principle/NN/principle for/IN/for idss/NN/idss and/CC/and idps/NNS/idps /:/: for/IN/for usability/NN/usability /,/, they/PRP/they must/MD/must offer/VB/offer an/DT/an extremely/RB/extremely low/JJ/low false-alarm/NN/false-alarm rate/NNP/rate. achieving/NN/achieving a/DT/a sufficiently/RB/sufficiently low/JJ/low false-alarm/NN/false-alarm rate/NN/rate is/VBZ/is an/DT/an especially/RB/especially serious/JJ/serious challenge/NN/challenge for/IN/for anomaly-detection/NN/anomaly-detection systems/NNS/systems /,/, as/IN/as mentioned/VBN/mentioned /,/, because/IN/because of/IN/of the/DT/the difficulties/NNS/difficulties of/IN/of adequately/RB/adequately benchmarking/VBG/benchmarking normal/JJ/normal system/NN/system behavior/NNP/behavior. however/RB/however /,/, research/NN/research contil/IN/contil ues/NNS/ues to/TO/to improve/VB/improve anomalydetection/NN/anomalydetection techniques/NNP/techniques. intrusion/NN/intrusion detection/NN/detection software/NN/software is/VBZ/is evolving/VBG/evolving to/TO/to implement/VB/implement signatures/NNS/signatures /,/, anomaly/RB/anomaly algorithms/VBZ/algorithms /,/, and/CC/and other/JJ/other algorithms/NNS/algorithms and/CC/and to/TO/to combine/VB/combine the/DT/the results/NNS/results to/TO/to arrive/VB/arrive at/IN/at a/DT/a more/RBR/more accurate/JJ/accurate anomaly-detection/NN/anomaly-detection rate/NN/rate /./. 15.6.4/CD/15.6.4 virus/NN/virus protection/NN/protection as/IN/as we/PRP/we have/VBP/have seen/VBN/seen /,/, viruses/NNS/viruses can/MD/can and/CC/and do/VB/do wreak/JJ/wreak havoc/NN/havoc on/IN/on systems/NNP/systems. protection/NN/protection from/IN/from viruses/NNS/viruses thus/RB/thus is/VBZ/is an/DT/an important/JJ/important security/NN/security concern/NNP/concern. antivirus/VBZ/antivirus programs/NNS/programs are/VBP/are often/RB/often used/VBN/used to/TO/to provide/VB/provide this/DT/this protection/NNP/protection. some/DT/some of/IN/of these/DT/these programs/NNS/programs are/VBP/are effective/JJ/effective against/IN/against only/RB/only particular/JJ/particular known/NN/known viruses/NNP/viruses. they/PRP/they work/VBP/work by/IN/by searching/VBG/searching all/DT/all the/DT/the programs/NNS/programs on/IN/on a/DT/a system/NN/system for/IN/for the/DT/the specific/JJ/specific pattern/NN/pattern of/IN/of instructions/NNS/instructions known/VBN/known to/TO/to make/VB/make up/RP/up the/DT/the virus/NN/virus /./. when/WRB/when they/PRP/they find/VBP/find a/DT/a known/NN/known pattern/NN/pattern /,/, they/PRP/they remove/VBP/remove the/DT/the instructions/NNS/instructions /,/, the/DT/the program/NNP/program. antivirus/VBZ/antivirus programs/NNS/programs may/MD/may have/VB/have catalogs/NNS/catalogs of/IN/of thousands/NNS/thousands of/IN/of viruses/NNS/viruses for/IN/for which/WDT/which they/PRP/they search/VBP/search /./. both/DT/both viruses/NNS/viruses and/CC/and antivirus/VBZ/antivirus software/NN/software continue/NN/continue to/TO/to become/VB/become more/JJR/more sophisticated/JJ/sophisticated /./. some/DT/some viruses/NNS/viruses modify/VBP/modify themselves/PRP/themselves as/IN/as they/PRP/they infect/VBP/infect other/JJ/other software/NN/software to/TO/to avoid/VB/avoid the/DT/the basic/JJ/basic pattern-match/NN/pattern-match approach/NN/approach of/IN/of antivirus/NN/antivirus programs/NNP/programs. antivirus/VBZ/antivirus programs/NNS/programs ill/VBP/ill turn/NN/turn now/RB/now look/VBP/look for/IN/for families/NNS/families of/IN/of patterns/NNS/patterns rather/RB/rather than/IN/than a/DT/a single/JJ/single pattern/NN/pattern to/TO/to identify/VB/identify a/DT/a virus/NN/virus /./. in/IN/in fact/NN/fact /,/, some/DT/some antivirus/NN/antivirus programs/NNS/programs implement/VBP/implement a/DT/a variety/NN/variety of/IN/of detection/NN/detection algorithms/NNS/algorithms /./. they/PRP/they can/MD/can decompress/VB/decompress compressed/VBN/compressed viruses/NNS/viruses before/IN/before checking/VBG/checking for/IN/for a/DT/a signature/NN/signature /./. some/DT/some also/RB/also look/VBP/look for/IN/for process/NN/process anomalies/NNP/anomalies. a/DT/a process/NN/process opening/VBG/opening an/DT/an executable/JJ/executable file/NN/file for/IN/for writing/NN/writing is/VBZ/is suspicious/JJ/suspicious /,/, for/IN/for example/NN/example /,/, unless/IN/unless it/PRP/it is/VBZ/is a/DT/a compiler/NNP/compiler. another/DT/another popular/JJ/popular teducique/NN/teducique is/VBZ/is to/TO/to run/VB/run a/DT/a program/NN/program in/IN/in a/DT/a which/WDT/which is/VBZ/is a/DT/a controlled/JJ/controlled or/CC/or emulated/VBN/emulated 15.6/CD/15.6 659/CD/659 the/DT/the tripwire/NN/tripwire file/NN/file system/NN/system an/DT/an example/NN/example of/IN/of an/DT/an anomaly-detection/NN/anomaly-detection tool/NN/tool is/VBZ/is the/DT/the checking/NN/checking tool/NN/tool for/IN/for unix/NN/unix /,/, developed/VBD/developed at/IN/at purdue/JJ/purdue university/NNP/university. tripwire/NN/tripwire operates/VBZ/operates on/IN/on the/DT/the premise/NN/premise that/IN/that many/JJ/many intrusions/NNS/intrusions result/VBP/result in/IN/in modification/NN/modification of/IN/of system/NN/system directories/NNS/directories and/CC/and files/NNP/files. for/IN/for example/NN/example /,/, an/DT/an attacker/NN/attacker might/MD/might modify/VB/modify the/DT/the system/NN/system programs/NNS/programs /,/, perhaps/RB/perhaps inserting/VBG/inserting copies/NNS/copies with/IN/with trojan/JJ/trojan horses/NNS/horses /,/, or/CC/or might/MD/might insert/VB/insert new/JJ/new programs/NNS/programs into/IN/into directories/NNS/directories commonly/RB/commonly found/VBN/found in/IN/in user-shell/NNP/user-shell search/NN/search paths/NNP/paths. or/CC/or an/DT/an intruder/NN/intruder might/MD/might remove/VB/remove system/NN/system log/NN/log files/NNS/files to/TO/to cover/VB/cover his/PRP$/his tracks/NNP/tracks. tripwire/NN/tripwire is/VBZ/is a/DT/a tool/NN/tool to/TO/to monitor/NN/monitor file/NN/file systems/NNS/systems for/IN/for added/VBN/added /,/, deleted/VBN/deleted /,/, or/CC/or changed/VBN/changed files/NNS/files and/CC/and to/TO/to alert/VB/alert system/NN/system administrators/NNS/administrators to/TO/to these/DT/these modifications/NNS/modifications /./. the/DT/the operation/NN/operation of/IN/of tripwire/NN/tripwire is/VBZ/is controlled/VBN/controlled by/IN/by a/DT/a configurationfile/JJ/configurationfile tw.config/JJ/tw.config that/IN/that enumerates/NNS/enumerates the/DT/the directories/NNS/directories and/CC/and files/NNS/files to/TO/to be/VB/be monitored/VBN/monitored for/IN/for changes/NNS/changes /,/, deletions/NNS/deletions /,/, or/CC/or additions/NNP/additions. each/DT/each entry/NN/entry in/IN/in this/DT/this configuration/NN/configuration file/NN/file includes/VBZ/includes a/DT/a selection/NN/selection mask/NN/mask to/TO/to specify/VB/specify the/DT/the file/NN/file attributes/VBZ/attributes /:/( inode/NN/inode attributes/NNS/attributes /:/) that/IN/that will/MD/will be/VB/be monitored/VBN/monitored for/IN/for changes/NNP/changes. for/IN/for example/NN/example /,/, the/DT/the selection/NN/selection mask/NN/mask might/MD/might specify/VB/specify that/IN/that a/DT/a file/NN/file 's/POS/'s permissions/NNS/permissions be/VB/be monitored/VBN/monitored but/CC/but its/PRP$/its access/NN/access time/NN/time be/VB/be ignored/NNP/ignored. in/IN/in addition/NN/addition /,/, the/DT/the selection/NN/selection mask/NN/mask can/MD/can instruct/VB/instruct thatthe/DT/thatthe file/NN/file be/VB/be monitored/VBN/monitored for/IN/for changes/NNP/changes. monitoring/VBG/monitoring the/DT/the hash/NN/hash of/IN/of a/DT/a file/NN/file for/IN/for changes/NNS/changes is/VBZ/is as/RB/as good/JJ/good as/IN/as monitoring/JJ/monitoring the/DT/the file/NN/file itselt/VBD/itselt but/CC/but storing/VBG/storing hashes/NNS/hashes of/IN/of files/NNS/files requires/VBZ/requires far/RB/far less/JJR/less room/NN/room than/IN/than copying/VBG/copying the/DT/the files/NNS/files themselves/PRP/themselves /./. when/WRB/when run/VBN/run initially/RB/initially /,/, tripwire/NN/tripwire takes/VBZ/takes as/RB/as input/VBN/input the/DT/the tw.config/JJ/tw.config file/NN/file and/CC/and computes/VBZ/computes a/DT/a sign.ature/JJ/sign.ature for/IN/for each/DT/each file/NN/file or/CC/or directory/NN/directory consisting/VBG/consisting of/IN/of its/PRP$/its monitored/VBN/monitored attributes/NNS/attributes /:/( inode/NN/inode attributes/NNS/attributes and/CC/and hash/NN/hash values/NNS/values /:/) /./. these/DT/these signatures/NNS/signatures are/VBP/are stored/VBN/stored in/IN/in a/DT/a database/NNP/database. when/WRB/when run/VBN/run subsequently/RB/subsequently /,/, tripwire/NN/tripwire inputs/NNS/inputs both/DT/both tw.config/JJ/tw.config and/CC/and the/DT/the previously/RB/previously stored/VBD/stored database/NN/database /,/, recomputes/VBZ/recomputes the/DT/the signature/NN/signature for/IN/for each/DT/each file/NN/file or/CC/or directory/NN/directory named/VBD/named in/IN/in tw.conf/JJ/tw.conf ig/NN/ig /,/, and/CC/and compares/VBZ/compares this/DT/this signature/NN/signature with/IN/with the/DT/the signature/NN/signature /:/( if/IN/if any/DT/any /NN/) in/IN/in the/DT/the previously/RB/previously compl.j-ted/JJ/compl.j-ted database/NNP/database. events/NNS/events reported/VBD/reported to/TO/to an/DT/an administrator/NN/administrator include/NN/include any/DT/any monitored/VBN/monitored file/NN/file or/CC/or directory/NN/directory whose/WP$/whose signature/NN/signature differs/NNS/differs from/IN/from that/DT/that in/IN/in the/DT/the database/NN/database /:/( a/DT/a changed/JJ/changed file/NN/file /:/) /,/, any/DT/any file/NN/file or/CC/or directory/NN/directory in/IN/in a/DT/a monitored/VBN/monitored directory/NN/directory for/IN/for which/WDT/which a/DT/a signature/NN/signature does/VBZ/does not/RB/not exist/VB/exist in/IN/in the/DT/the database/NN/database /:/( an/DT/an added/JJ/added file/NN/file /:/) /,/, and/CC/and any/DT/any signature/NN/signature in/IN/in the/DT/the database/NN/database for/IN/for which/WDT/which the/DT/the corresponding/VBG/corresponding file/NN/file or/CC/or directory/NN/directory no/DT/no longer/NN/longer exists/NNS/exists /:/( a/DT/a deleted/JJ/deleted file/NN/file /:/) /,/, although/IN/although effective/JJ/effective for/IN/for a/DT/a wide/JJ/wide class/NN/class of/IN/of attacks/NNS/attacks /,/, tripwire/VBP/tripwire does/VBZ/does have/VB/have limitations/NNS/limitations /./. perhaps/RB/perhaps the/DT/the most/RBS/most obvious/JJ/obvious is/VBZ/is the/DT/the need/NN/need to/TO/to protect/VB/protect the/DT/the tripwire/NN/tripwire program/NN/program and/CC/and its/PRP$/its associated/VBN/associated files/NNS/files /,/, especially/RB/especially the/DT/the database/NN/database file/NN/file /,/, from/IN/from unauthorized/JJ/unauthorized modification/NN/modification /./. for/IN/for this/DT/this reason/NN/reason /,/, tripwire/NN/tripwire and/CC/and its/PRP$/its associated/VBN/associated files/NNS/files should/MD/should be/VB/be stored/VBN/stored on/IN/on some/DT/some tamper-proof/JJ/tamper-proof medium/NN/medium /,/, such/JJ/such as/IN/as a/DT/a write-protected/JJ/write-protected disk/NN/disk or/CC/or a/DT/a secure/NN/secure server/NN/server where/WRB/where logins/NNS/logins can/MD/can be/VB/be tightly/RB/tightly controlled/NNP/controlled. unforhm.ately/RB/unforhm.ately /,/, this/DT/this makes/VBZ/makes it/PRP/it less/JJR/less convenient/JJ/convenient to/TO/to update/VB/update the/DT/the database/NN/database after/IN/after authorized/JJ/authorized updates/NNS/updates to/TO/to monitored/VBN/monitored directories/NNS/directories and/CC/and files/NNP/files. a/DT/a second/JJ/second limitation/NN/limitation is/VBZ/is that/IN/that some/DT/some security-relevant/JJ/security-relevant files-for/NN/files-for example/NN/example /,/, system/NN/system log/NN/log files-are/NN/files-are supposed/VBD/supposed to/TO/to change/VB/change over/IN/over time/NN/time /,/, and/CC/and tripwire/VB/tripwire does/VBZ/does not/RB/not provide/VB/provide a/DT/a way/NN/way to/TO/to distinguish/VB/distinguish between/IN/between an/DT/an authorized/JJ/authorized and/CC/and an/DT/an unauthorized/JJ/unauthorized change/NNP/change. so/RB/so /,/, for/IN/for example/NN/example /,/, an/DT/an attack/NN/attack that/IN/that modifies/NNS/modifies /VBP/( without/IN/without deleting/VBG/deleting /:/) a/DT/a system/NN/system log/NN/log that/WDT/that would/MD/would normally/RB/normally change/VB/change anyway/NN/anyway would/MD/would escape/VB/escape tripwire/NN/tripwire 's/POS/'s detection/NN/detection capabilities/NNP/capabilities. the/DT/the best/JJS/best tripwire/NN/tripwire can/MD/can do/VB/do in/IN/in this/DT/this case/NN/case is/VBZ/is to/TO/to detectcertain/VB/detectcertain obvious/JJ/obvious inconsistencies/NNS/inconsistencies /:/( for/IN/for example/NN/example /,/, a/DT/a shrinking/NN/shrinking log/NN/log file/NN/file /:/) /./. free/JJ/free and/CC/and commercial/JJ/commercial versions/NNS/versions of/IN/of tripwire/NN/tripwire are/VBP/are available/JJ/available from/IN/from http/NN/http /:/: //:// /tripwire.org/JJ//tripwire.org and.http/NN/and.http /:/: //:// /tripwire.com/JJ//tripwire.com /./. 660/CD/660 chapter/NN/chapter 15/CD/15 section/NN/section of/IN/of the/DT/the system/NNP/system. the/DT/the antivirus/NN/antivirus software/NN/software analyzes/VBZ/analyzes the/DT/the behavior/NN/behavior of/IN/of the/DT/the code/NN/code in/IN/in the/DT/the sandbox/NN/sandbox before/IN/before letting/VBG/letting it/PRP/it run/VBP/run unmonitored/NNP/unmonitored. some/DT/some antivirus/NN/antivirus programs/NNS/programs also/RB/also put/VBD/put up/RP/up a/DT/a complete/JJ/complete shield/NN/shield rather/RB/rather than/IN/than just/RB/just scanning/VBG/scanning files/NNS/files within/IN/within a/DT/a file/NN/file system/NN/system /./. they/PRP/they search/VBP/search boot/NN/boot sectors/NNS/sectors /,/, menlory/NN/menlory /,/, inbound/NN/inbound and/CC/and outbound/NN/outbound e-mail/NN/e-mail /,/, files/NNS/files as/IN/as they/PRP/they are/VBP/are downloaded/VBN/downloaded /,/, files/NNS/files on/IN/on removable/JJ/removable devices/NNS/devices or/CC/or media/NNS/media /,/, and/CC/and so/RB/so on/IN/on /./. the/DT/the best/JJS/best protection/NN/protection against/IN/against computer/NN/computer viruses/NNS/viruses is/VBZ/is prevention/NN/prevention /,/, or/CC/or the/DT/the practice/NN/practice of/IN/of purchasing/VBG/purchasing unopened/VBN/unopened software/NN/software from/IN/from vendors/NNS/vendors and/CC/and avoiding/VBG/avoiding free/JJ/free or/CC/or pirated/VBN/pirated copies/NNS/copies from/IN/from public/JJ/public sources/NNS/sources or/CC/or disk/VB/disk exchange/NN/exchange offer/NN/offer the/DT/the safest/JJS/safest route/NN/route to/TO/to preventing/VBG/preventing infection/NNP/infection. however/RB/however /,/, even/RB/even new/JJ/new copies/NNS/copies of/IN/of legitimate/JJ/legitimate software/NN/software applications/NNS/applications are/VBP/are not/RB/not immune/JJ/immune to/TO/to virus/NN/virus infection/NN/infection /:/: in/IN/in a/DT/a few/JJ/few cases/NNS/cases /,/, disgruntled/VBD/disgruntled employees/NNS/employees of/IN/of a/DT/a software/NN/software company/NN/company have/VBP/have infected/VBN/infected the/DT/the master/NN/master copies/NNS/copies of/IN/of software/NN/software programs/NNS/programs to/TO/to do/VB/do economic/JJ/economic harm/NN/harm to/TO/to the/DT/the company/NNP/company. for/IN/for macro/NN/macro viruses/NNS/viruses /,/, one/CD/one defense/NN/defense is/VBZ/is to/TO/to exchange/NN/exchange microsoft/NN/microsoft word/NN/word documents/NNS/documents in/IN/in an/DT/an alternative/NN/alternative file/NN/file format/NN/format called/VBN/called unlike/NN/unlike the/DT/the native/JJ/native word/NN/word format/NN/format rtf/NN/rtf does/VBZ/does not/RB/not include/VB/include the/DT/the capability/NN/capability to/TO/to attach/VB/attach macros/NNS/macros /./. another/DT/another defense/NN/defense is/VBZ/is to/TO/to avoid/VB/avoid opening/VBG/opening any/DT/any e-mail/JJ/e-mail attachments/NNS/attachments from/IN/from unknown/NN/unknown users/NNP/users. unfortunately/RB/unfortunately /,/, history/NN/history has/VBZ/has shown/VBN/shown that/IN/that e-mail/JJ/e-mail vulnerabilities/NNS/vulnerabilities appear/VBP/appear as/RB/as fast/JJ/fast as/IN/as they/PRP/they are/VBP/are fixed/NNP/fixed. for/IN/for example/NN/example /,/, in/IN/in 2000/CD/2000 /,/, the/DT/the love/NN/love bug/NN/bug virus/VBZ/virus became/NN/became very/RB/very widespread/JJ/widespread by/IN/by traveling/NN/traveling in/IN/in e-mail/JJ/e-mail messages/NNS/messages that/WDT/that pretended/VBD/pretended to/TO/to be/VB/be love/JJ/love notes/NNS/notes sent/VBN/sent by/IN/by friends/NNS/friends of/IN/of the/DT/the receivers/NNP/receivers. once/RB/once a/DT/a receiver/NN/receiver opened/VBN/opened the/DT/the attached/VBN/attached visual/JJ/visual basic/JJ/basic script/NN/script /,/, the/DT/the virus/NN/virus propagated/VBD/propagated by/IN/by sending/NN/sending itself/PRP/itself to/TO/to the/DT/the first/JJ/first addresses/NNS/addresses in/IN/in the/DT/the receiver/NN/receiver 's/POS/'s e-mail/JJ/e-mail contact/NN/contact list/NNP/list. fortunately/RB/fortunately /,/, except/IN/except for/IN/for clogging/NN/clogging e-mail/NN/e-mail systems/NNS/systems and/CC/and users/NNS/users '/POS/' inboxes/NNS/inboxes /,/, it/PRP/it was/VBD/was relatively/RB/relatively harmless/NNP/harmless. it/PRP/it did/VBD/did /,/, however/RB/however /,/, effectively/RB/effectively negate/JJ/negate the/DT/the defensive/JJ/defensive strategy/NN/strategy of/IN/of opening/VBG/opening attachments/NNS/attachments only/RB/only from/IN/from people/NNS/people known/VBN/known to/TO/to the/DT/the receiver/NNP/receiver. a/DT/a more/JJR/more effective/JJ/effective defense/NN/defense method/NN/method is/VBZ/is to/TO/to avoid/VB/avoid opening/VBG/opening any/DT/any e-mail/JJ/e-mail attachment/NN/attachment that/WDT/that contains/VBZ/contains executable/JJ/executable code/NNP/code. some/DT/some companies/NNS/companies now/RB/now enforce/VBP/enforce this/DT/this as/IN/as policy/NN/policy by/IN/by removing/NN/removing all/DT/all incoming/VBG/incoming attachments/NNS/attachments to/TO/to e-mail/JJ/e-mail messages/NNS/messages /./. another/DT/another safeguard/NN/safeguard /,/, although/IN/although it/PRP/it does/VBZ/does not/RB/not prevent/VB/prevent infection/NN/infection /,/, does/VBZ/does permit/NN/permit early/RB/early detection/NNP/detection. a/DT/a user/NN/user must/MD/must begin/VB/begin by/IN/by completely/RB/completely reformatting/VBG/reformatting the/DT/the hard/JJ/hard disk/NN/disk /,/, especially/RB/especially the/DT/the boot/NN/boot sector/NN/sector /,/, which/WDT/which is/VBZ/is often/RB/often targeted/VBN/targeted for/IN/for viral/JJ/viral attack/NN/attack only/RB/only secure/VBP/secure software/NN/software is/VBZ/is uploaded/VBN/uploaded /,/, and/CC/and a/DT/a signature/NN/signature of/IN/of each/DT/each program/NN/program is/VBZ/is taken/VBN/taken via/IN/via a/DT/a secure/NN/secure message-digest/JJS/message-digest computation/NNP/computation. the/DT/the resulting/VBG/resulting filename/NN/filename and/CC/and associated/VBN/associated messagedigest/NN/messagedigest list/NN/list must/MD/must then/RB/then be/VB/be kept/VBN/kept free/JJ/free from/IN/from unauthorized/JJ/unauthorized access/NNP/access. periodically/RB/periodically /,/, or/CC/or each/DT/each time/NN/time a/DT/a program/NN/program is/VBZ/is run/VBN/run /,/, the/DT/the operating/NN/operating system/NN/system recomputes/VBZ/recomputes the/DT/the signature/NN/signature and/CC/and compares/VBZ/compares it/PRP/it with/IN/with the/DT/the signature/NN/signature on/IN/on the/DT/the original/JJ/original list/NN/list ;/:/; any/DT/any differences/NNS/differences serve/VBP/serve as/IN/as a/DT/a warning/NN/warning of/IN/of possible/JJ/possible infection/NNP/infection. this/DT/this technique/NN/technique can/MD/can be/VB/be combined/VBN/combined with/IN/with others/NNP/others. for/IN/for example/NN/example /,/, a/DT/a high-overhead/JJ/high-overhead antivirus/NN/antivirus scan/NN/scan /,/, such/JJ/such as/IN/as a/DT/a sandbox/NN/sandbox /,/, can/MD/can be/VB/be used/VBN/used ;/:/; and/CC/and if/IN/if a/DT/a program/NN/program passes/NNS/passes the/DT/the test/NN/test /,/, a/DT/a signature/NN/signature can/MD/can be/VB/be created/VBN/created for/IN/for it/NNP/it. if/IN/if the/DT/the signatures/NNS/signatures match/VBP/match the/DT/the next/JJ/next time/NN/time the/DT/the program/NN/program is/VBZ/is run/VBN/run /,/, it/PRP/it does/VBZ/does not/RB/not need/VBP/need to/TO/to be/VB/be virus-scanned/JJ/virus-scanned again/NN/again /./. 15.6.5/CD/15.6.5 auditing/VBG/auditing /,/, accounting/VBG/accounting /,/, and/CC/and logging/VBG/logging auditing/NN/auditing /,/, accounting/VBG/accounting /,/, and/CC/and logging/VBG/logging can/MD/can decrease/VB/decrease system/NN/system performance/NN/performance /,/, but/CC/but they/PRP/they are/VBP/are useful/JJ/useful in/IN/in several/JJ/several areas/NNS/areas /,/, including/VBG/including security/NNP/security. logging/NN/logging can/MD/can be/VB/be general/JJ/general or/CC/or specific/NNP/specific. all/DT/all system-call/JJ/system-call executions/NNS/executions can/MD/can be/VB/be logged/VBN/logged for/IN/for analysis/NN/analysis of/IN/of program/NN/program behavior/NN/behavior /:/( or/CC/or misbehavior/JJ/misbehavior /NN/) /./. more/JJR/more typically/RB/typically /,/, suspicious/JJ/suspicious events/NNS/events are/VBP/are logged/VBN/logged /./. authentication/NN/authentication failures/NNS/failures and/CC/and authorization/NN/authorization failures/NNS/failures can/MD/can tell/VB/tell us/PRP/us quite/RB/quite a/DT/a lot/NN/lot about/IN/about break-in/NNP/break-in attempts/NNS/attempts /./. 15/CD/15 15.7/CD/15.7 661/CD/661 accounting/VBG/accounting is/VBZ/is another/DT/another potential/JJ/potential tool/NN/tool in/IN/in a/DT/a security/NN/security administrator/NN/administrator 's/POS/'s kit/NNP/kit. it/PRP/it can/MD/can be/VB/be used/VBN/used to/TO/to find/VB/find performance/NN/performance changes/NNS/changes /,/, which/WDT/which in/IN/in tum/NN/tum can/MD/can reveal/VB/reveal security/NN/security problems/NNP/problems. one/CD/one of/IN/of the/DT/the early/JJ/early unix/NN/unix computer/NN/computer break-ins/NNS/break-ins was/VBD/was detected/VBN/detected by/IN/by cliff/NN/cliff stoll/NN/stoll when/WRB/when he/PRP/he was/VBD/was exam5ning/NNP/exam5ning accounting/NN/accounting logs/NNS/logs and/CC/and spotted/VBD/spotted an/DT/an anomaly/RB/anomaly /./. we/PRP/we turn/VBP/turn next/JJ/next to/TO/to the/DT/the question/NN/question of/IN/of how/WRB/how a/DT/a trusted/JJ/trusted computer/NN/computer can/MD/can be/VB/be connected/VBN/connected safely/RB/safely to/TO/to an/DT/an untrustworthy/JJ/untrustworthy network/NN/network one/CD/one solution/NN/solution is/VBZ/is the/DT/the use/NN/use of/IN/of a/DT/a firewall/NN/firewall to/TO/to separate/JJ/separate trusted/JJ/trusted and/CC/and unh/NN/unh usted/VBD/usted systems/NNP/systems. a/DT/a is/VBZ/is a/DT/a computer/NN/computer /,/, appliance/NN/appliance /,/, or/CC/or router/NN/router that/IN/that sits/NNS/sits between/IN/between the/DT/the trusted/VBN/trusted and/CC/and the/DT/the untrusted/NNP/untrusted. a/DT/a network/NN/network firewall/NN/firewall limits/NNS/limits network/NN/network access/NN/access between/IN/between the/DT/the two/CD/two and/CC/and monitors/NNS/monitors and/CC/and logs/NNS/logs all/DT/all connections/NNP/connections. it/PRP/it can/MD/can also/RB/also limit/VB/limit coru1.ections/NNS/coru1.ections based/VBN/based on/IN/on source/NN/source or/CC/or destination/NN/destination address/NN/address /,/, source/NN/source or/CC/or destination/NN/destination port/NN/port /,/, or/CC/or direction/NN/direction of/IN/of the/DT/the connection/NNP/connection. for/IN/for instance/NN/instance /,/, web/NN/web servers/NNS/servers use/VBP/use http/NN/http to/TO/to communicate/VB/communicate with/IN/with web/NN/web browsers/NNP/browsers. a/DT/a firewall/NN/firewall therefore/NN/therefore may/MD/may allow/VB/allow only/RB/only http/VB/http to/TO/to pass/VB/pass from/IN/from all/DT/all hosts/NNS/hosts outside/VBP/outside the/DT/the firewall/NN/firewall to/TO/to the/DT/the web/NN/web server/NN/server within/IN/within the/DT/the firewall/NN/firewall the/DT/the morris/NN/morris internet/NN/internet worm/NN/worm used/VBD/used the/DT/the finger/NN/finger protocol/NN/protocol to/TO/to break/VB/break into/IN/into computers/NNS/computers /,/, so/RB/so finger/JJR/finger would/MD/would not/RB/not be/VB/be allowed/VBN/allowed to/TO/to pass/VB/pass /,/, for/IN/for example/NN/example /./. in/IN/in fact/NN/fact /,/, a/DT/a network/NN/network firewall/NN/firewall can/MD/can separate/VB/separate a/DT/a network/NN/network into/IN/into multiple/NN/multiple domains/NNS/domains /./. a/DT/a common/JJ/common implementation/NN/implementation has/VBZ/has the/DT/the internet/NN/internet as/IN/as the/DT/the untrusted/VBN/untrusted domain/NN/domain ;/:/; a/DT/a semitrusted/VBN/semitrusted and/CC/and semisecure/NN/semisecure network/NN/network /,/, called/VBN/called the/DT/the as/IN/as another/DT/another domain/NN/domain ;/:/; and/CC/and a/DT/a company/NN/company 's/POS/'s computers/NNS/computers as/IN/as a/DT/a third/JJ/third domain/NN/domain /:/( figure/NN/figure 15.10/CD/15.10 /CD/) /./. coru1.ections/NNS/coru1.ections are/VBP/are allowed/VBN/allowed from/IN/from the/DT/the internet/NN/internet to/TO/to the/DT/the dmz/NN/dmz computers/NNS/computers and/CC/and from/IN/from the/DT/the company/NN/company computers/NNS/computers to/TO/to the/DT/the internet/NN/internet but/CC/but are/VBP/are not/RB/not allowed/VBN/allowed from/IN/from the/DT/the internet/NN/internet or/CC/or dmz/NN/dmz computers/NNS/computers to/TO/to the/DT/the company/NN/company computers/NNP/computers. optionally/RB/optionally /,/, controlled/VBN/controlled commurucations/NNS/commurucations may/MD/may be/VB/be allowed/VBN/allowed between/IN/between the/DT/the dmz/NN/dmz and/CC/and one/CD/one company/NN/company computer/NN/computer or/CC/or more/NNP/more. for/IN/for instance/NN/instance /,/, a/DT/a web/NN/web server/NN/server on/IN/on the/DT/the dmz/NN/dmz may/MD/may need/VB/need to/TO/to query/VB/query a/DT/a database/NN/database server/NN/server on/IN/on the/DT/the corporate/JJ/corporate network/NN/network with/IN/with a/DT/a firewall/NN/firewall /,/, however/RB/however /,/, access/NN/access is/VBZ/is contained/VBN/contained /,/, and/CC/and any/DT/any dmz/NN/dmz systems/NNS/systems that/WDT/that are/VBP/are broken/VBN/broken into/IN/into still/RB/still are/VBP/are unable/JJ/unable to/TO/to access/NN/access the/DT/the company/NN/company computers/NNS/computers /./. internet/NN/internet internet/NN/internet access/NN/access from/IN/from company/NN/company 's/POS/'s computers/NNS/computers r---------i/-NONE-/r---------i company/NN/company computers/NNS/computers access/NN/access between/IN/between dmz/NN/dmz and/CC/and company/NN/company 's/POS/'s computers/NNS/computers figure/VBP/figure 15.10/CD/15.10 domain/NN/domain separation/NN/separation via/IN/via firewall/NN/firewall /./. 662/CD/662 chapter/NN/chapter 15/CD/15 15.8/CD/15.8 of/IN/of course/NN/course /,/, a/DT/a firewall/NN/firewall itself/PRP/itself must/MD/must be/VB/be secure/NN/secure and/CC/and attack-proof/JJ/attack-proof ;/:/; otherwise/NN/otherwise /,/, its/PRP$/its ability/NN/ability to/TO/to secure/VB/secure connections/NNS/connections can/MD/can be/VB/be compromised/NNP/compromised. furthermore/NN/furthermore /,/, firewalls/NNS/firewalls do/VBP/do not/RB/not prevent/VB/prevent attacks/NNS/attacks that/WDT/that or/CC/or travel/NN/travel within/IN/within protocols/NNS/protocols or/CC/or com1ections/NNS/com1ections that/IN/that the/DT/the firewall/NN/firewall allows/NNP/allows. a/DT/a buffer-overflow/JJ/buffer-overflow attack/NN/attack to/TO/to a/DT/a web/NN/web server/NN/server will/MD/will not/RB/not be/VB/be stopped/VBN/stopped by/IN/by the/DT/the firewall/NN/firewall /,/, for/IN/for example/NN/example /,/, because/IN/because the/DT/the http/NN/http connection/NN/connection is/VBZ/is allowed/VBN/allowed ;/:/; it/PRP/it is/VBZ/is the/DT/the contents/NNS/contents of/IN/of the/DT/the http/NN/http connection/NN/connection that/WDT/that house/NN/house the/DT/the attack/NNP/attack. likewise/NN/likewise /,/, denialof/NNP/denialof- service/NN/service attacks/NNS/attacks can/MD/can affect/VB/affect firewalls/NNS/firewalls as/IN/as much/JJ/much as/IN/as any/DT/any other/JJ/other machines/NNP/machines. another/DT/another vulnerability/NN/vulnerability of/IN/of firewalls/NNS/firewalls is/VBZ/is in/IN/in which/WDT/which an/DT/an unauthorized/JJ/unauthorized host/NN/host pretends/NNS/pretends to/TO/to be/VB/be an/DT/an authorized/JJ/authorized host/NN/host by/IN/by meeting/NN/meeting some/DT/some authorization/NN/authorization criterion/NNP/criterion. for/IN/for example/NN/example /,/, if/IN/if a/DT/a firewall/NN/firewall rule/NN/rule allows/VBZ/allows a/DT/a connection/NN/connection from/IN/from a/DT/a host/NN/host and/CC/and identifies/NNS/identifies that/WDT/that host/NN/host by/IN/by its/PRP$/its ip/NN/ip address/NN/address /,/, then/RB/then another/DT/another host/NN/host could/MD/could send/VB/send packets/NNS/packets using/VBG/using that/IN/that same/JJ/same address/NN/address and/CC/and be/VB/be allowed/VBN/allowed through/IN/through the/DT/the firewall/NN/firewall /./. in/IN/in addition/NN/addition to/TO/to the/DT/the most/JJS/most common/JJ/common network/NN/network firewalls/NNS/firewalls /,/, there/EX/there are/VBP/are other/JJ/other /,/, newer/NN/newer kinds/NNS/kinds of/IN/of firewalls/NNS/firewalls /,/, each/DT/each with/IN/with its/PRP$/its pros/NNS/pros and/CC/and cons/NNP/cons. a/DT/a is/VBZ/is a/DT/a software/NN/software layer/NN/layer either/DT/either included/VBD/included with/IN/with the/DT/the operating/NN/operating system/NN/system or/CC/or added/VBD/added as/IN/as an/DT/an application/NNP/application. rather/RB/rather than/IN/than limiting/VBG/limiting communication/NN/communication between/IN/between security/NN/security domains/NNS/domains /,/, it/PRP/it limits/VBZ/limits communication/NN/communication to/TO/to /VB/( and/CC/and possibly/RB/possibly from/IN/from /CD/) a/DT/a given/VBN/given host/NNP/host. a/DT/a user/NN/user could/MD/could add/VB/add a/DT/a personal/JJ/personal firewall/NN/firewall to/TO/to her/PRP$/her pc/NN/pc so/IN/so that/IN/that a/DT/a trojan/NN/trojan horse/NN/horse would/MD/would be/VB/be denied/VBN/denied access/NN/access to/TO/to the/DT/the network/NN/network to/TO/to which/WDT/which the/DT/the pc/NN/pc is/VBZ/is connected/VBN/connected /,/, for/IN/for example/NNP/example. an/DT/an prex-y/JJ/prex-y understands/NNS/understands the/DT/the protocols/NNS/protocols that/WDT/that applications/NNS/applications speak/VBP/speak across/IN/across the/DT/the network/NN/network /./. for/IN/for example/NN/example /,/, smtp/NN/smtp is/VBZ/is used/VBN/used for/IN/for mail/NN/mail transfer/NNP/transfer. an/DT/an application/NN/application proxy/NN/proxy accepts/NNS/accepts a/DT/a com1ection/NN/com1ection just/RB/just as/IN/as an/DT/an smtp/NN/smtp server/NN/server would/MD/would and/CC/and then/RB/then initiates/VBZ/initiates a/DT/a connection/NN/connection to/TO/to the/DT/the original/JJ/original destination/NN/destination smtp/NN/smtp server/NNP/server. it/PRP/it can/MD/can monitor/VB/monitor the/DT/the traffic/JJ/traffic as/IN/as it/PRP/it forwards/VBZ/forwards the/DT/the message/NN/message /,/, watching/VBG/watching for/IN/for and/CC/and disabling/VBG/disabling illegal/JJ/illegal commands/NNS/commands /,/, attempts/VBZ/attempts to/TO/to exploit/VB/exploit bugs/NNS/bugs /,/, and/CC/and so/RB/so on/NNP/on. some/DT/some firewalls/NNS/firewalls are/VBP/are designed/VBN/designed for/IN/for one/CD/one specific/JJ/specific protocol/NNP/protocol. an/DT/an for/IN/for example/NN/example /,/, has/VBZ/has the/DT/the specific/JJ/specific purpose/NN/purpose of/IN/of analyzing/VBG/analyzing xml/NN/xml traffic/NN/traffic and/CC/and blocking/VBG/blocking disallowed/VBN/disallowed or/CC/or malformed/VBN/malformed xml/NNP/xml. sit/NN/sit between/IN/between applications/NNS/applications and/CC/and the/DT/the kernel/NN/kernel /,/, monitoring/VBG/monitoring system-call/JJ/system-call execution/NNP/execution. for/IN/for example/NN/example /,/, in/IN/in solaris/NNS/solaris 10/CD/10 /,/, the/DT/the least/JJS/least privilege/NN/privilege feature/NN/feature implements/NNS/implements a/DT/a list/NN/list of/IN/of more/JJR/more than/IN/than fifty/JJ/fifty system/NN/system calls/VBZ/calls that/IN/that processes/NNS/processes may/MD/may or/CC/or may/MD/may not/RB/not be/VB/be allowed/VBN/allowed to/TO/to make/NNP/make. a/DT/a process/NN/process that/WDT/that does/VBZ/does not/RB/not need/VBP/need to/TO/to spawn/VB/spawn other/JJ/other processes/NNS/processes can/MD/can have/VB/have that/DT/that ability/NN/ability taken/VBN/taken away/RB/away /,/, for/IN/for instance/NN/instance /./. the/DT/the u.s/NNP/u.s. department/NN/department of/IN/of defense/NN/defense trusted/VBN/trusted computer/NN/computer system/NN/system evaluation/NN/evaluation criteria/NNS/criteria specify/VBP/specify four/CD/four security/NN/security classifications/NNS/classifications in/IN/in systems/NNS/systems /:/: a/DT/a /,/, b/NN/b /,/, c/NN/c /,/, and/CC/and d/NNP/d. this/DT/this specification/NN/specification is/VBZ/is widely/RB/widely used/VBN/used to/TO/to determine/VB/determine the/DT/the security/NN/security of/IN/of a/DT/a facility/NN/facility and/CC/and to/TO/to model/VB/model security/NN/security solutions/NNS/solutions /,/, so/RB/so we/PRP/we explore/VBP/explore it/PRP/it here/NNP/here. the/DT/the lowest-level/NNP/lowest-level classification/NN/classification is/VBZ/is division/NN/division d/NN/d /,/, or/CC/or minimal/JJ/minimal protection/NNP/protection. division/NN/division d/VBD/d includes/VBZ/includes only/RB/only one/CD/one class/NN/class and/CC/and is/VBZ/is used/VBN/used for/IN/for systems/NNS/systems that/WDT/that have/VBP/have failed/VBN/failed to/TO/to meet/VB/meet the/DT/the requirements/NNS/requirements of/IN/of any/DT/any of/IN/of the/DT/the other/JJ/other security/NN/security classes/NNS/classes /./. for/IN/for instance/NN/instance /,/, ms-dos/NNP/ms-dos and/CC/and windows/VBZ/windows 3.1/CD/3.1 are/VBP/are in/IN/in division/NN/division d/NN/d /./. division/NN/division c/NN/c /,/, the/DT/the next/JJ/next level/NN/level of/IN/of security/NN/security /,/, provides/VBZ/provides discretionary/JJ/discretionary protection/NN/protection and/CC/and accountability/NN/accountability of/IN/of users/NNS/users and/CC/and their/PRP$/their actions/NNS/actions through/IN/through the/DT/the use/NN/use of/IN/of audit/NN/audit capabilities/NNS/capabilities /./. division/NN/division c/NN/c has/VBZ/has two/CD/two levels/NNS/levels /:/: c1/NNP/c1 and/CC/and c2/NNP/c2. a/DT/a c1-class/JJ/c1-class system/NN/system incorporates/NNS/incorporates some/DT/some form/NN/form of/IN/of controls/NNS/controls that/WDT/that allow/VBP/allow users/NNS/users to/TO/to protect/VB/protect private/JJ/private information/NN/information and/CC/and to/TO/to keep/VB/keep other/JJ/other users/NNS/users from/IN/from accidentally/RB/accidentally reading/VBG/reading or/CC/or destroying/VBG/destroying their/PRP$/their data/NNP/data. a/DT/a c1/NNP/c1 environment/NN/environment is/VBZ/is one/CD/one in/IN/in which/WDT/which cooperating/VBG/cooperating users/NNS/users access/NN/access data/NNS/data at/IN/at the/DT/the same/JJ/same levels/NNS/levels of/IN/of sensitivity/NNP/sensitivity. most/RBS/most versions/NNS/versions of/IN/of unix/NN/unix are/VBP/are c1/NNP/c1 class/NN/class /./. 15.8/CD/15.8 663/CD/663 the/DT/the total/JJ/total of/IN/of all/DT/all protection/NN/protection systems/NNS/systems within/IN/within a/DT/a computer/NN/computer system/NN/system /:/( hardware/NN/hardware /,/, software/NN/software /,/, firmware/NN/firmware /:/) that/IN/that correctly/RB/correctly enforce/VB/enforce a/DT/a security/NN/security policy/NN/policy is/VBZ/is known/VBN/known as/IN/as a/DT/a the/DT/the tcb/NN/tcb of/IN/of a/DT/a cl/NN/cl system/NN/system controls/NNS/controls access/NN/access between/IN/between users/NNS/users and/CC/and files/NNS/files by/IN/by allowing/VBG/allowing the/DT/the user/NN/user to/TO/to specify/VB/specify and/CC/and control/NN/control sharing/VBG/sharing of/IN/of objects/NNS/objects by/IN/by named/VBN/named individuals/NNS/individuals or/CC/or defined/VBN/defined groups/NNP/groups. in/IN/in addition/NN/addition /,/, the/DT/the tcb/NN/tcb requires/VBZ/requires that/IN/that the/DT/the users/NNS/users identify/VBP/identify themselves/PRP/themselves before/IN/before they/PRP/they start/VBP/start any/DT/any activities/NNS/activities that/WDT/that the/DT/the tcb/NN/tcb is/VBZ/is expected/VBN/expected to/TO/to mediate/NNP/mediate. this/DT/this identification/NN/identification is/VBZ/is accomplished/VBN/accomplished via/IN/via a/DT/a protected/VBN/protected mechanism/NN/mechanism or/CC/or password/NN/password ;/:/; the/DT/the tcb/NN/tcb protects/VBZ/protects the/DT/the authentication/NN/authentication data/NNS/data so/RB/so that/IN/that they/PRP/they are/VBP/are inaccessible/JJ/inaccessible to/TO/to unauthorized/JJ/unauthorized users/NNS/users /./. a/DT/a c2-class/JJ/c2-class system/NN/system adds/VBZ/adds an/DT/an individual-level/JJ/individual-level access/NN/access control/NN/control to/TO/to the/DT/the requirements/NNS/requirements of/IN/of a/DT/a cl/NN/cl system/NNP/system. for/IN/for example/NN/example /,/, access/NN/access rights/NNS/rights of/IN/of a/DT/a file/NN/file can/MD/can be/VB/be specified/VBN/specified to/TO/to the/DT/the level/NN/level of/IN/of a/DT/a single/JJ/single individual/NNP/individual. in/IN/in addition/NN/addition /,/, the/DT/the system/NN/system adrninistrator/NN/adrninistrator can/MD/can selectively/RB/selectively audit/VB/audit the/DT/the actions/NNS/actions of/IN/of any/DT/any one/CD/one or/CC/or more/JJR/more users/NNS/users based/VBN/based on/IN/on individual/JJ/individual identity/NNP/identity. the/DT/the tcb/NN/tcb also/RB/also protects/VBZ/protects itself/PRP/itself from/IN/from modification/NN/modification of/IN/of its/PRP$/its code/NN/code or/CC/or data/NNS/data structures/NNP/structures. in/IN/in addition/NN/addition /,/, no/DT/no information/NN/information produced/VBN/produced by/IN/by a/DT/a prior/JJ/prior user/NN/user is/VBZ/is available/JJ/available to/TO/to another/DT/another user/NN/user who/WP/who accesses/NNS/accesses a/DT/a storage/NN/storage object/NN/object that/WDT/that has/VBZ/has been/VBN/been released/VBN/released back/RP/back to/TO/to the/DT/the system/NNP/system. some/DT/some speciat/NN/speciat secure/NN/secure versions/NNS/versions of/IN/of unix/NN/unix have/VBP/have been/VBN/been certified/VBN/certified at/IN/at the/DT/the c2/NNP/c2 level/NN/level /./. division-b/NN/division-b mandatory-protection/NN/mandatory-protection systems/NNS/systems have/VBP/have all/DT/all the/DT/the properties/NNS/properties of/IN/of a/DT/a classc2/NNP/classc2 system/NN/system ;/:/; in/IN/in addition/NN/addition /,/, they/PRP/they attach/VBP/attach a/DT/a sensitivity/NN/sensitivity label/NN/label to/TO/to each/DT/each object/NNP/object. the/DT/the bl-class/NN/bl-class tcb/NN/tcb maintains/VBZ/maintains the/DT/the security/NN/security label/NN/label of/IN/of each/DT/each object/NN/object in/IN/in the/DT/the system/NN/system ;/:/; the/DT/the label/NN/label is/VBZ/is used/VBN/used for/IN/for decisions/NNS/decisions pertaining/VBG/pertaining to/TO/to mandatory/NN/mandatory access/NN/access control/NNP/control. for/IN/for example/NN/example /,/, a/DT/a user/NN/user at/IN/at the/DT/the confidential/JJ/confidential level/NN/level could/MD/could not/RB/not access/VB/access a/DT/a file/NN/file at/IN/at the/DT/the more/RBR/more sensitive/JJ/sensitive secret/NN/secret level/NNP/level. the/DT/the tcb/NN/tcb also/RB/also denotes/VBZ/denotes the/DT/the sensitivity/NN/sensitivity level/NN/level at/IN/at the/DT/the top/JJ/top and/CC/and bottom/NN/bottom of/IN/of each/DT/each page/NN/page of/IN/of any/DT/any human-readable/JJ/human-readable output/NNP/output. in/IN/in addition/NN/addition to/TO/to the/DT/the normal/JJ/normal user-namepassword/NN/user-namepassword authentication/NN/authentication information/NN/information /,/, the/DT/the tcb/NN/tcb also/RB/also maintains/VBZ/maintains the/DT/the clearance/NN/clearance and/CC/and authorizations/NNS/authorizations of/IN/of individual/JJ/individual users/NNS/users and/CC/and will/MD/will support/VB/support at/IN/at least/JJS/least two/CD/two levels/NNS/levels of/IN/of security/NNP/security. these/DT/these levels/NNS/levels are/VBP/are hierarchicat/RB/hierarchicat so/RB/so that/IN/that a/DT/a user/NN/user may/MD/may access/NN/access any/DT/any objects/NNS/objects that/WDT/that carry/VBP/carry sensitivity/NN/sensitivity labels/NNS/labels equal/JJ/equal to/TO/to or/CC/or lower/JJR/lower than/IN/than his/PRP$/his security/NN/security clearance/NNP/clearance. for/IN/for example/NN/example /,/, a/DT/a secret-level/JJ/secret-level user/NN/user could/MD/could access/NN/access a/DT/a file/NN/file at/IN/at the/DT/the confidential/JJ/confidential level/NN/level in/IN/in the/DT/the absence/NN/absence of/IN/of other/JJ/other access/NN/access controls/NNP/controls. processes/NNS/processes are/VBP/are also/RB/also isolated/VBN/isolated through/IN/through the/DT/the use/NN/use of/IN/of distinct/NN/distinct address/NN/address spaces/NNS/spaces /./. a/DT/a b2-class/JJ/b2-class system/NN/system extends/NNS/extends the/DT/the sensitivity/NN/sensitivity labels/NNS/labels to/TO/to each/DT/each system/NN/system resource/NN/resource /,/, such/JJ/such as/IN/as storage/NN/storage objects/NNP/objects. physical/JJ/physical devices/NNS/devices are/VBP/are assigned/VBN/assigned minimum/JJ/minimum and/CC/and maximum/NN/maximum security/NN/security levels/NNS/levels that/WDT/that the/DT/the system/NN/system uses/VBZ/uses to/TO/to enforce/VB/enforce constraints/NNS/constraints imposed/VBN/imposed by/IN/by the/DT/the physical/JJ/physical environments/NNS/environments in/IN/in which/WDT/which the/DT/the devices/NNS/devices are/VBP/are located/NNP/located. in/IN/in addition/NN/addition /,/, a/DT/a b2/NNP/b2 system/NN/system supports/NNS/supports covert/NN/covert channels/NNS/channels and/CC/and the/DT/the auditing/NN/auditing of/IN/of events/NNS/events that/WDT/that could/MD/could lead/VB/lead to/TO/to the/DT/the exploitation/NN/exploitation of/IN/of a/DT/a covert/NN/covert channel/NN/channel /./. a/DT/a b3-class/JJ/b3-class system/NN/system allows/VBZ/allows the/DT/the creation/NN/creation of/IN/of access-control/JJ/access-control lists/NNS/lists that/WDT/that denote/NN/denote users/NNS/users or/CC/or groups/NNS/groups not/RB/not granted/VBN/granted access/NN/access to/TO/to a/DT/a given/VBN/given named/VBN/named object/NNP/object. the/DT/the tcb/NN/tcb also/RB/also contains/VBZ/contains a/DT/a mechanism/NN/mechanism to/TO/to monitor/NN/monitor events/NNS/events that/WDT/that may/MD/may indicate/VB/indicate a/DT/a violation/NN/violation of/IN/of security/NN/security policy/NNP/policy. the/DT/the mechanism/NN/mechanism notifies/NNS/notifies the/DT/the security/NN/security administrator/NN/administrator and/CC/and /,/, if/IN/if necessary/JJ/necessary /,/, terminates/VBZ/terminates the/DT/the event/NN/event in/IN/in the/DT/the least/JJS/least disruptive/JJ/disruptive manner/NN/manner /./. the/DT/the highest-level/JJ/highest-level classification/NN/classification is/VBZ/is division/NN/division a/NNP/a. architecturally/RB/architecturally /,/, a/DT/a class-al/JJ/class-al system/NN/system is/VBZ/is functionally/RB/functionally equivalent/JJ/equivalent to/TO/to a/DT/a b3/NNP/b3 system/NN/system /,/, but/CC/but it/PRP/it uses/VBZ/uses formal/JJ/formal design/NN/design specifications/NNS/specifications and/CC/and verification/NN/verification techniques/NNS/techniques /,/, granting/VBG/granting a/DT/a high/JJ/high degree/NN/degree of/IN/of assurance/NN/assurance that/IN/that the/DT/the tcb/NN/tcb has/VBZ/has been/VBN/been implemented/VBN/implemented correctly/NNP/correctly. a/DT/a system/NN/system beyond/NN/beyond class/NN/class al/NN/al might/MD/might be/VB/be designed/VBN/designed and/CC/and developed/VBD/developed in/IN/in a/DT/a trusted/VBN/trusted facility/NN/facility by/IN/by trusted/VBN/trusted personnel/NN/personnel /./. the/DT/the use/NN/use of/IN/of a/DT/a tcb/NN/tcb merely/RB/merely ensures/VBZ/ensures that/IN/that the/DT/the system/NN/system can/MD/can enforce/VB/enforce aspects/NNS/aspects of/IN/of a/DT/a security/NN/security policy/NN/policy ;/:/; the/DT/the tcb/NN/tcb does/VBZ/does not/RB/not specify/VB/specify what/WP/what the/DT/the policy/NN/policy should/MD/should be/NNP/be. typically/RB/typically /,/, 664/CD/664 chapter/NN/chapter 15/CD/15 15.9/CD/15.9 a/DT/a given/VBN/given computing/NN/computing environment/NN/environment develops/NNS/develops a/DT/a security/NN/security policy/NN/policy for/IN/for and/CC/and has/VBZ/has the/DT/the plan/NN/plan by/IN/by a/DT/a security/NN/security agency/NN/agency /,/, such/JJ/such as/IN/as the/DT/the national/JJ/national computer/NN/computer security/NN/security center/NNP/center. certain/JJ/certain computing/NN/computing environments/NNS/environments may/MD/may require/VB/require other/JJ/other certification/NN/certification /,/, such/JJ/such as/IN/as that/DT/that supplied/VBN/supplied by/IN/by tempest/JJS/tempest /,/, which/WDT/which guards/NNS/guards against/IN/against electronic/JJ/electronic eavesdropping/NNP/eavesdropping. for/IN/for example/NN/example /,/, a/DT/a tempest-certified/JJ/tempest-certified system/NN/system has/VBZ/has terminals/NNS/terminals that/IN/that are/VBP/are shielded/VBN/shielded to/TO/to prevent/VB/prevent electromagnetic/JJ/electromagnetic fields/NNS/fields from/IN/from escaping/NNP/escaping. this/DT/this shielding/NN/shielding ensures/VBZ/ensures that/IN/that equipment/NN/equipment outside/IN/outside the/DT/the room/NN/room or/CC/or building/VBG/building where/WRB/where the/DT/the terminal/JJ/terminal is/VBZ/is housed/VBN/housed camwt/NN/camwt detect/NN/detect what/WP/what information/NN/information is/VBZ/is being/VBG/being displayed/VBN/displayed by/IN/by the/DT/the terminal/JJ/terminal /./. microsoft/NN/microsoft windows/VBZ/windows xp/NN/xp is/VBZ/is a/DT/a general-purpose/JJ/general-purpose operating/NN/operating system/NN/system designed/VBN/designed to/TO/to support/VB/support a/DT/a variety/NN/variety of/IN/of security/NN/security features/NNS/features and/CC/and methods/NNP/methods. in/IN/in this/DT/this section/NN/section /,/, we/PRP/we examine/VBP/examine features/NNS/features that/IN/that windows/NNS/windows xp/VBP/xp uses/NNS/uses to/TO/to perform/VB/perform security/NN/security functions/NNP/functions. for/IN/for more/JJR/more information/NN/information and/CC/and background/NN/background on/IN/on wilcdows/NNS/wilcdows xp/VBP/xp /,/, see/VB/see chapter/NN/chapter 22/CD/22 /./. the/DT/the windows/NNS/windows xp/VBP/xp security/NN/security model/NN/model is/VBZ/is based/VBN/based on/IN/on the/DT/the notion/NN/notion of/IN/of windows/NNS/windows xp/VBP/xp allows/NNS/allows the/DT/the creation/NN/creation of/IN/of any/DT/any number/NN/number of/IN/of user/NN/user accounts/NNS/accounts /,/, which/WDT/which can/MD/can be/VB/be grouped/VBN/grouped in/IN/in any/DT/any manner/NNP/manner. access/NN/access to/TO/to system/NN/system objects/NNS/objects can/MD/can then/RB/then be/VB/be permitted/VBN/permitted or/CC/or denied/VBN/denied as/IN/as desired/NNP/desired. users/NNS/users are/VBP/are identified/VBN/identified to/TO/to the/DT/the system/NN/system by/IN/by a/DT/a unique/JJ/unique security/NN/security id/NN/id /./. when/WRB/when a/DT/a user/NN/user logs/NNS/logs on/IN/on /,/, windows/VBZ/windows xp/NN/xp creates/VBZ/creates a/DT/a that/IN/that includes/VBZ/includes the/DT/the security/NN/security id/VBD/id for/IN/for the/DT/the user/NN/user /,/, security/NN/security ids/NNS/ids for/IN/for any/DT/any groups/NNS/groups of/IN/of which/WDT/which the/DT/the user/NN/user is/VBZ/is a/DT/a member/NN/member /,/, and/CC/and a/DT/a list/NN/list of/IN/of any/DT/any special/JJ/special privileges/NNS/privileges that/WDT/that the/DT/the user/NN/user has/NNP/has. examples/NNS/examples of/IN/of special/JJ/special privileges/NNS/privileges include/VBP/include backing/VBG/backing up/RP/up files/NNS/files and/CC/and directories/NNS/directories /,/, shutting/VBG/shutting down/IN/down the/DT/the compute1/NNP/compute1 ~/NNP/~ logging/NN/logging on/IN/on interactively/RB/interactively /,/, and/CC/and changing/VBG/changing the/DT/the system/NN/system clock/NNP/clock. every/DT/every process/NN/process that/IN/that windows/VBZ/windows xp/NN/xp runs/VBZ/runs on/IN/on behalf/NN/behalf of/IN/of a/DT/a user/NN/user will/MD/will receive/VB/receive a/DT/a copy/NN/copy of/IN/of the/DT/the access/NN/access token/NNP/token. the/DT/the system/NN/system uses/VBZ/uses the/DT/the security/NN/security ids/NNS/ids in/IN/in the/DT/the access/NN/access token/NN/token to/TO/to permit/VB/permit or/CC/or deny/VB/deny access/NN/access to/TO/to system/NN/system objects/NNS/objects whenever/RB/whenever the/DT/the use1/NNP/use1 ~/NNP/~ or/CC/or a/DT/a process/NN/process on/IN/on behalf/NN/behalf of/IN/of the/DT/the user/NN/user /,/, attempts/VBZ/attempts to/TO/to access/NN/access the/DT/the object/NNP/object. authentication/NN/authentication of/IN/of a/DT/a user/NN/user account/NN/account is/VBZ/is typically/RB/typically accomplished/VBN/accomplished via/IN/via a/DT/a user/NN/user name/NN/name and/CC/and password/NN/password /,/, although/IN/although the/DT/the modular/NN/modular design/NN/design of/IN/of windows/NNS/windows xp/VBP/xp allows/NNS/allows the/DT/the development/NN/development of/IN/of custom/NN/custom authentication/NN/authentication packages/NNP/packages. for/IN/for example/NN/example /,/, a/DT/a retinal/JJ/retinal /NN/( or/CC/or eye/NN/eye /:/) scanner/NN/scanner might/MD/might be/VB/be used/VBN/used to/TO/to verify/VB/verify that/IN/that the/DT/the user/NN/user is/VBZ/is who/WP/who she/PRP/she says/VBZ/says she/PRP/she is/VBZ/is /./. windows/VBZ/windows xp/NN/xp uses/NNS/uses the/DT/the idea/NN/idea of/IN/of a/DT/a subject/NN/subject to/TO/to ensure/VB/ensure that/IN/that programs/NNS/programs run/VBP/run by/IN/by a/DT/a user/NN/user do/VBP/do not/RB/not get/VB/get greater/JJR/greater access/NN/access to/TO/to the/DT/the system/NN/system than/IN/than the/DT/the user/NN/user is/VBZ/is authorized/VBN/authorized to/TO/to have/VB/have /./. a/DT/a is/VBZ/is used/VBN/used to/TO/to track/VB/track and/CC/and manage/NN/manage permissions/NNS/permissions for/IN/for each/DT/each program/NN/program that/IN/that a/DT/a user/NN/user runs/VBZ/runs ;/:/; it/PRP/it is/VBZ/is composed/VBN/composed of/IN/of the/DT/the user/NN/user 's/POS/'s access/NN/access token/NN/token and/CC/and the/DT/the program/NN/program acting/NN/acting on/IN/on behalf/NN/behalf of/IN/of the/DT/the user/NNP/user. since/IN/since windows/NNS/windows xp/VBP/xp operates/NNS/operates with/IN/with a/DT/a client-server/JJ/client-server model/NN/model /,/, two/CD/two classes/NNS/classes of/IN/of subjects/NNS/subjects are/VBP/are used/VBN/used to/TO/to control/NN/control access/NN/access /:/: simple/JJ/simple subjects/NNS/subjects and/CC/and server/RB/server subjects/NNP/subjects. an/DT/an example/NN/example of/IN/of a/DT/a is/VBZ/is the/DT/the typical/JJ/typical application/NN/application program/NN/program that/WDT/that a/DT/a user/NN/user executes/VBZ/executes after/IN/after she/PRP/she logs/VBZ/logs on/NNP/on. simple/NN/simple subject/NN/subject is/VBZ/is assigned/VBN/assigned a/DT/a based/VBN/based on/IN/on the/DT/the security/NN/security access/NN/access token/NN/token of/IN/of the/DT/the user/NNP/user. a/DT/a is/VBZ/is a/DT/a process/NN/process implemented/VBN/implemented as/IN/as a/DT/a protected/VBN/protected server/NN/server that/IN/that uses/NNS/uses the/DT/the security/NN/security context/NN/context of/IN/of the/DT/the client/NN/client when/WRB/when acting/VBG/acting on/IN/on the/DT/the client/NN/client 's/POS/'s behalf/NN/behalf /./. as/IN/as mentioned/VBN/mentioned in/IN/in section/NN/section 15.7/CD/15.7 /,/, auditing/VBG/auditing is/VBZ/is a/DT/a useful/JJ/useful security/NN/security technique/NN/technique /./. windows/VBZ/windows xp/NN/xp has/VBZ/has bl1ilt-in/JJ/bl1ilt-in auditing/NN/auditing that/WDT/that allows/VBZ/allows many/JJ/many common/JJ/common security/NN/security threats/NNS/threats to/TO/to be/VB/be monitored/NNP/monitored. examples/NNS/examples include/VBP/include failure/NN/failure auditing/VBG/auditing for/IN/for login/NN/login and/CC/and logoff/NN/logoff events/NNS/events to/TO/to detect/VB/detect random/NN/random password/NN/password break-ins/NNS/break-ins /,/, success/NN/success auditing/VBG/auditing for/IN/for login/NN/login and/CC/and logoff/NN/logoff events/NNS/events to/TO/to detect/VB/detect login/NN/login activity/NN/activity at/IN/at strange/NN/strange hours/NNS/hours /,/, success/NN/success and/CC/and failure/NN/failure write-access/NN/write-access auditing/VBG/auditing for/IN/for executable/JJ/executable files/NNS/files to/TO/to track/VB/track a/DT/a virus/NN/virus outbreak/NN/outbreak /,/, and/CC/and success/NN/success and/CC/and failure/NN/failure auditing/VBG/auditing for/IN/for file/NN/file access/NN/access to/TO/to detect/VB/detect access/NN/access to/TO/to sensitive/VB/sensitive files/NNS/files /./. 15.10/CD/15.10 15.10/CD/15.10 665/CD/665 security/NN/security attributes/NNS/attributes of/IN/of an/DT/an object/NN/object in/IN/in windows/NNS/windows xp/VBP/xp are/VBP/are described/VBN/described by/IN/by a/DT/a the/DT/the security/NN/security descriptor/NN/descriptor contains/VBZ/contains the/DT/the security/NN/security id/VBD/id of/IN/of the/DT/the owner/NN/owner /:/( who/WP/who can/MD/can change/VB/change the/DT/the access/NN/access permissions/NNS/permissions /:/) /,/, a/DT/a group/NN/group security/NN/security id/VBD/id used/VBN/used the/DT/the posix/NN/posix subsystem/NN/subsystem /,/, a/DT/a discretionary/JJ/discretionary access-control/NN/access-control list/NN/list that/WDT/that identifies/VBZ/identifies users/NNS/users or/CC/or groups/NNS/groups are/VBP/are allowed/VBN/allowed /-NONE-/( and/CC/and which/WDT/which are/VBP/are not/RB/not allowed/VBN/allowed /-NONE-/) access/NN/access /,/, and/CC/and a/DT/a system/NN/system access-control/NN/access-control list/NN/list that/WDT/that controls/VBZ/controls which/WDT/which auditing/VBG/auditing messages/NNS/messages the/DT/the system/NN/system will/MD/will generate/VB/generate. for/IN/for example/NN/example /,/, the/DT/the security/NN/security descriptor/NN/descriptor of/IN/of the/DT/the file/NN/file foo.bar/NN/foo.bar might/MD/might have/VB/have owner/NN/owner avi/NN/avi and/CC/and this/DT/this discretionary/JJ/discretionary access-control/NN/access-control list/NN/list /:/: a/DT/a vi/NN/vi -all/JJ/-all access/NN/access group/NN/group cs-read-write/JJ/cs-read-write access/NN/access user/NN/user cliff-no/-NONE-/cliff-no access/NN/access in/IN/in addition/NN/addition /,/, it/PRP/it might/MD/might have/VB/have a/DT/a system/NN/system access-control/NN/access-control list/NN/list of/IN/of audit/NN/audit writes/NNS/writes by/IN/by everyone/NN/everyone /./. an/DT/an access-control/NN/access-control list/NN/list is/VBZ/is composed/VBN/composed of/IN/of access-control/JJ/access-control entries/NNS/entries that/WDT/that contain/NN/contain the/DT/the security/NN/security id/VBD/id of/IN/of the/DT/the individual/JJ/individual and/CC/and an/DT/an access/NN/access mask/NN/mask that/WDT/that defines/VBZ/defines all/DT/all possible/JJ/possible actions/NNS/actions on/IN/on the/DT/the object/NN/object /,/, with/IN/with a/DT/a value/NN/value of/IN/of accessallowed/VBN/accessallowed or/CC/or accessdenied/VBN/accessdenied for/IN/for each/DT/each action/NNP/action. files/VBZ/files in/IN/in windows/NNS/windows xp/VBP/xp may/MD/may have/VB/have the/DT/the following/VBG/following access/NN/access types/NNS/types /:/: readdata/NNS/readdata /,/, writedata,appenddata/NNP/writedata,appenddata /,/, execute,readextendedattribute/JJ/execute,readextendedattribute /,/, writeextendedattribute/JJ/writeextendedattribute /,/, readattributes/VBZ/readattributes /,/, and/CC/and wri/NN/wri teattributes/NNP/teattributes. we/PRP/we can/MD/can see/VB/see how/WRB/how this/DT/this allows/VBZ/allows a/DT/a fine/NN/fine degree/NN/degree of/IN/of control/NN/control over/IN/over access/NN/access to/TO/to objects/NNS/objects /./. windows/NNS/windows xp/VB/xp classifies/NNS/classifies objects/NNS/objects as/IN/as either/DT/either container/NN/container objects/NNS/objects or/CC/or noncontainer/NN/noncontainer objects/NNP/objects. such/JJ/such as/IN/as directories/NNS/directories /,/, can/MD/can logically/RB/logically contain/VB/contain other/JJ/other objects/NNP/objects. by/IN/by default/NN/default /,/, an/DT/an object/NN/object is/VBZ/is created/VBN/created within/IN/within a/DT/a container/NN/container object/NN/object /,/, the/DT/the new/JJ/new object/NN/object inherits/NNS/inherits permissions/NNS/permissions from/IN/from the/DT/the parent/NN/parent object/NNP/object. similarly/RB/similarly /,/, if/IN/if the/DT/the user/NN/user copies/NNS/copies a/DT/a file/NN/file from/IN/from one/CD/one directory/NN/directory to/TO/to a/DT/a new/JJ/new directory/NN/directory /,/, the/DT/the file/NN/file will/MD/will inherit/VB/inherit the/DT/the permissions/NNS/permissions of/IN/of the/DT/the destination/NN/destination directory/NNP/directory. inherit/NN/inherit no/DT/no other/JJ/other permissions/NNS/permissions /./. furthermore/NN/furthermore /,/, if/IN/if a/DT/a permission/NN/permission is/VBZ/is changed/VBN/changed on/IN/on a/DT/a directory/NN/directory /,/, the/DT/the new/JJ/new permissions/NNS/permissions do/VBP/do not/RB/not automatically/RB/automatically apply/RB/apply to/TO/to existing/VBG/existing files/NNS/files and/CC/and subdirectories/NNS/subdirectories ;/:/; the/DT/the user/NN/user may/MD/may explicitly/RB/explicitly apply/RB/apply them/PRP/them if/IN/if she/PRP/she so/RB/so desires/VBZ/desires /./. the/DT/the system/NN/system administrator/NN/administrator can/MD/can prohibit/VB/prohibit printilig/JJ/printilig to/TO/to a/DT/a printer/NN/printer on/IN/on the/DT/the system/NN/system for/IN/for all/DT/all or/CC/or part/NN/part of/IN/of a/DT/a day/NN/day and/CC/and can/MD/can use/VB/use the/DT/the windows/NNS/windows xp/VBP/xp performance/NN/performance monitor/NN/monitor to/TO/to help/VB/help her/PRP$/her spot/NN/spot approaching/VBG/approaching problems/NNP/problems. in/IN/in general/JJ/general /,/, windows/VBZ/windows xp/NN/xp does/VBZ/does a/DT/a good/JJ/good job/NN/job of/IN/of providing/VBG/providing features/NNS/features to/TO/to help/VB/help ensure/NN/ensure a/DT/a secure/NN/secure computing/NN/computing environment/NNP/environment. many/JJ/many of/IN/of these/DT/these features/NNS/features are/VBP/are not/RB/not enabled/VBN/enabled by/IN/by default/NN/default /,/, however/RB/however /,/, which/WDT/which may/MD/may be/VB/be one/CD/one reason/NN/reason for/IN/for the/DT/the myriad/JJ/myriad security/NN/security breaches/NNS/breaches on/IN/on windows/NNS/windows xp/VBP/xp systems/NNP/systems. another/DT/another reason/NN/reason is/VBZ/is the/DT/the vast/JJ/vast number/NN/number of/IN/of services/NNS/services windows/VBZ/windows xp/NN/xp starts/VBZ/starts at/IN/at system/NN/system boot/NN/boot tiine/NN/tiine and/CC/and the/DT/the number/NN/number of/IN/of applications/NNS/applications that/WDT/that typically/RB/typically are/VBP/are installed/VBN/installed on/IN/on a/DT/a windows/NN/windows xp/NN/xp system/NN/system /./. for/IN/for a/DT/a real/JJ/real multiuser/NN/multiuser environment/NN/environment /,/, the/DT/the system/NN/system administrator/NN/administrator should/MD/should formulate/VB/formulate a/DT/a security/NN/security plan/NN/plan and/CC/and implement/NN/implement it/PRP/it /,/, using/VBG/using the/DT/the features/NNS/features that/IN/that windows/NNS/windows xp/VBP/xp provides/NNS/provides and/CC/and other/JJ/other security/NN/security tools/NNS/tools /./. protection/NN/protection is/VBZ/is an/DT/an internal/JJ/internal problem/NNP/problem. security/NN/security /,/, in/IN/in contrast/NN/contrast /,/, must/MD/must consider/VB/consider both/DT/both the/DT/the computer/NN/computer system/NN/system and/CC/and the/DT/the environment-people/JJ/environment-people /,/, buildings/NNS/buildings /,/, businesses/NNS/businesses /,/, valuable/JJ/valuable objects/NNS/objects /,/, and/CC/and threats-within/JJ/threats-within which/WDT/which the/DT/the system/NN/system is/VBZ/is used/VBN/used /./. 666/CD/666 chapter/NN/chapter 15/CD/15 the/DT/the data/NNS/data stored/VBD/stored in/IN/in the/DT/the computer/NN/computer system/NN/system must/MD/must be/VB/be protected/VBN/protected from/IN/from unauthorized/JJ/unauthorized access/NN/access /,/, malicious/JJ/malicious destruction/NN/destruction or/CC/or alteration/NN/alteration /,/, and/CC/and accidental/JJ/accidental introduction/NN/introduction of/IN/of inconsistency/NNP/inconsistency. it/PRP/it is/VBZ/is easier/JJR/easier to/TO/to protect/VB/protect against/IN/against accidental/JJ/accidental loss/NN/loss of/IN/of data/NNS/data consistency/NN/consistency than/IN/than to/TO/to protect/VB/protect against/IN/against malicious/JJ/malicious access/NN/access to/TO/to the/DT/the data/NNP/data. absolute/NN/absolute protection/NN/protection of/IN/of the/DT/the information/NN/information stored/VBD/stored in/IN/in a/DT/a computer/NN/computer system/NN/system from/IN/from malicious/JJ/malicious abuse/NN/abuse is/VBZ/is not/RB/not possible/JJ/possible ;/:/; but/CC/but the/DT/the cost/NN/cost to/TO/to the/DT/the perpetrator/NN/perpetrator can/MD/can be/VB/be made/VBN/made sufficiently/RB/sufficiently high/JJ/high to/TO/to deter/VB/deter most/JJS/most /,/, if/IN/if not/RB/not all/DT/all /,/, attempts/VBZ/attempts to/TO/to access/NN/access that/IN/that information/NN/information without/IN/without proper/NN/proper authority/NN/authority /./. several/JJ/several types/NNS/types of/IN/of attacks/NNS/attacks can/MD/can be/VB/be launched/VBN/launched against/IN/against programs/NNS/programs and/CC/and agaitlst/VB/agaitlst individual/JJ/individual computers/NNS/computers or/CC/or the/DT/the masses/NNP/masses. stack/NNP/stack- and/CC/and buffer-overflow/JJ/buffer-overflow techniques/NNS/techniques allow/VBP/allow successful/JJ/successful attackers/NNS/attackers to/TO/to change/VB/change their/PRP$/their level/NN/level of/IN/of system/NN/system access/NNP/access. viruses/NNS/viruses and/CC/and worms/NNS/worms are/VBP/are self-perpetuating/JJ/self-perpetuating /,/, sometimes/RB/sometimes infecting/VBG/infecting thousands/NNS/thousands of/IN/of computers/NNS/computers /./. denial-of-service/JJ/denial-of-service attacks/NNS/attacks prevent/VBP/prevent legitimate/JJ/legitimate use/NN/use of/IN/of target/NN/target systems/NNS/systems /./. encryption/NN/encryption limits/NNS/limits the/DT/the domain/NN/domain of/IN/of receivers/NNS/receivers of/IN/of data/NNS/data /,/, while/IN/while authentication/NN/authentication limits/NNS/limits the/DT/the domain/NN/domain of/IN/of senders/NNP/senders. encryption/NN/encryption is/VBZ/is used/VBN/used to/TO/to provide/VB/provide confidentiality/NN/confidentiality of/IN/of data/NNS/data being/VBG/being stored/VBN/stored or/CC/or transferred/NNP/transferred. symmetric/JJ/symmetric encryption/NN/encryption requires/VBZ/requires a/DT/a shared/VBN/shared key/JJ/key /,/, while/IN/while asymn'letric/JJ/asymn'letric encryption/NN/encryption provides/VBZ/provides a/DT/a public/JJ/public key/JJ/key and/CC/and a/DT/a private/JJ/private key/JJ/key /./. authentication/NN/authentication /,/, when/WRB/when combined/VBN/combined with/IN/with hashing/NN/hashing /,/, can/MD/can prove/VB/prove that/IN/that data/NNS/data have/VBP/have not/RB/not been/VBN/been changed/VBN/changed /./. user/NN/user authentication/NN/authentication methods/NNS/methods are/VBP/are used/VBN/used to/TO/to identify/VB/identify legitimate/JJ/legitimate users/NNS/users of/IN/of a/DT/a system/NNP/system. in/IN/in addition/NN/addition to/TO/to standard/VB/standard user-name/JJ/user-name and/CC/and password/NN/password protection/NN/protection /,/, several/JJ/several authentication/NN/authentication methods/NNS/methods are/VBP/are used/NNP/used. one-time/JJ/one-time passwords/NNS/passwords /,/, for/IN/for example/NN/example /,/, change/NN/change from/IN/from session/NN/session to/TO/to session/NN/session to/TO/to avoid/VB/avoid replay/NN/replay attacks/NNP/attacks. two-factor/NNP/two-factor authentication/NN/authentication requires/VBZ/requires two/CD/two forms/NNS/forms of/IN/of authentication/NN/authentication /,/, such/JJ/such as/IN/as a/DT/a hardware/NN/hardware calculator/NN/calculator with/IN/with an/DT/an activation/NN/activation pin/NNP/pin. multifactor/NN/multifactor authentication/NN/authentication uses/NNS/uses three/CD/three or/CC/or more/JJR/more forms/NNP/forms. these/DT/these methods/NNS/methods greatly/RB/greatly decrease/VB/decrease the/DT/the chance/NN/chance of/IN/of authentication/NN/authentication forgery/NN/forgery /./. methods/NNS/methods of/IN/of preventing/VBG/preventing or/CC/or detecting/VBG/detecting security/NN/security incidents/NNS/incidents include/VBP/include intrusiondetection/NN/intrusiondetection systems/NNS/systems /,/, antivirus/VBZ/antivirus software/NN/software /,/, auditing/VBG/auditing and/CC/and logging/VBG/logging of/IN/of system/NN/system events/NNS/events /,/, monitoring/VBG/monitoring of/IN/of system/NN/system software/NN/software changes/NNS/changes /,/, system-call/JJ/system-call monitoring/NN/monitoring /,/, and/CC/and firewalls/NNS/firewalls /./. 15.1/CD/15.1 argue/NN/argue for/IN/for or/CC/or against/IN/against the/DT/the judicial/JJ/judicial sentence/NN/sentence handed/VBD/handed down/IN/down against/IN/against robert/NN/robert morris/NNS/morris /,/, jr/NNP/jr. /,/, for/IN/for his/PRP$/his creation/NN/creation and/CC/and execution/NN/execution of/IN/of the/DT/the internet/NN/internet worm/NN/worm discussed/VBD/discussed in/IN/in section/NN/section 15.3.1/CD/15.3.1 /./. 15.2/CD/15.2 discuss/NNS/discuss a/DT/a means/NNS/means by/IN/by which/WDT/which managers/NNS/managers of/IN/of systems/NNS/systems connected/VBN/connected to/TO/to the/DT/the internet/NN/internet could/MD/could design/VB/design their/PRP$/their systems/NNS/systems to/TO/to limit/VB/limit or/CC/or eliminate/VB/eliminate the/DT/the damage/NN/damage done/NN/done by/IN/by worms/NNP/worms. what/WP/what are/VBP/are the/DT/the drawbacks/NNS/drawbacks of/IN/of making/VBG/making the/DT/the change/NN/change that/IN/that you/PRP/you suggest/VBP/suggest 15.3/CD/15.3 what/WP/what commonly/RB/commonly used/VBD/used computer/NN/computer programs/NNS/programs are/VBP/are prone/VBN/prone to/TO/to man-in-themiddle/JJ/man-in-themiddle attacks/NNS/attacks discuss/VBP/discuss solutions/NNS/solutions for/IN/for preventing/VBG/preventing this/DT/this form/NN/form of/IN/of attack/NN/attack /./. 15.4/CD/15.4 the/DT/the unix/NN/unix program/NN/program cops/NNS/cops scans/NNS/scans a/DT/a given/VBN/given system/NN/system for/IN/for possible/JJ/possible security/NN/security holes/NNS/holes and/CC/and alerts/NNS/alerts the/DT/the user/NN/user to/TO/to possible/JJ/possible problems/NNP/problems. what/WP/what are/VBP/are two/CD/two potential/JJ/potential hazards/NNS/hazards of/IN/of using/VBG/using such/JJ/such a/DT/a system/NN/system for/IN/for security/NN/security how/WRB/how can/MD/can these/DT/these problems/NNS/problems be/VB/be limited/VBN/limited or/CC/or eliminated/VBN/eliminated 667/CD/667 15.5/CD/15.5 make/NN/make a/DT/a list/NN/list of/IN/of six/CD/six security/NN/security concerns/NNS/concerns for/IN/for a/DT/a bank/NN/bank 's/POS/'s computer/NN/computer system/NNP/system. for/IN/for each/DT/each item/NN/item on/IN/on your/PRP$/your list/NN/list /,/, state/NN/state whether/IN/whether this/DT/this concern/NN/concern relates/VBZ/relates to/TO/to physicat/VB/physicat human/JJ/human /,/, or/CC/or operating-system/JJ/operating-system ~/NN/~ security/NN/security /./. 15.6/CD/15.6 an/DT/an experimental/JJ/experimental addition/NN/addition to/TO/to unix/VB/unix allows/NNS/allows a/DT/a user/NN/user to/TO/to connect/VB/connect a/DT/a program/NN/program to/TO/to a/DT/a file/NNP/file. the/DT/the watchdog/NN/watchdog is/VBZ/is invoked/VBN/invoked whenever/RB/whenever a/DT/a program/NN/program requests/NNS/requests access/NN/access to/TO/to the/DT/the file/NNP/file. the/DT/the watchdog/NN/watchdog then/RB/then either/DT/either grants/NNS/grants or/CC/or denies/NNS/denies access/NN/access to/TO/to the/DT/the file/NNP/file. discuss/NN/discuss two/CD/two pros/NNS/pros and/CC/and two/CD/two cons/NNS/cons of/IN/of using/VBG/using watchdogs/NNS/watchdogs for/IN/for security/NN/security /./. 15.7/CD/15.7 discuss/NNS/discuss how/WRB/how the/DT/the asymmetric/JJ/asymmetric encryption/NN/encryption algorithm/NN/algorithm can/MD/can be/VB/be used/VBN/used to/TO/to achieve/VB/achieve the/DT/the following/VBG/following goals/NNS/goals /./. a/NNP/a. authentication/NN/authentication /:/: the/DT/the receiver/NN/receiver knows/VBZ/knows that/IN/that only/RB/only the/DT/the sender/NN/sender could/MD/could have/VB/have generated/VBN/generated the/DT/the message/NN/message /./. b/NNP/b. secrecy/NN/secrecy /:/: only/RB/only the/DT/the receiver/NN/receiver can/MD/can decrypt/VB/decrypt the/DT/the message/NN/message /./. c/NNP/c. authentication/NN/authentication and/CC/and secrecy/NN/secrecy /:/: only/RB/only the/DT/the receiver/NN/receiver can/MD/can decrypt/VB/decrypt the/DT/the message/NN/message /,/, and/CC/and the/DT/the receiver/NN/receiver knows/VBZ/knows that/IN/that only/RB/only the/DT/the sender/NN/sender could/MD/could have/VB/have generated/VBN/generated the/DT/the message/NN/message /./. 15.8/CD/15.8 why/WRB/why does/VBZ/does n't/RB/n't d/VB/d /:/( lce/NN/lce /,/, n/NN/n /:/) /:/( e/NN/e /:/( /cd/JJ//cd /,/, n/NN/n /:/) /:/( m/NN/m /:/) /:/) provide/VB/provide authentication/NN/authentication of/IN/of the/DT/the sender/NN/sender to/TO/to what/WP/what uses/NNS/uses can/MD/can such/JJ/such an/DT/an encryption/NN/encryption be/VB/be put/VBN/put 15.9/CD/15.9 consider/NN/consider a/DT/a system/NN/system that/WDT/that generates/VBZ/generates 10/CD/10 million/CD/million audit/NN/audit records/NNS/records per/IN/per day/NNP/day. also/RB/also assume/VBD/assume that/IN/that there/EX/there are/VBP/are on/IN/on average/JJ/average 10/CD/10 attacks/NNS/attacks per/IN/per day/NN/day on/IN/on this/DT/this system/NN/system and/CC/and that/IN/that each/DT/each such/JJ/such attack/NN/attack is/VBZ/is reflected/VBN/reflected in/IN/in 20/CD/20 records/NNP/records. if/IN/if the/DT/the intrusion-detection/NN/intrusion-detection system/NN/system has/VBZ/has a/DT/a true-alarm/JJ/true-alarm rate/NN/rate of/IN/of 0.6/CD/0.6 and/CC/and a/DT/a false-alarm/JJ/false-alarm rate/NN/rate of/IN/of 0.0005/CD/0.0005 /,/, what/WP/what percentage/NN/percentage of/IN/of alarms/NNS/alarms generated/VBN/generated by/IN/by the/DT/the system/NN/system correspond/NN/correspond to/TO/to real/JJ/real intrusions/NNS/intrusions 15.10/CD/15.10 what/WP/what is/VBZ/is the/DT/the purpose/NN/purpose of/IN/of using/VBG/using a/DT/a salt/NN/salt along/IN/along with/IN/with the/DT/the user-provided/JJ/user-provided password/NN/password where/WRB/where should/MD/should the/DT/the salt/NN/salt be/VB/be stored/VBN/stored /,/, and/CC/and how/WRB/how should/MD/should it/PRP/it be/VB/be used/VBN/used general/JJ/general discussions/NNS/discussions concerning/VBG/concerning security/NN/security are/VBP/are given/VBN/given by/IN/by hsiao/NN/hsiao et/NN/et al/NNP/al. /NNP/[ 1979l/CD/1979l landwehr/NN/landwehr /:/[ 1981/CD/1981 /CD/] /,/, deru/NN/deru /:/: 1ing/JJ/1ing /NN/[ 1982/CD/1982 /CD/] /,/, pfleeger/NN/pfleeger and/CC/and pfleeger/NN/pfleeger /:/[ 2003/CD/2003 /CD/] /,/, tanenbaum/NN/tanenbaum 2003/CD/2003 /,/, and/CC/and russell/NN/russell and/CC/and gangemi/NN/gangemi /:/[ 1991/CD/1991 /CD/] /./. also/RB/also of/IN/of general/JJ/general interest/NN/interest is/VBZ/is the/DT/the text/NN/text by/IN/by lobel/NN/lobel /:/[ 1986/CD/1986 /CD/] /./. computer/NN/computer networking/VBG/networking is/VBZ/is discussed/VBN/discussed in/IN/in kurose/NN/kurose and/CC/and ross/NN/ross /:/[ 2005/CD/2005 /CD/] /./. issues/NNS/issues concernin/VBP/concernin ~/:/~ g/NN/g the/DT/the design/NN/design and/CC/and verification/NN/verification of/IN/of secure/NN/secure systems/NNS/systems are/VBP/are discussed/VBN/discussed by/IN/by rushby/NN/rushby /:/[ 1981/CD/1981 /CD/] and/CC/and by/IN/by silverman/NN/silverman /:/[ 1983/CD/1983 /CD/] /./. a/DT/a security/NN/security kernel/NN/kernel for/IN/for a/DT/a multiprocessor/NN/multiprocessor microcomputer/NN/microcomputer is/VBZ/is described/VBN/described by/IN/by schell/NN/schell /:/[ 1983/CD/1983 /CD/] /./. a/DT/a distributed/VBN/distributed secure/NN/secure system/NN/system is/VBZ/is described/VBN/described by/IN/by rushby/NN/rushby and/CC/and randell/NN/randell /:/[ 1983/CD/1983 /CD/] /./. morris/NNS/morris and/CC/and thompson/NN/thompson /:/[ 1979/CD/1979 /CD/] discuss/NNS/discuss password/NN/password security/NNP/security. morshedian/NN/morshedian /:/[ 1986/CD/1986 /CD/] presents/NNS/presents methods/NNS/methods to/TO/to fight/NN/fight password/NN/password pirates/NNP/pirates. password/NN/password authentication/NN/authentication 668/CD/668 chapter/NN/chapter 15/CD/15 with/IN/with insecure/NN/insecure communications/NNS/communications is/VBZ/is considered/VBN/considered by/IN/by lamport/NN/lamport /:/[ 1981/CD/1981 /CD/] /./. the/DT/the issue/NN/issue of/IN/of password/NN/password cracking/VBG/cracking is/VBZ/is examined/VBN/examined by/IN/by seely/RB/seely /:/[ 1989/CD/1989 /CD/] /./. cmnputer/NN/cmnputer break-ins/NNS/break-ins are/VBP/are discussed/VBN/discussed by/IN/by lehmann/NN/lehmann /:/[ 1987/CD/1987 /CD/] and/CC/and by/IN/by reid/JJ/reid /NN/[ 1987/CD/1987 /CD/] /./. issues/NNS/issues related/VBD/related to/TO/to trusting/NN/trusting computer/NN/computer programs/NNS/programs are/VBP/are discussed/VBN/discussed in/IN/in thompson/NN/thompson /:/( 1984/CD/1984 /CD/] /./. discussions/NNS/discussions concerning/VBG/concerning unix/NN/unix security/NN/security are/VBP/are offered/VBN/offered by/IN/by grampp/NN/grampp and/CC/and morris/VBZ/morris /:/[ 1984/CD/1984 l/NN/l wood/NN/wood and/CC/and kochan/IN/kochan /CD/[ 1985/CD/1985 /CD/] /,/, farrow/NN/farrow /:/[ 1986b/CD/1986b /CD/] /,/, farrow/NN/farrow /:/[ 1986a/CD/1986a /CD/] /,/, filipski/NN/filipski and/CC/and hanko/NN/hanko /:/[ 1986/CD/1986 /CD/] /,/, hecht/NN/hecht et/NN/et al/NNP/al. /NNP/[ 1988/CD/1988 /CD/] /,/, kramer/NN/kramer /:/[ 1988/CD/1988 /CD/] /,/, and/CC/and garfinkel/NN/garfinkel et/NN/et al/NNP/al. /NNP/[ 2003/CD/2003 /CD/] /./. bershad/NN/bershad and/CC/and pinkerton/NN/pinkerton /:/[ 1988/CD/1988 /CD/] present/NN/present the/DT/the watchdog/NN/watchdog extension/NN/extension to/TO/to bsd/VB/bsd unix/NNP/unix. the/DT/the cops/NNS/cops security-scanning/JJ/security-scanning package/NN/package for/IN/for unix/NN/unix was/VBD/was written/VBN/written by/IN/by farmer/NN/farmer at/IN/at purdue/JJ/purdue university/NNP/university. it/PRP/it is/VBZ/is available/JJ/available to/TO/to users/NNS/users on/IN/on the/DT/the internet/NN/internet via/IN/via the/DT/the ftp/NN/ftp program/NN/program from/IN/from host/NN/host ftp.uu.net/JJ/ftp.uu.net in/IN/in directory/NN/directory /pub/NN//pub i/PRP/i security/NN/security i/PRP/i cops/VBZ/cops /./. spafford/NN/spafford /:/[ 1989/CD/1989 /CD/] presents/NNS/presents a/DT/a detailed/JJ/detailed technical/JJ/technical discussion/NN/discussion of/IN/of the/DT/the internet/NN/internet worm/NNP/worm. the/DT/the spafford/NN/spafford article/NN/article appears/VBZ/appears with/IN/with three/CD/three others/NNS/others in/IN/in a/DT/a special/JJ/special section/NN/section on/IN/on the/DT/the morris/NNS/morris internet/VBP/internet worm/NN/worm in/IN/in communications/NNS/communications of/IN/of the/DT/the acm/NN/acm /:/( volume/NN/volume 32/CD/32 /,/, number/NN/number 6/CD/6 /,/, june/NN/june 1989/CD/1989 /CD/) /./. security/NN/security problems/NNS/problems associated/VBN/associated with/IN/with the/DT/the tcp/NN/tcp /ip/NN//ip protocol/NN/protocol suite/NN/suite are/VBP/are described/VBN/described in/IN/in bellovin/NN/bellovin /:/[ 1989/CD/1989 /CD/] /./. the/DT/the mechanisms/NNS/mechanisms commonly/RB/commonly used/VBN/used to/TO/to prevent/VB/prevent such/PDT/such attacks/NNS/attacks are/VBP/are discussed/VBN/discussed in/IN/in cheswick/NN/cheswick et/NN/et al/NNP/al. /NNP/[ 2003/CD/2003 /CD/] /./. another/DT/another approach/NN/approach to/TO/to protecting/NN/protecting networks/NNS/networks from/IN/from insider/NN/insider attacks/NNS/attacks is/VBZ/is to/TO/to secure/VB/secure topology/NN/topology or/CC/or route/NN/route discovery/NNP/discovery. kent/NN/kent et/NN/et al/NNP/al. /NNP/[ 2000/CD/2000 /CD/] /,/, hu/NN/hu et/NN/et al/NNP/al. /NNP/[ 2002/CD/2002 /CD/] /,/, zapata/NN/zapata and/CC/and asokan/NN/asokan /:/[ 2002/CD/2002 /CD/] /,/, and/CC/and hu/VB/hu and/CC/and perrig/JJ/perrig /NN/[ 2004/CD/2004 /CD/] present/NN/present solutions/NNS/solutions for/IN/for secure/NN/secure routing/NNP/routing. savage/NN/savage et/NN/et al/NNP/al. /NNP/[ 2000/CD/2000 /CD/] examine/NN/examine the/DT/the distributed/VBN/distributed denialof/-NONE-/denialof- service/NN/service attack/NN/attack and/CC/and propose/VB/propose ip/NN/ip trace-back/NN/trace-back solutions/NNS/solutions to/TO/to address/VB/address the/DT/the problem/NN/problem /./. perlman/NN/perlman /:/[ 1988/CD/1988 /CD/] proposes/NNS/proposes an/DT/an approach/NN/approach to/TO/to diagnose/VB/diagnose faults/NNS/faults when/WRB/when the/DT/the network/NN/network contains/VBZ/contains malicious/JJ/malicious routers/NNS/routers /./. information/NN/information about/IN/about viruses/NNS/viruses and/CC/and worms/NNS/worms can/MD/can be/VB/be found/VBN/found at/IN/at http/NN/http /:/: //:// /www.viruslist.com/JJ//www.viruslist.com /,/, as/IN/as well/RB/well as/IN/as in/IN/in ludwig/NN/ludwig /:/[ 1998/CD/1998 /CD/] and/CC/and ludwig/JJ/ludwig /NN/[ 2002/CD/2002 /CD/] /./. other/JJ/other web/NN/web sites/NNS/sites containing/VBG/containing up-to-date/JJ/up-to-date security/NN/security information/NN/information include/NN/include http/NN/http /:/: //:// /www.trusecure.com/JJ//www.trusecure.com and/CC/and httpd/JJ/httpd /:/: //:// /www.eeye.com/NNP//www.eeye.com. a/DT/a paper/NN/paper on/IN/on the/DT/the dangers/NNS/dangers of/IN/of a/DT/a computer/NN/computer monoculture/NN/monoculture can/MD/can be/VB/be found/VBN/found at/IN/at http/NN/http /:/: //:// /www.ccianet.org/papers/cyberinsecurity.pdf/JJ//www.ccianet.org/papers/cyberinsecurity.pdf /./. diffie/NN/diffie and/CC/and hellman/NN/hellman /:/[ 1976/CD/1976 /CD/] and/CC/and diffie/NN/diffie and/CC/and hellman/NN/hellman /:/[ 1979/CD/1979 /CD/] were/VBD/were the/DT/the first/JJ/first researchers/NNS/researchers to/TO/to propose/VB/propose the/DT/the use/NN/use of/IN/of the/DT/the public-key/JJ/public-key encryption/NN/encryption scheme/NNP/scheme. the/DT/the algorithm/NN/algorithm presented/VBD/presented in/IN/in section/NN/section 15.4.1/CD/15.4.1 is/VBZ/is based/VBN/based on/IN/on the/DT/the public-key/JJ/public-key encryption/NN/encryption scheme/NN/scheme ;/:/; it/PRP/it was/VBD/was developed/VBN/developed by/IN/by rivest/JJS/rivest et/NN/et al/NNP/al. /NNP/[ 1978/CD/1978 /CD/] /./. lempel/NN/lempel /:/[ 1979/CD/1979 /CD/] /,/, simmons/NNS/simmons /:/[ 1979/CD/1979 /CD/] /,/, denning/VBG/denning and/CC/and demting/VBG/demting /:/[ 1979/CD/1979 /CD/] /,/, gifford/NN/gifford /:/[ 1982/CD/1982 /CD/] /,/, denning/VBG/denning /:/[ 1982/CD/1982 /CD/] /,/, ahituv/NN/ahituv et/NN/et al/NN/al /./. /NN/[ 1987/CD/1987 /CD/] /,/, schneier/JJR/schneier /:/[ 1996/CD/1996 /CD/] /,/, and/CC/and stallings/NNS/stallings /:/[ 2003/CD/2003 /CD/] explore/NN/explore the/DT/the use/NN/use of/IN/of cryptography/NN/cryptography in/IN/in computer/NN/computer systems/NNP/systems. discussions/NNS/discussions concerning/VBG/concerning protection/NN/protection of/IN/of digital/JJ/digital signatures/NNS/signatures are/VBP/are offered/VBN/offered by/IN/by akl/NN/akl /:/[ 1983/CD/1983 /CD/] /,/, davies/NNS/davies /:/[ 1983/CD/1983 /CD/] /,/, denning/VBG/denning /:/[ 1983/CD/1983 /CD/] /,/, and/CC/and denning/VBG/denning /:/[ 1984/CD/1984 /CD/] /./. the/DT/the u.s/NNP/u.s. government/NN/government is/VBZ/is /,/, of/IN/of course/NN/course /,/, concerned/VBN/concerned about/IN/about security/NNP/security. the/DT/the department/NN/department of/IN/of defense/NN/defense trusted/VBN/trusted computer/NN/computer system/NN/system evaluation/NN/evaluation criteria/NNS/criteria /:/( dod/NN/dod /:/[ 1985/CD/1985 /CD/] /CD/) /,/, known/VBN/known also/RB/also as/IN/as the/DT/the orange/NN/orange book/NN/book /,/, describes/VBZ/describes a/DT/a set/NN/set of/IN/of security/NN/security levels/NNS/levels and/CC/and the/DT/the features/NNS/features that/IN/that an/DT/an operating/NN/operating system/NN/system must/MD/must have/VB/have to/TO/to qualify/VB/qualify for/IN/for each/DT/each security/NN/security rating/NNP/rating. reading/NN/reading it/PRP/it is/VBZ/is a/DT/a good/JJ/good starting/NN/starting point/NN/point for/IN/for understanding/NN/understanding security/NN/security concerns/NNP/concerns. the/DT/the microsoft/NN/microsoft windows/VBZ/windows nt/NN/nt workstation/NN/workstation resource/NN/resource kit/NN/kit /:/( microsoft/NN/microsoft /:/[ 1996/CD/1996 /CD/] /CD/) describes/NNS/describes the/DT/the security/NN/security inodel/NN/inodel of/IN/of nt/NN/nt and/CC/and how/WRB/how to/TO/to use/VB/use that/IN/that model/NN/model /./. the/DT/the rsa/NN/rsa algorithm/NN/algorithm is/VBZ/is presented/VBN/presented in/IN/in rivest/JJS/rivest et/NN/et al/NNP/al. /NNP/[ 1978/CD/1978 /CD/] /./. information/NN/information about/IN/about nist/JJ/nist 's/POS/'s aes/NNS/aes activities/NNS/activities can/MD/can be/VB/be found/VBN/found at/IN/at http/NN/http /:/: //:// /www.nist.gov/aes//JJ//www.nist.gov/aes/ ;/:/; information/NN/information about/IN/about other/JJ/other cryptographic/JJ/cryptographic standards/NNS/standards for/IN/for the/DT/the united/VBN/united states/NNS/states can/MD/can also/RB/also be/VB/be found/VBN/found at/IN/at that/IN/that site/NNP/site. more/RBR/more complete/JJ/complete coverage/NN/coverage of/IN/of ssl/NN/ssl 3.0/CD/3.0 can/MD/can be/VB/be found/VBN/found at/IN/at 669/CD/669 http/NN/http /:/: //:// /home.netscape.com/eng/ssl3//NNP//home.netscape.com/eng/ssl3/. in/IN/in 1999/CD/1999 /,/, ssl/NN/ssl 3.0/CD/3.0 was/VBD/was modified/VBN/modified slightly/RB/slightly and/CC/and presented/VBD/presented in/IN/in an/DT/an ietf/NN/ietf request/NN/request for/IN/for comments/NNS/comments /:/( rfc/NN/rfc /:/) under/IN/under the/DT/the name/NN/name tls/NNS/tls /./. the/DT/the example/NN/example in/IN/in section/NN/section 15.6.3/CD/15.6.3 illustrating/VBG/illustrating the/DT/the impact/NN/impact of/IN/of false-alarm/JJ/false-alarm rate/NN/rate on/IN/on the/DT/the effectiveness/NN/effectiveness of/IN/of idss/NN/idss is/VBZ/is based/VBN/based on/IN/on axelsson/NN/axelsson /:/[ 1999/CD/1999 /CD/] /./. the/DT/the description/NN/description of/IN/of tripwire/NN/tripwire in/IN/in section/NN/section 15.6.5/CD/15.6.5 is/VBZ/is based/VBN/based on/IN/on kim/NN/kim and/CC/and spafford/NN/spafford /:/[ 1993/CD/1993 /CD/] /./. research/NN/research into/IN/into system-call-based/JJ/system-call-based anomaly/RB/anomaly detection/NN/detection is/VBZ/is described/VBN/described in/IN/in forrest/JJS/forrest et/NN/et al/NNP/al. /NNP/[ 1996/CD/1996 /CD/] /./. part/NN/part seven/CD/seven a/DT/a distributed/JJ/distributed system/NN/system is/VBZ/is a/DT/a collection/NN/collection of/IN/of processors/NNS/processors that/WDT/that do/VBP/do not/RB/not share/VB/share memory/NN/memory or/CC/or a/DT/a clock/NNP/clock. instead/RB/instead /,/, each/DT/each processor/NN/processor has/VBZ/has its/PRP$/its own/JJ/own local/JJ/local memory/NN/memory /,/, and/CC/and the/DT/the processors/NNS/processors communicate/VBP/communicate with/IN/with one/CD/one another/DT/another through/IN/through communication/NN/communication lines/NNS/lines such/JJ/such as/IN/as local-area/NNP/local-area or/CC/or wide-area/NNP/wide-area networks/NNP/networks. the/DT/the processors/NNS/processors in/IN/in a/DT/a distributed/VBN/distributed system/NN/system vary/NN/vary in/IN/in size/NN/size and/CC/and function/NNP/function. such/JJ/such systems/NNS/systems may/MD/may include/VB/include small/JJ/small handheld/NN/handheld or/CC/or real-time/JJ/real-time devices/NNS/devices /,/, personal/JJ/personal computers/NNS/computers /,/, workstations/NNS/workstations /,/, and/CC/and large/JJ/large mainframe/NN/mainframe computer/NN/computer systems/NNS/systems /./. a/DT/a distributed/VBN/distributed file/NN/file system/NN/system is/VBZ/is a/DT/a file-service/JJ/file-service system/NN/system whose/WP$/whose users/NNS/users /,/, servers/NNS/servers /,/, and/CC/and storage/NN/storage devices/NNS/devices are/VBP/are dispersed/VBN/dispersed among/IN/among the/DT/the sites/NNS/sites of/IN/of a/DT/a distributed/VBN/distributed system/NNP/system. accordingly/RB/accordingly /,/, service/NN/service activity/NN/activity has/VBZ/has to/TO/to be/VB/be carried/VBN/carried out/RP/out across/IN/across the/DT/the network/NN/network ;/:/; instead/RB/instead of/IN/of a/DT/a single/JJ/single centralized/VBN/centralized data/NNS/data repository/NN/repository /,/, there/EX/there are/VBP/are multiple/JJ/multiple independent/NN/independent storage/NN/storage devices/NNS/devices /./. the/DT/the benefits/NNS/benefits of/IN/of a/DT/a distributed/VBN/distributed system/NN/system include/NN/include giving/VBG/giving users/NNS/users access/NN/access to/TO/to the/DT/the resources/NNS/resources maintained/VBD/maintained by/IN/by the/DT/the system/NN/system and/CC/and thereby/NN/thereby speeding/VBG/speeding up/RP/up computation/NN/computation and/CC/and improving/VBG/improving data/NNS/data availability/NN/availability and/CC/and reliability/NNP/reliability. because/IN/because a/DT/a system/NN/system is/VBZ/is distributed/VBN/distributed /,/, however/RB/however /,/, it/PRP/it must/MD/must provide/VB/provide mechanisms/NNS/mechanisms for/IN/for process/NN/process synchronization/NN/synchronization and/CC/and communication/NN/communication /,/, for/IN/for dealing/NN/dealing with/IN/with the/DT/the deadlock/NN/deadlock problem/NN/problem /,/, and/CC/and for/IN/for handling/NN/handling failures/NNS/failures that/WDT/that are/VBP/are not/RB/not encountered/VBN/encountered in/IN/in a/DT/a centralized/JJ/centralized system/NN/system /./. 16.1/CD/16.1 a/DT/a distributed/JJ/distributed system/NN/system is/VBZ/is a/DT/a collection/NN/collection of/IN/of processors/NNS/processors that/WDT/that do/VBP/do not/RB/not share/VB/share memory/NN/memory or/CC/or a/DT/a clock/NNP/clock. instead/RB/instead /,/, each/DT/each processor/NN/processor has/VBZ/has its/PRP$/its own/JJ/own local/JJ/local memory/NNP/memory. the/DT/the processors/NNS/processors communicate/VBP/communicate with/IN/with one/CD/one another/DT/another through/IN/through various/JJ/various communication/NN/communication networks/NNS/networks /,/, such/JJ/such as/IN/as high-speed/JJ/high-speed buses/NNS/buses or/CC/or telephone/NN/telephone lines/NNP/lines. in/IN/in this/DT/this chapter/NN/chapter /,/, we/PRP/we discuss/VBP/discuss the/DT/the general/JJ/general structure/NN/structure of/IN/of distributed/VBN/distributed systems/NNS/systems and/CC/and the/DT/the networks/NNS/networks that/WDT/that interconnect/NN/interconnect them/NNP/them. we/PRP/we contrast/VBP/contrast the/DT/the main/JJ/main differences/NNS/differences in/IN/in operating-system/JJ/operating-system design/NN/design between/IN/between these/DT/these systems/NNS/systems and/CC/and centralized/VBD/centralized systems/NNP/systems. in/IN/in chapter/NN/chapter 17/CD/17 /,/, we/PRP/we go/VBP/go on/IN/on to/TO/to discuss/VB/discuss distributed/VBN/distributed file/NN/file systems/NNP/systems. then/RB/then /,/, i11/NNP/i11 chapter/NN/chapter 18/CD/18 /,/, we/PRP/we describe/VBP/describe the/DT/the methods/NNS/methods necessary/JJ/necessary for/IN/for distributed/VBN/distributed operating/VBG/operating systems/NNS/systems to/TO/to coordinate/VB/coordinate their/PRP$/their actions/NNS/actions /./. to/TO/to provide/VB/provide a/DT/a high-level/JJ/high-level overview/NN/overview of/IN/of distributed/VBN/distributed systems/NNS/systems and/CC/and the/DT/the networks/NNS/networks that/WDT/that interconnect/NN/interconnect them/PRP/them /./. to/TO/to discuss/VB/discuss the/DT/the general/JJ/general structure/NN/structure of/IN/of distributed/VBN/distributed operating/NN/operating systems/NNS/systems /./. a/DT/a is/VBZ/is a/DT/a collection/NN/collection of/IN/of loosely/RB/loosely coupled/VBN/coupled processors/NNS/processors interconnected/VBN/interconnected by/IN/by a/DT/a communication/NN/communication network/NNP/network. from/IN/from the/DT/the point/NN/point of/IN/of view/NN/view of/IN/of a/DT/a specific/JJ/specific processor/NN/processor in/IN/in a/DT/a distributed/VBN/distributed system/NN/system /,/, the/DT/the rest/NN/rest of/IN/of the/DT/the processors/NNS/processors and/CC/and their/PRP$/their respective/JJ/respective resources/NNS/resources are/VBP/are remote/RB/remote /,/, whereas/IN/whereas its/PRP$/its own/JJ/own resources/NNS/resources are/VBP/are local/JJ/local /./. the/DT/the processors/NNS/processors in/IN/in a/DT/a distributed/VBN/distributed system/NN/system may/MD/may vary/VB/vary in/IN/in size/NN/size and/CC/and function/NN/function /./. they/PRP/they may/MD/may include/VB/include small/JJ/small microprocessors/NNS/microprocessors /,/, workstations/NNS/workstations /,/, minicomputers/NNS/minicomputers /,/, and/CC/and large/JJ/large general-purpose/JJ/general-purpose cornputer/NN/cornputer systems/NNP/systems. these/DT/these processors/NNS/processors are/VBP/are referred/VBN/referred to/TO/to by/IN/by a/DT/a number/NN/number of/IN/of names/NNS/names /,/, such/JJ/such as/IN/as sites/NNS/sites /,/, nodes/VBZ/nodes /,/, computers/NNS/computers /,/, machines/NNS/machines /,/, and/CC/and hosts/NNS/hosts /,/, depending/VBG/depending on/IN/on the/DT/the context/NN/context in/IN/in which/WDT/which they/PRP/they are/VBP/are mentioned/NNP/mentioned. we/PRP/we mainly/RB/mainly use/VBP/use site/JJ/site to/TO/to indicate/VB/indicate the/DT/the location/NN/location of/IN/of a/DT/a machine/NN/machine and/CC/and host/NN/host to/TO/to refer/VB/refer to/TO/to a/DT/a specific/JJ/specific system/NN/system at/IN/at a/DT/a site/NNP/site. generally/RB/generally /,/, one/CD/one host/NN/host at/IN/at one/CD/one site/JJ/site /,/, the/DT/the server/NN/server /,/, has/VBZ/has a/DT/a resource/NN/resource that/WDT/that another/DT/another host/NN/host at/IN/at another/DT/another site/NN/site /,/, the/DT/the client/NN/client /:/( or/CC/or user/JJR/user /:/) /,/, would/MD/would like/VB/like to/TO/to use/NNP/use. a/DT/a general/JJ/general structure/NN/structure of/IN/of a/DT/a distributed/VBN/distributed system/NN/system is/VBZ/is shown/VBN/shown in/IN/in figure/NN/figure 16.1/CD/16.1 /./. 673/CD/673 674/CD/674 chapter/NN/chapter 16/CD/16 site/NN/site a/DT/a site/NN/site c/NN/c network/NN/network communication/NN/communication site/NN/site b/NN/b figure/NN/figure 16.1/CD/16.1 a/DT/a distributed/JJ/distributed system/NN/system /./. d/NN/d d/VBD/d d/VBN/d d/NN/d l/NN/l resources/NNS/resources l/VBP/l there/RB/there are/VBP/are four/CD/four major/JJ/major reasons/NNS/reasons for/IN/for building/NN/building distributed/VBN/distributed systems/NNS/systems /:/: resource/NN/resource sharing/VBG/sharing /,/, computation/NN/computation speedup/NN/speedup /,/, reliability/NN/reliability /,/, and/CC/and communication/NNP/communication. in/IN/in this/DT/this section/NN/section /,/, we/PRP/we briefly/RB/briefly discuss/VBZ/discuss each/DT/each of/IN/of them/PRP/them /./. 16.1.1/CD/16.1.1 resource/NN/resource sharing/VBG/sharing if/IN/if a/DT/a number/NN/number of/IN/of different/JJ/different sites/NNS/sites /:/( with/IN/with different/JJ/different capabilities/NNS/capabilities /:/) are/VBP/are connected/VBN/connected to/TO/to one/CD/one another/DT/another /,/, then/RB/then a/DT/a user/NN/user at/IN/at one/CD/one site/JJ/site may/MD/may be/VB/be able/JJ/able to/TO/to use/VB/use the/DT/the resources/NNS/resources available/JJ/available at/IN/at another/NNP/another. for/IN/for example/NN/example /,/, a/DT/a user/NN/user at/IN/at site/JJ/site a/DT/a may/MD/may be/VB/be using/VBG/using a/DT/a laser/NN/laser printer/NN/printer located/VBD/located at/IN/at site/JJ/site b/NNP/b. meanwhile/RB/meanwhile /,/, a/DT/a user/NN/user at/IN/at b/NN/b may/MD/may access/NN/access a/DT/a file/NN/file that/WDT/that resides/VBZ/resides at/IN/at a/NNP/a. in/IN/in general/JJ/general /,/, in/IN/in a/DT/a distributed/VBN/distributed system/NN/system provides/VBZ/provides mechanisms/NNS/mechanisms for/IN/for sharing/VBG/sharing files/NNS/files at/IN/at remote/NN/remote sites/NNS/sites /,/, processing/NN/processing information/NN/information in/IN/in a/DT/a distributed/VBN/distributed database/NN/database /,/, printing/VBG/printing files/NNS/files at/IN/at remote/NN/remote sites/NNS/sites /,/, using/VBG/using remote/NN/remote specialized/VBN/specialized hardware/NN/hardware devices/NNS/devices /:/( such/JJ/such as/IN/as a/DT/a high-speed/JJ/high-speed array/NN/array processor/NN/processor /:/) /,/, and/CC/and performing/VBG/performing other/JJ/other operations/NNS/operations /./. 16.1.2/CD/16.1.2 computation/NN/computation speedup/NN/speedup if/IN/if a/DT/a particular/JJ/particular computation/NN/computation can/MD/can be/VB/be partitioned/VBN/partitioned into/IN/into subcomputations/NNS/subcomputations that/WDT/that can/MD/can run/VB/run concurrently/RB/concurrently /,/, then/RB/then a/DT/a distributed/VBN/distributed system/NN/system allows/VBZ/allows us/PRP/us to/TO/to distribute/VB/distribute the/DT/the subcomputations/NNS/subcomputations among/IN/among the/DT/the various/JJ/various sites/NNS/sites ;/:/; the/DT/the subcomputations/NNS/subcomputations can/MD/can be/VB/be run/VBN/run concurrently/RB/concurrently and/CC/and thus/RB/thus provide/VB/provide in/IN/in addition/NN/addition /,/, if/IN/if a/DT/a particular/JJ/particular site/NN/site is/VBZ/is currently/RB/currently overloaded/VBN/overloaded with/IN/with jobs/NNS/jobs /,/, some/DT/some of/IN/of them/PRP/them can/MD/can be/VB/be moved/VBN/moved to/TO/to other/JJ/other /,/, lightly/RB/lightly loaded/VBN/loaded sites/NNP/sites. this/DT/this movement/NN/movement of/IN/of jobs/NNS/jobs is/VBZ/is called/VBN/called automated/VBN/automated load/NN/load sharing/NN/sharing /,/, in/IN/in which/WDT/which the/DT/the distributed/VBN/distributed operating/NN/operating system/NN/system automatically/RB/automatically moves/VBZ/moves jobs/NNS/jobs /,/, is/VBZ/is not/RB/not yet/RB/yet comnlon/RB/comnlon in/IN/in commercial/JJ/commercial systems/NNS/systems /./. 16.1.3/CD/16.1.3 reliability/NN/reliability if/IN/if one/CD/one site/JJ/site fails/NNS/fails in/IN/in a/DT/a distributed/VBN/distributed system/NN/system /,/, the/DT/the remammg/NN/remammg sites/VBZ/sites can/MD/can continue/VB/continue operating/NN/operating /,/, giving/VBG/giving the/DT/the system/NN/system better/NN/better reliability/NNP/reliability. if/IN/if the/DT/the system/NN/system is/VBZ/is composed/VBN/composed of/IN/of multiple/NN/multiple large/JJ/large autonomous/JJ/autonomous installations/NNS/installations /:/( that/IN/that is/VBZ/is /,/, general-purpose/JJ/general-purpose computers/NNS/computers /:/) /,/, the/DT/the failure/NN/failure of/IN/of one/CD/one of/IN/of them/PRP/them should/MD/should not/RB/not affect/VB/affect the/DT/the rest/NNP/rest. if/IN/if /,/, however/RB/however /,/, the/DT/the system/NN/system 16.2/CD/16.2 16.2/CD/16.2 675/CD/675 is/VBZ/is composed/VBN/composed of/IN/of sncall/NN/sncall machines/NNS/machines /,/, each/DT/each of/IN/of which/WDT/which is/VBZ/is responsible/JJ/responsible for/IN/for some/DT/some crucial/JJ/crucial system/NN/system function/NN/function /:/( such/JJ/such as/IN/as tenninal/JJ/tenninal character/NN/character i/0/-NONE-/i/0 or/CC/or the/DT/the file/NN/file system/NN/system /:/) /,/, then/RB/then a/DT/a single/JJ/single failure/NN/failure may/MD/may halt/VB/halt the/DT/the operation/NN/operation of/IN/of the/DT/the whole/JJ/whole system/NNP/system. in/IN/in general/JJ/general /,/, with/IN/with enough/JJ/enough redundancy/NN/redundancy /:/( in/IN/in both/DT/both hardware/NN/hardware and/CC/and data/NNS/data /:/) /,/, the/DT/the system/NN/system can/MD/can continue/VB/continue operation/NN/operation /,/, even/RB/even if/IN/if some/DT/some of/IN/of its/PRP$/its sites/NNS/sites have/VBP/have failed/VBN/failed /./. the/DT/the failure/NN/failure of/IN/of a/DT/a site/JJ/site must/NN/must be/VB/be detected/VBN/detected by/IN/by the/DT/the system/NN/system /,/, and/CC/and appropriate/VB/appropriate action/NN/action may/MD/may be/VB/be needed/VBN/needed to/TO/to recover/VB/recover from/IN/from the/DT/the failure/NNP/failure. the/DT/the system/NN/system must/MD/must no/RB/no longer/RBR/longer use/NN/use the/DT/the services/NNS/services of/IN/of that/DT/that site/NNP/site. in/IN/in addition/NN/addition /,/, if/IN/if the/DT/the function/NN/function of/IN/of the/DT/the failed/VBN/failed site/JJ/site can/MD/can be/VB/be taken/VBN/taken over/RP/over by/IN/by another/DT/another site/NN/site /,/, the/DT/the system/NN/system must/MD/must ensure/VB/ensure that/IN/that the/DT/the transfer/NN/transfer of/IN/of function/NN/function occurs/NNS/occurs correctly/NNP/correctly. finally/RB/finally /,/, when/WRB/when the/DT/the failed/VBN/failed site/JJ/site recovers/NNS/recovers or/CC/or is/VBZ/is repaired/VBN/repaired /,/, mechanisms/NNS/mechanisms must/MD/must be/VB/be available/JJ/available to/TO/to integrate/VB/integrate it/PRP/it back/RB/back into/IN/into the/DT/the system/NN/system smoothly/NNP/smoothly. as/IN/as we/PRP/we shall/MD/shall see/VB/see in/IN/in chapters/NNS/chapters 17/CD/17 and/CC/and 18/CD/18 /,/, these/DT/these actions/NNS/actions present/VBP/present difficult/JJ/difficult problems/NNS/problems that/WDT/that have/VBP/have many/JJ/many possible/JJ/possible solutions/NNS/solutions /./. 16.1.4/CD/16.1.4 communication/NN/communication when/WRB/when several/JJ/several sites/NNS/sites are/VBP/are connected/VBN/connected to/TO/to one/CD/one another/DT/another by/IN/by a/DT/a communication/NN/communication network/NN/network /,/, users/NNS/users at/IN/at the/DT/the various/JJ/various sites/NNS/sites have/VBP/have the/DT/the opportunity/NN/opportunity to/TO/to exchange/VB/exchange information/NNP/information. at/IN/at a/DT/a low/JJ/low level/NN/level /,/, are/VBP/are passed/VBN/passed between/IN/between systems/NNS/systems /,/, much/RB/much as/IN/as messages/NNS/messages are/VBP/are passed/VBN/passed between/IN/between processes/NNS/processes in/IN/in the/DT/the single-computer/JJ/single-computer message/NN/message system/NN/system discussed/VBD/discussed in/IN/in section/NN/section 3.4/CD/3.4. given/VBN/given message/NN/message passing/VBG/passing /,/, all/DT/all the/DT/the higher-level/JJ/higher-level flmctionality/NN/flmctionality found/VBD/found in/IN/in standalone/NN/standalone systems/NNS/systems can/MD/can be/VB/be expanded/VBN/expanded to/TO/to encompass/NN/encompass the/DT/the distributed/VBN/distributed system/NN/system /./. such/JJ/such functions/NNS/functions include/VBP/include file/JJ/file transfer/NN/transfer /,/, login/NN/login /,/, mail/NN/mail /,/, and/CC/and remote/VB/remote procedure/NN/procedure calls/NNS/calls /:/( rpcs/NNS/rpcs /VBP/) /./. the/DT/the advantage/NN/advantage of/IN/of a/DT/a distributed/VBN/distributed system/NN/system is/VBZ/is that/IN/that these/DT/these functions/NNS/functions can/MD/can be/VB/be carried/VBN/carried out/RP/out over/IN/over great/JJ/great distances/NNP/distances. two/CD/two people/NNS/people at/IN/at geographically/RB/geographically distant/JJ/distant sites/NNS/sites can/MD/can collaborate/VB/collaborate on/IN/on a/DT/a project/NN/project /,/, for/IN/for example/NNP/example. by/IN/by transferring/NN/transferring the/DT/the files/NNS/files of/IN/of the/DT/the project/NN/project /,/, logging/VBG/logging in/IN/in to/TO/to each/DT/each other/JJ/other 's/POS/'s remote/NN/remote systems/NNS/systems to/TO/to run/VB/run programs/NNS/programs /,/, and/CC/and exchanging/VBG/exchanging mail/NN/mail to/TO/to coordinate/VB/coordinate the/DT/the work/NN/work /,/, users/NNS/users minimize/VBP/minimize the/DT/the limitations/NNS/limitations inherent/JJ/inherent in/IN/in longdistance/NN/longdistance work/NN/work we/PRP/we wrote/VBD/wrote this/DT/this book/NN/book by/IN/by collaborating/NN/collaborating in/IN/in such/JJ/such a/DT/a manner/NN/manner /./. the/DT/the advantages/NNS/advantages of/IN/of distributed/VBN/distributed systems/NNS/systems have/VBP/have resulted/VBN/resulted in/IN/in an/DT/an industry-wide/JJ/industry-wide trend/NN/trend toward/IN/toward dovmslzing/NNP/dovmslzing. many/JJ/many companies/NNS/companies are/VBP/are replacing/VBG/replacing their/PRP$/their mainframes/NNS/mainframes with/IN/with networks/NNS/networks of/IN/of workstations/NNS/workstations or/CC/or personal/JJ/personal computers/NNP/computers. companies/NNS/companies get/VBP/get a/DT/a bigger/JJR/bigger bang/NN/bang for/IN/for the/DT/the buck/NN/buck /:/( that/IN/that is/VBZ/is /,/, better/RBR/better functionality/NN/functionality for/IN/for the/DT/the cost/NN/cost /:/) /,/, more/JJR/more flexibility/NN/flexibility in/IN/in locating/NN/locating resources/NNS/resources and/CC/and expanding/VBG/expanding facilities/NNS/facilities /,/, better/RBR/better user/NN/user interfaces/NNS/interfaces /,/, and/CC/and easier/JJR/easier maintenance/NN/maintenance /./. in/IN/in this/DT/this section/NN/section /,/, we/PRP/we describe/VBP/describe the/DT/the two/CD/two general/JJ/general categories/NNS/categories of/IN/of network-oriented/JJ/network-oriented operating/NN/operating systems/NNS/systems /:/: network/NN/network operating/VBG/operating systems/NNS/systems and/CC/and distributed/VBD/distributed operating/VBG/operating systems/NNP/systems. network/NN/network operating/VBG/operating systems/NNS/systems are/VBP/are simpler/JJR/simpler to/TO/to implement/VB/implement but/CC/but generally/RB/generally more/RBR/more difficult/JJ/difficult for/IN/for users/NNS/users to/TO/to access/NN/access and/CC/and utilize/NN/utilize than/IN/than are/VBP/are distributed/VBN/distributed operating/VBG/operating systems/NNS/systems /,/, which/WDT/which provide/VB/provide more/RBR/more features/NNS/features /./. 16.2.1/CD/16.2.1 network/NN/network operating/VBG/operating systems/NNS/systems a/DT/a operating/NN/operating provides/VBZ/provides an/DT/an environment/NN/environment in/IN/in which/WDT/which users/NNS/users /,/, who/WP/who are/VBP/are aware/VBP/aware of/IN/of the/DT/the multiplicity/NN/multiplicity of/IN/of machines/NNS/machines /,/, can/MD/can access/NN/access remote/VB/remote resources/NNS/resources by/IN/by either/DT/either 676/CD/676 chapter/NN/chapter 16/CD/16 logging/VBG/logging in/IN/in to/TO/to the/DT/the appropriate/NN/appropriate remote/NN/remote machine/NN/machine or/CC/or transferring/VBG/transferring data/NNS/data from/IN/from the/DT/the remote/NN/remote machine/NN/machine to/TO/to their/PRP$/their own/JJ/own machines/NNS/machines /./. 16.2.1.1/CD/16.2.1.1 remote/NN/remote login/NN/login an/DT/an important/JJ/important function/NN/function of/IN/of a/DT/a network/NN/network operating/VBG/operating system/NN/system is/VBZ/is to/TO/to allow/VB/allow users/NNS/users to/TO/to log/VB/log in/IN/in remotely/NNP/remotely. the/DT/the internet/NN/internet provides/VBZ/provides the/DT/the telnet/NN/telnet facility/NN/facility for/IN/for this/DT/this p1.npose/NNP/p1.npose. to/TO/to illustrate/VB/illustrate this/DT/this facility/NN/facility /,/, lets/NNS/lets suppose/VBP/suppose that/IN/that a/DT/a user/NN/user at/IN/at westminster/NN/westminster college/NN/college wishes/NNS/wishes to/TO/to compute/VB/compute on/IN/on cs.yale.edu/NNP/cs.yale.edu /,/, a/DT/a computer/NN/computer that/WDT/that is/VBZ/is located/VBN/located at/IN/at yale/NN/yale university/NNP/university. to/TO/to do/VB/do so/RB/so /,/, the/DT/the user/NN/user must/MD/must have/VB/have a/DT/a valid/JJ/valid account/NN/account on/IN/on that/DT/that machine/NNP/machine. to/TO/to log/VB/log in/IN/in remotely/RB/remotely /,/, the/DT/the user/NN/user issues/NNS/issues the/DT/the command/NN/command telnet/NN/telnet cs.yale.edu/-NONE-/cs.yale.edu this/DT/this command/NN/command results/NNS/results in/IN/in the/DT/the formation/NN/formation of/IN/of a/DT/a socket/NN/socket connection/NN/connection between/IN/between the/DT/the local/JJ/local machine/NN/machine at/IN/at westminster/NN/westminster college/NN/college and/CC/and the/DT/the cs.yale.edu/NNP/cs.yale.edu computer/NNP/computer. after/IN/after this/DT/this connection/NN/connection has/VBZ/has been/VBN/been established/VBN/established /,/, the/DT/the networking/NN/networking software/NN/software creates/VBZ/creates a/DT/a transparent/NN/transparent /,/, bidirectional/JJ/bidirectional link/NN/link so/IN/so that/IN/that all/DT/all characters/NNS/characters entered/VBN/entered by/IN/by the/DT/the user/NN/user are/VBP/are sent/VBN/sent to/TO/to a/DT/a process/NN/process on/IN/on cs.yale.edu/JJ/cs.yale.edu and/CC/and all/DT/all the/DT/the output/NN/output from/IN/from that/DT/that process/NN/process is/VBZ/is sent/VBN/sent back/RB/back to/TO/to the/DT/the user/NNP/user. the/DT/the process/NN/process on/IN/on the/DT/the remote/NN/remote machine/NN/machine asks/VBZ/asks the/DT/the user/NN/user for/IN/for a/DT/a login/NN/login name/NN/name and/CC/and a/DT/a password/NN/password /./. once/RB/once the/DT/the correct/NN/correct information/NN/information has/VBZ/has been/VBN/been received/VBN/received /,/, the/DT/the process/NN/process acts/VBZ/acts as/IN/as a/DT/a proxy/NN/proxy for/IN/for the/DT/the use1/NNP/use1 ~/NNP/~ who/WP/who can/MD/can compute/VB/compute on/IN/on the/DT/the remote/NN/remote machine/NN/machine just/RB/just as/IN/as any/DT/any local/JJ/local user/NN/user can/MD/can /./. 16.2.1.2/CD/16.2.1.2 remote/NN/remote file/NN/file transfer/NN/transfer another/DT/another major/JJ/major function/NN/function of/IN/of a/DT/a network/NN/network operating/VBG/operating system/NN/system is/VBZ/is to/TO/to provide/VB/provide a/DT/a mechanism/NN/mechanism for/IN/for remote/NN/remote file/NN/file transfer/NN/transfer from/IN/from one/CD/one machine/NN/machine to/TO/to another/NNP/another. in/IN/in such/JJ/such an/DT/an enviromnent/NN/enviromnent /,/, each/DT/each computer/NN/computer maintains/VBZ/maintains its/PRP$/its own/JJ/own local/JJ/local file/NN/file system/NNP/system. if/IN/if a/DT/a user/NN/user at/IN/at one/CD/one site/JJ/site /NN/( say/NN/say /,/, cs.uvm.edu/NNP/cs.uvm.edu /NNP/) wants/VBZ/wants to/TO/to access/NN/access a/DT/a file/NN/file located/VBN/located on/IN/on another/DT/another computer/NN/computer /:/( say/VB/say /,/, cs.yale.edu/NNP/cs.yale.edu /NNP/) /,/, then/RB/then the/DT/the file/NN/file must/MD/must be/VB/be copied/VBN/copied explicitly/RB/explicitly from/IN/from the/DT/the computer/NN/computer at/IN/at yale/NN/yale to/TO/to the/DT/the computer/NN/computer at/IN/at the/DT/the university/NN/university of/IN/of vermont/NN/vermont /./. the/DT/the internet/NN/internet provides/VBZ/provides a/DT/a mechanism/NN/mechanism for/IN/for such/JJ/such a/DT/a transfer/NN/transfer with/IN/with the/DT/the file/NN/file transfer/NN/transfer protocol/NN/protocol /:/( ftp/NN/ftp /:/) program/NNP/program. suppose/NN/suppose that/WDT/that a/DT/a user/NN/user on/IN/on cs.uvm.edu/NNP/cs.uvm.edu wants/VBZ/wants to/TO/to copy/VB/copy a/DT/a java/NN/java program/NN/program server/NNP/server. java/NN/java that/WDT/that resides/VBZ/resides on/IN/on cs.yale.edu/NNP/cs.yale.edu. the/DT/the user/NN/user must/MD/must first/RB/first invoke/VB/invoke the/DT/the ftp/NN/ftp program/NN/program by/IN/by executing/NN/executing ftp/NN/ftp cs.yale.edu/-NONE-/cs.yale.edu the/DT/the program/NN/program then/RB/then asks/VBZ/asks the/DT/the user/NN/user for/IN/for a/DT/a login/NN/login name/NN/name and/CC/and a/DT/a password/NNP/password. once/RB/once the/DT/the correct/NN/correct information/NN/information has/VBZ/has been/VBN/been received/VBN/received /,/, the/DT/the user/NN/user must/MD/must connect/VB/connect to/TO/to the/DT/the subdirectory/NN/subdirectory where/WRB/where the/DT/the file/JJ/file server/NNP/server. java/NN/java resides/VBZ/resides and/CC/and then/RB/then copy/VB/copy the/DT/the file/NN/file by/IN/by executing/NN/executing get/NN/get server/NNP/server. java/NN/java in/IN/in this/DT/this scheme/NN/scheme /,/, the/DT/the file/NN/file location/NN/location is/VBZ/is not/RB/not transparent/JJ/transparent to/TO/to the/DT/the user/NN/user ;/:/; users/NNS/users must/MD/must know/VB/know exactly/RB/exactly where/WRB/where each/DT/each file/NN/file is/NNP/is. moreover/RB/moreover /,/, there/EX/there is/VBZ/is no/DT/no real/JJ/real file/NN/file sharing/VBG/sharing /,/, because/IN/because a/DT/a user/NN/user can/MD/can only/RB/only copy/VB/copy a/DT/a file/NN/file from/IN/from one/CD/one site/JJ/site to/TO/to another/NNP/another. thus/RB/thus /,/, several/JJ/several copies/NNS/copies of/IN/of the/DT/the same/JJ/same file/NN/file may/MD/may exist/VB/exist /,/, resulting/VBG/resulting in/IN/in a/DT/a waste/NN/waste of/IN/of space/NNP/space. tn/NN/tn addition/NN/addition /,/, if/IN/if these/DT/these copies/NNS/copies are/VBP/are modified/VBN/modified /,/, the/DT/the vario-us/JJ/vario-us copies/NNS/copies will/MD/will be/VB/be inconsistent/VBN/inconsistent /./. 16.2/CD/16.2 677/CD/677 notice/NN/notice that/WDT/that /,/, in/IN/in our/PRP$/our example/NN/example /,/, the/DT/the user/NN/user at/IN/at the/DT/the university/NN/university of/IN/of vermont/NN/vermont must/MD/must have/VB/have login/NN/login permission/NN/permission on/IN/on cs.yale.edu/NNP/cs.yale.edu. ptp/NN/ptp also/RB/also provides/VBZ/provides a/DT/a way/NN/way to/TO/to allow/VB/allow a/DT/a user/NN/user who/WP/who does/VBZ/does not/RB/not have/VB/have an/DT/an account/NN/account on/IN/on the/DT/the yale/NN/yale computer/NN/computer to/TO/to copy/VB/copy files/NNS/files remotely/NNP/remotely. this/DT/this remote/NN/remote copying/VBG/copying is/VBZ/is accomplished/VBN/accomplished through/IN/through the/DT/the anonymous/JJ/anonymous ft'p/NN/ft'p method/NN/method /,/, which/WDT/which works/NNS/works as/IN/as follows/NNP/follows. the/DT/the file/NN/file to/TO/to be/VB/be copied/VBN/copied /-NONE-/( that/IN/that is/VBZ/is /,/, server/NNP/server. java/NN/java /:/) must/MD/must be/VB/be placed/VBN/placed in/IN/in a/DT/a special/JJ/special subdirectory/NN/subdirectory /:/( say/VB/say /,/, jtp/VB/jtp /:/) with/IN/with the/DT/the protection/NN/protection set/VBD/set to/TO/to allow/VB/allow the/DT/the public/NN/public to/TO/to read/VB/read the/DT/the file/NNP/file. a/DT/a user/NN/user who/WP/who wishes/NNS/wishes to/TO/to copy/VB/copy the/DT/the file/NN/file uses/VBZ/uses the/DT/the ftp/NN/ftp command/NN/command as/IN/as before/NNP/before. when/WRB/when the/DT/the user/NN/user is/VBZ/is asked/VBN/asked for/IN/for the/DT/the login/NN/login nan'le/JJ/nan'le /,/, the/DT/the user/NN/user supplies/VBZ/supplies the/DT/the name/NN/name anonymous/VBZ/anonymous and/CC/and an/DT/an arbitrary/JJ/arbitrary password/NN/password /./. once/RB/once anonymous/JJ/anonymous login/NN/login is/VBZ/is accomplished/VBN/accomplished /,/, care/NN/care must/MD/must be/VB/be taken/VBN/taken by/IN/by the/DT/the system/NN/system to/TO/to ensure/VB/ensure that/IN/that this/DT/this partially/RB/partially authorized/VBD/authorized user/NN/user does/VBZ/does not/RB/not access/NN/access inappropriate/NN/inappropriate files/NNP/files. generally/RB/generally /,/, the/DT/the user/NN/user is/VBZ/is allowed/VBN/allowed to/TO/to access/NN/access only/RB/only those/DT/those files/NNS/files that/IN/that are/VBP/are in/IN/in the/DT/the directory/NN/directory tree/NN/tree of/IN/of user/NN/user anonymous/NNP/anonymous. any/DT/any files/NNS/files placed/VBN/placed here/RB/here are/VBP/are accessible/JJ/accessible to/TO/to any/DT/any anonymous/JJ/anonymous users/NNS/users /,/, subject/JJ/subject to/TO/to the/DT/the usual/JJ/usual file-protection/NN/file-protection scheme/NN/scheme used/VBD/used on/IN/on that/DT/that machine/NNP/machine. anonymous/JJ/anonymous users/NNS/users /,/, however/RB/however /,/, cam'lot/JJ/cam'lot access/NN/access files/NNS/files outside/IN/outside of/IN/of this/DT/this directory/NN/directory tree/NN/tree /./. implementation/NN/implementation of/IN/of the/DT/the ftp/NN/ftp mechanism/NN/mechanism is/VBZ/is similar/JJ/similar to/TO/to telnet/VB/telnet implementation/NN/implementation /./. a/DT/a daemon/NN/daemon on/IN/on the/DT/the remote/NN/remote site/NN/site watches/NNS/watches for/IN/for requests/NNS/requests to/TO/to coru'lect/JJ/coru'lect to/TO/to the/DT/the system/NN/system 's/POS/'s ptp/NN/ptp port/NNP/port. login/NN/login authentication/NN/authentication is/VBZ/is accomplished/VBN/accomplished /,/, and/CC/and the/DT/the user/NN/user is/VBZ/is allowed/VBN/allowed to/TO/to execute/VB/execute commands/NNS/commands remotely/NNP/remotely. unlike/IN/unlike the/DT/the telnet/NN/telnet daemon/NN/daemon /,/, which/WDT/which executes/VBZ/executes any/DT/any command/NN/command for/IN/for the/DT/the user/NN/user /,/, the/DT/the ptp/NN/ptp daemon/NN/daemon responds/NNS/responds only/RB/only to/TO/to a/DT/a predefined/JJ/predefined set/NN/set of/IN/of file-related/JJ/file-related commands/NNP/commands. these/DT/these include/NN/include the/DT/the following/VBG/following /:/: get-transfer/JJ/get-transfer a/DT/a file/NN/file from/IN/from the/DT/the remote/NN/remote machine/NN/machine to/TO/to the/DT/the local/JJ/local machine/NN/machine /./. put-transfer/JJ/put-transfer from/IN/from the/DT/the local/JJ/local machine/NN/machine to/TO/to the/DT/the remote/NN/remote machine/NN/machine /./. ls/NNS/ls or/CC/or dir-list/JJ/dir-list files/NNS/files in/IN/in the/DT/the current/JJ/current directory/NN/directory on/IN/on the/DT/the remote/NN/remote machine/NN/machine /./. cd/NN/cd -change/NN/-change the/DT/the current/JJ/current directory/NN/directory on/IN/on the/DT/the remote/NN/remote machine/NN/machine /./. there/EX/there are/VBP/are also/RB/also various/JJ/various commands/NNS/commands to/TO/to change/VB/change transfer/NN/transfer modes/NNS/modes /:/( for/IN/for binary/JJ/binary or/CC/or ascii/NN/ascii files/NNS/files /:/) and/CC/and to/TO/to determine/VB/determine connection/NN/connection status/NN/status /./. an/DT/an important/JJ/important point/NN/point about/IN/about telnet/JJ/telnet and/CC/and ptp/NN/ptp is/VBZ/is that/IN/that they/PRP/they require/VBP/require the/DT/the user/NN/user to/TO/to change/VB/change paradigms/NNP/paradigms. ptp/NN/ptp requires/VBZ/requires the/DT/the user/NN/user to/TO/to know/VB/know a/DT/a command/NN/command set/NN/set entirely/RB/entirely different/JJ/different from/IN/from the/DT/the normal/JJ/normal operating-system/NN/operating-system commands/NNP/commands. telnet/NN/telnet requires/VBZ/requires a/DT/a smaller/JJR/smaller shift/NN/shift /:/: the/DT/the user/NN/user must/MD/must know/VB/know appropriate/JJ/appropriate commands/NNS/commands on/IN/on the/DT/the remote/NN/remote system/NN/system /./. for/IN/for instance/NN/instance /,/, a/DT/a user/NN/user on/IN/on a/DT/a windows/NN/windows machine/NN/machine who/WP/who teh'lets/NNS/teh'lets to/TO/to a/DT/a unix/NN/unix machine/NN/machine must/MD/must switch/VB/switch to/TO/to unix/VB/unix commands/NNS/commands for/IN/for the/DT/the duration/NN/duration of/IN/of the/DT/the telnet/NN/telnet session/NNP/session. facilities/NNS/facilities are/VBP/are more/RBR/more convenient/JJ/convenient for/IN/for users/NNS/users if/IN/if they/PRP/they do/VBP/do not/RB/not require/VB/require the/DT/the use/NN/use of/IN/of a/DT/a different/JJ/different set/NN/set of/IN/of commands/NNP/commands. distributed/VBD/distributed operating/VBG/operating systems/NNS/systems are/VBP/are designed/VBN/designed to/TO/to address/NN/address this/DT/this problem/NN/problem /./. 16.2.2/CD/16.2.2 distributed/VBN/distributed operating/NN/operating systems/NNS/systems in/IN/in a/DT/a distributed/VBN/distributed operating/NN/operating system/NN/system /,/, users/NNS/users access/NN/access remote/NN/remote resources/NNS/resources in/IN/in the/DT/the same/JJ/same way/NN/way they/PRP/they access/VBP/access local/JJ/local resources/NNP/resources. data/NNS/data and/CC/and process/NN/process migration/NN/migration from/IN/from one/CD/one site/JJ/site to/TO/to another/DT/another is/VBZ/is under/IN/under the/DT/the control/NN/control of/IN/of the/DT/the distributed/VBN/distributed operating/NN/operating system/NN/system /./. 16.2.2.1/CD/16.2.2.1 data/NNS/data migration/NN/migration suppose/NN/suppose a/DT/a user/NN/user on/IN/on site/JJ/site a/DT/a wants/NNS/wants to/TO/to access/NN/access data/NNS/data /:/( such/JJ/such as/IN/as a/DT/a file/NN/file /:/) that/IN/that reside/NN/reside at/IN/at site/JJ/site b/NNP/b. the/DT/the system/NN/system can/MD/can transfer/VB/transfer the/DT/the data/NNS/data by/IN/by one/CD/one of/IN/of two/CD/two basic/JJ/basic methods/NNP/methods. one/CD/one approach/NN/approach 678/CD/678 chapter/NN/chapter 16/CD/16 to/TO/to is/VBZ/is to/TO/to transfer/VB/transfer the/DT/the entire/JJ/entire file/NN/file to/TO/to site/VB/site a/NNP/a. from/IN/from that/DT/that point/NN/point on/IN/on /,/, all/DT/all access/NN/access to/TO/to the/DT/the file/NN/file is/VBZ/is local/NNP/local. when/WRB/when the/DT/the user/NN/user no/DT/no longer/NN/longer needs/VBZ/needs access/NN/access to/TO/to the/DT/the file/NN/file /,/, a/DT/a copy/NN/copy of/IN/of the/DT/the file/NN/file /:/( if/IN/if it/PRP/it has/VBZ/has been/VBN/been modified/VBN/modified /-NONE-/) is/VBZ/is sent/VBN/sent back/RB/back to/TO/to site/VB/site b/NNP/b. even/RB/even if/IN/if only/RB/only a/DT/a modest/JJ/modest change/NN/change has/VBZ/has been/VBN/been made/VBN/made to/TO/to a/DT/a large/JJ/large file/NN/file /,/, all/DT/all the/DT/the data/NNS/data must/MD/must be/VB/be transferred/VBN/transferred /./. this/DT/this mechanism/NN/mechanism can/MD/can be/VB/be thought/VBN/thought of/IN/of as/RB/as an/DT/an automated/VBN/automated ftp/NN/ftp system/NNP/system. this/DT/this approach/NN/approach was/VBD/was used/VBN/used in/IN/in the/DT/the andrew/NN/andrew file/NN/file system/NNP/system. /,/, as/IN/as we/PRP/we discuss/VBP/discuss in/IN/in chapter/NN/chapter 17/CD/17 /,/, but/CC/but it/PRP/it was/VBD/was found/VBN/found to/TO/to be/VB/be too/RB/too inefficient/JJ/inefficient /./. the/DT/the other/JJ/other approach/NN/approach is/VBZ/is to/TO/to transfer/VB/transfer to/TO/to site/VB/site a/DT/a only/JJ/only those/DT/those portions/NNS/portions of/IN/of the/DT/the file/NN/file that/IN/that are/VBP/are actually/RB/actually necessary/JJ/necessary for/IN/for the/DT/the immediate/JJ/immediate task/NNP/task. if/IN/if another/DT/another portion/NN/portion is/VBZ/is required/VBN/required later/JJ/later /,/, another/DT/another transfer/NN/transfer will/MD/will take/VB/take place/NNP/place. when/WRB/when the/DT/the user/NN/user no/DT/no longer/NN/longer wants/VBZ/wants to/TO/to access/NN/access the/DT/the file/NN/file /,/, any/DT/any part/NN/part of/IN/of it/PRP/it that/IN/that has/VBZ/has been/VBN/been modified/VBN/modified must/MD/must be/VB/be sent/VBN/sent back/RP/back to/TO/to site/VB/site b/NNP/b. /NNP/( note/NN/note the/DT/the similarity/NN/similarity to/TO/to demand/NN/demand paging/NNP/paging. /NNP/) the/DT/the sun/NN/sun microsystems/NNS/microsystems network/NN/network file/NN/file system/NN/system /:/( nfs/NNS/nfs /VBP/) protocol/NN/protocol uses/NNS/uses this/DT/this method/NN/method /:/( chapter/NN/chapter 17/CD/17 /CD/) /,/, as/IN/as do/VB/do newer/JJR/newer versions/NNS/versions of/IN/of andrew/JJ/andrew /./. the/DT/the microsoft/NN/microsoft smb/NN/smb protocol/NN/protocol /:/( running/VBG/running on/IN/on top/JJ/top of/IN/of either/DT/either tcp/NN/tcp /ip/NN//ip or/CC/or the/DT/the microsoft/NN/microsoft netbeui/NN/netbeui protocol/NN/protocol /:/) also/RB/also allows/VBZ/allows file/JJ/file sharing/NN/sharing over/IN/over a/DT/a network/NNP/network. smb/NN/smb is/VBZ/is described/VBN/described in/IN/in appendix/NN/appendix c.6.1/-NONE-/c.6.1 /./. clearly/RB/clearly /,/, if/IN/if only/RB/only a/DT/a small/JJ/small part/NN/part of/IN/of a/DT/a large/JJ/large file/NN/file is/VBZ/is being/VBG/being accessed/VBN/accessed /,/, the/DT/the latter/NN/latter approach/NN/approach is/VBZ/is preferable/NNP/preferable. if/IN/if significant/JJ/significant portions/NNS/portions of/IN/of the/DT/the file/NN/file are/VBP/are being/VBG/being accessed/VBN/accessed /,/, however/RB/however /,/, it/PRP/it is/VBZ/is more/RBR/more efficient/JJ/efficient to/TO/to copy/VB/copy the/DT/the entire/JJ/entire file/NNP/file. in/IN/in both/DT/both methods/NNS/methods /,/, data/NNS/data migration/NN/migration includes/VBZ/includes more/JJR/more than/IN/than the/DT/the mere/JJ/mere transfer/NN/transfer of/IN/of data/NNS/data from/IN/from one/CD/one site/JJ/site to/TO/to another/DT/another /./. the/DT/the system/NN/system must/MD/must also/RB/also perform/VB/perform various/JJ/various data/NNS/data translations/NNS/translations if/IN/if the/DT/the two/CD/two sites/NNS/sites involved/VBN/involved are/VBP/are not/RB/not directly/RB/directly compatible/JJ/compatible /NN/( for/IN/for instance/NN/instance /,/, if/IN/if they/PRP/they use/VBP/use different/JJ/different character-code/JJ/character-code representations/NNS/representations or/CC/or represent/VBP/represent integers/NNS/integers with/IN/with a/DT/a different/JJ/different number/NN/number or/CC/or order/NN/order of/IN/of bits/NNS/bits /:/) /./. 16.2.2.2/CD/16.2.2.2 computation/NN/computation migration/NN/migration in/IN/in some/DT/some circumstances/NNS/circumstances /,/, we/PRP/we may/MD/may want/VB/want to/TO/to transfer/VB/transfer the/DT/the computation/NN/computation /,/, rather/RB/rather than/IN/than the/DT/the data/NNS/data /,/, across/IN/across the/DT/the system/NN/system ;/:/; this/DT/this approach/NN/approach is/VBZ/is called/VBN/called for/IN/for example/NN/example /,/, consider/NN/consider a/DT/a job/NN/job that/WDT/that needs/VBZ/needs to/TO/to access/NN/access various/JJ/various large/JJ/large files/NNS/files that/WDT/that reside/IN/reside at/IN/at different/JJ/different sites/NNS/sites /,/, to/TO/to obtain/VB/obtain a/DT/a summary/JJ/summary of/IN/of those/DT/those files/NNP/files. it/PRP/it would/MD/would be/VB/be more/RBR/more efficient/JJ/efficient to/TO/to access/NN/access the/DT/the files/NNS/files at/IN/at the/DT/the sites/NNS/sites where/WRB/where they/PRP/they reside/VBP/reside and/CC/and return/NN/return the/DT/the desired/VBN/desired results/NNS/results to/TO/to the/DT/the site/NN/site that/IN/that il/NN/il itiated/VBD/itiated the/DT/the computation/NNP/computation. generally/RB/generally /,/, if/IN/if the/DT/the time/NN/time to/TO/to transfer/VB/transfer the/DT/the data/NNS/data is/VBZ/is longer/JJR/longer than/IN/than the/DT/the time/NN/time to/TO/to execute/VB/execute the/DT/the remote/NN/remote cmmnand/NN/cmmnand /,/, the/DT/the remote/NN/remote command/NN/command should/MD/should be/VB/be used/VBN/used /./. such/JJ/such a/DT/a computation/NN/computation can/MD/can be/VB/be carried/VBN/carried out/RP/out in/IN/in different/JJ/different ways/NNP/ways. suppose/NN/suppose that/WDT/that process/NN/process p/VBP/p wants/NNS/wants to/TO/to access/NN/access a/DT/a file/NN/file at/IN/at site/JJ/site a/NNP/a. access/NN/access to/TO/to the/DT/the file/NN/file is/VBZ/is carried/VBN/carried out/RP/out at/IN/at site/JJ/site a/DT/a and/CC/and could/MD/could be/VB/be il/JJ/il itiated/VBN/itiated by/IN/by an/DT/an rpc/NNP/rpc. an/DT/an rpc/NN/rpc uses/VBZ/uses a/DT/a /NN/( udp/NN/udp on/IN/on the/DT/the internet/NN/internet /:/) to/TO/to execute/VB/execute a/DT/a routine/NN/routine on/IN/on a/DT/a remote/NN/remote system/NN/system /:/( section/NN/section 3.6.2/CD/3.6.2 /CD/) /./. process/NN/process p/NN/p invokes/VBZ/invokes a/DT/a predefilced/VBN/predefilced procedure/NN/procedure at/IN/at site/JJ/site a/NNP/a. the/DT/the procedure/NN/procedure executes/VBZ/executes appropriately/RB/appropriately and/CC/and then/RB/then returns/NNS/returns the/DT/the results/NNS/results to/TO/to p/VB/p /./. alternatively/RB/alternatively process/NN/process p/NN/p can/MD/can send/VB/send a/DT/a message/NN/message to/TO/to site/VB/site a/NNP/a. the/DT/the operatil/NN/operatil g/NN/g system/NN/system at/IN/at site/JJ/site a/DT/a then/RB/then creates/VBZ/creates a/DT/a new/JJ/new process/NN/process q/NN/q whose/WP$/whose function/NN/function is/VBZ/is to/TO/to carry/VB/carry out/RP/out the/DT/the designated/VBN/designated task/NNP/task. when/WRB/when process/NN/process q/NN/q completes/VBZ/completes its/PRP$/its execution/NN/execution /,/, it/PRP/it sends/VBZ/sends the/DT/the needed/VBN/needed result/NN/result back/RB/back to/TO/to p/VB/p via/IN/via the/DT/the message/NN/message system/NNP/system. in/IN/in this/DT/this scheme/NN/scheme /,/, process/NN/process p/NN/p may/MD/may execute/VB/execute concurrently/RB/concurrently with/IN/with process/NN/process q/NN/q ;/:/; in/IN/in fact/NN/fact /,/, it/PRP/it may/MD/may have/VB/have several/JJ/several processes/NNS/processes running/VBG/running concurrently/RB/concurrently on/IN/on several/JJ/several sites/NNS/sites /./. either/DT/either method/NN/method could/MD/could be/VB/be used/VBN/used to/TO/to access/NN/access several/JJ/several files/NNS/files residing/VBG/residing at/IN/at various/JJ/various sites/NNS/sites /./. one/CD/one rpc/NN/rpc might/MD/might result/VB/result in/IN/in the/DT/the ilwocation/NN/ilwocation of/IN/of another/DT/another rpc/NN/rpc or/CC/or even/RB/even in/IN/in the/DT/the transfer/NN/transfer of/IN/of messages/NNS/messages to/TO/to another/DT/another site/NNP/site. similarly/RB/similarly /,/, process/NN/process q/NN/q could/MD/could /,/, duril/VB/duril g/NN/g the/DT/the course/NN/course of/IN/of its/PRP$/its 16.3/CD/16.3 16.3/CD/16.3 679/CD/679 execution/NN/execution /,/, send/NN/send a/DT/a message/NN/message to/TO/to another/DT/another site/NN/site /,/, which/WDT/which in/IN/in turn/NN/turn would/MD/would create/VB/create another/DT/another process/NNP/process. this/DT/this process/NN/process might/MD/might either/VB/either send/NN/send a/DT/a message/NN/message back/RB/back to/TO/to q/VB/q or/CC/or repeat/VB/repeat the/DT/the cycle/NN/cycle /./. 16.2.2.3/CD/16.2.2.3 process/NN/process migration/NN/migration a/DT/a logical/JJ/logical extension/NN/extension of/IN/of computation/NN/computation migration/NN/migration is/VBZ/is na/NN/na /,/, '/''/' '/''/' ~/:/~ c/NN/c process/NN/process is/VBZ/is submitted/VBN/submitted for/IN/for execution/NN/execution /,/, it/PRP/it is/VBZ/is not/RB/not always/RB/always executed/VBN/executed at/IN/at it/PRP/it is/VBZ/is initiated/NNP/initiated. the/DT/the entire/JJ/entire process/NN/process /,/, or/CC/or parts/NNS/parts of/IN/of it/PRP/it /,/, may/MD/may be/VB/be executed/VBN/executed at/IN/at different/JJ/different sites/NNP/sites. this/DT/this scheme/NN/scheme may/MD/may be/VB/be used/VBN/used for/IN/for several/JJ/several reasons/NNS/reasons /:/: load/JJ/load balancing/NNP/balancing. the/DT/the processes/NNS/processes /:/( or/CC/or subprocesses/NNS/subprocesses /:/) may/MD/may be/VB/be distributed/VBN/distributed across/IN/across the/DT/the network/NN/network to/TO/to even/RB/even the/DT/the workload/NN/workload /./. computation/NN/computation speedup/NNP/speedup. if/IN/if a/DT/a single/JJ/single process/NN/process can/MD/can be/VB/be divided/VBN/divided into/IN/into a/DT/a number/NN/number of/IN/of subprocesses/NNS/subprocesses that/WDT/that can/MD/can run/VB/run concurrently/RB/concurrently on/IN/on different/JJ/different sites/NNS/sites /,/, then/RB/then the/DT/the total/NN/total process/NN/process turnaround/NN/turnaround time/NN/time can/MD/can be/VB/be reduced/VBN/reduced /./. hardware/NN/hardware preference/NNP/preference. the/DT/the process/NN/process may/MD/may have/VB/have characteristics/NNS/characteristics that/WDT/that make/VBP/make it/PRP/it more/JJR/more suitable/JJ/suitable for/IN/for execution/NN/execution on/IN/on some/DT/some specialized/VBN/specialized processor/NN/processor /:/( such/JJ/such as/IN/as matrix/NN/matrix inversion/NN/inversion on/IN/on an/DT/an array/NN/array processor/NN/processor /:/) rather/RB/rather than/IN/than on/IN/on a/DT/a microprocessor/NN/microprocessor /./. software/NN/software preference/NNP/preference. the/DT/the process/NN/process may/MD/may require/VB/require software/NN/software that/WDT/that is/VBZ/is available/JJ/available at/IN/at only/RB/only a/DT/a particular/JJ/particular site/NN/site /,/, and/CC/and either/DT/either the/DT/the software/NN/software can/MD/can not/RB/not be/VB/be moved/VBN/moved /,/, or/CC/or it/PRP/it is/VBZ/is less/JJR/less expensive/JJ/expensive to/TO/to move/VB/move the/DT/the process/NN/process /./. data/NNS/data access/NNP/access. just/RB/just as/IN/as in/IN/in computation/NN/computation migration/NN/migration /,/, if/IN/if the/DT/the data/NNS/data being/VBG/being used/VBN/used in/IN/in the/DT/the computation/NN/computation are/VBP/are numerous/JJ/numerous /,/, it/PRP/it may/MD/may be/VB/be more/RBR/more efficient/JJ/efficient to/TO/to have/VB/have a/DT/a process/NN/process run/VBN/run remotely/RB/remotely than/IN/than to/TO/to transfer/VB/transfer all/DT/all the/DT/the data/NNS/data /./. we/PRP/we use/VBP/use two/CD/two complementary/JJ/complementary techniques/NNS/techniques to/TO/to move/VB/move processes/NNS/processes in/IN/in a/DT/a computer/NN/computer network/NNP/network. in/IN/in the/DT/the first/JJ/first /,/, the/DT/the system/NN/system can/MD/can attempt/VB/attempt to/TO/to hide/VB/hide the/DT/the fact/NN/fact that/IN/that the/DT/the process/NN/process has/VBZ/has migrated/VBN/migrated from/IN/from the/DT/the client/NNP/client. this/DT/this scheme/NN/scheme has/VBZ/has the/DT/the advantage/NN/advantage that/IN/that the/DT/the user/NN/user does/VBZ/does not/RB/not need/VBP/need to/TO/to code/VB/code her/PRP$/her program/NN/program explicitly/RB/explicitly to/TO/to accomplish/VB/accomplish the/DT/the migration/NNP/migration. this/DT/this method/NN/method is/VBZ/is usually/RB/usually employed/VBN/employed for/IN/for achieving/NN/achieving load/NN/load balancing/VBG/balancing and/CC/and computation/NN/computation speedup/NN/speedup among/IN/among homogeneous/JJ/homogeneous systems/NNS/systems /,/, as/IN/as they/PRP/they do/VBP/do not/RB/not need/VB/need user/NN/user input/NN/input to/TO/to help/VB/help them/PRP/them execute/VB/execute programs/NNS/programs remotely/RB/remotely /./. the/DT/the other/JJ/other approach/NN/approach is/VBZ/is to/TO/to allow/VB/allow /:/( or/CC/or require/VB/require /CD/) the/DT/the user/NN/user to/TO/to specify/VB/specify explicitly/RB/explicitly how/WRB/how the/DT/the process/NN/process should/MD/should migrate/NNP/migrate. this/DT/this method/NN/method is/VBZ/is usually/RB/usually employed/VBN/employed when/WRB/when the/DT/the process/NN/process must/MD/must be/VB/be moved/VBN/moved to/TO/to satisfy/VB/satisfy a/DT/a hardware/NN/hardware or/CC/or software/NN/software preference/NN/preference /./. you/PRP/you have/VBP/have probably/RB/probably realized/VBN/realized that/IN/that the/DT/the web/NN/web has/VBZ/has many/JJ/many aspects/NNS/aspects of/IN/of a/DT/a distributedcomputing/NN/distributedcomputing environment/NNP/environment. certainly/RB/certainly it/PRP/it provides/VBZ/provides data/NNS/data migration/NN/migration /:/( between/IN/between a/DT/a web/NN/web server/NN/server and/CC/and a/DT/a web/NN/web client/NN/client /:/) /./. it/PRP/it also/RB/also provides/VBZ/provides computation/NN/computation migration/NNP/migration. for/IN/for instance/NN/instance /,/, a/DT/a web/NN/web client/NN/client could/MD/could trigger/VB/trigger a/DT/a database/NN/database operation/NN/operation on/IN/on a/DT/a web/NN/web server/NNP/server. finally/RB/finally /,/, with/IN/with java/NN/java /,/, it/PRP/it provides/VBZ/provides a/DT/a form/NN/form of/IN/of process/NN/process migration/NN/migration /:/: java/NN/java applets/NNS/applets are/VBP/are sent/VBN/sent from/IN/from the/DT/the server/NN/server to/TO/to the/DT/the client/NN/client /,/, where/WRB/where they/PRP/they are/VBP/are executed/NNP/executed. a/DT/a network/NN/network operating/VBG/operating system/NN/system provides/VBZ/provides most/JJS/most of/IN/of these/DT/these features/NNS/features /,/, but/CC/but a/DT/a distributed/VBN/distributed operating/NN/operating system/NN/system makes/VBZ/makes them/PRP/them seamless/JJR/seamless and/CC/and easily/RB/easily accessible/NNP/accessible. the/DT/the result/NN/result is/VBZ/is a/DT/a powerful/JJ/powerful and/CC/and easy-to-use/JJ/easy-to-use facility-one/NN/facility-one of/IN/of the/DT/the reasons/NNS/reasons for/IN/for the/DT/the huge/JJ/huge growth/NN/growth of/IN/of the/DT/the world/NN/world wide/NN/wide web/NN/web /./. there/EX/there are/VBP/are basically/RB/basically two/CD/two types/NNS/types of/IN/of networks/NNS/networks /:/: and/CC/and the/DT/the main/JJ/main difference/NN/difference between/IN/between the/DT/the two/CD/two is/VBZ/is the/DT/the way/NN/way in/IN/in 680/CD/680 chapter/NN/chapter 16/CD/16 which/WDT/which they/PRP/they are/VBP/are geographically/RB/geographically distributed/NNP/distributed. local-area/NNP/local-area networks/VBZ/networks are/VBP/are composed/VBN/composed of/IN/of processors/NNS/processors distributed/VBN/distributed over/IN/over small/JJ/small areas/NNS/areas /:/( such/JJ/such as/IN/as a/DT/a single/JJ/single building/NN/building or/CC/or a/DT/a number/NN/number of/IN/of adjacent/NN/adjacent buildings/NNS/buildings /:/) /,/, whereas/IN/whereas wide-area/NNP/wide-area networks/NNS/networks are/VBP/are composed/VBN/composed of/IN/of a/DT/a number/NN/number of/IN/of autonomous/JJ/autonomous processors/NNS/processors distributed/VBN/distributed over/IN/over a/DT/a large/JJ/large area/NN/area /:/( such/JJ/such as/IN/as the/DT/the united/VBN/united states/NNS/states /:/) /./. these/DT/these differences/NNS/differences imply/VBP/imply major/JJ/major variations/NNS/variations in/IN/in the/DT/the speed/NN/speed and/CC/and reliability/NN/reliability of/IN/of the/DT/the communications/NNS/communications networks/VBZ/networks /,/, and/CC/and they/PRP/they are/VBP/are reflected/VBN/reflected in/IN/in the/DT/the distributed/VBN/distributed operating-system/JJ/operating-system design/NN/design /./. 16.3.1/CD/16.3.1 local-area/NNP/local-area networks/NNS/networks local-area/NNP/local-area networks/NNS/networks emerged/VBD/emerged in/IN/in the/DT/the early/JJ/early 1970s/CD/1970s as/IN/as a/DT/a substitute/NN/substitute for/IN/for large/JJ/large mainframe/NN/mainframe computer/NN/computer systems/NNP/systems. for/IN/for many/JJ/many enterprises/NNS/enterprises /,/, it/PRP/it is/VBZ/is more/RBR/more economical/JJ/economical to/TO/to have/VB/have a/DT/a number/NN/number of/IN/of small/JJ/small computers/NNS/computers /,/, each/DT/each with/IN/with its/PRP$/its own/JJ/own self-contained/JJ/self-contained applications/NNS/applications /,/, than/IN/than to/TO/to have/VB/have a/DT/a single/JJ/single large/JJ/large system/NNP/system. because/IN/because each/DT/each small/JJ/small computer/NN/computer is/VBZ/is likely/JJ/likely to/TO/to need/VB/need a/DT/a full/JJ/full complement/NN/complement of/IN/of peripheral/JJ/peripheral devices/NNS/devices /:/( such/JJ/such as/IN/as disks/NNS/disks and/CC/and printers/NNS/printers /:/) /,/, and/CC/and because/IN/because some/DT/some form/NN/form of/IN/of data/NNS/data sharing/VBG/sharing is/VBZ/is likely/JJ/likely to/TO/to occur/VB/occur in/IN/in a/DT/a single/JJ/single enterprise/NN/enterprise /,/, it/PRP/it was/VBD/was a/DT/a natural/JJ/natural step/NN/step to/TO/to connect/VB/connect these/DT/these small/JJ/small systems/NNS/systems into/IN/into a/DT/a network/NN/network /./. lans/NNS/lans /,/, as/IN/as mentioned/VBN/mentioned /,/, are/VBP/are usually/RB/usually designed/VBN/designed to/TO/to cover/VB/cover a/DT/a small/JJ/small geographical/JJ/geographical area/NN/area /:/( such/JJ/such as/IN/as a/DT/a single/JJ/single building/NN/building or/CC/or a/DT/a few/JJ/few adjacent/NN/adjacent buildings/NNS/buildings /:/) and/CC/and are/VBP/are generally/RB/generally used/VBN/used in/IN/in an/DT/an office/NN/office environment/NNP/environment. all/DT/all the/DT/the sites/NNS/sites in/IN/in such/JJ/such systems/NNS/systems are/VBP/are close/JJ/close to/TO/to one/CD/one another/DT/another /,/, so/RB/so the/DT/the communication/NN/communication links/VBZ/links tend/NN/tend to/TO/to have/VB/have a/DT/a higher/JJR/higher speed/NN/speed and/CC/and lower/JJR/lower error/NN/error rate/NN/rate than/IN/than do/VB/do their/PRP$/their cou.rjerparts/NNS/cou.rjerparts in/IN/in wide-area/NNP/wide-area networks/NNP/networks. high-quality/NNP/high-quality /NNP/( expensive/JJ/expensive /NN/) cables/NNS/cables are/VBP/are needed/VBN/needed to/TO/to attain/VB/attain this/DT/this higher/JJR/higher speed/NN/speed and/CC/and reliability/NNP/reliability. it/PRP/it is/VBZ/is also/RB/also possible/JJ/possible to/TO/to use/VB/use the/DT/the cable/JJ/cable exclusively/RB/exclusively for/IN/for data/NNS/data network/NN/network traffic/NNP/traffic. over/IN/over longer/JJR/longer distances/NNS/distances /,/, the/DT/the cost/NN/cost of/IN/of using/VBG/using high-quality/NN/high-quality cable/NN/cable is/VBZ/is enormous/JJ/enormous /,/, and/CC/and the/DT/the exclusive/JJ/exclusive use/NN/use of/IN/of the/DT/the cable/JJ/cable tends/NNS/tends to/TO/to be/VB/be prohibitively/RB/prohibitively expensive/JJ/expensive /./. the/DT/the most/RBS/most conunon/JJ/conunon links/NNS/links in/NNP/in. a/DT/a local-area/NNP/local-area network/NN/network are/VBP/are twisted-pair/JJ/twisted-pair and/CC/and fiberoptic/JJ/fiberoptic cabling/NNP/cabling. the/DT/the most/RBS/most common/JJ/common configurations/NNS/configurations are/VBP/are multiaccess/RB/multiaccess bus/VBZ/bus /,/, ring/VBG/ring /,/, and/CC/and star/NN/star networks/NNP/networks. communication/NN/communication speeds/VBZ/speeds range/NN/range from/IN/from 1/CD/1 megabit/NN/megabit per/IN/per second/JJ/second /,/, for/IN/for networks/NNS/networks such/JJ/such as/IN/as appletalk/NN/appletalk /,/, infrared/VBD/infrared /,/, and/CC/and the/DT/the new/JJ/new bluetooth/NN/bluetooth local/JJ/local radio/NN/radio network/NN/network /,/, to/TO/to 1/CD/1 gigabit/NN/gigabit per/IN/per second/JJ/second for/IN/for ethernet/NNP/ethernet. ten/CD/ten megabits/NNS/megabits per/IN/per second/JJ/second is/VBZ/is the/DT/the speed/NN/speed of/IN/of requires/NNS/requires a/DT/a higher-quality/NN/higher-quality cable/NN/cable but/CC/but runs/VBZ/runs at/IN/at 100/CD/100 m/NN/m ~/:/~ egabits/NNS/egabits per/IN/per second/JJ/second and/CC/and is/VBZ/is common/NNP/common. also/RB/also growing/VBG/growing is/VBZ/is the/DT/the use/NN/use of/IN/of optical-fiber-based/JJ/optical-fiber-based fddi/NN/fddi networking/NNP/networking. the/DT/the fddi/NN/fddi network/NN/network is/VBZ/is token-based/JJ/token-based and/CC/and runs/VBZ/runs at/IN/at over/IN/over 100/CD/100 megabits/NNS/megabits per/IN/per second/JJ/second /./. a/DT/a typical/JJ/typical lan/NN/lan may/MD/may consist/VB/consist of/IN/of a/DT/a number/NN/number of/IN/of different/JJ/different computers/NNS/computers /:/( from/IN/from mainframes/NNS/mainframes to/TO/to laptops/NNS/laptops or/CC/or pdas/NNS/pdas /:/) /,/, various/JJ/various shared/VBN/shared peripheral/JJ/peripheral devices/NNS/devices /:/( such/JJ/such as/IN/as laser/NN/laser printers/NNS/printers and/CC/and magnetic-tape/JJ/magnetic-tape drives/NNS/drives /:/) /,/, and/CC/and one/CD/one or/CC/or more/JJR/more gateways/NNS/gateways /:/( specialized/VBN/specialized processors/NNS/processors /:/) that/IN/that provide/NN/provide access/NN/access to/TO/to other/JJ/other networks/NNS/networks /:/( figure/NN/figure 16.2/CD/16.2 /CD/) /./. an/DT/an ethernet/NN/ethernet scheme/NN/scheme is/VBZ/is commonly/RB/commonly used/VBN/used to/TO/to construct/VB/construct lans/NNP/lans. an/DT/an ethernet/NN/ethernet network/NN/network has/VBZ/has no/DT/no central/JJ/central controller/NN/controller /,/, because/IN/because it/PRP/it is/VBZ/is a/DT/a multiaccess/NN/multiaccess bus/NN/bus /,/, so/RB/so new/JJ/new hosts/NNS/hosts can/MD/can be/VB/be added/VBN/added easily/RB/easily to/TO/to the/DT/the network/NN/network the/DT/the ethernet/NN/ethernet protocol/NN/protocol is/VBZ/is defined/VBN/defined by/IN/by the/DT/the ieee/NN/ieee 802.3/CD/802.3 standard/JJ/standard /./. there/EX/there has/VBZ/has been/VBN/been significant/JJ/significant growth/NN/growth in/IN/in using/VBG/using the/DT/the wireless/NN/wireless spectrum/NN/spectrum for/IN/for designing/NN/designing local-area/NN/local-area networks/NNP/networks. wireless/NN/wireless /:/( or/CC/or wifi/NN/wifi /:/) networks/NNS/networks allow/VBP/allow constructing/VBG/constructing a/DT/a network/NN/network using/VBG/using only/RB/only a/DT/a wireless/NN/wireless router/NN/router for/IN/for transmitting/NN/transmitting signals/NNS/signals between/IN/between hosts/NNS/hosts /./. each/DT/each host/NN/host has/VBZ/has a/DT/a wireless/NN/wireless adapter/NN/adapter networking/VBG/networking card/NN/card which/WDT/which allows/VBZ/allows it/PRP/it to/TO/to join/VB/join and/CC/and use/VB/use the/DT/the wireless/NN/wireless network/NN/network however/RB/however /,/, where/WRB/where ethernet/JJ/ethernet systems/NNS/systems often/RB/often run/VBN/run at/IN/at 100/CD/100 megabits/NNS/megabits per/IN/per second/JJ/second /,/, wifi/NN/wifi networks/NNS/networks typically/RB/typically run/VBN/run at/IN/at slower/JJR/slower speeds/NNP/speeds. there/RB/there are/VBP/are 16.3/CD/16.3 681/CD/681 workstation/NN/workstation workstation/NN/workstation workstation/NN/workstation printer/NN/printer laptop/NN/laptop file/NN/file server/NN/server figure/NN/figure 16.2/CD/16.2 local-area/NN/local-area network/NN/network /./. several/JJ/several ieee/NN/ieee standards/NNS/standards for/IN/for wireless/NN/wireless networks/NNS/networks /:/: 802.11g/CD/802.11g can/MD/can theoretically/RB/theoretically run/VB/run at/IN/at 54/CD/54 megabits/NNS/megabits per/IN/per second/JJ/second /,/, although/IN/although ilc/NN/ilc practice/NN/practice data/NNS/data rates/NNS/rates are/VBP/are often/RB/often less/RBR/less than/IN/than half/PDT/half that/IN/that amount/NNP/amount. the/DT/the recent/JJ/recent 802.11n/CD/802.11n standard/JJ/standard provides/NNS/provides theoretically/RB/theoretically much/RB/much higher/JJR/higher data/NNS/data rates/NNS/rates than/IN/than 802.11g/CD/802.11g /,/, although/IN/although in/IN/in actual/JJ/actual practice/NN/practice 802.11n/CD/802.11n networks/NNS/networks have/VBP/have typical/JJ/typical data/NNS/data rates/NNS/rates of/IN/of around/IN/around 75/CD/75 megabits/NNS/megabits per/IN/per second/NNP/second. data/NNS/data rates/NNS/rates of/IN/of wireless/NN/wireless networks/NNS/networks are/VBP/are heavily/RB/heavily influenced/VBN/influenced by/IN/by the/DT/the distance/NN/distance between/IN/between the/DT/the wireless/NN/wireless router/NN/router and/CC/and the/DT/the host/NN/host as/IN/as well/RB/well as/IN/as interference/NN/interference in/IN/in the/DT/the wireless/NN/wireless spectrum/NNP/spectrum. wireless/NN/wireless networks/VBZ/networks often/RB/often have/VBP/have a/DT/a physical/JJ/physical advantage/NN/advantage over/IN/over wired/VBN/wired ethernet/NN/ethernet networks/NNS/networks as/IN/as no/DT/no cabling/NN/cabling needs/VBZ/needs to/TO/to be/VB/be run/VBN/run to/TO/to connect/VB/connect communicatilcg/NN/communicatilcg hosts/NNP/hosts. as/IN/as a/DT/a result/NN/result /,/, wireless/NN/wireless networks/NNS/networks are/VBP/are popular/JJ/popular in/IN/in homes/NNS/homes as/IN/as well/RB/well as/IN/as public/JJ/public areas/NNS/areas such/JJ/such as/IN/as libraries/NNS/libraries and/CC/and internet/NN/internet cafes/NNS/cafes /./. 16.3.2/CD/16.3.2 wide-area/NNP/wide-area networks/NNS/networks wide-area/NNP/wide-area networks/NNS/networks emerged/VBD/emerged in/IN/in the/DT/the late/JJ/late 1960s/CD/1960s /,/, mainly/RB/mainly as/IN/as an/DT/an academic/JJ/academic research/NN/research project/NN/project to/TO/to provide/VB/provide efficient/JJ/efficient communication/NN/communication among/IN/among sites/NNS/sites /,/, allowing/VBG/allowing hardware/NN/hardware and/CC/and software/NN/software to/TO/to be/VB/be shared/VBN/shared conveniently/RB/conveniently and/CC/and economically/RB/economically by/IN/by a/DT/a wide/JJ/wide community/NN/community of/IN/of users/NNP/users. the/DT/the first/JJ/first wan/NN/wan to/TO/to be/VB/be designed/VBN/designed and/CC/and developed/VBD/developed was/VBD/was the/DT/the arpanet/NNP/arpanet. begun/NN/begun in/IN/in 1968/CD/1968 /,/, the/DT/the arpanet/NN/arpanet has/VBZ/has grown/VBN/grown from/IN/from a/DT/a four-site/JJ/four-site experimental/NN/experimental network/NN/network to/TO/to a/DT/a worldwide/NN/worldwide network/NN/network of/IN/of networks/NNS/networks /,/, the/DT/the internet/NN/internet /,/, comprising/VBG/comprising millions/NNS/millions of/IN/of computer/NN/computer systems/NNS/systems /./. because/IN/because the/DT/the sites/NNS/sites in/IN/in a/DT/a wan/NN/wan are/VBP/are physically/RB/physically distributed/VBN/distributed over/IN/over a/DT/a large/JJ/large geographical/JJ/geographical area/NN/area /,/, the/DT/the communication/NN/communication links/VBZ/links are/VBP/are /,/, by/IN/by default/NN/default /,/, relatively/RB/relatively slow/JJ/slow and/CC/and unreliable/JJ/unreliable /./. typical/JJ/typical links/NNS/links are/VBP/are telephone/NN/telephone lines/NNS/lines /,/, leased/VBD/leased /:/( dedicated/VBN/dedicated data/NNS/data /:/) lines/NNS/lines /,/, microwave/VBP/microwave links/NNS/links /,/, and/CC/and satellite/VB/satellite channels/NNP/channels. these/DT/these communication/NN/communication links/NNS/links are/VBP/are controlled/VBN/controlled by/IN/by special/JJ/special /NN/( figure/NN/figure 16.3/CD/16.3 /CD/) /,/, which/WDT/which are/VBP/are responsible/JJ/responsible for/IN/for defilcing/NN/defilcing the/DT/the interface/NN/interface through/IN/through which/WDT/which the/DT/the sites/NNS/sites communicate/VBP/communicate over/IN/over the/DT/the network/NN/network /,/, as/IN/as well/RB/well as/IN/as for/IN/for transferring/NN/transferring information/NN/information among/IN/among the/DT/the various/JJ/various sites/NNS/sites /./. 682/CD/682 chapter/NN/chapter 16/CD/16 communication/NN/communication subsystem/NN/subsystem h/NN/h h/NN/h netwot/NN/netwot k/NN/k host/NN/host communication/NN/communication processor/NN/processor figure/NN/figure 16.3/CD/16.3 communication/NN/communication processors/NNS/processors in/IN/in a/DT/a wide-area/NN/wide-area network/NN/network /./. for/IN/for example/NN/example /,/, the/DT/the internet/NN/internet wan/NN/wan enables/VBZ/enables hosts/NNS/hosts at/IN/at geographically/RB/geographically separated/VBN/separated sites/NNS/sites to/TO/to communicate/VB/communicate with/IN/with one/CD/one another/NNP/another. the/DT/the host/NN/host computers/NNS/computers typically/RB/typically differ/VBP/differ from/IN/from one/CD/one another/DT/another in/IN/in type/NN/type /,/, speed/NN/speed /,/, word/NN/word length/NN/length /,/, operatil1.g/JJ/operatil1.g system/NN/system /,/, and/CC/and so/RB/so on/NNP/on. hosts/NNS/hosts are/VBP/are generally/RB/generally on/IN/on lans/NNS/lans /,/, which/WDT/which are/VBP/are /,/, in/IN/in turn/NN/turn /,/, connected/VBN/connected to/TO/to the/DT/the internet/NN/internet via/IN/via regional/JJ/regional networks/NNP/networks. the/DT/the regional/JJ/regional networks/NNS/networks /,/, such/JJ/such as/IN/as nsfnet/JJ/nsfnet il1/NNP/il1 /./. the/DT/the northeast/NN/northeast united/VBD/united states/NNS/states /,/, are/VBP/are interlinked/VBN/interlinked with/IN/with /CD/( section/NN/section 16.5.2/CD/16.5.2 /CD/) to/TO/to form/NN/form the/DT/the worldwide/NN/worldwide network/NNP/network. connections/NNS/connections between/IN/between networks/NNS/networks frequently/RB/frequently use/VBP/use a/DT/a telephone-system/JJ/telephone-system service/NN/service called/VBN/called t1/NNP/t1 /,/, which/WDT/which provides/VBZ/provides a/DT/a transfer/NN/transfer rate/NN/rate of/IN/of 1.544/CD/1.544 megabits/NNS/megabits per/IN/per second/JJ/second over/IN/over a/DT/a leased/VBN/leased line/NNP/line. for/IN/for sites/NNS/sites requiring/VBG/requiring faster/JJR/faster internet/NN/internet access/NN/access /,/, tls/NNS/tls are/VBP/are collected/VBN/collected into/IN/into multiple-t1/-NONE-/multiple-t1 units/NNS/units that/WDT/that work/NN/work in/IN/in parallel/NN/parallel to/TO/to provide/VB/provide more/JJR/more throughput/NNP/throughput. for/IN/for instance/NN/instance /,/, a/DT/a t3/NNP/t3 is/VBZ/is composed/VBN/composed of/IN/of 28/CD/28 t1/NNP/t1 connections/NNS/connections and/CC/and has/VBZ/has a/DT/a transfer/NN/transfer rate/NN/rate of/IN/of 45/CD/45 megabits/NNS/megabits per/IN/per second/NNP/second. the/DT/the routers/NNS/routers control/NN/control the/DT/the path/NN/path each/DT/each message/NN/message takes/VBZ/takes through/IN/through the/DT/the net/NNP/net. this/DT/this routing/NN/routing may/MD/may be/VB/be either/RB/either dynamic/JJ/dynamic /,/, to/TO/to increase/VB/increase commmlication/NN/commmlication efficiency/NN/efficiency /,/, or/CC/or static/JJ/static /,/, to/TO/to reduce/VB/reduce security/NN/security risks/NNS/risks or/CC/or to/TO/to allow/VB/allow communication/NN/communication charges/NNS/charges to/TO/to be/VB/be computed/VBN/computed /./. other/JJ/other wans/NNS/wans use/VBP/use standard/JJ/standard telephone/NN/telephone lines/NNS/lines as/IN/as their/PRP$/their primary/JJ/primary means/NNS/means of/IN/of communication/NN/communication /./. are/VBP/are devices/NNS/devices that/IN/that accept/IN/accept digital/JJ/digital data/NNS/data from/IN/from the/DT/the computer/NN/computer side/NN/side and/CC/and convert/NN/convert it/PRP/it to/TO/to the/DT/the analog/NN/analog signals/VBZ/signals that/IN/that the/DT/the telephone/NN/telephone system/NN/system uses/NNP/uses. a/DT/a modem/NN/modem at/IN/at the/DT/the destination/NN/destination site/NN/site converts/NNS/converts the/DT/the analog/NN/analog signal/NN/signal back/RB/back to/TO/to digital/JJ/digital form/NN/form /,/, and/CC/and the/DT/the destination/NN/destination receives/VBZ/receives the/DT/the data/NNP/data. the/DT/the unix/NN/unix news/NN/news network/NN/network /,/, uucp/NN/uucp /,/, allows/VBZ/allows systems/NNS/systems to/TO/to communicate/VB/communicate with/IN/with each/DT/each other/JJ/other at/IN/at predetermined/JJ/predetermined times/NNS/times /,/, via/IN/via modems/NNS/modems /,/, to/TO/to exchange/VB/exchange messages/NNP/messages. the/DT/the messages/NNS/messages are/VBP/are then/RB/then routed/VBN/routed to/TO/to other/JJ/other nearby/JJ/nearby systems/NNS/systems and/CC/and in/IN/in this/DT/this way/NN/way either/DT/either are/VBP/are propagated/VBN/propagated to/TO/to all/DT/all hosts/NNS/hosts on/IN/on the/DT/the network/NN/network /:/( public/JJ/public messages/NNS/messages /:/) or/CC/or are/VBP/are transferred/VBN/transferred to/TO/to specific/JJ/specific destinations/NNS/destinations /:/( private/JJ/private messages/NNS/messages /:/) /./. wans/NNS/wans are/VBP/are generally/RB/generally slower/JJR/slower than/IN/than lans/NNS/lans ;/:/; their/PRP$/their transmission/NN/transmission rates/NNS/rates range/VBP/range from/IN/from 1,200/CD/1,200 bits/NNS/bits 16.4/CD/16.4 16.4/CD/16.4 683/CD/683 per/IN/per second/JJ/second to/TO/to over/IN/over 1/CD/1 megabit/NN/megabit per/IN/per second/NNP/second. uucp/NN/uucp has/VBZ/has been/VBN/been superseded/VBN/superseded by/IN/by ppp/NN/ppp /,/, the/DT/the point-to-point/JJ/point-to-point protocol/NNP/protocol. ppp/NN/ppp functions/NNS/functions over/IN/over modem/NN/modem coru1ections/NNS/coru1ections /,/, allowing/VBG/allowing home/NN/home computers/NNS/computers to/TO/to be/VB/be fully/RB/fully connected/VBN/connected to/TO/to the/DT/the internet/NN/internet /./. the/DT/the sites/NNS/sites in/IN/in a/DT/a distributed/VBN/distributed system/NN/system can/MD/can be/VB/be connected/VBN/connected physically/RB/physically in/IN/in a/DT/a variety/NN/variety of/IN/of ways/NNP/ways. each/DT/each configuration/NN/configuration has/VBZ/has advantages/NNS/advantages and/CC/and disadvantages/NNP/disadvantages. we/PRP/we can/MD/can compare/VB/compare the/DT/the configurations/NNS/configurations by/IN/by using/VBG/using the/DT/the following/VBG/following criteria/NNS/criteria /:/: installation/NN/installation cost/NNP/cost. the/DT/the cost/NN/cost of/IN/of physically/RB/physically linking/VBG/linking the/DT/the sites/NNS/sites in/IN/in the/DT/the system/NN/system communication/NN/communication cost/NNP/cost. the/DT/the cost/NN/cost in/IN/in time/NN/time and/CC/and money/NN/money to/TO/to send/VB/send a/DT/a message/NN/message from/IN/from site/JJ/site a/DT/a to/TO/to site/VB/site b/NN/b availability/NNP/availability. the/DT/the extent/NN/extent to/TO/to which/WDT/which data/NNS/data can/MD/can be/VB/be accessed/VBN/accessed despite/IN/despite the/DT/the failure/NN/failure of/IN/of some/DT/some links/NNS/links or/CC/or sites/NNS/sites the/DT/the various/JJ/various topologies/NNS/topologies are/VBP/are depicted/VBN/depicted in/IN/in figure/NN/figure 16.4/CD/16.4 as/IN/as graphs/NNS/graphs whose/WP$/whose nodes/NNS/nodes correspond/VBP/correspond to/TO/to sites/NNP/sites. an/DT/an edge/NN/edge from/IN/from node/NN/node a/DT/a to/TO/to node/VB/node b/NN/b corresponds/NNS/corresponds to/TO/to a/DT/a direct/JJ/direct communication/NN/communication link/NN/link between/IN/between the/DT/the two/CD/two sites/NNP/sites. in/IN/in a/DT/a fully/RB/fully connected/VBN/connected network/NN/network /,/, each/DT/each site/NN/site is/VBZ/is directly/RB/directly connected/VBN/connected to/TO/to every/DT/every other/JJ/other site/NNP/site. however/RB/however /,/, the/DT/the number/NN/number of/IN/of links/NNS/links grows/VBZ/grows as/RB/as the/DT/the square/NN/square of/IN/of the/DT/the number/NN/number of/IN/of sites/NNS/sites /,/, resulting/VBG/resulting in/IN/in a/DT/a huge/JJ/huge installation/NN/installation cost/NN/cost /./. therefore/RB/therefore /,/, fully/RB/fully connected/VBN/connected networks/NNS/networks are/VBP/are impractical/JJ/impractical in/IN/in any/DT/any large/JJ/large system/NN/system /./. in/IN/in a/DT/a pc/NN/pc /:/: ntially/RB/ntially direct/JJ/direct links/NNS/links exist/VBP/exist between/IN/between some-but/JJ/some-but not/RB/not all-pairs/JJ/all-pairs of/IN/of sites/NNP/sites. hence/NN/hence /,/, the/DT/the installation/NN/installation cost/NN/cost of/IN/of such/JJ/such a/DT/a configuration/NN/configuration is/VBZ/is lower/JJR/lower than/IN/than that/DT/that of/IN/of the/DT/the fully/RB/fully connected/VBN/connected network/NNP/network. however/RB/however /,/, if/IN/if two/CD/two sites/NNS/sites a/DT/a and/CC/and b/NN/b are/VBP/are not/RB/not directly/RB/directly connected/VBN/connected /,/, messages/NNS/messages from/IN/from one/CD/one to/TO/to the/DT/the other/JJ/other must/MD/must be/VB/be through/IN/through a/DT/a sequence/NN/sequence of/IN/of communication/NN/communication links/NNP/links. this/DT/this requirement/NN/requirement results/NNS/results in/IN/in a/DT/a higher/JJR/higher communication/NN/communication cost/NN/cost /./. if/IN/if a/DT/a communication/NN/communication link/NN/link fails/VBZ/fails /,/, messages/NNS/messages that/WDT/that would/MD/would have/VB/have been/VBN/been transmitted/VBN/transmitted across/IN/across the/DT/the link/NN/link must/MD/must be/VB/be rerouted/NNP/rerouted. in/IN/in some/DT/some cases/NNS/cases /,/, another/DT/another route/NN/route through/IN/through the/DT/the network/NN/network may/MD/may be/VB/be found/VBN/found /,/, so/RB/so that/IN/that the/DT/the messages/NNS/messages are/VBP/are able/JJ/able to/TO/to reach/VB/reach their/PRP$/their destination/NN/destination /./. in/IN/in other/JJ/other cases/NNS/cases /,/, a/DT/a failure/NN/failure may/MD/may mean/VB/mean that/IN/that no/DT/no connection/NN/connection exists/NNS/exists between/IN/between some/DT/some pair/NN/pair /:/( or/CC/or pairs/NNS/pairs /:/) of/IN/of sites/NNP/sites. when/WRB/when a/DT/a system/NN/system is/VBZ/is split/VBN/split into/IN/into two/CD/two /CD/( or/CC/or more/JJR/more /:/) unconnected/VBN/unconnected subsystems/NNS/subsystems /,/, it/PRP/it is/VBZ/is partitioned/NNP/partitioned. under/IN/under this/DT/this definition/NN/definition /,/, a/DT/a subsystem/NN/subsystem /:/( or/CC/or partition/NN/partition /:/) may/MD/may consist/VB/consist of/IN/of a/DT/a single/JJ/single node/NN/node /./. the/DT/the various/JJ/various partially/RB/partially connected/VBN/connected network/NN/network types/NNS/types include/VBP/include tree-structured/JJ/tree-structured networks/NNS/networks /,/, ring/VBG/ring networks/NNS/networks /,/, and/CC/and star/NN/star networks/NNS/networks /,/, as/IN/as shown/NN/shown in/IN/in figure/NN/figure 16.4/CD/16.4. these/DT/these types/NNS/types have/VBP/have different/JJ/different failure/NN/failure characteristics/NNS/characteristics and/CC/and installation/NN/installation and/CC/and communication/NN/communication costs/NNP/costs. installation/NN/installation and/CC/and communication/NN/communication costs/NNS/costs are/VBP/are relatively/RB/relatively low/JJ/low for/IN/for a/DT/a treestructured/VBN/treestructured network/NNP/network. however/RB/however /,/, the/DT/the failure/NN/failure of/IN/of a/DT/a single/JJ/single link/NN/link in/IN/in such/JJ/such a/DT/a network/NN/network can/MD/can result/VB/result in/IN/in the/DT/the network/NN/network 's/POS/'s becoming/VBG/becoming partitioned/NNP/partitioned. in/IN/in a/DT/a ring/NN/ring network/NN/network /,/, at/IN/at least/JJS/least two/CD/two links/NNS/links must/MD/must fail/VB/fail for/IN/for partition/NN/partition to/TO/to occur/NNP/occur. thus/RB/thus /,/, the/DT/the ring/NN/ring network/NN/network has/VBZ/has a/DT/a higher/JJR/higher degree/NN/degree of/IN/of availability/NN/availability than/IN/than does/VBZ/does a/DT/a tree-structured/JJ/tree-structured network/NNP/network. however/RB/however /,/, the/DT/the communication/NN/communication cost/NN/cost is/VBZ/is high/JJ/high /,/, since/IN/since a/DT/a message/NN/message may/MD/may have/VB/have to/TO/to cross/VB/cross a/DT/a large/JJ/large number/NN/number of/IN/of links/NNP/links. in/IN/in a/DT/a star/NN/star network/NN/network /,/, the/DT/the failure/NN/failure of/IN/of a/DT/a single/JJ/single link/NN/link results/NNS/results in/IN/in a/DT/a network/NN/network partition/NN/partition /,/, but/CC/but one/CD/one of/IN/of the/DT/the partitions/NNS/partitions has/VBZ/has only/RB/only a/DT/a single/JJ/single site/NNP/site. such/JJ/such a/DT/a partition/NN/partition can/MD/can be/VB/be treated/VBN/treated as/IN/as a/DT/a single-site/JJ/single-site failure/NNP/failure. the/DT/the star/NN/star network/NN/network also/RB/also has/VBZ/has a/DT/a low/JJ/low communication/NN/communication cost/NN/cost /,/, since/IN/since each/DT/each site/JJ/site is/VBZ/is at/IN/at most/JJS/most two/CD/two links/NNS/links away/RB/away from/IN/from every/DT/every other/JJ/other site/NNP/site. howeve1/NNP/howeve1 ~/NNP/~ 684/CD/684 chapter/NN/chapter 16/CD/16 16.5/CD/16.5 fully/RB/fully connected/VBN/connected network/NN/network partially/RB/partially connected/VBN/connected network/NN/network b/NN/b d/NN/d f/NN/f tree-structured/JJ/tree-structured network/NN/network star/NN/star network/NN/network f/NN/f ring/VBG/ring network/NN/network figure/NN/figure 16.4/CD/16.4 network/NN/network topology/NN/topology /./. if/IN/if the/DT/the central/JJ/central site/NN/site fails/NNS/fails /,/, all/DT/all the/DT/the sites/NNS/sites in/IN/in the/DT/the system/NN/system become/NN/become disconnected/VBD/disconnected from/IN/from one/CD/one another/DT/another /./. now/RB/now that/IN/that we/PRP/we have/VBP/have discussed/VBN/discussed the/DT/the physical/JJ/physical aspects/NNS/aspects of/IN/of networking/VBG/networking /,/, we/PRP/we turn/VBP/turn to/TO/to the/DT/the internal/JJ/internal workings/NNP/workings. the/DT/the designer/NN/designer of/IN/of a/DT/a communication/NN/communication network/NN/network must/MD/must address/VB/address five/CD/five basic/JJ/basic issues/NNS/issues /:/: naming/VBG/naming and/CC/and name/NN/name resolution/NNP/resolution. how/WRB/how do/VBP/do two/CD/two processes/NNS/processes locate/VBP/locate each/DT/each other/JJ/other to/TO/to communicate/VB/communicate routing/NN/routing strategies/NNP/strategies. how/WRB/how are/VBP/are messages/NNS/messages sent/VBN/sent through/IN/through the/DT/the network/NN/network packet/NN/packet strategies/NNP/strategies. are/VBP/are packets/NNS/packets sent/VBN/sent individually/RB/individually or/CC/or as/IN/as a/DT/a sequence/NN/sequence connection/NN/connection strategies/NNP/strategies. how/WRB/how do/VBP/do two/CD/two processes/NNS/processes send/VBP/send a/DT/a sequence/NN/sequence of/IN/of messages/NNS/messages 16.5/CD/16.5 685/CD/685 contention/NNP/contention. how/WRB/how do/VBP/do we/PRP/we resolve/VB/resolve conflicting/VBG/conflicting demands/NNS/demands for/IN/for the/DT/the network/NN/network 's/POS/'s lise/NN/lise /,/, given/VBN/given that/IN/that it/PRP/it is/VBZ/is a/DT/a shared/VBN/shared resource/NN/resource in/IN/in the/DT/the following/JJ/following sections/NNS/sections /,/, we/PRP/we elaborate/VBP/elaborate on/IN/on each/DT/each of/IN/of these/DT/these issues/NNS/issues /./. 16.5.1/CD/16.5.1 naming/VBG/naming and/CC/and name/NN/name resolution/NN/resolution the/DT/the first/JJ/first component/NN/component of/IN/of network/NN/network communication/NN/communication is/VBZ/is the/DT/the naming/NN/naming o/NN/o the/DT/the systems/NNS/systems in/IN/in the/DT/the network/NNP/network. for/IN/for a/DT/a process/NN/process at/IN/at site/JJ/site a/DT/a to/TO/to exchange/NN/exchange information/NN/information with/IN/with a/DT/a process/NN/process at/IN/at site/JJ/site b/NN/b /,/, each/DT/each must/MD/must be/VB/be able/JJ/able to/TO/to specify/VB/specify the/DT/the other/NNP/other. within/IN/within a/DT/a computer/NN/computer system/NN/system /,/, each/DT/each process/NN/process has/VBZ/has a/DT/a process/NN/process identifier/NN/identifier /,/, and/CC/and messages/NNS/messages may/MD/may be/VB/be addressed/VBN/addressed with/IN/with the/DT/the process/NN/process identifier/NNP/identifier. beca/NN/beca use/NN/use networked/VBD/networked systems/NNS/systems share/NN/share no/DT/no memory/NN/memory /,/, however/RB/however /,/, a/DT/a host/NN/host within/IN/within the/DT/the system/NN/system initially/RB/initially has/VBZ/has no/DT/no knowledge/NN/knowledge about/IN/about the/DT/the processes/NNS/processes on/IN/on other/JJ/other hosts/NNS/hosts /./. to/TO/to solve/VB/solve this/DT/this problem/NN/problem /,/, processes/NNS/processes on/IN/on remote/NN/remote systems/NNS/systems are/VBP/are generally/RB/generally identified/VBD/identified by/IN/by the/DT/the pair/NN/pair host/NN/host name/NN/name /,/, identifier/NN/identifier /,/, where/WRB/where host/NN/host name/NN/name is/VBZ/is a/DT/a name/NN/name unique/NN/unique within/IN/within the/DT/the network/NN/network and/CC/and identifier/JJR/identifier may/MD/may be/VB/be a/DT/a process/NN/process identifier/NN/identifier or/CC/or other/JJ/other unique/JJ/unique number/NN/number within/NNP/within. that/IN/that host/NNP/host. a/DT/a host/NN/host name/NN/name is/VBZ/is usually/RB/usually an/DT/an alphanumeric/JJ/alphanumeric identifier/NN/identifier /,/, rather/RB/rather than/IN/than a/DT/a number/NN/number /,/, to/TO/to make/VB/make it/PRP/it easier/JJR/easier for/IN/for users/NNS/users to/TO/to specify/NNP/specify. for/IN/for instance/NN/instance /,/, site/JJ/site a/DT/a might/MD/might have/VB/have hosts/NNS/hosts named/VBN/named homer/NN/homer /,/, marge/NN/marge /,/, bart/NN/bart /,/, and/CC/and lisa/NNP/lisa. bart/NN/bart is/VBZ/is certainly/RB/certainly easier/JJR/easier to/TO/to remember/VB/remember than/IN/than is/VBZ/is 12814831100/CD/12814831100 /./. names/NNS/names are/VBP/are convenient/JJ/convenient for/IN/for humans/NNS/humans to/TO/to use/VB/use /,/, but/CC/but computers/NNS/computers prefer/VBP/prefer numbers/NNS/numbers for/IN/for speed/NN/speed and/CC/and simplicity/NNP/simplicity. for/IN/for this/DT/this reason/NN/reason /,/, there/EX/there must/MD/must be/VB/be a/DT/a mechanism/NN/mechanism to/TO/to !/./! /:/- '/''/' /:/: the/DT/the host/NN/host name/NN/name into/IN/into a/DT/a that/WDT/that describes/VBZ/describes the/DT/the destination/NN/destination system/NN/system to/TO/to the/DT/the networking/NN/networking hardware/NNP/hardware. this/DT/this mechanism/NN/mechanism is/VBZ/is similar/JJ/similar to/TO/to the/DT/the name-to-address/JJ/name-to-address binding/NN/binding that/WDT/that occurs/VBZ/occurs during/IN/during program/NN/program compilation/NN/compilation /,/, linking/VBG/linking /,/, loading/VBG/loading /,/, and/CC/and execution/NN/execution /:/( chapter/NN/chapter 8/CD/8 /CD/) /./. in/IN/in the/DT/the case/NN/case of/IN/of host/NN/host names/NNS/names /,/, two/CD/two possibilities/NNS/possibilities exist/NNP/exist. first/RB/first /,/, every/DT/every host/NN/host may/MD/may have/VB/have a/DT/a data/NN/data file/NN/file containing/VBG/containing the/DT/the names/NNS/names and/CC/and addresses/NNS/addresses of/IN/of all/DT/all the/DT/the other/JJ/other hosts/NNS/hosts reachable/JJ/reachable on/IN/on the/DT/the network/NN/network /:/( similar/JJ/similar to/TO/to binding/NN/binding at/IN/at compile/NN/compile time/NN/time /:/) /./. the/DT/the problem/NN/problem with/IN/with this/DT/this model/NN/model is/VBZ/is that/IN/that adding/VBG/adding or/CC/or removing/VBG/removing a/DT/a host/NN/host from/IN/from the/DT/the network/NN/network requires/VBZ/requires updati.n.g/JJ/updati.n.g the/DT/the data/NNS/data files/VBZ/files on/IN/on all/DT/all the/DT/the hosts/NNP/hosts. the/DT/the alternative/NN/alternative is/VBZ/is to/TO/to distribute/VB/distribute the/DT/the information/NN/information among/IN/among systems/NNS/systems on/IN/on the/DT/the network/NNP/network. the/DT/the network/NN/network must/MD/must then/RB/then use/VB/use a/DT/a protocol/NN/protocol to/TO/to distribute/VB/distribute and/CC/and retrieve/VB/retrieve the/DT/the information/NNP/information. this/DT/this scheme/NN/scheme is/VBZ/is like/IN/like execution-time/JJ/execution-time binding/NNP/binding. the/DT/the first/JJ/first method/NN/method was/VBD/was the/DT/the one/CD/one originally/RB/originally used/JJ/used on/IN/on the/DT/the internet/NN/internet ;/:/; as/IN/as the/DT/the internet/NN/internet rnarr-,,or/NN/rnarr-,,or it/PRP/it became/VBD/became untenable/JJ/untenable /,/, so/RB/so the/DT/the second/JJ/second method/NN/method /,/, the/DT/the domain-name/JJ/domain-name '/POS/' ~/NN/~ '/''/' '/''/' is/VBZ/is now/RB/now in/IN/in use/NN/use /./. dns/NNS/dns specifies/NNS/specifies the/DT/the naming/VBG/naming structure/NN/structure of/IN/of the/DT/the hosts/NNS/hosts /,/, as/IN/as well/RB/well as/IN/as name-to-address/JJ/name-to-address resolution/NNP/resolution. hosts/NNS/hosts on/IN/on the/DT/the internet/NN/internet are/VBP/are logically/RB/logically addressed/VBN/addressed with/IN/with multipart/NN/multipart names/NNS/names known/VBN/known as/IN/as ip/NN/ip addresses/NNP/addresses. the/DT/the parts/NNS/parts of/IN/of an/DT/an ip/NN/ip address/NN/address progress/NN/progress frorn/NN/frorn the/DT/the most/JJS/most specific/JJ/specific to/TO/to the/DT/the most/JJS/most general/JJ/general part/NN/part /,/, with/IN/with periods/NNS/periods separating/VBG/separating the/DT/the fields/NNP/fields. for/IN/for instance/NN/instance /,/, bob.cs.brown.edu/NNP/bob.cs.brown.edu refers/NNS/refers to/TO/to host/VB/host bob/NN/bob in/IN/in the/DT/the depattment/NN/depattment of/IN/of science/NN/science at/IN/at brown/NN/brown university/NN/university within/IN/within the/DT/the top-level/JJ/top-level domain/NN/domain edu/NN/edu /./. domains/NNS/domains include/VBP/include com/NN/com for/IN/for commercial/JJ/commercial sites/NNS/sites and/CC/and for/IN/for organizations/NNS/organizations /,/, as/IN/as well/RB/well as/IN/as connected/VBN/connected to/TO/to the/DT/the for/IN/for systems/NNS/systems the/DT/the resolves/NNS/resolves in/IN/in reverse/NN/reverse order/NNP/order. each/DT/each a/DT/a a/DT/a process/NN/process on/IN/on a/DT/a a/DT/a name/NN/name and/CC/and returns/NNS/returns the/DT/the address/NN/address of/IN/of the/DT/the name/NN/name server/NN/server as/IN/as the/DT/the final/JJ/final the/DT/the name/NN/name server/NN/server for/IN/for the/DT/the host/NN/host in/IN/in host-id/JJ/host-id is/VBZ/is returned/NNP/returned. for/IN/for a/DT/a made/NN/made communicate/NN/communicate with/IN/with bob.cs.brown.edu/JJ/bob.cs.brown.edu would/MD/would result/VB/result in/IN/in 686/CD/686 chapter/NN/chapter 16/CD/16 the/DT/the kernel/NN/kernel of/IN/of system/NN/system a/DT/a issues/NNS/issues a/DT/a request/NN/request to/TO/to the/DT/the name/NN/name server/NN/server for/IN/for the/DT/the edu/NN/edu domain/NN/domain /,/, asking/VBG/asking for/IN/for the/DT/the address/NN/address of/IN/of the/DT/the name/NN/name server/NN/server for/IN/for brown.edu/NNP/brown.edu. the/DT/the name/NN/name server/NN/server for/IN/for the/DT/the edu/NN/edu domain/NN/domain must/MD/must be/VB/be at/IN/at a/DT/a known/NN/known address/NN/address /,/, so/RB/so that/IN/that it/PRP/it can/MD/can be/VB/be queried/VBN/queried /./. the/DT/the edu/NN/edu nance/NN/nance server/NN/server returns/NNS/returns the/DT/the address/NN/address of/IN/of the/DT/the host/NN/host on/IN/on which/WDT/which the/DT/the brown.edu/NNP/brown.edu name/NN/name server/NN/server resides/VBZ/resides /./. the/DT/the kernel/NN/kernel on/IN/on system/NN/system a/DT/a then/RB/then queries/VBZ/queries the/DT/the name/NN/name server/NN/server at/IN/at this/DT/this address/NN/address and/CC/and asks/VBZ/asks about/IN/about cs.brown.edu/JJ/cs.brown.edu /./. an/DT/an address/NN/address is/VBZ/is returned/VBN/returned ;/:/; and/CC/and a/DT/a request/NN/request to/TO/to that/DT/that address/NN/address for/IN/for bob.cs.brown.edu/JJ/bob.cs.brown.edu now/RB/now /,/, finally/RB/finally /,/, returns/NNS/returns an/DT/an host-id/JJ/host-id for/IN/for that/DT/that host/NN/host /:/( for/IN/for example/NN/example /,/, 128.148.31.100/CD/128.148.31.100 /:/) /./. this/DT/this protocol/NN/protocol may/MD/may seem/VB/seem inefficient/NN/inefficient /,/, but/CC/but local/JJ/local caches/NNS/caches are/VBP/are usually/RB/usually kept/VBD/kept by/IN/by each/DT/each name/NN/name server/NN/server to/TO/to speed/VB/speed the/DT/the process/NNP/process. for/IN/for example/NN/example /,/, the/DT/the edu/NN/edu name/NN/name server/NN/server would/MD/would have/VB/have brown.edu/-NONE-/brown.edu in/IN/in its/PRP$/its cache/NN/cache and/CC/and would/MD/would inform/VB/inform system/NN/system a/DT/a that/DT/that it/PRP/it could/MD/could resolve/VB/resolve two/CD/two portions/NNS/portions of/IN/of the/DT/the name/NN/name /,/, returning/VBG/returning a/DT/a pointer/NN/pointer to/TO/to the/DT/the cs.brown.edu/NNP/cs.brown.edu name/NN/name server/NN/server /./. of/IN/of course/NN/course /,/, the/DT/the contents/NNS/contents of/IN/of these/DT/these caches/NNS/caches must/MD/must be/VB/be refreshed/VBN/refreshed over/RP/over time/NN/time in/IN/in case/NN/case the/DT/the name/NN/name server/NN/server is/VBZ/is moved/VBN/moved or/CC/or its/PRP$/its address/NN/address changes/NNP/changes. in/IN/in fact/NN/fact /,/, this/DT/this service/NN/service is/VBZ/is so/RB/so important/JJ/important that/IN/that many/JJ/many optimizations/NNS/optimizations have/VBP/have occurred/VBN/occurred in/IN/in the/DT/the protocol/NN/protocol /,/, as/IN/as well/RB/well as/IN/as many/JJ/many safeguards/NNP/safeguards. consider/NN/consider what/WP/what would/MD/would happen/VB/happen if/IN/if the/DT/the primary/JJ/primary edu/NN/edu name/NN/name server/NN/server crashed/NNP/crashed. it/PRP/it is/VBZ/is possible/JJ/possible that/IN/that no/DT/no edu/NN/edu hosts/NNS/hosts would/MD/would be/VB/be able/JJ/able to/TO/to have/VB/have their/PRP$/their addresses/NNS/addresses resolved/VBD/resolved /,/, making/VBG/making them/PRP/them all/DT/all lmreachable/JJ/lmreachable !/./! the/DT/the solution/NN/solution is/VBZ/is to/TO/to use/VB/use secondary/JJ/secondary /,/, back-up/JJ/back-up name/NN/name servers/NNS/servers that/WDT/that duplicate/NN/duplicate the/DT/the contents/NNS/contents of/IN/of the/DT/the primary/JJ/primary servers/NNS/servers /./. before/IN/before the/DT/the domain-name/JJ/domain-name service/NN/service was/VBD/was introduced/VBN/introduced /,/, all/DT/all hosts/NNS/hosts on/IN/on the/DT/the internet/NN/internet needed/VBD/needed to/TO/to have/VB/have copies/NNS/copies of/IN/of a/DT/a file/NN/file that/WDT/that contained/VBD/contained the/DT/the names/NNS/names and/CC/and addresses/NNS/addresses of/IN/of each/DT/each host/NN/host on/IN/on the/DT/the network/NNP/network. all/DT/all changes/NNS/changes to/TO/to this/DT/this file/NN/file had/VBD/had to/TO/to be/VB/be registered/VBN/registered at/IN/at one/CD/one site/JJ/site /NN/( host/NN/host sri-nic/JJ/sri-nic /NN/) /,/, and/CC/and periodically/RB/periodically all/DT/all hosts/NNS/hosts had/VBD/had to/TO/to copy/VB/copy the/DT/the updated/VBN/updated file/NN/file from/IN/from sri-nic/JJ/sri-nic to/TO/to be/VB/be able/JJ/able to/TO/to contact/VB/contact new/JJ/new systems/NNS/systems or/CC/or find/VBP/find hosts/NNS/hosts whose/WP$/whose addresses/NNS/addresses had/VBD/had changed/VBN/changed /./. under/IN/under the/DT/the domain-name/JJ/domain-name service/NN/service /,/, each/DT/each name-server/JJ/name-server site/NN/site is/VBZ/is responsible/JJ/responsible for/IN/for updating/NN/updating the/DT/the host/NN/host information/NN/information for/IN/for that/DT/that domain/NNP/domain. for/IN/for instance/NN/instance /,/, any/DT/any host/NN/host changes/NNS/changes at/IN/at brown/NN/brown university/NN/university are/VBP/are the/DT/the responsibility/NN/responsibility of/IN/of the/DT/the name/NN/name server/NN/server for/IN/for brown.edu/JJ/brown.edu and/CC/and need/VBP/need not/RB/not be/VB/be reported/VBN/reported anywhere/RB/anywhere else/NNP/else. dns/NNS/dns lookups/NNS/lookups will/MD/will automatically/RB/automatically retrieve/VB/retrieve the/DT/the updated/VBN/updated information/NN/information because/IN/because they/PRP/they will/MD/will contact/VB/contact brown.edu/-NONE-/brown.edu directly/RB/directly /./. within/IN/within domains/NNS/domains /,/, there/EX/there can/MD/can be/VB/be autonomous/JJ/autonomous subdomains/NNS/subdomains to/TO/to further/RBR/further distribute/JJ/distribute the/DT/the responsibility/NN/responsibility for/IN/for host-name/JJ/host-name and/CC/and host-id/JJ/host-id changes/NNS/changes /./. java/NN/java provides/VBZ/provides the/DT/the necessary/JJ/necessary api/NN/api to/TO/to design/VB/design a/DT/a program/NN/program that/WDT/that maps/VBZ/maps ip/NN/ip names/NNS/names to/TO/to ip/VB/ip addresses/NNP/addresses. the/DT/the program/NN/program shown/NN/shown in/IN/in figure/NN/figure 16.5/CD/16.5 is/VBZ/is passed/VBN/passed an/DT/an ip/NN/ip name/NN/name /:/( such/JJ/such as/IN/as bob.cs.brown.edu/JJ/bob.cs.brown.edu /NN/) on/IN/on the/DT/the command/NN/command line/NN/line and/CC/and either/DT/either outputs/NNS/outputs the/DT/the ip/NN/ip address/NN/address of/IN/of the/DT/the host/NN/host or/CC/or returns/NNS/returns a/DT/a message/NN/message indicating/VBG/indicating that/IN/that the/DT/the host/NN/host name/NN/name could/MD/could not/RB/not be/VB/be resolved/VBN/resolved /./. an/DT/an inetaddress/NN/inetaddress is/VBZ/is a/DT/a java/NN/java class/NN/class representing/VBG/representing an/DT/an ip/NN/ip name/NN/name or/CC/or address/NNP/address. the/DT/the static/JJ/static method/NN/method getbyname/NN/getbyname /:/( /:/) belonging/VBG/belonging to/TO/to the/DT/the inetaddress/NN/inetaddress class/NN/class is/VBZ/is passed/VBN/passed a/DT/a string/NN/string representation/NN/representation of/IN/of an/DT/an ip/NN/ip name/NN/name /,/, and/CC/and it/PRP/it returns/VBZ/returns the/DT/the corresponding/NN/corresponding inetaddress/NN/inetaddress /./. the/DT/the program/NN/program then/RB/then invokes/VBZ/invokes the/DT/the gethostaddress/NN/gethostaddress /:/( /:/) method/NN/method /,/, which/WDT/which internally/RB/internally uses/VBZ/uses dns/NNS/dns to/TO/to look/VB/look up/RP/up the/DT/the ip/NN/ip address/NN/address of/IN/of the/DT/the designated/VBN/designated host/NN/host /./. generally/RB/generally /,/, the/DT/the operating/NN/operating system/NN/system is/VBZ/is responsible/JJ/responsible for/IN/for accepting/NN/accepting from/IN/from its/PRP$/its processes/NNS/processes a/DT/a message/NN/message destined/VBN/destined for/IN/for host/NN/host name/NN/name /,/, identifier/NN/identifier and/CC/and for/IN/for transferring/NN/transferring that/WDT/that message/NN/message to/TO/to the/DT/the appropriate/NN/appropriate host/NNP/host. the/DT/the kernel/NN/kernel on/IN/on the/DT/the destination/NN/destination host/NN/host is/VBZ/is then/RB/then responsible/JJ/responsible for/IN/for transferring/NN/transferring the/DT/the message/NN/message to/TO/to the/DT/the process/NN/process named/VBD/named by/IN/by the/DT/the identifier/NN/identifier /./. this/DT/this exchange/NN/exchange is/VBZ/is by/IN/by no/DT/no means/NNS/means trivial/JJ/trivial ;/:/; it/PRP/it is/VBZ/is described/VBN/described in/IN/in section/NN/section 16.5.4/CD/16.5.4 /./. 16.5/CD/16.5 i/PRP/i usage/VBP/usage /:/: java/NN/java dnslookup/NN/dnslookup ip/NN/ip name/NN/name i.e/NNP/i.e. java/NN/java dnslookup/NN/dnslookup www.wiley.com/NN/www.wiley.com i/PRP/i public/JJ/public class/NN/class dnslookup/NN/dnslookup /:/{ /:/} public/JJ/public static/JJ/static void/JJ/void main/NN/main /:/( string/VBG/string /:/[ /:/] args/NNS/args /VBP/) /:/{ inetaddress/NN/inetaddress hostaddress/NN/hostaddress ;/:/; try/NN/try /:/{ /:/} hostaddress/NN/hostaddress =/:/= inetaddress.getbyname/JJ/inetaddress.getbyname /NN/( args/NNS/args /:/[ o/NN/o /:/] /:/) ;/:/; system.out.println/JJ/system.out.println /NN/( hostaddress.gethostaddress/NN/hostaddress.gethostaddress /:/( /:/) /:/) ;/:/; catch/NN/catch /:/( unknownhostexception/NN/unknownhostexception uhe/NN/uhe /:/) /:/{ /:/} /:/} system/NNP/system. err/NNP/err. println/NN/println /:/( unknown/NN/unknown host/NN/host /:/: +/:/+ args/NNS/args /VBP/[ 0/-NONE-/0 /:/] /:/) ;/:/; figure/NN/figure 16.5/CD/16.5 java/NN/java program/NN/program illustrating/NN/illustrating a/DT/a dns/NNS/dns lookup/VBP/lookup /./. 16.5.2/CD/16.5.2 routing/VBG/routing strategies/NNS/strategies 687/CD/687 when/WRB/when a/DT/a process/NN/process at/IN/at site/JJ/site a/DT/a wants/NNS/wants to/TO/to communicate/VB/communicate with/IN/with a/DT/a process/NN/process at/IN/at site/JJ/site b/NN/b /,/, how/WRB/how is/VBZ/is the/DT/the message/NN/message sent/NN/sent if/IN/if there/EX/there is/VBZ/is only/RB/only one/CD/one physical/JJ/physical path/NN/path from/IN/from a/DT/a to/TO/to b/VB/b /:/( such/JJ/such as/IN/as in/IN/in a/DT/a star/NN/star or/CC/or tree-structured/JJ/tree-structured network/NN/network /:/) /,/, the/DT/the message/NN/message must/MD/must be/VB/be sent/VBN/sent through/IN/through that/DT/that path/NNP/path. however/RB/however /,/, if/IN/if there/EX/there are/VBP/are multiple/JJ/multiple physical/JJ/physical paths/NNS/paths from/IN/from a/DT/a to/TO/to b/VB/b /,/, then/RB/then several/JJ/several routing/NN/routing options/NNS/options exist/NNP/exist. each/DT/each site/NN/site has/VBZ/has a/DT/a indicating/NN/indicating the/DT/the alternative/NN/alternative paths/NNS/paths that/WDT/that can/MD/can be/VB/be used/VBN/used to/TO/to send/VB/send a/DT/a message/NN/message to/TO/to other/JJ/other sites/NNP/sites. the/DT/the table/NN/table may/MD/may include/VB/include information/NN/information about/IN/about the/DT/the speed/NN/speed and/CC/and cost/VB/cost of/IN/of the/DT/the various/JJ/various communication/NN/communication paths/NNS/paths /,/, and/CC/and it/PRP/it may/MD/may be/VB/be updated/VBN/updated as/IN/as necessary/JJ/necessary /,/, either/DT/either manually/RB/manually or/CC/or via/IN/via programs/NNS/programs that/WDT/that exchange/NN/exchange routing/VBG/routing information/NNP/information. the/DT/the three/CD/three most/JJS/most common/JJ/common routing/NN/routing schemes/NNS/schemes are/VBP/are td/VBN/td ~/-NONE-/~ .-i/NNP/.-i /:/: ja/NN/ja /:/] and/CC/and fixed/VBN/fixed routing/NNP/routing. a/DT/a path/NN/path from/IN/from a/DT/a to/TO/to b/VB/b is/VBZ/is specified/VBN/specified in/IN/in advance/NN/advance and/CC/and does/VBZ/does not/RB/not change/VB/change unless/IN/unless a/DT/a hardware/NN/hardware failure/NN/failure disables/NNS/disables it/NNP/it. usually/RB/usually /,/, the/DT/the shortest/JJS/shortest path/NN/path is/VBZ/is chosen/VBN/chosen /,/, so/RB/so that/IN/that communication/NN/communication costs/NNS/costs are/VBP/are minimized/VBN/minimized /./. virtual/JJ/virtual routing/NNP/routing. a/DT/a path/NN/path from/IN/from a/DT/a to/TO/to b/VB/b is/VBZ/is fixed/VBN/fixed for/IN/for the/DT/the duration/NN/duration of/IN/of one/CD/one different/JJ/different sessions/NNS/sessions involving/VBG/involving messages/NNS/messages from/IN/from a/DT/a to/TO/to b/VB/b may/MD/may use/VB/use different/JJ/different paths/NNS/paths /./. a/DT/a session/NN/session could/MD/could be/VB/be as/RB/as short/JJ/short as/IN/as a/DT/a file/NN/file transfer/NN/transfer or/CC/or as/IN/as long/JJ/long as/IN/as a/DT/a remote-login/JJ/remote-login period/NN/period /./. dynamic/JJ/dynamic routing/NNP/routing. the/DT/the path/NN/path used/VBD/used to/TO/to send/VB/send a/DT/a message/NN/message from/IN/from site/JJ/site a/DT/a to/TO/to site/VB/site b/NN/b is/VBZ/is chosen/VBN/chosen only/RB/only when/WRB/when the/DT/the message/NN/message is/VBZ/is sent/NNP/sent. because/IN/because the/DT/the decision/NN/decision is/VBZ/is made/VBN/made dynamically/RB/dynamically /,/, separate/JJ/separate messages/NNS/messages may/MD/may be/VB/be assigned/VBN/assigned different/JJ/different paths/NNP/paths. site/NN/site a/DT/a will/MD/will make/VB/make a/DT/a decision/NN/decision to/TO/to send/VB/send the/DT/the message/NN/message to/TO/to site/VB/site c/NN/c ;/:/; c/NN/c /,/, in/IN/in turn/NN/turn /,/, will/MD/will decide/VB/decide to/TO/to send/VB/send it/PRP/it to/TO/to sited/VBD/sited /,/, and/CC/and so/RB/so on/NNP/on. eventually/RB/eventually /,/, a/DT/a site/JJ/site will/MD/will deliver/VB/deliver the/DT/the message/NN/message to/TO/to b/NNP/b. usually/RB/usually /,/, a/DT/a site/JJ/site sends/NNS/sends a/DT/a message/NN/message to/TO/to another/DT/another site/NN/site on/IN/on whatever/NN/whatever link/NN/link is/VBZ/is the/DT/the least/JJS/least used/VBN/used at/IN/at that/DT/that particular/JJ/particular time/NN/time /./. there/EX/there are/VBP/are tradeoffs/NNS/tradeoffs among/IN/among these/DT/these three/CD/three schem.es/NNP/schem.es. fixed/VBD/fixed routing/VBG/routing can/MD/can not/RB/not adapt/VB/adapt to/TO/to link/VB/link failures/NNS/failures or/CC/or load/VB/load changes/NNP/changes. in/IN/in other/JJ/other words/NNS/words /,/, if/IN/if a/DT/a path/NN/path has/VBZ/has been/VBN/been established/VBN/established 688/CD/688 chapter/NN/chapter 16/CD/16 between/IN/between a/DT/a and/CC/and b/NN/b /,/, the/DT/the messages/NNS/messages must/MD/must be/VB/be sent/VBN/sent along/IN/along this/DT/this path/NN/path /,/, even/RB/even if/IN/if the/DT/the path/NN/path is/VBZ/is down/IN/down or/CC/or is/VBZ/is used/VBN/used more/RBR/more heavily/RB/heavily than/IN/than another/DT/another possible/JJ/possible path/NNP/path. we/PRP/we can/MD/can partially/RB/partially remedy/VB/remedy this/DT/this problem/NN/problem by/IN/by using/VBG/using virtual/JJ/virtual routing/NN/routing and/CC/and can/MD/can avoid/VB/avoid it/PRP/it completely/RB/completely by/IN/by using/VBG/using dynamic/JJ/dynamic routing/NNP/routing. fixed/VBD/fixed routing/VBG/routing and/CC/and virtual/JJ/virtual routing/NN/routing ensure/NN/ensure that/WDT/that ncessages/VBZ/ncessages from/IN/from a/DT/a to/TO/to b/VB/b will/MD/will be/VB/be delivered/VBN/delivered in/IN/in the/DT/the order/NN/order in/IN/in which/WDT/which they/PRP/they were/VBD/were sent/NNP/sent. in/IN/in dynamic/JJ/dynamic routing/NN/routing /,/, messages/NNS/messages may/MD/may arrive/VB/arrive out/RP/out of/IN/of order/NNP/order. we/PRP/we can/MD/can remedy/VB/remedy this/DT/this problem/NN/problem by/IN/by appending/NN/appending a/DT/a sequence/NN/sequence number/NN/number to/TO/to each/DT/each message/NN/message /./. dynamic/JJ/dynamic routing/NN/routing is/VBZ/is the/DT/the most/RBS/most complicated/JJ/complicated to/TO/to set/VB/set up/RP/up and/CC/and run/VBP/run ;/:/; however/RB/however /,/, it/PRP/it is/VBZ/is the/DT/the best/JJS/best way/NN/way to/TO/to manage/NN/manage routing/VBG/routing in/IN/in complicated/JJ/complicated environments/NNP/environments. unix/NN/unix provides/VBZ/provides both/DT/both fixed/VBN/fixed routing/VBG/routing for/IN/for use/NN/use on/IN/on hosts/NNS/hosts within/IN/within simple/JJ/simple networks/NNS/networks and/CC/and dynamic/JJ/dynamic routing/NN/routing for/IN/for complicated/JJ/complicated network/NN/network environments/NNP/environments. it/PRP/it is/VBZ/is also/RB/also possible/JJ/possible to/TO/to mix/VB/mix the/DT/the two/NNP/two. within/IN/within a/DT/a site/JJ/site /,/, the/DT/the hosts/NNS/hosts may/MD/may just/RB/just need/VBP/need to/TO/to know/VB/know how/WRB/how to/TO/to reach/VB/reach the/DT/the system/NN/system that/IN/that connects/NNS/connects the/DT/the local/JJ/local network/NN/network to/TO/to other/JJ/other networks/NNS/networks /:/( such/JJ/such as/IN/as company-wide/JJ/company-wide networks/NNS/networks or/CC/or the/DT/the internet/NN/internet /:/) /./. such/JJ/such a/DT/a node/NN/node is/VBZ/is known/VBN/known as/IN/as a/DT/a each/NN/each individual/JJ/individual host/NN/host has/VBZ/has a/DT/a static/JJ/static route/NN/route to/TO/to the/DT/the gateway/NN/gateway /,/, although/IN/although the/DT/the gateway/NN/gateway itself/PRP/itself uses/VBZ/uses dynamic/JJ/dynamic routing/NN/routing to/TO/to reach/VB/reach any/DT/any host/NN/host on/IN/on the/DT/the rest/NN/rest of/IN/of the/DT/the network/NN/network /./. a/DT/a router/NN/router is/VBZ/is the/DT/the entity/NN/entity within/IN/within the/DT/the computer/NN/computer network/NN/network responsible/JJ/responsible for/IN/for routing/NN/routing messages/NNP/messages. a/DT/a router/NN/router can/MD/can be/VB/be a/DT/a host/NN/host computer/NN/computer with/IN/with routing/VBG/routing software/NN/software or/CC/or a/DT/a special-purpose/JJ/special-purpose device/NNP/device. either/CC/either way/NN/way /,/, a/DT/a router/NN/router must/MD/must have/VB/have at/IN/at least/JJS/least two/CD/two network/NN/network cmmections/NNS/cmmections /,/, or/CC/or else/RB/else it/PRP/it would/MD/would have/VB/have nowhere/RB/nowhere to/TO/to route/VB/route messages/NNP/messages. a/DT/a router/NN/router decides/VBZ/decides whether/IN/whether any/DT/any given/VBN/given message/NN/message needs/VBZ/needs to/TO/to be/VB/be passed/VBN/passed from/IN/from the/DT/the network/NN/network on/IN/on which/WDT/which it/PRP/it is/VBZ/is received/VBN/received to/TO/to any/DT/any other/JJ/other network/NN/network connected/VBD/connected to/TO/to the/DT/the router/NNP/router. it/PRP/it makes/VBZ/makes this/DT/this determination/NN/determination by/IN/by examining/NN/examining the/DT/the destination/NN/destination internet/NN/internet address/NN/address of/IN/of the/DT/the message/NN/message /./. the/DT/the router/NN/router checks/NNS/checks its/PRP$/its tables/NNS/tables to/TO/to determine/VB/determine the/DT/the location/NN/location of/IN/of the/DT/the destination/NN/destination host/NN/host /,/, or/CC/or at/IN/at least/JJS/least of/IN/of the/DT/the network/NN/network to/TO/to which/WDT/which it/PRP/it will/MD/will send/VB/send the/DT/the message/NN/message toward/IN/toward the/DT/the destination/NN/destination host/NNP/host. in/IN/in the/DT/the case/NN/case of/IN/of static/JJ/static routing/NN/routing /,/, this/DT/this table/NN/table is/VBZ/is changed/VBN/changed only/RB/only by/IN/by manual/JJ/manual update/NN/update /:/( a/DT/a new/JJ/new file/NN/file is/VBZ/is loaded/VBN/loaded onto/IN/onto the/DT/the router/NN/router /:/) /./. with/IN/with dynamic/JJ/dynamic routing/NN/routing /,/, a/DT/a is/VBZ/is used/VBN/used between/IN/between routers/NNS/routers to/TO/to inform/VB/inform them/PRP/them of/IN/of network/NN/network changes/NNS/changes and/CC/and to/TO/to allow/VB/allow them/PRP/them to/TO/to update/VB/update their/PRP$/their routing/NN/routing tables/NNS/tables automatically/NNP/automatically. gateways/NNS/gateways and/CC/and routers/NNS/routers typically/RB/typically are/VBP/are dedicated/VBN/dedicated hardware/NN/hardware devices/NNS/devices that/WDT/that run/VBN/run code/VBP/code out/RP/out of/IN/of firmware/NN/firmware /./. 16.5.3/CD/16.5.3 packet/NN/packet strategies/NNS/strategies messages/NNS/messages generally/RB/generally vary/JJ/vary in/IN/in length/NNP/length. to/TO/to simplify/VB/simplify the/DT/the system/NN/system design/NNP/design. /,/, we/PRP/we commonly/RB/commonly implement/VBP/implement communication/NN/communication with/IN/with fixed-length/JJ/fixed-length messages/NNS/messages called/VBN/called or/CC/or a/DT/a communication/NN/communication incplemented/VBN/incplemented in/IN/in one/CD/one packet/NN/packet can/MD/can be/VB/be sent/VBN/sent to/TO/to its/PRP$/its destination/NN/destination in/IN/in a/DT/a a/DT/a connectionless/NN/connectionless message/NN/message can/MD/can be/VB/be in/IN/in which/WDT/which case/NN/case the/DT/the sender/NN/sender has/VBZ/has no/DT/no guarantee/NN/guarantee that/IN/that /,/, and/CC/and can/MD/can not/RB/not tell/VB/tell whether/IN/whether /,/, the/DT/the packet/NN/packet reached/VBD/reached its/PRP$/its destination/NNP/destination. alternatively/RB/alternatively /,/, the/DT/the packet/NN/packet can/MD/can be/VB/be usually/RB/usually /,/, in/IN/in this/DT/this case/NN/case /,/, a/DT/a packet/NN/packet is/VBZ/is returned/VBN/returned from/IN/from the/DT/the destination/NN/destination indicating/VBG/indicating that/IN/that the/DT/the packet/NN/packet arrived/NNP/arrived. /NNP/( of/IN/of course/NN/course /,/, the/DT/the return/NN/return packet/NN/packet could/MD/could be/VB/be lost/VBN/lost along/IN/along the/DT/the way/NNP/way. /NNP/) if/IN/if a/DT/a message/NN/message is/VBZ/is too/RB/too long/RB/long to/TO/to fit/VB/fit within/IN/within one/CD/one packet/NN/packet /,/, or/CC/or if/IN/if the/DT/the packets/NNS/packets need/VBP/need to/TO/to how/WRB/how back/RB/back and/CC/and forth/JJ/forth between/IN/between the/DT/the two/CD/two communicators/NNS/communicators /,/, a/DT/a connection/NN/connection is/VBZ/is established/VBN/established to/TO/to allow/VB/allow the/DT/the reliable/JJ/reliable exchange/NN/exchange of/IN/of multiple/NN/multiple packets/NNS/packets /./. 16.5.4/CD/16.5.4 connection/NN/connection strategies/NNS/strategies c/VBP/c ~/:/~ uuc''/-NONE-/uuc'' '/''/' ~/:/~ u/NN/u are/VBP/are able/JJ/able to/TO/to reach/VB/reach their/PRP$/their destinations/NNS/destinations /,/, processes/NNS/processes can/MD/can institute/VB/institute to/TO/to exchange/VB/exchange information/NNP/information. pairs/NNS/pairs of/IN/of processes/NNS/processes that/WDT/that want/VBP/want to/TO/to communicate/VB/communicate over/IN/over the/DT/the network/NN/network can/MD/can be/VB/be connected/VBN/connected in/IN/in a/DT/a number/NN/number of/IN/of ways/NNS/ways /./. 16.5/CD/16.5 689/CD/689 the/DT/the three/CD/three most/JJS/most common/JJ/common schemes/NNS/schemes are/VBP/are and/CC/and circuit/NN/circuit switching/NNP/switching. if/IN/if two/CD/two processes/NNS/processes want/VBP/want to/TO/to con1municate/NNP/con1municate /,/, a/DT/a permanent/NN/permanent physical/JJ/physical link/NN/link is/VBZ/is established/VBN/established between/IN/between them/NNP/them. tl1is/NNP/tl1is link/NN/link is/VBZ/is allocated/VBN/allocated for/IN/for the/DT/the duration/NN/duration of/IN/of the/DT/the communication/NN/communication session/NN/session /,/, and/CC/and no/DT/no other/JJ/other process/NN/process can/MD/can use/VB/use that/IN/that link/NN/link during/IN/during this/DT/this period/NN/period /:/( even/RB/even if/IN/if the/DT/the two/CD/two processes/NNS/processes are/VBP/are not/RB/not actively/RB/actively communicating/VBG/communicating for/IN/for a/DT/a while/NN/while /:/) /./. this/DT/this scheme/NN/scheme is/VBZ/is similar/JJ/similar to/TO/to that/DT/that used/JJ/used in/IN/in the/DT/the telephone/NN/telephone system/NNP/system. once/RB/once a/DT/a communication/NN/communication line/NN/line has/VBZ/has been/VBN/been opened/VBN/opened between/IN/between two/CD/two parties/NNS/parties /:/( that/IN/that is/VBZ/is /,/, party/NN/party a/DT/a calls/VBZ/calls party/NN/party b/NN/b /:/) /,/, no/DT/no one/PRP/one else/RB/else can/MD/can use/VB/use this/DT/this circuit/NN/circuit until/IN/until the/DT/the communication/NN/communication is/VBZ/is terminated/VBN/terminated explicitly/RB/explicitly /:/( for/IN/for example/NN/example /,/, when/WRB/when the/DT/the parties/NNS/parties hang/VBP/hang up/RP/up /:/) /./. message/NN/message switching/NNP/switching. if/IN/if two/CD/two processes/NNS/processes want/VBP/want to/TO/to communicate/VB/communicate /,/, a/DT/a temporary/JJ/temporary link/NN/link is/VBZ/is established/VBN/established for/IN/for the/DT/the duration/NN/duration of/IN/of one/CD/one message/NN/message transfer/NNP/transfer. physical/JJ/physical links/NNS/links are/VBP/are allocated/VBN/allocated dynamically/RB/dynamically among/IN/among correspondents/NNS/correspondents as/IN/as needed/VBN/needed and/CC/and are/VBP/are allocated/VBN/allocated for/IN/for only/RB/only short/JJ/short periods/NNP/periods. each/DT/each message/NN/message is/VBZ/is a/DT/a block/NN/block of/IN/of data/NNS/data with/IN/with system/NN/system information-such/JJ/information-such as/IN/as the/DT/the source/NN/source /,/, the/DT/the destination/NN/destination /,/, and/CC/and errorcorrection/NN/errorcorrection codes/NNS/codes /:/( ecc/NN/ecc /:/) -that/JJ/-that allows/NNS/allows the/DT/the communication/NN/communication network/NN/network to/TO/to deliver/VB/deliver the/DT/the message/NN/message to/TO/to the/DT/the destination/NN/destination correctly/NNP/correctly. this/DT/this scheme/NN/scheme is/VBZ/is similar/JJ/similar to/TO/to the/DT/the post-office/NN/post-office mailing/NN/mailing system/NNP/system. each/DT/each letter/NN/letter is/VBZ/is a/DT/a message/NN/message that/WDT/that contains/VBZ/contains both/DT/both the/DT/the destination/NN/destination address/NN/address and/CC/and source/NN/source /:/( return/NN/return /:/) address/NNP/address. many/JJ/many messages/NNS/messages /:/( from/IN/from different/JJ/different users/NNS/users /:/) can/MD/can be/VB/be shipped/VBN/shipped over/RP/over the/DT/the same/JJ/same link/NN/link /./. packet/NN/packet switching/NNP/switching. one/CD/one logical/JJ/logical message/NN/message may/MD/may have/VB/have to/TO/to be/VB/be divided/VBN/divided into/IN/into a/DT/a number/NN/number of/IN/of packets/NNP/packets. each/DT/each packet/NN/packet may/MD/may be/VB/be sent/VBN/sent to/TO/to its/PRP$/its destination/NN/destination separately/RB/separately /,/, and/CC/and each/DT/each therefore/NN/therefore must/MD/must include/VB/include a/DT/a source/NN/source and/CC/and a/DT/a destination/NN/destination address/NN/address with/IN/with its/PRP$/its data/NNP/data. furthermore/NN/furthermore /,/, the/DT/the various/JJ/various packets/NNS/packets may/MD/may take/VB/take different/JJ/different paths/NNS/paths through/IN/through the/DT/the network/NNP/network. the/DT/the packets/NNS/packets must/MD/must be/VB/be reassembled/VBN/reassembled into/IN/into messages/NNS/messages as/IN/as they/PRP/they arrive/NNP/arrive. note/VBP/note that/IN/that it/PRP/it is/VBZ/is not/RB/not harmful/JJ/harmful for/IN/for data/NNS/data to/TO/to be/VB/be broken/VBN/broken into/IN/into packets/NNS/packets /,/, possibly/RB/possibly routed/VBN/routed separately/RB/separately /,/, and/CC/and reassembled/VBD/reassembled at/IN/at the/DT/the destination/NNP/destination. breaking/NN/breaking up/IN/up an/DT/an audio/NN/audio signal/NN/signal /:/( say/VB/say /,/, a/DT/a telephone/NN/telephone communication/NN/communication /:/) /,/, in/IN/in contrast/NN/contrast /,/, could/MD/could cause/VB/cause great/JJ/great confusion/NN/confusion if/IN/if it/PRP/it was/VBD/was not/RB/not done/VBN/done carefully/RB/carefully /./. there/EX/there are/VBP/are obvious/JJ/obvious tradeoffs/NNS/tradeoffs among/IN/among these/DT/these schemes/NNP/schemes. circuit/NN/circuit switching/VBG/switching requires/NNS/requires substantial/JJ/substantial set-up/NN/set-up time/NN/time and/CC/and may/MD/may waste/VB/waste network/NN/network bandwidth/NN/bandwidth /,/, but/CC/but it/PRP/it incurs/VBZ/incurs less/JJR/less overhead/JJ/overhead for/IN/for shipping/NN/shipping each/DT/each message/NNP/message. conversely/RB/conversely /,/, message/NN/message and/CC/and packet/NN/packet switching/VBG/switching require/NN/require less/JJR/less set-up/JJ/set-up time/NN/time but/CC/but incur/NN/incur more/RBR/more overhead/JJ/overhead per/NN/per message/NNP/message. also/RB/also /,/, in/IN/in packet/NN/packet switching/VBG/switching /,/, each/DT/each message/NN/message must/MD/must be/VB/be divided/VBN/divided into/IN/into packets/NNS/packets and/CC/and later/JJ/later reassembled/NNP/reassembled. packet/NN/packet switching/VBG/switching is/VBZ/is the/DT/the method/NN/method most/JJS/most commonly/RB/commonly used/JJ/used on/IN/on data/NNS/data networks/NNS/networks because/IN/because it/PRP/it makes/VBZ/makes the/DT/the best/JJS/best use/NN/use of/IN/of network/NN/network bandwidth/NN/bandwidth /./. 16.5.5/CD/16.5.5 contention/NN/contention depending/VBG/depending on/IN/on the/DT/the network/NN/network topology/NN/topology /,/, a/DT/a link/NN/link may/MD/may cmmect/VB/cmmect more/RBR/more than/IN/than two/CD/two sites/NNS/sites in/IN/in the/DT/the computer/NN/computer network/NN/network /,/, and/CC/and several/JJ/several of/IN/of these/DT/these sites/NNS/sites may/MD/may want/VB/want to/TO/to transmit/VB/transmit information/NN/information over/IN/over a/DT/a link/NN/link simultaneously/NNP/simultaneously. this/DT/this situation/NN/situation occurs/VBZ/occurs mainly/RB/mainly in/IN/in a/DT/a ring/NN/ring or/CC/or multiaccess/NN/multiaccess bus/NN/bus network/NNP/network. in/IN/in this/DT/this case/NN/case /,/, the/DT/the transmitted/VBN/transmitted information/NN/information may/MD/may become/VB/become scrambled/NNP/scrambled. if/IN/if it/PRP/it does/VBZ/does /,/, it/PRP/it must/MD/must be/VB/be discarded/VBN/discarded ;/:/; and/CC/and the/DT/the sites/NNS/sites must/MD/must be/VB/be notified/VBN/notified about/IN/about the/DT/the problem/NN/problem so/RB/so that/IN/that they/PRP/they can/MD/can retransmit/VB/retransmit the/DT/the information/NNP/information. if/IN/if no/DT/no special/JJ/special provisions/NNS/provisions are/VBP/are made/VBN/made /,/, this/DT/this situation/NN/situation may/MD/may be/VB/be repeated/VBN/repeated /,/, resulting/VBG/resulting in/IN/in degraded/JJ/degraded performance/NN/performance /./. 690/CD/690 chapter/NN/chapter 16/CD/16 16.6/CD/16.6 several/JJ/several techniques/NNS/techniques have/VBP/have been/VBN/been developed/VBN/developed to/TO/to avoid/VB/avoid repeated/VBN/repeated collisions/NNS/collisions /,/, including/VBG/including collision/NN/collision detection/NN/detection and/CC/and token/VBN/token passing/VBG/passing /./. csma/cd/NNP/csma/cd. before/IN/before transmitting/VBG/transmitting a/DT/a message/NN/message over/IN/over a/DT/a link/NN/link /,/, a/DT/a site/JJ/site must/NN/must listen/NN/listen to/TO/to determine/VB/determine whether/IN/whether another/DT/another message/NN/message is/VBZ/is currently/RB/currently being/VBG/being transmitted/VBN/transmitted over/IN/over that/DT/that link/NN/link ;/:/; this/DT/this technique/NN/technique is/VBZ/is called/VBN/called -uvith/JJ/-uvith /./. if/IN/if the/DT/the link/NN/link is/VBZ/is free/JJ/free /,/, the/DT/the site/NN/site can/MD/can start/VB/start transmitting/NNP/transmitting. otherwise/NN/otherwise /,/, it/PRP/it must/MD/must wait/VB/wait /:/( and/CC/and continue/VB/continue to/TO/to listen/VB/listen /:/) until/IN/until the/DT/the link/NN/link is/VBZ/is free/NNP/free. if/IN/if two/CD/two or/CC/or more/JJR/more sites/NNS/sites begin/VBP/begin transmitting/VBG/transmitting at/IN/at exactly/RB/exactly the/DT/the same/JJ/same time/NN/time /:/( each/DT/each thinking/VBG/thinking that/IN/that no/DT/no other/JJ/other site/JJ/site is/VBZ/is using/VBG/using the/DT/the link/NN/link /:/) /,/, then/RB/then they/PRP/they will/MD/will register/VB/register a/DT/a and/CC/and will/MD/will stop/VB/stop transmitting/NNP/transmitting. each/DT/each site/NN/site will/MD/will try/VB/try again/RB/again after/IN/after some/DT/some random/NN/random time/NN/time interval/NN/interval /./. the/DT/the main/JJ/main problem/NN/problem with/IN/with this/DT/this approach/NN/approach is/VBZ/is that/IN/that /,/, when/WRB/when the/DT/the system/NN/system is/VBZ/is very/RB/very busy/JJ/busy /,/, many/JJ/many collisions/NNS/collisions may/MD/may occur/VB/occur /,/, and/CC/and thus/RB/thus performance/NN/performance may/MD/may be/VB/be degraded/VBN/degraded /./. nevertheless/NN/nevertheless /,/, csma/cd/JJ/csma/cd has/VBZ/has been/VBN/been used/VBN/used successfully/RB/successfully in/IN/in the/DT/the ethernet/NN/ethernet system/NN/system /,/, the/DT/the most/RBS/most common/JJ/common local/JJ/local area/NN/area network/NN/network system/NNP/system. one/CD/one strategy/NN/strategy for/IN/for limiting/NN/limiting the/DT/the number/NN/number of/IN/of collisions/NNS/collisions is/VBZ/is to/TO/to limit/VB/limit the/DT/the number/NN/number of/IN/of hosts/NNS/hosts per/IN/per ethernet/NN/ethernet network/NN/network /./. adding/VBG/adding more/JJR/more hosts/NNS/hosts to/TO/to a/DT/a congested/JJ/congested network/NN/network could/MD/could result/VB/result in/IN/in poor/JJ/poor network/NN/network throughput/NNP/throughput. as/IN/as systems/NNS/systems get/VBP/get faster/JJR/faster /,/, they/PRP/they are/VBP/are able/JJ/able to/TO/to send/VB/send more/JJR/more packets/NNS/packets per/IN/per time/NN/time segment/NNP/segment. as/IN/as a/DT/a result/NN/result /,/, the/DT/the number/NN/number of/IN/of systems/NNS/systems per/IN/per ethernet/NN/ethernet network/NN/network generally/RB/generally is/VBZ/is decreasing/VBG/decreasing so/RB/so that/IN/that networking/VBG/networking performance/NN/performance is/VBZ/is kept/VBN/kept reasonable/JJ/reasonable /./. token/NN/token passing/NNP/passing. a/DT/a unique/JJ/unique message/NN/message type/NN/type /,/, known/VBN/known as/IN/as a/DT/a continuously/RB/continuously circulates/VBZ/circulates in/IN/in the/DT/the system/NN/system /:/( usually/RB/usually a/DT/a ring/NN/ring structure/NN/structure /:/) /./. a/DT/a site/NN/site that/WDT/that wants/VBZ/wants to/TO/to transmit/VB/transmit information/NN/information must/MD/must wait/VB/wait until/IN/until the/DT/the token/NN/token arrives/NNP/arrives. it/PRP/it then/RB/then removes/VBZ/removes the/DT/the token/NN/token from/IN/from the/DT/the ring/NN/ring and/CC/and begins/VBZ/begins to/TO/to transmit/VB/transmit its/PRP$/its messages/NNP/messages. when/WRB/when the/DT/the site/JJ/site completes/NNS/completes its/PRP$/its round/NN/round of/IN/of message/NN/message passing/VBG/passing /,/, it/PRP/it retransmits/VBZ/retransmits the/DT/the token/NNP/token. this/DT/this action/NN/action /,/, in/IN/in turn/NN/turn /,/, allows/VBZ/allows another/DT/another site/NN/site to/TO/to receive/VB/receive and/CC/and remove/VB/remove the/DT/the token/NN/token and/CC/and to/TO/to start/VB/start its/PRP$/its message/NN/message transmission/NNP/transmission. if/IN/if the/DT/the token/NN/token gets/VBZ/gets lost/VBN/lost /,/, the/DT/the system/NN/system must/MD/must detect/VB/detect the/DT/the loss/NN/loss and/CC/and generate/VB/generate a/DT/a new/JJ/new token/NNP/token. it/PRP/it usually/RB/usually does/VBZ/does that/IN/that by/IN/by declaring/VBG/declaring an/DT/an to/TO/to choose/VB/choose a/DT/a unique/JJ/unique site/NN/site where/WRB/where a/DT/a new/JJ/new token/NN/token will/MD/will be/VB/be generated/VBN/generated /./. later/JJ/later /,/, in/IN/in section/NN/section 18.6/CD/18.6 /,/, we/PRP/we present/VBP/present one/CD/one election/NN/election algorithm/NNP/algorithm. a/DT/a token-passing/JJ/token-passing scheme/NN/scheme has/VBZ/has been/VBN/been adopted/VBN/adopted by/IN/by the/DT/the ibm/NN/ibm and/CC/and hp/NN/hp i/PRP/i apollo/VBP/apollo systems/NNP/systems. the/DT/the benefit/NN/benefit of/IN/of a/DT/a token-passing/JJ/token-passing network/NN/network is/VBZ/is that/IN/that performance/NN/performance is/VBZ/is constant/NNP/constant. adding/NN/adding new/JJ/new sites/NNS/sites to/TO/to a/DT/a network/NN/network may/MD/may lengthen/VB/lengthen the/DT/the waiting/VBG/waiting time/NN/time for/IN/for a/DT/a token/NN/token /,/, but/CC/but it/PRP/it will/MD/will not/RB/not cause/VB/cause a/DT/a large/JJ/large performance/NN/performance decrease/NN/decrease /,/, as/IN/as may/MD/may happen/VB/happen on/IN/on ethernet/NNP/ethernet. on/IN/on lightly/RB/lightly loaded/VBN/loaded networks/NNS/networks /,/, however/RB/however /,/, ethernet/JJ/ethernet is/VBZ/is more/RBR/more efficient/JJ/efficient /,/, because/IN/because systems/NNS/systems can/MD/can send/VB/send messages/NNS/messages at/IN/at any/DT/any time/NN/time /./. when/WRB/when we/PRP/we are/VBP/are designing/VBG/designing a/DT/a communication/NN/communication network/NN/network /,/, we/PRP/we must/MD/must deal/VB/deal with/IN/with the/DT/the inherent/JJ/inherent complexity/NN/complexity of/IN/of coordinating/VBG/coordinating asynchronous/JJ/asynchronous operations/NNS/operations communicating/VBG/communicating in/IN/in a/DT/a potentially/RB/potentially slow/JJ/slow and/CC/and error-prone/JJ/error-prone environment/NNP/environment. in/IN/in addition/NN/addition /,/, the/DT/the systems/NNS/systems on/IN/on the/DT/the network/NN/network must/MD/must agree/VB/agree on/IN/on a/DT/a protocol/NN/protocol or/CC/or a/DT/a set/NN/set of/IN/of protocols/NNS/protocols for/IN/for determining/VBG/determining host/NN/host names/NNS/names /,/, locating/VBG/locating hosts/NNS/hosts on/IN/on the/DT/the network/NN/network /,/, establishing/VBG/establishing connections/NNS/connections /,/, and/CC/and so/RB/so on/NNP/on. we/PRP/we can/MD/can simplify/VB/simplify the/DT/the design/NN/design problem/NN/problem /:/( and/CC/and related/JJ/related implementation/NN/implementation /:/) by/IN/by partitioning/NN/partitioning the/DT/the problem/NN/problem into/IN/into multiple/NN/multiple layers/NNP/layers. each/DT/each layer/NN/layer on/IN/on one/CD/one system/NN/system communicates/NNS/communicates with/IN/with the/DT/the equivalent/NN/equivalent layer/NN/layer on/IN/on other/JJ/other systems/NNP/systems. typically/RB/typically /,/, each/DT/each layer/NN/layer has/VBZ/has its/PRP$/its own/JJ/own protocols/NNS/protocols /,/, and/CC/and communication/NN/communication takes/VBZ/takes place/NN/place between/IN/between peer/NN/peer layers/NNS/layers 16.6/CD/16.6 691/CD/691 network/NN/network environment/NN/environment iso/RB/iso environment/NN/environment real/JJ/real systems/NNS/systems environment/NN/environment figure/NN/figure 16.6/CD/16.6 two/CD/two computers/NNS/computers communicating/VBG/communicating via/IN/via the/DT/the iso/NN/iso network/NN/network model/NN/model /./. using/VBG/using a/DT/a specific/JJ/specific protocol/NNP/protocol. the/DT/the protocols/NNS/protocols may/MD/may be/VB/be implemented/VBN/implemented in/IN/in hardware/NN/hardware or/CC/or software/NNP/software. for/IN/for instance/NN/instance /,/, figure/NN/figure 16.6/CD/16.6 shows/NNS/shows the/DT/the logical/JJ/logical communications/NNS/communications between/IN/between two/CD/two computers/NNS/computers /,/, with/IN/with the/DT/the three/CD/three lowest-level/JJ/lowest-level layers/NNS/layers implemented/VBN/implemented in/IN/in hardware/NN/hardware /./. following/VBG/following the/DT/the international/JJ/international standards/NNS/standards organization/NN/organization /:/( iso/RB/iso /:/) /,/, we/PRP/we refer/VBP/refer to/TO/to the/DT/the layers/NNS/layers as/IN/as follows/NNS/follows /:/: physical/JJ/physical layer/NNP/layer. the/DT/the physical/JJ/physical layer/NN/layer is/VBZ/is responsible/JJ/responsible for/IN/for handling/NN/handling both/DT/both the/DT/the mechanical/JJ/mechanical and/CC/and the/DT/the electrical/JJ/electrical details/NNS/details of/IN/of the/DT/the physical/JJ/physical transmission/NN/transmission of/IN/of a/DT/a bit/NN/bit stream/NNP/stream. at/IN/at the/DT/the physical/JJ/physical layer/NN/layer /,/, the/DT/the communicating/NN/communicating systems/NNS/systems must/MD/must agree/VB/agree on/IN/on the/DT/the electrical/JJ/electrical representation/NN/representation of/IN/of a/DT/a binary/JJ/binary 0/-NONE-/0 and/CC/and 1/CD/1 /,/, so/RB/so that/IN/that when/WRB/when data/NNS/data are/VBP/are sent/VBN/sent as/IN/as a/DT/a stream/NN/stream of/IN/of electrical/JJ/electrical signals/NNS/signals /,/, the/DT/the receiver/NN/receiver is/VBZ/is able/JJ/able to/TO/to interpret/VB/interpret the/DT/the data/NNS/data properly/RB/properly as/IN/as binary/JJ/binary data/NNP/data. this/DT/this layer/NN/layer is/VBZ/is implemented/VBN/implemented in/IN/in the/DT/the hardware/NN/hardware of/IN/of the/DT/the networking/NN/networking device/NN/device /./. data-link/NN/data-link layer/NNP/layer. the/DT/the data-link/NN/data-link layer/NN/layer is/VBZ/is responsible/JJ/responsible for/IN/for handlingfi'ames/NNS/handlingfi'ames /,/, or/CC/or fixed-length/JJ/fixed-length parts/NNS/parts of/IN/of packets/NNS/packets /,/, including/VBG/including any/DT/any error/NN/error detection/NN/detection and/CC/and recovery/NN/recovery that/IN/that occurs/NNS/occurs in/IN/in the/DT/the physical/JJ/physical layer/NN/layer /./. network/NN/network layer/NNP/layer. the/DT/the network/NN/network layer/NN/layer is/VBZ/is responsible/JJ/responsible for/IN/for providing/NN/providing connecti01cs/NNP/connecti01cs and/CC/and for/IN/for routing/NN/routing packets/NNS/packets in/IN/in the/DT/the communication/NN/communication network/NN/network /,/, including/VBG/including handling/NN/handling the/DT/the addresses/NNS/addresses of/IN/of outgoing/VBG/outgoing packets/NNS/packets /,/, decoding/VBG/decoding the/DT/the addresses/NNS/addresses of/IN/of incoming/VBG/incoming packets/NNS/packets /,/, and/CC/and maintaining/VBG/maintaining routing/NN/routing information/NN/information for/IN/for proper/NN/proper response/NN/response to/TO/to changing/VBG/changing load/VB/load levels/NNP/levels. routers/NNS/routers work/VBP/work at/IN/at this/DT/this layer/NN/layer /./. transport/NN/transport layer/NNP/layer. the/DT/the transport/NN/transport layer/NN/layer is/VBZ/is responsible/JJ/responsible for/IN/for low-level/JJ/low-level access/NN/access to/TO/to the/DT/the network/NN/network and/CC/and for/IN/for transfer/NN/transfer of/IN/of messages/NNS/messages between/IN/between clients/NNS/clients /,/, including/VBG/including partitioning/NN/partitioning messages/NNS/messages into/IN/into packets/NNS/packets /,/, maintaining/VBG/maintaining packet/NN/packet order/NN/order /,/, controlling/VBG/controlling flow/NN/flow /,/, and/CC/and generating/VBG/generating physical/JJ/physical addresses/NNS/addresses /./. session/NN/session layer/NNP/layer. the/DT/the session/NN/session layer/NN/layer is/VBZ/is responsible/JJ/responsible for/IN/for implementing/NN/implementing sessions/NNS/sessions /,/, or/CC/or process-to-process/JJ/process-to-process communication/NN/communication protocols/NNP/protocols. typically/RB/typically /,/, these/DT/these protocols/NNS/protocols are/VBP/are the/DT/the actual/JJ/actual communications/NNS/communications for/IN/for remote/NN/remote logins/NNS/logins and/CC/and for/IN/for file/NN/file and/CC/and mail/NN/mail transfers/NNS/transfers /./. 692/CD/692 chapter/NN/chapter 16/CD/16 presentation/NN/presentation layer/NNP/layer. the/DT/the presentation/NN/presentation layer/NN/layer is/VBZ/is responsible/JJ/responsible for/IN/for resolving/NN/resolving the/DT/the differences/NNS/differences in/IN/in formats/NNS/formats among/IN/among the/DT/the various/JJ/various sites/NNS/sites in/IN/in the/DT/the network/NN/network /,/, including/VBG/including character/NN/character conversions/NNS/conversions and/CC/and half/DT/half duplex-full/JJ/duplex-full duplex/NN/duplex modes/VBZ/modes /:/( character/NN/character echoing/NN/echoing /:/) /./. application/NN/application layer/NNP/layer. the/DT/the application/NN/application layer/NN/layer is/VBZ/is responsible/JJ/responsible for/IN/for interacting/NN/interacting directly/RB/directly with/IN/with users/NNP/users. this/DT/this layer/NN/layer deals/NNS/deals with/IN/with file/JJ/file transfe1/NNP/transfe1 ~/NNP/~ remote-login/NNP/remote-login protocols/NNS/protocols /,/, and/CC/and electronic/JJ/electronic mail/NN/mail /,/, as/IN/as well/RB/well as/IN/as with/IN/with schemas/NNS/schemas for/IN/for distributed/VBN/distributed databases/NNS/databases /./. figure/NN/figure 16.7/CD/16.7 summarizes/NNS/summarizes the/DT/the set/NN/set of/IN/of cooperating/VBG/cooperating protocols-showing/JJ/protocols-showing the/DT/the physical/JJ/physical flow/NN/flow of/IN/of data/NNP/data. as/IN/as mentioned/VBN/mentioned /,/, logically/RB/logically each/DT/each layer/NN/layer of/IN/of a/DT/a protocol/NN/protocol stack/NN/stack communicates/VBZ/communicates with/IN/with the/DT/the equivalent/NN/equivalent layer/NN/layer on/IN/on other/JJ/other systems/NNP/systems. but/CC/but physically/RB/physically /,/, a/DT/a message/NN/message starts/VBZ/starts at/IN/at or/CC/or above/IN/above the/DT/the application/NN/application layer/NN/layer and/CC/and end-user/JJ/end-user application/NN/application process/NN/process distributed/VBD/distributed information/NN/information transfer-syntax/NN/transfer-syntax negotiation/NN/negotiation data-representation/NN/data-representation transformations/NNS/transformations dialog/VBP/dialog and/CC/and synchronization/NN/synchronization control/NN/control for/IN/for application/NN/application entities/NNS/entities network-independent/JJ/network-independent message-interchange/NN/message-interchange service/NN/service j/NN/j end-to/-NONE-/end-to ~/./~ end/NN/end message/NN/message transfer/NN/transfer /:/( connection/NN/connection management/NN/management /,/, error/NN/error control/NN/control /,/, fragmentation/NN/fragmentation /,/, flow/NN/flow control/NN/control /:/) network/NN/network routing/VBG/routing /,/, addressing/VBG/addressing /,/, call/NN/call set-up/NN/set-up and/CC/and clearing/VBG/clearing application/NN/application layer/NN/layer presentation/NN/presentation layer/NN/layer session/NN/session layer/NN/layer transport/NN/transport layer/NN/layer network/NN/network layer/NN/layer data-link/NN/data-link control/NN/control /:/( framing/VBG/framing /,/, data/NNS/data transparency/NN/transparency /,/, error/NN/error control/NN/control /:/) link/NN/link layer/NN/layer mechanical/JJ/mechanical and/CC/and electrical/JJ/electrical networkcinterface/NN/networkcinterface connections/NNS/connections physical/JJ/physical connection/NN/connection to/TO/to network/VB/network termination/NN/termination equipment/NN/equipment physical/JJ/physical layer/NN/layer 16.7/CD/16.7 the/DT/the iso/NN/iso protocol/NN/protocol stack/NN/stack /./. 16.6/CD/16.6 data-link/NN/data-link -layer/NN/-layer header/NN/header network-layer/NN/network-layer header/NN/header transport-layer/NN/transport-layer header/NN/header f-------1/-NONE-/f-------1 session-layer/JJ/session-layer header/NN/header f-------1/-NONE-/f-------1 presentation/NN/presentation layer/NN/layer f-------1/-NONE-/f-------1 application/NN/application layer/NN/layer message/NN/message l_/NNP/l_ _/NNP/_ _____j/NNP/_____j data-link/NNP/data-link -layer/NNP/-layer trailer/NN/trailer figure/NN/figure 16.8/CD/16.8 an/DT/an iso/NN/iso network/NN/network message/NN/message /./. 693/CD/693 is/VBZ/is passed/VBN/passed through/IN/through each/DT/each lower/JJR/lower level/NN/level in/IN/in turn/NNP/turn. each/DT/each layer/NN/layer may/MD/may modify/VB/modify the/DT/the message/NN/message and/CC/and il1.clude/JJ/il1.clude message-header/NN/message-header data/NNS/data for/IN/for the/DT/the equivalent/NN/equivalent layer/NN/layer on/IN/on the/DT/the receiving/NN/receiving side/NNP/side. ultimately/RB/ultimately /,/, the/DT/the message/NN/message reaches/VBZ/reaches the/DT/the data-network/NN/data-network layer/NN/layer and/CC/and is/VBZ/is transferred/VBN/transferred as/RB/as one/CD/one or/CC/or more/JJR/more packets/NNS/packets /:/( figure/NN/figure 16.8/CD/16.8 /CD/) /./. the/DT/the data-lil1.k/NN/data-lil1.k layer/NN/layer of/IN/of the/DT/the target/NN/target system/NN/system receives/NNS/receives these/DT/these data/NNS/data /,/, and/CC/and the/DT/the message/NN/message is/VBZ/is moved/VBN/moved up/RP/up through/IN/through the/DT/the protocol/NN/protocol stack/NN/stack ;/:/; it/PRP/it is/VBZ/is analyzed/VBN/analyzed /,/, modified/VBN/modified /,/, and/CC/and stripped/VBD/stripped of/IN/of headers/NNS/headers as/IN/as it/PRP/it progresses/NNP/progresses. it/PRP/it fu1.ally/RB/fu1.ally reaches/VBZ/reaches the/DT/the application/NN/application layer/NN/layer for/IN/for use/NN/use by/IN/by the/DT/the receiving/VBG/receiving process/NN/process /./. the/DT/the iso/NN/iso model/NN/model formalizes/VBZ/formalizes some/DT/some of/IN/of the/DT/the earlier/JJR/earlier work/NN/work done/NN/done in/IN/in network/NN/network protocols/NNS/protocols but/CC/but was/VBD/was developed/VBN/developed in/IN/in the/DT/the late/JJ/late 1970s/CD/1970s and/CC/and is/VBZ/is currently/RB/currently not/RB/not in/IN/in widespread/JJ/widespread use/NNP/use. perhaps/RB/perhaps the/DT/the most/RBS/most widely/RB/widely adopted/VBN/adopted protocol/NN/protocol stack/NN/stack is/VBZ/is the/DT/the tcp/NN/tcp /ip/NN//ip model/NN/model /,/, which/WDT/which has/VBZ/has been/VBN/been adopted/VBN/adopted by/IN/by virtually/RB/virtually all/DT/all internet/NN/internet sites/NNP/sites. the/DT/the tcp/NN/tcp /ip/NN//ip protocol/NN/protocol stack/NN/stack has/VBZ/has fewer/JJR/fewer layers/NNS/layers than/IN/than does/NNS/does the/DT/the iso/NN/iso model/NNP/model. theoretically/RB/theoretically /,/, because/IN/because it/PRP/it combilles/VBZ/combilles several/JJ/several functions/NNS/functions ill/MD/ill each/VB/each layer/NN/layer /,/, it/PRP/it is/VBZ/is more/RBR/more difficult/JJ/difficult to/TO/to implement/NN/implement but/CC/but more/RBR/more efficient/JJ/efficient than/IN/than iso/NN/iso networking/NNP/networking. the/DT/the relationship/NN/relationship between/IN/between the/DT/the iso/NN/iso and/CC/and tcp/VB/tcp /ip/JJ//ip models/NNS/models is/VBZ/is shown/VBN/shown in/IN/in figure/NN/figure 16.9/CD/16.9. the/DT/the tcp/NN/tcp /ip/NN//ip application/NN/application layer/NN/layer identifies/NNS/identifies several/JJ/several protocols/NNS/protocols ill/MD/ill widespread/VB/widespread use/NN/use ill/NN/ill the/DT/the internet/NN/internet /,/, illcluding/VBG/illcluding http/NN/http /,/, ftp/NN/ftp /,/, telnet/NN/telnet /,/, dns/NNS/dns /,/, and/CC/and smtp/NNP/smtp. the/DT/the transport/NN/transport layer/NN/layer identifies/NNS/identifies the/DT/the unreliable/JJ/unreliable /,/, connectionless/NN/connectionless user/NN/user datagram/NN/datagram protocol/NN/protocol /:/( udp/NN/udp /:/) and/CC/and the/DT/the reliable/JJ/reliable /,/, connection-oriented/JJ/connection-oriented transmission/NN/transmission control/NN/control protocol/NN/protocol /:/( tcp/NN/tcp /:/) /./. the/DT/the internet/NN/internet protocol/NN/protocol /:/( ip/NN/ip /:/) is/VBZ/is responsible/JJ/responsible for/IN/for routing/NN/routing ip/NN/ip datagrams/NNS/datagrams through/IN/through the/DT/the internet/NNP/internet. the/DT/the tcp/NN/tcp /ip/NN//ip model/NN/model does/VBZ/does not/RB/not formally/RB/formally identify/VB/identify a/DT/a link/NN/link or/CC/or physical/JJ/physical laye1/NNP/laye1 ~/NNP/~ allowing/NN/allowing tcp/NN/tcp /ip/NN//ip traffic/NN/traffic to/TO/to run/VB/run across/RP/across any/DT/any physical/JJ/physical network/NNP/network. in/IN/in section/NN/section 16.9/CD/16.9 /,/, we/PRP/we consider/VBP/consider the/DT/the tcp/NN/tcp /ip/NN//ip model/NN/model running/VBG/running over/IN/over an/DT/an ethernet/NN/ethernet network/NN/network /./. security/NN/security should/MD/should be/VB/be a/DT/a concern/NN/concern in/IN/in the/DT/the design/NN/design and/CC/and implementation/NN/implementation of/IN/of any/DT/any modern/JJ/modern communication/NN/communication protocol/NNP/protocol. both/DT/both strong/JJ/strong authentication/NN/authentication and/CC/and encryption/NN/encryption are/VBP/are needed/VBN/needed for/IN/for secure/NN/secure communication/NNP/communication. strong/JJ/strong authentication/NN/authentication ensures/NNS/ensures that/WDT/that the/DT/the sender/NN/sender and/CC/and receiver/NN/receiver of/IN/of a/DT/a communication/NN/communication are/VBP/are who/WP/who or/CC/or what/WP/what they/PRP/they are/VBP/are supposed/VBN/supposed to/TO/to be/NNP/be. encryption/NN/encryption protects/NNS/protects the/DT/the contents/NNS/contents of/IN/of the/DT/the communication/NN/communication from/IN/from eavesdropping/NNP/eavesdropping. weak/JJ/weak authentication/NN/authentication and/CC/and clear-text/JJ/clear-text communication/NN/communication are/VBP/are still/RB/still very/RB/very common/JJ/common /,/, however/RB/however /,/, for/IN/for a/DT/a variety/NN/variety of/IN/of reasons/NNP/reasons. when/WRB/when most/RBS/most of/IN/of the/DT/the 694/CD/694 chapter/NN/chapter 16/CD/16 16.7/CD/16.7 iso/NN/iso presentation/NN/presentation session/NN/session physical/JJ/physical tcp/ip/NN/tcp/ip http/NN/http /,/, dns/NNS/dns /,/, telnet/JJ/telnet smtp/NN/smtp /,/, ftp/NN/ftp not/RB/not defined/VBN/defined not/RB/not defined/VBN/defined tcp-udp/-NONE-/tcp-udp not/RB/not defined/VBN/defined not/RB/not defined/VBN/defined figure/NN/figure 16.9/CD/16.9 the/DT/the iso/NN/iso and/CC/and tcp/ip/JJ/tcp/ip protocol/NN/protocol stacks/NNS/stacks /./. common/JJ/common protocols/NNS/protocols were/VBD/were designed/VBN/designed /,/, security/NN/security was/VBD/was frequently/RB/frequently less/JJR/less important/JJ/important than/IN/than performance/NN/performance /,/, simplicity/NN/simplicity /,/, and/CC/and efficiency/NN/efficiency /./. strong/JJ/strong authentication/NN/authentication requires/VBZ/requires a/DT/a multistep/NN/multistep handshake/NN/handshake protocol/NN/protocol or/CC/or authentication/NN/authentication devices/NNS/devices /,/, adding/VBG/adding complexity/NN/complexity to/TO/to a/DT/a protocol/NNP/protocol. modern/NN/modern cpus/VBZ/cpus can/MD/can efficiently/RB/efficiently perform/VB/perform encryption/NN/encryption /,/, and/CC/and systems/NNS/systems frequently/RB/frequently offload/JJ/offload encryption/NN/encryption to/TO/to separate/JJ/separate cryptography/NN/cryptography processors/NNS/processors /,/, so/RB/so system/NN/system performance/NN/performance is/VBZ/is not/RB/not compromised/NNP/compromised. longdistance/NN/longdistance communication/NN/communication can/MD/can be/VB/be made/VBN/made secure/NN/secure by/IN/by authenticating/NN/authenticating the/DT/the endpoints/NNS/endpoints and/CC/and encrypting/VBG/encrypting the/DT/the stream/NN/stream of/IN/of packets/NNS/packets in/IN/in a/DT/a virtual/JJ/virtual private/JJ/private network/NN/network /,/, as/IN/as discussed/VBN/discussed in/IN/in 15.4.2/CD/15.4.2. lan/NN/lan communication/NN/communication remains/VBZ/remains unencrypted/VBN/unencrypted at/IN/at most/JJS/most sites/NNS/sites /,/, but/CC/but protocols/NNS/protocols such/JJ/such as/IN/as nfs/NNS/nfs version/NN/version 4/CD/4 /,/, which/WDT/which includes/VBZ/includes strong/JJ/strong native/JJ/native authentication/NN/authentication and/CC/and encryption/NN/encryption /,/, should/MD/should help/VB/help improve/VB/improve even/RB/even lan/JJ/lan security/NN/security /./. a/DT/a distributed/VBN/distributed system/NN/system may/MD/may suffer/VB/suffer from/IN/from various/JJ/various types/NNS/types of/IN/of hardware/NN/hardware failure/NNP/failure. the/DT/the failure/NN/failure of/IN/of a/DT/a link/NN/link /,/, the/DT/the failure/NN/failure of/IN/of a/DT/a site/JJ/site /,/, and/CC/and the/DT/the loss/NN/loss of/IN/of a/DT/a message/NN/message are/VBP/are the/DT/the most/RBS/most common/JJ/common types/NNP/types. to/TO/to ensure/VB/ensure that/IN/that the/DT/the system/NN/system is/VBZ/is robust/VBN/robust /,/, we/PRP/we must/MD/must detect/VB/detect any/DT/any of/IN/of these/DT/these failures/NNS/failures /,/, reconfigure/NN/reconfigure the/DT/the system/NN/system so/RB/so that/IN/that computation/NN/computation can/MD/can continue/VB/continue /,/, and/CC/and recover/RB/recover when/WRB/when a/DT/a site/JJ/site or/CC/or a/DT/a link/NN/link is/VBZ/is repaired/VBN/repaired /./. 16.7.1/CD/16.7.1 failure/NN/failure detection/NN/detection in/IN/in an/DT/an environment/NN/environment with/IN/with no/DT/no shared/VBN/shared memory/NN/memory /,/, we/PRP/we are/VBP/are generally/RB/generally unable/JJ/unable to/TO/to differentiate/VB/differentiate among/IN/among link/NN/link failure/NN/failure /,/, site/JJ/site failure/NN/failure /,/, and/CC/and message/NN/message loss/NNP/loss. we/PRP/we can/MD/can usually/RB/usually detect/VB/detect only/RB/only that/IN/that one/CD/one of/IN/of these/DT/these failures/NNS/failures has/VBZ/has occurred/NNP/occurred. once/RB/once a/DT/a failure/NN/failure has/VBZ/has been/VBN/been 16.7/CD/16.7 695/CD/695 detected/VBN/detected /,/, appropriate/JJ/appropriate action/NN/action must/MD/must be/VB/be taken/NNP/taken. what/WP/what action/NN/action is/VBZ/is appropriate/JJ/appropriate depends/NNS/depends on/IN/on the/DT/the particular/JJ/particular application/NN/application /./. to/TO/to detect/VB/detect link/NN/link and/CC/and site/JJ/site failure/NN/failure /,/, we/PRP/we use/VBP/use a/DT/a procedure/NNP/procedure. suppose/NN/suppose that/WDT/that sites/VBZ/sites a/DT/a and/CC/and b/NN/b have/VBP/have a/DT/a direct/JJ/direct physical/JJ/physical link/NN/link between/IN/between them/PRP/them /:/.. at/IN/at fixed/VBN/fixed intervals/NNS/intervals /,/, the/DT/the sites/NNS/sites send/VBP/send each/DT/each other/JJ/other an/DT/an j-am-up/JJ/j-am-up m.essage/NNP/m.essage. if/IN/if site/JJ/site a/DT/a does/VBZ/does not/RB/not receive/VB/receive this/DT/this message/NN/message within/IN/within a/DT/a predetermined/VBN/predetermined time/NN/time period/NN/period /,/, it/PRP/it can/MD/can assume/VB/assume that/IN/that site/JJ/site b/NN/b has/VBZ/has failed/VBN/failed /,/, that/IN/that the/DT/the link/NN/link between/IN/between a/DT/a and/CC/and b/NN/b has/VBZ/has failed/VBN/failed /,/, or/CC/or that/IN/that the/DT/the message/NN/message from/IN/from b/NN/b has/VBZ/has been/VBN/been lost/NNP/lost. at/IN/at this/DT/this point/NN/point /,/, site/JJ/site a/DT/a has/VBZ/has two/CD/two choices/NNP/choices. it/PRP/it can/MD/can wait/VB/wait for/IN/for another/DT/another time/NN/time period/NN/period to/TO/to receive/VB/receive an/DT/an j-am-up/JJ/j-am-up message/NN/message from/IN/from b/NN/b /,/, or/CC/or it/PRP/it can/MD/can send/VB/send an/DT/an are-you-up/JJ/are-you-up message/NN/message to/TO/to b/VB/b /./. if/IN/if time/NN/time goes/VBZ/goes by/RB/by and/CC/and site/VB/site a/DT/a still/RB/still has/VBZ/has not/RB/not received/VBN/received an/DT/an j-am-up/JJ/j-am-up message/NN/message /,/, or/CC/or if/IN/if site/JJ/site a/DT/a has/VBZ/has sent/VBN/sent an/DT/an are-you-up/JJ/are-you-up message/NN/message and/CC/and has/VBZ/has not/RB/not received/VBN/received a/DT/a reply/RB/reply /,/, the/DT/the procedure/NN/procedure can/MD/can be/VB/be repeated/NNP/repeated. again/RB/again /,/, the/DT/the only/JJ/only conclusion/NN/conclusion that/WDT/that site/IN/site a/DT/a can/NN/can draw/NN/draw safely/RB/safely is/VBZ/is that/IN/that some/DT/some type/NN/type of/IN/of failure/NN/failure has/VBZ/has occurred/VBN/occurred /./. site/JJ/site a/DT/a can/NN/can try/NN/try to/TO/to differentiate/VB/differentiate between/IN/between link/NN/link failure/NN/failure and/CC/and site/JJ/site failure/NN/failure by/IN/by sending/NN/sending an/DT/an are-you-up/JJ/are-you-up message/NN/message to/TO/to b/VB/b by/IN/by another/DT/another route/NN/route /:/( if/IN/if one/CD/one exists/NNS/exists /:/) /./. if/IN/if and/CC/and when/WRB/when b/NN/b receives/VBZ/receives this/DT/this message/NN/message /,/, it/PRP/it immediately/RB/immediately replies/VBZ/replies positively/NNP/positively. this/DT/this positive/JJ/positive reply/NN/reply tells/NNS/tells a/DT/a that/WDT/that b/NN/b is/VBZ/is up/IN/up and/CC/and that/IN/that the/DT/the failure/NN/failure is/VBZ/is in/IN/in the/DT/the direct/JJ/direct link/NN/link between/IN/between them/NNP/them. since/IN/since we/PRP/we do/VBP/do not/RB/not know/VB/know in/IN/in advance/NN/advance how/WRB/how long/JJ/long it/PRP/it will/MD/will take/VB/take the/DT/the message/NN/message to/TO/to travel/NN/travel from/IN/from a/DT/a to/TO/to b/VB/b and/CC/and back/RB/back /,/, we/PRP/we must/MD/must use/VB/use a/DT/a at/IN/at the/DT/the time/NN/time a/DT/a sends/NNS/sends the/DT/the are-you-up/NN/are-you-up message/NN/message /,/, it/PRP/it specifies/VBZ/specifies a/DT/a time/NN/time interval/NN/interval during/IN/during which/WDT/which it/PRP/it is/VBZ/is willing/JJ/willing to/TO/to wait/VB/wait for/IN/for the/DT/the reply/NN/reply from/IN/from b/NNP/b. if/IN/if a/DT/a receives/NNS/receives the/DT/the reply/NN/reply message/NN/message within/IN/within that/DT/that time/NN/time interval/NN/interval /,/, then/RB/then it/PRP/it can/MD/can safely/RB/safely conclude/VB/conclude that/IN/that b/NN/b is/VBZ/is up/NNP/up. if/IN/if not/RB/not /,/, however/RB/however /:/( that/IN/that is/VBZ/is /,/, if/IN/if a/DT/a time-out/NN/time-out occurs/VBZ/occurs /:/) /,/, then/RB/then a/DT/a may/MD/may conclude/VB/conclude only/RB/only that/IN/that one/CD/one or/CC/or more/JJR/more of/IN/of the/DT/the following/JJ/following sih1ations/NNS/sih1ations has/VBZ/has occurred/VBN/occurred /:/: site/JJ/site b/NN/b is/VBZ/is down/IN/down /./. the/DT/the direct/JJ/direct link/NN/link /:/( if/IN/if one/CD/one exists/NNS/exists /:/) from/IN/from a/DT/a to/TO/to b/VB/b is/VBZ/is down/IN/down /./. the/DT/the alternative/NN/alternative path/NN/path from/IN/from a/DT/a to/TO/to b/VB/b is/VBZ/is down/IN/down /./. the/DT/the message/NN/message has/VBZ/has been/VBN/been lost/VBN/lost /./. site/JJ/site a/DT/a can/NN/can not/RB/not /,/, however/RB/however /,/, determine/NN/determine which/WDT/which of/IN/of these/DT/these events/NNS/events has/VBZ/has occurred/VBN/occurred /./. 16.7.2/CD/16.7.2 reconfiguration/NN/reconfiguration suppose/NN/suppose that/WDT/that site/IN/site a/DT/a has/VBZ/has discovered/VBN/discovered /,/, through/IN/through the/DT/the mechanism/NN/mechanism described/VBD/described in/IN/in the/DT/the previous/JJ/previous section/NN/section /,/, that/IN/that a/DT/a failure/NN/failure has/VBZ/has occurred/NNP/occurred. it/PRP/it must/MD/must then/RB/then initiate/VB/initiate a/DT/a procedure/NN/procedure that/WDT/that will/MD/will allow/VB/allow the/DT/the system/NN/system to/TO/to reconfigure/VB/reconfigure and/CC/and to/TO/to continue/VB/continue its/PRP$/its normal/JJ/normal mode/NN/mode of/IN/of operation/NN/operation /./. if/IN/if a/DT/a direct/JJ/direct link/NN/link from/IN/from a/DT/a to/TO/to b/VB/b has/VBZ/has failed/VBN/failed /,/, this/DT/this information/NN/information must/MD/must be/VB/be broadcast/VBN/broadcast to/TO/to every/DT/every site/NN/site in/IN/in the/DT/the system/NN/system /,/, so/RB/so that/IN/that the/DT/the various/JJ/various routing/NN/routing tables/NNS/tables can/MD/can be/VB/be updated/VBN/updated accordingly/RB/accordingly /./. if/IN/if the/DT/the system/NN/system believes/VBZ/believes that/IN/that a/DT/a site/JJ/site has/VBZ/has failed/VBN/failed /-NONE-/( because/IN/because that/DT/that site/JJ/site can/MD/can be/VB/be reached/VBN/reached no/DT/no longer/NN/longer /:/) /,/, then/RB/then all/DT/all sites/NNS/sites in/IN/in the/DT/the system/NN/system must/MD/must be/VB/be so/RB/so notified/VBN/notified /,/, so/RB/so that/IN/that they/PRP/they will/MD/will no/RB/no longer/RBR/longer attempt/NN/attempt to/TO/to use/VB/use the/DT/the services/NNS/services of/IN/of the/DT/the failed/VBN/failed site/NNP/site. the/DT/the failure/NN/failure of/IN/of a/DT/a site/JJ/site that/IN/that serves/NNS/serves as/IN/as a/DT/a central/JJ/central coordinator/NN/coordinator for/IN/for some/DT/some activity/NN/activity /:/( such/JJ/such as/IN/as deadlock/NN/deadlock detection/NN/detection /:/) requires/NNS/requires the/DT/the election/NN/election of/IN/of a/DT/a new/JJ/new coordinator/NNP/coordinator. similarly/RB/similarly /,/, if/IN/if the/DT/the failed/VBN/failed 696/CD/696 chapter/NN/chapter 16/CD/16 site/NN/site is/VBZ/is part/NN/part of/IN/of a/DT/a logical/JJ/logical ring/NN/ring /,/, then/RB/then a/DT/a new/JJ/new logical/JJ/logical ring/NN/ring must/MD/must be/VB/be constructed/VBN/constructed /./. note/NN/note that/IN/that /,/, if/IN/if the/DT/the site/JJ/site has/VBZ/has not/RB/not failed/VBN/failed /-NONE-/( that/IN/that is/VBZ/is /,/, if/IN/if it/PRP/it is/VBZ/is up/RP/up but/CC/but camwt/NN/camwt be/VB/be reached/VBN/reached /-NONE-/) /,/, then/RB/then we/PRP/we may/MD/may have/VB/have the/DT/the undesirable/JJ/undesirable situation/NN/situation in/IN/in which/WDT/which two/CD/two sites/NNS/sites serve/VBP/serve as/IN/as the/DT/the coordinator/NNP/coordinator. when/WRB/when the/DT/the network/NN/network is/VBZ/is partitioned/VBN/partitioned /,/, the/DT/the two/CD/two coordinators/NNS/coordinators /:/( each/DT/each for/IN/for its/PRP$/its own/JJ/own partition/NN/partition /:/) may/MD/may initiate/VB/initiate conflicting/VBG/conflicting actions/NNP/actions. for/IN/for example/NN/example /,/, if/IN/if the/DT/the coordinators/NNS/coordinators are/VBP/are responsible/JJ/responsible for/IN/for implementing/NN/implementing mutual/JJ/mutual exclusion/NN/exclusion /,/, we/PRP/we may/MD/may have/VB/have a/DT/a situation/NN/situation in/IN/in which/WDT/which two/CD/two processes/NNS/processes are/VBP/are executing/VBG/executing simultaneously/RB/simultaneously in/IN/in their/PRP$/their critical/JJ/critical sections/NNS/sections /./. 16.7.3/CD/16.7.3 recovery/NN/recovery from/IN/from failure/NN/failure when/WRB/when a/DT/a failed/VBN/failed link/NN/link or/CC/or site/VB/site is/VBZ/is repaired/VBN/repaired /,/, it/PRP/it must/MD/must be/VB/be integrated/VBN/integrated into/IN/into the/DT/the system/NN/system gracefully/RB/gracefully and/CC/and smoothly/RB/smoothly /./. suppose/NN/suppose that/IN/that a/DT/a link/NN/link between/IN/between a/DT/a and/CC/and b/NN/b has/VBZ/has failed/NNP/failed. wlcen/NN/wlcen it/PRP/it is/VBZ/is repaired/VBN/repaired /,/, both/DT/both a/DT/a and/CC/and b/NN/b must/MD/must be/VB/be notified/NNP/notified. we/PRP/we can/MD/can accomplish/VB/accomplish this/DT/this notification/NN/notification by/IN/by continuously/RB/continuously repeating/VBG/repeating the/DT/the handshaking/VBG/handshaking procedure/NN/procedure described/VBD/described in/IN/in section/NN/section 16.7.1/CD/16.7.1 /./. suppose/NN/suppose that/IN/that site/JJ/site b/NN/b has/VBZ/has failed/NNP/failed. wlcen/NN/wlcen it/PRP/it recovers/VBZ/recovers /,/, it/PRP/it must/MD/must notify/VB/notify all/DT/all other/JJ/other sites/NNS/sites that/IN/that it/PRP/it is/VBZ/is up/RP/up again/NNP/again. site/NN/site b/NN/b then/RB/then may/MD/may have/VB/have to/TO/to receive/VB/receive information/NN/information from/IN/from the/DT/the other/JJ/other sites/NNS/sites to/TO/to update/VB/update its/PRP$/its local/JJ/local tables/NNS/tables ;/:/; for/IN/for example/NN/example /,/, it/PRP/it may/MD/may need/VB/need routing-table/JJ/routing-table information/NN/information /,/, a/DT/a list/NN/list of/IN/of sites/NNS/sites that/WDT/that are/VBP/are down/RB/down /,/, or/CC/or mcdelivered/VBN/mcdelivered messages/NNS/messages and/CC/and mail/NNP/mail. if/IN/if the/DT/the site/JJ/site has/VBZ/has not/RB/not failed/VBN/failed but/CC/but simply/RB/simply could/MD/could not/RB/not be/VB/be reached/VBN/reached /,/, then/RB/then this/DT/this information/NN/information is/VBZ/is still/RB/still required/VBN/required /./. 16.7.4/CD/16.7.4 fault/NN/fault tolerance/NN/tolerance a/DT/a distributed/VBN/distributed system/NN/system must/MD/must tolerate/VB/tolerate a/DT/a certain/JJ/certain level/NN/level of/IN/of failure/NN/failure and/CC/and continue/VB/continue to/TO/to function/NN/function normally/RB/normally when/WRB/when faced/VBN/faced with/IN/with various/JJ/various types/NNS/types of/IN/of failures/NNP/failures. making/VBG/making a/DT/a facility/NN/facility fault/NN/fault tolerant/NN/tolerant starts/VBZ/starts at/IN/at the/DT/the protocol/NN/protocol level/NN/level /,/, as/IN/as described/VBN/described above/IN/above /,/, but/CC/but continues/VBZ/continues through/IN/through all/DT/all aspects/NNS/aspects of/IN/of the/DT/the system/NNP/system. we/PRP/we use/VBP/use the/DT/the term/NN/term fault/NN/fault tolerance/NN/tolerance in/IN/in a/DT/a broad/JJ/broad sense/NNP/sense. communication/NN/communication faults/NNS/faults /,/, machine/NN/machine failures/NNS/failures /:/( of/IN/of type/NN/type fail-stop/JJ/fail-stop where/WRB/where the/DT/the machine/NN/machine stops/NNS/stops before/IN/before performing/VBG/performing an/DT/an erroneous/JJ/erroneous operation/NN/operation that/WDT/that is/VBZ/is visible/JJ/visible to/TO/to other/JJ/other processors/NNS/processors /:/) /,/, storage-device/JJ/storage-device crashes/NNS/crashes /,/, and/CC/and decays/NNS/decays of/IN/of storage/NN/storage media/NNS/media should/MD/should all/DT/all be/VB/be tolerated/VBN/tolerated to/TO/to some/DT/some extent/NNP/extent. a/DT/a should/MD/should continue/VB/continue to/TO/to function/NN/function /,/, perhaps/RB/perhaps in/IN/in a/DT/a degraded/JJ/degraded form/NN/form /,/, when/WRB/when faced/VBN/faced with/IN/with such/JJ/such failures/NNP/failures. the/DT/the degradation/NN/degradation can/MD/can be/VB/be in/IN/in performance/NN/performance /,/, in/IN/in functionality/NN/functionality /,/, or/CC/or in/IN/in both/NNP/both. it/PRP/it should/MD/should be/VB/be proportional/JJ/proportional /,/, however/RB/however /,/, to/TO/to the/DT/the failures/NNS/failures that/WDT/that caused/VBN/caused it/NNP/it. a/DT/a system/NN/system that/WDT/that grinds/VBZ/grinds to/TO/to a/DT/a halt/NN/halt when/WRB/when only/RB/only one/CD/one of/IN/of its/PRP$/its components/NNS/components fails/NNS/fails is/VBZ/is certainly/RB/certainly not/RB/not fault/VB/fault tolerant/JJ/tolerant /./. unfortunately/RB/unfortunately /,/, fault/NN/fault tolerance/NN/tolerance can/MD/can be/VB/be difficult/JJ/difficult and/CC/and expensive/JJ/expensive to/TO/to implement/NN/implement /./. at/IN/at the/DT/the network/NN/network layer/NN/layer /,/, multiple/NN/multiple redundant/NN/redundant communication/NN/communication paths/NNS/paths and/CC/and network/NN/network devices/NNS/devices such/JJ/such as/IN/as switches/NNS/switches and/CC/and routers/NNS/routers are/VBP/are needed/VBN/needed to/TO/to avoid/VB/avoid a/DT/a cmnmunication/NN/cmnmunication failure/NNP/failure. a/DT/a storage/NN/storage failure/NN/failure can/MD/can cause/VB/cause loss/NN/loss of/IN/of the/DT/the operating/NN/operating system/NN/system /,/, applications/NNS/applications /,/, or/CC/or data/NNP/data. storage/NN/storage units/NNS/units can/MD/can include/VB/include redundant/JJ/redundant hardware/NN/hardware components/NNS/components that/WDT/that automatically/RB/automatically take/VBP/take over/IN/over from/IN/from each/DT/each other/JJ/other in/IN/in case/NN/case of/IN/of failure/NNP/failure. in/IN/in addition/NN/addition /,/, raid/VBD/raid systems/NNS/systems can/MD/can ensure/VB/ensure continued/VBN/continued access/NN/access to/TO/to the/DT/the data/NNS/data even/RB/even in/IN/in the/DT/the event/NN/event of/IN/of one/CD/one or/CC/or more/JJR/more disk/NN/disk failures/NNS/failures /:/( section/NN/section 12.7/CD/12.7 /CD/) /./. a/DT/a system/NN/system failure/NN/failure without/IN/without redundancy/NN/redundancy can/MD/can cause/VB/cause an/DT/an application/NN/application or/CC/or an/DT/an entire/JJ/entire facility/NN/facility to/TO/to stop/VB/stop operation/NNP/operation. the/DT/the inost/NN/inost simple/NN/simple system/NN/system failure/NN/failure involves/VBZ/involves a/DT/a system/NN/system running/VBG/running only/RB/only stateless/JJ/stateless applications/NNP/applications. these/DT/these applications/NNS/applications can/MD/can be/VB/be restarted/VBN/restarted without/IN/without 16.8/CD/16.8 16.8/CD/16.8 697/CD/697 compromising/VBG/compromising the/DT/the operation/NN/operation ;/:/; so/RB/so as/IN/as long/RB/long as/IN/as the/DT/the applications/NNS/applications can/MD/can run/VB/run on/IN/on more/JJR/more than/IN/than one/CD/one computer/NN/computer /:/( node/NN/node /:/) /,/, operation/NN/operation can/MD/can continue/NNP/continue. such/JJ/such a/DT/a facility/NN/facility is/VBZ/is commonly/RB/commonly known/VBN/known as/IN/as a/DT/a because/IN/because it/PRP/it is/VBZ/is computation-centric/JJ/computation-centric /./. in/IN/in contrast/NN/contrast /,/, systems/NNS/systems involve/VBP/involve running/VBG/running applications/NNS/applications that/WDT/that access/NN/access and/CC/and modify/NN/modify shared/VBD/shared data/NNP/data. as/IN/as a/DT/a result/NN/result /,/, data-centric/JJ/data-centric computing/NN/computing facilities/NNS/facilities are/VBP/are more/RBR/more difficult/JJ/difficult to/TO/to make/VB/make fault/NN/fault tolerant/NNP/tolerant. they/PRP/they failure-monitoring/JJ/failure-monitoring software/NN/software and/CC/and special/JJ/special infrastructure/NNP/infrastructure. for/IN/for instance/NN/instance /,/, such/JJ/such as/IN/as veritas/NNS/veritas cluster/NN/cluster and/CC/and sun/NN/sun cluster/NN/cluster include/NN/include two/CD/two or/CC/or more/JJR/more computers/NNS/computers and/CC/and a/DT/a set/NN/set of/IN/of shared/VBN/shared disks/NNP/disks. any/DT/any given/VBN/given application/NN/application can/MD/can be/VB/be stored/VBN/stored on/IN/on the/DT/the computers/NNS/computers or/CC/or on/IN/on the/DT/the shared/VBN/shared disk/NN/disk /,/, but/CC/but the/DT/the data/NNS/data must/MD/must be/VB/be stored/VBN/stored on/IN/on the/DT/the shared/VBN/shared disk/NNP/disk. the/DT/the running/VBG/running application/NN/application 's/POS/'s node/NN/node has/VBZ/has exclusive/JJ/exclusive access/NN/access to/TO/to the/DT/the application/NN/application 's/POS/'s data/NNS/data on/IN/on disk/NNP/disk. the/DT/the application/NN/application is/VBZ/is monitored/VBN/monitored by/IN/by the/DT/the cluster/NN/cluster software/NN/software /,/, and/CC/and if/IN/if it/PRP/it fails/VBZ/fails it/PRP/it is/VBZ/is automatically/RB/automatically restarted/VBN/restarted /./. if/IN/if it/PRP/it camwt/VBP/camwt be/VB/be restarted/VBN/restarted /,/, or/CC/or if/IN/if the/DT/the entire/JJ/entire computer/NN/computer fails/NNS/fails /,/, the/DT/the node/NN/node 's/POS/'s exclusive/JJ/exclusive access/NN/access to/TO/to the/DT/the application/NN/application 's/POS/'s data/NNS/data is/VBZ/is terminated/VBN/terminated and/CC/and is/VBZ/is granted/VBN/granted to/TO/to another/DT/another node/NN/node in/IN/in the/DT/the cluster/NNP/cluster. the/DT/the application/NN/application is/VBZ/is restarted/VBN/restarted on/IN/on that/DT/that new/JJ/new node/NNP/node. the/DT/the application/NN/application loses/VBZ/loses whatever/NN/whatever state/NN/state information/NN/information was/VBD/was in/IN/in the/DT/the failed/VBN/failed system/NN/system 's/POS/'s memory/NN/memory but/CC/but can/MD/can continue/VB/continue based/VBN/based on/IN/on whatever/NN/whatever state/NN/state it/PRP/it last/JJ/last wrote/NN/wrote to/TO/to the/DT/the shared/VBN/shared disk/NNP/disk. from/IN/from a/DT/a user/NN/user 's/POS/'s point/NN/point of/IN/of view/NN/view /,/, a/DT/a service/NN/service was/VBD/was interrupted/VBN/interrupted and/CC/and then/RB/then restarted/VBD/restarted /,/, possibly/RB/possibly with/IN/with some/DT/some data/NNS/data missing/VBG/missing /./. specific/JJ/specific applications/NNS/applications may/MD/may improve/VB/improve on/IN/on this/DT/this functionality/NN/functionality by/IN/by implementing/NN/implementing lock/NN/lock management/NN/management along/IN/along with/IN/with clustering/NNP/clustering. with/IN/with lock/NN/lock management/NN/management /:/( section/NN/section 18.4.1/CD/18.4.1 /CD/) /,/, the/DT/the application/NN/application can/MD/can run/VB/run on/IN/on multiple/NN/multiple nodes/NNS/nodes and/CC/and can/MD/can use/VB/use the/DT/the same/JJ/same data/NNS/data on/IN/on shared/VBN/shared disks/NNS/disks concurrently/NNP/concurrently. clustered/VBD/clustered databases/NNS/databases frequently/RB/frequently implement/JJ/implement this/DT/this functionality/NNP/functionality. if/IN/if anode/NN/anode fails/NNS/fails /,/, transactions/NNS/transactions can/MD/can continue/VB/continue on/IN/on other/JJ/other nodes/NNS/nodes /,/, and/CC/and users/NNS/users notice/NN/notice no/DT/no interruption/NN/interruption of/IN/of service/NN/service /,/, as/IN/as long/RB/long as/IN/as the/DT/the client/NN/client is/VBZ/is able/JJ/able to/TO/to automatically/RB/automatically locate/VB/locate the/DT/the other/JJ/other nodes/NNS/nodes in/IN/in the/DT/the cluster/NNP/cluster. any/DT/any noncommitted/VBN/noncommitted transactions/NNS/transactions on/IN/on the/DT/the failed/VBN/failed node/NN/node are/VBP/are lost/VBN/lost /,/, but/CC/but again/RB/again /,/, client/NN/client applications/NNS/applications can/MD/can be/VB/be designed/VBN/designed to/TO/to retry/NN/retry noncommitted/VBN/noncommitted transactions/NNS/transactions if/IN/if they/PRP/they detect/VBP/detect a/DT/a failure/NN/failure of/IN/of their/PRP$/their database/NN/database node/NN/node /./. making/VBG/making the/DT/the multiplicity/NN/multiplicity of/IN/of processors/NNS/processors and/CC/and storage/NN/storage devices/NNS/devices to/TO/to the/DT/the users/NNS/users has/VBZ/has been/VBN/been a/DT/a key/JJ/key challenge/NN/challenge to/TO/to many/JJ/many designers/NNP/designers. ideally/RB/ideally /,/, a/DT/a distributed/VBN/distributed system/NN/system should/MD/should look/VB/look to/TO/to its/PRP$/its users/NNS/users like/IN/like a/DT/a conventional/JJ/conventional /,/, centralized/VBN/centralized system/NNP/system. the/DT/the user/NN/user interface/NN/interface of/IN/of a/DT/a transparent/NN/transparent distributed/VBN/distributed system/NN/system should/MD/should not/RB/not distinguish/VB/distinguish between/IN/between local/JJ/local and/CC/and remote/VB/remote resources/NNP/resources. that/IN/that is/VBZ/is /,/, users/NNS/users should/MD/should be/VB/be able/JJ/able to/TO/to access/NN/access remote/VB/remote resources/NNS/resources as/IN/as though/IN/though these/DT/these resources/NNS/resources were/VBD/were local/JJ/local /,/, and/CC/and the/DT/the distributed/VBN/distributed system/NN/system should/MD/should be/VB/be responsible/JJ/responsible for/IN/for locating/NN/locating the/DT/the resources/NNS/resources and/CC/and for/IN/for arranging/NN/arranging for/IN/for the/DT/the appropriate/NN/appropriate interaction/NN/interaction /./. another/DT/another aspect/NN/aspect of/IN/of transparency/NN/transparency is/VBZ/is user/NN/user mobility/NNP/mobility. it/PRP/it would/MD/would be/VB/be convenient/JJ/convenient to/TO/to allow/VB/allow users/NNS/users to/TO/to log/VB/log into/IN/into any/DT/any machine/NN/machine in/IN/in the/DT/the system/NN/system rather/RB/rather than/IN/than forcing/NN/forcing them/PRP/them to/TO/to use/VB/use a/DT/a specific/JJ/specific machine/NNP/machine. a/DT/a transparent/NN/transparent distributed/VBN/distributed system/NN/system facilitates/NNS/facilitates user/NN/user mobility/NN/mobility by/IN/by bringiicg/NN/bringiicg over/IN/over the/DT/the user/NN/user 's/POS/'s environment/NN/environment /:/( for/IN/for example/NN/example /,/, home/NN/home directory/NN/directory /:/) to/TO/to wherever/VB/wherever he/PRP/he logs/VBZ/logs in/NNP/in. both/DT/both the/DT/the andrew/NN/andrew file/NN/file system/NN/system from/IN/from cmu/NN/cmu and/CC/and project/NN/project athena/NN/athena from/IN/from mit/NN/mit provide/NN/provide this/DT/this functionality/NN/functionality on/IN/on a/DT/a large/JJ/large scale/NN/scale ;/:/; nfs/NNS/nfs can/MD/can provide/VB/provide it/PRP/it on/IN/on a/DT/a smaller/JJR/smaller scale/NN/scale /./. still/RB/still another/DT/another issue/NN/issue is/VBZ/is l/NN/l ;/:/; /./. -the/JJ/-the capability/NN/capability of/IN/of a/DT/a system/NN/system to/TO/to adapt/VB/adapt to/TO/to increased/VBN/increased service/NN/service load/NNP/load. systems/NNS/systems have/VBP/have bounded/VBN/bounded resources/NNS/resources and/CC/and can/MD/can become/VB/become completely/RB/completely saturated/VBN/saturated under/IN/under increased/VBN/increased load/NNP/load. for/IN/for example/NN/example /,/, with/IN/with respect/NN/respect to/TO/to a/DT/a file/NN/file 698/CD/698 chapter/NN/chapter 16/CD/16 system/NN/system /,/, saturation/NN/saturation occurs/NNS/occurs either/CC/either when/WRB/when a/DT/a server/NN/server 's/POS/'s cpu/NN/cpu runs/VBZ/runs at/IN/at a/DT/a high/JJ/high utilization/NN/utilization rate/NN/rate or/CC/or when/WRB/when disks/NNS/disks are/VBP/are almost/RB/almost full/NNP/full. scalability/NN/scalability is/VBZ/is a/DT/a relative/JJ/relative property/NN/property /,/, but/CC/but it/PRP/it can/MD/can be/VB/be measured/VBN/measured accurately/-NONE-/accurately. a/DT/a scalable/JJ/scalable system/NN/system reacts/NNS/reacts more/RBR/more gracefully/RB/gracefully to/TO/to increased/VBN/increased load/NN/load than/IN/than does/VBZ/does a/DT/a nonscalable/JJ/nonscalable one/NNP/one. first/RB/first /,/, its/PRP$/its performance/NN/performance degrades/NNS/degrades more/RBR/more moderately/RB/moderately ;/:/; and/CC/and second/JJ/second /,/, its/PRP$/its resources/NNS/resources reach/VBP/reach a/DT/a saturated/VBN/saturated state/NN/state later/NNP/later. even/RB/even perfect/VB/perfect design/NN/design can/MD/can not/RB/not accommodate/VB/accommodate an/DT/an ever-growing/JJ/ever-growing load/NNP/load. adding/NN/adding new/JJ/new resources/NNS/resources might/MD/might solve/VB/solve the/DT/the problem/NN/problem /,/, but/CC/but it/PRP/it might/MD/might generate/VB/generate additional/JJ/additional indirect/JJ/indirect load/NN/load on/IN/on other/JJ/other resources/NNS/resources /:/( for/IN/for example/NN/example /,/, adding/NN/adding machines/NNS/machines to/TO/to a/DT/a distributed/VBN/distributed system/NN/system can/MD/can clog/VB/clog the/DT/the network/NN/network and/CC/and increase/VB/increase service/NN/service loads/NNS/loads /:/) /./. even/RB/even worse/JJR/worse /,/, expanding/VBG/expanding the/DT/the system/NN/system can/MD/can call/VB/call for/IN/for expensive/JJ/expensive design/NN/design modifications/NNP/modifications. a/DT/a scalable/JJ/scalable system/NN/system should/MD/should have/VB/have the/DT/the potential/JJ/potential to/TO/to grow/VB/grow without/IN/without these/DT/these problems/NNP/problems. in/IN/in a/DT/a distributed/VBN/distributed system/NN/system /,/, the/DT/the ability/NN/ability to/TO/to scale/VB/scale up/RP/up gracefully/RB/gracefully is/VBZ/is of/IN/of special/JJ/special importance/NN/importance /,/, since/IN/since expanding/VBG/expanding the/DT/the network/NN/network by/IN/by adding/NN/adding new/JJ/new machines/NNS/machines or/CC/or interconnecting/VBG/interconnecting two/CD/two networks/NNS/networks is/VBZ/is commonplace/NNP/commonplace. in/IN/in short/JJ/short /,/, a/DT/a scalable/JJ/scalable design/NN/design should/MD/should withstand/VB/withstand high/JJ/high service/NN/service load/NN/load /,/, accommodate/JJ/accommodate growth/NN/growth of/IN/of the/DT/the user/NN/user community/NN/community /,/, and/CC/and enable/JJ/enable simple/NN/simple integration/NN/integration of/IN/of added/VBN/added resources/NNS/resources /./. scalability/NN/scalability is/VBZ/is related/VBN/related to/TO/to fault/VB/fault tolerance/NN/tolerance /,/, discussed/VBD/discussed earlier/NNP/earlier. a/DT/a heavily/RB/heavily loaded/VBN/loaded component/NN/component can/MD/can become/VB/become paralyzed/VBN/paralyzed and/CC/and behave/VB/behave like/IN/like a/DT/a faulty/NN/faulty component/NNP/component. also/RB/also /,/, shifting/VBG/shifting the/DT/the load/NN/load from/IN/from a/DT/a faulty/NN/faulty component/NN/component to/TO/to that/DT/that component/NN/component 's/POS/'s backup/NN/backup can/MD/can saturate/VB/saturate the/DT/the latter/NNP/latter. generally/RB/generally /,/, having/VBG/having spare/NN/spare resources/NNS/resources is/VBZ/is essential/JJ/essential for/IN/for ensuring/NN/ensuring reliability/NN/reliability as/IN/as well/RB/well as/IN/as for/IN/for handling/NN/handling peak/NN/peak loads/NNS/loads gracefully/NNP/gracefully. an/DT/an inherent/JJ/inherent advantage/NN/advantage of/IN/of a/DT/a distributed/VBN/distributed system/NN/system is/VBZ/is a/DT/a potential/JJ/potential for/IN/for fault/NN/fault tolerance/NN/tolerance and/CC/and scalability/NN/scalability because/IN/because of/IN/of the/DT/the multiplicity/NN/multiplicity of/IN/of resources/NNP/resources. however/RB/however /,/, inappropriate/JJ/inappropriate design/NN/design can/MD/can obscure/VB/obscure this/DT/this potential/NNP/potential. fault-tolerance/NNP/fault-tolerance and/CC/and scalability/NN/scalability considerations/NNS/considerations call/VBP/call for/IN/for a/DT/a design/NN/design demonstrating/VBG/demonstrating distribution/NN/distribution of/IN/of control/NN/control and/CC/and data/NNS/data /./. very/RB/very large-scale/JJ/large-scale distributed/VBN/distributed systems/NNS/systems /,/, to/TO/to a/DT/a great/JJ/great extent/NN/extent /,/, are/VBP/are still/RB/still only/RB/only theoretical/NNP/theoretical. no/DT/no magic/NN/magic guidelines/NNS/guidelines ensure/VBP/ensure the/DT/the scalability/NN/scalability of/IN/of a/DT/a system/NNP/system. it/PRP/it is/VBZ/is easier/JJR/easier to/TO/to point/NN/point out/RP/out why/WRB/why current/JJ/current designs/NNS/designs are/VBP/are not/RB/not scalable/NNP/scalable. we/PRP/we next/JJ/next discuss/NN/discuss several/JJ/several designs/NNS/designs that/WDT/that pose/NN/pose problems/NNS/problems and/CC/and propose/VB/propose possible/JJ/possible solutions/NNS/solutions /,/, all/DT/all in/IN/in the/DT/the context/NN/context of/IN/of scalability/NN/scalability /./. one/CD/one principle/NN/principle for/IN/for designing/NN/designing very/RB/very large-scale/JJ/large-scale systems/NNS/systems is/VBZ/is that/IN/that the/DT/the service/NN/service demand/NN/demand from/IN/from any/DT/any component/NN/component of/IN/of the/DT/the system/NN/system should/MD/should be/VB/be bounded/VBN/bounded by/IN/by a/DT/a constant/JJ/constant that/IN/that is/VBZ/is independent/JJ/independent of/IN/of the/DT/the number/NN/number of/IN/of nodes/NNS/nodes in/IN/in the/DT/the system/NNP/system. any/DT/any service/NN/service mechanism/NN/mechanism whose/WP$/whose load/NN/load demand/NN/demand is/VBZ/is proportional/JJ/proportional to/TO/to the/DT/the size/NN/size of/IN/of the/DT/the system/NN/system is/VBZ/is destined/VBN/destined to/TO/to become/VB/become clogged/JJ/clogged once/NN/once the/DT/the system/NN/system grows/VBZ/grows beyond/IN/beyond a/DT/a certain/JJ/certain size/NN/size /./. adding/VBG/adding more/JJR/more resources/NNS/resources will/MD/will not/RB/not alleviate/VB/alleviate such/JJ/such a/DT/a problem/NNP/problem. the/DT/the capacity/NN/capacity of/IN/of this/DT/this mechanism/NN/mechanism simply/RB/simply limits/VBZ/limits the/DT/the growth/NN/growth of/IN/of the/DT/the system/NN/system /./. another/DT/another principle/NN/principle concerns/NNS/concerns centralization/NNP/centralization. central/JJ/central control/NN/control schemes/NNS/schemes and/CC/and central/JJ/central resources/NNS/resources should/MD/should not/RB/not be/VB/be used/VBN/used to/TO/to build/VB/build scalable/JJ/scalable /NN/( and/CC/and fault-tolerant/JJ/fault-tolerant /NN/) systems/NNP/systems. examples/NNS/examples of/IN/of centralized/JJ/centralized entities/NNS/entities are/VBP/are central/JJ/central authentication/NN/authentication servers/NNS/servers /,/, central/JJ/central naming/NN/naming servers/NNS/servers /,/, and/CC/and central/JJ/central file/NN/file servers/NNP/servers. centralization/NN/centralization is/VBZ/is a/DT/a form/NN/form of/IN/of functional/JJ/functional asyrrunetry/NN/asyrrunetry among/IN/among machines/NNS/machines constituting/VBG/constituting the/DT/the system/NNP/system. the/DT/the ideal/NN/ideal alternative/NN/alternative is/VBZ/is a/DT/a functionally/RB/functionally symmetric/JJ/symmetric configuration/NN/configuration ;/:/; that/DT/that is/VBZ/is /,/, all/DT/all the/DT/the component/NN/component machines/NNS/machines have/VBP/have an/DT/an equal/JJ/equal role/NN/role in/IN/in the/DT/the operation/NN/operation of/IN/of the/DT/the system/NN/system /,/, and/CC/and hence/NN/hence each/DT/each machine/NN/machine has/VBZ/has some/DT/some degree/NN/degree of/IN/of autonomy/NNP/autonomy. practically/RB/practically /,/, it/PRP/it is/VBZ/is virtually/RB/virtually impossible/JJ/impossible to/TO/to comply/RB/comply with/IN/with such/JJ/such a/DT/a principle/NNP/principle. for/IN/for instance/NN/instance /,/, incorporating/VBG/incorporating diskless/NN/diskless machines/NNS/machines violates/VBZ/violates functional/JJ/functional symmetry/NN/symmetry /,/, since/IN/since the/DT/the workstations/NNS/workstations depend/VBP/depend on/IN/on a/DT/a central/JJ/central disk/NN/disk however/RB/however /,/, autonomy/NN/autonomy and/CC/and symmetry/NN/symmetry are/VBP/are important/JJ/important goals/NNS/goals to/TO/to which/WDT/which we/PRP/we should/MD/should aspire/VB/aspire /./. deciding/VBG/deciding on/IN/on the/DT/the process/NN/process structure/NN/structure of/IN/of the/DT/the server/NN/server is/VBZ/is a/DT/a major/JJ/major problem/NN/problem in/IN/in the/DT/the design/NN/design of/IN/of any/DT/any service/NNP/service. servers/NNS/servers are/VBP/are supposed/VBN/supposed to/TO/to operate/VB/operate efficiently/RB/efficiently in/IN/in peak/NN/peak 16.9/CD/16.9 16.9/CD/16.9 699/CD/699 periods/NNS/periods /,/, when/WRB/when hundreds/NNS/hundreds of/IN/of active/JJ/active clients/NNS/clients need/VBP/need to/TO/to be/VB/be served/VBN/served simultaneously/-NONE-/simultaneously. a/DT/a single-process/JJ/single-process server/NN/server is/VBZ/is certainly/RB/certainly not/RB/not a/DT/a good/JJ/good choice/NN/choice /,/, since/IN/since whenever/NN/whenever a/DT/a request/NN/request necessitates/VBZ/necessitates disk/NN/disk i/0/-NONE-/i/0 /,/, the/DT/the whole/JJ/whole service/NN/service will/MD/will be/VB/be blocked/NNP/blocked. assigning/NN/assigning a/DT/a process/NN/process for/IN/for each/DT/each client/NN/client is/VBZ/is a/DT/a better/JJR/better choice/NN/choice ;/:/; however/RB/however /,/, the/DT/the expense/NN/expense of/IN/of frequent/NN/frequent context/NN/context switches/NNS/switches between/IN/between the/DT/the processes/NNS/processes must/MD/must be/VB/be considered/NNP/considered. a/DT/a related/JJ/related problem/NN/problem occurs/NNS/occurs because/IN/because all/DT/all the/DT/the server/NN/server processes/NNS/processes need/VBP/need to/TO/to share/VB/share information/NN/information /./. one/CD/one of/IN/of the/DT/the best/JJS/best solutions/NNS/solutions for/IN/for the/DT/the server/NN/server architecture/NN/architecture is/VBZ/is the/DT/the use/NN/use of/IN/of lightweight/NN/lightweight processes/NNS/processes /,/, or/CC/or threads/NNS/threads /,/, which/WDT/which we/PRP/we discuss/VBP/discuss in/IN/in chapter/NN/chapter 4/CD/4. we/PRP/we can/MD/can think/VB/think of/IN/of a/DT/a group/NN/group of/IN/of lightweight/NN/lightweight processes/NNS/processes as/IN/as multiple/JJ/multiple threads/NNS/threads of/IN/of control/NN/control associated/VBN/associated with/IN/with some/DT/some shared/VBN/shared resources/NNP/resources. usually/RB/usually /,/, a/DT/a lightweight/NN/lightweight process/NN/process is/VBZ/is not/RB/not bound/VBN/bound to/TO/to a/DT/a particular/JJ/particular client/NNP/client. instead/RB/instead /,/, it/PRP/it serves/VBZ/serves single/JJ/single requests/NNS/requests of/IN/of different/JJ/different clients/NNP/clients. scheduling/NN/scheduling of/IN/of threads/NNS/threads can/MD/can be/VB/be preemptive/JJ/preemptive or/CC/or nonpreemptive/NNP/nonpreemptive. if/IN/if threads/NNS/threads are/VBP/are allowed/VBN/allowed to/TO/to run/VB/run to/TO/to completion/NN/completion /:/( nonpreemptive/JJ/nonpreemptive /NN/) /,/, then/RB/then their/PRP$/their shared/VBN/shared data/NNS/data do/VBP/do not/RB/not need/VB/need to/TO/to be/VB/be protected/VBN/protected explicitly/-NONE-/explicitly. otherwise/RB/otherwise /,/, some/DT/some explicit/NN/explicit locking/VBG/locking mechanism/NN/mechanism must/MD/must be/VB/be used/VBN/used /./. clearly/RB/clearly /,/, some/DT/some form/NN/form of/IN/of lightweight-process/JJ/lightweight-process scheme/NN/scheme is/VBZ/is essential/JJ/essential if/IN/if servers/NNS/servers are/VBP/are to/TO/to be/VB/be scalable/JJ/scalable /./. we/PRP/we now/RB/now return/VBP/return to/TO/to the/DT/the name-resolution/NN/name-resolution issue/NN/issue raised/VBD/raised in/IN/in section/NN/section 16.5.1/CD/16.5.1 and/CC/and examine/NN/examine its/PRP$/its operation/NN/operation with/IN/with respect/NN/respect to/TO/to the/DT/the tcf/NN/tcf /if/-NONE-//if protocol/NN/protocol stack/NN/stack on/IN/on the/DT/the internet/NN/internet /./. we/PRP/we consider/VBP/consider the/DT/the processing/NN/processing needed/VBD/needed to/TO/to transfer/VB/transfer a/DT/a packet/NN/packet between/IN/between hosts/NNS/hosts on/IN/on different/JJ/different ethernet/NN/ethernet networks/NNS/networks /./. in/IN/in a/DT/a tcf/NN/tcf /if/JJ//if network/NN/network /,/, every/DT/every host/NN/host has/VBZ/has a/DT/a name/NN/name and/CC/and an/DT/an associated/VBN/associated if/IN/if address/NN/address /:/( or/CC/or host-id/JJ/host-id /NN/) /./. both/DT/both of/IN/of these/DT/these strings/NNS/strings must/MD/must be/VB/be unique/JJ/unique ;/:/; and/CC/and so/RB/so that/IN/that the/DT/the name/NN/name space/NN/space can/MD/can be/VB/be managed/VBN/managed /,/, they/PRP/they are/VBP/are segmented/NNP/segmented. the/DT/the name/NN/name is/VBZ/is hierarchical/JJ/hierarchical /NN/( as/IN/as explained/VBN/explained in/IN/in section/NN/section 16.5.1/CD/16.5.1 /CD/) /,/, describing/VBG/describing the/DT/the host/NN/host name/NN/name and/CC/and then/RB/then the/DT/the organization/NN/organization with/IN/with which/WDT/which the/DT/the host/NN/host is/VBZ/is associated/NNP/associated. the/DT/the host-id/JJ/host-id is/VBZ/is split/VBN/split into/IN/into a/DT/a network/NN/network number/NN/number and/CC/and a/DT/a host/NN/host number/NNP/number. the/DT/the proportion/NN/proportion of/IN/of the/DT/the split/NN/split varies/NNS/varies /,/, depending/VBG/depending on/IN/on the/DT/the size/NN/size of/IN/of the/DT/the network/NNP/network. once/RB/once the/DT/the internet/NN/internet adrninistrators/NNS/adrninistrators assign/VBP/assign a/DT/a network/NN/network number/NN/number /,/, the/DT/the site/NN/site with/IN/with that/DT/that number/NN/number is/VBZ/is free/JJ/free to/TO/to assign/VB/assign host-ids/NNS/host-ids /./. the/DT/the sending/NN/sending system/NN/system checks/NNS/checks its/PRP$/its routing/NN/routing tables/NNS/tables to/TO/to locate/VB/locate a/DT/a router/NN/router to/TO/to send/VB/send the/DT/the frame/NN/frame on/IN/on its/PRP$/its way/NNP/way. the/DT/the routers/NNS/routers use/VBP/use the/DT/the network/NN/network part/NN/part of/IN/of the/DT/the host-id/JJ/host-id to/TO/to transfer/VB/transfer the/DT/the packet/NN/packet from/IN/from its/PRP$/its source/NN/source network/NN/network to/TO/to the/DT/the destination/NN/destination network/NNP/network. the/DT/the destination/NN/destination system/NN/system then/RB/then receives/VBZ/receives the/DT/the packet/NNP/packet. the/DT/the packet/NN/packet may/MD/may be/VB/be a/DT/a complete/JJ/complete message/NN/message /,/, or/CC/or it/PRP/it may/MD/may just/RB/just be/VB/be a/DT/a component/NN/component of/IN/of a/DT/a message/NN/message /,/, with/IN/with more/JJR/more packets/NNS/packets needed/VBN/needed before/IN/before the/DT/the message/NN/message can/MD/can be/VB/be reassembled/VBN/reassembled and/CC/and passed/VBD/passed to/TO/to the/DT/the tcf/NN/tcf /udf/NN//udf layer/NN/layer for/IN/for transmission/NN/transmission to/TO/to the/DT/the destination/NN/destination process/NN/process /./. now/RB/now we/PRP/we know/VBP/know how/WRB/how a/DT/a packet/NN/packet moves/VBZ/moves from/IN/from its/PRP$/its source/NN/source network/NN/network to/TO/to its/PRP$/its destination/NNP/destination. within/IN/within a/DT/a network/NN/network /,/, how/WRB/how does/VBZ/does a/DT/a packet/NN/packet move/NN/move from/IN/from sender/NN/sender /:/( host/NN/host or/CC/or router/NN/router /:/) to/TO/to receiver/VB/receiver ethernet/JJ/ethernet device/NN/device has/VBZ/has a/DT/a unique/JJ/unique byte/NN/byte number/NN/number /,/, called/VBN/called the/DT/the assigned/VBN/assigned to/TO/to it/PRP/it for/IN/for addressing/NNP/addressing. two/CD/two devices/NNS/devices on/IN/on a/DT/a lan/NN/lan communicate/NN/communicate with/IN/with each/DT/each other/JJ/other only/RB/only with/IN/with this/DT/this number/NNP/number. if/IN/if a/DT/a system/NN/system needs/VBZ/needs to/TO/to send/VB/send data/NNS/data to/TO/to another/DT/another system/NN/system /,/, the/DT/the networking/NN/networking software/NN/software generates/VBZ/generates an/DT/an containing/VBG/containing the/DT/the if/IN/if address/NN/address of/IN/of the/DT/the destination/NN/destination system/NNP/system. this/DT/this packet/NN/packet is/VBZ/is to/TO/to all/DT/all other/JJ/other systems/NNS/systems on/IN/on that/DT/that ethernet/NN/ethernet network/NN/network /./. a/DT/a broadcast/NN/broadcast uses/VBZ/uses a/DT/a special/JJ/special network/NN/network address/NN/address /:/( usually/RB/usually /,/, the/DT/the maximum/NN/maximum address/NN/address /:/) to/TO/to signal/VB/signal that/IN/that all/DT/all hosts/NNS/hosts should/MD/should receive/VB/receive and/CC/and process/NN/process the/DT/the packet/NNP/packet. the/DT/the 700/CD/700 chapter/NN/chapter 16/CD/16 broadcast/NN/broadcast is/VBZ/is not/RB/not re-sent/JJ/re-sent by/IN/by gateways/NNS/gateways /,/, so/RB/so only/RB/only systems/VBZ/systems on/IN/on the/DT/the local/JJ/local network/NN/network receive/JJ/receive it/NNP/it. only/RB/only the/DT/the system/NN/system whose/WP$/whose ip/NN/ip address/NN/address matches/NNS/matches the/DT/the ip/NN/ip address/NN/address of/IN/of the/DT/the arp/NN/arp request/NN/request responds/NNS/responds and/CC/and sends/NNS/sends back/RB/back its/PRP$/its mac/NN/mac address/NN/address to/TO/to the/DT/the system/NN/system that/IN/that initiated/VBN/initiated the/DT/the query/NNP/query. for/IN/for efficiency/NN/efficiency /,/, the/DT/the host/NN/host caches/VBZ/caches the/DT/the ip-mac/JJ/ip-mac address/NN/address pair/NN/pair in/IN/in an/DT/an internal/JJ/internal table/NNP/table. the/DT/the cache/NN/cache entries/NNS/entries are/VBP/are so/RB/so that/IN/that an/DT/an entry/NN/entry is/VBZ/is eventually/RB/eventually removed/VBN/removed from/IN/from the/DT/the cache/NN/cache if/IN/if an/DT/an access/NN/access to/TO/to that/DT/that system/NN/system is/VBZ/is not/RB/not required/VBN/required within/IN/within a/DT/a given/VBN/given time/NNP/time. in/IN/in this/DT/this way/NN/way /,/, hosts/NNS/hosts that/WDT/that are/VBP/are removed/VBN/removed from/IN/from a/DT/a network/NN/network are/VBP/are eventually/RB/eventually forgotten/NNP/forgotten. for/IN/for added/VBD/added performance/NN/performance /,/, arp/JJ/arp entries/NNS/entries for/IN/for heavily/RB/heavily used/VBN/used hosts/NNS/hosts may/MD/may be/VB/be hardwired/VBN/hardwired in/IN/in the/DT/the arp/NN/arp cache/NN/cache /./. once/RB/once an/DT/an ethernet/NN/ethernet device/NN/device has/VBZ/has announced/VBN/announced its/PRP$/its host-id/JJ/host-id and/CC/and address/NN/address /,/, communication/NN/communication can/MD/can begin/NNP/begin. a/DT/a process/NN/process may/MD/may specify/VB/specify the/DT/the name/NN/name of/IN/of a/DT/a host/NN/host with/IN/with which/WDT/which to/TO/to communicate/NNP/communicate. networking/NN/networking software/NN/software takes/VBZ/takes that/IN/that name/NN/name and/CC/and determines/NNS/determines the/DT/the ip/NN/ip address/NN/address of/IN/of the/DT/the target/NN/target /,/, using/VBG/using a/DT/a dns/NNS/dns lookup/NNP/lookup. the/DT/the message/NN/message is/VBZ/is passed/VBN/passed from/IN/from the/DT/the application/NN/application laye1/NNP/laye1 ~/NNP/~ through/IN/through the/DT/the software/NN/software layers/NNS/layers /,/, and/CC/and to/TO/to the/DT/the hardware/NN/hardware layer/NNP/layer. at/IN/at the/DT/the hardware/NN/hardware layer/NN/layer /,/, the/DT/the packet/NN/packet /:/( or/CC/or packets/NNS/packets /:/) has/VBZ/has the/DT/the ethernet/NN/ethernet address/NN/address at/IN/at its/PRP$/its start/NN/start ;/:/; a/DT/a trailer/NN/trailer indicates/VBZ/indicates the/DT/the end/NN/end of/IN/of the/DT/the packet/NN/packet and/CC/and contains/VBZ/contains a/DT/a for/IN/for detection/NN/detection of/IN/of packet/NN/packet damage/NN/damage /:/( figure/NN/figure 16.10/CD/16.10 /CD/) /./. the/DT/the packet/NN/packet is/VBZ/is placed/VBN/placed on/IN/on the/DT/the network/NN/network by/IN/by the/DT/the ethernet/NN/ethernet device/NNP/device. the/DT/the data/NNS/data section/NN/section of/IN/of the/DT/the packet/NN/packet may/MD/may contain/VB/contain some/DT/some or/CC/or all/DT/all of/IN/of the/DT/the data/NNS/data of/IN/of the/DT/the original/JJ/original message/NN/message /,/, but/CC/but it/PRP/it may/MD/may also/RB/also contain/VB/contain some/DT/some of/IN/of the/DT/the upper-level/JJ/upper-level headers/NNS/headers that/WDT/that compose/NN/compose the/DT/the message/NNP/message. in/IN/in other/JJ/other words/NNS/words /,/, all/DT/all parts/NNS/parts of/IN/of the/DT/the original/JJ/original message/NN/message must/MD/must be/VB/be sent/VBN/sent from/IN/from source/NN/source to/TO/to destination/NN/destination /,/, and/CC/and all/DT/all headers/NNS/headers above/IN/above the/DT/the 802.3layer/JJ/802.3layer /NN/( data-link/NN/data-link layer/NN/layer /:/) are/VBP/are included/VBN/included as/IN/as data/NNS/data in/IN/in the/DT/the ethernet/NN/ethernet packets/NNS/packets /./. if/IN/if the/DT/the destination/NN/destination is/VBZ/is on/IN/on the/DT/the same/JJ/same local/JJ/local network/NN/network as/IN/as the/DT/the source/NN/source /,/, the/DT/the system/NN/system can/MD/can look/VB/look in/IN/in its/PRP$/its arp/NN/arp cache/NN/cache /,/, find/VBP/find the/DT/the ethernet/NN/ethernet address/NN/address of/IN/of the/DT/the host/NN/host /,/, and/CC/and place/NN/place the/DT/the packet/NN/packet on/IN/on the/DT/the wire/NNP/wire. the/DT/the destination/NN/destination ethernet/NN/ethernet device/NN/device then/RB/then sees/VBZ/sees its/PRP$/its address/NN/address in/IN/in the/DT/the packet/NN/packet and/CC/and reads/NNS/reads in/IN/in the/DT/the packet/NN/packet passing/VBG/passing it/PRP/it up/RP/up the/DT/the protocol/NN/protocol stack/NN/stack /./. if/IN/if the/DT/the destination/NN/destination system/NN/system is/VBZ/is on/IN/on a/DT/a network/NN/network different/NN/different from/IN/from that/DT/that of/IN/of the/DT/the source/NN/source /,/, the/DT/the source/NN/source system/NN/system finds/NNS/finds an/DT/an appropriate/JJ/appropriate router/NN/router on/IN/on its/PRP$/its network/NN/network and/CC/and sends/NNS/sends the/DT/the packet/NN/packet there/NNP/there. routers/NNS/routers then/RB/then pass/VBP/pass the/DT/the packet/NN/packet along/IN/along the/DT/the wan/NN/wan 1-mtil/CD/1-mtil it/PRP/it reaches/VBZ/reaches its/PRP$/its bytes/NNS/bytes 7/CD/7 2/CD/2 or/CC/or 6/CD/6 2/CD/2 or/CC/or 6/CD/6 2/CD/2 0-1500/CD/0-1500 0-46/CD/0-46 4/CD/4 pt.e/JJ/pt.e ~/NN/~ ~/:/~ n1bh/NNP/n1bh /:/: l/NNP/l. ~/:/~ s.tartfc1ft/JJ/s.tartfc1ft /:/: r/NN/r =/:/= ccll/NN/ccll et/NN/et /:/( 1/CD/1 each/DT/each byte/NN/byte pattern/NN/pattern 1010101/CD/1010101 o/NN/o data/NNS/data pattern/NN/pattern 10101011/CD/10101011 ethernet/NN/ethernet address/NN/address or/CC/or broadcast/JJ/broadcast ethernet/NN/ethernet address/NN/address length/NN/length in/IN/in bytes/NNS/bytes message/NN/message data/NNS/data message/NN/message must/MD/must be/VB/be 63/CD/63 bytes/NNS/bytes long/RB/long for/IN/for error/NN/error detection/NN/detection figure/NN/figure i/PRP/i 6.10/CD/6.10 an/DT/an ethernet/NN/ethernet packet/NN/packet /./. 16.10/CD/16.10 701/CD/701 destination/NN/destination network/NNP/network. the/DT/the router/NN/router that/IN/that connects/NNS/connects the/DT/the destination/NN/destination network/NN/network checks/NNS/checks its/PRP$/its arp/NN/arp cache/NN/cache /,/, finds/NNS/finds the/DT/the ethernet/NN/ethernet number/NN/number of/IN/of the/DT/the destination/NN/destination /,/, and/CC/and sends/NNS/sends the/DT/the packet/NN/packet to/TO/to that/DT/that host/NNP/host. through/IN/through all/DT/all of/IN/of these/DT/these transfers/NNS/transfers /,/, the/DT/the data-link-layer/NN/data-link-layer header/NN/header may/MD/may change/VB/change as/IN/as the/DT/the ethernet/NN/ethernet address/NN/address of/IN/of the/DT/the next/JJ/next router/NN/router in/IN/in the/DT/the chain/NN/chain is/VBZ/is used/VBN/used /,/, but/CC/but the/DT/the other/JJ/other headers/NNS/headers of/IN/of the/DT/the packet/NN/packet remain/NN/remain the/DT/the same/JJ/same until/IN/until the/DT/the packet/NN/packet is/VBZ/is received/VBN/received and/CC/and processed/VBN/processed by/IN/by the/DT/the protocol/NN/protocol stack/NN/stack and/CC/and finally/RB/finally passed/VBD/passed to/TO/to the/DT/the receiving/NN/receiving process/NN/process by/IN/by the/DT/the kernel/NN/kernel /./. a/DT/a distributed/VBN/distributed system/NN/system is/VBZ/is a/DT/a collection/NN/collection of/IN/of processors/NNS/processors that/WDT/that do/VBP/do not/RB/not share/VB/share memory/NN/memory or/CC/or a/DT/a clock/NNP/clock. instead/RB/instead /,/, each/DT/each processor/NN/processor has/VBZ/has its/PRP$/its own/JJ/own local/JJ/local memory/NN/memory /,/, and/CC/and the/DT/the processors/NNS/processors communicate/VBP/communicate with/IN/with one/CD/one another/DT/another through/IN/through various/JJ/various communication/NN/communication lines/NNS/lines /,/, such/JJ/such as/IN/as high-speed/JJ/high-speed buses/NNS/buses and/CC/and telephone/NN/telephone lines/NNP/lines. the/DT/the processors/NNS/processors in/IN/in a/DT/a distributed/VBN/distributed system/NN/system vary/NN/vary in/IN/in size/NN/size and/CC/and function/NNP/function. they/PRP/they may/MD/may include/VB/include small/JJ/small microprocessors/NNS/microprocessors /,/, workstations/NNS/workstations /,/, minicomputers/NNS/minicomputers /,/, and/CC/and large/JJ/large general-purpose/JJ/general-purpose computer/NN/computer systems/NNS/systems /./. the/DT/the processors/NNS/processors in/IN/in the/DT/the system/NN/system are/VBP/are connected/VBN/connected through/IN/through a/DT/a communication/NN/communication network/NN/network /,/, which/WDT/which can/MD/can be/VB/be configured/VBN/configured in/IN/in a/DT/a number/NN/number of/IN/of ways/NNP/ways. the/DT/the network/NN/network may/MD/may be/VB/be fully/RB/fully or/CC/or partially/RB/partially connected/NNP/connected. it/PRP/it may/MD/may be/VB/be a/DT/a tree/NN/tree /,/, a/DT/a star/NN/star /,/, a/DT/a ring/NN/ring /,/, or/CC/or a/DT/a multiaccess/NN/multiaccess bus/NNP/bus. the/DT/the communication-network/NNP/communication-network design/NN/design must/MD/must include/VB/include routing/NN/routing and/CC/and com1ection/NNP/com1ection strategies/NNS/strategies /,/, and/CC/and it/PRP/it must/MD/must solve/VB/solve the/DT/the problems/NNS/problems of/IN/of contention/NN/contention and/CC/and security/NN/security /./. a/DT/a distributed/VBN/distributed system/NN/system provides/VBZ/provides the/DT/the user/NN/user with/IN/with access/NN/access to/TO/to the/DT/the resources/NNS/resources the/DT/the system/NN/system provides/NNP/provides. access/NN/access to/TO/to a/DT/a shared/VBN/shared resource/NN/resource can/MD/can be/VB/be provided/VBN/provided by/IN/by data/NNS/data migration/NN/migration /,/, computation/NN/computation migration/NN/migration /,/, or/CC/or process/NN/process migration/NN/migration /./. protocol/NN/protocol stacks/NNS/stacks /,/, as/IN/as specified/VBN/specified by/IN/by network/NN/network layering/VBG/layering models/NNS/models /,/, massage/NN/massage the/DT/the message/NN/message /,/, adding/VBG/adding information/NN/information to/TO/to it/PRP/it to/TO/to ensure/VB/ensure that/IN/that it/PRP/it reaches/VBZ/reaches its/PRP$/its destination/NNP/destination. a/DT/a naming/NN/naming system/NN/system /:/( such/JJ/such as/IN/as dns/NNS/dns /:/) must/MD/must be/VB/be used/VBN/used to/TO/to translate/VB/translate from/IN/from a/DT/a host/NN/host name/NN/name to/TO/to a/DT/a network/NN/network address/NN/address /,/, and/CC/and another/DT/another protocol/NN/protocol /:/( such/JJ/such as/IN/as arp/JJ/arp /NN/) may/MD/may be/VB/be needed/VBN/needed to/TO/to translate/VB/translate the/DT/the network/NN/network number/NN/number to/TO/to a/DT/a network/NN/network device/NN/device address/NN/address /:/( an/DT/an ethernet/NN/ethernet address/NN/address /,/, for/IN/for instance/NN/instance /:/) /./. if/IN/if systems/NNS/systems are/VBP/are located/VBN/located on/IN/on separate/JJ/separate networks/NNS/networks /,/, routers/NNS/routers are/VBP/are needed/VBN/needed to/TO/to pass/VB/pass packets/NNS/packets from/IN/from source/NN/source network/NN/network to/TO/to destination/NN/destination network/NN/network /./. a/DT/a distributed/VBN/distributed system/NN/system may/MD/may suffer/VB/suffer from/IN/from various/JJ/various types/NNS/types of/IN/of hardware/NN/hardware failure/NN/failure /./. for/IN/for a/DT/a distributed/VBN/distributed system/NN/system to/TO/to be/VB/be fault/VBN/fault tolerant/JJ/tolerant /,/, it/PRP/it must/MD/must detect/VB/detect hardware/NN/hardware failures/NNS/failures and/CC/and reconfigure/NN/reconfigure the/DT/the system/NNP/system. when/WRB/when the/DT/the failure/NN/failure is/VBZ/is repaired/VBN/repaired /,/, the/DT/the system/NN/system must/MD/must be/VB/be reconfigured/VBN/reconfigured again/RB/again /./. 16.1/CD/16.1 what/WP/what are/VBP/are the/DT/the advantages/NNS/advantages of/IN/of using/VBG/using dedicated/VBN/dedicated hardware/NN/hardware devices/NNS/devices for/IN/for routers/NNS/routers and/CC/and gateways/NNS/gateways what/WP/what are/VBP/are the/DT/the disadvantages/NNS/disadvantages of/IN/of using/VBG/using these/DT/these devices/NNS/devices compared/VBN/compared with/IN/with using/VBG/using general-purpose/JJ/general-purpose computers/NNS/computers 16.2/CD/16.2 why/WRB/why would/MD/would it/PRP/it be/VB/be a/DT/a bad/JJ/bad idea/NN/idea for/IN/for gateways/NNS/gateways to/TO/to pass/VB/pass broadcast/JJ/broadcast packets/NNS/packets between/IN/between networks/NNS/networks what/WP/what would/MD/would be/VB/be the/DT/the advantages/NNS/advantages of/IN/of doing/VBG/doing so/RB/so 16.3/CD/16.3 consider/NN/consider a/DT/a network/NN/network layer/NN/layer that/WDT/that senses/VBZ/senses collisions/NNS/collisions and/CC/and retransmits/NNS/retransmits immediately/RB/immediately on/IN/on detection/NN/detection of/IN/of a/DT/a collision/NNP/collision. what/WP/what problems/NNS/problems could/MD/could arise/VB/arise with/IN/with this/DT/this strategy/NN/strategy how/WRB/how could/MD/could they/PRP/they be/VB/be rectified/VBN/rectified 702/CD/702 chapter/NN/chapter 16/CD/16 16.4/CD/16.4 even/RB/even though/IN/though the/DT/the iso/NN/iso model/NN/model of/IN/of networking/NN/networking specifies/NNS/specifies seven/CD/seven layers/NNS/layers of/IN/of functionality/NN/functionality /,/, most/JJS/most computer/NN/computer systems/NNS/systems use/VBP/use fewer/JJR/fewer layers/NNS/layers to/TO/to implement/VB/implement a/DT/a network/NNP/network. why/WRB/why do/VBP/do they/PRP/they use/VBP/use fewer/JJR/fewer layers/NNS/layers what/WP/what problems/NNS/problems could/MD/could the/DT/the use/NN/use of/IN/of fewer/JJR/fewer layers/NNS/layers cause/VBP/cause 16.5/CD/16.5 the/DT/the lower/JJR/lower layers/NNS/layers of/IN/of the/DT/the iso/NN/iso network/NN/network model/NN/model provide/VB/provide datagram/NN/datagram service/NN/service /,/, with/IN/with no/DT/no delivery/NN/delivery guarantees/NNS/guarantees for/IN/for messages/NNP/messages. a/DT/a transport-layer/NN/transport-layer protocol/NN/protocol such/JJ/such as/IN/as tcp/NN/tcp is/VBZ/is used/VBN/used to/TO/to provide/VB/provide reliability/NNP/reliability. discuss/NN/discuss the/DT/the advantages/NNS/advantages and/CC/and disadvantages/NNS/disadvantages of/IN/of supporting/VBG/supporting reliable/JJ/reliable message/NN/message delivery/NN/delivery at/IN/at the/DT/the lowest/JJS/lowest possible/JJ/possible layer/NN/layer /./. 16.6/CD/16.6 what/WP/what are/VBP/are the/DT/the advantages/NNS/advantages and/CC/and the/DT/the disadvantages/NNS/disadvantages of/IN/of making/VBG/making the/DT/the computer/NN/computer network/NN/network transparent/NN/transparent to/TO/to the/DT/the user/NN/user 16.7/CD/16.7 under/IN/under what/WP/what circumstances/NNS/circumstances is/VBZ/is a/DT/a token-passing/JJ/token-passing network/NN/network more/RBR/more effective/JJ/effective than/IN/than an/DT/an ethernet/NN/ethernet network/NN/network 16.8/CD/16.8 process/NN/process migration/NN/migration within/IN/within a/DT/a heterogeneous/JJ/heterogeneous network/NN/network is/VBZ/is usually/RB/usually impossible/JJ/impossible /,/, given/VBN/given the/DT/the differences/NNS/differences in/IN/in architectures/NNS/architectures and/CC/and operating/NN/operating systems/NNS/systems /./. describe/NN/describe a/DT/a method/NN/method for/IN/for process/NN/process migration/NN/migration across/IN/across different/JJ/different architectures/NNS/architectures running/VBG/running /:/: a/NNP/a. the/DT/the same/JJ/same operating/NN/operating system/NN/system b/NNP/b. different/NN/different operating/VBG/operating systems/NNS/systems 16.9/CD/16.9 contrast/NN/contrast the/DT/the various/JJ/various network/NN/network topologies/NNS/topologies in/IN/in terms/NNS/terms of/IN/of the/DT/the following/JJ/following attributes/NNS/attributes /:/: a/NNP/a. reliability/NN/reliability b/NNP/b. available/JJ/available bandwidth/NN/bandwidth for/IN/for concurrent/NN/concurrent communications/NNS/communications c/NNP/c. installation/NN/installation cost/NN/cost d/NNP/d. load/NN/load balance/NN/balance in/IN/in routing/NN/routing responsibilities/NNS/responsibilities 16.10/CD/16.10 how/WRB/how does/VBZ/does using/VBG/using a/DT/a dynamic/JJ/dynamic routing/NN/routing strategy/NN/strategy affect/NN/affect application/NN/application behavior/NN/behavior for/IN/for what/WP/what type/NN/type of/IN/of applications/NNS/applications is/VBZ/is it/PRP/it beneficial/JJ/beneficial to/TO/to use/VB/use virtual/JJ/virtual routing/NN/routing instead/RB/instead of/IN/of dynamic/JJ/dynamic routing/NN/routing 16.11/CD/16.11 the/DT/the original/JJ/original http/NN/http protocol/NN/protocol used/VBD/used tcp/NN/tcp /ip/NN//ip as/IN/as the/DT/the underlying/VBG/underlying network/NN/network protocol/NNP/protocol. for/IN/for each/DT/each page/NN/page /,/, graphic/JJ/graphic /,/, or/CC/or applet/VB/applet /,/, a/DT/a separate/JJ/separate tcp/NN/tcp session/NN/session was/VBD/was constructed/VBN/constructed /,/, used/VBN/used /,/, and/CC/and torn/NN/torn down/NNP/down. because/IN/because of/IN/of the/DT/the overhead/JJ/overhead of/IN/of building/NN/building and/CC/and destroying/VBG/destroying tcp/NN/tcp lip/NN/lip connections/NNS/connections /,/, performance/NN/performance problems/NNS/problems resulted/VBD/resulted from/IN/from this/DT/this implementation/NN/implementation method/NNP/method. would/MD/would using/VBG/using udp/VB/udp rather/RB/rather than/IN/than tcp/NN/tcp be/VB/be a/DT/a good/JJ/good alternative/NN/alternative what/WP/what other/JJ/other changes/NNS/changes could/MD/could you/PRP/you make/VB/make to/TO/to improve/VB/improve http/NN/http performance/NN/performance 16.12/CD/16.12 what/WP/what are/VBP/are the/DT/the advantages/NNS/advantages and/CC/and disadvantages/NNS/disadvantages of/IN/of using/VBG/using circuit/NN/circuit switching/VBG/switching for/IN/for what/WP/what kinds/NNS/kinds of/IN/of applications/NNS/applications is/VBZ/is circuit/NN/circuit switching/VBG/switching a/DT/a viable/JJ/viable strategy/NN/strategy 16.13/CD/16.13 in/IN/in what/WP/what ways/NNS/ways is/VBZ/is using/VBG/using a/DT/a name/NN/name server/NN/server better/NN/better than/IN/than using/VBG/using static/JJ/static host/NN/host tables/NNS/tables what/WP/what problems/NNS/problems or/CC/or complications/NNS/complications are/VBP/are associated/VBN/associated with/IN/with name/NN/name servers/NNS/servers what/WP/what methods/NNS/methods could/MD/could you/PRP/you use/VB/use to/TO/to decrease/VB/decrease the/DT/the amount/NN/amount of/IN/of traffic/NN/traffic name/NN/name servers/NNS/servers generate/VBP/generate to/TO/to satisfy/VB/satisfy translation/NN/translation requests/NNS/requests 703/CD/703 16.14/CD/16.14 of/IN/of what/WP/what use/NN/use is/VBZ/is an/DT/an address-resolution/NN/address-resolution protocol/NN/protocol why/WRB/why is/VBZ/is it/PRP/it better/JJR/better to/TO/to use/VB/use such/JJ/such a/DT/a protocol/NN/protocol than/IN/than to/TO/to make/VB/make each/DT/each host/NN/host read/NN/read each/DT/each packet/NN/packet to/TO/to determine/VB/determine that/IN/that packet/NN/packet 's/POS/'s destination/NN/destination does/VBZ/does a/DT/a token-passing/JJ/token-passing network/NN/network need/VBP/need such/JJ/such a/DT/a protocol/NN/protocol explain/NN/explain your/PRP$/your answer/NN/answer /./. 16.15/CD/16.15 what/WP/what is/VBZ/is the/DT/the difference/NN/difference between/IN/between computation/NN/computation migration/NN/migration and/CC/and process/NN/process migration/NN/migration which/WDT/which is/VBZ/is easier/JJR/easier to/TO/to implement/VB/implement /,/, and/CC/and why/WRB/why 16.16/CD/16.16 run/VBN/run the/DT/the program/NN/program shown/NN/shown in/IN/in figure/NN/figure 16.5/CD/16.5 and/CC/and determine/NN/determine the/DT/the ip/NN/ip addresses/VBZ/addresses of/IN/of the/DT/the following/JJ/following host/NN/host names/NNS/names /:/: www.wiley.com/JJ/www.wiley.com www.cs.yale.edu/NN/www.cs.yale.edu www.apple.com/NN/www.apple.com www.westminstercollege.edu/-NONE-/www.westminstercollege.edu www.ietf.org/JJ/www.ietf.org 16.17/CD/16.17 to/TO/to build/VB/build a/DT/a robust/NN/robust distributed/VBN/distributed system/NN/system /,/, you/PRP/you must/MD/must know/VB/know what/WP/what kinds/NNS/kinds of/IN/of failures/NNS/failures can/MD/can occur/VB/occur /./. a/NNP/a. list/NN/list three/CD/three possible/JJ/possible types/NNS/types of/IN/of failure/NN/failure in/IN/in a/DT/a distributed/VBN/distributed system/NN/system /./. b/NNP/b. specify/NN/specify which/WDT/which of/IN/of the/DT/the entries/NNS/entries in/IN/in your/PRP$/your list/NN/list also/RB/also are/VBP/are applicable/JJ/applicable to/TO/to a/DT/a centralized/JJ/centralized system/NN/system /./. 16.18/CD/16.18 explain/NN/explain why/WRB/why doubling/VBG/doubling the/DT/the speed/NN/speed of/IN/of the/DT/the systems/NNS/systems on/IN/on an/DT/an ethernet/NN/ethernet segment/NN/segment may/MD/may result/VB/result in/IN/in decreased/VBN/decreased network/NN/network performance/NNP/performance. what/WP/what changes/NNS/changes could/MD/could help/VB/help solve/VB/solve this/DT/this problem/NN/problem 16.19/CD/16.19 name/NN/name servers/NNS/servers are/VBP/are organized/VBN/organized in/IN/in a/DT/a hierarchical/JJ/hierarchical manner/NNP/manner. what/WP/what is/VBZ/is the/DT/the purpose/NN/purpose of/IN/of using/VBG/using a/DT/a hierarchical/JJ/hierarchical organization/NN/organization 16.20/CD/16.20 consider/NN/consider a/DT/a distributed/VBN/distributed system/NN/system with/IN/with two/CD/two sites/NNS/sites /,/, a/DT/a and/CC/and b/NNP/b. consider/NN/consider whether/IN/whether site/JJ/site a/DT/a can/NN/can distinguish/NN/distinguish among/IN/among the/DT/the following/JJ/following /:/: a/NNP/a. b/NN/b goes/VBZ/goes down/IN/down /./. b/NNP/b. the/DT/the link/NN/link between/IN/between a/DT/a and/CC/and b/NN/b goes/VBZ/goes down/IN/down /./. c/NNP/c. b/NN/b is/VBZ/is extremely/RB/extremely overloaded/VBN/overloaded /,/, and/CC/and its/PRP$/its response/NN/response time/NN/time is/VBZ/is 100/CD/100 times/NNS/times longer/JJR/longer than/IN/than normal/JJ/normal /./. what/WP/what implications/NNS/implications does/VBZ/does your/PRP$/your answer/NN/answer have/VBP/have for/IN/for recovery/NN/recovery in/IN/in distributed/VBN/distributed systems/NNS/systems tanenbaum/NN/tanenbaum /:/[ 2003/CD/2003 /CD/] /,/, stallings/NNS/stallings /:/[ 2000a/CD/2000a /CD/] /,/, and/CC/and kurose/VB/kurose and/CC/and ross/NN/ross /:/[ 2005/CD/2005 /CD/] provide/NN/provide general/JJ/general overviews/NNS/overviews of/IN/of computer/NN/computer networks/NNP/networks. williams/NNS/williams /:/[ 2001/CD/2001 /CD/] covers/NNS/covers computer/NN/computer networking/VBG/networking from/IN/from a/DT/a computer-architecture/JJ/computer-architecture viewpoint/NN/viewpoint /./. the/DT/the internet/NN/internet and/CC/and its/PRP$/its protocols/NNS/protocols are/VBP/are described/VBN/described in/IN/in comer/NN/comer /:/[ 1999/CD/1999 /CD/] and/CC/and comer/NN/comer /:/[ 2000/CD/2000 /CD/] /./. coverage/NN/coverage of/IN/of tcp/NN/tcp /ip/NN//ip can/MD/can be/VB/be found/VBN/found in/IN/in stevens/NNS/stevens /:/[ 1994/CD/1994 /CD/] and/CC/and stevens/NNS/stevens /:/[ 1995/CD/1995 /CD/] /./. 704/CD/704 chapter/NN/chapter 16/CD/16 unix/CD/unix network/NN/network programming/NN/programming is/VBZ/is described/VBN/described thoroughly/RB/thoroughly in/IN/in stevens/NNS/stevens /:/[ 1997/CD/1997 /CD/] and/CC/and stevens/NNS/stevens /:/[ 1998/CD/1998 /CD/] /./. discussions/NNS/discussions concerning/VBG/concerning distributed/VBN/distributed operating-system/JJ/operating-system structures/NNS/structures have/VBP/have been/VBN/been offered/VBN/offered by/IN/by coulouris/NNS/coulouris et/VBP/et al/NNP/al. /NNP/[ 2001/CD/2001 /CD/] and/CC/and tanenbaum/NN/tanenbaum and/CC/and van/NN/van steen/IN/steen /CD/[ 2002/CD/2002 /CD/] /./. load/NN/load balancing/VBG/balancing and/CC/and load/VB/load sharing/VBG/sharing are/VBP/are discussed/VBN/discussed by/IN/by i-iarchol-balter/JJ/i-iarchol-balter and/CC/and downey/NN/downey /:/[ 1997/CD/1997 /CD/] and/CC/and vee/NN/vee and/CC/and i-isu/NNP/i-isu /NNP/[ 2000/CD/2000 /CD/] /./. i-iarish/JJ/i-iarish and/CC/and owens/NNS/owens /:/[ 1999/CD/1999 /CD/] describes/NNS/describes load-balancing/JJ/load-balancing dns/NNS/dns servers/NNP/servers. process/NN/process migration/NN/migration is/VBZ/is discussed/VBN/discussed by/IN/by jul/JJ/jul et/NN/et al/NNP/al. /NNP/[ 1988/CD/1988 /CD/] /,/, douglis/VBZ/douglis and/CC/and ousterhout/IN/ousterhout /CD/[ 1991/CD/1991 /CD/] /,/, han/IN/han and/CC/and ghosh/JJ/ghosh /NN/[ 1998/CD/1998 /CD/] /,/, and/CC/and milojicic/JJ/milojicic et/NN/et al/NN/al /./. /NN/[ 2000/CD/2000 /CD/] /./. issues/NNS/issues relating/VBG/relating to/TO/to a/DT/a distributed/VBN/distributed virtual/JJ/virtual machine/NN/machine for/IN/for distributed/VBN/distributed systems/NNS/systems are/VBP/are examined/VBN/examined in/IN/in sirer/NN/sirer et/NN/et al/NNP/al. /NNP/[ 1999/CD/1999 /CD/] /./. 17.1/CD/17.1 in/IN/in the/DT/the previous/JJ/previous chapter/NN/chapter /,/, we/PRP/we discussed/VBD/discussed network/NN/network construction/NN/construction and/CC/and the/DT/the low-level/NNP/low-level protocols/NNS/protocols needed/VBD/needed to/TO/to transfer/VB/transfer between/IN/between systems/NNP/systems. now/RB/now we/PRP/we examine/VBP/examine one/CD/one use/NN/use of/IN/of this/DT/this infrastructure/NNP/infrastructure. a/DT/a is/VBZ/is a/DT/a distributed/VBN/distributed implementation/NN/implementation of/IN/of the/DT/the classical/JJ/classical time-sharing/NN/time-sharing of/IN/of a/DT/a file/NN/file system/NN/system /,/, where/WRB/where multiple/JJ/multiple users/NNS/users share/NN/share files/NNS/files and/CC/and storage/NN/storage resources/NNS/resources /:/( chapter/NN/chapter 11/CD/11 /CD/) /./. the/DT/the purpose/NN/purpose of/IN/of a/DT/a dfs/NN/dfs is/VBZ/is to/TO/to support/VB/support the/DT/the same/JJ/same kind/NN/kind of/IN/of sharing/NN/sharing when/WRB/when the/DT/the files/NNS/files are/VBP/are physically/RB/physically dispersed/VBN/dispersed among/IN/among the/DT/the sites/NNS/sites of/IN/of a/DT/a distributed/VBN/distributed system/NN/system /./. in/IN/in this/DT/this chapter/NN/chapter /,/, we/PRP/we describe/VBP/describe how/WRB/how a/DT/a dfs/NN/dfs can/MD/can be/VB/be designed/VBN/designed and/CC/and implemented/VBN/implemented /./. first/JJ/first /,/, we/PRP/we discuss/VBP/discuss common/JJ/common concepts/NNS/concepts on/IN/on which/WDT/which dfss/NNS/dfss are/VBP/are based/NNP/based. then/RB/then /,/, we/PRP/we illustrate/VBP/illustrate our/PRP$/our concepts/NNS/concepts by/IN/by examining/VBG/examining one/CD/one influential/JJ/influential dfs-the/JJ/dfs-the andrew/NN/andrew file/NN/file system/NN/system /:/( afs/NNS/afs /VBP/) /./. to/TO/to explain/VB/explain the/DT/the naming/NN/naming mechanism/NN/mechanism that/WDT/that provides/VBZ/provides location/NN/location transparency/NN/transparency and/CC/and independence/NN/independence /./. to/TO/to describe/VB/describe the/DT/the various/JJ/various methods/NNS/methods for/IN/for accessing/VBG/accessing distributed/VBN/distributed files/NNS/files /./. to/TO/to contrast/VB/contrast stateful/JJ/stateful and/CC/and stateless/NN/stateless distributed/VBD/distributed file/NN/file servers/NNS/servers /./. to/TO/to show/VB/show how/WRB/how replication/NN/replication of/IN/of files/NNS/files on/IN/on different/JJ/different machines/NNS/machines in/IN/in a/DT/a distributed/VBN/distributed file/NN/file system/NN/system is/VBZ/is a/DT/a useful/JJ/useful redundancy/NN/redundancy for/IN/for improving/VBG/improving availability/NN/availability /./. to/TO/to introduce/VB/introduce the/DT/the andrew/JJ/andrew file/NN/file system/NN/system /:/( afs/NNS/afs /VBP/) as/RB/as an/DT/an example/NN/example of/IN/of a/DT/a distributed/VBN/distributed file/NN/file system/NN/system /./. as/IN/as we/PRP/we noted/VBD/noted in/IN/in the/DT/the preceding/NN/preceding chapter/NN/chapter /,/, a/DT/a distributed/VBN/distributed system/NN/system is/VBZ/is a/DT/a collection/NN/collection of/IN/of loosely/RB/loosely coupled/VBN/coupled computers/NNS/computers interconnected/VBN/interconnected by/IN/by a/DT/a communication/NN/communication network/NN/network /./. these/DT/these computers/NNS/computers can/MD/can share/VB/share physically/RB/physically dispersed/VBN/dispersed files/NNS/files by/IN/by using/VBG/using a/DT/a distributed/JJ/distributed file/NN/file system/NN/system /:/( dfs/NNS/dfs /VBP/) /./. in/IN/in this/DT/this chapter/NN/chapter /,/, we/PRP/we use/VBP/use the/DT/the term/NN/term dfs/VBZ/dfs to/TO/to mean/VB/mean distributed/VBN/distributed file/JJ/file systems/NNS/systems in/IN/in general/JJ/general /,/, not/RB/not the/DT/the commercial/JJ/commercial transarc/NN/transarc dfs/NNS/dfs product/NN/product ;/:/; we/PRP/we refer/VBP/refer to/TO/to the/DT/the latter/NN/latter as/IN/as transarc/NN/transarc dfs/NNP/dfs. also/RB/also /,/, nfs/NNS/nfs refers/NNS/refers to/TO/to nfs/NNS/nfs version/NN/version 3/CD/3 /,/, unless/IN/unless otherwise/NN/otherwise noted/VBD/noted /./. 705/CD/705 706/CD/706 chapter/NN/chapter 17/CD/17 to/TO/to explain/VB/explain the/DT/the structure/NN/structure of/IN/of a/DT/a dfs/NN/dfs /,/, we/PRP/we need/VBP/need to/TO/to define/VB/define the/DT/the terms/NNS/terms service/NN/service /,/, server/RB/server /,/, and/CC/and client/NNP/client. a/DT/a is/VBZ/is a/DT/a software/NN/software entity/NN/entity running/VBG/running on/IN/on one/CD/one or/CC/or more/JJR/more machines/NNS/machines and/CC/and providing/VBG/providing a/DT/a particular/JJ/particular type/NN/type of/IN/of function/NN/function to/TO/to clients/NNP/clients. a/DT/a is/VBZ/is the/DT/the service/NN/service software/NN/software running/VBG/running on/IN/on a/DT/a single/JJ/single machine/NNP/machine. a/DT/a is/VBZ/is a/DT/a process/NN/process that/WDT/that can/MD/can invoke/VB/invoke a/DT/a service/NN/service using/VBG/using a/DT/a set/NN/set of/IN/of operations/NNS/operations that/WDT/that form/NN/form its/PRP$/its sometimes/RB/sometimes a/DT/a lower-level/JJ/lower-level interface/NN/interface is/VBZ/is defined/VBN/defined for/IN/for the/DT/the actual/JJ/actual cross-machine/NN/cross-machine interaction/NN/interaction ;/:/; it/PRP/it is/VBZ/is the/DT/the using/VBG/using this/DT/this terminology/NN/terminology /,/, we/PRP/we say/VBP/say that/IN/that a/DT/a file/NN/file system/NN/system provides/VBZ/provides file/NN/file services/NNS/services to/TO/to clients/NNP/clients. a/DT/a client/NN/client interface/NN/interface for/IN/for a/DT/a file/NN/file service/NN/service is/VBZ/is formed/VBN/formed by/IN/by a/DT/a set/NN/set of/IN/of primitive/JJ/primitive file/NN/file operations/NNS/operations /,/, such/JJ/such as/IN/as create/JJ/create a/DT/a file/NN/file /,/, delete/JJ/delete a/DT/a file/NN/file /,/, read/VBD/read from/IN/from a/DT/a file/NN/file /,/, and/CC/and write/VB/write to/TO/to a/DT/a file/NN/file /./. the/DT/the primary/JJ/primary hardware/NN/hardware concponent/NN/concponent that/WDT/that a/DT/a file/NN/file server/NN/server controls/NNS/controls is/VBZ/is a/DT/a set/NN/set of/IN/of local/JJ/local secondary-storage/NN/secondary-storage devices/NNS/devices /:/( usually/RB/usually /,/, magnetic/JJ/magnetic disks/NNS/disks /:/) on/IN/on which/WDT/which files/NNS/files are/VBP/are stored/VBN/stored and/CC/and from/IN/from which/WDT/which they/PRP/they are/VBP/are retrieved/VBN/retrieved according/VBG/according to/TO/to the/DT/the clients/NNS/clients '/POS/' requests/NNS/requests /./. a/DT/a dfs/NN/dfs is/VBZ/is a/DT/a file/NN/file system/NN/system whose/WP$/whose clients/NNS/clients /,/, servers/NNS/servers /,/, and/CC/and storage/NN/storage devices/NNS/devices are/VBP/are dispersed/VBN/dispersed among/IN/among the/DT/the machines/NNS/machines of/IN/of a/DT/a distributed/VBN/distributed system/NNP/system. accordingly/RB/accordingly /,/, service/NN/service activity/NN/activity has/VBZ/has to/TO/to be/VB/be carried/VBN/carried out/RP/out across/IN/across the/DT/the network/NNP/network. instead/RB/instead of/IN/of a/DT/a single/JJ/single centralized/VBN/centralized data/NNS/data repository/NN/repository /,/, the/DT/the system/NN/system frequently/RB/frequently has/VBZ/has multiple/RB/multiple and/CC/and independent/JJ/independent storage/NN/storage devices/NNP/devices. as/IN/as you/PRP/you will/MD/will see/VB/see /,/, the/DT/the concrete/JJ/concrete configuration/NN/configuration and/CC/and implementation/NN/implementation of/IN/of a/DT/a dfs/NN/dfs may/MD/may vary/VB/vary from/IN/from system/NN/system to/TO/to system/NNP/system. in/IN/in some/DT/some configurations/NNS/configurations /,/, servers/NNS/servers run/VBP/run on/IN/on dedicated/VBN/dedicated machines/NNS/machines ;/:/; in/IN/in others/NNS/others /,/, a/DT/a machine/NN/machine can/MD/can be/VB/be both/DT/both a/DT/a server/NN/server and/CC/and a/DT/a client/NNP/client. a/DT/a dfs/NN/dfs can/MD/can be/VB/be implemented/VBN/implemented as/IN/as part/NN/part of/IN/of a/DT/a distributed/VBN/distributed operating/NN/operating system/NN/system or/CC/or /,/, alternatively/RB/alternatively /,/, by/IN/by a/DT/a software/NN/software layer/NN/layer whose/WP$/whose task/NN/task is/VBZ/is to/TO/to manage/NN/manage the/DT/the communication/NN/communication between/IN/between conventional/JJ/conventional operating/NN/operating systems/NNS/systems and/CC/and file/JJ/file systems/NNP/systems. the/DT/the distinctive/JJ/distinctive features/NNS/features of/IN/of a/DT/a dfs/NN/dfs are/VBP/are the/DT/the multiplicity/NN/multiplicity and/CC/and autonomy/NN/autonomy of/IN/of clients/NNS/clients and/CC/and servers/NNS/servers in/IN/in the/DT/the system/NN/system /./. ideally/RB/ideally /,/, a/DT/a dfs/NN/dfs should/MD/should appear/VB/appear to/TO/to its/PRP$/its clients/NNS/clients to/TO/to be/VB/be a/DT/a conventional/JJ/conventional /,/, centralized/VBN/centralized file/NN/file system/NNP/system. the/DT/the multiplicity/NN/multiplicity and/CC/and dispersion/NN/dispersion of/IN/of its/PRP$/its servers/NNS/servers and/CC/and storage/NN/storage devices/NNS/devices should/MD/should be/VB/be made/VBN/made invisible/-NONE-/invisible. that/IN/that is/VBZ/is /,/, the/DT/the client/NN/client interface/NN/interface of/IN/of a/DT/a dfs/NN/dfs should/MD/should not/RB/not distinguish/VB/distinguish between/IN/between local/JJ/local and/CC/and remote/VB/remote files/NNP/files. it/PRP/it is/VBZ/is up/RP/up to/TO/to the/DT/the dfs/NNS/dfs to/TO/to locate/VB/locate the/DT/the files/NNS/files and/CC/and to/TO/to arrange/VB/arrange for/IN/for the/DT/the transport/NN/transport of/IN/of the/DT/the data/NNP/data. a/DT/a dfs/NN/dfs facilitates/VBZ/facilitates user/NN/user mobility/NN/mobility by/IN/by bringing/NN/bringing a/DT/a user/NN/user 's/POS/'s environment/NN/environment /:/( that/IN/that is/VBZ/is /,/, home/NN/home directory/NN/directory /:/) to/TO/to wherever/VB/wherever the/DT/the user/NN/user logs/NNS/logs in/IN/in /./. the/DT/the most/RBS/most important/JJ/important performance/NN/performance measure/NN/measure of/IN/of a/DT/a dfs/NN/dfs is/VBZ/is the/DT/the amount/NN/amount of/IN/of time/NN/time needed/VBN/needed to/TO/to satisfy/VB/satisfy service/NN/service requests/NNP/requests. in/IN/in conventional/JJ/conventional systems/NNS/systems /,/, this/DT/this time/NN/time consists/VBZ/consists of/IN/of disk-access/JJ/disk-access time/NN/time and/CC/and a/DT/a small/JJ/small amount/NN/amount of/IN/of cpu-processing/JJ/cpu-processing time/NNP/time. in/IN/in a/DT/a dfs/NN/dfs /,/, however/RB/however /,/, a/DT/a remote/NN/remote access/NN/access has/VBZ/has the/DT/the additional/JJ/additional overhead/NN/overhead attributed/VBD/attributed to/TO/to the/DT/the distributed/VBN/distributed structure/NNP/structure. this/DT/this overhead/NN/overhead includes/VBZ/includes the/DT/the time/NN/time to/TO/to deliver/VB/deliver the/DT/the request/NN/request to/TO/to a/DT/a server/NN/server /,/, as/IN/as well/RB/well as/IN/as the/DT/the time/NN/time to/TO/to get/VB/get the/DT/the response/NN/response across/IN/across the/DT/the network/NN/network back/RB/back to/TO/to the/DT/the client/NNP/client. for/IN/for each/DT/each direction/NN/direction /,/, in/IN/in addition/NN/addition to/TO/to the/DT/the transfer/NN/transfer of/IN/of the/DT/the information/NN/information /,/, there/EX/there is/VBZ/is the/DT/the cpu/NN/cpu overhead/NN/overhead of/IN/of running/VBG/running the/DT/the communication/NN/communication protocol/NN/protocol software/NNP/software. the/DT/the performance/NN/performance of/IN/of a/DT/a dfs/NN/dfs can/MD/can be/VB/be viewed/VBN/viewed as/IN/as another/DT/another dimension/NN/dimension of/IN/of the/DT/the dfs/NNS/dfs 's/POS/'s transparency/NNP/transparency. that/IN/that is/VBZ/is /,/, the/DT/the performance/NN/performance of/IN/of an/DT/an ideal/NN/ideal dfs/VBZ/dfs would/MD/would be/VB/be comparable/JJ/comparable to/TO/to that/DT/that of/IN/of a/DT/a conventional/JJ/conventional file/NN/file system/NN/system /./. the/DT/the fact/NN/fact that/IN/that a/DT/a dfs/NNS/dfs manages/VBZ/manages a/DT/a set/NN/set of/IN/of dispersed/VBN/dispersed storage/NN/storage devices/NNS/devices is/VBZ/is the/DT/the dfs/NNS/dfs '/POS/' s/NNS/s key/VBP/key distinguishing/VBG/distinguishing feature/NNP/feature. the/DT/the overall/JJ/overall storage/NN/storage space/NN/space managed/VBD/managed by/IN/by a/DT/a dfs/NNS/dfs is/VBZ/is composed/VBN/composed of/IN/of different/JJ/different and/CC/and remotely/RB/remotely located/VBN/located smaller/JJR/smaller storage/NN/storage spaces/NNP/spaces. usually/RB/usually /,/, these/DT/these constituent/NN/constituent storage/NN/storage spaces/NNS/spaces correspond/VBP/correspond to/TO/to sets/NNS/sets of/IN/of files/NNP/files. a/DT/a cmnpm1.c/JJ/cmnpm1.c /:/: nt/NN/nt is/VBZ/is the/DT/the smallest/JJS/smallest set/NN/set of/IN/of files/NNS/files that/WDT/that can/MD/can be/VB/be stored/VBN/stored on/IN/on a/DT/a single/JJ/single machine/NN/machine /,/, independently/RB/independently from/IN/from other/JJ/other units/NNP/units. all/DT/all files/NNS/files belonging/VBG/belonging to/TO/to the/DT/the same/JJ/same component/NN/component unit/NN/unit must/MD/must reside/VB/reside in/IN/in the/DT/the same/JJ/same location/NN/location /./. 17.2/CD/17.2 17.2/CD/17.2 707/CD/707 is/VBZ/is a/DT/a mapping/NN/mapping between/IN/between logical/JJ/logical and/CC/and physical/JJ/physical objects/NNP/objects. for/IN/for instance/NN/instance /,/, users/NNS/users deal/VBP/deal with/IN/with logical/JJ/logical data/NNS/data objects/NNS/objects represented/VBD/represented by/IN/by file/NN/file nances/NNS/nances /,/, whereas/IN/whereas the/DT/the system/NN/system manipulates/VBZ/manipulates physical/JJ/physical blocks/NNS/blocks of/IN/of data/NNS/data stored/VBN/stored on/IN/on disk/NN/disk tracks/NNP/tracks. usually/RB/usually /,/, a/DT/a user/NN/user refers/NNS/refers to/TO/to a/DT/a file/NN/file by/IN/by a/DT/a textual/JJ/textual name/NNP/name. the/DT/the latter/NN/latter is/VBZ/is mapped/VBN/mapped to/TO/to a/DT/a lower-level/JJ/lower-level numerical/JJ/numerical identifier/NN/identifier that/WDT/that in/IN/in turn/NN/turn is/VBZ/is mapped/VBN/mapped to/TO/to disk/VB/disk blocks/NNP/blocks. this/DT/this multilevel/NN/multilevel mapping/VBG/mapping provides/NNS/provides users/NNS/users with/IN/with an/DT/an abstraction/NN/abstraction of/IN/of a/DT/a file/NN/file that/WDT/that hides/VBZ/hides the/DT/the details/NNS/details of/IN/of how/WRB/how and/CC/and where/WRB/where on/IN/on the/DT/the disk/NN/disk the/DT/the file/NN/file is/VBZ/is stored/VBN/stored /./. in/IN/in a/DT/a transparent/NN/transparent dfs/VBZ/dfs /,/, a/DT/a new/JJ/new dimension/NN/dimension is/VBZ/is added/VBN/added to/TO/to the/DT/the abstraction/NN/abstraction /:/: that/IN/that of/IN/of hiding/VBG/hiding where/WRB/where in/IN/in the/DT/the network/NN/network the/DT/the file/NN/file is/VBZ/is located/NNP/located. in/IN/in a/DT/a conventional/JJ/conventional file/NN/file system/NN/system /,/, the/DT/the range/NN/range of/IN/of the/DT/the naming/NN/naming mapping/VBG/mapping is/VBZ/is an/DT/an address/NN/address within/IN/within a/DT/a disk/NNP/disk. in/IN/in a/DT/a dfs/NN/dfs /,/, this/DT/this range/NN/range is/VBZ/is expanded/VBN/expanded to/TO/to include/VB/include the/DT/the specific/JJ/specific machine/NN/machine on/IN/on whose/WP$/whose disk/NN/disk the/DT/the file/NN/file is/VBZ/is stored/VBN/stored /./. going/VBG/going one/CD/one step/NN/step further/RB/further with/IN/with the/DT/the concept/NN/concept of/IN/of treating/VBG/treating files/NNS/files as/IN/as abstractions/NNS/abstractions leads/NNS/leads to/TO/to the/DT/the possibility/NN/possibility of/IN/of given/VBN/given a/DT/a file/NN/file name/NN/name /,/, the/DT/the mapping/NN/mapping returns/NNS/returns a/DT/a set/NN/set of/IN/of the/DT/the locations/NNS/locations of/IN/of this/DT/this file/NN/file 's/POS/'s replicas/NNP/replicas. in/IN/in this/DT/this abstraction/NN/abstraction /,/, both/DT/both the/DT/the existence/NN/existence of/IN/of multiple/NN/multiple copies/NNS/copies and/CC/and their/PRP$/their locations/NNS/locations are/VBP/are hidden/VBN/hidden /./. 17.2.1/CD/17.2.1 naming/VBG/naming structures/NNS/structures we/PRP/we need/VBP/need to/TO/to differentiate/VB/differentiate two/CD/two related/JJ/related notions/NNS/notions regarding/VBG/regarding name/NN/name mappings/NNS/mappings in/IN/in a/DT/a dfs/NN/dfs /:/: /./. the/DT/the name/NN/name of/IN/of a/DT/a file/NN/file does/VBZ/does not/RB/not reveal/VB/reveal any/DT/any hint/NN/hint of/IN/of the/DT/the file/NN/file 's/POS/'s physical/JJ/physical storage/NN/storage location/NN/location /./. 'j/NN/'j '/''/' ~/:/~ '/POS/' '''/NNP/'''. /,/, '/''/' '/:/'- '/POS/' '/''/' the/DT/the name/NN/name of/IN/of a/DT/a file/NN/file does/VBZ/does not/RB/not need/VBP/need to/TO/to be/VB/be changed/VBN/changed when/WRB/when the/DT/the file/NN/file 's/POS/'s physical/JJ/physical storage/NN/storage location/NN/location changes/NNS/changes /./. both/DT/both definitions/NNS/definitions relate/VBP/relate to/TO/to the/DT/the level/NN/level of/IN/of naming/VBG/naming discussed/VBN/discussed previously/RB/previously /,/, since/IN/since files/NNS/files have/VBP/have different/JJ/different names/NNS/names at/IN/at different/JJ/different levels/NNS/levels /:/( that/IN/that is/VBZ/is /,/, user-level/JJ/user-level textual/JJ/textual names/NNS/names and/CC/and system-level/JJ/system-level numerical/JJ/numerical identifiers/NNS/identifiers /:/) /./. a/DT/a location-independent/JJ/location-independent naming/NN/naming scheme/NN/scheme is/VBZ/is a/DT/a dynamic/JJ/dynamic mapping/NN/mapping /,/, since/IN/since it/PRP/it can/MD/can map/VB/map the/DT/the same/JJ/same file/NN/file name/NN/name to/TO/to different/JJ/different locations/NNS/locations at/IN/at two/CD/two different/JJ/different times/NNP/times. therefore/NN/therefore /,/, location/NN/location independence/NN/independence is/VBZ/is a/DT/a stronger/JJR/stronger property/NN/property than/IN/than is/VBZ/is location/NN/location transparency/NN/transparency /./. in/IN/in practice/NN/practice /,/, most/JJS/most of/IN/of the/DT/the current/JJ/current dfss/NN/dfss provide/NN/provide a/DT/a static/JJ/static /,/, location-transparent/JJ/location-transparent mapping/NN/mapping for/IN/for user-level/JJ/user-level names/NNP/names. these/DT/these systems/NNS/systems /,/, however/RB/however /,/, do/VBP/do not/RB/not support/VB/support that/IN/that is/VBZ/is /,/, changing/VBG/changing the/DT/the location/NN/location of/IN/of a/DT/a file/NN/file automatically/RB/automatically is/VBZ/is impossible/JJ/impossible /./. hence/NN/hence /,/, the/DT/the notion/NN/notion of/IN/of location/NN/location independence/NN/independence is/VBZ/is irrelevant/JJ/irrelevant for/IN/for these/DT/these systems/NNS/systems /./. files/NNS/files are/VBP/are associated/VBN/associated permanently/RB/permanently with/IN/with a/DT/a specific/JJ/specific set/NN/set of/IN/of disk/NN/disk blocks/NNP/blocks. files/NNS/files and/CC/and disks/NNS/disks can/MD/can be/VB/be moved/VBN/moved between/IN/between machines/NNS/machines manually/RB/manually /,/, but/CC/but file/RB/file migration/NN/migration implies/NNS/implies an/DT/an automatic/JJ/automatic /,/, operating-system-initiated/JJ/operating-system-initiated action/NNP/action. only/RB/only afs/VBZ/afs and/CC/and a/DT/a few/JJ/few experimental/JJ/experimental file/NN/file systems/NNS/systems support/NN/support location/NN/location independence/NN/independence and/CC/and file/NN/file mobility/NNP/mobility. afs/VBZ/afs supports/NNS/supports file/IN/file mobility/NN/mobility mainly/RB/mainly for/IN/for administrative/JJ/administrative purposes/NNP/purposes. a/DT/a protocol/NN/protocol provides/VBZ/provides migration/NN/migration of/IN/of afs/NNS/afs component/VBP/component units/NNS/units to/TO/to satisfy/VB/satisfy high-level/JJ/high-level user/NN/user requests/NNS/requests /,/, without/IN/without changing/NN/changing either/DT/either the/DT/the user-level/NNP/user-level names/VBZ/names or/CC/or the/DT/the low-level/JJ/low-level names/NNS/names of/IN/of the/DT/the corresponding/NN/corresponding files/NNS/files /./. a/DT/a few/JJ/few aspects/NNS/aspects can/MD/can further/RB/further differentiate/VB/differentiate location/NN/location independence/NN/independence and/CC/and static/JJ/static location/NN/location transparency/NN/transparency /:/: divorce/NN/divorce of/IN/of data/NNS/data from/IN/from location/NN/location /,/, as/IN/as exhibited/VBN/exhibited by/IN/by location/NN/location independence/NN/independence /,/, provides/VBZ/provides a/DT/a better/JJR/better abstraction/NN/abstraction for/IN/for files/NNP/files. a/DT/a file/NN/file name/NN/name should/MD/should denote/VB/denote the/DT/the file/NN/file 's/POS/'s 708/CD/708 chapter/NN/chapter 17/CD/17 most/JJS/most significant/JJ/significant attributes/NNS/attributes /,/, which/WDT/which are/VBP/are its/PRP$/its contents/NNS/contents ratber/NN/ratber than/IN/than its/PRP$/its location/NN/location /./. location-independent/JJ/location-independent files/NNS/files can/MD/can be/VB/be viewed/VBN/viewed as/IN/as logical/JJ/logical data/NNS/data containers/NNS/containers that/WDT/that are/VBP/are not/RB/not attached/VBN/attached to/TO/to a/DT/a specific/JJ/specific storage/NN/storage location/NNP/location. if/IN/if only/RB/only static/JJ/static location/NN/location transparency/NN/transparency is/VBZ/is supported/VBN/supported /,/, the/DT/the file/NN/file name/NN/name still/RB/still denotes/VBZ/denotes a/DT/a specific/JJ/specific /,/, although/IN/although hidden/JJ/hidden /,/, set/VBN/set of/IN/of physical/JJ/physical disk/NN/disk blocks/NNS/blocks /./. static/JJ/static location/NN/location transparency/NN/transparency provides/VBZ/provides users/NNS/users with/IN/with a/DT/a convenient/JJ/convenient way/NN/way to/TO/to share/VB/share data/NNP/data. users/NNS/users can/MD/can share/VB/share remote/VB/remote files/NNS/files by/IN/by simply/RB/simply naming/VBG/naming the/DT/the files/NNS/files in/IN/in a/DT/a locationtransparent/NN/locationtransparent manner/NN/manner /,/, as/IN/as though/IN/though the/DT/the files/NNS/files were/VBD/were local/NNP/local. nevertheless/NN/nevertheless /,/, sharing/VBG/sharing the/DT/the storage/NN/storage space/NN/space is/VBZ/is cumbersome/VBN/cumbersome /,/, because/IN/because logical/JJ/logical names/NNS/names are/VBP/are still/RB/still statically/RB/statically attached/VBN/attached to/TO/to physical/JJ/physical storage/NN/storage devices/NNP/devices. location/NN/location independence/NN/independence promotes/VBZ/promotes sharing/VBG/sharing the/DT/the storage/NN/storage space/NN/space itself/PRP/itself /,/, as/IN/as well/RB/well as/IN/as the/DT/the data/NNS/data objects/NNP/objects. when/WRB/when files/NNS/files can/MD/can be/VB/be mobilized/VBN/mobilized /,/, the/DT/the overall/JJ/overall /,/, system-wide/JJ/system-wide storage/NN/storage space/NN/space looks/NNS/looks like/IN/like a/DT/a single/JJ/single virtual/JJ/virtual resource/NNP/resource. a/DT/a possible/JJ/possible benefit/NN/benefit of/IN/of such/JJ/such a/DT/a view/NN/view is/VBZ/is the/DT/the ability/NN/ability to/TO/to balance/NN/balance the/DT/the utilization/NN/utilization of/IN/of disks/NNS/disks across/IN/across the/DT/the system/NN/system /./. location/NN/location independence/NN/independence separates/VBZ/separates the/DT/the naming/NN/naming hierarchy/NN/hierarchy from/IN/from the/DT/the storagedevices/NNS/storagedevices hierarchy/VBP/hierarchy and/CC/and from/IN/from the/DT/the intercomputer/NN/intercomputer structure/NNP/structure. by/IN/by contrast/NN/contrast /,/, if/IN/if static/JJ/static location/NN/location transparency/NN/transparency is/VBZ/is used/VBN/used /-NONE-/( although/IN/although names/NNS/names are/VBP/are transparent/JJ/transparent /NN/) /,/, we/PRP/we can/MD/can easily/RB/easily expose/VB/expose the/DT/the correspondence/NN/correspondence between/IN/between component/NN/component units/NNS/units and/CC/and machines/NNP/machines. the/DT/the machines/NNS/machines are/VBP/are configured/VBN/configured in/IN/in a/DT/a pattern/NN/pattern similar/JJ/similar to/TO/to the/DT/the naming/NN/naming structure/NNP/structure. this/DT/this configuration/NN/configuration may/MD/may restrict/VB/restrict the/DT/the architecture/NN/architecture of/IN/of the/DT/the system/NN/system um1.ecessarily/RB/um1.ecessarily and/CC/and conflict/VB/conflict with/IN/with other/JJ/other considerations/NNP/considerations. a/DT/a server/NN/server in/IN/in charge/NN/charge of/IN/of a/DT/a root/NN/root directory/NN/directory is/VBZ/is an/DT/an example/NN/example of/IN/of a/DT/a structure/NN/structure that/WDT/that is/VBZ/is dictated/VBN/dictated by/IN/by the/DT/the naming/VBG/naming hierarchy/NN/hierarchy and/CC/and contradicts/NNS/contradicts decentralization/NN/decentralization guidelines/NNS/guidelines /./. once/RB/once the/DT/the separation/NN/separation of/IN/of name/NN/name and/CC/and location/NN/location has/VBZ/has been/VBN/been completed/VBN/completed /,/, clients/NNS/clients can/MD/can access/NN/access files/NNS/files residing/VBG/residing on/IN/on remote/NN/remote server/NN/server systems/NNP/systems. in/IN/in fact/NN/fact /,/, these/DT/these clients/NNS/clients may/MD/may be/VB/be and/CC/and rely/RB/rely on/IN/on servers/NNS/servers to/TO/to provide/VB/provide all/DT/all files/NNS/files /,/, including/VBG/including the/DT/the operatingsystem/NN/operatingsystem kernel/NNP/kernel. special/JJ/special protocols/NNS/protocols are/VBP/are needed/VBN/needed for/IN/for the/DT/the boot/NN/boot sequence/NN/sequence /,/, however/RB/however /./. consider/NN/consider the/DT/the problem/NN/problem of/IN/of getting/VBG/getting the/DT/the kernel/NN/kernel to/TO/to a/DT/a diskless/NN/diskless workstation/NNP/workstation. the/DT/the diskless/NN/diskless workstation/NN/workstation has/VBZ/has no/DT/no kernel/NN/kernel /,/, so/RB/so it/PRP/it cam1.ot/JJ/cam1.ot use/NN/use the/DT/the dfs/NNS/dfs code/VBP/code to/TO/to retrieve/VB/retrieve the/DT/the kernel/NNP/kernel. instead/RB/instead /,/, a/DT/a special/JJ/special boot/NN/boot protocol/NN/protocol /,/, stored/VBD/stored in/IN/in read-only/JJ/read-only memory/NN/memory /:/( rom/IN/rom /CD/) on/IN/on the/DT/the client/NN/client /,/, is/VBZ/is invoked/NNP/invoked. it/PRP/it enables/VBZ/enables networking/VBG/networking and/CC/and retrieves/NNS/retrieves only/RB/only one/CD/one special/JJ/special file/NN/file /:/( the/DT/the kernel/NN/kernel or/CC/or boot/NN/boot code/NN/code /:/) from/IN/from a/DT/a fixed/VBN/fixed location/NNP/location. once/RB/once the/DT/the kernel/NN/kernel is/VBZ/is copied/VBN/copied over/IN/over the/DT/the network/NN/network and/CC/and loaded/VBD/loaded /,/, its/PRP$/its dfs/NNS/dfs makes/VBZ/makes all/DT/all the/DT/the other/JJ/other operating-system/JJ/operating-system files/NNS/files available/NNP/available. the/DT/the advantages/NNS/advantages of/IN/of diskless/NN/diskless clients/NNS/clients are/VBP/are many/JJ/many /,/, including/VBG/including lower/JJR/lower cost/NN/cost /:/( because/IN/because the/DT/the client/NN/client machines/NNS/machines require/VBP/require no/DT/no disks/NNS/disks /VBP/) and/CC/and greater/JJR/greater convenience/NN/convenience /:/( when/WRB/when an/DT/an operating-system/JJ/operating-system upgrade/NN/upgrade occurs/NNS/occurs /,/, only/RB/only the/DT/the server/NN/server needs/VBZ/needs to/TO/to be/VB/be modified/VBN/modified /-NONE-/) /./. the/DT/the disadvantages/NNS/disadvantages are/VBP/are the/DT/the added/VBN/added complexity/NN/complexity of/IN/of the/DT/the boot/NN/boot protocols/NNS/protocols and/CC/and the/DT/the performance/NN/performance loss/NN/loss resulting/VBG/resulting from/IN/from the/DT/the use/NN/use of/IN/of a/DT/a network/NN/network rather/RB/rather than/IN/than a/DT/a local/JJ/local disk/NN/disk /./. the/DT/the current/JJ/current trend/NN/trend is/VBZ/is for/IN/for clients/NNS/clients to/TO/to use/VB/use both/DT/both local/JJ/local disks/NNS/disks and/CC/and remote/VB/remote file/JJ/file servers/NNS/servers /./. operating/NN/operating systems/NNS/systems and/CC/and networking/VBG/networking software/NN/software are/VBP/are stored/VBN/stored locally/RB/locally ;/:/; file/NN/file systems/NNS/systems containing/VBG/containing user/NN/user data-and/NN/data-and possibly/RB/possibly applications-are/JJ/applications-are stored/VBN/stored on/IN/on remote/NN/remote file/NN/file systems/NNP/systems. some/DT/some client/NN/client systems/NNS/systems may/MD/may store/VB/store commonly/RB/commonly used/VBN/used applications/NNS/applications /,/, such/JJ/such as/IN/as word/NN/word processors/NNS/processors and/CC/and web/NN/web browsers/NNS/browsers /,/, on/IN/on the/DT/the local/JJ/local file/NN/file system/NN/system as/IN/as well/NNP/well. other/JJ/other /,/, less/RBR/less commonly/RB/commonly used/VBN/used applications/NNS/applications may/MD/may be/VB/be from/IN/from the/DT/the remote/NN/remote file/NN/file server/NN/server to/TO/to the/DT/the client/NN/client on/IN/on demand/NNP/demand. the/DT/the main/JJ/main reason/NN/reason for/IN/for providing/NN/providing clients/NNS/clients with/IN/with local/JJ/local file/NN/file systems/NNS/systems rather/RB/rather than/IN/than pure/NN/pure diskless/NN/diskless systems/NNS/systems is/VBZ/is that/IN/that disk/NN/disk drives/NNS/drives are/VBP/are rapidly/RB/rapidly increasing/VBG/increasing in/IN/in capacity/NN/capacity and/CC/and decreasing/VBG/decreasing in/IN/in cost/NN/cost /,/, with/IN/with new/JJ/new generations/NNS/generations appearing/VBG/appearing every/DT/every year/NN/year or/CC/or so/NNP/so. the/DT/the same/JJ/same can/NN/can not/RB/not be/VB/be said/VBN/said for/IN/for networks/NNS/networks /,/, which/WDT/which evolve/VB/evolve every/DT/every few/JJ/few years/NNS/years /./. 17.2/CD/17.2 709/CD/709 overall/JJ/overall /,/, systems/NNS/systems are/VBP/are growing/VBG/growing more/RBR/more quickly/RB/quickly than/IN/than are/VBP/are networks/NNS/networks /,/, so/RB/so extra/JJ/extra work/NN/work is/VBZ/is needed/VBN/needed to/TO/to limit/VB/limit network/NN/network access/NN/access to/TO/to improve/VB/improve system/NN/system throughput/NN/throughput /./. 17.2.2/CD/17.2.2 naming/VBG/naming schemes/NNS/schemes there/RB/there are/VBP/are three/CD/three main/JJ/main approaches/NNS/approaches to/TO/to naming/VBG/naming schemes/NNS/schemes in/IN/in a/DT/a dfs/NNP/dfs. in/IN/in the/DT/the simplest/NN/simplest approach/NN/approach /,/, a/DT/a file/NN/file is/VBZ/is identified/VBN/identified by/IN/by some/DT/some combination/NN/combination of/IN/of its/PRP$/its host/NN/host name/NN/name and/CC/and local/JJ/local name/NN/name /,/, which/WDT/which guarantees/NNS/guarantees a/DT/a unique/JJ/unique system-wide/JJ/system-wide name/NNP/name. in/IN/in ibis/NN/ibis /,/, for/IN/for instance/NN/instance /,/, a/DT/a file/NN/file is/VBZ/is identified/VBN/identified uniquely/RB/uniquely by/IN/by the/DT/the name/NN/name host/NN/host /:/: local-name/JJ/local-name /,/, where/WRB/where local-name/JJ/local-name is/VBZ/is a/DT/a unix-like/JJ/unix-like path/NNP/path. this/DT/this naming/NN/naming scheme/NN/scheme is/VBZ/is neither/DT/neither location/NN/location transparent/NN/transparent nor/CC/nor location/NN/location independent/NNP/independent. nevertheless/NN/nevertheless /,/, the/DT/the same/JJ/same file/NN/file operations/NNS/operations can/MD/can be/VB/be used/VBN/used for/IN/for both/DT/both local/JJ/local and/CC/and remote/VB/remote files/NNP/files. the/DT/the dfs/NNS/dfs is/VBZ/is structured/VBN/structured as/RB/as a/DT/a collection/NN/collection of/IN/of isolated/VBN/isolated component/NN/component units/NNS/units /,/, each/DT/each of/IN/of which/WDT/which is/VBZ/is an/DT/an entire/JJ/entire conventional/JJ/conventional file/NN/file system/NNP/system. in/IN/in this/DT/this first/JJ/first approach/NN/approach /,/, component/NN/component 1-mits/NNS/1-mits remain/VBP/remain isolated/VBN/isolated /,/, although/IN/although means/NNS/means are/VBP/are provided/VBN/provided to/TO/to refer/VB/refer to/TO/to a/DT/a remote/NN/remote file/NNP/file. we/PRP/we do/VBP/do not/RB/not consider/VB/consider this/DT/this scheme/NN/scheme any/DT/any further/JJ/further in/IN/in this/DT/this text/NN/text /./. the/DT/the second/JJ/second approach/NN/approach was/VBD/was popularized/VBN/popularized by/IN/by sun/NN/sun 's/POS/'s network/NN/network file/NN/file system/NN/system /,/, nfs/VBZ/nfs /./. nfs/NNS/nfs is/VBZ/is the/DT/the file-system/JJ/file-system component/NN/component of/IN/of onc/NN/onc +/:/+ /,/, a/DT/a networking/NN/networking package/NN/package supported/VBD/supported by/IN/by many/JJ/many unix/CD/unix vendors/NNP/vendors. nfs/NNS/nfs provides/VBZ/provides a/DT/a means/VBZ/means to/TO/to attach/VB/attach remote/NN/remote directories/NNS/directories to/TO/to local/JJ/local directories/NNS/directories /,/, thus/RB/thus giving/VBG/giving the/DT/the appearance/NN/appearance of/IN/of a/DT/a coherent/NN/coherent directory/NN/directory tree/NN/tree /./. early/RB/early nfs/VBZ/nfs versions/NNS/versions allowed/VBN/allowed only/RB/only previously/RB/previously mmmted/VBN/mmmted remote/NN/remote directories/NNS/directories to/TO/to be/VB/be accessed/VBN/accessed transparently/-NONE-/transparently. with/IN/with the/DT/the advent/NN/advent of/IN/of the/DT/the feature/NN/feature /,/, mounts/NNS/mounts are/VBP/are done/VBN/done on/IN/on demand/NN/demand /,/, based/VBN/based on/IN/on a/DT/a table/JJ/table of/IN/of mount/NN/mount points/NNS/points and/CC/and file-structure/JJ/file-structure names/NNP/names. components/NNS/components are/VBP/are integrated/VBN/integrated to/TO/to support/VB/support transparent/NN/transparent sharing/VBG/sharing /,/, although/IN/although this/DT/this integration/NN/integration is/VBZ/is limited/VBN/limited and/CC/and is/VBZ/is not/RB/not uniform/NN/uniform /,/, because/IN/because each/DT/each machine/NN/machine may/MD/may attach/VB/attach different/JJ/different remote/NN/remote directories/NNS/directories to/TO/to its/PRP$/its tree/NNP/tree. the/DT/the resulting/VBG/resulting structure/NN/structure is/VBZ/is versatile/JJ/versatile /./. we/PRP/we can/MD/can achieve/VB/achieve total/JJ/total integration/NN/integration of/IN/of the/DT/the component/NN/component file/NN/file systems/NNS/systems by/IN/by using/VBG/using the/DT/the third/JJ/third approach/NNP/approach. here/RB/here /,/, a/DT/a single/JJ/single global/JJ/global name/NN/name structure/NN/structure spans/NNS/spans all/DT/all the/DT/the files/NNS/files in/IN/in the/DT/the system/NNP/system. ideally/RB/ideally /,/, the/DT/the composed/VBN/composed file-system/JJ/file-system structure/NN/structure is/VBZ/is the/DT/the same/JJ/same as/IN/as the/DT/the structure/NN/structure of/IN/of a/DT/a conventional/JJ/conventional file/NN/file system/NNP/system. in/IN/in practice/NN/practice /,/, however/RB/however /,/, the/DT/the many/JJ/many special/JJ/special files/NNS/files /:/( for/IN/for example/NN/example /,/, unix/NN/unix device/NN/device files/NNS/files and/CC/and machine-specific/JJ/machine-specific binary/NN/binary directories/NNS/directories /:/) make/VBP/make this/DT/this goal/NN/goal difficult/NN/difficult to/TO/to attain/VB/attain /./. to/TO/to evaluate/VB/evaluate naming/NN/naming structures/NNS/structures /,/, we/PRP/we look/VBP/look at/IN/at their/PRP$/their the/DT/the most/RBS/most complex/JJ/complex and/CC/and most/JJS/most difficult-to-maintain/JJ/difficult-to-maintain structure/NN/structure is/VBZ/is the/DT/the nfs/NNS/nfs structure/VBP/structure /./. because/IN/because any/DT/any rem.ote/JJ/rem.ote directory/NN/directory can/MD/can be/VB/be attached/VBN/attached anywhere/RB/anywhere onto/IN/onto the/DT/the local/JJ/local directory/NN/directory tree/NN/tree /,/, the/DT/the resulting/VBG/resulting hierarchy/NN/hierarchy can/MD/can be/VB/be highly/RB/highly m1structured/NNP/m1structured. if/IN/if a/DT/a server/NN/server becomes/VBZ/becomes unavailable/JJ/unavailable /,/, some/DT/some arbitrary/JJ/arbitrary set/NN/set of/IN/of directories/NNS/directories on/IN/on different/JJ/different machines/NNS/machines becomes/VBZ/becomes unavailable/NNP/unavailable. in/IN/in addition/NN/addition /,/, a/DT/a separate/JJ/separate accreditation/NN/accreditation mechanism/NN/mechanism controls/NNS/controls which/WDT/which machine/NN/machine is/VBZ/is allowed/VBN/allowed to/TO/to attach/VB/attach which/WDT/which directory/NN/directory to/TO/to its/PRP$/its tree/NNP/tree. thus/RB/thus /,/, a/DT/a user/NN/user might/MD/might be/VB/be able/JJ/able to/TO/to access/NN/access a/DT/a remote/NN/remote directory/NN/directory tree/NN/tree on/IN/on one/CD/one client/NN/client but/CC/but be/VB/be denied/VBN/denied access/NN/access on/IN/on another/DT/another client/NN/client /./. 17.2.3/CD/17.2.3 implementation/NN/implementation techniques/NNS/techniques implementation/NN/implementation of/IN/of transparent/NN/transparent naming/VBG/naming requires/NNS/requires a/DT/a provision/NN/provision for/IN/for the/DT/the mapping/VBG/mapping of/IN/of a/DT/a file/NN/file naine/NN/naine to/TO/to the/DT/the associated/VBN/associated location/NNP/location. to/TO/to keep/VB/keep this/DT/this mapping/NN/mapping manageable/NN/manageable /,/, we/PRP/we must/MD/must aggregate/VB/aggregate sets/NNS/sets of/IN/of files/NNS/files into/IN/into component/NN/component units/NNS/units and/CC/and provide/VB/provide the/DT/the mapping/NN/mapping on/IN/on a/DT/a component-unit/JJ/component-unit basis/NN/basis rather/RB/rather than/IN/than on/IN/on a/DT/a single-file/JJ/single-file basis/NNP/basis. this/DT/this aggregation/NN/aggregation serves/VBZ/serves administrative/JJ/administrative purposes/NNS/purposes as/IN/as well/NNP/well. unix-like/NNP/unix-like systems/NNS/systems use/VBP/use the/DT/the hierarchical/JJ/hierarchical directory/NN/directory tree/NN/tree to/TO/to provide/VB/provide name-to-location/JJ/name-to-location mapping/NN/mapping and/CC/and to/TO/to aggregate/VB/aggregate files/NNS/files recursively/RB/recursively into/IN/into directories/NNS/directories /./. 710/CD/710 chapter/NN/chapter 17/CD/17 17.3/CD/17.3 to/TO/to enhance/NN/enhance the/DT/the availability/NN/availability of/IN/of the/DT/the crucial/JJ/crucial mapping/NN/mapping information/NN/information /,/, we/PRP/we can/MD/can use/VB/use replication/NN/replication /,/, local/JJ/local caching/NN/caching /,/, or/CC/or both/NNP/both. as/IN/as we/PRP/we noted/VBD/noted /,/, location/NN/location independence/NN/independence means/VBZ/means that/DT/that the/DT/the mapping/NN/mapping changes/NNS/changes over/IN/over time/NN/time ;/:/; hence/NN/hence /,/, replicating/VBG/replicating the/DT/the mapping/VBG/mapping makes/VBZ/makes a/DT/a simple/JJ/simple yet/NN/yet consistent/NN/consistent update/NN/update of/IN/of this/DT/this information/NN/information impossible/NNP/impossible. a/DT/a teclllcique/NN/teclllcique to/TO/to overcome/VB/overcome this/DT/this obstacle/NN/obstacle is/VBZ/is to/TO/to introduce/VB/introduce low-level/JJ/low-level me/PRP/me textual/JJ/textual file/NN/file names/NNS/names are/VBP/are mapped/VBN/mapped to/TO/to lower-level/NNP/lower-level file/NN/file identifiers/NNS/identifiers that/WDT/that indicate/VBP/indicate to/TO/to which/WDT/which component/NN/component unit/NN/unit the/DT/the file/NN/file belongs/NNP/belongs. these/DT/these identifiers/NNS/identifiers are/VBP/are still/RB/still location/NN/location independent/NNP/independent. they/PRP/they can/MD/can be/VB/be replicated/VBN/replicated and/CC/and cached/VBD/cached freely/RB/freely without/IN/without being/VBG/being invalidated/VBN/invalidated by/IN/by migration/NN/migration of/IN/of component/NN/component units/NNP/units. the/DT/the inevitable/JJ/inevitable price/NN/price is/VBZ/is the/DT/the need/NN/need for/IN/for a/DT/a second/JJ/second level/NN/level of/IN/of mapping/VBG/mapping /,/, which/WDT/which maps/NNS/maps component/VBP/component units/NNS/units to/TO/to locations/NNS/locations and/CC/and needs/VBZ/needs a/DT/a simple/JJ/simple yet/NN/yet consistent/NN/consistent update/NN/update mechanism/NNP/mechanism. implementing/NN/implementing unix-like/-NONE-/unix-like directory/NN/directory trees/NNS/trees using/VBG/using these/DT/these low-levet/JJ/low-levet location-independent/JJ/location-independent identifiers/NNS/identifiers makes/VBZ/makes the/DT/the whole/JJ/whole hierarchy/NN/hierarchy invariant/NN/invariant under/IN/under component-unit/JJ/component-unit migration/NNP/migration. the/DT/the only/JJ/only aspect/NN/aspect that/WDT/that does/VBZ/does change/NN/change is/VBZ/is the/DT/the component-unit/JJ/component-unit location/NN/location mapping/VBG/mapping /./. a/DT/a common/JJ/common way/NN/way to/TO/to implement/VB/implement low-level/JJ/low-level identifiers/NNS/identifiers is/VBZ/is to/TO/to use/VB/use structured/VBN/structured names/NNP/names. these/DT/these names/NNS/names are/VBP/are bit/VBN/bit strings/NNS/strings that/IN/that usually/RB/usually have/VBP/have two/CD/two parts/NNP/parts. the/DT/the first/JJ/first part/NN/part identifies/NNS/identifies the/DT/the component/NN/component unit/NN/unit to/TO/to which/WDT/which the/DT/the file/NN/file belongs/VBZ/belongs ;/:/; the/DT/the second/JJ/second part/NN/part identifies/NNS/identifies the/DT/the particular/JJ/particular file/NN/file within/IN/within the/DT/the unit/NNP/unit. variants/NNS/variants with/IN/with more/JJR/more parts/NNS/parts are/VBP/are possible/NNP/possible. the/DT/the invariant/NN/invariant of/IN/of structured/VBN/structured names/NNS/names /,/, however/RB/however /,/, is/VBZ/is that/IN/that individual/JJ/individual parts/NNS/parts of/IN/of the/DT/the name/NN/name are/VBP/are unique/JJ/unique at/IN/at all/DT/all times/NNS/times only/RB/only within/IN/within the/DT/the context/NN/context of/IN/of the/DT/the rest/NN/rest of/IN/of the/DT/the parts/NNP/parts. we/PRP/we can/MD/can obtain/VB/obtain uniqueness/NN/uniqueness at/IN/at all/DT/all times/NNS/times by/IN/by taking/NN/taking care/NN/care not/RB/not to/TO/to reuse/VB/reuse a/DT/a name/NN/name that/WDT/that is/VBZ/is still/RB/still in/IN/in use/NN/use /,/, by/IN/by adding/NN/adding sufficiently/RB/sufficiently more/RBR/more bits/NNS/bits /:/( this/DT/this method/NN/method is/VBZ/is used/VBN/used in/IN/in afs/NNS/afs /:/) /,/, or/CC/or by/IN/by using/VBG/using a/DT/a timestamp/NN/timestamp as/IN/as one/CD/one part/NN/part of/IN/of the/DT/the name/NN/name /:/( as/IN/as done/NN/done in/IN/in apollo/NN/apollo domain/NN/domain /:/) /./. another/DT/another way/NN/way to/TO/to view/VB/view this/DT/this process/NN/process is/VBZ/is that/IN/that we/PRP/we are/VBP/are taking/VBG/taking a/DT/a location-transparent/JJ/location-transparent system/NN/system /,/, such/JJ/such as/IN/as ibis/NNS/ibis /,/, and/CC/and adding/VBG/adding another/DT/another level/NN/level of/IN/of abstraction/NN/abstraction to/TO/to produce/VB/produce a/DT/a location-independent/JJ/location-independent naming/NN/naming scheme/NN/scheme /./. aggregating/VBG/aggregating files/NNS/files into/IN/into component/NN/component units/NNS/units and/CC/and using/VBG/using lower-level/JJ/lower-level locationindependent/NN/locationindependent file/NN/file identifiers/NNS/identifiers are/VBP/are techniques/NNS/techniques exemplified/VBN/exemplified in/IN/in afs/NNS/afs /./. consider/NN/consider a/DT/a user/NN/user who/WP/who requests/NNS/requests access/VBP/access to/TO/to a/DT/a remote/NN/remote file/NNP/file. the/DT/the server/NN/server storing/VBG/storing the/DT/the file/NN/file has/VBZ/has been/VBN/been located/VBN/located by/IN/by the/DT/the nanling/VBG/nanling scheme/NN/scheme /,/, and/CC/and now/RB/now the/DT/the actual/JJ/actual data/NNS/data transfer/VBP/transfer must/MD/must take/VB/take place/NN/place /./. one/CD/one way/NN/way to/TO/to achieve/VB/achieve this/DT/this transfer/NN/transfer is/VBZ/is through/IN/through a/DT/a whereby/NN/whereby requests/VBZ/requests for/IN/for accesses/NNS/accesses are/VBP/are delivered/VBN/delivered to/TO/to the/DT/the server/NN/server /,/, the/DT/the server/NN/server machine/NN/machine performs/NNS/performs the/DT/the accesses/NNS/accesses /,/, and/CC/and their/PRP$/their results/NNS/results are/VBP/are forwarded/VBN/forwarded back/RB/back to/TO/to the/DT/the user/NNP/user. one/CD/one of/IN/of the/DT/the most/RBS/most common/JJ/common ways/NNS/ways of/IN/of implementing/VBG/implementing remote/NN/remote service/NN/service is/VBZ/is the/DT/the remote/NN/remote procedure/NN/procedure call/NN/call /:/( rpc/NN/rpc /:/) paradigm/NN/paradigm /,/, which/WDT/which we/PRP/we discussed/VBD/discussed in/IN/in chapter/NN/chapter 3/CD/3. a/DT/a direct/JJ/direct analogy/NN/analogy exists/NNS/exists between/IN/between disk-access/JJ/disk-access methods/NNS/methods in/IN/in conventional/JJ/conventional file/NN/file systems/NNS/systems and/CC/and the/DT/the remote-service/NN/remote-service method/NN/method in/IN/in a/DT/a dfs/NN/dfs /:/: using/VBG/using the/DT/the remote-service/NN/remote-service method/NN/method is/VBZ/is analogous/JJ/analogous to/TO/to performing/VBG/performing a/DT/a disk/NN/disk access/NN/access for/IN/for each/DT/each access/NN/access request/NN/request /./. to/TO/to ensure/VB/ensure reasonable/JJ/reasonable performance/NN/performance of/IN/of a/DT/a remote-service/JJ/remote-service mechanism/NN/mechanism /,/, we/PRP/we can/MD/can use/VB/use a/DT/a form/NN/form of/IN/of caching/NNP/caching. in/IN/in conventional/JJ/conventional file/NN/file systems/NNS/systems /,/, the/DT/the rationale/NN/rationale for/IN/for caching/NN/caching is/VBZ/is to/TO/to reduce/VB/reduce disk/NN/disk i/0/-NONE-/i/0 /./( thereby/NN/thereby increasing/VBG/increasing performance/NN/performance /:/) /,/, whereas/IN/whereas in/IN/in dfss/NN/dfss /,/, the/DT/the goal/NN/goal is/VBZ/is to/TO/to reduce/VB/reduce both/DT/both network/NN/network traffic/NN/traffic and/CC/and disk/NN/disk i/0/NNP/i/0. in/IN/in the/DT/the following/JJ/following discussion/NN/discussion /,/, we/PRP/we describe/VBP/describe the/DT/the implementation/NN/implementation of/IN/of caching/VBG/caching in/IN/in a/DT/a dfs/NN/dfs and/CC/and contrast/NN/contrast it/PRP/it with/IN/with the/DT/the basic/JJ/basic remote-service/NN/remote-service paradigm/NN/paradigm /./. 17.3/CD/17.3 711/CD/711 17.3.1/CD/17.3.1 basic/JJ/basic caching/NN/caching scheme/NN/scheme the/DT/the concept/NN/concept of/IN/of caching/VBG/caching is/VBZ/is simple/NNP/simple. if/IN/if the/DT/the data/NNS/data needed/VBD/needed to/TO/to satisfy/VB/satisfy the/DT/the access/NN/access request/NN/request are/VBP/are not/RB/not already/RB/already cached/VBN/cached /,/, then/RB/then a/DT/a copy/NN/copy of/IN/of those/DT/those data/NNS/data is/VBZ/is brought/VBN/brought from/IN/from the/DT/the server/NN/server to/TO/to the/DT/the client/NN/client system/NNP/system. accesses/NNS/accesses are/VBP/are performed/VBN/performed on/IN/on the/DT/the cached/JJ/cached copy/NNP/copy. the/DT/the idea/NN/idea is/VBZ/is to/TO/to retain/VB/retain recently/RB/recently accessed/VBN/accessed disk/NN/disk blocks/NNS/blocks in/IN/in the/DT/the cache/NN/cache /,/, so/RB/so that/IN/that repeated/VBN/repeated accesses/NNS/accesses to/TO/to the/DT/the same/JJ/same information/NN/information can/MD/can be/VB/be handled/VBN/handled locally/RB/locally /,/, without/IN/without additional/JJ/additional network/NN/network traffic/NN/traffic /./. a/DT/a replacement/NN/replacement policy/NN/policy /:/( for/IN/for example/NN/example /,/, the/DT/the least-recently-used/JJ/least-recently-used algorithm/NN/algorithm /:/) keeps/NNS/keeps the/DT/the cache/NN/cache size/NN/size bounded/NNP/bounded. no/DT/no direct/JJ/direct correspondence/NN/correspondence exists/NNS/exists between/IN/between accesses/NNS/accesses and/CC/and traffic/JJ/traffic to/TO/to the/DT/the server/NNP/server. files/VBZ/files are/VBP/are still/RB/still identified/VBD/identified with/IN/with one/CD/one master/NN/master copy/NN/copy residing/VBG/residing at/IN/at the/DT/the server/NN/server machine/NN/machine /,/, but/CC/but copies/NNS/copies /VBP/( or/CC/or parts/NNS/parts /:/) of/IN/of the/DT/the file/NN/file are/VBP/are scattered/VBN/scattered in/IN/in different/JJ/different caches/NNS/caches /./. when/WRB/when a/DT/a cached/JJ/cached copy/NN/copy is/VBZ/is modified/VBN/modified /,/, the/DT/the changes/NNS/changes need/VBP/need to/TO/to be/VB/be reflected/VBN/reflected on/IN/on the/DT/the master/NN/master copy/NN/copy to/TO/to preserve/VB/preserve the/DT/the relevant/NN/relevant consistency/NN/consistency semantics/NNP/semantics. the/DT/the problem/NN/problem of/IN/of keeping/VBG/keeping the/DT/the cached/JJ/cached copies/NNS/copies consistent/NN/consistent with/IN/with the/DT/the master/NN/master file/NN/file is/VBZ/is the/DT/the which/WDT/which we/PRP/we discuss/VBP/discuss in/IN/in section/NN/section 17.3.4/CD/17.3.4. dfs/NNS/dfs caching/VBG/caching could/MD/could just/RB/just as/IN/as easily/RB/easily be/VB/be called/VBN/called /,/, it/PRP/it acts/VBZ/acts sincilarly/RB/sincilarly to/TO/to demand-paged/JJ/demand-paged virtual/JJ/virtual memory/NN/memory /,/, except/IN/except that/DT/that the/DT/the backing/NN/backing store/NN/store usually/RB/usually is/VBZ/is not/RB/not a/DT/a local/JJ/local disk/NN/disk but/CC/but rather/RB/rather a/DT/a remote/NN/remote server/NNP/server. nfs/VBZ/nfs allows/VBZ/allows the/DT/the swap/NN/swap space/NN/space to/TO/to be/VB/be mounted/VBN/mounted remotely/RB/remotely /,/, so/RB/so it/PRP/it actually/RB/actually can/MD/can implement/VB/implement virtual/JJ/virtual memory/NN/memory over/IN/over a/DT/a network/NN/network /,/, notwithstanding/VBG/notwithstanding the/DT/the resulting/VBG/resulting performance/NN/performance penalty/NN/penalty /./. the/DT/the granularity/NN/granularity of/IN/of the/DT/the cached/JJ/cached data/NNS/data in/IN/in a/DT/a dfs/NN/dfs can/MD/can vary/VB/vary from/IN/from blocks/NNS/blocks of/IN/of a/DT/a file/NN/file to/TO/to an/DT/an entire/JJ/entire file/NNP/file. usually/RB/usually /,/, more/JJR/more data/NNS/data are/VBP/are cached/VBN/cached than/IN/than are/VBP/are needed/VBN/needed to/TO/to satisfy/VB/satisfy a/DT/a single/JJ/single access/NN/access /,/, so/RB/so that/IN/that many/JJ/many accesses/NNS/accesses can/MD/can be/VB/be served/VBN/served by/IN/by the/DT/the cached/JJ/cached data/NNP/data. this/DT/this procedure/NN/procedure is/VBZ/is much/JJ/much like/IN/like diskread-ahead/JJ/diskread-ahead /NN/( section/NN/section 11.6.2/CD/11.6.2 /CD/) /./. afs/NNS/afs caches/NNS/caches files/NNS/files in/IN/in large/JJ/large chunks/NNS/chunks /:/( 64/CD/64 kb/NN/kb /:/) /./. the/DT/the other/JJ/other systems/NNS/systems discussed/VBD/discussed in/IN/in this/DT/this chapter/NN/chapter support/NN/support caching/VBG/caching of/IN/of individual/JJ/individual blocks/NNS/blocks driven/RB/driven by/IN/by client/NN/client demand/NNP/demand. increasing/VBG/increasing the/DT/the caching/NN/caching unit/NN/unit increases/NNS/increases the/DT/the hit/NN/hit ratio/NN/ratio /,/, but/CC/but it/PRP/it also/RB/also increases/VBZ/increases the/DT/the miss/NN/miss penalty/NN/penalty /,/, because/IN/because each/DT/each miss/NN/miss requires/VBZ/requires more/JJR/more data/NNS/data to/TO/to be/VB/be transferred/NNP/transferred. it/PRP/it increases/VBZ/increases the/DT/the potential/JJ/potential for/IN/for consistency/NN/consistency problems/NNS/problems as/IN/as well/NNP/well. selecting/NN/selecting the/DT/the unit/NN/unit of/IN/of caching/VBG/caching involves/NNS/involves considering/VBG/considering parameters/NNS/parameters such/JJ/such as/IN/as the/DT/the network/NN/network transfer/NN/transfer unit/NN/unit and/CC/and the/DT/the rpc/NN/rpc protocol/NN/protocol service/NN/service unit/NN/unit /:/( if/IN/if an/DT/an rpc/NN/rpc protocol/NN/protocol is/VBZ/is used/VBN/used /-NONE-/) /./. the/DT/the network/NN/network transfer/NN/transfer unit/NN/unit /:/( for/IN/for ethernet/NN/ethernet /,/, a/DT/a packet/NN/packet /:/) is/VBZ/is about/IN/about 1.5/CD/1.5 kb/NN/kb /,/, so/RB/so larger/JJR/larger units/NNS/units of/IN/of cached/JJ/cached data/NNS/data need/VBP/need to/TO/to be/VB/be disassembled/VBN/disassembled for/IN/for delivery/NN/delivery and/CC/and reassembled/VBD/reassembled on/IN/on reception/NN/reception /./. block/NN/block size/NN/size and/CC/and total/JJ/total cache/NN/cache size/NN/size are/VBP/are obviously/RB/obviously of/IN/of importance/NN/importance for/IN/for blockcaching/NN/blockcaching schemes/NNP/schemes. in/IN/in unix-like/JJ/unix-like systems/NNS/systems /,/, common/JJ/common block/NN/block sizes/VBZ/sizes are/VBP/are 4/CD/4 kb/NN/kb and/CC/and 8/CD/8 kb/NNP/kb. for/IN/for large/JJ/large caches/NNS/caches /:/( over/IN/over 1mb/CD/1mb /CD/) /,/, large/JJ/large block/NN/block sizes/VBZ/sizes /:/( over/IN/over 8/CD/8 kb/NN/kb /NN/) are/VBP/are beneficial/NNP/beneficial. for/IN/for smaller/JJR/smaller caches/NNS/caches /,/, large/JJ/large block/NN/block sizes/VBZ/sizes are/VBP/are less/JJR/less beneficial/JJ/beneficial because/IN/because they/PRP/they result/VBP/result in/IN/in fewer/JJR/fewer blocks/NNS/blocks in/IN/in the/DT/the cache/NN/cache and/CC/and a/DT/a lower/JJR/lower hit/NN/hit ratio/NN/ratio /./. 17.3.2/CD/17.3.2 cache/NN/cache location/NN/location where/WRB/where should/MD/should the/DT/the cached/JJ/cached data/NNS/data be/VB/be stored-on/JJ/stored-on disk/NN/disk or/CC/or in/IN/in main/JJ/main memory/NN/memory disk/NN/disk caches/NNS/caches have/VBP/have one/CD/one clear/JJ/clear advantage/NN/advantage over/IN/over main-memory/JJ/main-memory caches/NNS/caches /:/: they/PRP/they are/VBP/are reliable/JJ/reliable /./. modifications/NNS/modifications to/TO/to cached/JJ/cached data/NNS/data are/VBP/are lost/VBN/lost in/IN/in a/DT/a crash/NN/crash if/IN/if the/DT/the cache/NN/cache is/VBZ/is kept/VBN/kept in/IN/in volatile/JJ/volatile memory/NNP/memory. moreove1/NNP/moreove1 ~/NNP/~ if/IN/if the/DT/the cached/VBN/cached data/NNS/data are/VBP/are kept/VBN/kept on/IN/on disk/NN/disk /,/, they/PRP/they are/VBP/are still/RB/still there/RB/there during/IN/during recovery/NN/recovery /,/, and/CC/and there/EX/there is/VBZ/is no/DT/no need/NN/need to/TO/to fetch/VB/fetch them/PRP/them again/NNP/again. main-memory/NNP/main-memory caches/VBZ/caches have/VBP/have several/JJ/several advantages/NNS/advantages of/IN/of their/PRP$/their own/JJ/own /,/, however/RB/however /:/: main-memory/JJ/main-memory caches/NNS/caches permit/NN/permit workstations/NNS/workstations to/TO/to be/VB/be diskless/NN/diskless /./. data/NNS/data can/MD/can be/VB/be accessed/VBN/accessed more/RBR/more quickly/RB/quickly from/IN/from a/DT/a cache/NN/cache in/IN/in main/NN/main memory/NN/memory than/IN/than from/IN/from one/CD/one on/IN/on a/DT/a disk/NN/disk /./. 712/CD/712 chapter/NN/chapter 17/CD/17 technology/NN/technology is/VBZ/is moving/VBG/moving toward/IN/toward larger/JJR/larger and/CC/and less/JJR/less expensive/JJ/expensive memory/NNP/memory. the/DT/the resulting/VBG/resulting performance/NN/performance speedup/NN/speedup is/VBZ/is predicted/VBN/predicted to/TO/to outweigh/JJ/outweigh the/DT/the advantages/NNS/advantages of/IN/of disk/NN/disk caches/NNS/caches /./. the/DT/the server/NN/server caches/VBZ/caches /:/( used/VBN/used to/TO/to speed/VB/speed up/RP/up disk/NN/disk i/0/-NONE-/i/0 /./) will/MD/will be/VB/be in/IN/in main/JJ/main memory/NN/memory regardless/NN/regardless of/IN/of where/WRB/where user/NN/user caches/NNS/caches are/VBP/are located/VBN/located ;/:/; if/IN/if we/PRP/we use/VBP/use main-memory/JJ/main-memory caches/NNS/caches on/IN/on the/DT/the user/NN/user machine/NN/machine /,/, too/RB/too /,/, we/PRP/we can/MD/can build/VB/build a/DT/a single/JJ/single caching/NN/caching nl.echanism/NN/nl.echanism for/IN/for use/NN/use by/IN/by both/DT/both servers/NNS/servers and/CC/and users/NNS/users /./. many/JJ/many remote-access/JJ/remote-access implementations/NNS/implementations can/MD/can be/VB/be thought/VBN/thought of/IN/of as/RB/as hybrids/VBZ/hybrids of/IN/of caching/VBG/caching and/CC/and remote/VB/remote service/NNP/service. in/IN/in nfs/NNS/nfs /,/, for/IN/for instance/NN/instance /,/, the/DT/the implementation/NN/implementation is/VBZ/is based/VBN/based on/IN/on remote/NN/remote service/NN/service but/CC/but is/VBZ/is augmented/VBN/augmented with/IN/with client/JJ/client- and/CC/and server-side/JJ/server-side memory/NN/memory caching/VBG/caching for/IN/for performance/NNP/performance. similarly/RB/similarly sprite/JJ/sprite 's/POS/'s implementation/NN/implementation is/VBZ/is based/VBN/based on/IN/on caching/NN/caching ;/:/; but/CC/but under/IN/under certain/JJ/certain circumstances/NNS/circumstances /,/, a/DT/a remote-service/JJ/remote-service method/NN/method is/VBZ/is adopted/NNP/adopted. thus/RB/thus /,/, to/TO/to evaluate/VB/evaluate the/DT/the two/CD/two methods/NNS/methods /,/, we/PRP/we must/MD/must evaluate/VB/evaluate the/DT/the degree/NN/degree to/TO/to which/WDT/which either/DT/either method/NN/method is/VBZ/is emphasized/VBN/emphasized /./. the/DT/the nfs/NNS/nfs protocol/NN/protocol and/CC/and most/JJS/most implementations/NNS/implementations do/VBP/do not/RB/not provide/VB/provide disk/NN/disk caching/VBG/caching /./. recent/JJ/recent solaris/NNS/solaris implementations/NNS/implementations ofnfs/NNS/ofnfs /VBP/( solaris/NNS/solaris 2.6/CD/2.6 and/CC/and beyond/IN/beyond /CD/) include/NN/include a/DT/a clientside/NN/clientside disk-caching/NN/disk-caching option/NN/option /,/, the/DT/the /:/- file/NN/file system/NNP/system. once/RB/once the/DT/the nfs/NNS/nfs client/NN/client reads/NNS/reads blocks/NNS/blocks of/IN/of a/DT/a file/NN/file from/IN/from the/DT/the serve1/NNP/serve1 ~/NNP/~ it/PRP/it caches/VBZ/caches them/PRP/them in/IN/in memory/NN/memory as/IN/as well/RB/well as/IN/as on/IN/on disk/NN/disk /./. if/IN/if the/DT/the memory/NN/memory copy/NN/copy is/VBZ/is flushed/VBN/flushed /,/, or/CC/or even/RB/even if/IN/if the/DT/the system/NN/system reboots/NNS/reboots /,/, the/DT/the disk/NN/disk cache/NN/cache is/VBZ/is referenced/NNP/referenced. if/IN/if a/DT/a needed/VBN/needed block/NN/block is/VBZ/is neither/DT/neither in/IN/in memory/NN/memory nor/CC/nor in/IN/in the/DT/the cachefs/NNS/cachefs disk/VBP/disk cache/PRP/cache /,/, an/DT/an rpc/NN/rpc is/VBZ/is sent/VBN/sent to/TO/to the/DT/the server/NN/server to/TO/to retrieve/VB/retrieve the/DT/the block/NN/block /,/, and/CC/and the/DT/the block/NN/block is/VBZ/is written/VBN/written into/IN/into the/DT/the disk/NN/disk cache/NN/cache as/IN/as well/RB/well as/IN/as stored/VBN/stored in/IN/in the/DT/the memory/NN/memory cache/NN/cache for/IN/for client/NN/client use/NN/use /./. 17.3.3/CD/17.3.3 cache-update/JJ/cache-update policy/NN/policy the/DT/the policy/NN/policy used/VBD/used to/TO/to write/VB/write modified/VBN/modified data/NNS/data blocks/NNS/blocks back/VBP/back to/TO/to the/DT/the server/NN/server 's/POS/'s master/NN/master copy/NN/copy has/VBZ/has a/DT/a critical/JJ/critical effect/NN/effect on/IN/on the/DT/the performance/NN/performance and/CC/and reliability/NNP/reliability. the/DT/the simplest/JJS/simplest policy/NN/policy is/VBZ/is to/TO/to write/VB/write data/NNS/data to/TO/to disk/VB/disk as/IN/as soon/RB/soon as/IN/as they/PRP/they are/VBP/are placed/VBN/placed in/IN/in any/DT/any cache/NN/cache /./. the/DT/the advantage/NN/advantage of/IN/of a/DT/a is/VBZ/is reliability/NN/reliability /:/: little/JJ/little information/NN/information is/VBZ/is lost/VBN/lost when/WRB/when a/DT/a client/NN/client system/NN/system crashes/NNP/crashes. however/RB/however /,/, this/DT/this policy/NN/policy requires/VBZ/requires each/DT/each write/NN/write access/NN/access to/TO/to wait/VB/wait until/IN/until the/DT/the information/NN/information is/VBZ/is sent/VBN/sent to/TO/to the/DT/the server/NN/server /,/, so/RB/so it/PRP/it causes/VBZ/causes poor/JJ/poor write/NN/write performance/NNP/performance. caching/NN/caching with/IN/with write-through/JJ/write-through is/VBZ/is equivalent/JJ/equivalent to/TO/to using/VBG/using remote/NN/remote service/NN/service for/IN/for write/JJ/write accesses/NNS/accesses and/CC/and exploiting/VBG/exploiting caching/NN/caching for/IN/for read/NN/read accesses/NNS/accesses /./. an/DT/an alternative/NN/alternative is/VBZ/is the/DT/the also/RB/also known/VBN/known as/IN/as where/WRB/where we/PRP/we delay/VBP/delay updates/NNS/updates to/TO/to the/DT/the master/NN/master copy/NNP/copy. modifications/NNS/modifications are/VBP/are written/VBN/written to/TO/to the/DT/the cache/NN/cache and/CC/and then/RB/then are/VBP/are written/VBN/written through/IN/through to/TO/to the/DT/the server/NN/server at/IN/at a/DT/a later/JJ/later time/NNP/time. this/DT/this policy/NN/policy has/VBZ/has two/CD/two advantages/NNS/advantages over/IN/over write-through/NNP/write-through. first/JJ/first /,/, because/IN/because writes/NNS/writes are/VBP/are made/VBN/made to/TO/to the/DT/the cache/NN/cache /,/, write/JJ/write accesses/NNS/accesses complete/JJ/complete much/JJ/much more/RBR/more quickly/NNP/quickly. second/JJ/second /,/, data/NNS/data may/MD/may be/VB/be overwritten/VBN/overwritten before/IN/before they/PRP/they are/VBP/are written/VBN/written back/RB/back /,/, in/IN/in which/WDT/which case/NN/case only/RB/only the/DT/the last/JJ/last update/NN/update needs/VBZ/needs to/TO/to be/VB/be written/VBN/written at/IN/at all/NNP/all. unfortunately/RB/unfortunately /,/, delayed-write/JJ/delayed-write schemes/NNS/schemes introduce/VBP/introduce reliability/NN/reliability problems/NNS/problems /,/, since/IN/since unwritten/NN/unwritten data/NNS/data are/VBP/are lost/VBN/lost whenever/NN/whenever a/DT/a user/NN/user machine/NN/machine crashes/NNS/crashes /./. variations/NNS/variations of/IN/of the/DT/the delayed-write/JJ/delayed-write policy/NN/policy differ/NN/differ in/IN/in when/WRB/when modified/VBN/modified data/NNS/data blocks/NNS/blocks are/VBP/are flushed/VBN/flushed to/TO/to the/DT/the server/NNP/server. one/CD/one alternative/NN/alternative is/VBZ/is to/TO/to flush/VB/flush a/DT/a block/NN/block when/WRB/when it/PRP/it is/VBZ/is about/IN/about to/TO/to be/VB/be ejected/VBN/ejected from/IN/from the/DT/the client/NN/client 's/POS/'s cache/NNP/cache. this/DT/this option/NN/option can/MD/can result/VB/result in/IN/in good/JJ/good performance/NN/performance /,/, but/CC/but some/DT/some blocks/NNS/blocks can/MD/can reside/VB/reside in/IN/in the/DT/the client/NN/client 's/POS/'s cache/NN/cache a/DT/a long/JJ/long time/NN/time before/IN/before they/PRP/they are/VBP/are written/VBN/written back/RB/back to/TO/to the/DT/the server/NNP/server. a/DT/a compromise/NN/compromise between/IN/between this/DT/this alternative/NN/alternative and/CC/and the/DT/the write-through/JJ/write-through policy/NN/policy is/VBZ/is to/TO/to scan/JJ/scan the/DT/the cache/NN/cache at/IN/at regular/JJ/regular intervals/NNS/intervals and/CC/and to/TO/to flush/VB/flush blocks/NNS/blocks that/WDT/that have/VBP/have been/VBN/been modified/VBN/modified since/IN/since the/DT/the most/RBS/most recent/JJ/recent scan/NN/scan /,/, just/RB/just as/IN/as unix/CD/unix scans/NNS/scans 17.3/CD/17.3 713/CD/713 nfs/NNS/nfs server/RB/server network/NN/network workstation/NN/workstation figure/NN/figure 17.1/CD/17.1 cachefs/NNS/cachefs and/CC/and its/PRP$/its use/NN/use of/IN/of caching/VBG/caching /./. its/PRP$/its local/JJ/local cache/NNP/cache. sprite/NN/sprite uses/VBZ/uses this/DT/this policy/NN/policy with/IN/with a/DT/a 30-second/JJ/30-second interval/NNP/interval. nfs/NNS/nfs uses/VBZ/uses the/DT/the policy/NN/policy for/IN/for file/NN/file data/NNS/data /,/, but/CC/but once/RB/once a/DT/a write/JJ/write is/VBZ/is issued/VBN/issued to/TO/to the/DT/the server/NN/server durilcg/NN/durilcg a/DT/a cache/NN/cache flush/NN/flush /,/, the/DT/the write/NN/write must/MD/must reach/VB/reach the/DT/the server/NN/server 's/POS/'s disk/NN/disk before/IN/before it/PRP/it is/VBZ/is considered/VBN/considered complete/JJ/complete /./. nfs/NNS/nfs treats/NNS/treats meta/VBP/meta data/NNS/data /:/( directory/NN/directory data/NNS/data and/CC/and file-attribute/JJ/file-attribute data/NNS/data /:/) differently/NNP/differently. any/DT/any metadata/NN/metadata changes/NNS/changes are/VBP/are issued/VBN/issued synchronously/RB/synchronously to/TO/to the/DT/the server/NNP/server. thus/RB/thus /,/, file-structure/JJ/file-structure loss/NN/loss and/CC/and directory-structure/JJ/directory-structure corruption/NN/corruption are/VBP/are avoided/VBN/avoided when/WRB/when a/DT/a client/NN/client or/CC/or the/DT/the server/NN/server crashes/VBZ/crashes /./. for/IN/for nfs/NNS/nfs with/IN/with cachefs/NNS/cachefs /,/, writes/VBZ/writes are/VBP/are also/RB/also written/VBN/written to/TO/to the/DT/the local/JJ/local disk/NN/disk cache/NN/cache area/NN/area when/WRB/when they/PRP/they are/VBP/are written/VBN/written to/TO/to the/DT/the server/NN/server /,/, to/TO/to keep/VB/keep all/PDT/all copies/NNS/copies consistent/NNP/consistent. thus/RB/thus /,/, nfs/NNS/nfs with/IN/with cachefs/NNS/cachefs improves/NNS/improves performance/NN/performance over/IN/over standard/JJ/standard nfs/NNS/nfs on/IN/on a/DT/a read/NN/read request/NN/request with/IN/with a/DT/a cachefs/NNS/cachefs cache/PRP/cache hit/VBD/hit but/CC/but decreases/NNS/decreases performance/NN/performance for/IN/for read/NN/read or/CC/or write/VB/write requests/NNS/requests with/IN/with a/DT/a cache/NN/cache miss/NNP/miss. as/IN/as with/IN/with all/DT/all caches/NNS/caches /,/, it/PRP/it is/VBZ/is vital/JJ/vital to/TO/to have/VB/have a/DT/a high/JJ/high cache/NN/cache hit/VBD/hit rate/NN/rate to/TO/to gain/VB/gain performance/NNP/performance. figure/NN/figure 17.1/CD/17.1 shows/NNS/shows how/WRB/how cachefs/NNS/cachefs uses/VBZ/uses write-through/JJ/write-through and/CC/and write-back/JJ/write-back caching/NN/caching /./. yet/RB/yet another/DT/another variation/NN/variation on/IN/on delayed/VBN/delayed write/JJ/write is/VBZ/is to/TO/to write/VB/write data/NNS/data back/RB/back to/TO/to the/DT/the server/NN/server when/WRB/when the/DT/the file/NN/file is/VBZ/is closed/NNP/closed. this/DT/this is/VBZ/is used/VBN/used in/IN/in afs/NNP/afs. in/IN/in the/DT/the case/NN/case of/IN/of files/NNS/files that/WDT/that are/VBP/are open/JJ/open for/IN/for short/JJ/short periods/NNS/periods or/CC/or are/VBP/are modified/VBN/modified rarely/RB/rarely /,/, this/DT/this policy/NN/policy does/VBZ/does not/RB/not significantly/RB/significantly reduce/VB/reduce network/NN/network traffic/NNP/traffic. in/IN/in addition/NN/addition /,/, the/DT/the write-on-close/JJ/write-on-close policy/NN/policy requires/VBZ/requires the/DT/the closing/JJ/closing process/NN/process to/TO/to delay/VB/delay while/IN/while the/DT/the file/NN/file is/VBZ/is written/VBN/written through/IN/through /,/, which/WDT/which reduces/NNS/reduces the/DT/the performance/NN/performance advantages/NNS/advantages of/IN/of delayed/VBN/delayed writes/NNP/writes. for/IN/for files/NNS/files that/WDT/that are/VBP/are open/JJ/open for/IN/for long/RB/long periods/NNS/periods and/CC/and are/VBP/are modified/VBN/modified frequently/RB/frequently /,/, however/RB/however /,/, the/DT/the performance/NN/performance advantages/NNS/advantages of/IN/of this/DT/this policy/NN/policy over/IN/over delayed/VBN/delayed write/NN/write with/IN/with more/JJR/more frequent/JJ/frequent flushing/NN/flushing are/VBP/are apparent/JJ/apparent /./. 17.3.4/CD/17.3.4 consistency/NN/consistency a/DT/a client/NN/client machine/NN/machine is/VBZ/is faced/VBN/faced with/IN/with the/DT/the problem/NN/problem of/IN/of deciding/VBG/deciding whether/IN/whether a/DT/a locally/RB/locally cached/VBN/cached copy/NN/copy of/IN/of the/DT/the data/NNS/data is/VBZ/is consistent/JJ/consistent with/IN/with the/DT/the master/NN/master copy/NN/copy /:/( and/CC/and hence/NN/hence can/MD/can be/VB/be used/VBN/used /-NONE-/) /./. if/IN/if 714/CD/714 chapter/NN/chapter 17/CD/17 the/DT/the client/NN/client machine/NN/machine determines/NNS/determines that/WDT/that its/PRP$/its cached/VBD/cached data/NNS/data are/VBP/are out/IN/out of/IN/of date/NN/date /,/, accesses/NNS/accesses can/MD/can no/RB/no longer/RBR/longer be/VB/be served/VBN/served by/IN/by those/DT/those cached/VBN/cached data/NNP/data. an/DT/an up-to-date/JJ/up-to-date copy/NN/copy of/IN/of the/DT/the data/NNS/data needs/VBZ/needs to/TO/to be/VB/be cached/NNP/cached. there/RB/there are/VBP/are two/CD/two approaches/NNS/approaches to/TO/to verifying/VBG/verifying the/DT/the validity/NN/validity of/IN/of cached/JJ/cached data/NNS/data /:/: client-initiated/JJ/client-initiated approach/NNP/approach. the/DT/the client/NN/client initiates/VBZ/initiates a/DT/a validity/NN/validity check/NN/check /,/, in/IN/in which/WDT/which it/PRP/it contacts/VBZ/contacts the/DT/the server/NN/server and/CC/and checks/NNS/checks whether/IN/whether the/DT/the local/JJ/local data/NNS/data are/VBP/are consistent/JJ/consistent with/IN/with the/DT/the master/NN/master copy/NNP/copy. the/DT/the frequency/NN/frequency of/IN/of the/DT/the validity/NN/validity checking/VBG/checking is/VBZ/is the/DT/the crux/NN/crux of/IN/of this/DT/this approach/NN/approach and/CC/and determines/NNS/determines the/DT/the resulting/VBG/resulting consistency/NN/consistency semantics/NNP/semantics. it/PRP/it can/MD/can range/VB/range from/IN/from a/DT/a check/NN/check before/IN/before every/DT/every access/NN/access to/TO/to a/DT/a check/NN/check only/RB/only on/IN/on first/JJ/first access/NN/access to/TO/to a/DT/a file/NN/file /:/( on/IN/on file/NN/file open/JJ/open /,/, basically/RB/basically /:/) /./. every/DT/every access/NN/access coupled/VBN/coupled with/IN/with a/DT/a validity/NN/validity check/NN/check is/VBZ/is delayed/VBN/delayed /,/, compared/VBN/compared with/IN/with an/DT/an access/NN/access served/VBN/served immediately/RB/immediately by/IN/by the/DT/the cache/NN/cache /./. alternatively/RB/alternatively /,/, checks/NNS/checks can/MD/can be/VB/be initiated/VBN/initiated at/IN/at fixed/VBN/fixed time/NN/time intervals/NNP/intervals. depending/NN/depending on/IN/on its/PRP$/its frequency/NN/frequency /,/, the/DT/the validity/NN/validity check/NN/check can/MD/can load/VB/load both/DT/both the/DT/the network/NN/network and/CC/and the/DT/the server/NN/server /./. server-initiated/JJ/server-initiated approach/NNP/approach. the/DT/the server/NN/server records/NNS/records /,/, for/IN/for each/DT/each client/NN/client /,/, the/DT/the files/NNS/files /:/( or/CC/or parts/NNS/parts of/IN/of files/NNS/files /:/) that/IN/that it/PRP/it caches/NNP/caches. when/WRB/when the/DT/the server/NN/server detects/VBZ/detects a/DT/a potential/JJ/potential inconsistency/NN/inconsistency /,/, it/PRP/it must/MD/must react/NNP/react. a/DT/a potential/JJ/potential for/IN/for inconsistency/NN/inconsistency occurs/NNS/occurs when/WRB/when two/CD/two different/JJ/different clients/NNS/clients in/IN/in conflicting/NN/conflicting modes/NNS/modes cache/VBP/cache a/DT/a file/NNP/file. if/IN/if unix/CD/unix semantics/NNS/semantics /:/( section/NN/section 10.5.3/CD/10.5.3 /CD/) is/VBZ/is implemented/VBN/implemented /,/, we/PRP/we can/MD/can resolve/VB/resolve the/DT/the potential/JJ/potential inconsistency/NN/inconsistency by/IN/by having/NN/having the/DT/the server/NN/server play/NN/play an/DT/an active/JJ/active role/NNP/role. the/DT/the server/NN/server must/MD/must be/VB/be notified/VBN/notified whenever/RP/whenever a/DT/a file/NN/file is/VBZ/is opened/VBN/opened /,/, and/CC/and the/DT/the intended/VBN/intended mode/NN/mode /:/( read/NN/read or/CC/or write/VB/write /CD/) must/MD/must be/VB/be indicated/VBN/indicated for/IN/for every/DT/every open/NNP/open. the/DT/the server/NN/server can/MD/can then/RB/then act/VB/act when/WRB/when it/PRP/it detects/VBZ/detects that/IN/that a/DT/a file/NN/file has/VBZ/has been/VBN/been opened/VBN/opened simultaneously/RB/simultaneously in/IN/in conflicting/NN/conflicting modes/NNS/modes by/IN/by disabling/VBG/disabling caching/VBG/caching for/IN/for that/DT/that particular/JJ/particular file/NNP/file. actually/RB/actually /,/, disabling/VBG/disabling caching/NN/caching results/NNS/results in/IN/in switching/VBG/switching to/TO/to a/DT/a remote-service/NN/remote-service mode/NN/mode of/IN/of operation/NN/operation /./. 17.3.5/CD/17.3.5 a/DT/a comparison/NN/comparison of/IN/of caching/VBG/caching and/CC/and remote/VB/remote service/NN/service essentially/RB/essentially /,/, the/DT/the choice/NN/choice between/IN/between caching/NN/caching and/CC/and remote/VB/remote service/NN/service trades/NNS/trades off/IN/off potentially/RB/potentially increased/VBN/increased performance/NN/performance with/IN/with decreased/VBN/decreased simplicity/NNP/simplicity. we/PRP/we evaluate/VBP/evaluate this/DT/this tradeoff/NN/tradeoff by/IN/by listing/NN/listing the/DT/the advantages/NNS/advantages and/CC/and disadvantages/NNS/disadvantages of/IN/of the/DT/the two/CD/two methods/NNS/methods /:/: when/WRB/when caching/VBG/caching is/VBZ/is used/VBN/used /,/, the/DT/the local/JJ/local cache/NN/cache can/MD/can handle/VB/handle a/DT/a substantial/JJ/substantial number/NN/number of/IN/of the/DT/the remote/NN/remote accesses/VBZ/accesses efficiently/NNP/efficiently. capitalizing/NN/capitalizing on/IN/on locality/NN/locality in/IN/in file-access/JJ/file-access patterns/NNS/patterns makes/VBZ/makes caching/VBG/caching even/RB/even more/JJR/more attractive/NNP/attractive. thus/RB/thus /,/, most/RBS/most of/IN/of the/DT/the remote/NN/remote accesses/VBZ/accesses will/MD/will be/VB/be served/VBN/served as/IN/as fast/JJ/fast as/IN/as will/MD/will local/JJ/local ones/NNP/ones. moreover/RB/moreover /,/, servers/NNS/servers are/VBP/are contacted/VBN/contacted only/RB/only occasionally/RB/occasionally /,/, rather/RB/rather than/IN/than for/IN/for each/DT/each access/NNP/access. consequently/RB/consequently /,/, server/RB/server load/VB/load and/CC/and network/NN/network traffic/NN/traffic are/VBP/are reduced/VBN/reduced /,/, and/CC/and the/DT/the potential/JJ/potential for/IN/for scalability/NN/scalability is/VBZ/is enhanced/NNP/enhanced. by/IN/by contrast/NN/contrast /,/, when/WRB/when the/DT/the remote-service/JJ/remote-service method/NN/method is/VBZ/is used/VBN/used /,/, every/DT/every remote/NN/remote access/NN/access is/VBZ/is handled/VBN/handled across/IN/across the/DT/the network/NN/network the/DT/the penalty/NN/penalty in/IN/in network/NN/network traffic/NN/traffic /,/, server/RB/server load/VB/load /,/, and/CC/and performance/NN/performance is/VBZ/is obvious/JJ/obvious /./. total/JJ/total network/NN/network overhead/NN/overhead is/VBZ/is lower/JJR/lower for/IN/for transmitting/NN/transmitting big/JJ/big chunks/NNS/chunks of/IN/of data/NNS/data /:/( as/IN/as is/VBZ/is done/VBN/done in/IN/in caching/NN/caching /:/) than/IN/than for/IN/for transmitting/NN/transmitting series/NN/series of/IN/of responses/NNS/responses to/TO/to specific/JJ/specific requests/NNS/requests /:/( as/IN/as in/IN/in the/DT/the remote-service/NN/remote-service method/NN/method /:/) /./. furthermore/JJR/furthermore /,/, disk-access/JJ/disk-access routines/NNS/routines on/IN/on the/DT/the server/NN/server may/MD/may be/VB/be better/JJR/better optimized/VBN/optimized if/IN/if it/PRP/it is/VBZ/is known/VBN/known that/IN/that requests/NNS/requests will/MD/will always/RB/always be/VB/be for/IN/for large/JJ/large /,/, contiguous/JJ/contiguous segments/NNS/segments of/IN/of data/NNS/data rather/RB/rather than/IN/than for/IN/for random/NN/random disk/NN/disk blocks/NNS/blocks /./. the/DT/the cache-consistency/NN/cache-consistency problem/NN/problem is/VBZ/is the/DT/the major/JJ/major drawback/NN/drawback of/IN/of caching/NNP/caching. when/WRB/when access/NN/access patterns/VBZ/patterns exhibit/NN/exhibit infrequent/NN/infrequent writes/VBZ/writes /,/, caching/VBG/caching is/VBZ/is superior/NNP/superior. however/RB/however /,/, 17.4/CD/17.4 17.4/CD/17.4 715/CD/715 when/WRB/when writes/NNS/writes are/VBP/are frequent/JJ/frequent /,/, the/DT/the mechanisms/NNS/mechanisms employed/VBD/employed to/TO/to overcome/VB/overcome the/DT/the consistency/NN/consistency problem/NN/problem incur/NN/incur substantial/JJ/substantial overhead/NN/overhead in/IN/in terms/NNS/terms of/IN/of performance/NN/performance /,/, network/NN/network traffic/NN/traffic /,/, and/CC/and server/RB/server load/VB/load /./. so/RB/so that/IN/that caching/VBG/caching will/MD/will confer/VB/confer a/DT/a benefit/NN/benefit /,/, execution/NN/execution should/MD/should be/VB/be carried/VBN/carried out/RP/out on/IN/on machines/NNS/machines that/IN/that have/VBP/have either/DT/either local/JJ/local disks/NNS/disks or/CC/or large/JJ/large main/NN/main memories/NNP/memories. remote/NN/remote access/NN/access on/IN/on diskless/NN/diskless /,/, small-memory-capacity/NN/small-memory-capacity machines/NNS/machines should/MD/should be/VB/be done/VBN/done through/IN/through the/DT/the remote-service/JJ/remote-service method/NN/method /./. in/IN/in caching/NN/caching /,/, since/IN/since data/NNS/data are/VBP/are transferred/VBN/transferred en/NNS/en masse/VBP/masse between/IN/between the/DT/the server/NN/server and/CC/and the/DT/the client/NN/client /,/, rather/RB/rather than/IN/than in/IN/in response/NN/response to/TO/to the/DT/the specific/JJ/specific needs/NNS/needs of/IN/of a/DT/a file/NN/file operation/NN/operation /,/, the/DT/the lower-level/JJ/lower-level intermachine/NN/intermachine interface/NN/interface is/VBZ/is different/JJ/different from/IN/from the/DT/the upper-level/JJ/upper-level user/NN/user interface/NNP/interface. the/DT/the remote-service/NN/remote-service paradigm/NN/paradigm /,/, in/IN/in contrast/NN/contrast /,/, is/VBZ/is just/RB/just an/DT/an extension/NN/extension of/IN/of the/DT/the local/JJ/local file-system/NN/file-system interface/NN/interface across/IN/across the/DT/the network/NNP/network. thus/RB/thus /,/, the/DT/the intermachine/NN/intermachine interface/NN/interface mirrors/NNS/mirrors the/DT/the user/NN/user interface/NN/interface /./. there/EX/there are/VBP/are two/CD/two approaches/NNS/approaches for/IN/for storing/VBG/storing server-side/JJ/server-side information/NN/information when/WRB/when a/DT/a client/NN/client accesses/VBZ/accesses remote/NN/remote files/NNS/files /:/: either/DT/either the/DT/the server/NN/server tracks/VBZ/tracks each/DT/each file/NN/file being/VBG/being accessed/VBN/accessed by/IN/by each/DT/each client/NN/client /,/, or/CC/or it/PRP/it simply/RB/simply provides/VBZ/provides blocks/NNS/blocks as/IN/as they/PRP/they are/VBP/are requested/VBN/requested by/IN/by the/DT/the client/NN/client without/IN/without knowledge/NN/knowledge of/IN/of how/WRB/how those/DT/those blocks/NNS/blocks are/VBP/are used/NNP/used. in/IN/in the/DT/the former/JJ/former case/NN/case /,/, the/DT/the service/NN/service provided/VBD/provided is/VBZ/is stateful/JJ/stateful ;/:/; in/IN/in the/DT/the latter/NN/latter case/NN/case /,/, it/PRP/it is/VBZ/is stateless/NN/stateless /./. the/DT/the typical/JJ/typical scenario/NN/scenario involving/VBG/involving a/DT/a is/VBZ/is as/IN/as follows/NNS/follows /:/: a/DT/a client/NN/client must/MD/must perform/VB/perform an/DT/an open/JJ/open /NN/( /:/) operation/NN/operation on/IN/on a/DT/a file/NN/file before/IN/before accessing/NN/accessing that/IN/that file/NNP/file. the/DT/the server/NN/server fetches/VBZ/fetches information/NN/information about/IN/about the/DT/the file/NN/file from/IN/from its/PRP$/its disk/NN/disk /,/, stores/NNS/stores it/PRP/it in/IN/in its/PRP$/its memory/NN/memory /,/, and/CC/and gives/VBZ/gives the/DT/the client/NN/client a/DT/a connection/NN/connection identifier/NN/identifier that/WDT/that is/VBZ/is unique/VBP/unique to/TO/to the/DT/the client/NN/client and/CC/and the/DT/the open/JJ/open file/NN/file /./. /NN/( in/IN/in unix/NN/unix terms/NNS/terms /,/, the/DT/the server/NN/server fetches/VBZ/fetches the/DT/the inode/NN/inode and/CC/and gives/VBZ/gives the/DT/the client/NN/client a/DT/a file/NN/file descriptor/NN/descriptor /,/, which/WDT/which serves/NNS/serves as/IN/as an/DT/an index/NN/index to/TO/to an/DT/an in-core/JJ/in-core table/NN/table of/IN/of inodes/NNP/inodes. /NNP/) this/DT/this identifier/NN/identifier is/VBZ/is used/VBN/used for/IN/for subsequent/JJ/subsequent accesses/NNS/accesses ru1.til/JJ/ru1.til the/DT/the session/NN/session ends/NNP/ends. a/DT/a stateful/JJ/stateful service/NN/service is/VBZ/is characterized/VBN/characterized as/RB/as a/DT/a connection/NN/connection between/IN/between the/DT/the client/NN/client and/CC/and the/DT/the server/NN/server during/IN/during a/DT/a session/NNP/session. either/CC/either on/IN/on closing/JJ/closing the/DT/the file/NN/file or/CC/or through/IN/through a/DT/a garbage-collection/NN/garbage-collection mechanism/NN/mechanism /,/, the/DT/the server/NN/server must/MD/must reclaim/VB/reclaim the/DT/the main-memory/JJ/main-memory space/NN/space used/VBN/used by/IN/by clients/NNS/clients that/IN/that are/VBP/are no/DT/no longer/JJR/longer active/NNP/active. the/DT/the key/JJ/key point/NN/point regarding/VBG/regarding fault/NN/fault tolerance/NN/tolerance in/IN/in a/DT/a stateful/JJ/stateful service/NN/service approach/NN/approach is/VBZ/is that/IN/that the/DT/the server/NN/server keeps/VBZ/keeps main-memory/JJ/main-memory information/NN/information about/IN/about its/PRP$/its clients/NNP/clients. afs/NNS/afs is/VBZ/is a/DT/a stateful/JJ/stateful file/NN/file service/NN/service /./. a/DT/a avoids/NNS/avoids state/NN/state information/NN/information by/IN/by making/VBG/making each/DT/each request/NN/request self-contained/NNP/self-contained. that/IN/that is/VBZ/is /,/, each/DT/each request/NN/request identifies/NNS/identifies the/DT/the file/NN/file and/CC/and the/DT/the position/NN/position in/IN/in the/DT/the file/NN/file /:/( for/IN/for read/NN/read and/CC/and write/VB/write accesses/NNS/accesses /:/) in/IN/in full/NNP/full. the/DT/the server/NN/server does/VBZ/does not/RB/not need/VBP/need to/TO/to keep/VB/keep a/DT/a table/JJ/table of/IN/of open/JJ/open files/NNS/files in/IN/in main/JJ/main memory/NN/memory /,/, although/IN/although it/PRP/it usually/RB/usually does/VBZ/does so/RB/so for/IN/for efficiency/NN/efficiency reasons/NNP/reasons. moreover/RB/moreover /,/, there/EX/there is/VBZ/is no/DT/no need/NN/need to/TO/to establish/VB/establish and/CC/and terminate/VB/terminate a/DT/a com1.ection/NN/com1.ection through/IN/through open/JJ/open /NN/( /:/) and/CC/and close/JJ/close /NN/( /:/) operations/NNP/operations. they/PRP/they are/VBP/are totally/RB/totally redundant/JJ/redundant since/IN/since each/DT/each file/NN/file operation/NN/operation stands/VBZ/stands on/IN/on its/PRP$/its own/JJ/own and/CC/and is/VBZ/is not/RB/not considered/VBN/considered part/NN/part of/IN/of a/DT/a session/NNP/session. a/DT/a client/NN/client process/NN/process would/MD/would open/VB/open a/DT/a file/NN/file /,/, and/CC/and that/IN/that open/JJ/open would/MD/would not/RB/not result/VB/result in/IN/in the/DT/the sending/NN/sending of/IN/of a/DT/a remote/NN/remote message/NNP/message. reads/NNS/reads and/CC/and writes/NNS/writes would/MD/would take/VB/take place/NN/place as/IN/as remote/NN/remote messages/NNS/messages /:/( or/CC/or cache/PRP/cache lookups/VBZ/lookups /:/) /./. the/DT/the final/JJ/final close/NN/close by/IN/by the/DT/the client/NN/client would/MD/would again/VB/again result/NN/result in/IN/in only/RB/only a/DT/a local/JJ/local operation/NNP/operation. nfs/NNS/nfs is/VBZ/is a/DT/a stateless/NN/stateless file/NN/file service/NN/service /./. the/DT/the advantage/NN/advantage of/IN/of a/DT/a stateful/JJ/stateful over/IN/over a/DT/a stateless/NN/stateless service/NN/service is/VBZ/is increased/VBN/increased performance/NN/performance /./. file/NN/file information/NN/information is/VBZ/is cached/VBN/cached in/IN/in main/JJ/main memory/NN/memory and/CC/and can/MD/can be/VB/be accessed/VBN/accessed easily/RB/easily via/IN/via the/DT/the connection/NN/connection identifier/NN/identifier /,/, thereby/RB/thereby saving/VBG/saving disk/NN/disk accesses/NNP/accesses. in/IN/in addition/NN/addition /,/, a/DT/a stateful/JJ/stateful 716/CD/716 chapter/NN/chapter 17/CD/17 5/CD/5 server/NN/server knows/VBZ/knows whether/IN/whether a/DT/a file/NN/file is/VBZ/is open/JJ/open for/IN/for sequential/JJ/sequential access/NN/access and/CC/and can/MD/can therefore/VB/therefore read/VB/read ahead/RB/ahead the/DT/the next/JJ/next blocks/NNP/blocks. stateless/NN/stateless servers/NNS/servers cmmot/VBD/cmmot do/VBP/do so/RB/so /,/, since/IN/since they/PRP/they have/VBP/have no/DT/no knowledge/NN/knowledge of/IN/of the/DT/the purpose/NN/purpose of/IN/of the/DT/the client/NN/client 's/POS/'s requests/NNS/requests /./. the/DT/the distinction/NN/distinction between/IN/between stateful/JJ/stateful and/CC/and stateless/NN/stateless service/NN/service becomes/VBZ/becomes more/JJR/more evident/JJ/evident when/WRB/when we/PRP/we consider/VBP/consider the/DT/the effects/NNS/effects of/IN/of a/DT/a crash/JJ/crash that/IN/that occurs/NNS/occurs during/IN/during a/DT/a service/NN/service activity/NNP/activity. a/DT/a stateful/JJ/stateful server/NN/server loses/NNS/loses all/DT/all its/PRP$/its volatile/JJ/volatile state/NN/state in/IN/in a/DT/a crash/NNP/crash. ensuring/NN/ensuring the/DT/the graceful/JJ/graceful recovery/NN/recovery of/IN/of such/JJ/such a/DT/a server/NN/server involves/VBZ/involves restoring/VBG/restoring this/DT/this state/NN/state /,/, usually/RB/usually by/IN/by a/DT/a recovery/NN/recovery protocol/NN/protocol based/VBN/based on/IN/on a/DT/a dialog/NN/dialog with/IN/with clients/NNP/clients. less/JJR/less graceful/JJ/graceful recovery/NN/recovery requires/VBZ/requires that/IN/that the/DT/the operations/NNS/operations that/IN/that were/VBD/were underway/RB/underway when/WRB/when the/DT/the crash/NN/crash occurred/VBD/occurred be/VB/be aborted/VBN/aborted /./. a/DT/a different/JJ/different problem/NN/problem is/VBZ/is caused/VBN/caused by/IN/by client/NN/client failures/NNP/failures. the/DT/the server/NN/server needs/VBZ/needs to/TO/to become/VB/become aware/JJ/aware of/IN/of such/JJ/such failures/NNS/failures so/IN/so that/IN/that it/PRP/it can/MD/can reclaim/VB/reclaim space/NN/space allocated/VBN/allocated to/TO/to record/VB/record the/DT/the state/NN/state of/IN/of crashed/JJ/crashed client/NN/client processes/NNP/processes. this/DT/this phenomenon/NN/phenomenon is/VBZ/is sometimes/RB/sometimes referred/VBN/referred to/TO/to as/RB/as a/DT/a stateless/NN/stateless computer/NN/computer server/NN/server avoids/NNS/avoids these/DT/these problems/NNS/problems /,/, silcce/NN/silcce a/DT/a newly/RB/newly reincarnated/VBN/reincarnated server/NN/server can/MD/can respond/VB/respond to/TO/to a/DT/a self-contained/JJ/self-contained request/NN/request without/IN/without any/DT/any difficulty/NN/difficulty /./. therefore/RB/therefore /,/, the/DT/the effects/NNS/effects of/IN/of server/NN/server failures/NNS/failures and/CC/and recovery/NN/recovery are/VBP/are almost/RB/almost unnoticeable/JJ/unnoticeable /./. there/EX/there is/VBZ/is no/DT/no difference/NN/difference between/IN/between a/DT/a slow/JJ/slow server/NN/server and/CC/and a/DT/a recovering/NN/recovering server/NN/server from/IN/from a/DT/a client/NN/client 's/POS/'s point/NN/point of/IN/of view/NNP/view. the/DT/the client/NN/client keeps/VBZ/keeps retransmitting/VBG/retransmitting its/PRP$/its request/NN/request if/IN/if it/PRP/it receives/VBZ/receives no/DT/no response/NN/response /./. the/DT/the penalty/NN/penalty for/IN/for using/VBG/using the/DT/the robust/NN/robust stateless/NN/stateless service/NN/service is/VBZ/is longer/JJR/longer request/NN/request messages/NNS/messages and/CC/and slower/JJR/slower processing/NN/processing of/IN/of requests/NNS/requests /,/, since/IN/since there/EX/there is/VBZ/is no/DT/no in-core/JJ/in-core i,_'lformation/NN/i,_'lformation to/TO/to speed/VB/speed the/DT/the processing/NNP/processing. in/IN/in addition/NN/addition /,/, stateless/NN/stateless service/NN/service imposes/NNS/imposes additional/JJ/additional constraints/NNS/constraints on/IN/on the/DT/the design/NN/design of/IN/of the/DT/the dfs/NNP/dfs. first/RB/first /,/, since/IN/since each/DT/each request/NN/request identifies/NNS/identifies the/DT/the target/NN/target file/NN/file /,/, a/DT/a uniform/NN/uniform /,/, system-wide/JJ/system-wide /,/, low-level/JJ/low-level naming/NN/naming scheme/NN/scheme should/MD/should be/VB/be used/NNP/used. translating/NN/translating remote/NN/remote to/TO/to local/JJ/local names/NNS/names for/IN/for each/DT/each request/NN/request would/MD/would cause/VB/cause even/RB/even slower/JJR/slower processing/NN/processing of/IN/of the/DT/the requests/NNP/requests. second/JJ/second /,/, since/IN/since clients/NNS/clients retransmit/VBP/retransmit requests/NNS/requests for/IN/for file/NN/file operations/NNS/operations /,/, these/DT/these operations/NNS/operations must/MD/must be/VB/be idempotent/VBN/idempotent ;/:/; that/IN/that is/VBZ/is /,/, each/DT/each operation/NN/operation must/MD/must have/VB/have the/DT/the same/JJ/same effect/NN/effect and/CC/and return/NN/return the/DT/the same/JJ/same output/NN/output if/IN/if executed/VBN/executed several/JJ/several times/NNS/times consecutively/RB/consecutively /./. self-contained/JJ/self-contained read/NN/read and/CC/and write/VB/write accesses/NNS/accesses are/VBP/are idempotent/JJ/idempotent /,/, as/IN/as long/RB/long as/IN/as they/PRP/they use/VBP/use an/DT/an absolute/JJ/absolute byte/NN/byte count/NN/count to/TO/to indicate/VB/indicate the/DT/the position/NN/position withilc/NN/withilc the/DT/the file/NN/file they/PRP/they access/VBP/access and/CC/and do/VB/do not/RB/not rely/RB/rely on/IN/on an/DT/an incremental/JJ/incremental offset/NN/offset /:/( as/IN/as is/VBZ/is done/VBN/done in/IN/in unix/NN/unix read/NN/read /:/( /:/) and/CC/and write/JJ/write /NN/( /:/) system/NN/system calls/VBZ/calls /:/) /./. however/RB/however /,/, we/PRP/we must/MD/must be/VB/be careful/JJ/careful when/WRB/when implementing/VBG/implementing destructive/JJ/destructive operations/NNS/operations /:/( such/JJ/such as/IN/as deleting/NN/deleting a/DT/a file/NN/file /:/) to/TO/to make/VB/make them/PRP/them idempotent/JJ/idempotent /,/, too/RB/too /./. in/IN/in some/DT/some environments/NNS/environments /,/, a/DT/a stateful/JJ/stateful service/NN/service is/VBZ/is a/DT/a necessity/NNP/necessity. if/IN/if the/DT/the server/NN/server employs/VBZ/employs the/DT/the server-initiated/JJ/server-initiated method/NN/method for/IN/for cache/NN/cache validation/NN/validation /,/, it/PRP/it camcot/VBD/camcot provide/VB/provide stateless/NN/stateless service/NN/service /,/, since/IN/since it/PRP/it maintains/VBZ/maintains a/DT/a record/NN/record of/IN/of which/WDT/which files/NNS/files are/VBP/are cached/VBN/cached by/IN/by which/WDT/which clients/NNS/clients /./. the/DT/the way/NN/way unix/NN/unix uses/NNS/uses file/IN/file descriptors/NNS/descriptors and/CC/and implicit/JJ/implicit offsets/NNS/offsets is/VBZ/is inherently/RB/inherently stateful/JJ/stateful /./. servers/NNS/servers must/MD/must mailctain/VB/mailctain tables/NNS/tables to/TO/to map/VB/map the/DT/the file/NN/file descriptors/NNS/descriptors to/TO/to inodes/NNS/inodes and/CC/and must/MD/must store/VB/store the/DT/the current/JJ/current offset/NN/offset within/IN/within a/DT/a file/NNP/file. this/DT/this requirement/NN/requirement is/VBZ/is why/WRB/why nfs/NNS/nfs /,/, which/WDT/which employs/NNS/employs a/DT/a stateless/NN/stateless service/NN/service /,/, does/VBZ/does not/RB/not use/VB/use file/JJ/file descriptors/NNS/descriptors and/CC/and does/VBZ/does include/NN/include an/DT/an explicit/NN/explicit offset/NN/offset in/IN/in every/DT/every access/NN/access /./. replication/NN/replication of/IN/of files/NNS/files on/IN/on different/JJ/different machines/NNS/machines in/IN/in a/DT/a distributed/VBN/distributed file/NN/file system/NN/system is/VBZ/is a/DT/a useful/JJ/useful redundancy/NN/redundancy for/IN/for improving/VBG/improving availability/NNP/availability. multimachine/NN/multimachine replication/NN/replication can/MD/can benefit/VB/benefit performance/NN/performance too/RB/too /:/: selecting/VBG/selecting a/DT/a nearby/JJ/nearby replica/NN/replica to/TO/to serve/VB/serve an/DT/an access/NN/access request/NN/request results/NNS/results in/IN/in shorter/NN/shorter service/NN/service time/NN/time /./. the/DT/the basic/JJ/basic requirement/NN/requirement of/IN/of a/DT/a replication/NN/replication scheme/NN/scheme is/VBZ/is that/IN/that different/JJ/different replicas/NNS/replicas of/IN/of the/DT/the same/JJ/same file/NN/file reside/NN/reside on/IN/on failure-independent/JJ/failure-independent machines/NNP/machines. that/IN/that is/VBZ/is /,/, the/DT/the availability/NN/availability 17.5/CD/17.5 717/CD/717 nfsv4/NNP/nfsv4 ourcov,era.geofnfs/NNP/ourcov,era.geofnfs thus/RB/thus .far/JJ/.far has/NNP/has. 0p1y/CD/0p1y considered/VBN/considered version/NN/version 3/CD/3 /CD/( orv3/NNP/orv3 /NNP/) nf/NN/nf /:/.. the/DT/the mostrecentnps/NNS/mostrecentnps standard/VBP/standard is/VBZ/is version/NN/version 4/CD/4 /CD/( v/NN/v 4/CD/4 /CD/) /,/, and/CC/and it/PRP/it differs/VBZ/differs fundanrentaljy/NN/fundanrentaljy from/IN/from pr/NN/pr ~/:/~ vious/JJ/vious versimi.s/NNP/versimi.s. jhe/NN/jhe most/JJS/most significant/JJ/significant ch9nge/NNP/ch9nge is/VBZ/is that/IN/that the/DT/the protocol/NN/protocol is/VBZ/is now/RB/now stqteful,meaping/JJ/stqteful,meaping tha/NN/tha /:/: tthesetv/NN/tthesetv ~/:/~ er/NN/er maintains/NNS/maintains the.state/JJ/the.state ofthe/NN/ofthe client/NN/client session/NN/session from/IN/from the/DT/the /:/: time/NN/time the/DT/the r/NN/r ~/:/~ j1lote/NNP/j1lote file/NN/file is/VBZ/is 0pt/JJ/0pt /:/: /:/: ned/VBD/ned untij/NN/untij itis/NNS/itis closed/NNP/closed. th.t1s/NNP/th.t1s /,/, thenfs/VBZ/thenfs protocol/NN/protocol now/RB/now provides/VBZ/provides open/JJ/open /NN/( /:/) ar/NN/ar ;/:/; td/NN/td c1o/NNP/c1o $/$/$ e/NN/e /:/( /:/) operations/NNS/operations ;/:/; previous/JJ/previous v/NN/v /:/: ersions/NNS/ersions of/IN/of nfs/NNS/nfs /:/( v/NN/v \/:/\ thich/NN/thich are/VBP/are stateless/RB/stateless /:/) .proyide/JJ/.proyide .np/NN/.np such/JJ/such operations/NNP/operations. furthen/NN/furthen /:/) /:/) ore/JJR/ore /,/, preytous/JJ/preytous \/NN/\ cersions/NNS/cersions specify/VBP/specify s/NNS/s ~/:/~ parate/JJ/parate protocols/NNP/protocols. or/CC/or j/VB/j /:/: lounting/VBG/lounting remote/NN/remote fil/NN/fil ~/:/~ systews/NNS/systews and/CC/and for/IN/for lockii1g/NNP/lockii1g remote/NN/remote files/NNS/files /:/.. v4/NNP/v4 provides/VBZ/provides ali/NN/ali of/NNP/of.. these/DT/these features/NNS/features under/IN/under l/NN/l phlgle/NN/phlgle prqtocol/NNP/prqtocol. in/IN/in patticular/JJ/patticular ;/:/; the/DT/the 1nrnmt/CD/1nrnmt. protocol/NN/protocol was/VBD/was elimin/VBN/elimin ;/:/; 1.ted/JJ/1.ted /,/, allowing/VBG/allowing 1/CD/1 \/CD/\ /CD/[ fs/NNS/fs to/TO/to work/VB/work with/IN/with network/NN/network fitewalls/NNS/fitewalls /,/, the/DT/the nj.ount/JJ/nj.ount protocol/NN/protocol was/VBD/was a/DT/a notorimis/NN/notorimis security/NN/security hole/NN/hole in/IN/in nps/NNS/nps implem,entations/NNS/implem,entations ~/VBP/~ /./. /:/.. /./. /./. /./. /./. /:/.. /./. .additionally/RB/.additionally /,/, v4/NNP/v4 has/NNP/has. enhan/IN/enhan edthe/DT/edthe ability/NN/ability of.dients/NNS/of.dients jo/VBP/jo cache/NNP/cache. file/NN/file data/NNS/data local/JJ/local /NN/) y/NN/y /:/: this/NNP/this. feature/NN/feature ;/:/; i/PRP/i ~/VBP/~ prov/NN/prov ~/:/~ s/NNS/s tne/VBP/tne performapc/NN/performapc ~/:/~ of/IN/of the/DT/the disttil/NN/disttil /:/: mt/NN/mt /:/( 3d/CD/3d file/NN/file system/NN/system /,/, a.s/JJ/a.s plients/NNS/plients are/VBP/are able/JJ/able to/TO/to reso/VB/reso ~/:/~ ve/VB/ve more/JJR/more file/JJ/file a9cesses/NNS/a9cesses from/IN/from the/DT/the loc/NN/loc ~/:/~ l/NN/l c/NN/c ~/:/~ che/NN/che rgther/NN/rgther thanh/NNP/thanh. ;/:/; lvingto/NN/lvingto gpjhroughthe/DT/gpjhroughthe s/NNS/s ~/:/~ !/./! /:/: ver/NNP/ver. '/POS/' /NN/( /:/: 4/CD/4 ali/NN/ali /:/( /:/) ws/NNS/ws diel/VBP/diel /:/) /:/: tsjo/NN/tsjo req/NN/req /:/) c/NN/c !/./! estfile/NN/estfile jocks/NNS/jocks from/IN/from s/NNS/s ~/:/~ rvers/NNS/rvers as/IN/as we/PRP/we 'll/NNP/'ll. .if/NNP/.if the/DT/the /,/, senr/NN/senr ~/:/~ r/NN/r grqrct/NN/grqrct ~/:/~ /./. the/DT/the request/NNP/request,. the/DT/the client/NN/client maintains/VBZ/maintains the/DT/the loci/NN/loci ,tmtil/NN/,tmtil it/NNP/it. is/VBZ/is released/VBN/released or/CC/or its/PRP$/its lea.st/JJ/lea.st =/NN/= expires/NNP/expires. /NNP/( clier/NN/clier ~/:/~ ts/NNP/ts. ar,e/NNP/ar,e als/NNS/als /:/( /:/) permitted/VBN/permitted to/TO/to r/VB/r ~/:/~ new/NNP/new. ex/NN/ex ~/:/~ stil'tg/JJ/stil'tg least/NN/least =/:/= s/NNP/s,. /:/) traditiora11y1/NNP/traditiora11y1 unix/NN/unix ~/:/~ ba/NN/ba ~/:/~ ~/:/~ d/NN/d /:/: systems/NNS/systems .provide/JJ/.provide advisory/NN/advisory jile/NN/jile locking/VBG/locking /,/, whereas/NNS/whereas windows/VBZ/windows operatirg/NN/operatirg systen1/NNP/systen1 ~/NNP/~ use/NN/use mandat/NN/mandat /:/( /:/) rylockil1g/NNP/rylockil1g to/TO/to allov/VB/allov \/:/\ t/NN/t l/NN/l '/''/' \/:/\ /:/[ ps/NNS/ps towm/VBP/towm /:/) wellwithnon-unixsyste1fts/NNS/wellwithnon-unixsyste1fts /,/, v4t1qw.p.rovides/NNP/v4t1qw.p.rovides mandatory/NN/mandatory locking/VBG/locking as/IN/as vvell/NNP/vvell. the/DT/the new/JJ/new lockinga11d/NNP/lockinga11d caching/NN/caching mec/NN/mec ~/:/~ anisms/NNS/anisms are/VBP/are based/NNP/based. on/IN/on the/DT/the concept/NN/concept /:/( /:/) f/NN/f d/NN/d ~/:/~ legahon/NN/legahon /,/, whe/NN/whe ~/:/~ eby/NN/eby the/DT/the server/NN/server delegates/VBZ/delegates responsibilities/NNS/responsibilities for/IN/for a/DT/a file/NN/file 's/POS/'s lockand/NN/lockand contents/NNP/contents. to/TO/to .the/NNP/.the client/NN/client thatrequested/VBD/thatrequested tnel/NN/tnel /:/( /:/) ckcrhat/IN/ckcrhat delegated/VBN/delegated client/NN/client maintains/NNS/maintains in/IN/in cache/NNP/cache. the/DT/the .current/JJ/.current version/NN/version of/IN/of .the/NNP/.the file/NNP/file. /,/, and/CC/and /:/.. other/JJ/other clients/NNS/clients can/MD/can /:/... ask/VB/ask that/NNP/that. deleg21ted/NNP/deleg21ted client/NN/client for/IN/for lock/NN/lock access/NN/access /,/, a1i.d/JJ/a1i.d filt/NN/filt =/:/= confentsuntifthe/DT/confentsuntifthe del/NN/del /:/: egated/VBN/egated client/NN/client reli11quishesth/NNP/reli11quishesth ~/NNP/~ lock/NN/lock andde/NN/andde ~/:/~ egation/NNP/egation. /./. /./. /./. /./. /./. /./. /./. /:/.. /./. /:/.. /./. /:/.. /./. /./. finally/RB/finally /,/, whereas.preyiousversionb/NNP/whereas.preyiousversionb /NNP/( /NNP/) f/NN/f npsarebasedon/NN/npsarebasedon the/DT/the udj/NN/udj network/NN/network ptqtocol/NN/ptqtocol /,/, \/:/\ /:/[ 4/CD/4 is/VBZ/is based/VBN/based on/IN/on .tcp,whioh/JJ/.tcp,whioh allows/NNS/allows itto/IN/itto betteraclj/NN/betteraclj \/:/\ lstto/NN/lstto varying/VBG/varying traffic/JJ/traffic loads/NNS/loads on/NNP/on. thel/NN/thel /:/} etwork/NN/etwork /:/: peleg2lting/NNP/peleg2lting these/DT/these responsibilities/NNP/responsibilities. to/TO/to cliel/VB/cliel !/./! cts/NNS/cts reduces/NNS/reduces the/DT/the foado11the/NNP/foado11the s.eryet/NNP/s.eryet and.i/NNP/and.i ~/NNP/~ proves.cache.coherency/NNP/proves.cache.coherency /./. of/IN/of one/CD/one replica/NN/replica is/VBZ/is not/RB/not affected/VBN/affected by/IN/by the/DT/the availability/NN/availability of/IN/of the/DT/the rest/NN/rest of/IN/of the/DT/the replicas/NNS/replicas /./. this/DT/this obvious/JJ/obvious requirement/NN/requirement implies/NNS/implies that/WDT/that replication/NN/replication management/NN/management is/VBZ/is inherently/RB/inherently a/DT/a location-opaque/JJ/location-opaque activity/NNP/activity. provisions/NNS/provisions for/IN/for placing/VBG/placing a/DT/a replica/NN/replica on/IN/on a/DT/a particular/JJ/particular machine/NN/machine must/MD/must be/VB/be available/JJ/available /./. it/PRP/it is/VBZ/is desirable/JJ/desirable to/TO/to hide/VB/hide the/DT/the details/NNS/details of/IN/of replication/NN/replication from/IN/from users/NNP/users. mapping/NN/mapping a/DT/a replicated/JJ/replicated file/NN/file name/NN/name to/TO/to a/DT/a particular/JJ/particular replica/NN/replica is/VBZ/is the/DT/the task/NN/task of/IN/of the/DT/the naming/NN/naming scheme/NN/scheme /./. the/DT/the existence/NN/existence of/IN/of replicas/NNS/replicas should/MD/should be/VB/be invisible/JJ/invisible to/TO/to higher/JJR/higher levels/NNP/levels. at/IN/at lower/JJR/lower levels/NNS/levels /,/, however/RB/however /,/, the/DT/the replicas/NNS/replicas must/MD/must be/VB/be distinguished/VBN/distinguished from/IN/from one/CD/one another/DT/another by/IN/by different/JJ/different lower-level/JJ/lower-level names/NNP/names. another/DT/another transparency/NN/transparency requirement/NN/requirement is/VBZ/is providing/VBG/providing replication/NN/replication control/NN/control at/IN/at higher/JJR/higher levels/NNP/levels. replication/NN/replication control/NN/control includes/VBZ/includes determination/NN/determination of/IN/of the/DT/the degree/NN/degree of/IN/of replication/NN/replication and/CC/and of/IN/of the/DT/the placement/NN/placement of/IN/of replicas/NNP/replicas. under/IN/under certain/JJ/certain circumstances/NNS/circumstances /,/, we/PRP/we may/MD/may want/VB/want to/TO/to expose/VB/expose these/DT/these details/NNS/details to/TO/to users/NNP/users. locus/NN/locus /,/, for/IN/for instance/NN/instance /,/, provides/VBZ/provides users/NNS/users and/CC/and system/NN/system administrators/NNS/administrators with/IN/with mechanisms/NNS/mechanisms to/TO/to control/NN/control the/DT/the replication/NN/replication scheme/NN/scheme /./. 718/CD/718 chapter/NN/chapter 17/CD/17 17.6/CD/17.6 the/DT/the main/JJ/main problem/NN/problem ~/:/~ associated/VBN/associated with/IN/with replicas/NNS/replicas is/VBZ/is updating/NNP/updating. from/IN/from a/DT/a user/NN/user 's/POS/'s point/NN/point of/IN/of view/NN/view /,/, replicas/VBZ/replicas of/IN/of a/DT/a file/NN/file denote/NN/denote the/DT/the same/JJ/same logical/JJ/logical entity/NN/entity /,/, and/CC/and thus/RB/thus an/DT/an update/JJ/update to/TO/to any/DT/any replica/NN/replica must/MD/must be/VB/be reflected/VBN/reflected on/IN/on all/DT/all other/JJ/other replicas/NNP/replicas. more/RBR/more precisely/RB/precisely /,/, the/DT/the relevant/NN/relevant consistency/NN/consistency sen1antics/NNP/sen1antics must/MD/must be/VB/be preserved/VBN/preserved when/WRB/when accesses/NNS/accesses to/TO/to replicas/NNS/replicas are/VBP/are viewed/VBN/viewed as/IN/as virtual/JJ/virtual accesses/NNS/accesses to/TO/to the/DT/the replicas/NNS/replicas '/POS/' logical/JJ/logical files/NNP/files. if/IN/if consistency/NN/consistency is/VBZ/is not/RB/not of/IN/of primary/JJ/primary incportance/NN/incportance /,/, it/PRP/it can/MD/can be/VB/be sacrificed/VBN/sacrificed for/IN/for availability/NN/availability and/CC/and performance/NNP/performance. in/IN/in this/DT/this fundamental/JJ/fundamental tradeoff/NN/tradeoff in/IN/in the/DT/the area/NN/area of/IN/of fault/NN/fault tolerance/NN/tolerance /,/, the/DT/the choice/NN/choice is/VBZ/is between/IN/between preserving/VBG/preserving consistency/NN/consistency at/IN/at all/DT/all costs/NNS/costs /,/, thereby/RB/thereby creating/VBG/creating a/DT/a potential/JJ/potential for/IN/for indefinite/JJ/indefinite blocking/NN/blocking /,/, and/CC/and sacrificing/VBG/sacrificing consistency/NN/consistency under/IN/under some/DT/some /NN/( we/PRP/we hope/VBP/hope /,/, rare/JJ/rare /NN/) circumstances/NNS/circumstances for/IN/for the/DT/the sake/NN/sake of/IN/of guaranteed/NN/guaranteed progress/NNP/progress. locus/NN/locus /,/, for/IN/for example/NN/example /,/, employs/VBZ/employs replication/NN/replication extensively/RB/extensively and/CC/and sacrifices/NNS/sacrifices consistency/NN/consistency in/IN/in the/DT/the case/NN/case of/IN/of network/NN/network partition/NN/partition for/IN/for the/DT/the sake/NN/sake of/IN/of availability/NN/availability of/IN/of files/NNS/files for/IN/for read/NN/read and/CC/and write/VB/write accesses/NNS/accesses /./. ibis/NNS/ibis uses/VBZ/uses a/DT/a variation/NN/variation of/IN/of the/DT/the primary-copy/JJ/primary-copy approach/NNP/approach. the/DT/the domain/NN/domain of/IN/of the/DT/the name/NN/name mapping/VBG/mapping is/VBZ/is a/DT/a pair/NN/pair primary-replica-identifier/NN/primary-replica-identifier /,/, local-replica-identifier/JJ/local-replica-identifier /./. if/IN/if no/DT/no local/JJ/local replica/NN/replica exists/NNS/exists /,/, a/DT/a special/JJ/special value/NN/value is/VBZ/is used/NNP/used. thus/RB/thus /,/, the/DT/the mapping/NN/mapping is/VBZ/is relative/JJ/relative to/TO/to a/DT/a machine/NNP/machine. if/IN/if the/DT/the local/JJ/local replica/NN/replica is/VBZ/is the/DT/the primary/JJ/primary one/CD/one /,/, the/DT/the pair/NN/pair contains/VBZ/contains two/CD/two identical/JJ/identical identifiers/NNP/identifiers. ibis/VBZ/ibis supports/NNS/supports demand/NN/demand replication/NN/replication /,/, an/DT/an automatic/JJ/automatic replication-control/NN/replication-control policy/NN/policy similar/JJ/similar to/TO/to whole-file/JJ/whole-file caching/NNP/caching. under/IN/under demand/NN/demand replication/NN/replication /,/, reading/NN/reading of/IN/of a/DT/a nonlocal/JJ/nonlocal replica/NN/replica causes/NNS/causes it/PRP/it to/TO/to be/VB/be cached/VBN/cached locally/RB/locally /,/, thereby/RB/thereby generating/VBG/generating a/DT/a new/JJ/new nonprimary/NN/nonprimary replica/NNP/replica. updates/VBZ/updates are/VBP/are performed/VBN/performed only/RB/only on/IN/on the/DT/the primary/JJ/primary copy/NN/copy and/CC/and cause/NN/cause all/DT/all other/JJ/other replicas/NNS/replicas to/TO/to be/VB/be invalidated/VBN/invalidated through/IN/through the/DT/the sending/NN/sending of/IN/of appropriate/JJ/appropriate messages/NNP/messages. atomic/JJ/atomic and/CC/and serialized/JJ/serialized invalidation/NN/invalidation of/IN/of all/DT/all nonprimary/JJ/nonprimary replicas/NNS/replicas is/VBZ/is not/RB/not guaranteed/NNP/guaranteed. hence/NN/hence /,/, a/DT/a stale/NN/stale replica/NN/replica may/MD/may be/VB/be considered/VBN/considered valid/-NONE-/valid. to/TO/to satisfy/VB/satisfy remote/NN/remote write/NN/write accesses/NNS/accesses /,/, we/PRP/we migrate/VBP/migrate the/DT/the primary/JJ/primary copy/NN/copy to/TO/to the/DT/the requesting/NN/requesting machine/NN/machine /./. andrew/NN/andrew is/VBZ/is a/DT/a distributed/VBN/distributed computing/NN/computing environment/NN/environment designed/VBN/designed and/CC/and implemented/VBN/implemented at/IN/at carnegie/NN/carnegie mellon/NN/mellon university/NNP/university. the/DT/the andrew/NN/andrew file/NN/file system/NN/system /:/( afs/NNS/afs /VBP/) constitutes/NNS/constitutes the/DT/the underlying/VBG/underlying information-sharing/JJ/information-sharing mechanism/NN/mechanism among/IN/among clients/NNS/clients of/IN/of the/DT/the environment/NN/environment /./. the/DT/the transarc/NN/transarc corporation/NN/corporation took/VBD/took over/RP/over development/NN/development of/IN/of afs/NNS/afs and/CC/and then/RB/then was/VBD/was purchased/VBN/purchased by/IN/by ibm/NNP/ibm. ibm/NN/ibm has/VBZ/has since/IN/since produced/VBN/produced several/JJ/several commercial/JJ/commercial implementations/NNS/implementations of/IN/of afs/NNP/afs. afs/NNS/afs was/VBD/was subsequently/RB/subsequently chosen/VBN/chosen as/IN/as the/DT/the dfs/NNS/dfs for/IN/for an/DT/an industry/NN/industry coalition/NN/coalition ;/:/; the/DT/the result/NN/result was/VBD/was part/NN/part of/IN/of the/DT/the distributed/VBN/distributed computing/NN/computing environment/NN/environment /:/( dce/NN/dce /:/) from/IN/from the/DT/the osf/NN/osf organization/NN/organization /./. in/IN/in 2000/CD/2000 /,/, ibm/NN/ibm 's/POS/'s transarc/NN/transarc lab/NN/lab announced/VBD/announced that/IN/that afs/NNS/afs would/MD/would be/VB/be an/DT/an open-source/JJ/open-source product/NN/product /:/( termed/VBD/termed openafs/NNS/openafs /:/) available/JJ/available under/IN/under the/DT/the ibm/NN/ibm public/NN/public license/NN/license /,/, and/CC/and transarc/NN/transarc dfs/NNS/dfs was/VBD/was canceled/VBN/canceled as/IN/as a/DT/a commercial/JJ/commercial product/NNP/product. openafs/NNS/openafs is/VBZ/is available/JJ/available under/IN/under most/JJS/most commercial/JJ/commercial versions/NNS/versions of/IN/of unix/NN/unix as/IN/as well/RB/well as/IN/as linux/NN/linux and/CC/and microsoft/NN/microsoft windows/VBZ/windows systems/NNS/systems /./. many/JJ/many unix/NN/unix vendors/NNS/vendors /,/, as/IN/as well/RB/well as/IN/as microsoft/JJ/microsoft /,/, support/NN/support the/DT/the dce/NN/dce system/NN/system and/CC/and its/PRP$/its dfs/NNS/dfs /,/, which/WDT/which is/VBZ/is based/VBN/based on/IN/on afs/NNS/afs /,/, and/CC/and work/NN/work is/VBZ/is ongoing/VBG/ongoing to/TO/to make/VB/make dce/NN/dce a/DT/a cross-platform/NN/cross-platform /,/, universally/RB/universally accepted/VBN/accepted dfs/NNP/dfs. as/IN/as afs/NNS/afs and/CC/and transarc/NN/transarc dfs/NNS/dfs are/VBP/are very/RB/very similar/JJ/similar ~/NN/~ we/PRP/we describe/VBP/describe afs/NNS/afs throughout/IN/throughout this/DT/this section/NN/section /,/, unless/IN/unless transarc/NN/transarc dfs/NNS/dfs is/VBZ/is named/VBN/named specifically/RB/specifically /./. afs/NNS/afs seeks/VBZ/seeks to/TO/to solve/VB/solve many/JJ/many of/IN/of the/DT/the problems/NNS/problems of/IN/of the/DT/the simpler/NN/simpler dfss/NN/dfss /,/, such/JJ/such as/IN/as nfs/NNS/nfs /,/, and/CC/and is/VBZ/is arguably/RB/arguably the/DT/the most/RBS/most feature-rich/JJ/feature-rich nonexperimental/NN/nonexperimental dfs/NNP/dfs. it/PRP/it features/VBZ/features a/DT/a uniform/NN/uniform name/NN/name space/NN/space /,/, location-independent/JJ/location-independent file/NN/file sharing/VBG/sharing /,/, client-side/JJ/client-side caching/NN/caching with/IN/with cache/NN/cache consistency/NN/consistency /,/, and/CC/and secure/NN/secure authentication/NN/authentication via/IN/via kerberos/NNP/kerberos. it/PRP/it also/RB/also includes/VBZ/includes server-side/JJ/server-side caching/NN/caching in/IN/in the/DT/the form/NN/form of/IN/of replicas/NNS/replicas /,/, with/IN/with high/JJ/high availability/NN/availability through/IN/through automatic/JJ/automatic switchover/NN/switchover to/TO/to a/DT/a replica/NN/replica if/IN/if the/DT/the source/NN/source server/NN/server is/VBZ/is unavailable/NNP/unavailable. one/CD/one of/IN/of the/DT/the 17.6/CD/17.6 719/CD/719 most/JJS/most formidable/JJ/formidable attributes/NNS/attributes of/IN/of afs/NNS/afs is/VBZ/is scalability/NN/scalability /:/: the/DT/the andrew/NN/andrew system/NN/system is/VBZ/is targeted/VBN/targeted to/TO/to span/VB/span over/IN/over 5,000/CD/5,000 workstations/NNP/workstations. between/IN/between afs/NNS/afs and/CC/and transarc/NN/transarc dfs/NNS/dfs /,/, there/EX/there are/VBP/are hundreds/NNS/hundreds of/IN/of implementations/NNS/implementations worldwide/VBP/worldwide /./. 17.6.1/CD/17.6.1 overview/NN/overview afs/NNS/afs distinguishes/VBZ/distinguishes between/IN/between client/NN/client machines/NNS/machines /:/( sometimes/RB/sometimes referred/VBN/referred to/TO/to as/RB/as workstations/NNS/workstations /:/) and/CC/and dedicated/VBD/dedicated server/RB/server machines/NNP/machines. servers/NNS/servers and/CC/and clients/NNS/clients originally/RB/originally ran/VBD/ran only/RB/only 4.2/CD/4.2 bsd/NN/bsd unix/NN/unix /,/, but/CC/but afs/NNS/afs has/VBZ/has been/VBN/been ported/VBN/ported to/TO/to many/JJ/many operating/NN/operating systems/NNP/systems. the/DT/the clients/NNS/clients and/CC/and servers/NNS/servers are/VBP/are interconnected/VBN/interconnected by/IN/by a/DT/a network/NN/network of/IN/of lans/NNS/lans or/CC/or wans/NNS/wans /./. clients/NNS/clients are/VBP/are presented/VBN/presented with/IN/with a/DT/a partitioned/VBN/partitioned space/NN/space of/IN/of file/NN/file names/NNS/names /:/: a/DT/a and/CC/and a/DT/a dedicated/JJ/dedicated servers/NNS/servers /,/, collectively/RB/collectively called/VBN/called vice/NN/vice after/IN/after the/DT/the name/NN/name of/IN/of the/DT/the software/NN/software they/PRP/they run/VBP/run /,/, present/NN/present the/DT/the shared/VBN/shared name/NN/name space/NN/space to/TO/to the/DT/the clhe/NN/clhe local/JJ/local name/NN/name space/NN/space is/VBZ/is the/DT/the root/NN/root file/NN/file system/NN/system of/IN/of a/DT/a workstation/NN/workstation /,/, from/IN/from which/WDT/which the/DT/the shared/VBD/shared name/NN/name space/NN/space descends/NNP/descends. workstations/NNS/workstations run/VBP/run the/DT/the virtue/NN/virtue protocol/NN/protocol to/TO/to communicate/VB/communicate with/IN/with vice/NN/vice /,/, and/CC/and each/DT/each is/VBZ/is required/VBN/required to/TO/to have/VB/have a/DT/a local/JJ/local disk/NN/disk where/WRB/where it/PRP/it stores/VBZ/stores its/PRP$/its local/JJ/local name/NN/name space/NNP/space. servers/NNS/servers collectively/RB/collectively are/VBP/are responsible/JJ/responsible for/IN/for the/DT/the storage/NN/storage and/CC/and management/NN/management of/IN/of the/DT/the shared/VBN/shared name/NN/name space/NNP/space. the/DT/the local/JJ/local name/NN/name space/NN/space is/VBZ/is small/JJ/small /,/, is/VBZ/is distinct/JJ/distinct for/IN/for each/DT/each workstation/NN/workstation /,/, and/CC/and contains/VBZ/contains system/NN/system programs/NNS/programs essential/JJ/essential for/IN/for autonomous/JJ/autonomous operation/NN/operation and/CC/and better/JJR/better performance/NNP/performance. also/RB/also local/JJ/local are/VBP/are temporary/JJ/temporary files/NNS/files and/CC/and files/NNS/files that/WDT/that the/DT/the workstation/NN/workstation owner/NN/owner /,/, for/IN/for privacy/NN/privacy reasons/NNS/reasons /,/, explicitly/RB/explicitly wants/VBZ/wants to/TO/to store/VB/store locally/RB/locally /./. viewed/VBN/viewed at/IN/at a/DT/a finer/NN/finer granularity/NN/granularity /,/, clients/NNS/clients and/CC/and servers/NNS/servers are/VBP/are structured/VBN/structured in/IN/in clusters/NNS/clusters interconnected/VBN/interconnected by/IN/by a/DT/a wan/NNP/wan. each/DT/each cluster/NN/cluster consists/VBZ/consists of/IN/of a/DT/a collection/NN/collection of/IN/of workstations/NNS/workstations on/IN/on a/DT/a lan/NN/lan and/CC/and a/DT/a representative/JJ/representative of/IN/of vice/NN/vice called/VBN/called a/DT/a and/CC/and each/DT/each cluster/NN/cluster is/VBZ/is com1.ected/JJ/com1.ected to/TO/to the/DT/the wan/NN/wan by/IN/by a/DT/a router/NNP/router. the/DT/the decomposition/NN/decomposition into/IN/into clusters/NNS/clusters is/VBZ/is done/VBN/done primarily/RB/primarily to/TO/to address/VB/address the/DT/the problem/NN/problem of/IN/of scale/NNP/scale. for/IN/for optimal/JJ/optimal performance/NN/performance /,/, workstations/NNS/workstations should/MD/should use/VB/use the/DT/the server/NN/server on/IN/on their/PRP$/their own/JJ/own cluster/NN/cluster most/JJS/most of/IN/of the/DT/the time/NN/time /,/, thereby/RB/thereby making/VBG/making cross-cluster/JJ/cross-cluster file/NN/file references/NNS/references relatively/RB/relatively infrequent/JJ/infrequent /./. the/DT/the file-system/JJ/file-system architecture/NN/architecture is/VBZ/is also/RB/also based/VBN/based on/IN/on considerations/NNS/considerations of/IN/of scale/NNP/scale. the/DT/the basic/JJ/basic heuristic/JJ/heuristic is/VBZ/is to/TO/to offload/VB/offload work/NN/work from/IN/from the/DT/the servers/NNS/servers to/TO/to the/DT/the clients/NNS/clients /,/, in/IN/in light/NN/light of/IN/of experience/NN/experience indicating/VBG/indicating that/IN/that server/JJR/server cpu/NN/cpu speed/NN/speed is/VBZ/is the/DT/the system/NN/system 's/POS/'s bottleneck/NN/bottleneck following/VBG/following this/DT/this heuristic/JJ/heuristic /,/, the/DT/the key/JJ/key mechanism/NN/mechanism for/IN/for remote/NN/remote file/NN/file operations/NNS/operations is/VBZ/is to/TO/to cache/VB/cache files/NNS/files in/IN/in large/JJ/large chunks/NNS/chunks /:/( 64/CD/64 kb/NN/kb /:/) /./. this/DT/this feature/NN/feature reduces/NNS/reduces file-open/JJ/file-open latency/NN/latency and/CC/and allows/VBZ/allows reads/NNS/reads and/CC/and writes/NNS/writes to/TO/to be/VB/be directed/VBN/directed to/TO/to the/DT/the cached/JJ/cached copy/NN/copy without/IN/without frequently/RB/frequently involving/VBG/involving the/DT/the servers/NNS/servers /./. briefly/RB/briefly /,/, here/RB/here are/VBP/are a/DT/a few/JJ/few additional/JJ/additional issues/NNS/issues in/IN/in the/DT/the design/NN/design of/IN/of afs/NNS/afs /:/: client/NN/client mobility/NNP/mobility. clients/NNS/clients are/VBP/are able/JJ/able to/TO/to access/NN/access any/DT/any file/NN/file in/IN/in the/DT/the shared/VBN/shared name/NN/name space/NN/space from/IN/from any/DT/any workstation/NNP/workstation. a/DT/a client/NN/client may/MD/may notice/VB/notice some/DT/some initial/JJ/initial performance/NN/performance degradation/NN/degradation due/JJ/due to/TO/to the/DT/the caching/NN/caching of/IN/of files/NNS/files when/WRB/when accessil/NN/accessil g/NN/g files/NNS/files a/DT/a workstation/NN/workstation other/JJ/other than/IN/than the/DT/the usual/JJ/usual one/CD/one /./. security/NNP/security. the/DT/the vice/NN/vice interface/NN/interface is/VBZ/is considered/VBN/considered the/DT/the boundary/JJ/boundary of/IN/of trustworthiness/NN/trustworthiness /,/, because/IN/because no/DT/no client/NN/client programs/NNS/programs are/VBP/are executed/VBN/executed on/IN/on vice/NN/vice machines/NNP/machines. authentication/NN/authentication and/CC/and secure-transmission/NN/secure-transmission functions/NNS/functions are/VBP/are provided/VBN/provided as/IN/as part/NN/part of/IN/of a/DT/a connectionbased/VBN/connectionbased communication/NN/communication package/NN/package based/VBN/based on/IN/on the/DT/the rpc/NN/rpc paradigm/NNP/paradigm. after/IN/after mutual/JJ/mutual authentication/NN/authentication /,/, a/DT/a vice/NN/vice server/NN/server and/CC/and a/DT/a client/NN/client communicate/NN/communicate via/IN/via encrypted/VBN/encrypted messages/NNP/messages. encryption/NN/encryption is/VBZ/is performed/VBN/performed by/IN/by hardware/NN/hardware devices/NNS/devices or/CC/or /:/( more/JJR/more slowly/RB/slowly /:/) 720/CD/720 chapter/NN/chapter 17/CD/17 in/IN/in software/NNP/software. information/NN/information about/IN/about clients/NNS/clients and/CC/and groups/NNS/groups is/VBZ/is stored/VBN/stored in/IN/in a/DT/a protection/NN/protection database/NN/database replicated/VBD/replicated at/IN/at each/DT/each server/NN/server /./. protection/NNP/protection. afs/VBZ/afs provides/VBZ/provides for/IN/for protecting/VBG/protecting directories/NNS/directories and/CC/and the/DT/the regular/JJ/regular unlxbits/NNS/unlxbits for/IN/for file/NN/file protection/NNP/protection. the/DT/the access/NN/access list/NN/list ncay/NN/ncay contain/NN/contain information/NN/information about/IN/about those/DT/those users/NNS/users allowed/VBD/allowed to/TO/to access/NN/access a/DT/a directory/NN/directory /,/, as/IN/as well/RB/well as/IN/as information/NN/information about/IN/about those/DT/those users/NNS/users not/RB/not allowed/VBN/allowed to/TO/to access/NN/access it/NNP/it. thus/RB/thus /,/, it/PRP/it is/VBZ/is simple/JJ/simple to/TO/to specify/VB/specify that/IN/that everyone/NN/everyone except/IN/except /,/, say/VBP/say /,/, jim/NN/jim can/MD/can access/NN/access a/DT/a directory/NNP/directory. afs/VBZ/afs supports/NNS/supports the/DT/the access/NN/access types/NNS/types read/VB/read /,/, write/JJ/write /,/, lookup/NN/lookup /,/, insert/NN/insert /,/, administer/NN/administer /,/, lock/NN/lock /,/, and/CC/and delete/JJ/delete /./. heterogeneity/NNP/heterogeneity. defining/NN/defining a/DT/a clear/JJ/clear interface/NN/interface to/TO/to vice/NN/vice is/VBZ/is a/DT/a key/JJ/key for/IN/for integration/NN/integration of/IN/of diverse/NN/diverse workstation/NN/workstation hardware/NN/hardware and/CC/and operating/NN/operating systems/NNP/systems. so/RB/so that/IN/that heterogeneity/NN/heterogeneity is/VBZ/is facilitated/VBN/facilitated /,/, some/DT/some files/NNS/files in/IN/in the/DT/the local/JJ/local /bin/JJ//bin directory/NN/directory are/VBP/are symbolic/JJ/symbolic links/NNS/links pointing/VBG/pointing to/TO/to machine-specific/JJ/machine-specific executable/JJ/executable files/NNS/files residing/VBG/residing in/IN/in vice/NN/vice /./. 17.6.2/CD/17.6.2 the/DT/the shared/JJ/shared name/NN/name space/NN/space afs/NNS/afs 's/POS/'s shared/VBN/shared name/NN/name space/NN/space is/VBZ/is made/VBN/made up/RP/up of/IN/of component/NN/component units/NNS/units called/VBN/called the/DT/the volumes/NNS/volumes are/VBP/are unusually/RB/unusually small/JJ/small component/NN/component units/NNP/units. typically/RB/typically /,/, they/PRP/they are/VBP/are associated/VBN/associated with/IN/with the/DT/the files/NNS/files of/IN/of a/DT/a single/JJ/single client/NNP/client. few/JJ/few volumes/NNS/volumes reside/VBP/reside within/IN/within a/DT/a single/JJ/single disk/NN/disk partition/NN/partition /,/, and/CC/and they/PRP/they may/MD/may grow/VB/grow /:/( up/IN/up to/TO/to a/DT/a quota/NN/quota /:/) and/CC/and shrink/NN/shrink in/IN/in size/NNP/size. conceptually/RB/conceptually /,/, volumes/VBZ/volumes are/VBP/are glued/VBN/glued together/RB/together by/IN/by a/DT/a mechanism/NN/mechanism similar/JJ/similar to/TO/to the/DT/the unix/NN/unix m01mt/NNP/m01mt mechanism/NNP/mechanism. however/RB/however /,/, the/DT/the granularity/NN/granularity difference/NN/difference is/VBZ/is significant/JJ/significant /,/, since/IN/since in/IN/in unix/NN/unix only/RB/only an/DT/an entire/JJ/entire disk/NN/disk partition/NN/partition /:/( containing/VBG/containing a/DT/a file/NN/file system/NN/system /:/) can/MD/can be/VB/be mounted/NNP/mounted. volumes/NNS/volumes are/VBP/are a/DT/a key/JJ/key administrative/JJ/administrative unit/NN/unit and/CC/and play/NN/play a/DT/a vital/JJ/vital role/NN/role in/IN/in identifying/NN/identifying and/CC/and locating/VBG/locating an/DT/an individual/JJ/individual file/NN/file /./. a/DT/a vice/NN/vice file/NN/file or/CC/or directory/NN/directory is/VBZ/is identified/VBN/identified by/IN/by a/DT/a low-level/JJ/low-level identifier/NN/identifier called/VBN/called a/DT/a fid/JJ/fid /./. each/DT/each afs/NNS/afs directory/VBP/directory entry/NN/entry maps/NNS/maps a/DT/a path-name/JJ/path-name component/NN/component to/TO/to a/DT/a fid/NNP/fid. a/DT/a fid/NN/fid is/VBZ/is 96/CD/96 bits/NNS/bits long/RB/long and/CC/and has/VBZ/has three/CD/three equal-length/JJ/equal-length components/NNS/components /:/: a/DT/a volume/NN/volume number/NN/number /,/, a/DT/a vnode/NN/vnode number/NN/number /,/, and/CC/and a/DT/a uniquifier/NNP/uniquifier. the/DT/the vnode/NN/vnode number/NN/number is/VBZ/is used/VBN/used as/RB/as an/DT/an index/NN/index into/IN/into an/DT/an array/NN/array containing/VBG/containing the/DT/the inodes/NNS/inodes of/IN/of files/NNS/files in/IN/in a/DT/a single/JJ/single volume/NNP/volume. the/DT/the allows/NNS/allows reuse/VBP/reuse of/IN/of vnode/NN/vnode numbers/NNS/numbers /,/, thereby/RB/thereby keeping/VBG/keeping certain/JJ/certain data/NNS/data structures/NNS/structures compact/NNP/compact. fids/NNS/fids are/VBP/are location/NN/location transparent/NN/transparent ;/:/; therefore/RB/therefore /,/, file/IN/file movements/NNS/movements from/IN/from server/NN/server to/TO/to server/VB/server do/VBP/do not/RB/not invalidate/VB/invalidate cached/VBN/cached directory/NN/directory contents/NNS/contents /./. location/NN/location information/NN/information is/VBZ/is kept/VBN/kept on/IN/on a/DT/a volume/NN/volume basis/NN/basis in/IN/in a/DT/a replicated/VBN/replicated on/IN/on each/DT/each server/NNP/server. a/DT/a client/NN/client can/MD/can identify/VB/identify the/DT/the location/NN/location of/IN/of every/DT/every volume/NN/volume in/IN/in the/DT/the system/NN/system by/IN/by querying/NN/querying this/DT/this database/NNP/database. the/DT/the aggregation/NN/aggregation of/IN/of files/NNS/files into/IN/into volumes/NNS/volumes makes/VBZ/makes it/PRP/it possible/JJ/possible to/TO/to keep/VB/keep the/DT/the location/NN/location database/NN/database at/IN/at a/DT/a manageable/JJ/manageable size/NN/size /./. to/TO/to balance/VB/balance the/DT/the available/JJ/available disk/NN/disk space/NN/space and/CC/and utilization/NN/utilization of/IN/of servers/NNS/servers /,/, volumes/VBZ/volumes need/VBN/need to/TO/to be/VB/be migrated/VBN/migrated among/IN/among disk/NN/disk partitions/NNS/partitions and/CC/and servers/NNP/servers. when/WRB/when a/DT/a volume/NN/volume is/VBZ/is shipped/VBN/shipped to/TO/to its/PRP$/its new/JJ/new location/NN/location /,/, its/PRP$/its original/JJ/original server/NN/server is/VBZ/is left/VBN/left with/IN/with temporary/JJ/temporary forwarding/NN/forwarding information/NN/information /,/, so/RB/so that/IN/that the/DT/the location/NN/location database/NN/database need/VBP/need not/RB/not be/VB/be updated/VBN/updated synchronously/RB/synchronously /./. while/IN/while the/DT/the volume/NN/volume is/VBZ/is being/VBG/being transferred/VBN/transferred /,/, the/DT/the original/JJ/original server/NN/server can/MD/can still/RB/still handle/VB/handle updates/NNS/updates /,/, which/WDT/which are/VBP/are shipped/VBN/shipped later/JJ/later to/TO/to the/DT/the new/JJ/new server/NNP/server. at/IN/at some/DT/some point/NN/point /,/, the/DT/the volume/NN/volume is/VBZ/is briefly/RB/briefly disabled/VBN/disabled so/RB/so that/IN/that the/DT/the recent/JJ/recent modifications/NNS/modifications can/MD/can be/VB/be processed/VBN/processed ;/:/; then/RB/then /,/, the/DT/the new/JJ/new volume/NN/volume becomes/VBZ/becomes available/JJ/available again/NN/again at/IN/at the/DT/the new/JJ/new site/NNP/site. the/DT/the volume-movement/JJ/volume-movement operation/NN/operation is/VBZ/is atomic/JJ/atomic ;/:/; if/IN/if either/DT/either server/NN/server crashes/NNS/crashes /,/, the/DT/the operation/NN/operation is/VBZ/is aborted/VBN/aborted /./. read-only/RB/read-only replication/NN/replication at/IN/at the/DT/the granularity/NN/granularity of/IN/of an/DT/an entire/JJ/entire volume/NN/volume is/VBZ/is supported/VBN/supported for/IN/for system-executable/JJ/system-executable files/NNS/files and/CC/and for/IN/for seldom-updated/JJ/seldom-updated files/NNS/files in/IN/in the/DT/the upper/JJ/upper levels/NNS/levels of/IN/of the/DT/the vice/NN/vice name/NN/name space/NNP/space. the/DT/the volume-location/NN/volume-location database/NN/database specifies/NNS/specifies the/DT/the server/NN/server 17.6/CD/17.6 721/CD/721 contammg/NN/contammg the/DT/the only/JJ/only read-write/JJ/read-write copy/NN/copy of/IN/of a/DT/a volume/NN/volume and/CC/and a/DT/a list/NN/list of/IN/of read-only/JJ/read-only replication/NN/replication sites/NNS/sites /./. 17.6.3/CD/17.6.3 file/NN/file operations/NNS/operations and/CC/and consistency/NN/consistency semantics/NNS/semantics the/DT/the fundamental/JJ/fundamental architectural/JJ/architectural principle/NN/principle in/IN/in afs/NNS/afs is/VBZ/is the/DT/the caching/NN/caching of/IN/of entire/JJ/entire files/NNS/files from/IN/from servers/NNP/servers. accordingly/RB/accordingly /,/, a/DT/a client/NN/client workstation/NN/workstation interacts/NNS/interacts with/IN/with vice/NN/vice servers/NNS/servers only/RB/only during/IN/during opening/VBG/opening and/CC/and closing/JJ/closing of/IN/of files/NNS/files /,/, and/CC/and even/RB/even this/DT/this interaction/NN/interaction is/VBZ/is not/RB/not always/RB/always necessary/NNP/necessary. reading/NN/reading and/CC/and writing/VBG/writing files/NNS/files do/VBP/do not/RB/not cause/VB/cause remote/NN/remote interaction/NN/interaction /:/( in/IN/in contrast/NN/contrast to/TO/to the/DT/the remote-service/NN/remote-service n/NN/n lethod/NN/lethod /:/) /./. this/DT/this key/JJ/key distinction/NN/distinction has/VBZ/has far-reaching/JJ/far-reaching ramifications/NNS/ramifications for/IN/for performance/NN/performance /,/, as/IN/as well/RB/well as/IN/as for/IN/for semantics/NNS/semantics of/IN/of file/JJ/file operations/NNS/operations /./. the/DT/the operating/NN/operating system/NN/system on/IN/on each/DT/each workstation/NN/workstation intercepts/VBZ/intercepts file-system/JJ/file-system calls/NNS/calls and/CC/and forwards/NNS/forwards them/PRP/them to/TO/to a/DT/a client-level/JJ/client-level process/NN/process on/IN/on that/DT/that workstation/NNP/workstation. this/DT/this process/NN/process /,/, called/VBN/called venus/NN/venus /,/, caches/VBZ/caches files/NNS/files from/IN/from vice/NN/vice when/WRB/when they/PRP/they are/VBP/are opened/VBN/opened and/CC/and stores/NNS/stores modified/VBD/modified copies/NNS/copies of/IN/of files/NNS/files back/VBP/back on/IN/on the/DT/the servers/NNS/servers from/IN/from which/WDT/which they/PRP/they came/VBD/came when/WRB/when they/PRP/they are/VBP/are closed/NNP/closed. venus/NN/venus may/MD/may contact/VB/contact vice/NN/vice only/RB/only when/WRB/when a/DT/a file/NN/file is/VBZ/is opened/VBN/opened or/CC/or closed/VBN/closed ;/:/; reading/NN/reading and/CC/and writing/VBG/writing of/IN/of individual/JJ/individual bytes/NNS/bytes of/IN/of a/DT/a file/NN/file are/VBP/are performed/VBN/performed directly/RB/directly on/IN/on the/DT/the cached/JJ/cached copy/NN/copy and/CC/and bypass/NN/bypass venus/NNP/venus. as/IN/as a/DT/a result/NN/result /,/, writes/VBZ/writes at/IN/at some/DT/some sites/NNS/sites are/VBP/are not/RB/not visible/JJ/visible immediately/RB/immediately at/IN/at other/JJ/other sites/NNS/sites /./. caching/VBG/caching is/VBZ/is further/JJ/further exploited/VBN/exploited for/IN/for future/JJ/future opens/NNS/opens of/IN/of the/DT/the cached/JJ/cached file/NNP/file. venus/NN/venus assumes/VBZ/assumes that/IN/that cached/JJ/cached entries/NNS/entries /:/( files/NNS/files or/CC/or directories/NNS/directories /:/) are/VBP/are valid/JJ/valid unless/IN/unless notified/JJ/notified otherwise/NNP/otherwise. therefore/NN/therefore /,/, venus/VBZ/venus does/VBZ/does not/RB/not need/VBP/need to/TO/to contact/VB/contact vice/NN/vice on/IN/on a/DT/a file/NN/file open/JJ/open to/TO/to validate/VB/validate the/DT/the cached/JJ/cached copy/NNP/copy. the/DT/the mechanism/NN/mechanism to/TO/to support/VB/support this/DT/this policy/NN/policy /,/, called/VBN/called callback/NN/callback /,/, dramatically/RB/dramatically reduces/VBZ/reduces the/DT/the number/NN/number of/IN/of cache-validation/NN/cache-validation requests/NNS/requests received/VBD/received by/IN/by servers/NNP/servers. it/PRP/it works/VBZ/works as/IN/as follows/NNP/follows. when/WRB/when a/DT/a client/NN/client caches/VBZ/caches a/DT/a file/NN/file or/CC/or a/DT/a directory/NN/directory /,/, the/DT/the server/NN/server updates/VBZ/updates its/PRP$/its state/NN/state information/NN/information to/TO/to record/VB/record this/DT/this caching/NNP/caching. we/PRP/we say/VBP/say that/IN/that the/DT/the client/NN/client has/VBZ/has a/DT/a callback/NN/callback on/IN/on that/DT/that file/NNP/file. the/DT/the server/NN/server notifies/NNS/notifies the/DT/the client/NN/client before/IN/before allowing/NN/allowing another/DT/another client/NN/client to/TO/to modify/VB/modify the/DT/the file/NNP/file. in/IN/in such/JJ/such a/DT/a case/NN/case /,/, we/PRP/we say/VBP/say that/IN/that the/DT/the server/NN/server removes/VBZ/removes the/DT/the callback/NN/callback on/IN/on the/DT/the file/NN/file for/IN/for the/DT/the former/JJ/former client/NNP/client. a/DT/a client/NN/client can/MD/can use/VB/use a/DT/a cached/JJ/cached file/NN/file for/IN/for open/JJ/open purposes/NNS/purposes only/RB/only when/WRB/when the/DT/the file/NN/file has/VBZ/has a/DT/a callback/NN/callback if/IN/if a/DT/a client/NN/client closes/VBZ/closes a/DT/a file/NN/file after/IN/after modifying/VBG/modifying it/PRP/it /,/, all/DT/all other/JJ/other clients/NNS/clients caching/VBG/caching this/DT/this file/NN/file lose/NN/lose their/PRP$/their callbacks/NNP/callbacks. therefore/NN/therefore /,/, when/WRB/when these/DT/these clients/NNS/clients open/JJ/open the/DT/the file/NN/file later/JJ/later /,/, they/PRP/they have/VBP/have to/TO/to get/VB/get the/DT/the new/JJ/new version/NN/version from/IN/from the/DT/the server/NN/server /./. readin.g/JJ/readin.g and/CC/and writing/VBG/writing bytes/NNS/bytes of/IN/of a/DT/a file/NN/file are/VBP/are done/VBN/done directly/RB/directly by/IN/by the/DT/the kernel/NN/kernel without/IN/without venus/NN/venus 's/POS/'s intervention/NN/intervention on/IN/on the/DT/the cached/JJ/cached copy/NNP/copy. venus/NN/venus regains/VBZ/regains control/NN/control when/WRB/when the/DT/the file/NN/file is/VBZ/is closed/NNP/closed. if/IN/if the/DT/the file/NN/file has/VBZ/has been/VBN/been modified/VBN/modified locally/RB/locally /,/, it/PRP/it updates/VBZ/updates the/DT/the file/NN/file on/IN/on the/DT/the appropriate/NN/appropriate server/NNP/server. thus/RB/thus /,/, the/DT/the only/JJ/only occasions/NNS/occasions on/IN/on which/WDT/which venus/NN/venus contacts/VBZ/contacts vice/NN/vice servers/NNS/servers are/VBP/are on/IN/on opens/NNS/opens of/IN/of files/NNS/files that/WDT/that either/DT/either are/VBP/are not/RB/not in/IN/in the/DT/the cache/NN/cache or/CC/or have/VB/have had/VBN/had their/PRP$/their callback/NN/callback revoked/VBD/revoked and/CC/and on/IN/on closes/NNS/closes of/IN/of locally/RB/locally modified/VBN/modified files/NNS/files /./. basically/RB/basically /,/, afs/NNS/afs implements/NNS/implements session/NN/session semantics/NNP/semantics. the/DT/the only/JJ/only exceptions/NNS/exceptions are/VBP/are file/JJ/file operations/NNS/operations other/JJ/other than/IN/than the/DT/the primitive/JJ/primitive read/NN/read and/CC/and write/VB/write /:/( such/JJ/such as/IN/as protection/NN/protection changes/NNS/changes at/IN/at the/DT/the directory/NN/directory level/NN/level /:/) /,/, which/WDT/which are/VBP/are visible/JJ/visible everywhere/RB/everywhere on/IN/on the/DT/the network/NN/network immediately/RB/immediately after/IN/after the/DT/the operation/NN/operation completes/VBZ/completes /./. in/IN/in spite/NN/spite of/IN/of the/DT/the callback/NN/callback mechanism/NN/mechanism /,/, a/DT/a small/JJ/small amount/NN/amount of/IN/of cached/JJ/cached validation/NN/validation traffic/NN/traffic is/VBZ/is still/RB/still present/JJ/present /,/, usually/RB/usually to/TO/to replace/VB/replace callbacks/NNS/callbacks lost/VBN/lost because/IN/because of/IN/of machine/NN/machine or/CC/or network/NN/network failures/NNP/failures. when/WRB/when a/DT/a workstation/NN/workstation is/VBZ/is rebooted/VBN/rebooted /,/, venus/NN/venus considers/NNS/considers all/DT/all cached/JJ/cached files/NNS/files and/CC/and directories/NNS/directories suspect/VBP/suspect /,/, and/CC/and it/PRP/it generates/VBZ/generates a/DT/a cache-validation/NN/cache-validation request/NN/request for/IN/for the/DT/the first/JJ/first use/NN/use of/IN/of each/DT/each such/JJ/such entry/NN/entry /./. the/DT/the callback/NN/callback mechanism/NN/mechanism forces/NNS/forces each/DT/each server/NN/server to/TO/to maintain/VB/maintain callback/NN/callback information/NN/information and/CC/and each/DT/each client/NN/client to/TO/to maintain/VB/maintain validity/NN/validity information/NNP/information. if/IN/if the/DT/the amount/NN/amount of/IN/of callback/NN/callback 