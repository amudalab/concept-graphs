computer networks prof.sujoy ghosh department of computer science and engineering iit  kharagpur lecture  36  refer slide time  00  47  our topic for today is qosqos and multimedia  that is quality of service and multimedia  refer slide time  00  57  00  58  we will just look at these one by one  refer slide time  01  07  01  37  quality of service  what is quality of service ? qos refers to traffic control mechanisms that seek to either differentiate performance based on application or network operator requirements or provide predictable or guaranteed performance to applications  sessions or traffic aggregates it talks about lot of things  the basic notion is that there are some applications which require one kind of quality of service by the way the quality of service may mean so many different things but the most important of them are the network delay and the packet loss these 2 parameters may sort of come in various ways  they affect differently when you talk about different applications and by multimedia we mean audio  video  etc going through the net which has got a different kind of qos characteristics  a different set of requirements than a file transfer we will see how we can handle qos and how multimedia traffic is handled in the network sometimes it may so happen that some applications are more important than others  so they need a better guarantee of performance such things also come under quality of service  refer slide time  02  46  04  24  take examples  video and audio conference requires bounded delay and loss rate that means the delay has to be bounded and also the variability of the delay should also be within the bounds and the loss rate of packets should again be bounded as you can see  this is quiet different from a file transfer where the loss of some packets can not be tolerated at all it is somewhat tolerant of losses  but more sensitive about delays when you are downloading a file  they are usually not that sensitive to trace video and audio streaming means maybe from video server or some internet radio  etc ; audio or video is being streamed to different clients so this again requires a bounded packet loss rate it may not be so sensitive to delay there might be some time critical applications like real time control here again  bounded delay is important there are some valuable called premium applications maybe those who run these premium applications are ready to pay more for this and they expect better guaranteed service than a low premium or less valuable applications  refer slide time  04  25  04  47  qos requirements can be specified as delay  delay variation  jitter   throughput which is the rate at which you can send data and error rate error rate is something where some packets get lost  refer slide time  04  48  08  10  there are two approaches to this  stateless and stateful qos solutions stateless solution  router maintains no fine grained state about traffic this has got a positive point that this is very scalable actually the kind of thing we have talked about till now is that routers do not maintain any states it is simply the raw packet forwarding capacity that comes to this in this way it is very scalable  this is also quite robust but it has weak services because there is no guarantee about the kind of delay or performance a particular application you will have to encounter on the other hand  we have stateful solutions routers maintain per-flow state this flow is very important while guaranteeing quality of service suppose there is some audio conferencing going on between some people  the audio signal nature is digitized and packetized and then these packets are going on this is a packet switched network  essentially at the heart of it this is a packet switched network but at the same time we not only talk about a single packet in entity in itself which is how we have dealt with packets so far but the end users are interested in the flow  that means the flow of packet all these streams of packets that are flowing which contain these audio signals constitute a flow and the users are actually interested in the flow suppose somebody wants some guarantee on this service  he wants a guarantee on this service of this flow merely looking at packets is not enough ; you have to go from a purely stateless situation to a stateful situation actually you have to make out that this is a part of particular flow naturally if you are stateful  if you go into the packet and look at what kind of packet it is and maintain a state about it in the router then you can give powerful services like guaranteed services plus high resource utilization  fine grain differentiation between different flows  protection where here there is a problem that this is much less scalable that means when the number of flows through a router starts increasing  and that is what will happen in any of the core routers  then the core router will not be able to handle this so it is much less scalable and much less robust  refer slide time  08  11  10  25  let us look at the integrated services this is a fully stateful system and is also known as intserv this is an intserv architecture or isa it is the architecture for providing qos guarantees in ip networks for individual application sessions we are talking about an entire session and the flow that has gone on during that session of flow consisting of so many packets it relies on resource reservation and routers need to maintain state information of allocated resources  for example g  and respond to new call setup requests the point is  in this situation how will you guarantee that this particular flow which is starting will get the requested kind of guarantee of service that means its delay would be bounded etc ? for this we have to specially reserve resources like buffers  resources like cpu time and so on at the intermediate points so  you have to reserve these resources for this particular flow so long as this flow continues that is how you give better service to this particular flow than to any other ordinary packet it will have to maintain the state in the form of these reservations and respond to new call setup request for example  as soon as you take out some resources  then naturally it goes out of the available resource pool and if a new call setup request comes for another session some intermediate router may not be able to handle that so it will not be admitted network decides whether to admit or deny a new call setup request  refer slide time  10  26  10  55  this is the basic idea of intserv therefore in this case since you have to reserve resources there is a call setup phase this is almost like a virtual circuit which is being setup there is a call setup request which goes from the source to the destination and back and on the way it reserves resources at each of the intermediate nodes and if each of the intermediate nodes  that is  each of the intermediate routers are ready to provide these resources then the call will be admitted  refer slide time  10  54  12  20  for resource reservation there is a particular protocol called reservation protocol or rsvp rsvp constitutes of call setup and signaling then there is a traffic qos declaration and per element admission control which means whether the call could be admitted or not then there will be qos sensitive scheduling that means  when a packet arrives first it may go into the buffer of a router and there maybe various buffers each of these packets will have to be scheduled for processing and then forwarding this processing may not be done in a uniform manner but it may be done in a qos sensitive manner similarly routing algorithm may also be qos sensitive  packet discard strategies etc come under the intserv qos components we have talked about scheduling and some of the other things now let us discuss about rsvp  refer slide time  12  21  13  44  rsvp is internet signaling it creates and maintains distributed reservation state this is decoupled from routing one thing is to use routing for setting up paths but then this has to reserved resources therefore it is decoupled from routing it uses multiple trees setup by routing protocols  not rsvp multicast tree is setup by routing protocols rsvp is for reserving protocols there unlike atm or telephony signaling while doing the call setup you actually assign the virtual setup this is initiated by the receiver  this scales for a multicast and it may use soft state that means reservation times out unless refreshed so you have to refresh reservation from time to time  otherwise one particular flow may be reserved and never be used so that part will go away that is why reservation will be timed-out and latest paths discovered through path messages  forward direction  and used by reservation messages in the reverse direction  refer slide time  13  45  14  08  signaling semantics  in signaling semantics you have a setup acknowledgement  setup response  admission control  tentative resource reservation and confirmation this can be done from both directions  simplex and duplex setup and with no multicast support these are the signaling semantics in brief  refer slide time  14  09  15  02  suppose this is the source  the source would initiate the setup it will send a setup call to the first switch controller  router to another one and finally to the destination each of the intermediate nodes send a setup ack so that the source knows that this is the way it is going to go and the path is being setup and then a setup response will come and the acknowledgement will go to the destination and another setup response and acknowledgement will keep coming in what we will have to see is that  in this fashion  after this  the resource has to be reserved at each of the node for whatever service that is being asked for  refer slide time  15  03  16  19  session must first declare its qos requirements and characterize the traffic it will send through the network there are two specifications r spec and t spec  the r spec defines the qos being requested  what kind of bound we want on the delay  what kind of bound we want on the jitter  what kind of packet loss is acceptable to me and depending on this the resource is going to be reserved that means maybe a special queue or buffer will be setup just for this flow or something will be done with scheduling there will be some weight given to it for processor time and so on in the intermediate nodes and then there is a t spec that is  traffic characteristics like what kind of traffic  what is the burstiness of the traffic etc ? such traffic characteristic will also have to be sent therefore depending on the t spec and the r spec the intermediate nodes will compute what kind of resource is visibly required so signaling protocol is needed to carry the r spec and t spec to the routers where reservation is required rsvp is a leading candidate for such signaling protocol  refer slide time  16  20  17  00  as far as call admission is concerned  routers will admit calls based on their r spec and t spec that whether they can handle or they can manage to give so much resources for this there is the financial side also  that whoever has initiated whether he has an agreement to pay for such premium service and based on current resources allocated at the routers to other calls if other senders have already reserved most of the resources in the intermediate routers then a new call may not be admitted  refer slide time  17  01  17  30  this is the router  the request specifies the traffic the t spec and the guarantees of service which is required which is the r spec now this reply to the element considers unreserved resources and the required resources for this new request if it can handle that then it replies whether or not request can be satisfied  refer slide time  17  31  17  46  this achieves per-flow bandwidth and delay guarantees for example  suppose we want a guarantee 1 mb/sec and < 100 ms delay to a flow and if we have a network like this   refer slide time  17  47  18  06  first the receiver will just allocate resources  that means perform per-flow admission control first the path has to be setup  that has not been shown and this is in the response path  so perform per-flow admission control  refer slide time  18  07  18  14  install per-flow state  so this flow has to be recognized  for that the router has to have a per-flow state  refer slide time  18  15  18  25  challenge  maintain per-flow state in a consistent manner right up to the sender if all the routers agree then only you can give it  refer slide time  18  26  18  36  when sender starts sending first of all it has to be classified that this is the integral part of this flow  so per-flow classification is necessary  refer slide time  18  37  18  48  depending on how it has been classified  it will be put in the appropriate buffer and the corresponding buffer has to be managed  so per-flow buffer management is also necessary  refer slide time  18  49  19  03  and this way it will go through all the routers  and per flow scheduling is necessary for cpu resources and the flow will go through  refer slide time  19  04  19  56  in the data path  we have per-flow classification  per-flow buffer management  per-flow scheduling whereas in the control path we have the installed and maintained per-flow state for data and control paths for each of the flow the router has to do a lot of work so this does not scale unfortunately this is very good at giving services but if you are trying to maintain a per-flow kind of classification and management at each of the nodes  this would not scale because if the number of flows goes beyond a certain level then it will be very difficult to maintain it will be very difficult to properly give it buffers and queues etc in the intermediate nodes so that is why it does not scale so well  refer slide time  19  57  21  00  stateless solutions are more scalable and they are more robust stateful solutions provide more powerful and flexible services it gives guaranteed services plus high resource utilization it can make fine grained differentiation between different flows and it also receives protection on the way since we are short of demarcating each of the flows demarcating the flow is somewhat similar  either to setting up atm virtual circuits  when you do that  you also reserve request but that is done while call setup itself  that is not done by a separate reservation protocol hence it is similar to that or it maybe similar to mpls where a particular flow can be differentiated from other flows and it maybe treated specially  refer slide time  21  01  22  56  then on one hand you have  the raw internet just takes a packet by itself and tries to route it and if it can not route  it is the best effort and it goes off that means it is discarded  that is one end of the spectrum the other end of the spectrum is that you have a full power flow classification and management for each of the flows where you can have a very good control etc but it does not scale so there is a question  can we do something in between and that is well the next model comes which is known as a diff-serv  differentiated service this is also stateful but here each distinct flow does not necessarily mean a distinct state these are sort of soft states which can accommodate a number of flows together so that the pressure on the routers in the intermediate nodes or in the backbone of the network becomes less scalability  maintaining states by routers in high speed networks is difficult due to a very large number of flows so diffserv provides reduced state services  that is maintain state only for large granular flows rather than end to end flows  tries to achieve best of both worlds so diffserv intends to address the following difficulties with intserv and rsvp flexible service models  intserv has only two classes  wants to provide more qualitative service classes  wants to provide relative service distinction like platinum  gold  silver etc and simpler signaling than rsvp many applications and users may only want to specify a more qualitative notion of service rather than a quantitative notion of service  refer slide time  22  57  24  00  this is a diffserv model  you have an ingress edge router and you have the interior routers  it goes to the egress edge router edge routers  traffic conditioning that means  policing  marking  dropping etc are done at the edge the reason we want to do them at the edge of the network is that  there the number of flows etc is much lower and you can handle it over there and when you come to the core the core routers are very busy so we do not want to do that over there therefore set values in ds-byte in ip header based on negotiated services and observed traffic interior routers  traffic classification looking at this byte and forwarding near stateless core this is almost like mpls or atm use ds-byte as index into a forwarding table  refer slide time  24  01  24  45  edge router  it does per-flow traffic management  marks packets as in profile and out profile core router  it does per class tm  buffering and scheduling based on marking at edge preference is given to in-profile packets in-profile means some traffic shape has been negotiated or is expected and then something comes which is out of the shape that means somebody is sending more packets per unit time than that was negotiated  so those are out of profile packets assured forwarding  this is what the core router does  refer slide time  24  46  25  34  marking and power flow classification etc is done at the edge but in between the scheduling is done the packet is marked in the type of service in ipv4 and traffic class in ipv6 renamed as ds then 6 bits used for differentiated service code point dscp and determine the phb or per hop behavior that the packet will receive  2 bits are currently unused and this service code will dictate how this particular packet will be treated  refer slide time  25  35  26  47  for forwarding per hop behavior or phb carried out in the interior routers is simplified process based on class and resources specified when sla was created phb has been defined in a certain rfc for example for premium service  it should have low loss  low delay  low jitter  assigned bandwidth is equivalent to point to point leased line etc is the kind of service we want  although this is not leased  this is the plain packet switch network it is guaranteed through policing and shaping in order to stay within the departure rate of leaky bucket and wfq since all the intermediate nodes guarantee that it will get premium service traffic conditioning  it maybe desirable to limit traffic injection rate of some class  users declare traffic profile  example rate and burst size  traffic is metered and shaped if non-conformed we have seen this already when we discussed congestion control  refer slide time  26  48  30  34  the packets are classified and then they are marked when they are classified and marked naturally for the session  some kind of t spec that is traffic spec has been already negotiated so it meters to see whether it conforms or not and then the traffic maybe shaped if by chance some burst comes and if the system can handle it then it will keep it for some time and then forward it only at an appropriate rate but if it goes too much then it drops it here itself this qoi is absolutely important especially for multimedia traffic as was explained for ordinary data traffic like web traffic or ftp  file download etc  those usually are not very sensitive to delay and variation in the delay that means you may get a lot of packets in one bunch then packets maybe slowing and coming extra and these things really do not matter much if it is within some bounds but in multimedia  these things are very important for example  when we talk  if the delay is beyond a certain level then we feel very odd for example  few years back if you had made an international call which is routed in a very peculiar way  you would find a lot of delay if you are speaking to somebody in usa  which is quiet annoying additionally what is annoying is that if the delay remains constant  some other people can manage it but if the delay keeps varying a lot  that is  if there is a lot of jitter then that is very irritating for people on the other hand unlike data  maybe a few bits are dropped here and there ; it will not matter too much maybe if you analyze it using machines you will find some difference in quality but as such to human perception most of the time it does not matter too much the multimedia traffic is quite different from ordinary data traffic and as network is spreading and the way it is going  people find it cheaper and most convenient to use this internet or use this computer network for what was traditionally telecoms domain in the sense for audio or video conferencing we have discussed about inserv  diffserv  rsvp etc  but the trouble is  many of the routers on the way are not going to support this because you need a consistent support throughout the path so people still try to use the raw internet which is just handling it at the packet level not really taking note of the flows and still try to handle multimedia and for that a set of protocols has evolved let us just look at those protocols now  refer slide time  30  35  31  17  principles  classify multimedia applications ; identify the network services that the applications need making the best of best effort service  you already have a best effort service and how can you make the best of it is what we will see in rtp  etc and there are some mechanisms for providing qos these are specific protocols for best effort and architecture for qos at the network level if you have supported qos these would have gone through much better  refer slide time  31  18  33  24  there are various classes of mm applications and not all are the same there is streaming of stored audio and video  that is one kind of application  for example  you download a song  movie that is a streaming  the stored audio and video is being streamed then there is streaming of live audio and video  then there are real time interactive audio and video and by this way you can generally classify by multimedia application you mostly need audio and video so by this way they can be classified fundamental characteristics  they are typically delay sensitive they are also sensitive to delay jitter which is a variation in delay loss tolerant  infrequent losses cause minor glitches  so this is the antithesis of data which are loss intolerant but delay tolerant sometimes we like vcr like functionality suppose we are seeing a video  so we try to equate it with the kind of functionality like in a vcr so client can pause  rewind  fast forward  push slider bar etc and at the same time when a multimedia session starts maybe an initial delay of 5  10 seconds is acceptable  1 to 10 seconds until command effect is also acceptable but we need a separate control protocol because we really have no other way of getting any kind of control  feedback  etc on these streams as we will see timing constraint for still ? to-be transmitted data  in time for play out  refer slide time  33  25  34  42  suppose we have  streaming of stored multimedia suppose this is the recorded video which is being sent  this is the cumulative data that has been sent  this is like a staircase because they have been sent as packets so chunks of data is going together so they are being sent first of all you record the video and the video is sent and in the third position the video is received and played at the client this is streaming of stored multimedia there is a network delay in between when the video is sent and the video is received as soon as you send it  you can not start seeing it  streaming  at this time the client is playing a part of the video while the server is still sending the later part of the video maybe in this particular diagram the client has already started seeing something although some of the data has still not been sent  refer slide time  34  43  38  05  therefore the streaming of stored multimedia is different from streaming of live multimedia for example  internet radio talk show is a live multimedia  a live sporting event which is being web cast streaming has a playback buffer  so playback can lag 10 ? s of seconds after transmission but it still has some timing constraint the interactivity is limited  for example  obviously if it is live you can not fast forward it but rewind and pause maybe possible it solely depends on how you handle it so this is unlike a stored multimedia where fast forward would also be possible interactive real time multimedia  is one of the most important applications like ip telephony  video conference of the web  distributed interactive worlds etc are the applications of interactive real time multimedia which has the most stringent qos requirements end-to-end delay requirements  different applications have different kinds of requirements for example if it is audio  if the end-to-end delay is less than 150ms it is good and less than 400ms is acceptable but beyond that people seem to be bothered a lot it includes application level that is packetization and the application level delay and the network delays higher delays are noticeable and they impair the interactivity session initialization  how does callee advertise its ip address port number  encoding algorithms etc because like in an ip telephony call all these issues are there if you are using a standard tcp or udp ip this is what you would have to do actually but there are no guarantees on delay or loss but multimedia application requires some qos and level of performance to be effective today ? s internet multimedia applications use application level techniques to mitigate as best as possible this is what we mean by best efforts  this means we can not do anything  maybe at the network layer etc it would implement an inserv or diffserv  but in most of the places that is not practical at the moment so we try to do something at the end points i.e at the application level the application level necessarily means the end point because it is the intermediate  it will not go right up to the application layer but maybe it will penetrate a little deeper this is mostly done from end to end  refer slide time  38  06  40  18  in this pseudo protocol  the number of protocols  first we look at real time protocols rtp that is rfc 1889 rtp specifies a packet for packets carrying audio and video data so rtp packet provides payload type identification such as what type of payload it is carrying  packet sequence numbering  time stamping that is important for giving some feedback rtp runs in the end systems rtp packets are encapsulated in udp segments interoperability  if two internet phone applications run rtp then they maybe able to work together and may communicate to each other through the network rtp runs on top of udp we have seen in both tcp and udp  the udp is a very lightweight protocol so it is also expected to be much more efficient than tcp tcp is a heavy weight protocol so it has a lot of overhead and all these acks keep on flowing rtp libraries provide some kind of support over an above the transport layer library  that is how a rtp runs on udp so this is a provider transport layer interface that extend a udp so port numbers  ip addresses are there in udp itself and then payload type identification  packet sequence numbering and time stamping is what rtp adds to udp and then  the application is here  it moves a little bit into the application domain maybe just look at the rtp header to do some what better service  refer slide time  40  19  41  43  rtp by itself does not provide any mechanism to ensure timely delivery of data or provide other quality of service guarantees  because that really depends upon what is happening on the way an rtp is running just between the two end points so rtp encapsulation is only seen at the end system which is not seen by intermediate routers so routers providing best effort service do not make any special effort to ensure that rtp packets arrive at the destination in a timely manner the services in between is still a best effort since we look at it at the end points there we can effect on some kind of control if you have noted  this rtp header goes in front of the payload for the data for example  it is the voice which is traveling then the voice signal is digitized and packetized before each packet produced by your application layer  the rtp header will come which is available in the data there is a separate protocol control called real time control protocol or rtcp  refer slide time  41  44  43  25  this is used in conjunction with rtp for multicast transmissions each participants in rtp session periodically transmits rtcp control packets to all the other participants each rtcp packet contains sender and receiver reports so reports statistics etc are useful to applications and this is what you might use to improve the performance of your session inside the network  inside the backbone nobody really knows about your session so it is only the end points but they exchange this kind of a statistics through the rtcp packets and then the application can control the rate at which things can be done  etc therefore some kind of feedback mechanism is present the statistics include number of packets sent  number of packets lost  inter arrival jitter etc feedback can be used to control performance  sender may modify its transmissions based on feedback this is the main point  you get some kind of feed back as this is running on udp there is no acks  packets coming on which you can send these statistics therefore what is done is that  this rtcp is actually in band control so a part of the bandwidth is kept for rtcp and through this bandwidth they exchange this kind of information and the time stamp  so you know that how much delay is being experienced at the other end and after having all these statistics you may do what you can at the application layer to modify the way you are transmitting in order to get better service  refer slide time  43  26  44  14  there are receiver reports  fraction of packets lost  last sequence number  average inter arrival jitter  etc are a part of the receiver report sender report  ssrc of the rtp stream  the current time  the number of packets sent  and the number of bytes sent source description  e-mail address of sender  sender ? s name  ssrc of associated rtp stream etc provide mapping between ssrc and the user or host name  refer slide time  44  15  45  46  another use of rtcp is for synchronization rtcp can synchronize different media streams within a rtp session so consider video conferencing applications for which each sender generates one rtp stream for video and one for audio the point is  you have got two streams of packets for the video streams and then the audio has to be synchronized with it the lips are moving in some other way and sound is coming in some other way so that will not help in anyway hence they have to be synchronized in order to synchronize this  rtcp uses the time stamp which i referred to earlier and tries to synchronize the two different streams this is another important use of rtcp so time stamps in the rtcp packets are tied to the video and audio sampling clocks they are not tied to the wall clock time the wall clock times are also exchanged and this is to get an idea about the delay each rtcp sender report packet contains for the most recently generated packet in the associated rtp stream  timestamp of the rtp packet and wall clock time for when packet was created this gives you an idea about the delay receivers can use this association to synchronize the play out of audio and video  refer slide time  45  47  48  02  rtcp bandwidth scaling  rtcp attempts to limit its traffic to 5 % of the session bandwidth remember  that this is in band control that means whatever bandwidth is given for the session it is within that only so whatever the rtp actual data packets are using  maybe 5 % of that  the rtcp tries to use and in this 5 % it is kind of divided  like 25 % for the sender  and 75 % for the receiver because there may be many receivers and this 75 % will again be distributed amongst the receivers suppose one sender sending video at a rate of 2 mbps then rtcp attempts to limit its traffic that means to the rtcp traffic to 100 kbps rtcp gives 75 % percent of this rate to the receivers  remaining 25 % to the sender we come to another protocol called rtsp known as the real time streaming protocol earlier we were talking about interactive live audio or video conferencing  but now let us talk about streaming user interactive control is provided  for example  the real time streaming protocol where a helper application displays content which is typically requested via a web browser  for example a real player  then we have the typical functions namely decompression if it is compressed in audio or video  jitter removal which means you play them back at a constant rate  error correction  use redundant packets to be used for reconstruction of original stream  some kind of graphical user interface for user controls like rewind  fast forward  etc are given by rtsp what it does not do is  it does not define how audio and video is encapsulated for streaming over network  it does not restrict how streamed media is transported  whether tcp or udp does not specify how the media player buffers audio and video so these are more at the application layer  refer slide time  48  03  49  08  this is the simple approach for steaming audio or video audio or video is stored in file files are transferred as http object that is received in entirety at client then pass to player so audio or video are not streamed and so no pipelining  long delays until play out here the problem is that if it is some kind of a movie and if it is downloaded then the entire file is downloaded  so downloading that entire file will take a lot of time  this is a very simple approach and then there is no problem  you can download the entire file and then play it use options like fast forward or reverse or speed up etc but streaming in the media means  as it starts streaming the audio or video file then after some delay the play back also starts  refer slide time  49  09  50  43  simple situation is  we have a web browser  web server with audio files and a media player and that is how we do it the actp request  so browser gets a meta file then the browser launches a player passing the metafile to the player and the player contacts the server and the meta file contain all the necessary information  this is called progressive download let us look at the streaming multimedia client buffering suppose as before this is the constant bit rate video that is being transmitted and now because of the network delay and the availability of the network delay this is what the profile looks like of how it is received but if you do this after some sufficient delay and you buffer it  the main point is  these two lines are never crossing so now you can play it at a constant rate so all these delay variation etc that will sort of go and you would get a nice streaming audio or video this is the basic idea of streaming multimedia in this part  the difference between these two where this is the buffered part  so the client side buffering play out delay compensate for network added delay or delay jitter etc  refer slide time  50  44  51  29  streaming multimedia  is where udp is usually preferred we will also look at how tcp is done the server sends at rate appropriate for client oblivious to network congestion so  often sent rate is equal to encoding rate that is constant rate  then there is a fill rate for constant rate minus packet loss short play out delay 2-5 seconds compensate for the network delay jitter somebody does not really mind so much  that if the play back starts after 5 seconds but in this 5 seconds the entire thing will be buffered and that will take care of the jitter error recovery takes place if time permits  refer slide time  51  30  52  07  tcp  it sends at maximum possible rate under tcp and fill rate fluctuates due to tcp congestion control because in tcp congestion control the windows size can keep on varying so larger play out delay is smooth tcp delivery rate if you start playing it after quite some time so that you can handle this tcp variation in rates etc then you can get a smooth rating then http tcp passes more easily through firewalls rather than udp  refer slide time  52  08  52  24  rtsp example  meta file is created and communicated to the web browser browser launches player as we have seen and player sets up an rtsp control connection data connection to streaming server  refer slide time  52  25  52  47  web browser gets an http get and web server presentation description then the media player is setup a connection with the media server and it starts getting it  buffers it and starts playing the media stream comes  then you may pause  you may teardown  etc  refer slide time  52  48  53  09  finally i will just mention about two protocols namely  h.323 which is an itu standard which is the old protocol for setting up telephone calls h.323 is aging a little bit and there is a  refer slide time  53  10  53  28  newer protocol namely session initiation protocol all telephone calls and video conferencing calls take place over the internet that is the vision  you can reach the callee no matter where the callee roams  no matter what ip devices the callee is currently using therefore  refer slide time  53  29  53  58  for setting up calls there is a large protocol setting up a call  provides mechanisms for caller to let callee know she wants to establish a call and provides mechanism so that caller and callee can agree on media type and encoding because that has to agree and it provides a mechanism to end the call the first one is called an invite and there are all kinds of  refer slide time  53  59  54  29  commands for this it also has the facility to determine the current ip address of callee  maps mnemonic identifier to current ip address there are other components of chip like  chip register and so on then it has something for call management  that means add new media streams during call  change encoding during calls  invite others for a conference  transfer and hold calls etc  refer slide time  54  30  54  38  there are all kinds of details about codec negotiation etc  refer slide time  54  39  56  15  and then you may reject a call also the audio  video and multimedia over the internet is going very strongly at one point of time network performance was so poor that there was no question of accommodating this but as the network performance has increased exponentially over the past years now it is becoming much possible to handle lot of multimedia traffic through network this is getting more popular we talked about inserv  gifserv but the actual strategy that people actually deploy is when they feel this is not sufficient then they put in more bandwidth so put another fiber and take up your multiplexer weight etc so that you solve the problem because the demand for multimedia is so great good day  today we will talk about network management as the network becomes very large we need support for managing these networks  we need support for keeping track of these networks and so  we are going to discuss on how that is done  refer slide time  56.16  56.18  today ? s topic is network management  refer slide time  56.19  56.42  network management is the process of controlling a complex data network to maximize its efficiency and productivity the overall goal of network management is to help with the complexity of a data network and to ensure that data can go across it with maximum efficiency and transparency to the users  refer slide time  56.43  57.18  the iso  that is the international organization for standards in network management forum divided network management into five functional areas  fault management  configuration management  security management  performance management and accounting management out of this  actually it is quite often you find that there are two systems which was deployed  refer slide time  57.19  57.41  in that case the trap will never come the only thing is that when the network management station polls that particular device so it will fail to respond that way you will find out that something is wrong so you should use a mixture of trap and polling to do your management  refer slide time  57.42  58  30  let us quickly go through the types of snmp packets  one is the get request  it retrieves the value of a variable or a set of variables  and get next request used to retrieve values of entries in a table  so the next entry get bulk request retrieves a large amount of data used instead of multiple get request and get next request so that in one go you can get a lot of information as far as the bandwidth is concerned set request  set or store a value in a variable response  response to get request or get next request contains values and or variables requested trap  sent from agent to manager to report an event  refer slide time  58  31  58  48  inform request  sent from one manager to another remote manager to get a value of some value from agents under the control of the remote manager report  designed to report some types of errors between managers but not very widely used  refer slide time  58  49  58.58  now we come to the snmp data types computer networks prof  sujoy ghosh department of computer science and engineering iit  kharagpur lecture # 37 network management  refer slide time  00-57 min  good day  so today we will talk about network management you know that as the network becomes very large we need support for managing these networks  we need support for keeping track of these networks and how these are done is what we are going to discuss  refer slide time-1  13 1  16min  so the topic for today is network management  refer slide time  1  17 1  40 min  network management is the process of controlling a complex data network to maximize its efficiency and productivity the overall goal of network management is to help with the complexity of a data network and to ensure that data can go across it with maximum efficiency and transparency to the users  refer slide time  1  41 2  54 min  the iso that is the international organization for standards in network management forum divided network management into five functional areas  fault management  configuration management  security management  performance management  and accounting management out of these often you find that there are two systems which has deployed in large network one is the network management system and another is the enterprise management system enterprise management system usually takes care of the configurations of individual machines etc  and the network management does the fault management and performance management these are two aspects which network management always has to take place and it can do some configuration management for some network devices also so we will just quickly run through each one of these  refer slide time  2  56 5  48 min  fault management is the process of locating problems or faults on the data networks it involves the following steps  discover the problem  isolate the problem  and fix the problem  if possible   sometimes it is possible to fix the problem remotely and sometimes it is not possible first of all discovering the problem is important because usually in a large network there are so many hundreds of components which have been deployed over a considerable area you need to have a good support for discovering the fault a fault in one part of a network can lead to impairment of services in another part of a network for example  suppose some switch has become faulty and it is generating a lot of spurious traffic  now the first thing is to locate where all these traffic is coming from  and then you have to isolate it  and then fix it sometimes you need to physically go there and fix it but sometimes you can do it remotely but before you can fix it  you have to discover that there is a problem and this is where the problem lies  this is the central part of fault management another thing to note is that  the network devices may come up first and be switched off therefore the topology of the entire network is not fixed  some of them may be off  some may be switched on but it is not working so anyway the topology of the network is not fixed therefore for fault management  first you have to discover which are the areas or which are the elements that are currently on the network and are put on and are working correctly and then which others are not working that is  they are switched off  or may be they are faulty etc continuously you have to be in a mode of discovering the topology of the network  as to find out which of these are switched on and which is doing what then we need to locate the faults as it occurs this is fault management then you have configuration management  refer slide time  5  45 6  02 min  the configuration of certain data network devices controls the behavior of the data network configuration management is the process of finding and setting up that is  configuring  these critical devices  refer slide time  6  03 6  36 min  security management  it is the process of controlling access to information on the data network it provides a way to monitor access points  and records information on a periodic basis  and provides audit trails  and sounds alarms for security breaches we will be talking more about security in the next lecture which is a very big topic by itself but we will devote only one lecture to it there we will talk little bit more about the security management and securities in network  refer slide time  6  39 7  48 min  performance management  involves measuring the performance of the network  hardware  software and media examples of measured activities are  overall throughput percentage utilization  error rates  response time quite often a fault in a network does not always be faulty but there may be degradation in performance for example  in one particular network node you may find that a lot of packets getting dropped so you have to find out periodically that  who is doing what  and how  in a sense that at what percentage ? how many packets it has handled ? how many it has handled successfully ? how many it has dropped and so on and from such statistics you have to come to a conclusion about whether this is really malfunctioning or not error rates are important  response time  percentage and utilization once again there are ways to find out these things and we will talk about them  refer slide time  7  51 8  11min  accounting management  it involves tracking individual ? s utilization and grouping of network resources to ensure that users have sufficient resources this involves granting or removing permission for access to the network etc so this is also important in many cases  refer slide time  8  13  10  50 min  now the protocol that is used for network management is known as snmp simple network management protocol objectives are following  it is a framework for management devices in an internet using tcp/ip it provides a set of fundamental operations for monitoring and maintaining an internet  and an application level protocol allows it to monitor devices made by different manufacturers installed on different physical networks in a particular network all the network devices will not come from the same vendor you may have procured some of the devices at some point of time from some vendors and some other devices from some other vendor and all of them form a part of the same network when you are talking about network management in that place  you have to talk about all these heterogeneous platforms there has to be a standard protocol by which the network manager can talk to each of these devices when you look at the network devices which are available in the market  you find that there are broadly two types of devices  managed device and unmanaged device for example  for a switch there is a managed switch and an unmanaged switch obviously the switch which is unmanaged does not support this snmp and do not have the so called management agent in it in order to manage and get the information about it from a central place the devices have to be managed therefore at the very edge of the network for cost consideration you may put some unmanaged devices but then management of fault etc  for those devices have to be handled separately you can not monitor them centrally for monitoring them centrally you need to have managed devices managed devices would contain some kind of software and some hardware support inside each of the device to talk to this network management station wherever it is broke usually this costs money but for a large network this is important  refer slide time  10  51  11  12 min  this is a very simplified picture  we have the network manager here and through the tcp/ip protocol it talks to an agent this agent resides in a managed device and these agents will have some agent variables which should be available to this manager for monitoring that is the basic idea  refer slide time  11  14  11  48 min  agent  is a router or host that runs the snmp server program by the way  apart from managing network devices you can also have management agents in software etc to instrument it in some fashion the agent keeps performance information in a database  can send a trap to the manager if something unusual occurs so  trap is a sort of alert to the manager  refer slide time  11  50  11  56 min  manager is a host that runs the snmp client program and has access to values in the agent ? s database  refer slide time  11  57  12  28 min  based on three basic ideas  a manager checks an agent by requesting information that reflects the behavior of the agent a manager forces an agent to perform a task by resetting values in the agent database an agent contributes to the management process by warning the manager of an unusual situation these are the three basic approaches and we have specific commands for doing all these  refer slide time  12  29  12  46 min  snmp uses two other protocols  smi  structure of management information  and mib  management information base so  one is used for naming objects and the other is the basic management information base accessed by the manager  refer slide time  12  47  12  57 min  snmp defines the format of packets exchanged between a manager and an agent it reads and changes the status that is the values of objects  variables in snmp packets  refer slide time  12  58  13  52 min  smi defines the general rules for naming objects  defining object types including range and length and showing how to encode objects and values smi defines neither the number of objects an entity should manage nor the names the objects to be managed nor defines the association between the objects and their values instead  what smi does is to have some scheme for giving names to the object the names are not human friendly but they look as a series of integers  but there is a way of encoding the names of objects so that we are very precise and distinct about what we are talking taking into consideration we can have a heterogeneous network  refer slide time  13  54  14  04 min  the role of mib  mib creates a collection of named objects  their types  and their relationships to each other in an entity to be managed  refer slide time  14  06  14  30 min  snmp  a group was formed and their efforts were completed in early 1993 there are 12 documents describing snmp version 2  there is an snmp version 3 also there are three basic commands that are used with snmp  get  set  get next these are the basic operations then you can have a bulk  get  etc  refer slide time  14  31  15  35 min  this is the general situation we have network management station  there may be more than one network management station in a very critical network you may have two network management stations  etc therefore we have some network management station which runs some network management application  nma this software talks in snmp which manage devices these are network elements which are managed this nma network management application uses the snmp protocol to talk to the management agent which resides in every managed object this managed object maintains the mib management information base and from this the information passes back and forth hence this is the general scheme  refer slide time  15  36  15  40 min  there are two approaches for the management system to obtain information from snmp  one is the traps and other is polling  refer slide time  15  41  16  14 min  first let us talk about traps traps are basically the information which is being pushed from the managed device to the network management station traps are un-requested event reports that are sent to a management system by an snmp agent process a a trap will contain the network device name  time the event happened  and the type of event  refer slide time  16  15  16  51 min  when a trappable event occurs  a trap message is generated by the agent and is send to a trap destination  a specific configured network address which is the network address for the management station many events can be configured to signal a trap like a network  cable fault  failing nic  or hardware  a general protection fault  or a power supply failure although many events can be configured to signal a trap but there are pros and cons of what event is being configured a trap  there are trade offs  refer slide time  16  52  18  15 min  traps can also be throttled you can limit the number of traps sent per second from the agent  this is important for example  a faulty node may keep on generating a very large number of traps so that it will overwhelm the network and it will not carry any extra information in helping to set right the fault you may have to constrain the number of traps that can be generated per minute time or something so traps have a priority associated with them critical  major  minor  warning  marginal  informational  normal  unknown etc actually it may not be a good idea to generate traps for low clarity may be you should not be generating any trap at all because if you do that  remember that a network may consist something of the order of a few hundred or a few thousand network devices and if all of them generate routine reports and keep on sending traps then that may not be a very effective way of managing a network  refer slide time  18  16  18  43 min  resources are required on the network devices to generate a trap when a lot of events occur the network bandwidth may be tied up with traps so  thresholds can be used to help because the network device has a limited view it is possible that the management system has already received the information and the trap is redundant if something has happened somewhere else and somebody else has detected it and generated a trap then that is not generating any extra or relevant information  refer slide time  18  49  19  26 min  the network management system periodically queries the network device for information so this is the other mode which is snmp polling from time-to-time the network management agent will request for some information from the management agent and this might do in a round robin fashion  in a periodic fashion using some period which is configurable the advantage is  the network management system is in control and knows the big picture so this is the other way ; one is trap  the other is polling  refer slide time  19  27  20  25 min  the disadvantage is the amount of delay from when an event occurs to when it is noticed for short interval the network bandwidth is wasted and for long interval the response to events is too slow the point is that  if you are depending only on polling and if you are polling at a very low frequency then after your last poll immediately some fault may have occurred but you will discover that only when you poll next so  in a long interval the response to events is quite slow on the other hand if you poll very fast then most of the network bandwidth and network resources are used for this network management so that is not very efficient and bandwidth is wasted so you have to come to some kind of trade-off between the two  refer slide time  20  26  21  23 min  one good way to approach this is to use both traps and polling when an event occurs the network device generates a simple trap the management system then polls the network device to get the necessary information the management system also does the low frequency polling as a backup to the trap what might have happened is  you can not depend purely on trap for one reason that is  the network device may have gone down in such a way that it is not even able to generate the trap in that case the trap will never come  only thing is that  when the network management station polls that particular device it will fail to respond and that way it will find out that something is wrong so you should use a mixture of trap and polling to do your management  refer slide time  21  24  21  26 min  let us quickly go through the types of snmp packets  getrequest  it retrieves the value of a variable or a set of variables ; getnextrequest ? is used to retrieve values of entries in a table ; getbulkrequest retrieves a large amount of data used instead of multiple get request and get next request so that in one go you can get a lot of information as far as bandwidth is concerned  refer slide time  21  57  2  11 min  setrequest  set or store a value in a variable ; response ? response to get request or get next request contains values of variables requested ; trap  sent from agent to manager to report an event  refer slide time  22  15  22  31 min  inform request  sent from one manager to another remote manager to get some value from agents under control of the remote manager ; report  designed to report some types of errors between managers but is not very widely used  refer slide time  22  32  24  01 min  now we come to the snmp data types  these data types have to be  since network may contain devices from different vendors  each vendor of course will design his own agent so he has to agree to some kind of standard about what will be there but at the same time we do not want to standardize things in such a way so that people can not innovate and come up with new kinds of devices what is defined are the different data types  different types of variables  one is the integer  it is a signed 32-bit integer  octet string that is the byte string  object identifier  is one of the most important data types and we will look into the detailed of object identifier when we talk about smi ; null  is not actually a data type but a data value  ip address is a special data type  it is an octet string of size 4 bytes we are using 4 byte of addresses in network byte order  refer slide time  24  00  25  02 min  then you have a counter  it is an unsigned 32 bit integer which rolls over the 32 bit will count to about 4 trillion after the end of the counter the value is rescheduled which means it will go back to zero and start counting from zero again this counter is more important because that is what will give you the statistics about the network for example  you want to know that in the last may be ten minutes or so how many packets this has been sent  and how many packets has been dropped  and how many packets has been successfully processed etc so the management station may want to know such information so these are the kind of statistics you collect therefore you need to have these counters for these different values now a counter is going to go back to zero after sometime so you need to take care of that  refer slide time  25  02  26  05 min  if this going back to zero then after a poll  when you have got a value and when you see that the counter value is sufficiently high  you may like to set it to zero deliberately so that you get the right count next time gauge  unsigned 32 bit integer  once again it is the same as counter but it will top out and stay there that means  it is going to top out and the next time you come it will not show a very low value but it will show a high value and if you see that the gauge has topped out may be you can reset it after that but you get some estimate of what has happened rather than a rolled over value time ticks  unsigned 32 bit integer so 32 bit integer rolls over after 497 days but 497 days is very long in this network world  refer slide time  26  06  26  36 min  opaque  used to create new data type not in snmpv1 and then there are some other data types for specific purpose like date and time  display string  mac address  physical address  time interval  time stamp  truth value  variable pointer  textual conventions used as types these are the different snmp data types  refer slide time  26  37  27  43 min  let us just have a look at the snmp mibs management information base is a collection of related managed objects used to define what information you can get back from the network device these are standard and enterprise specific mibs the point is that  some things may be standard  and there are some information about the device for example  if we have a device designed by cisco then that may have its own specialty which is not found in other vendors therefore that specialty will require some information which is specific to the particular vendor hence we have vendor specific information also  and we have general information also there are standard and enterprise specific mibs and  if you later on mix up between the two  that means  something that is specific to vendor 1 and something specific to vendor 2 it will not work out and so these two need to be separated so naming of objects is very important thus there is standard and enterprise specific mibs  refer slide time  27  45  27  55 min  types of mib modules  standard  these are the standard mibs currently designed to capture the core aspects of the particular technology  refer slide time  27  56  28  10 min  experimental  temporary and if achieves standardization then it is placed in the standard module then enterprise-specific  vendor specific mibs that provide additional management capabilities for those features that require it  refer slide time  28  11  28  56min  if you are using the mib you also require the mib tools  you require a mib compiler  you require a mib browser  a mib alias tool  a mib query tool  etc a mib browser allows you to browse through the management information base in a particular device directly and mib alias is required because  as we see the naming is very complex so once you have given a name you do not have to repeat that name in every query so you have an aliasing tool and a mib query tool  refer slide time  28  57  29  10min  smi  structure and identification of management information the smi defines the rules for how managed objects are described and how management protocols may access these objects  refer slide time  29  11  29  24 min  functions  are to name objects  to define the type of data that can be stored in an object  to show how to encode data for transmission over the network  refer slide time  29  25  29  52 min  name  smi requires each managed object that is router  variable in a router  etc which have a unique name so router will have a name  a variable in a router will also have a name  and a specific router coming from location should also have some way of describing that  refer slide time  29  53  32  24min  the naming convention really starts from a high level and it uses the integer.representation there is a name.notation actually iso has defined a very global naming tree it starts from iso itself  and under iso there are so many things and under each of these there are so many things for example  iso.org.dod.internet.management.mib 2 and when i say this much  actually this iso has got the number 1 and under iso there are so many entities  one of them is called organization and this is an entity  a number 3 and there is a department of defense of us  that is an entity with a value 6 iso is a european organization and all these are decided by iso therefore the department of defense did not take a note of it but when the internet started on the department of defense they saw that nobody has used anything of the naming convention and they decided to take one and then management.2  then mib is .2 and up to this much we have not even come anywhere close to the particular device that we are trying to manage all objects managed by snmp are given an object identifier the object identifier always starts with 1.3.6.1.2.1 because we are talking about network management  and in network management naturally it has to do with network  then may be it has to do with mib.2 and then internet and since it is the internet it has to do with dodn and all the way up to iso so that 1.3.6.1.2.1 etc is always the prefix of any name and there are many other integers with many more dods in them  refer slide time  32  25  32  52 min  apart from this an object in smi has a textual name which is there in smi termed as the object descriptor for the object type along with its corresponding object identifier which is defined syntax  the abstract syntax for the object type it can be a choice of simple syntax that is integer  octet string  etc or application syntax  refer slide time  32  54  33  08 min  definition is a textual description of the semantics of the object type what type of object it is ? access  one of the read only  read write  write only  or not accessible kind of access is defined and status  one of mandatory  optional  or obsolete  refer slide time  33  10  33  30 min  this object identifier is also a part of that  it is like a telephone number and it always starts with 1.3.6.1.2 and smi uses it as the base for defining new objects  refer slide time  33  31  34  25 min  in the first group  iso was 1  ccitt was 2  and for the joint iso ? ccitt there was a number 3 since this is under iso that is how the first one comes the second group for the iso node administrator defines 3 for use by other organizations so in 1.3 the 3 is the other organization actually there are a large number of things in that particular level  we are having a global naming tree for naming anything under the sun so there is a thing called other organization and that other organization is 3 and the third group defines 6 for the use of u.s department of defense  so it is 1.3.6  refer slide time  34  26  34  45 min  in the fourth group the dod has not indicated how it will manage so internet is 1 the fifth group was approved by iab to be 1 for the use of osi directory  2 for object identification for management purpose so this is the one that we are interested in  refer slide time  34  46  36  22min  therefore we have 1.3.6.1.2.1.1.1 and since it is a global naming tree we have to come quite deep down to any particular level finally it is possible that not only you have some network devices etc somewhere down in the tree but you also have some sub trees for specific vendors so this naming can go down that sub tree to talk about something specific to a particular vendor or even if we have come down to the tree somewhere and now you have got into a router  now in the router also we want to talk about interfaces and about other things so the tree also goes down from that point so the point is  through this naming procedure we can exactly specify anything that is being talked about in this whole management scenario only trouble is  it is almost impossible for human beings to remember any of these names or any of these things but the network management application makes this query to mibs etc  so you are usually spared the trouble of looking into this but if you look into this you will find such object identifiers in the mib  refer slide time  36  23  36  53 min  the mib-2 group  this was divided into ten groups  one for system  one for interfaces  one for address translation  one for internet protocol and so on and the number of objects in each of these groups is given over here  refer slide time  36  54  37  32 min  we have a system group which has a system descriptor system  object id system up time  system contact the system up time is the time since last re initialization  and system object id is vendor object identification and so on this makes the scheme very general so that even devices from heterogeneous vendors can also be accommodated and you can talk about very standard things and that is why it was done this way  refer slide time  37  33  38  03min  now let us look at the network management platform historically  network management revolved around multiple systems each managing one specific set of components on the data network restrictions of money  physical space  and technical expertise led to the desire to have the components managed by a single system that would show their inter connections on a network map  refer slide time  38  04  39  20 min  this is how a network management platform evolved it is a software package that provides the basic functionality of network management for different network components so  a network management platform has to be a general kind of software for example  on one side you have specific vendors for managing a specific set of devices  you may have some network management application etc which is there hence you have this particular application from this vendor for managing his devices  and then you have some other network management application for some other devices from some other vendor etc but then finally you would like to sit in one place and have the big picture so there has to be a platform which can couple with these different network management applications known as the network management platform  i.e the general software which is running which can integrate all these different components  refer slide time  39  21  39  57 min  the goal of the platform is to provide generic functionality for managing a variety of network devices there are some functionality and some requirements for network management which is very general those are collected in the network management platform and if there are specific things you have to talk about for a particular type of device may be from that particular vendor then that is out of the platform although that software can integrate with this network management platform that is the idea of having a network management platform  refer slide time  39  58  41  11min  basic features for any platform to include are graphical user interface gui and network map the first thing that a network management platform should do or is expected to do is to go on discovering the different network devices which are right now on  which are accessible etc  and those which are not accessible that means which were supposed to be previously there and it would be nice if you can show it graphically on a screen like showing different colors for different types  and different icons for different types of nodes  and different colors showing whether it is working  not working  switched off etc  and if you can see that picture then you get the big picture in one go therefore this network map is important a dbms naturally wants to keep this management data and then query etc so it needs some dbms you need a standard method to query devices and a customizable menu system  event log  etc these are the basic features for any platform  refer slide time  41  12  42  19 min  additional features for a platform using graphing tools which graphically shows with some kind of plots that how each device is performing this should be able to show you the plot very easily so this graphing tool is also an integral part then the application programming interface api is important because after you have finished talking about the generic network management aspects then you also have these special aspects for which the different vendors are going to give you special tools these special tools now have to integrate with this network management platform therefore the api application programming interface has to be very clearly defined finally it is the system security which is always present  refer slide time  42  16  42  33min  here are some examples of network management platforms  sun ? s sunnet manager  ibm netview  hp ? s openview by the way is a very widely used network management platform in this category  refer slide time  42  34  43  02 min  if you remember  one diagram in which we showed two network management stations etc which has to do with the network management architecture and the network management platform can use various architectures to provide functionality the three most common are  centralized  hierarchical and distributed  refer slide time  43  04  44  22 min  in the centralized architecture as the name suggest you have one central network management station or network management platform besides on a single computer system that is a centralized system in that case that particular station becomes absolutely critical because in a large network network management software is used all the time hence if you have them centrally it becomes a single point of failure so what you may do is that  you may duplicate the same thing on another machine if one of them fails  it will not want to have single point of failure in a network if you want to at least make the critical components of it ; and network management is a critical component of a large network so you may like to have a fall back mechanism where in the primary one fails the other one can immediately take over although we have put two network management stations this is a centralized architecture therefore for full redundancy the computer system is backed up by another system  can allow access and forward events to other consoles on network so this is a centralized architecture  refer slide time  44  23  44  38 min  this is used for all network alerts and events  all network information  access all management applications etc hence one central architecture is used  refer slide time  44  38  45  20min  and the pros are the following  a single location to view events and alerts  a single place to access network management applications and information  security is easier to maintain this is an advantage  so in one place you get all that you want to view and it is easier to make it secure  and a single place to access the nmi because using the nmi  set etc you can also do things to the network  and you do not want any unauthorized person to have access to the network management station  refer slide time  45  21  47  08 min  in the cons of the centralized architecture it has disadvantages single system is not redundant or fault tolerant  but you can make it somewhat fault tolerant by keeping another machine but if the connection to this room is somehow cut then the entire network becomes a black box as network elements are added  may be it is difficult or expensive to scale the system to handle the load  having to query all devices from a single location as a matter of fact think of an enterprise of today an enterprise of today that may be across various locations  it may be over a wan  and many of these locations may be quite big hence a network that an enterprise may want to control centrally may become too big so there is a question of whether a central server can scale it to that extent actually there are problems  for example  if wan bandwidth server or some part of it is out of wan and wan bandwidth is also a problem because if all the network management traffic is also coming over a wan then that becomes quite an expensive scenario but at the same time you have this advantage of this centralized architecture that in one place you can view all the things these are the pros and cons  and so having to query all devices from a single location will not be good  refer slide time  47  09  49  14 min  therefore we go to the next step which is the hierarchical architecture it uses multiple computer systems where one system acting as a central server and other systems working as clients central server requires backups for redundancy  this is the situation once again think of the same enterprise which is distributed geographically which may be five different locations and in each of these locations you have a big local area network to manage so what you might do is  for each of these locations you may put its own management station who will manage the local network you can even put a central server and all these management stations in different locations would be the client to the central server so only the important information or only the condensed and summarized information is coming to the central location via the wan therefore by this you conserve wan bandwidth and at the same time you have a central location where you can get the entire picture and if you want you can talk to one of the clients and drill down and look at the specifics if there are problems somewhere  so this has all kinds of other advantages for example  you can keep very good and expensive network experts in the central location as he can detect a problem over there and then over the network itself he can actually look into the issue and offer a genuine advice as to what needs to be done at that juncture this is an advantage and this is a hierarchical architecture the central server can also be backed up for redundancy  refer slide time  49  15  49  36 min  key features  not dependent on a single system so  even if a single system or a single link is cut still some of the network is being managed distribution of network management tasks is distributed now network monitoring distributed throughout the network  and centralized information storage is also there these are the advantages of hierarchical architecture  refer slide time  49  38  50  02 min  pros  multiple systems to manage the network cons  the disadvantages  information gathering is more difficult and time consuming because it is coming through two layers and the list of managed devices managed by each client needs to be predetermined and manually configured  refer slide time  50  03  50  56 min  then we have a distributed architecture it combines the centralized and hierarchical architecture it uses multiple peer network management systems each peer can have a complete database each peer can perform various tasks and report back to a central system previously there was only one station that was central and the others were in a sort of master-slave kind of situation but now there are all peers so each of them can keep an entire database if it wants to therefore each of them can work as a central management network station and they are distributed  refer slide time  50  57  51  18 min  it contains advantages from central and hierarchical architectures  single location for all network information alerts and events  single location to access all management applications  not dependent on a single system  distribution of network management tasks  distribution of network monitoring throughout the network  refer slide time  51  19  52  03 min  we already discussed about the network management platform now let us talk about specific network management applications the goals of specific network management applications are to effectively manage a specific set of devices  avoid functionality overlap with the platform which means the network management platform  integrate with a platform through the api and menu system  and reside on multiple platforms these are the goals so  applications do not share information because these two applications may have come from two different vendors  refer slide time  52  04  52  09 min  some examples are ; cisco works or 3com ? s transcend etc  refer slide time  52  10  52  30 min  choosing a network management system  it is built from two major components  the platform and applications a practical approach follows these steps  perform device inventory  prioritize the functional areas of network management  survey network management applications choose the network management platform  refer slide time  52  31  54  45 min  we will just mention about another term which comes quite often rmon  remote monitoring mib these have agents and probes so this is actually used for monitoring mib remotely and there are specific groups for this rmon  that is statistics group  history group  alarm group  host group  host top n  etc these are standardized to operate on ethernet segments so that apart from network management stations you can monitor it from other places also i think i am going to stop here  as you can see what i have tried is  to give you a broad overview of this network management system and as it is growing it network management is something which in today ? s world you can not do meaningful network management without machine support  i.e you can not do it manually and those days are actually gone and in large network the number of events that are happening is really tremendous and it is not also possible to keep a log  the machine of course keeps a log and after a month or so the log has become so big  may be you have to delete it from your machine and then the log starts accumulating at a very high rate because the network traffic is flowing back and forth at a tremendous pace and you have to somehow keep track of those and at the same time keep a balance that is a major part in designing a network management system  keep a balance among trap and polling  keep a balance about what information you will take and what information you will not take  keep a balance about how much you are going to manage good day  the topic for today is network security as the network is becoming ubiquitous  in the sense that it is becoming widely available to people  many people have started giving services through network these services are crucially dependent on security for example  you want to do a bank transaction through the network so that anywhere you can log onto the network and do your banking now this banking service is of course very sensitive so that if security is breached then the whole thing falls down therefore security once again is a very big topic  so let us discuss about the overview of security features in network so what is network security ? what is the purpose of a network ? it moves bit from a to b and we want this movement to take place securely and what exactly we mean by securely ? of course  the bits from a must reach b but we also want confidentiality in the sense that only a and b see the bits that means  if there is somebody in between then he can not find out the content of the communication from a to b because a may be a client and b may be a bank therefore this has to be secured integrity  the message must reach from a to b intact you have the original document ; you use the one way function or a hash function and the hashed result is now encrypted with the secret key the private key of the assigner which gives the digital signature now the receiver should get the original document plus the digital signature now if you want to ensure that the original document also should not be seen by anybody then this entire thing i.e the original document plus the digital signature you can encrypt using the public key of the receiver therefore what the receiver will do is that the receiver will decrypt it using his own private key so that he gets back this now using the public key anybody could have sent this document now how do i know that this actually came from whomever it purports to be ? this is where the digital signature plays its role now the receiver can verify by applying one way hash function to the received document therefore he will apply the same hash function to this document so he is supposed to get back whatever was here now he will decrypt the signature using the sender ? s public key he has the sender ? s public key with him and since it was encrypted with the sender ? s private key now he can use the private key of the sender to get back the same message now  comparing the two results equality means document is unmodified computer networks prof s.ghosh dept of computer science & engineering i i t  kharagpur lecture # 38  security  refer start time  00.28  good day  so the topic for today is network security as the network is becoming ubiquitous  many people have started giving services through network these services are crucially dependent on security for example  if you want to do a bank transaction through the network so that from anywhere you can log on to the network and do your banking this banking service of course is very sensitive so that if security is breached then the whole thing falls down therefore security once again is a very big topic  so let us discuss about the overview of security features in network  refer slide time  01.31  01.32  so what is network security ? what is the purpose of a network ? it moves bit from a to b and we want this movement to take place securely  refer slide time  01.33  01.50   refer slide time  01.51  03.32  and what exactly we mean by securely ? of course  the bits from a must reach b but we also want confidentiality in the sense that only a and b see the bits that means  if there is somebody in between then he can not find out the content of the communication from a to b because a may be a client and b may be a bank therefore this has to be secured integrity  the message must reach from a to b intact which means without any modification on the way this is again very important for many kinds of services of course sitting at b you are getting some message down the network but may be you want to make sure that this is really from a and whether the messages are coming in order these are integrity issues and then finally the availability that b gets it in time when b wants something from a it is able to get it even if all other lower layers are working perfectly b may not get the service from a or vice versa if network security is breached so these are the three main issues  confidentiality  integrity and availability let us look into these and how they are handled  refer slide time  03.33  04.56  network security  there is a lot of work on security and it is a very active research area at present people have come up with lots of solutions but as solutions come up new problems also get generated as we will see the confidentiality can be handled through encryption instead of sending the message as it is  you encrypt it in some fashion so that even if somebody intercepts this message and gets a copy of that he will not be able to decrypt it we will see various encryption techniques encryption basically is the fundamental way in which we handle confidentiality integrity may be handled through what is known as the digital signatures and retransmission and getting the messages in order is a part of the tcp protocol then comes availability which is something to do with the quality of service  refer slide time  04.57  05.57  security environment  this is closely linked not only with the network nodes but also with the operating systems of the systems mostly in the application layer although security has become more important that nowadays there are some network nodes also like routers which can encrypt messages almost at a good speed but a lot of these security issues are handled near the application layer where the operating systems have a role to play goals  someone attempts to subvert the goals  it may be for fun  it may be for commercial gain  it may be with some malicious intent so  refer slide time  05.58  06.27  it is the exposure of data if you just make a matrix of goals vs threats then for goals it is the data confidentiality and for threats it is the exposure of data for data integrity in goals it is the tampering with data as the threat for system availability there may be a denial of service kind of an attack by some malicious people or either for fun that serves as a threat to the systems availability  refer slide time  06.27  08.24  now what kinds of intruders are there ? there may be casual prying by non technical users out of curiosity there may be snooping by insiders often motivated by curiosity or money as a matter of fact it has been estimated that for most of the serious security breaches some insider is involved in majority of the cases and when that happens it becomes more difficult to handle it determined attempt to make money may not even be an insider ; it could be an insider or someone who wants to just make money then there is the commercial and military espionage this of course is a very big business military communication of course traditionally has been confidential so they were encrypted so encryption basically derives its history for the military purpose and now-a-days in the age of information the information technology is a very core part of the military machine of any country so  security breach in these cases is of course a very serious issue and since most of the large commercial houses are now networked and as they have networked on one hand of course you deal with your business process in a much more efficient manner but at the same time you expose yourself to this kind of new threats which needs to be handled  refer slide time  08.25  10.07  as i mentioned  for confidentiality cryptography is a time honored technique now it has become more and more sophisticated now-a-days with the help of computers if you are using the older techniques it is possible to crack those encrypted messages so now people have come up with better encryption algorithms and better encryption techniques the goal is to keep information away from those who are not supposed to see it you can do it by scrambling the data and use a well known algorithm to scramble data the algorithm usually has two inputs ; the data and key key is known only to authorized users now  relying upon the secrecy of the algorithm is a very bad idea if you just have an algorithm and if you think that it is a secret algorithm then it becomes very vulnerable because all your communication is going to use that same algorithm so it becomes very difficult to ensure that the algorithm will indeed remain secret so the modern cryptography depends on the secrecy of the key as its mainstay cracking codes is very difficult  with the modern encryption techniques as we will see  refer slide time  10.08  12.53  first let us see some basics of cryptography actually we have two algorithms in general you have two algorithms e and d we will assume that e and d are known this means they are not only known to the sender and the receiver but whoever wants to hack into it or whoever wants to intercept it may also know e and d let us assume that e and d are known to everybody there are two keys ke and kd  these are kept secret so keeping these keys a secret is a very important part of any crypto system and so how to distribute the keys by themselves is the topic for our discussion  let us assume that these keys ke and kd  ke is for encrypting the message and kd is used for decrypting the message in general ke and kd may be different in some cases they are same but in some cases they are different for this to be effective the cipher text should be the only information that is available to the world and the plain text is known only to the people with keys in an ideal world  this is what happens for example  we have got some plain text here which we want to send in a very secret fashion over the network what we do is  first with the encryption key ke and the encryption algorithm e we encrypt this so  as we encrypt the plain text we get what is known as the cipher text c  so c = e  p  ke  that is the encryption algorithm and then the cipher text is sent the idea is that  even if somebody intercepts the cipher text since he would not be having ke it will not be possible for him to produce p or it will be very difficult for him to produce p and on the other side there is a decryption key kd and using the algorithm d and kd we decrypt the cipher text to get the plain text back  refer slide time  12.54  13.05  therefore this is the encryption part and this is the decryption part it should be very hard or impossible to find out the message without knowing the key and it should be very easy and fast to find out the message knowing the key it is also difficult to find out the message even if you know the key or if it takes long time then it becomes very inefficient so  in order to handle efficiency this should be fast if the key is known  refer slide time  13.23  13.58  before looking at modern encryption techniques let us look at some classical encryption techniques there are actually two approaches ; one is the substitution techniques the letters of the message are replaced by other letters or by numbers or symbols and transposition techniques that performs some sort of permutation on the message letters these two of course are very basic techniques and they are still used today but in a much more sophisticated fashion you may have come across  refer slide time  13.59  15.09  this kind of encryption in some detective stories  at least in some of the classical detective stories where a message may have been encrypted in this fashion one of the earliest known uses of the substitution cipher was by julius caesar ; this is known as caesar cipher suppose the message is ? meet me after the party ? and your c = m + 3 mod 26 in this particular case then m becomes m n o p  e becomes h so ? meet me after the party ? becomes phhw ph diwhu etc which looks absolutely gibberish to anybody but of course with the help of modern computers trying out various possibilities it is very easy to crack this code this is of course no longer used so it is just a kind of history  refer slide time  15.10  17.44  the other is  use any permutation of the 26 alphabetic characters caesar ? s cipher all of them are being displaced by the same amount by three letters in mono alphabetic cipher this may not be so but you have basically a b c d e f g h etc and it may be any permutation of the same set of letters now  for encryption as well as decryption you must have this mapping from a to q b to e c to r and etc now under attack u becomes c  n becomes w  d becomes y so c w y u l q etc becomes something like this you may have noted that we have not considered the blank over here and all of them and that is why it has come as just one string if you get the reverse mapping then using a dictionary breaking up with these blanks is not difficult this is mono alphabetic cipher once again it is not difficult to break this  for example  if you have done something like this and if you have got a fairly long text there is a statistical table which is available on the internet also about the frequency of occurrences of different letters  for example  e  a  etc  there are some letters like this which occur many times more than letters like j  q  etc so this is available so using this kind of a table you may even have a mono alphabetic cipher like this using this distribution it is quite possible especially with the help of computers  in those detective stories it was done by detectives but now-a-days a computer will do it it is possible to guess some of the letters and as you guess more and more it becomes faster and finally you crack the message this is also not such a great way of encrypting things once again we will look at this  refer slide time  17.45  18.33  for historical purpose the other approach to encryption is transposition it is performing a sort of permutation on the message letters for example  if the message says ? meet me after the yoga party ?  then let us say the algorithm is simply this m e then et m e e t  the point is that alternately you write them in one line or in the other line and then you read the top line first m e m a t r etc and then followed by the bottom line e t e f etc once again this is quite easy to decipher  refer slide time  18.34  19.23  apart from this there are certain practical problems which you have to consider one is  generating a fully random key is practically very hard  sometimes impossible and more over to ensure the security of the system the key size should not be less than the message size and sending a not repeated key in the same size of the message through a secured channel to the receiver is impossible  things like how to distribute this key amongst the potential senders and receivers needs to be understood the previous one ? s possibly if we have a very long key with a length which is comparable to the length of the message then you can have more and more secured communication but having such long key which is almost equal to the size of the message then distributing is a problem  refer slide time  19.43  20.34  today let us see what we mean by computational security an encryption scheme is secure if it takes very long time to break the cipher text if you are using brute force may be you can break all text but then breaking the cipher text takes a very long time then it becomes infeasible lifetime is defined in each application for example  military orders may be one hour to three years  check transaction may be it is for only one year  business agreement 10 to 15 years so  if decrypting a cipher text takes longer than this kind of time then may be you are doing fine  refer slide time  20.35  21.00  so the bottom line is that if somebody does not know anything about the key it must take more than several years to decrypt a message with enough number of substitution and transposition modules we can make a strong encryption scheme and this is an algorithm  refer slide time  21.01  22.11  called des or data encryption standard the basic des module uses a 56 bit keys the same key is used to encrypt and decrypt keys used to be difficult to guess  needed to try 255 on average  so modern computers can try millions of keys per second with special hardware actually you can make a very special machine which can break des but it is not easy as you can see that you have to make a very special hardware for trying out millions or even billions keys per second and then it is possible to break this and put a number of machines working in parallel etc it is possible to break it in some time frame but even then des is a very good encryption technique and the modern and much more difficult encryption techniques are based on des  refer slide time  22.12  22.56  let us just take a quick look on des the current algorithm is advanced encryption standard aes which uses 128 bit keys adding one bit to the key makes it twice as hard to guess so must try 2127 keys on an average to find the right one at 1015 keys per second this would require 1021 seconds or may be thousand billion years this of course is very good and modern encryption technique it is not usually broken by brute force so what people try to do is they try to get more information we will not get into attack crypt analysis but discuss just a part of it because we do not have time  refer slide time  22.57  23.44  this is a basic des scheme suppose  the input is 2w bits  you divide it into two parts  these w bits you do an xor with the output of this function and this function takes other w bits and a key for this round and these two feed into a non linear function which produces an output and this output is xor with the first w bits now this xor is transposed to the second half and this part comes to the first half so this is one round of des  refer slide time  23.45  24.29  actually des goes in various rounds so for each round there are keys actually this is generated from 156 bit am not going into the details and each time you go through this kind of operation with that particular round key from k1 to k16 in 16rounds then in 16 rounds you get the final encrypted text the decryption also uses the same set of keys only in the reverse order and if you do that you will finally get the plain text so the original key size is 56 bits from which all these keys are generated  refer slide time  24.30  25.13  now-a-days as i mentioned  since des can be broken sometimes these days people use triple des triple des is a modern encryption standard which is very difficult to break so you require three keys or sometimes only two keys are used ; ka  kb and ka once again so you take the message  make it go through the first des block ka then this encrypted message you encrypt again using kb and this encrypted message you encrypt again using ka and this gives you the cipher text so like aes this is also very difficult to break  refer slide time  25.14  27.42  another very important kind of cryptographic technique is the public key cryptography  this is asymmetric key till now we have been talking about the symmetric key cryptography in symmetric key for the encryption and decryption you use the same key so if you use the same key  if you are doing the same something like a mono alphabetic substitution that table is available to both the parties  it is the same table so that is the same key basically similarly in des or triple des you use the same key or sets of keys in both the cases for both encryption purposes as well as for decryption purpose now  in the public key cryptography  this is another class of algorithms where the key that is used for encryption is not the key which is used for decryption and knowing the key for decryption it is impossible to guess the key which was used for encryption so this is the so called asymmetric key or public key cryptography it uses two keys ; one is known as the public key mainly for encryption and private key which is for decryption now these keys come in pairs suppose a wants to send some message to b  now what will be available to a will be the public key of b so what it is going to do is that it will encrypt it or and of course it will have his own private key so you can do it either way you can encrypt using your own private key and then send it but then that can be decrypted with your public key if somebody else sends it using your public key then i can decipher it using my private key and since my private key is not known to anybody then nobody else can decipher it  and this is the basic idea another kind of function which is used is a trap door or the one way function  refer slide time  27.43  29.17  let us look at public key cryptography quickly public-key cryptography  instead of using a single shared secret  keys come in pairs one key of each pair distributed widely which is called the public key and one key of each pair kept secret  i.e private or secret two keys are inverses of one another but not identical encryption and decryption are the same algorithm if you encrypt a message m using the secret key then using the public key if you run the same algorithm then you will get the deciphered message m similarly if you encrypt using the public key and then decipher it that means run the same algorithm again with the secret key then once again you get m so  currently the most popular method involves primes and exponentiation this basically is based on the fact that this is difficult to crack the encryption unless large numbers can be factored easily and there is no known method for factoring very large numbers large number means numbers or integers with large number of places the difficultly with public key cryptography is that it is very slow for large messages  refer slide time  29.18  30.00  trap door one-way functions  it is computationally impossible to find out what are k and m when knowing the ek  m   so knowing m you can of course use the trap door function with this ke to give eke  m   therefore you can go in only one direction but from this side it is impossible to come on the other side this is also sometimes used for authentication in digital signature as we will see  refer slide time  30.01  30.41  so one way functions are functions which given a formula for f  x  it is easy to evaluate y = f  x   given y computationally infeasible to find any x such that y = f  x   often operate similar to encryption algorithms ; it produces fixed length output rather than variable length output it is similar to xor in blocks of cipher text together common algorithms include md5  so 128 bit result or sha 1 which gives you a 160 bit result from a text  refer slide time  30.42  32.11  now let us see one important application of all these ; public key and one-way functions etc which is in digital signatures a hand written signature is a function of the signer only and not the message that means suppose i sign some document i can sign any number of documents  my signature will remain the same and it is very characteristic of my way of signing  my handwriting etc so it is difficult for ordinary people to replicate that although there are good forgers who can replicate many signatures now  the digital equivalent of handwritten signatures would be useless in ecommerce so we must be able to compare it with the real signature and must be sure it is not copied or forged now how can a prove his identity over the internet that is the basic idea ? when i sign a document i am basically saying that it is me alone who has sort of written this so that is why i signed the document or agreed to do this now how can i do this over a network ?  refer slide time  32.12  33.09  this is the basic scheme of a digital signature digital signature is a function of both the signer and the message a digital signature is a digest of the message encrypted with the signer ? s private key so  we have a message m and it may be a very long message so use some secure hash algorithm to produce hash that is the message digest that means you make it run through some hashing function which produces an output of its length which is a product of this particular message now you encrypt this hash using the signer ? s private key and this produces the digital signature now this is the digital signature of mr a on message m  refer slide time  33.10  35.16  you have the original document  you use a one-way function or a hash function and the has result is encrypted with a secret key or the private key of the signer and this gives the digital signature  now the receiver should get the original document plus the digital signature of course  if you want to ensure that the original document also should not be seen by anybody then this entire thing that is the original document plus the digital signature you can now encrypt using the public key of the receiver what the receiver will do is that the receiver will decrypt it using his own private key so that he gets back this since public key may be public so anybody could have sent this document  how do i know that this actually came from whomever it purports to be and this is where the digital signature part come in so the receiver can verify by applying one way hash function to the received document so he will apply the same hash function to this document therefore he is supposed to get back whatever was here now he will decrypt the signature using the sender ? s public key he has the sender ? s public key with him and since it was encrypted with the sender ? s private key now i can use the private key of the sender to get back the same message so comparing the two results equality means document is unmodified because this digital signature could not have been produced by somebody else because this is a product of this document as well as the secret key of the sender and it is visually known only to him  refer slide time  35.17  35.25  therefore if the two hashes are equal then the message is authentic  refer slide time  35.26  36.42  this does not solve the entire problem because sometimes you require some identity documents what is an identity document ? identity documents are passport  birth certificate  driver ? s license  etc this is basically a piece of paper issued by a trusted third party with information verifying the identity of the holder now  this has to do with the following  for example  even if you have a digital signature  the digital signature will only tell you that it will verify that this message has been sent by somebody who has this particular secret key that means secret key corresponding to the public key that the receiver is holding now how do you absolutely guarantee that the secret key is held by the right person ? that is where the identification comes in so  a challenge is a protocol for holder to prove he is the person named in the document in the non electronic world we do it with photograph  signature  fingerprint  etc  refer slide time  36.43  37.15  a digital certificate is a digital identity document binding a public private key pair to a specific person or organization verifying a digital signature only proves that the signer had the private key corresponding to the public key used to decrypt the signature it does not prove that the public private key pair belonged to the claimed individual we need an independent third party to verify the person ? s identity through non-electronic means and issue a digital certificate  refer slide time  37.16  38.54  and a digital certificate contains all these things ; the serial number  name of the holder etc this has the public key of the holder  name of the trusted third party  then the digital signature of a certificate authority data on which hash and public key algorithms have been used and other business or personal information the point is that  the digital signature of the certificate authority since the certificate authority is the third party who is trusted this means  if his digital signature is there  because since the public key of certificate authority is known then his digital signature can be verified and in this particular case this authority is trusted that means we know that something bearing the digital signature is indeed coming from that physical trusted authority and now this trusted authority is basically certifying that the name of the holder is the holder of this particular public key of course the holder has his own private key this private key would not be known to anybody else but then he is the holder of this public key  refer slide time  38.55  39.29  we have a version of certificate standard so these digital certificates can be checked by a machine that is the whole idea you have a hash algorithm and then the message digest  issuer ? s private key and then put the signature of the issuer the subject ? s public key is what is being certified so  it is this algorithm plus the public key value then there is period of validity for this  refer slide time  39.30  40.26  this public key cryptography is quite an elegant system the only trouble is that  this is rather a computationally expensive process  it is quite slow pretty good privacy  it uses both public and private key to chart a middle course it uses public key encryption to facilitate key distribution it allows messages to be sent encrypted to a person that is encrypting with persons public key it allows person to send message that must have come from her that is  encrypt with persons private key  refer slide time  40.27  41.31  the problem is  public key encryption is very slow the solution is to use public key encryption to exchange a shared key a shared key is relatively short which is about 128 bits or so therefore message is encrypted using the symmetric key encryption now what you do is that in the first phase you use the public key cryptography system to exchange just the shared key this key may be shared just for this very session and then it may go this is shared for particular session since this is 128 bit you can do it once even though it is expensive or this is a bit inefficient and then  once both the parties are sharing the same key  this is the symmetric key  so this works much faster and the message is encrypted using symmetric key encryption pgp can also be used to authenticate sender  use digital signature and send message as plaintext there are various ways in which pgp can be used  refer slide time  41.32  43.32  with this we come to the end of our discussion about some security issues which are very general and with which most of the service organizations are very much concerned security is the foundation on which all these so called e activities dependant upon now we will focus more on the network technology part of it that what we mean by the security of a network this is security of messages in the network and now i am talking about security of the network itself some terms are quite commonly used here and one such device commonly used is the firewall it solves poor internal security measures using the network now all these have to do with securing the functioning of the network the other is an intrusion detection system sometimes an intrusion detection or intrusion prevention system is integrated with a firewall and sometimes they are two different boxes so intrusion detection is that  i want to detect whether any unwanted or unauthorized person has some how intruded into my secured zone and once he intrudes into my zone he will have access to data and messages from my network which i do not want it detects non network security breaches accomplished via the network therefore firewalls and intrusion detection  stock prevention are all very important and most of the network vendors have got separate boxes for doing this  refer slide time  43.33  43.58  therefore here let us see how they are being used by the way there is also a question of authentication of users and what is used sometimes you may use distributed authentication  a centralized authentication  ldap or aaa server for that authentication and you can do a distributed co-operation also  refer slide time  43.59  48.23  this is a typical corporate network a typical corporate network is meant to be very secure we start from the left hand corner suppose these are the user machines and then we have an internal domain name server or internal mail server  internal web server  internal file server  etc this is the private network of the corporation  i.e the intranet of the corporation this term intranet really means that we use the same technology which we use in internet and which you use in your internal network also so you are using things like web browser  dns  mail server  etc which work in the internet  the technology being deployed only for private purpose so  this left hand part is only for the private purpose and only these authentic users should be able to use this intranet this is connected to the internet as you can see here on the right hand corner although this is connected to the internet other people will generally not have access to this part so what we do is  we try to make this internal network secure using a firewall and this is an internal firewall and then we have another machines also belonging to the same corporation like this web server which is used for helping people by providing servicing in the internet  we have mail forwarding and dns etc these are put in a zone which is known as demilitarized zone then this connects to the external firewall and then the external firewall finally connects to the internet actually what happens is that  what a firewall will do is that  a firewall basically inspects the packets and decides on whether these packets are ok and secured or not it follows a set of rules depending on how you configure it is possible to have different levels of security at various ports of the firewall a firewall may have 2 3 4 5 ports suppose it has got 4 ports  it is possible to port-wise configure the security level of each of the port now what you want to do is that  you want to make your internal network absolutely secure so somebody who wants to access through this firewall into something which is staying in the highly secured zone  that is absolutely the internal code network then he has to go through lot of checks  so that is a high security zone but again what may happen is that you also have some machine like web server which you want to be open to the public similarly your dns or your mail machine etc have to have a public dealing  a public face so we want to keep some kind of medium level security for these kinds of machines so they are put in a network area which is known as the demilitarized zone dmz and then a firewall may connect directly to the internet also so that leg of the firewall would be of very low security termed as the low security zone this may be one way of using two firewalls sometimes people will use only one firewall but this is a deployment using two firewalls such as one internal firewall and one external firewall  refer slide time  48.24  48.59  network regions are these internet that is not secure at all  intranet which is highly secure and dmz which is the middle level security and the network boundaries for all these different regions are at the firewall so there may be filtering firewall based on packet headers  there may be audit mechanisms a proxy may also be used as some kind of a security device  refer slide time  49.00  51.42  for example  you can use ip addresses for some low level of security the network address translation came up as the ipv4 addresses have virtually disappeared and only some class c addresses are available so  in order to obviate that what we did was that in a internal network we used some private ip addresses and when we use a private ip address in my network  and in order to communicate we have to go through a proxy and the proxy will remember that a machine with this private address is wanting to communicate with the outside world  so it puts a valid ip address from a pool in place of the private address which is not really valid outside and then sends out the request gets the message and then sends it to this private ip it is conventional to number the private ip addresses starting with 10 which is 10.x.x.x so that is one full class a address which is a huge address space for one organization and the point is  the routers outside  are usually not going to route any address which starts with 10 because it knows that 10 is used for private ip so if you use private ip addresses it is difficult for outsiders from the internet to log on to your machine unless he/she is going through some proxy and getting into your network in the first place therefore network address translation protocol maps internal to assigned address mail forwarding  hide internal addresses  map incoming mail to real server  and additional incoming and outgoing checks may be performed therefore all these are different things you can do to enhance the security of your network it is not possible to make your network hundred percent safe but you can increase the level of safety through various measures  this is one kind of such measure apart from any firewall that you might have put  refer slide time  51.43  53.24  for firewall configuration  in the external firewall  what you can configure is  find out what traffic is allowed external source  you may put ip restriction so external source may only be from this or from these ip addresses  we will specify that what type of traffic  ports for example smtp for mail or http for web etc  what kind of traffic i will allow and what kind of traffic i will not allow may be i will not allow telnet in the secured zone at all from the outside proxy between dmz servers and internet and proxy between inner and outer firewall are the things which you can configure in an external firewall the network has become such a burning issue these days  so more and more development is taking place in this region and especially in firewall design etc so in modern firewall it not only works very fast but it can look at lots of things it can counter peer to peer messages and all kind of things it can handle for internal firewall you can put traffic restrictions on ports from or to ip address and you can proxy between intranet and outside these are the things which do with the firewall  refer slide time  53.25  54.00  for dmz administration whether a direct console access is required ? if a direct console access is required then naturally this is another place  this is somewhat troublesome or you can use special access using ssh secured shell connections allowed from internal to dmz administration connections or only from some specific internal ips or only through internal firewall etc you can administer the dmz this reduces the security risk to only one or a few machines  refer slide time  54.01  54.23  you can authenticate in various ways one question always comes up is that whether your authentication will scale ? you can repeat the authentication  have multiple administration  but if you have distributed authentication scheme then that is always good  refer slide time  54.25  54.26   refer slide time  54.27  54.40  let us look at some attacks and defenses one kind of attack which is common is denial of service attack  routing attack  spoofing attack and may be there are other kinds of attacks people are thinking about  refer slide time  54.41  55.10  as people are thinking in a more secured way  the hackers and all other peoples are also thinking of many ways of compromising security confidentiality on the network is manageable such as encryption to protect transmission  public key cryptography  key management  etc integrity is reducible to single system  digital signatures verify source and commit protocols handle network failure what about availability ? this is where the attacks on the network come into picture  refer slide time  55.11  55.40  one is flooding  this is a denial of service kind of attack that means overwhelm tcp stack on target machine which prevents legitimate connections routing attack is misdirecting traffic spoofing  when somebody is entering your network claiming to be a false identity then spoofing imitates a legitimate source  refer slide time  55.41  56.02  what is a flood attack ? limit the availability by overwhelming service by following service ? s protocol to an extent example is a syn flood ; it overwhelms the tcp stack or may be a large number of emails being generated by a script  refer slide time  56.03  56.39  let us look at syn flood in tcp protocol when a client initiates a syn then it waits and then the server will acknowledge it and send a sequence number the server will also send the syn and then it will wait for an acknowledgement from the client this is a multi-step process sequence numbers are incremented for a future message it ensures message order and retransmits if lost  refer slide time  56.40  57.35  what some malicious person might do is that receive the syn  the server receives the syn  allocates connection  acknowledges and waits for response from the other side  waits for this response so what this is doing is that it is sending one syn after the other in rapid succession so  on the server side you will be opening so many connections and you will send acknowledgements and wait therefore what will happen is that the entire space for connections becomes allocated and this is of course is done by a malicious user but a legitimate user can no longer get any access to this server because the server has become absolutely overwhelmed hence this is a denial of service  refer slide time  57.36  58.04  so you can limit connections from one source  ignore connections from illegitimate sources  drop oldest connection attempts etc what the firewall will do is  the intrusion detection system will also try to detect that and block all the flood of syns etc which is coming from one source but that does not solve the distributed denial of service attack which is coming from many sources  refer slide time  58.05  58.29  network solutions  tcp intercept  router establishes connection to client  when connected establishes with server so router comes in between server and the client synkill  monitor machine as a firewall  good addresses  allows history of successful connections otherwise kills it these are the intrusion prevention kind of situation you can try to encrypt your syn  refer slide time  58.40  58.47  or make changes in protocol also but that is usually more difficult and cumbersome to implement unless absolutely it is your own and private network  refer slide time  58.48  59.12  service-level flooding  overload the server  looks into its processing  storage  etc typically garbage requests using legitimate protocol  large emails to victim  many http connections  heavy use of scripts these overwhelm the server in some other way so that it can not give legitimate service  refer slide time  59.13  59.15   refer slide time  59.16  59.18  ip spoofing  what somebody can do is that  instead of overwhelming server he can overwhelm the client and then take on the role of the client so  there are various ways in which these network attacks are coming and there are ways to handle this this is a developing and important field we have just given a overview today  thank you computer networks prof.s.ghosh dept of computer science and engineering i.i.t kharagpur lecture # 39 ftp-smtp good day  so today we are going to take up two important application layer protocols namely ftp and smtp so  first  refer slide time  01  00  01  01  let us look at ftp  refer slide time  01  07  01  33  this is called file transfer protocol and it is a very widely used protocol for reliable transfer of files it uses tcp as transport for reliability  it uses out of band control and this is stateful so we will go into these one by one first thing is that  we want this file transfer to be very reliable  in the sense that even missing one bit in between may actually corrupt the entire file so we want a good degree of reliability and as we have seen in our discussion on tcp that one way to achieve this reliability is to use tcp you use ftp for downloading files  now  as soon as you start an ftp to download a file it should start immediately unlike mail which may be delivered after sometime i.e 10 or 15 minutes or so that is one requirement of ftp the other requirement is that the speed is not constant the speed should remain constant but that is not a crucial requirement for ftp a file may be transferred fast in the beginning  then if the network gets congested it may slowdown but then that is alright  in all these respects tcp is a very ideal transport protocol for running ftp let us look into the  refer slide time  02  56  04  35  general scheme first of all  suppose this is an ftp client trying to contact an ftp server there is a tcp control connection at port 21 on the above we have mentioned the control connection and below we have mentioned a data connection these two connections are different  that is why it says that its control is out of band actually  out of band control means  whenever two nodes are communicating this is a general term that if there is some control information going between the two  for example  in a telephone the connection setup there is control information  ringing etc there is a control information and when this control information and the actual data occupy two distinct channels then it is called out of band communication that means the control is out of band for control connection tcp uses different port and for data connection it uses a different port one is a port number 21  the other is a port number 20 and these are basically well known ports the request comes from the client through this port number 21 so the server opens a port number 20 with the client and starts communicating  refer slide time  04  35  06  37  now  ftp client contacts ftp server at port 21 specifying tcp as transport protocol client obtains authorization over control connection now this is important  when you want to download a file it is important to check whether whoever wants to download has a proper authorization or not because not all files and all information should be available to everybody in the world there are questions of privacy and security etc so that is why some authorization is necessary of course in this case what ftp does is  the authorization is rather at a rudimentary level in the sense that it is through users and passwords only but anyway that much of authorization is there and this authorization process goes through the control channel therefore client obtains authorization over control connection a client browses remote directory by sending commands over control connection which means that  if the authorization phase goes through without any trouble then the current directory at the server end can be seen by the client from the other end by giving some commands now  in raw ftp  the commands are a little bit cryptic whereas there are ftp clients with good graphical user interface where you can actually graphically see the directory etc  this is the remote directory we are talking about it therefore he can look into the remote directory and select whatever file he wants to download  refer slide time  06  38  07  27  when server receives a command for a file transfer the server opens a tcp data connection to client and this is again done on a well known port 20 on the client so a new data connection is setup after transferring one file server closes the connection now  what might happen is  a person may want to transfer a number of files from the server  so if again there is a request for another connection the server will open another connection again on the same port and the second tcp data connection is setup to transfer another file  so this is how it goes  refer slide time  07  27  08  41  so control connection is out of band and ftp server maintains state and what is the meaning of state here ? it is the current directory and earlier authentication that means that once a client connects to a server and gives his authorization then for that entire session till such time he does not log out that authorization is kept valid that means he can go on accessing whatever is available on the other side  then the current directory means the directory which he is browsing at the moment  the directory from which he is downloading the present file etc the current directory for this particular client is also maintained at the ftp server therefore it is called a stateful protocol in the sense that it maintains the state even if one file transfer is over and it closes but the authorization in the current directory remains  hence this is a stateful protocol  refer slide time  08  42  09  57  ftp sample commands  these commands are sent as ascii text over a control channel this is a simple ascii text going over the control channel it expects the user ? s username and the password these are commands you can give and these commands go to from the client to the server through the control channel so  you can do a return list of file in current directory this is the basic ftp command you may also have the user interface which shows it very attractively in a graphical fashion retr is a file name  it retrieves or gets a file  you can use it to get and retrieve a filename stor filename stores or puts file onto the remote host you can both get a file from the remote host as well as you can upload a file on the host and for doing that you have to give the particular filename these are some sample commands for ftp which you can use  refer slide time  09  58  11  07  and then once again we are talking about the control channel only the ftp sample responses give a status code and phase as in http these are basically codes 331 user name ok  password required when you have just entered the user name and if that user name is in his list he will sent an ok for the user name but then you still have to give the password and 125 data connection already open transfer starting  so  in the control channel these are the kinds of responses from the server side that may come and 425 can not open the data connection  452 error writing file so  all these errors and other kinds of responses come through the control channel these are some of the ftp sample responses  refer slide time  11  08  13  23  and that is all about ftp as far as it is concerned it is a very simple protocol but at the same time it is an extremely important protocol people always want to download files and these files could be of any kind  there is no restriction on the kind of file if it is a binary file you have to set the mode that way but the file could be a text file  it could be a binary file  it could be images  multimedia or anything if it is a binary file you have to set a mode and the next important application we are going to discuss today is smtp which is at the route of all the emails or the so called electronic mails electronic mail has been a very important application of the network as a matter of fact these two things taken together that one is the web which is the http protocol which we are going to discuss in the next lecture http and email i.e web and email have been the killer applications so as to say for computer networks which made computer network immensely popular  contributed a lot to the growth of a network in general as you grow you get all the economies of scale so naturally money is invested and a lot of money comes in which sparse further growth and further innovation etc http and smtp have been the so called killer apps of computer network let us now look at the details of smtp smtp stands for  refer slide time  13  24  14  17  simple mail transfer protocol it is a simple protocol like ftp it is quite simple but for sending mails etc there are some more intricacies which we will see this is one of the most popular network services  email  is supported by tcp ip protocol smtp system for sending message to other computer users and provides a mail exchange between users actually  many of you must have used emails and you know that you can send a mail to a number of people and there are lots of advantages of this email the chief advantage is being the speed at which your mail reaches the other end actually once email came into vogue the classical mail which goes into the post office have been renamed as snail mail that it goes at a snail space whereas email goes extremely fast it may not be instantaneous depending on how your mail servers etc are configured but it goes very fast and it may be almost instantaneous so  in a few minutes the mail reaches the other side and the other thing is that it is so cheap and you can attach any kind file to it therefore all these make the email very attractive and the volume of email has grown tremendously dwarfing the number of ordinary mails that had been going on before that by orders of magnitude  refer slide time  15  15  15  19  so that is what smtp  refer slide time  15  20  17  08  does it supports sending a single message to one or more recipients sending messages include text  voice  video or graphics actually as the smtp was originally envisaged it can carry only text messages but then people found a way around for encoding other kinds of a data because as soon as text messages become per say people wanted to send pictures  voice  video and all kinds of graphics etc through the email so there was a way of encoding it so we can send messages to users on networks outside the internet which is also possible actually this is becoming less important by the day because what is happening is that internet is swamping all other types of network but when smtp came into existence not only the tcp ip networks but other types of networks were also in vogue and so a way had to be found to exchange mails to users who were on different networks it was in the heterogeneous kind of network and that has actually introduced a lot of complexity into the smtp gateways this is also possible although this is becoming less important now because everybody seems to almost switch over to this internet and tcp ip protocol  refer slide time  17  09  17  59  an electronic mail system has three major components  one is the user agents here are some examples of user agents like eudora  outlook  pine  netscape messenger so all kinds of user agents are there which provides the user with a graphical interface and it makes it sort of simpler even for late people to use this mail system and then there are mail servers which handles the incoming and outgoing messages and they use the simple mail transfer protocol between the mail transfer to reach the mail from one end of the network to another  refer slide time  18  00  19  21  this is just a diagram we have these user agents who are connected to mail servers the mail server maintains an outgoing message queue so any of the user messages may keep on sending mails so they are in the outgoing message queue similarly  whatever incoming messages are coming they also come into this mail server and by looking at the users address they go into the individual users mail boxes so  if these yellow boxes represent the users mail boxes then the user agent will connect to these mail boxes mail boxes are basically directories where all your mails are kept and it can access its own mail i.e the mails which are incoming so they go into these mail boxes and mails which are outgoing they go into a queue and from this the mail server sends it to different other mail servers and these different mail servers talk to each other via this smtp protocol so it may reach another mail server to the mail box to a particular user agent that is how the system works  refer slide time  19  22  21  11  one important component of the system is the user agent it prepares the message and creates an envelope this envelope is nothing but  the term obviously has been brought in from classical mail just as you write a letter and then put it in an envelope similarly you put your message into an envelope which has got a certain format it is the job of the user agent to create the message  the user has to type in the message or upload it from somewhere and then it is put in the envelope in the proper format this would be the job of the user agent then he puts the message in the envelope and sends it over to the mail transfer agent  which is one job of user agent the other job is that  for the incoming mails it has to show the incoming mails and then depending on what kind of user agent you have you may be able to create directories for classifying the mails you may have mails from friends in some directory and mails for business purposes in other directory and some user agents also allow you to define rules so that whenever an incoming mail has come to the user agent it will automatically examine the mail and put it in its proper directory all these are done by the user agent and then there is this mail transfer agent so from the user agent the envelope goes to the mail transfer agent who transfers the mail across the internet  refer slide time  21  12  22  04  you have these different machines who uses the user agent to create the envelope which are then sent to the message transfer agent or mail transfer agent now it travels through the internet  for the time being let us consider only internet as a homogenous kind of a networking system and then the envelope is delivered to the proper user agent and then the user accesses his mail through the user agent into his own machine so this is the overall email architecture we will look at another overall architecture a little later  refer slide time  22  05  22  32  there is some relay mtas so mail may be relayed through a number of mtas  allows systems not using tcp ip to send email to users on other sites  is accomplished through a mail gateway a relay mta that can receive and send a mail prepared by a protocol other than smtp so this relay mtas are very important first of all  by looking at the address remotely it may not be possible to disambiguate the address of the final mail server who is going to give directly to the user agent  it may not be possible to disambiguate it so maybe there are mail relays before that are bigger entities who are known and the mail can be sent to him and he will send it to the proper mail server who will directly give it to the user agent  that is one job of mail relay the other job of mail relay is that  suppose it is possible to transfer mails between heterogeneous networks  so you have one kind of network here and another kind of network here  so in between there has to be a mail gateway this mail gateway is also some kind of relay mta so the message will first come to this relay mta who will then actually store it and then the format etc of the envelope and other things may not be the same in the two networks so he will make those proper changes and then send it over to the second type of network this is the job of a mail gateway  refer slide time  24  08  24  47  here is an example  suppose a user agent has sent a mail through its own mta via the internet  now this mta is actually working as a mail gateway and this mail gateway then can push it to another kind of network which is a private network to the corresponding mail system so this way it makes it possible for user a and user b to communicate  exchange mails although they are on different kinds of networks this is becoming less important by the day because other kind of network is giving way to tcp ip networks  refer slide time  24  48  26  47  now  for delivering mails of course you need the addresses so there is a unique addressing system it consists of two parts ; one is the local part followed by ack followed by a domain name you must have come across mail addresses and seen ack something dot something dot something so this is what it looks like now the part before the ack is the local part and this local part is supposed to specify the mail box within that local network where this mail is finally to be deposited suppose that is the address of the person to whom you are sending the mail  the destination of that particular mail box to which this mail is to be deposited is given by the local part  whereas the domain name is what allows him to send a mail to the proper destination by looking at the domain name he knows the destination so he will send it to the corresponding mail server in that domain sometimes this may not be done in a single hop so it may go through a few mail relays so this is the address part once the domain name reaches its destination then by looking at the local part finding out the address of the mail box is easy  refer slide time  26  48  26  59  the local part defines the user mailbox where mail is stored for the user and domain name is the name of the host used as the mail exchanger   refer slide time  27  00  28  28  unlike ftp or http for mails messages do not necessarily have to be delivered immediately it can be delayed at the sender site or receiver site or intermediate servers during this time what happens to the mail is that it is waiting in some queue and the mail servers may be configured to pole the different machines connected to it for outgoing mail from time to time that is the time when it delivers the mail so it sends and receives messages during that time and that time may be set  that time may be a few minutes or may be more than that and then it goes and waits in the outgoing message queue before it is processed etc therefore the delivery is not instantaneous it may be delayed but usually nowadays mail is so important so people put powerful machines for doing these jobs and the mail goes really fast compared to snail mail but then compared to other protocols like fttp or http this smtp  the messages may have to wait in some queues in some servers either on the sending site or receiving site or intermediate servers  refer slide time  28  29  29  34  aliases mean different names for the same person smtp allows one name an alias to represent several email addresses this is one-to-many alias expansion a single user can be defined by several email addresses so this is many-to-one email expansion  so both are possible for example  you know that it is possible to send mails to a group of people suppose you regularly communicate to a group and when you send a message you want that message to reach to every member of the group  something like multicasting  so what you can do is that  you can define the group giving the email addresses of all the members in the group and then when you actually compose the mail you can simply send it to the group so the machine will automatically send one copy to each member of the group that is one-to-many alias expansion similarly many-to-one is also possible  refer slide time  29  35  30  11  this is a general kind of picture  you have the user who goes through the user interface to the user agent which puts it in this spoon for the outgoing mails and it collects the mails from the mail boxes from the corresponding mail boxes user a will have one mail box here and then there will be alias expansion then it will go through the mt ? s through the internet to other mt ? s to reach its destination  refer slide time  30  13 ? 30  57  now  looking at the mail message format  this is the smtp protocol for exchanging email messages and rfc 822 gives the standard for text message format the header lines contain two things namely to whom it is addressed from  i.e where the mail is coming from and then there is a subject line so these are members of the header then there is one single blank line and then there is the body that is the message and the message as you know is the ascii characters only  refer slide time  30  59  31  12  between the mta client and mta servers smtp uses commands and responses to transfer mail between an mtp client and mtp server therefore this is the command and response mode like other  refer slide time  31  14  31  29  application protocols mail transfer has the following phases  the process of transferring a mail message occurs in three phases  connection establishment  mail transfer  connection termination  refer slide time  31  30  32  12  so  for connection establishment client makes a tcp connection to the well known port 25 the well known port 25 is used for smtp the smtp server starts the connection phase so the server will reply with the 220 service ready as soon as mta client sends a request to this port 25 if the sever is ready or 220 service ready will come back automatically then there will be a hello message from client to the server side and server side will respond with a 250 ok these are the commands and responses which are going on we will  refer slide time  32  13  32  33  look into more details of an actual smtp session later when the connection is ready a single message between the sender and one or more recipient can be exchanged  this is the message transfer phase  refer slide time  32  34  32  42  and finally there is a connection termination when the client sends the quit and the server responds saying that the 221 service is closed  refer slide time  3  45  33  17  actually  this protocol is so simple you can just try it out yourself to send mails by directly doing a telnet on a particular port suppose you know the server name so you just telnet the sever name 25 and you will get a 220 reply from server  then you enter your commands hello  mail  from  receipt  etc and then finally you quit the above lets you send mail without using email client or a reader  refer slide time  33  18  34  50  this is of course also used by people who do not want to be identified that who is sending the mail etc  so all other misapplications and misuse of these facilities are also there here is one sample smtp interaction  after you have telneted it the server comes with a response that 220 iitkgp ernet.in if suppose that is the name of the server then the client sends a hello cse iitkgp ernet.in  so you receive a helo from this client then the server will say helo cse iitkgp ernet.in pleased to meet you  then it will say mail from then maybe you will give an address  then 250 so the sender,ok so  this is the client and server  the client is sending one command and the server is responding saying they are giving the feedback all the time that it is ok then you have receipt to  this mail is to be sent to such and such  so he will say that recipient ok then he will say data  meaning that  what follows would be the data which is the body of the message that is to be sent  refer slide time  34  52  35  45  in response to this data command what the server will say is  give 354 enter mail  end with dot  there is a full stop on a line by itself so  suppose this is the body of the mail  this is a test mail checking protocol etc then you end the mail with a dot by itself so carries return nine feeds  crlf followed by dot followed by crlf that is the smtps way of checking that the mail body is ended so the message 250 means message accepted for delivery now  when the message has been accepted you can quit and then it quits  refer slide time  35  47  38  06  here are some final words about smtp first of all it uses persistent connections that means  so as long as you do not quit you can go on sending mails one after the other actually that is what the machines will do the session i showed you is just an example  usually you would not send mail by directly using smtp as a matter of fact there is no point doing that unless you have some other intention so what you will do is that you will use a standard mail agent for doing that when the machine opens an smtp connection this is going to be persistent till such time you quit so  a number of messages can be sent in the same session i should also mention that  apart from these standard mail agents like using smtp etc  one service which is becoming quite popular now-a-days are the web mails actually for the web mail you connect to the web mail server i.e whoever gives you that service through http from that point onwards it works the same way so smtp uses persistent connections smtp requires message that is header and body to be in 7-bit ascii smtp server uses crlf crlf that means carriage return line feed carriage return line to determine end of message and as we have seen that smtp is a chatty protocol in the sense that you say something immediately it tells you something back so this back and forth command and then the response goes on for this crlf crlf sometimes some flexibility is also given when some part of it is missing  refer slide time  38  08  38  53  and comparing it with http one thing is that http is a pull kind of a protocol that means the user rather makes a request and pulls the content whereas here the content is pushed from the sender to the receiver both have ascii command response interaction and status codes in http each object is encapsulated in its own response message smtp multiple objects sent in multipart message actually you can send a multipart message  this is where all the attachments etc to a mail come in  refer slide time  38  55  39  59  now  of course as we know that now-a-days we can send not just text messages but other kinds of things namely pictures  graphics  voice recording etc we can send through the mail this means it is possible to send binary files through the mail and the way it is done is by encoding this binary file into a textual form there are various ways to do this encoding smtp is the simple mail transfer protocol  it can send in nvt 7-bit ascii format only it can not directly send binary files  for example  video or audio or images mime  is a multipurpose internet mail extension so mime is an extension to smtp which allows non ascii data to be sent through smtp this is so important and useful and very common now-a-days  refer slide time  40  01  40  15  it transforms non ascii data into nvt ascii at the sending end which can be transformed back at the other end what it does is that it adds additional lines in message header to declare mime content type  refer slide time  40  17  42  05  this is an example of some message which actually contains a binary file the initial part of the header from sujoy etc to etc etc  subject  picture of car where maybe we are sending a picture through the message so the from to subject is like a standard message then since this is using mime it says mime version 1.0 so mime version has to be mentioned this is important because whatever you are sending has to be decoded on that then content  the method used to encode data  content transfer encoding is base 64 so base 64 is one way of encoding a binary file into a text file but you have to mention that there are different ways of encoding binary file into text and base 64 is just one of them so the sender has to mention or sender has to clearly specify that this is the standard encoding scheme that he has used for encoding the file so that the receiver on the other end can actually decode it so you have to mention the method used to encode data then you say the content type which is image or jpeg and then you give the base 64 encoded data  refer slide time  42  06  43  42  base 64 encoding is actually quite simple suppose you have a binary file  you take 6-bits from a binary file at a time from groups of 24 so you take 3 bytes and make four 6-bit sequences from this so 3 ? 8 = 24 and 4 ? 6 = 24 so from three bytes you can get four groups of 6 so you interpret these 6-bit binary strings as a binary number and then depending on that number you encode it into a textual form so 6-bit will give you 26 which is 64 different numbers which is 0 to 63 and the encoding is the following  encoding is a b for 0  1 etc followed by 26 lower case letters so that makes 26 upper case plus 26 lower case that is 52 letters followed by ten digits  0  9  so that makes it 62 followed by ? + ? and ? / ? for number 62 and 63 this way from  0  63  you get a to b upper case  a to b lower case  digits  and ? + ? and ? / ? that gives you an encoding so that is a text and you encode it as a text and then send it as a text  refer slide time  43  43  45  00  now  we will come to the user end so this is pop3 which is the post office protocol pop3 is a very simple protocol for interacting with your mail box which is in the server this is very widely used what this is used for is that  actually your incoming mails will be deposited in your mail box  now pop3 is a protocol for getting that content of your mail box or downloading it on to your desktop machine that has advantages for example  the server gets less loaded because with people getting so many mails now-a-days  very soon if you have a departmental server giving the mail services to all the members of the department and if all the mails get accumulated there then it will load the mail server variable  it is good practice to download it to your machine and pop3 is a protocol for doing this download  refer slide time  45  01 ? 45  42  mail access protocols  there are other protocols apart from pop3 smtp is a push protocol now  if somebody has pushed a message for you how will you access that email so  this mail access protocol is retrieval from the server  it allows mail stored in mail boxes to be accessed by the recipient  refer slide time  45  45 ? 46  36  pop is the post office protocol where 3 is the version 3 rfc 1939 users can not create folders on mail server usually pop is a protocol for doing this mail access another one is imap which is a internet mail access protocol this has more features and you can manipulate messages on the server there are web mail services also which uses http that means it may be hot mail  yahoo mail etc  these are web mail services which are accessed through http these are three major protocols which people use for accessing mails  refer slide time  46  37 ? 48  29  post office protocol version three is simple and limited in functionality it consists of client software and server software the server performs password authentication  the server software allows the client software to access the recipients mail box so what the pop3 client will do is  it will connect to the pop3 server on the main mail server of a work group or department or organization so  the pop3 server would do a user authentication once again through user and password as this is simply a password check and when the user is authenticated he is given access to his particular mail box and what pop3 would usually do is  download all the mails from the mail server to the desktop machine for example  it is possible to configure it so that only a copy comes to your desktop and another copy remains in the mail server but such practice leads to overloading of the mail server and very soon its buffer starts getting full  its memory space starts getting used up to pop3 you are not supposed to do much here and simply get the machine on your desktop you can organize your local mail folders in anyway you like by creating directories  subdirectories  etc  refer slide time  48  31 ? 53  06  pop3 has a problem for some users in the sense that  if all the mails are actually downloaded onto your desktop machine then when you are away from your desktop  if it is a desktop and not a laptop  so if all the mails have been downloaded on your desktop then when you are away from office you have no access to the email folders now-a-days  the mail has become a common mode of not only exchanging information as well as storing old information etc  so people need access to pass mails almost all the time one way to do it  instead of downloading it using pop3 onto your desktop you can download it onto your laptop and carry that laptop around wherever you go the other alternative way is to keep it in the server if you can keep it in the server what would happen is that  naturally you can get access to the server from other places and you can see your mails but the same advantage is there for web mail also if you are using a web mail service your mail is stored in the server whoever is giving you the service both web mail and imap4 has this facility of storing the mail in your server what facility you require ? they are in the server  mail box  and anywhere you can have access to it and if you directly access the mail box the interface is not so good so these access protocols gives you somewhat better interface specifically  imap4 is more complicated than pop3 and has got more features imap4 means internet mail access protocol version 4 it stores user ? s mail in the server so that it can be access from multiple locations it is able to address mails not just by arrival numbers but by attributes so you can define attributes on mails and you can say something like give me the last mail from steve so it is going to do a search on your directory and access that particular mail but if you have it on your desktop you can organize it anyway you like here of course you are not taking it to your desktop it is in the server so this protocol has got more features so that you can access your mails in a more flexible manner and that is important because now-a-days it is all the old mails you have  there are many people who have thousands of mails and many of them are useful of course it keeps accumulating junk also somehow we fail to delete so  anyway some kind of organization and some kind of searching this is necessary in order to operate with mails in an easy manner so it is able to address mails not just by arrival numbers but by attributes also it has more features than pop3 as i mentioned can check email header prior to downloading which is another feature what pop3 would do is  download all mails that are in your mail box in a blind fashion for accessing through imap4  before accessing you can do some kind of filtering by checking the email header it can search contents of email prior to download so contents can also be searched before you download  refer slide time  53  07 ? 53  26  it can partially download email  it can create delete or rename mail boxes on the mail server and can create a hierarchy of mailboxes in a folder for email storage this is like creating a hierarchy of directories for sorting the mail into its proper category these are the references  refer slide time  53  43 ? 53  56  for example  rfc  821 for mail transfer protocol  rfc  2821 once again for smtp  rfc  2045 for mime and there are other rfc ? s associated with mail rfc ? s contain all the information that is necessary for these protocols with this we come to the end of our discussion about these two important protocols namely ftp and mails that means file download upload and mail exchange another protocol we have to talk about is naturally the http or the web which we will take up in the next class  thank you preview of the next lecture lecture ? 40 http we will discuss about http which is the most widely used application layer protocol today this is of course at the base of your world wide web  this  refer slide time  55  02  http stands for  refer slide time  55  04 ? 56  47  hypertext transfer protocol it is the network protocol used to deliver virtually all files and other data collectively called resources on the world wide web whether they are html files  image files  query results or anything else usually http takes place through tcp ip sockets which means it uses tcp world wide means majority of them are some files which are usually html files  there may be images  but also increasing the we have a lot of multimedia content on the web may be audio files  video files which are again termed as files and large number of applications are also being developed based on web because the spread of web has been so fast that many of the service providers are beginning to give their services through the web so that the service becomes available may be 24 hours a day anywhere in the world so  apart from files there may be outputs of other programs like hyper text transfer protocol which are also passed through this protocol in hypertext  the word text actually came from the original content which was most probably textually based with hyperlinks but then  this cache has to be updated regularly last-modified  this means if there is a modification on the other side that means if the lastly modified value has changed then you should get a new copy of that so you should refresh the current page  refer slide time  57  11 ? 57  17  now  the request line consists of the request type  url and version  refer slide time  57  19 ? 57  22  request type  categorize request message into several methods  refer slide time  57  23 ? 57  40  url  uniform resource locator which is the web page or document address it indicates a method  the host  the port number and the path  refer slide time  57  41 ? 58  06  let us look at this figure first is the method used and it could be something like http or even ftp etc   // then the host we usually prefer naming the hosts with domain names because it is much easier for us to remember the domain name that is one thing  secondly  in some cases the domain name remains the same but the underlying ip addresses may have changed so  if you give the domain name what will happen is that  first it will go through the resolver and get the ip address computer networks prof sujoy ghosh department of computer science and engineering iit  kharagpur lecture no # 40 http good day ! this is the last lecture and here we will discuss about the most widely used application layer protocol http this protocol is at the base of your world wide web  refer slide time  01  04  01  07  http stands for  refer slide time  01  08  02  55  hypertext transfer protocol it is the network protocol used to deliver virtually all files and other data  collectively called resources  on the world wide web whether they are html files  image files  query results or anything else usually http takes place through tcp/ip sockets so the first thing is that the majority of resources available today on world wide web is of course some files which are usually html files there may be images also but also increasingly we have a lot of multimedia content on the web which may be audio files  video files etc and a large number of applications are also being developed based on web because the web is vastly spread and many service providers are beginning to give their services through the web so that the service becomes available 24 hours a day anywhere in the world so  apart from files there may also be an output of other programs which are also passed through this protocol namely the hyper text transfer protocol so in this hypertext the word text actually came from the original content which was mostly textually based with hyperlinks but now-a-days a lot of it has changed so  this is the http  refer slide time  02  55  03  29  hyper text transfer protocol the http client is our browser therefore this internet explorer  netscape  mozilla are all http clients it sends a request to an http server also known as web server which then sends responses back to the client  the standard and default port for http server to listen on is 80 though they can use any port so  the well known port for http is 80 so the first request which the client is requesting for in any http server or any web server goes to the port number 80 later on they may negotiate another port number  refer slide time  03  46  04  47  http is used to transmit resources not just files  that is another point because require we are talking about resources a resource is some chunk of information that can be identified by a url this is r in url and url is universal resource locator  it is some kind of an address for these resources which is universally valid any resource which has an url can be accessed through the web and of course it has to be served by the web server the most common kind of resource is a file but a resource may also be a dynamically generated query result  the output of a cgi script  a document that is available in several languages or something else now-a-days we have dynamic web pages or a web page may change and somehow they are sort of outputs of some programs and they are also resources or rather static files  refer slide time  04  48  05  11  while learning http it may help to think of a resource similar to a file  but more general as a practical matter  almost all http resources are currently either files or sever side script output that means some script running on the server what you get to see when you surfing web  sometimes some of the effects may also be the output of programs which have been downloaded along with the page which is running on your machine that means which is running on the client machine through a java  applets etc but anyway that program actually is coming from the server  refer slide time  05  36  06  42  used to access data on the www plain text  hyper text  and hyper text means text with hyperlinks that means links to other pages embedded in them actually these hyperlinks are so called links to other pages  as soon as you click on a link what happens is that a request is automatically sent to a particular page which the url is pointing therefore it may be a text  it may be an image which can be clicked and whatever be the manifestation of this hyper link there is a url embedded in it and when you click on it a request is automatically generated when such hyperlinks are embedded in a text it is called a hypertext apart from plain text and hyper text we have audio  video or other things  refer slide time  06  43  07  32  http functions like a combination of ftp and smtp in some way ftp as it transfers files and uses the services of tcp just like ftp this is also using tcp and has only one tcp connection unlike ftp which uses two connections ; one for control and one for data but here only one connection is used and it is like smtp as data transfers between client and server it looks like smtp messages so they have format of message controlled by mime like headers http messages are delivered immediately unlike mail  unlike smtp like ftp  in http the messages are also delivered immediately  refer slide time  07  32  07  49  http is actually very simple client sends a request and server sends a response  similar to mail request and reply  data in the form of a letter with mime like format refer slide time  07  50  08  06  like most network protocols http uses the client server model an http client opens a connection and sends a request message to an http server the server then returns a response message usually containing the resource that was requested  refer slide time  08  07  08  25  after delivering the response  the server closes the connection making http a stateless protocol that is not maintaining any connection information between transactions this is one important point to remember that basic http is a stateless protocol a request has come  it responds and forgets and closes the connection and it forgets everything about it immediately sometimes some web servers would really like to keep some information and there are various things like access logs etc which may be maintain on the server side another common way in which some state information is kept are through cookies so  cookies are a simple text file kind of a thing which is stored at the client ? s machine what the server does is  it writes something about this clients request in a text file in the client machine itself so that next time if the that same client connects again then the http server can leave that file and can find out what is the last visit or some information about it cookies too sometimes breaks down the privacy in some sense and somebody else is writing things in my machine so that may be a source of breach of privacy or security so some people would like to block the cookies also it is also possible to block the cookies but anyway the point is  basic http protocol is stateless that means when one a request comes and once it is serviced the machine forgets about it  refer slide time  10  19  11  06  now  let us look more into the details of the structure of http transactions the formats of the request and response messages are similar and english oriented both kinds of messages consist of an initial line  zero or more header lines  a blank line that is a crlf carriage return and line feed by itself and an optional message body for example  a file or query data or query output etc so this is the structure we will see what each of these areas really contains the blank line is just to delineate between the header and the message body  refer slide time  11  07  11  28  put another way  the format of an http message is initial line  different for request versus response  then header1  value1  header2  value2 so the header name  value of that header  and that is how the headers go  refer slide time  11  28  11  35  then you have the blank line and then the body so you have initial line  headers  blank line and the body  refer slide time  11  36  12  52  initial request line  this is different for the request than for the response a request line has three parts separated by spaces  a method name  the local path of the requested resource and the version of http being used a typical request line is get /path/to/file/index.html so this is an example  this is the path name  path name to this index dot html file so  starting from the route it goes down the directory and subdirectory etc to finally locate the resource which is now here in index html so this is really a request line so get is a method  we will come to that later on and finally it mentions the version of http that is being used  http 1.0 this is what is going to go from the client to the server  refer slide time  12  53  13  36  get is the most common http method it says ? give me this resource ?  we will go into little bit more into the details of get and other methods like  post and head etc later on so method names are always upper case the path is the part of the url after the host name also called the request uri so a uri is like a url but more general and http version always takes the form http/x.x a 1.0 etc what we are trying to get is some file located in some site that is in some web server some how you should be able to contact that particular machine  some how we have to indicate the machine then we have to say what is it we are doing  what kind of protocol we are using and finally in that machine we have to give a path name to that file that path name is necessary because there may be files with the same name in different parts of the directory so always the path name is necessary therefore all these together constitute the url  refer slide time  14  27  15  42  initial response line  status line   initial response line  we have seen initial request line now  we see the initial response line the initial response line called the status line also has three parts separated by spaces ; the http version  a response status code that gives the result of the request and an english reason phrase describing the status code typical status lines are http/1.0 200 ok that means a request has been received and its response is that it is ok  200 is the code for it and it is ok that means whatever has been requested would also be forthcoming or http/1.0 404 not found this means  the particular file we were looking for in the request may not be available and therefore it says file not found now  what your client or browser would do is that it will read this and then display it may be in a separate window or a separate page that the file has not been found or the source has not been found  refer slide time  15  43  16  03  the http version is in the same format as in the request line that http/x.x the status code is meant to be computer readable the reason phrase is meant to be human readable and may vary the status code is a three-digit integer and the first digit identifies the general category of response  refer slide time  16  04  17  06  1xx indicates an information message only  2xx indicates success of some kind  3xx redirects the client to another url sometimes somebody may have moved from his old site to some new site may be to some new url  so what he would do is that  he would leave a redirection message in the old site  so those clients who have the old url land up there unknowingly they are automatically redirected to the new url so 3xx redirects the client to another url  4xx indicates an error on the clients part and 5xx indicates an error on the server ? s part so  whatever resource name it has given it does not exist so that is 404 therefore this is the status line  refer slide time  17  06  17  29  the most common status codes are of course 200 ok and 404 not found ok means the request is succeeded and the resulting resource is returned in the message body and 404 means not found  301 that it has moved permanently  302 means it has moved temporarily and so on  refer slide time  17  30  18  00  so 303 means the other the resources moved to another url given by the location response header and should be automatically retrieved by the client this is often used by a cgi script to redirect the browser to an existing file the 500 is the server error it is an unexpected server error  the most common cause is a server side script that has a bad syntax or fails or otherwise can not run correctly  refer slide time  18  01  18  14  now  after the initial line there are the header lines header lines  header lines provide information about the request or response or about the object sent in the message body  refer slide time  18  15  18  32  the header lines are in the usual text header format which is one line per header  of the form ? header  name  value ?  ending with a crlf it is the same format used for email and news postings  refer slide time  18  33  18  53  as noted above they should end in crlf the header name is not case sensitive though the value may be any number of spaces or tabs may be between the colon and the value header lines beginning with space or tab are actually part of the previous header line folded into multiple lines for easy reading  refer slide time  18  54  19  14  the following two header lines are actually equivalent you may say header 1  some-long-value-1a some-long-value-1b or header1  some-long-value-1a  then some-long-value-1b  this is just folded  refer slide time  19  14  19  44  and for net-politeness when you send in a request the from part should be included that means header gives the email address of whoever is making the request you may or may not because this might lead to a lot of unsolicited mails coming to you also or running the program doing so this must be user configurable for privacy concerns  refer slide time  19  45  20  16  the user agent  header identifies the program that is making the request in the form program name/x.xx where x.xx is the mostly alphanumeric version of the program for example  netscape 3.0 send the header ? user-agent  mozilla/3.0 gold ?  so that is the program version  refer slide time  20  16  20  37  if you are writing servers consider including these headers in your responses the server  the header is analogous to the user agent header ; it identifies the server software in the form of program name for example  one beta version of apache is server returns server apache such and such  refer slide time  20  38  22  05  the last modified  the header gives the modification date of the resource that is being returned it is used in caching and other bandwidth-saving activities used gmt in the format last modified such as day  date and time and this last modified is important the point is that  sometimes there are some web pages which are seen by a lot of people and if they are seen by a lot of people in the same organization one way to conserve bandwidth is through the user proxies once the page is brought in  that means it is put in that proxies cache automatically so that the next person who is under that same proxy makes the request and he gets it straight away from the cache without having to go to the distant location but then this cache has to be updated regularly if there is a modification on the other side  if the last modified value has changed then you should get a new copy of that  then you should refresh that page  refer slide time  22  06  22  13  request line consists of the request type  url and version  refer slide time  22  14  22  17  categorize request message into several methods  refer slide time  22  17  22  34  url  this is the uniform resource locator which is the webpage or document address it indicates the method  the host  the port number and the path  refer slide time  22  35  25  24  first is the method that is used and this method could be something like http or even ftp etc   // then the host and for this host we usually like to give the domain name because it is much easier for us to remember the domain name secondly  domain name remaining the same  its underlying ip address may have changed if you give the domain name what will happen is that first it will go through the resolver and get the ip address the domain name can be given over here alternatively an ip address can also be given over here if ip address is given then straight away the ip address is followed by a  followed by the port so that immediately becomes the socket the ip address and the port number together form the socket so we give the method and the socket and when you have done up to this much the port for the initial request is port number 80 if you give the host ip address and the port number  you have given the socket which means that we have indicated or we have specified where to go  first to the domain name and subsequently to the ip address of the host by the way this host must be on a public ip naturally and they can not have any private ip if they have to be accessed over the internet  so the entire socket now we have reached the machine and we also know the method to use and then in that machine we have to locate the resource which is the path  slash means you start at the root then you go right down to the subdirectory where that particular file is present and then you give the name of the file  this is the entire url this way all the resources located in any of these machines connected to the internet having a public proper ip address can be uniquely specified this is basically the addressing scheme for http  refer slide time  25  25  25  40  protocol used to retrieve the document  as i said http is the most common  you can also use ftp or gopher or news or telnet these could be the different methods used in the method part  refer slide time  25  41  25  57  host part is the computer where the information is located given by the domain name or may be the ip address directly port number is separated by the colon and as i said the default port is 80 and path is path name of the file on the server  refer slide time  25  58 ? 26  04  version  current version 1.1 and 1.0  0.9 are still in use  refer slide time  26  05  26  20  now let us look into the methods in more detail http is an important protocol and moreover many applications based on web use these methods directly so that you can give some program output or can interact with your client through the web originally http was not envisioned or envisaged just for locating some resource download it and see text and later on may be hypertext and some multimedia content but increasingly the web had become so popular and so many people are hooked onto the web that people started giving services through the web naturally all these services go through java script and a browser client etc so actually it is somehow communicating in http at some level  refer slide time  27  28-27  49  methods  the actual command or request that a client issues to the server one is get  client wants to retrieve the document  server responds with the contents of the document head  client wants information about the document but not the actual document so just the header part of it is what is needed  refer slide time  27  50  28  07  post  client provides some information to the server put  client provides a new or replacement document to be stored on the server patch  it is similar to put but only a list of differences to be made rather than the actual new document  refer slide time  28  08  28  20  copy  copy a file to another location move  moves a file to another location delete  remove a document on the server  refer slide time  28  21 28  37  link  creates a link from a document to another location unlink  delete links created with link option  used by client to ask server about available options these are all the different methods  refer slide time  28  38  29  20  the message body  an http message may have a body of data sent after the header lines in a response this is where the requested resource is returned to the client  the most common use of the message body that means you have asked for a web page and that page is here  that content of that page is here or perhaps explanatory text if there is an error in a request this is where user entered data or uploaded files are sent to the server so this is the message body  the main content which is coming in the message  refer slide time  29  20  30  25  if an http message includes a body there are usually header lines in the message that describes the body in particular the content type  header gives the mime type of the data in the body such as text/or html or image/gif suppose some image is being sent on request then on other side the client would know that what kind of resource it is  it is being told that this is an image and a gif type of image  so that on the client side that particular application or program to display gif files would be activated the content length  header gives the number of bytes in the body  refer slide time  30  26 ? 31  07  to retrieve the file at the url we write something like http  //www.somehost.com this is the domain name path / and of course since over here we will see that in this request the port number has been left out so by default it is port number 80/path/file.html first open a socket to the host www.somehost.com at port 80 and then get that file  refer slide time  31  08 ? 31  52  then  send something like the following through the socket  get/path/file.html http/1.0  this is a request you see the sequence ; first you open a socket to the host which is the web server which is in this case some host com at port 80  then you put another request the get request with the file name and the http version from some user from somewhere and user agent you mention and then you put the blank line  this is the header part  refer slide time  31  53 ? 32  16  the server should respond with something like the following  sent back through the same socket  http / 1.0 200 ok that means the request is granted and then request is ok then the date that means when it was last modified  content type is text/html and content length is something  refer slide time  32  17 ? 34  41  and http in the body the body will contain may be in this particular case a text document which is in html html stands for hypertext mark up language once again we will not have time to go into html what you can do is that you can open any web page and look at the source you will find that in your browser if you look at the top menu then there is a way of rather than looking at the final made up version you can look at the original source and there you can see the html file the html file has a number of tags and these tags help in specifying the format in which the text is to be displayed essentially there are other things but the major part of it is the format there may be format  there may be tags like header sort of shown in bold  there may be tags to show the back ground color  the foreground color  the font colors  shape  size etc all kinds of formatting information are there in html documents apart from that it is also possible to embed links this is one example of what an html document might look like first of all it is the tag html  whenever you have the tag you must have the beginning of the tag you must have the corresponding ending of the tag so html here and html here similarly body  then it says something happy new millennium or something which is the header  it says h1 which is a header then there may be more file contents and etc after sending the response the server closes the socket this is a stateless protocol and the server forgets about it this is an example of what a simple text html document looks like  refer slide time  34  42  35  41  now let us look a bit more deeply into the methods the head method  a head request is just like a get request except it asks the server to return the response headers only and not the actual resource  that is no message body so this will work very fast if you just want to know the header and then take some decision whether or not you want to look at it then you can ask just for the header and not the rest of it so it will come down very fast this is useful to check characteristics of a resource without actually downloading it thus saving bandwidth and also a lot of time use head when you do not actually need files content the response to a head request must never contain a message body  just the status line and header that is the head method  just get the header  refer slide time  35  42 36  23  the post method  a post request is used to send data to the server to be processed in some way like by a cgi script a post request is different from a get request in the following ways  there is a block of data sent with the request in the message body  there are usually extra headers to describe this message body like content type  content length etc  the request uri is not resource to retrieve  it is usually a program to handle the data you are sending the http response is normally program output  not a static file this is quite important  for example  now-a-days for your electric utility or for your telephone  suppose the bill has not reached what you can do is that you can see your bill on the net so what happens is  suppose you are a bsnl subscriber  the first thing you would like to do is to go to the bsnl ? s home page if you know the address then it is very fine or otherwise you can use any searching in like google or something to get the address of bsnl and then click on that address which is usually a link to the web page a link to the web page meaning that usually any website would contain an initial or main page or index page as it is called and if you simply make an http request to the correct server the main page or the first page or the index page would be displayed first actuall  that is an important point because while surfing we are accessing so many pages in so many machines in the url as we have seen  in that last part the located part you have to give the entire path name as well as the file name unless you are very well aware and very conversant with one particular sight or may be a few sites other than that you will not know either the path name or the file name  so how do you locate it and that is not how people serve what they do is that may be they know that in this particular example we were giving so we are trying to find our own telephone bill which is missing so i want to see my bill so i will connect to bsnl and i will somehow find the main address of bsnl which may be bsnl.co.in or something and that is where i will go now  i have just mentioned the domain name and nothing else which actually means a server  which actually means this domain name would stand for some web server the domain name of course can be translated via the dns system into the proper ip address and since it is an http protocol that is under default port is 80 so up to that much that means up to the socket part it is fixed now what about the rest ? the rest is taken for granted that if you have not specified something you will definitely be given only that first page or index page or main page of that site that comes as a response in the message body in the form of an html document and that gets displayed in that nice format usually by the browser on your stream now of course  that is a main page it may contain several things amongst all that i find out that if i am looking for a duplicate bill or something where do i go ? therefore something would be written over there like duplicate bill where if you take your cursor on that you will see that the cursor has changed showing that the color has changed or something has got underlined someway to indicate that this is actually a link when you click on that link now what does that contain ? it says duplicate bill and that is how it is communicating to the user but underline this text  there is a hyperlink and this hyperlink contains the path name and the file name which will take you to the page where you can get information about duplicate bills let us say  i click it  as soon as i click it  actually i generate a fresh request where the server socket etc is already known and now this new path name is added on to it so this is a new request http of course being a stateless protocol has shown you the first page and has forgotten that you actually exist but then now you have made another request which now brings a second page into zero now in that page may be you will find that there is a form over there who would process the form on the other side  may be some cgi script or some other program you are not going into that part in the server  but before that whatever information you have may be your name  may be your telephone number  something you have to enter  there will be a form you enter that and then you submit actually submit sounds very nice and user-friendly but then your machine which was the client so long now has to upload some information  the information which you have just typed in it has to upload that information on to the server this uploading of information  refer slide time  42  02 42  11  may be done via this post  this is the opposite of that  refer slide time  42  12  44  16  the most common use of post by far is to submit html form data to cgi script cgi stands for common gateway interface so when you send something  this goes in some format and the cgi is a language where it is easy to pass whatever you have sent and then get the appropriate values therefore what cgi script will do is that  with all these information  it will form some kind of query may be a data base query to some database  in our example we were talking about telephone bills  so in that bsnl server where all the bills or may be at least the current bills are stored so it will go with the current request information  form a query  get that kept your bill and then your bill was of course in a data base so now that information has come  that has to be put together in the form of a dynamically generated web page and sent back this is a very common way of using post in this case  the content type  header is usually application/x-www-form-url encoded and content length header gives the length of the url encoded form data  the cgi script receives the message body through stdin and decodes it cgi is specially designed so that such data which is coming in can be easily passed and all the values retrieved this is how post method is used so this is how applications over the internet are generally implemented  refer slide time  44  17 ? 44  23  here is a typical form submission using post  let say post /path/script.cgi http/1.0 so  basically we are actually invoking some cgi script and we have given that address of the url of the script and we have mentioned the method and the http version from  is of course somewhere user agent  http tool/1.0  content-type may be application/x www form urlencoded  content length  32  home  = something so  this is a typical form submission  so  on the other side this will be taken and processed and finally a dynamic web page would be generated and shown  refer slide time  45  24 ? 46  57  http proxies  are important for various reasons one reason we have already discussed is that  suppose you are in an organization where a large number of people access the web outside  now-a-days almost everybody wants to access the web and sometimes the same page of course the wan bandwidth is always costly and wan bandwidth is always much lower than the internal band width if some page is already been brought in and that page is fresh enough then you can cache it in the proxy  this is one major use of http proxy  there are also other uses of http proxy an http proxy is a program that acts as an intermediary between a client and a server instead of a client directly calling the server or directly sending a request to the server it may only send it to the http proxy it receives request from clients and forwards those requests to the intended servers the responses passes back through it in the same way thus a proxy has functions of both a client and the server it comes in between the client and the server  refer slide time  46  58  51  24  when a client uses a proxy it typically sends all requests to the proxy instead of to the servers in the urls requests to a proxy differ from normal requests in one way in the first line they use the complete url of the resource being requested instead of just the path  this is of course important actually if you are sending a request to the original server then the server has got the request that means you have reached up to that server now  you need to simply give the path from the root to the actual file name now  instead of sending the request directly to the web server  the client  it sends its request to the local proximation therefore in the proximation it has to supply not only the path but also the domain name or ip address of the server that it is sending its request to apart from caching and bandwidth conservation there is another use sometimes that a proxy is a put to you may do it in proxy  you may do it in some other places also like fire walls etc in many organizations now-a-days what is happening is that the network is becoming so big but the ip address space is small you can not give a proper public ip address to all the machines in the network  may be the organization does not have such a big network for example  class b addresses have become very few or almost non existent these days therefore many organizations will not have a class b address if that is so you can not give proper ip address now  if you can not give the proper ip address to the client  may be you can still send the request to the server but how will the servers respond back ? for responding back the server has to communicate with you  it has to open the tcp connection for that on the other end there must be a machine with the valid ip address one way to solve this problem is to do network address translation and although network address translation may be done at the fire wall  may be done at the router  it may be also be done at the proxy that means what we do is that  if it is a big organization may be 5000 machines or something and has got just one class c address may be 1250 addresses what it might do is that  it might allot some number say 50 valid ip addresses to the proxy so that whenever there is a request which is being sent by the client now the client need not be given a public ip if the client may be given a private ip which is just private to that network that does not work outside the boundary of the organization  from that it sends a request to the proxy  the proxy takes up this request and proxies that means it sends the request out to the world through the intended web server giving one of the valid ip addresses and when it gets the response  it changes the ip back again to the actual private ip of the machine and gives it back that is another way  proxy may be used proxy may also be used to keep track of what kind of data or what kind of sites people in the organization are generally looking at  they may feel that this site may be good  this may be bad but anyway the point is that this may be done if you are routing all your http requests through the proxies naturally it has to give the entire url when it is sends a request through a proxy  refer slide time  51  25  51  55  for example  get http then you give the domain name  then the path  then you give the path name  then the http and its version number that way the proxy knows which server to forward the request to though the proxy itself may use another proxy there may be hierarchy of proxies etc  you are not bothered about that  refer slide time  51  56 ? 52  15  as the saying goes in network programming anyway be strict in what you send and tolerant in what you receive other clients and servers you interact with may have minor flaws in their message but you should try to work gracefully with them  refer slide time  52  16 -52  51  http specification suggests the following  even though header lines should end with crlf that is a carriage return and line feed someone might use a single line feed instead  accept either crlf or lf the three fields in the initial message line should be separated by a single space but might instead use several spaces or tabs  accept any number of spaces or tabs between these fields etc usually on the other side is tolerant of these with this we come to the end of this lecture actually  http and this entire gamut of web services have been developed in such a manner that these demands codes by itself actually this whole field of networking has grown at a tremendous rate people usually talk about moore ? s law for computing power and memory capacity etc but if you look at the network traffic and the speed at which network has been growing  you will find that this is actually much steeper than the moore ? s law moore ? s law by itself is exponential so being steeper than moore ? s law means that you have a higher base  steeper rate or growth which is a very phenomenal rate of growth and this phenomenon rate of growth has to respond to a large number of technologies  a large number of protocols etc  and it is expanding all the time actually we have tried to encompass the basic technologies  first of all the lower layers and just we have touched upon core ideas in all the seven layers we talked about web today and you can have an entire course on the way web services are given and all web applications can be developed etc we have given only one lecture on a network security  you can have an entire course and networks security it has become so important these days because transactions are being done over the network what we expect is that as time goes on  this ubiquitous-ness of network is only going to grow and now-a-days we are not always care full to may be carry a pen because may be wherever we go we will find a pen similarly the expectation now would be that wherever you go may be you can find the network outlet where you may be having a laptop or palm top or whatever and through the dicp get yourself configured and be on the network and of course people are thinking of advertising intelligent machines like your microwave oven or your heater or other things also on the network so this is going to be a universally networked world so with this we come to the conclusion of this lecture thank you 