computer networks prof sujoy ghosh department of computer science and engineering iit  kharagpur lecture # 21 local internetworking  reference time  00  43  good day today we will be talking about local internetworking  refer slide time  00  51 ? 01  13  what is internetworking ? internetworking is the connection of different networks everybody is aware of the term internet today internet comes from this term internetworking  and by internetworking we mean connecting different networks  refer slide time  01.13 ? 01  35  what is a network ? as we discussed in the last lecture  the interconnected nodes in the same broadcast domain form a network  and they are usually connected through routers but for local internetworking  we may not need a router we may need something called a bridge thus  a network is the set of nodes  which are in the same broadcast domain this broadcast is advantageous for some applications  but for the operation of the network  a crucial requirement is the broadcast that is used to discover the mac addresses of the different computers you can send an arp message and get the mac  which will give the ip address that means you are basically finding out the mac address of the machine whose ip address is given the machine will then reply with its own mac address that mac address has to be put in the destination address of the data link layer frame this is how it operates in the single network if you have two networks which are connected to each other  internetworking is required for so many reasons   refer slide time  2  47-2  51  two or more networks can be managed as a single network that could be one advantage of interconnection similar type of computers can communicate with another ; that is electronic mail  etc  going across the networks this is another advantage  refer slide time  2.52-04.18  if you have two networks connected  there may be multiple routes between nodes  which help to create alternative communication routes  when links are either not operating or they are busy the one important reason for local internetworking is to have the capacity to isolate traffic from other networks as we have seen  if you want to find the mac address  you send an arp broadcast but if the network is large  many people would be broadcasting and the broadcasting load on the entire network will become very heavy so as the network grows  as more and more nodes and more and more computers get connected to the network  at some point of time  the performance will be getting degraded because so many nodes are sending broadcast messages the network has to be broken  although it may be in same building so the scope of broadcast becomes limited  refer slide time  04  19-06  50  to have the capacity to isolate traffic from other networks ? here we are referring to broadcast traffic ? and to access the information on remote sites are the advantages of connecting networks look at the problem  which we had glimpsed earlier suppose there is this node a  which wants to send a message to a node b a knows b ? s ip address but they are in two different lans which are separated nevertheless  they are connected through a router to have some physical connection a router is some kind of network device that enables two different lans to communicate with each other we will see what actually this router does and whether the same thing applies to the bridges when we come to bridges we will discuss the basics of a router and what it contains and other details when we discuss the network layer but right now  we will just talk about the arp and the mac layers so let us say that there are two arp tables in router for this lan and another one for that lan so there are two arp tables in the router  one for each ip network in routing table at source host  it has to find the router first of all  the host must find the router for finding the router it once again must know the mac address  which is given over here as something like e5 or e9 etc  which does not make too much sense to human beings it is just a bunch of bytes  6 bytes actually so the host  that is  a  has to know the router in order to send it to b ; or in order to even know the address of b  a must somehow communicate with the router ; and for communicating with the router it must know the router ? s ip address but finally  these two hardware adapters should communicate so they have to know each other ? s hardware address or mac address it will find the mac address in the arp table at source if it has already communicated with the router  the address may already be in its arp table it will do an arp and find out the mac address of the adapter of the router  refer slide time  06.51-07.22  then a creates a datagram with source a and destination b here source a and destination b mean the ip address of b and ip address of a  i.e  the network layer address this should all be in the packets  which are coming down from the network layer a uses arp to get r ? s mac address for this a creates link layer frame with r ? s mac address as destination ; the frame contains a to b ip datagram ; a ? s data link layer sends the frame  refer slide time  07.23-08.09  r ? s data link layer will receive this frame on that particular adaptor r removes ip datagram from the ethernet frame now it is stripped of the data link layer header and trailer and the router sees that this is destined to b by looking at the ip address  the router would know that it is not in lan 1 but in lan 2 so r uses arp to get b ? s physical layer address now through the other adapter  r must communicate with lan 2 and specifically to b for that  it has to know b ? s address and for that  it does an arp in lan 2 then r creates a frame containing a to b ip datagram  and sends it to b  refer slide time  08.10-09.10  in this way  a communicates with b and the original packet contains the source ip address as this may be the ip address of a and the ip address of b this is just for example  and these numbers don ? t matter there is a 4-byte ip address and that datagram is sent with a ? s source mac address to the router router finds the mac address as destination b  does the arp in the lan 2 and finds out the mac address  which is 49b-d then r forms the net frame  which contains the original packet which was sent by a ? s network layer but now it has the source as the mac address of the router and it sends it to the mac address of b through the lan this is how the whole scheme works  refer slide time  09.11-10.18  we will see just a couple more slides for finishing this arp when sending an arp request the sender includes its own binding ; that means  its own ip address and mac address all machines in the local network can extract the bindings from the arp traffic and store it in its cache remember all other nodes don ? t have anything to do with this arp  but still they listen to this arp traffic  which is going on and whatever bindings it can  it extracts and puts it in its cache  so that if this particular machine wants to communicate with any one of those  it can bypass the arp and get it straightaway from the arp cache  rather than doing a broadcast on the network again a system can notify others of its address by sending an arp when it boots  because it includes its own binding in the arp message  refer slide time  10.19-10.56  arp is a low-level protocol that hides the underlying network ? s physical addressing  permitting one to assign arbitrary ip address to every machine we think of arp as a part of the physical network system and not as part of ip so  arp has to do more with the data link layer rather than the network layer the other protocol  which is predominately related to the ip address  will be discussed later to accommodate various systems  arp uses variable length packets because these arps may be used in different networks  refer slide time  10.57-12.07  so this is just a part of arp message format ; there are other parts of it the format used is  hardware type  2 bytes  for example for ethernet you will get a value of 1   protocol type  2 bytes  0800 for ip   hardware address length  the arp may be used in various networks and various networks may have different classes of hardware addresses  which are of varying length if it is just the ethernet address  there will be 6 bytes but for other kinds of networks it may be something different so the hardware address length mentioned here is 1 byte ; protocol address length is mentioned in 1 byte ; but operation is 2 bytes of arp ; i.e  it could be arp request/response  rarp request/response  etc  refer slide time  12.08-14.50  what is rarp ? rarp stands for reverse arp what is arp ? arp is used to find the mac address of the machine having a particular ip address and rarp is the reverse what is the ip address of the machine having this particular mac address ? rarp is required to know one ? s own ip address  when one can ? t store one ? s ip address locally and specifically one place where it is quite often used is in diskless machines nowadays  there is a concept of diskless machines and they are also known as thin clients  which use the computational power and the disk storage  etc  of a central server these thin clients  since they have minimal functionality  are easier to maintain it may be a little cheaper to upgrade them  as it is easier to upgrade one central server rather than a whole bunch of pcs so  if you have a thin client and a server in a network  they communicate with each other in an ip network but for communicating  for being an entity in the ip network  you must have an ip address how is this ip address to be stored in this diskless machine  which does not have any disk  to store anything permanently ? whenever you switch it off  all of it becomes volatile  except for the small rom so when it boots up  it has small program in its rom  which can do some elementary processing it can find out its own mac address because it is just local and give that mac address with an rarp  asking for its own ip address and the server will assign an ip address to it so rarp is used by diskless machines to get its ip address  which may be in a server like arp  rarp is also sent in the data portion of the frame the frame type contains 8035 and the data portion contains 28 octets there may be primary and back-up rarp servers there are two other protocols like bootp and dhcp  which are successors of rarp  and they have to do more with the network layer we will talk about bootp and dhcp later  when we talk about the other tcp/ip protocol suites  refer slide time  14.51-16.51  till now  we have seen what internetworking is ; it means connecting two different networks together if this internetworking is local  i.e  may be in the same organization or may be in the same building or in nearby buildings  in the same campus  etc  you may not require the full power of a router for the networking part you may do it with a data link layer device  called a bridge we will be discussing about bridges today bridges can connect different networks as a matter of fact  they can connect different networks of different types for example  a bridge can connect 802.x to 802.y these x and y may have the same value ; i.e  both of them may be 3  that is  both of them may be ethernets or one may be an ethernet and another may be a token ring  something like locally connected small lans if a lan is big  bridges can ? t handle it any longer it is a data link layer device and it follows a protocol from ieee 802.1  which is a spanning tree of bridges if you remember how this ieee 802 protocols are organized  802.1 is put at the top as it gives an overview and a few things which are generally applicable to all the layers then we have 802.2 for link layer  etc  and 802.3 is ethernet 4 for token bus  token ring  etc so we will look at some more 802 protocols when we discuss wireless networks a bridge may connect different types of networks and that is why it is put in 802.1 ; this uses spanning tree protocol we will discuss the spanning tree protocol presently  refer slide time  16.52-17.20  a local internetwork picture would look something like this suppose there are four lans  lan 1  lan 2  lan 3 and lan 4  which are connected by two bridges bridge has two ports ? one connecting to lan 1 and the other to lan 2 bridge has three ports  each one connecting to lan 2  3 and 4 now  a can communicate with h through two bridges  refer slide time  17.21-18.18  let us see the salient points of a bridge first of all  it is a link layer device it stores and forwards ethernet frames  which means it is related to the mac address rather than the ip address these bridges handle the hardware addresses it examines frame headers and selectively forwards frames  based on mac destination address this means that  in the previous diagram  when gets some frame from here  it will look at the hardware address and decide whether to send it to lan 4 or to lan 3 it would selectively send it to one of them when the frame is to be forwarded on segment  it uses csma/cd to access the segment so that is the protocol  refer slide time  18.19-19.46  bridges are transparent  that is  hosts are unaware of the presence of bridges to the host the whole thing might look like one single network since it is transparent and plug-and-play device  it will do some self-learning and start operating in the beginning of the self-learning phase  it may be little inefficient but later on its efficiency will improve as it learns more bridges need not be configured  which is another advantage a bridge separates lans if we want each group ? s traffic to remain within its own lan there are other reasons like security issues to maintain the traffic within one ? s own lan  refer slide time  19.47-20.12  at the physical level  the bridge boosts the signal strength like a repeater or completely regenerates the signal just like a hub or a switch  before forwarding the signal  it will boost up the signal  i.e  the signal is being regenerated  which is highly advantageous bridges usually use the same protocol on either side ; for example ethernet-to-ethernet or token ring-to-token ring  refer slide time  20.13-20.25  they also convert between protocols for example  ethernet-to-token ring protocol conversion is possible in bridges also bridges are fine for medium-sized organization but are totally inadequate for large installations they would require routers  refer slide time  20.26-21.27  a bridge stores the hardware addresses observed from the frames received by each interface and uses this information to learn which frames need to be forwarded by the bridge it will maintain a table in itself and for each of these interfaces and in that table it will store all the hardware addresses it has seen in the segment so it will know the location of the machines in the different segments if it gets a packet from lan a  which has a hardware address for the machine in lan b  it will send it to lan b each bridge has physical interfaces  the data link layer  the address table and the filter table how is it filtered before being forwarded ? using the information from the address table it learns which frame needs to be forwarded by the bridge  refer slide time  21.28-21.31  this is just an example in the form of a picture  refer slide time  21.32-22.58  so bridges forward information only in the form of packets to the segment where the destination host is connected to bridges can construct  learn  forwarding table from the source address of the packets which have recently been forwarded to it so whenever there is an arp on that side of the lan  the port of the bridge that is connected to it will also get that arp request then it finds some of the bindings and it quickly learns and fills up its table what will happen if a host is moved to another segment or if a new host is connected to a segment ? if a new host is connected to a segment  this learning becomes a continuous process if a system is moved from lan 1 to lan 2  the network interface card  which is present in it  also goes along with the machine from lan 1 to lan 2 since the particular mac address has moved from lan1 to lan 2 the table entries of the system moved will get erased and the data remain fresh and relevant  refer slide time  22.59-23.39  in the above slide  the green ones are the different lan segments and  till are seven bridges and they are connecting multiple lans you can connect multiple lans like this ; but it has a problem of looping and now we will discuss how to avoid that  refer slide time  23.40-24.49  for increased reliability  it is desirable to have redundant alternative paths from source to destination with the multiple paths  cycles result and so bridges may multiply and forward frames forever the frame may go on and on without a frame getting dropped  because in the bridge and in the data link layer there is no concept of a particular frame moving around for a long time since there is no way to handle that  we do it in ip layer we will discuss about that later once the frame starts circulating  that means  going in a cycle  it will go on and on and such frames may actually increase in numbers and then bring down the whole network  which is not acceptable the solution for this is to organize bridges in a spanning tree by disabling subset of interfaces willfully  in the sense that we don ? t use them  refer slide time  24.50-25.12  suppose you have a graph as shown above  there could be cycles over here but if you disable these two interfaces of the bridge  you no longer have a cycle so with these three paths shown you can ? t have a cycle  refer slide time  25.13-26.37  we can think of the extended lan as a graph its nodes are the lan segments and bridges edges are bridge-to-segment links this is how a graph should be constructed now construct a tree from the original graph keeping all segment nodes and removing some bridge nodes and edges the individual lan segments are the nodes and for the bridge to the lan connection  we form an edge this graph may have cycles we remove the cycles minimally by still keeping the graph connected if the original graph is not connected  i.e  if it is not possible to go from one node to another  then in the diagram there is no physical connection and hence you can ? t do anything about it but if the original one was connected and when we disable some of the links to avoid cycles  we must keep it minimally connected and so all the nodes are retained that is why it is called a spanning tree so  finally what we want is to have a spanning tree with some of the edges disabled to avoid cycles  refer slide time  26.38-26.59  the above slide is an example graph with lots of cycles we remove some of the edges so that the graph still remains connected and it is still possible to go from any node to any other node without a cycle in this graph this is the spanning tree in which all the nodes are still connected but there is no cycle  refer slide time  27.00-27.34  for this  we use the spanning tree algorithm from ieee 802.1 the basic idea is that each bridge decides which ports it should forward packets to  so that the resulting network is acyclic and the resulting network interconnects all segments assume each bridge has a unique id and each one knows its own id by the algorithm  we assume that the bridge with the smallest id is the root bridge and this root bridge forwards packets to all its ports  refer slide time  27.35-29.03  how do non-root bridges compute the shortest path to root ? some algorithms are distributed algorithms  i.e  each node does some computation using the locally available knowledge but this locally available knowledge may not be consistent with the global picture as the global picture is not known since the local things are known  we go for distributed algorithm instead of a centralized algorithm we do use centralized algorithm  gather all the information together in one place  and then do the computation centralized or traditional algorithms are obviously easier but it is more difficult to write distributed algorithms but you don ? t have any option you have to write a distributed algorithm a node or a bridge in this particular case can do the computation only based on what it knows locally it does not have the global picture it tries to form a global picture and that is the task of the algorithm  to form that global picture each lan has a single designated bridge closest to root and the tie-breaker is the minimum bridge all packets of a lan are forwarded only to that lan ? s designated bridge we will look at this algorithm in more detail  refer slide time  29.04-30.04  bridges exchange configuration messages to determine spanning tree in a distributed manner the configuration message  cm  consists of three things  s  r and h  where s is the bridge id of the message sender  r is the bridge id for the assumed root whoever is sending this cm  assigns the best value for the root ; that is r h is the distance in hops from message sender to the assumed root  so h is the distance from r to s  as is known to this particular bridge so cm gives these three things  bridge id  root id  and the distance from the root to the particular sender  refer slide time  30.05-31.26  when there are two cms  we say cm-1 is better than cm-2  under three conditions when cm-1 identifies root with smaller bridge id ; when both the cms give the same root id you can ? t say which one is better based on this but cm-1 is closer to root ; when both cms identify same root and distance to the root  but cm-1 ? s sender has smaller bridge id in these cases  cm-1 is preferred initially all bridges assume that they are roots and generate cms as the algorithm starts  all the bridges assume themselves to be root and send initiating cms to all its neighbor nodes  refer slide time  31.27-32.23  each bridge remembers the best cm it has received or sent the best cm is the value of the smallest root it has received if more than 1 value of the root is same  the best cm is the one in which it can reach the root with the smallest number of hops bridges use the best cm to determine true root and to compute the distance to root a bridge stops generating cms when it realizes that it is not the root after that point  it simply forwards all cms it receives  refer slide time  32.24-33.10  a bridge stops forwarding cms to a segment when it receives better cm from that segment suppose a bridge is sending a cm with some particular root ; and through some other segment a cm has come with a better root and the better root and the path to the better root are through the original segment  then that segment will not get cms forwarded from this particular bridge then where does this algorithm converge to ?  refer slide time  33.11-35.37  let us say will send cms to   and  when gets a message from  it knows that is on this side and so it will stop sending on this segment will send about to but this is two hops away so will not only know that is there but it will know the shortest route also will get the message from either or through  whichever comes first so it will find its hop to the root  then among and  is smaller assuming       are in the lexical order so it will connect to  this is how they all will come to know about the root very quickly although each bridge may initially think of itself as a root  at some particular point of time  for example  originally assumes that it is the root but when it gets a cm from  it will know that there is something smaller than itself and must be the root so it will latch on to  will of course by that time have got the cm from and knows is the root so it will forward this cm with as the root and with its own distance to and with it to  now will know that is the root in this way  all the bridges will come to know about the root very quickly and they will latch on to the path or the root  which goes through the smallest number possible error for example  could latch through or but it will choose and in this way we will finally have a tree  refer slide time  35.38-36.12  now the algorithm will converge to a tree that connects all segments what if the root fails or what if the designated bridge of a lan fails ? to identify these you have to run this spanning tree algorithm from time to time  refer slide time  36.13-37.04  one of the main uses of the spanning tree algorithm is to isolate the traffic  specifically broadcast traffic so bridge installation breaks lan into lan segments and bridges filter packets same lan segment frames are not usually forwarded to other lan segments hence segments become separate collision domains and any broadcast over here is just limited to the particular segment so this is the full lan 1 ip network divided into lan segments which are bridged there may be hubs  nodes  etc  refer slide time  37.05-37.19  how does the bridge know which lan segment to forward the message ? when a bridge gets the frame how does it know where to forward it ?  refer slide time  37.20-38.09  a bridge has a bridge table and entry in the bridge table is of node lan address  bridge interface and time stamp the node lan address is the mac address  the bridge interface is the group to which it belongs if the entry in the table becomes too old and is to be dropped from the table  such stale entries in the table can be dropped after a particular prerequisite time known as time stamp  which can be configured  60 min for ttl   so a configured bridge knows which hosts can be reached through which interface without traffic when a frame is received  the bridge learns the location of the sender  i.e  incoming lan segment  and records sender location pair in bridge table  refer slide time  38.10-39.57  when a bridge receives a frame  it forms an index bridge table using mac destination address if an entry is found for destination and if the destination is on the segment from which the frame had arrived  it drops the frame  because the frame is already in the particular lan if an entry is found for destination and if it has to go to some other lan  it will forward it this is known as selective forwarding if this packet frame is meant for some other lan  the bridge will forward it to that particular interface sometimes a new machine is connected to the lan  etc or the bridge is newly connected and its bridge table may not have been constructed fully and so it may not have an entry for this particular mac address in such a case it will flood flooding means forwarding the frame to all interfaces except the interface on which the frame arrived when a particular frame arrives from some interface for some destination mac address and the bridge does not know to which lan segment this mac address belongs  it does not have a corresponding entry in the bridge table so it will simply flood  i.e  put in a copy of the frame to each of the other interfaces if a bridge is newly put in a network  in the beginning it will be inefficient as we have already seen  flooding many packets to many segments but as it slowly learns  it will become more and more efficient  refer slide time  39.58-41.25  suppose c sends a frame to d and d replies back with a frame to c and the bridge has this address table and c is on interface 1 let a and b be with port 1  e in port 2  h and j in port 3 the bridge doesn ? t know about either c or d so when the bridge receives a frame from c  it notes in bridge table that c is on interface 1 this table will get updated because c is the sender mac address  which it will put in its mac table still the bridge does not know where d is and it will send the frames into interfaces 2 and 3 and not to 1  as we have seen earlier the frame gets copied on to other ports  2 and 3 in interface 3  d is not present so the host will ignore that frame in 3 but interface 2 has d in it and so d will receive it and will try to reply back to c  refer slide time  41.26-41.56  now d generates a frame for c and bridge receives the frame one notes in bridge table that d is on the interface 2 bridge already knows that c is on interface 1 so it selectively sends the frame to interface 1 and does not give to interface 3 any longer  refer slide time  41.57-43.04  we have lans and when they get bigger and bigger they can ? t really exist as 1 single collision domain so we have to segment it  i.e break it up into segments and bridge is 1 way to do it one way of segmenting some of the lans is shown above there are three hubs with each hub having a work group we can connect them through bridges but this is not recommended for two reasons  first of all single point of failure at computer science hub if this hub goes the other two can ? t communicate with each other and all traffic between ee  electrical engineering  and se  system engineering  can ? t pass through cs  which is not good  refer slide time  43.05-43.36  so the recommended configuration would be something as shown above a bridge or a switch here connects all the hubs and this bridge or switch acts as the backbone if ee wants to communicate with se  it goes through the backbone  refer slide time  43.37-44.25  let ? s see some of the features of bridges a bridge has the features similar to a switch it isolates collision domains resulting in higher total maximum throughput because in a collision domain with a lot of broadcast traffic the net throughput of the network will go down so if you can make it smaller and make the frames to travel from one segment to the other  the overall throughput of the network increases also it supports limitless number of nodes and geographical coverage bridges can connect different network types it is transparent  i.e plug and play  and does ? self-learning ?  so no configuration is necessary for its operation  refer slide time  44.26-46.15  now let us compare a bridge with a router both are store-and-forward devices a router is a network layer device  examine network layer headers  and is used for connecting two different networks globally a bridge is a link layer device and is used for connecting two different networks in local internetworking rather than global internetworking routers maintain routing tables and implement routing algorithms but bridges maintain bridge tables and implement filtering  learning and spanning tree algorithms bridges maintain bridge tables consisting of mac addresses but routers maintain routing table consisting of ip addresses  refer slide time  46.16-47.09  these are the layers in the protocol stack of the host and from the higher layer  i.e layer 5 a frame is coming down to 4,3,2,1 1 is the physical layer and from the physical layer it travels to the bridge since the bridge is the layer 2 device  it goes only up to layer 2 then it encounters a router in the next hop and router will take it up to layer 3  and again bring it back and then send it to the host the frame will again go to layer 5 so a bridge is the layer 2 device and router is the layer 3 device  refer slide time  47.10-48.19  let us see the advantages and disadvantages of a bridge the advantages are   bridge operation is simpler requiring less packet processing  bridge tables are self-learning  no configuration is necessary and  all traffic confined to spanning tree even when alternative bandwidth is available the disadvantages of bridges are   as we disable some of the links while we run the spanning tree algorithm  at a time  only some of the links are used while the rest remain idle so we are not using the total bandwidth that is available to its fullest and bridges do not offer protection from broadcast storms  refer slide time  48.20-50.02  let us now look into the advantages and disadvantages of routers the advantages are  arbitrary topologies can be supported cycles are supported in bridges  i.e  a frame may go on and on forever but in the network layer  the packet will have a counter and if a packet starts cycling  the protocol is such that at each hop the counter will be decremented and if some router finds that this count has become 0 it will simply drop the packet so there is a definite time for a packet to circulate and so it can ? t circulate indefinitely the counters used are ttl counters it provides good routing protocols such as limiting the cycles etc the network becomes better the router is capable of providing protection against broadcast storms the disadvantages are  it requires ip address configuration which means that it is not a plug-and-play device it requires some manual configuration and higher packet processing so it is costlier  refer slide time  50.03-50.35  bridges work well in small networks  i.e with few hundreds of hosts while routers are used in large networks  i.e with thousands of hosts also for similar networks like ethernet modems  switches can be configured to do some bridging functions as we have seen already  whatever functionality is available in the bridge is available in modem switches also now let ? s compare switches with bridges and routers respectively  refer slide time  50.35-51.56  switches are very fast but routers are slow  i.e  switches are doing just switching so they are very fast whereas routers have to do some computation and so they are slow switches are inexpensive but routers are expensive switches don ? t give the benefit of alternative routing whereas benefits of alternative routing are available in routers there is no hierarchical addressing in bridges  but hierarchical addressing is possible with routers hierarchical addressing will be discussed later when we are connected to the wide area networks  i.e  to the whole wide world  then router is a must because other people can also connect through routers and the routers will talk to each other but switches can ? t talk if you are trying to do local internetworking  a bridge or a switch which now-a-days gives all the bridging functions  may be a good  cheap and efficient alternative  refer slide time  51.57-53.34  let us finally summarize the comparison between hubs  bridges  switches and routers * traffic isolation  bridges  routers  switches provide traffic isolation where as it is not possible in hubs because a hub is just a shared medium that does not give any isolation at all * plug-and-play  hubs  switches and bridges are plug-and-play devices but routers need some configuration so it is not a plug-and-play device * optimal routing  hubs  bridges and switches do not know about routing but routers can find the optimal route at any particular point of time * cut through  cut through means you start transmitting as the bits arrive a hub can cut through because it is a replacement of a passive shared medium  so whatever bit comes  gets transmitted so cut through is possible in switches also but bridges and routers have to wait for the whole frame and then inspect it through some routing table or bridging table so they are not cut through  refer slide time  53.35-54.58  finally let us see about virtual lans it is partition of an extended lan to logically separate lans  vlans   each vlan is assigned a color identifier and packets are forwarded only to vlans of the same color so we can use a bridge or a switch the different ports of a switch could be different vlans the ports belonging to the same particular vlan may physically be two different lan segments but logically they are in the same vlan suppose in one building  computer science is in three different floors and the same floors are also shared by say  the electrical engineering department each floor has a switch the computer science floors 1  2  3 are in same vlan or they are in one logical group electrical engineering in these floors forms another vlan this needs manual configuration but this is possible  refer slide time  54.59  why are vlans so popular today ? scalability is possible because broadcasts are now getting limited security and network management is better in vlan network management is decoupling physical topology from the logical topology as we have seen  two different lan segments could be in same vlan for example  a lan segment at ccb is to be switched from coc administration to ece administration we have finished our discussion on local internetworking next  we will see another emerging technology  which is becoming very important in the retailing business let us see about wireless technology in the next lecture thank you  refer time slide  55  52  55  55  lecture # 22 cellular networks we will start our discussion on terrestrial wireless networks we have already seen 1 kind of wireless communication which is through satellite it is a microwave repeater there are 2 very important and rapidly expanding fields in networking they are terrestrial wireless networking and wireless lan we will have 2 lectures on this the first lecture is on cellular networks and in the next lecture we will talk about wireless lans and a little of wireless mans today we will discuss about cellular networks  refer time slide  56  52-58  47  the cell phones have become ubiquitous nowadays what is a cell ? in the cellular network  the network is organized in the form of some cells and each cell covers a geographical region it has base station  bs  analogous to 802.11 ap ap stands for access point 802.11 is the wireless lan technology which will be dealt in the next lecture there is a base station and it will have an antenna and some transmitters and recivers and they are connected to the backbone through a line it is a wireless line but usually it would be a fibre optic line take this particular base station shown all the mobile stations or mobile users in the certain geographical location around this base station will communicate with this base station and through this base station to the rest of the network so mobile users attach to network through bs and air interface is the physical and link layer protocol between mobile and bs all the base stations are connected to the mobile switching center  msc   the switching is essentially done here the msc connects cells to wide area network computer networks prof sujay ghosh department of computer science and engineering iit kharagpur lecture name # 22 cellular networks  refer slide time  0  55  good day so  now we will start our discussion on terrestrial wireless networks we have already seen one kind of wireless communication  which is through satellites so it is microwave repeater and we know that but there are two very important and rapidly expanding field in networking  which is terrestrial wireless networking we will have two lectures on this in the first lecture  we will discuss cellular networks the cell phone  which has become ubiquitous nowadays and in the next lecture  we will talk about wireless lans  wireless lans are may be little bit of wireless mans also so  today we will discuss about cellular networks  refer slide time  01  49-04  29  so just right away  let us learn some jargons what is a cell ? the cellular network is organized in the form of some cells and it covers a geographical region it has base station analogous to 802.11 ap ap is for access point 802.11 is the wireless lan technology we will discuss about this in the next lecture anyway  the point is that there is a base station and it will have an antenna  some transmitters and receivers it will be connected to the backbone through a line may be this could also be a wireless line  but usually this could be a fibre optic line in a circluar geographical location around this base station  mobiles will communicate with this base station and through this base station to the rest of the network so mobile users attach to network through bs and air interface is the physical and link layer protocol between mobile and bs that is called air interface between the mobile and base station now all these base stations are connected to the mobile switching center  msc   the switching is essentially done over here the msc connects cells to wide area network the mobile switching center will be referred to as msc  base station as bs ,mobile switching center as msc  ms  by the way  is a mobile station msc connects cells to wide area network and manages call setup more about that later and these mscs will be connected to each other for a particular service provider they will also connect to public telephone network and the internet etc so one service provider  their network would be connected to another service provider ? s network so somebody from this network can call the other network and so on so we have the cells ; we have the base stations ; we have the mobile stations or mss we have the mobile switching center  msc  and of course the pstn at the back of it all this part is usually wired  refer slide time  04  30 06  20  the first hop ? we are now talking about the air interface between the mobile station and the base station there are two techniques for sharing mobile to bs radio spectrum there is certain radio spectrum  which is allocated to the base station and to the particular region that it has to be shared now  this is a question of multiple access and two techniques that we talked about earlier are fdma  if you remember this is frequency division multiple access  and tdma  time division multiple access in cellular technology  what we usually do is that we combine fdma and tdma so divide the spectrum in frequency channels and divide each channel into time slots if you say that these are the different frequency channels and each channel may be divided into number of time slots we will do fdma as well as tdma on this that is one kind of scheme ? the so-called gsm utilizes this we will be talking about how fdma and tdma are combined the other technology is cdma  which was designed by a company called volcom in usa  which uses code division multiple access we have already seen what code division multiple access is so we will not get into the details of cdma systems here cdma is another popular way of transporting data to the mobile devices both gsm and cdma are used in many countries for example  in our country also some service providers provide cdma services  and few offer gsm services  some provide both  and so on  refer slide time  06  24-07  19  we will now discuss cellular standards as they stand today historically  we had only the cellular system that came from some amps in usa previously  there was only one cell from the analog system from analog system  it came down to digital system in deamps and then we have these two systems of the 2g system ? one is the gsm system and the other is the cdma version 2g systems are voice channels  is-136 is tdma  combined with fdma  which is used in north america gsm  which is more popular of these schemes  is the global system for mobile communications it has combined fdma/tdma  which is most widely deployed is -95 is the code for cdma systems  which use code division multiple access so these are the 2g or second generation systems  refer slide time  07  20-08  23  there are 2.5g systems these were introduced because the 3g was promised quite some time back but the service providers really could not deliver it or crank it up to that extent but  there was lot of demand for it voice was alright with 2g  but then the demand for data and other kind of multimedia services etc  was increasing so people had to be given some data services instead of going all the way to 3g  people went to 2.5g 2.5g systems have both voice and data channels so  for those who can not wait for 3g services  there are 2g extensions one is gprs this is general packet radio services evolved from gsm and the data is sent on multiple channels if available it has an enhanced data rate for global evolution edge ; also evolved from gsm using enhanced modulation data rates up to 384k  refer slide time  08  24-09  11  cdma has its own version called cdma 2000  that was phase 1 ; then there was phase 2 also so data rates up to 144k evolved from is-95  which is the cdma system 3g system includes both voice and data  one service it provides is umts this is the name of the standard universal mobile telecommunications service  umts   gsm is the next step  but using cdma 2000 so  all these merge into the 3g systems how exactly this merging will take place and how it will actually be deployed and become popular remains to be seen ; but today you can get these data services on your cell phones  etc  refer slide time  09  12-09  46  the protocol layering for cells is a little different we will not go too much in to this one is of course  the physical layer  which has to do with the physical channels then there is mac  medium access control we will talk about it  at least for gsm so  there are these logical channels  transport channels  and then there is radio resource control layer that is the layer 3 particularly this you might say is a protocol  but this does not go all the way that the osi 7 layer this is just for the cellular systems  refer slide time  09  47-12  04  our idea is that we have some base stations and each base station will cover some geographical area like it has been shown here different bs would be connected through a backbone network or through mscs we are trying to get the basic idea of the cell the point is that  nowadays cell phones have become very popular its rate of penetration is much faster than the original telephones  and it is much faster than pcs also so  cellular phones have become very popular  which means a lot of people want to use it and lot of people have cell phones many of them would want to talk at the same time but how do you accommodate all these people talking at the same time ? we do multiple access but then  there is a limit to what you can do using same frequency spectrum the idea was to do some kind of space division multiple access in the sense that within one particular geographical area  we use a particular frequency band and then in another geographical area  which is far removed from there  so that these two do not interfere with each other  we use the same set of frequency band at the same time for a different set of users the point is that these powers have to be controlled because  if they are very powerful  they will start interfering with each other but if this power is controlled  then within that cell  that power is enough but  it is not enough to interfere with each other so  two different groups of users can use the same frequency band at the same time this is the basic idea of breaking up a region into cells so that you can increase the number of people  who would be using this system that is the basic concept of a cell  refer slide time  12  06-13  03  in practice  cells are may be of arbitrary shape but they will be close to a circle because usually the kind of antenna used in base stations is omni directional antenna  in the sense that it gives the same power on all sides it has the same sensitivity on all sides if that is so  the area of influence would be a circle but when many circles are put together they are pulling and they will intersect with each other to solve this problem  we can use a tessellation there are only three types of tessellations  which are possible ? equilateral triangles  squares or regular hexagons out of these three  the regular hexagon is the closest to a circle that is why usually the regular hexagons are used to represent a cellular structure a hexagonal cell  the closest approximation to a circle  is used traditionally for system design  refer slide time  13  04-14  27  this is how a big geographical area may have been divided into a large number of cells ? it looks like a beehive if you notice carefully some of the cells are dark and these cells are marked as a b c d e f g so  these are seven there are seven hexagons like this and these are actually different frequency ranges these frequencies are again reused for example  you have another a b c d e f g over here this b and this b ? although they use the same frequency ranges ? are far apart so  different groups of people can use it at the same once it gets into the base station  we usually take it to the fiber optic domain  where a large number of calls  simultaneous calls can be handled this really shows you the frequency reuse a  the set of frequency bands  which are associated with a  will also be reused here  here  and there and so on that is how a hexagonal cellular structure is constructed and we do this frequency reuse  refer slide time  14  28-14  54  co-channel reuse ratio is given by dl/rl = ? 3n  where dl is the distance between co-channel cells  that means those who share the same channel rl is cell radius ; n is the cluster size the number of cells in a cluster n determines the amount of co-channel interference and the number of frequency channels available per cell this really comes from geometry  refer slide time  14  55-16  29  when the number of subscribers in a given area increases  allocation of more channels covered by that cell is necessary what happens is that in one area  say a small town  one base station could satisfy people  who had these cellular phones or mobile phones now what happens is that  the number of people who wanted to use mobile phones kept on increasing and now we can not serve them any longer the number of requests  which are denied  keeps on increasing how can we increase ? may be break it up into two cells and then break it up into four cells and break it up into many more cells  depending on the clusters of users and the cells now  the same area has been divided into smaller cells may be in the bs  you decrease the transmitter power so that they do not interfere with each other so when the number of subscribers in a given area increases  allocation of more channels covered by that cell is necessary this is done by cell splitting a single small cell midway between two co-channel cells may be introduced  refer slide time  16  30-16  53  these are the small adhoc solutions to the problem for example over here  you had a large number of cells we created a small cell over here using a  which uses the same frequency bands as the already existing ones you can not use e  f  c  or b but you can use a with other cells so that is called cell splitting these are ad hoc solutions  when a particular area has more number of users  refer slide time  16  54-17  14  we now have a cellular hierarchy  the needs of which are  extending the coverage to the areas that are difficult to cover by a large cell ; increasing the capacity of the network for those areas that have a high density of users ; increasing the number of wireless devices and the communication between them  refer slide time  17  15 18  04  so  you have a large number of cellular hierarchies one set of them are called femto cells these are the smallest unit in the hierarchy so these cells need to cover only a few meters  where all devices are in the physical range of the users this is also called personal area networking so i have something in my left pocket  something in my right pocket and something in my hand these might communicate with each other so  that is personal area networking femtocells are small cells then we have picocells  the size of their network is in the range of a few tens of meters so  you can think of a small building as picocell for example  wlan  wireless lan    refer slide time  18  05-18  34  micro cells cover a range of hundreds of meters ; for example  in urban areas to support pcs or other technologies pcs is another kind of mobile technology macro cells cover areas in the order of several kilometers  for example  a metropolitan area  or may be a small town mega cells cover nationwide areas so  mega cells possibly are being serviced by a satellite  refer slide time  18  35-19  04  this is the picture of satellite  which may service a mega cell then  we have macro cell from this tower then we have pico cells  which have some access points etc inside a building and so on microcells for covering communication so these ways of different kinds of technologies may be deployed for these different ranges of cells  refer slide time  19  05-19  32  frequency reuse  we have already talked about this radio spectrum is one of the scarcest resources available ; because  there is so much demand for it for so many applications so  employ architectures that can support as many uses as possible  theoretically  with the available spectrum same spectrum can support multiple users separated by a distance and thus efficiently be using the spectrum  refer slide time  19  33-20  46  frequency reuse has its foundations in the attenuation of the signal strength of em waves with distance so  if two points are at a distance from each other  this signal gets attenuated and does not interfere significantly with this one  although they are using the same frequency band usually  what will happen is that the service provider will be given some band of frequencies now  he has to use that and can not stray from there  as that is the license agreement so  what he will do is that  is depending on where his users are  and what the distribution is  what the density is like  he has to develop or plan a cellular infrastructure in this fashion using and reusing this frequency  the same frequency band  here and there to give the maximum amount of service the distance separating the transmitters of this frequency reuse should be sufficiently large of course  this has to do with a transmitter ? s power transmit power should be reasonably small the cellular concept is an intelligent means of employing frequency reuse  refer slide time  20  41-21  21  so what we have been talking about is something like a fixed channel allocation that means for a particular cell  the channels  that means  the frequency band associated with the cell is fixed so  total number of channels is nc = w/b  where w is the bandwidth of the available for spectrum b is the bandwidth needed by each channel the total number of channels per cell is cc = nc/n  where n is the cluster size  refer slide time  21  22-21  53  adjacent radio frequency bands are assigned to different cells as shown in analog each channel corresponds to one user while in digital each rf channel carries several time slots or codes so  you are doing either tdma or cdma so  if you are doing this  the naturally fdma tdma combine or cdma uses spread spectrum technology so  it ? s simple to implement so  fixed channel allocation is simple to implement if traffic is uniform  refer slide time  21  54-23  24  but then  sometimes traffics are not uniform ? there may be two cells  which are side by side so  this has been given one band one has been given another band of frequencies they do not interfere with each other but  we find for each cell let us say  to start with  we are given with equal bandwidth to each of the cells now  i find that in one particular cell  the user density is much higher  whereas in adjacent cell  the user density is lower so  i could use some more bandwidth in this cell and i could do with a little less bandwidth here so  what could do is that  a part of this frequency band can borrow from the adjacent cell so  that is called channel borrowing technique high traffic cells borrows channel frequencies from low traffic cells temporary channel borrowing and static channel borrowing this could be a permanent feature or this could be the feature of a day for example  in the central business district  it might become very busy during the day time so  it may borrow channels from the side  whereas after the evening the use may fall drastically in that case  one cell can give out channels to others not only sort of giving channels to other people so  this could be static as well as it could be temporary  refer slide time  23  25-26  26  this is suitably complex picture of gsm  i.e the global system for mobile communications so  this just to show you how these tdma and fdma are combined so  you see there are 124 simplex channels in the gsm system now  each of the simplex channels actually carries a series of tdma frames and each of the frames is divided into 8 parts  that is how a large number of channels can be given there are two parts  one is the uplinking and another is the downlinking  that means  from bs to ms ? base station to the mobile station or from the mobile station to the base station so you have two different frequency bands for these ? one band for this bs to ms communication and another band for ms to bs communication in each band  there are a number of frequency channels and each frequency channel is again divided into so many slots  eight slots for simultaneous communication so this one and this one are same channels  but this and this are two different channels for a particular mobile station so from base station  it may be using this particular time slot in this particular channel  that is  from the base station to the mobile station the same one  from the mobile station to the base station  will be using another channel and actually another time slot  because there is some technical problem in giving the same time slot in this channel as well as the other channel so  you give it a different time slot over here so  in this particular time slot of this particular channel  the mobile station is communicating with its base station so  that is how it goes gsm uses 124 frequency channels  each of which uses an 8-slot tdm system and there is a frequency band at which it operates ; this is also fixed this is in the 959.8 mhz range you need not remember these figures  but this is the general scheme of the way tdma and fdma are combined together  refer slide time  26  27-27  15  suppose this is s1  t  and this is the signal which comes from source 1 and this is the signal from source n  sn  t   this is some other source what is happening is that in the tm slots  the first slot ? s1 ? gets the first slot and sn gets the nth slot so  they are pushed into this in the same frequency band  and as time progresses  they function just like in a tdma system so  this is the tdma part so  gsm = fdma 200 khz ; that is the gsm system  refer slide time  27  16 27  46  this is a portion of the gsm framing structure so  how they are framed ? actually  this is a somewhat complicated scheme some of these frames are used for control purpose and others for communication  one group for base to mobile and other from mobile to base  etc so  there is a scheme for this we will not go into the details of this  refer slide time  27  47-28  17  a gsm system has 124 pairs of simplex channels they are in pairs because one goes from bs to ms and the other from bs to ms each of these is 200 kilo hertz wide and supports 8 separate connections on it  using tdm so  each active station is assigned to one time slot on one channel pair 992 channels can be supported in each cell  but many of them are not available to avoid frequency conflicts with neighboring cells  refer slide time  28  18-30  16  transmitting and receiving does not happen in the same time slot because the gsm radios can not transmit and receive at the same time and it takes time to switch from one to another that is why different time slots are given a data frame is transmitted in 547 microseconds  but a transmitter is only allowed to send one data frame every 4.615 milliseconds  since it is sharing the channel with seven other stations the gross rate of each channel is about 270 or about 271 kbps divided among eight users this gives about 33 or 34 kbps gross cc i.e  control channels are used to manage the system if somebody is getting only 33 or 34 kbps previously  we have been talking about voice channel requiring 64 kbps now  the 64 kbps happens to be if you are doing a plain vanilla pcm that means we have explained  how it is encoded by sampling it at eight samples and eight levels for each sample ? that gives us 64 kbps the point is that  it is not the only coding scheme actually  there are more advanced coding schemes we did not find time to discuss those coding schemes using those coding schemes  good quality voice transmission can be achieved  using a much lower bandwidth this 33.854 kbps is actually enough  if you are doing your coding in a smart fashion  refer slide time  30  17-32  19  as i said  apart from the user channels  there are some control channels cc is used to manage the system the broadcast control channel  bcc  is a continuous stream of output from the base station containing the bs ? s identity and the channel status all mobile stations monitor their signal strength to see when they moved into a new cell the point is that the mobile station  when it gets these broadcasts from bs  by just sensing how much transmitter power it is getting  it can identify whether it is near this particular bcc  what this particular bs is  or what its identity is  or whether it is near some other bs in some systems like cdma  this power is very crucial even for decoding purposes that is one thing which is being broadcast and to listened by all the ms the dedicated control channel is used for location updating  registration  and call setup ; in particular  each bs maintains a database of mobile stations  which are in its area so  information needed to maintain this database is sent on the dedicated control channel so  the point is that these mobile stations are moving they move from one cell to another  from the vicinity of one base station to the vicinity of another base station so  the set of ms  which are now currently under this  that information in some schemes is collected on the side from time to time and there is a database  which is associated with the bs this is centrally communicated that is important for locating a person we come to that later on  refer slide time  32  20-33  33  and then there is a common control channel which has got three logical sub channels that is the paging sub channel  paging channel  in which the bs uses to announce incoming calls each ms monitors it continuously to watch for the call it should answer the point is that  if there is a call  and ms is in the area of some bs and then somebody wants to call to this ms  that one particular ms has to be alerted so  there is a paging for that ms from the bs and the ms is always listening to it so  whenever it hears the page for itself  it gets alerted so  the other is the random access channel this allows users to request a slot on the dedicated control channel if two requests collide  they are garbled and have to be retried later on so  this is the part of the call set-up so  it is the first part of call set-up it tries to put a request in the random access channel for a slot in the dedicated control channel when it gets a slot in the dedicated control channel  it can go away with the further steps of call set-up next is the access grant channel  refer slide time  33  34-33  51  in gsm the channel multiplexing is fdm + with eight tdm slots uplink is this much and channel bandwidth is200 khz so  dcs has certain frequency range etc  refer slide time  33  52-34  03  channels are broadcast and the channel rate is 13 kbps  refer slide time  34  04-34  42  we have already seen what cdma is ? it is based on ds spread spectrum  that is  the direct sequence spread spectrum it has two frequency bands  one for forward channel and one for reverse channel and one frequency band  a wide band actually that is shared that means it uses orthogonal codes by a number of handsets or number of mobile stations so  cdma allows use of same spectrum over all cells it also gives net capacity improvement although which system is better ? cdma or gsm ? is still not clear  refer slide time  34  43-35  40  there are certain issues in the cellular infrastructure  which have to be handled we will quickly discuss each of them the most important one is handoff because you may be talking on your mobile phone while moving  may be moving in a car so  what will happen is that  the car eventually will pass out of the range of one base station and move in to the range of another base station so  you have to hand off that means previously all communication from this mobile station was being handled by this particular base station  as it moves in to the area of another base station  this call has to be handed off from one bs to the other bs handoff changes of radio connection from one base station to another will happen but this not such a simple scheme and we will see why there are two types of handoff  hard handoff and soft handoff  refer slide time  35  41-36  33  this handoff has to be managed in order to manage the handoff  we have to detect that handoff requirement has arisen because the mobile station has moved and then you have to execute the handoff  in the sense that you have to do the channel assignment and you may have to do some path rerouting and there may be problems in this section also for example  when you move into a new cell  all the channels over there may be busy and so you may not have any extra channel  which has to be given to this ongoing call so  there are various schemes for handling ? may be you drop this that is the simplest thing to do  that you do not allow it or maybe you keep some guard channels specifically for these kinds of cases but this detection of handoff requirement is a troublesome affair  refer slide time  36  34-37  04  as i said  there are two types of handoff  hard handoff and soft handoff hard handoff is break before make this is used in gsm system ? that means you break this connection and set up the new connection with the bs in whose area you are moving ms connects to base station 2 after link with base station 1 breaks  and this is the region where the handoff will take place  refer slide time  37  05-37  57  the difficulties in handoff detection are the following the signal strength fluctuates this is a very challenging area of mobile system design ? the signal area fluctuates due to various reasons  scattering  reflection and diffraction results in fading there are fast fading and slow fading of the receiving signal there are false handoff requirements at the boundary ; there is a ping pong effect at the boundary that means what might happen is that it may hand off from bs 1 to bs 2  then again from bs 2 to bs 1  again from bs 1to bs 2 this kind of ping pong might be going on so  the number of unnecessary handoffs must be reduced because handoffs have a price paid  actually  keeping both channels busy on both sides there are other kinds of overheads to this  refer slide time  37  59-38  41  let us look at a very simple model actually the situation is much more complex because  there are number of base stations ? maybe three base stations and you may be equidistant from all the three at a particular point so  you may have an even more difficult problem but let us look at a simple problem suppose d is the distance between two base stations so  ideally we would like that the signal strength from bs1 is following like this and the signal strength from bs2 is going like this as you move from bs1 to bs2  as the ms is moving at the cell boundary  it just switches from bs1 to bs2 but the actual picture is something like this  refer slide time  38  42-39  44  this is the point is that the signal strength from bs1 is varying  very fast why does it vary ? i will just tell you i had just mentioned it  but i will tell it again this is varying like this the signal strength from bs2 is also varying like this so this has been plotted from  let us say  800 to 1200 region so  there is a solid region at least from 950 to 1050 there is a region of 100 m  where you really do not know who is stronger so the signal is varying all the time what might happen is that you might now decide to move from bs1 to bs2  and then you find that bs1 has become much stronger and bs2 has become much weaker so  it might switch from bs2 to bs1 and this might go on as a ping pong effect so  this is a very difficult problem  refer slide time  39  45 -41  03  and as i said  why is it that it varies in this fashion ? there are various reasons for this  one is that you are moving this mobile station is actually moving now whatever signal it gets  it may get some direct signal  it may get some reflected signal  it may get some scattered signal and all these signals may start interfering with each other so  actually what might happen is what is called multipath fading that means  the same signal may have arrived from source to destination through two different paths ? may be through two reflections ? and they may be out of phase because of the different distances  which may be allowed if they are precisely out of say  180 ? out of phase  then you are going to have distractive interference or they may be in phase ; they may strengthen each other so  in a very short span of time  as the mobile is moving  you may find a very largely fluctuating signal there are other reasons for this fading etc we will not go into the detail of this  refer slide time  41  04-42  21  so  there is a problem of handoff so  for the handoff decision there is various algorithms which have been proposed i will just mention them one is relative signal strength  which is the simplest first thing you will think that whichever is weaker  we leave that  and whichever is stronger it will chose that one so  choose bs2 if signal from bs2 is greater than the signal from bs 1 but as we saw  with just this  there may be lot of ping pong effect and lot of unnecessary handoffs you can use this same rss  that is  received signal strength  and some threshold base that means we choose bs2 if the signal from bs2 is greater than the signal from bs1 and the signal from bs1 is less than a threshold  which means that although bs2 is stronger  if bs1 is above the threshold  which is still working  then we do not do a handoff another thing is rss plus hysteresis  that is  received signal strength just being greater is not enough ; it has to be greater by a certain amount of hysteresis the hysteresis means base1 persists as the bs2 is becoming stronger in base 1 and then there are other kinds of other combinations people have tried for getting a good handoff decision  refer slide time  42  22-42  50  as i said  this hard handoff is used in gsm  whereas in cdma system  they use soft handoff this is ? make before break ? ? that means you make a connection to that coming in the next base station  before you release the connection with the previous base station so  ms connects to bs2 before connection to bs1 breaks this is called soft handoff  refer slide time  42  51-43  14  we will now discuss the merits and demerits of soft handoff merits are  mobile station does not loose contact during handoff ; the effects of ping pong are reduced ; and it is easy to implement for cdma systems the demerits are  it is a complex process so  hardware requirement is more and that means your hardware cost may also go up ; and it utilizes extra resource during handoff  refer slide time  43  16-44  22   43  16  now  we come to the question of mobility management how do you manage mobility in a local in a ms ? that is because  one of the very fascinating thing about mobile connection i have called somebody on the mobile  who i assumed is just local that is who is in the same area as i am it just so happens  that he is in a place far away he is visiting some place may be rajasthan or something ,as he is very far away now i will expect that the system would somehow locate him in rajasthan and then allow me to talk to him so  that is again a non trivial problem there are various approaches to this problem we will just once again touch on this so  this is called mobility management one is location management access point of a mobile station changes as it moves around the network coverage area and important for effective delivery of incoming cells and other is handoff management we have already talked about it  refer slide time  44  23-45  21  now  for location management  one approach through location updates that means messages are sent by ms that is a mobile station regarding its changing points of access to the fixed network so  that is to the fixed network  that is sort of time of time it tells that ok this is where some central database is updated each time the ms makes an update to its location a database in the fixed part of the network has to be updated to reflect the new location information so  that for a particular ms  if you go to the data base and find out what is the last point  where he said  that he was of course what he might have done is that he might have switched off his mobile and then moved to somewhere else and then put it on or something  so  put it on again so  that is not still solved all the problem 100 %  but this is one approach to solve it  refer slide time  45  22-46  26  the other this thing is the paging you know what is paging ? paging means that sort of broadcast it well broadcast means broadcast it everywhere we do not want to broadcast it everywhere so  you broadcast it only to certain places so what we do is that  we broadcast that there is a call for such so  that is what we page and if that paging is being done in a cell  where the ms is actually present and that the ms will respond  that is what will happen so  that is another scheme required to deliver an incoming message to the ms response from the paged terminal enables the network to locate the ms the other thing about location management is location information dissemination procedures to store and distribute the location information related to ms are serviced by the network that is the issues over that i am not going detail in any of these  as no time  refer slide time  46  27-48  03  and for the location update  you may do static location update that means initiation of location update is decided by the topology of the network and location area based location updates which is commonly used what a location area is and distance based  which performs location update after crossing certain number of cells or timer based  performs location update after a certain time has elapsed so  the question is that how frequently do you update this ? because  if collecting all the data all the time and just updating it all the time  that will consume an enormous amount of resources you have to optimize somehow that this is the point is that if we not doing frequently enough  your data in the database going to stay and then when you want to actually search for somebody  then you might have to search around a large area ideally what would you liked is that when a call is there for somebody  we know that exactly in that particular cell that mobile station is there so  we go and page over there he responds ok that is the idea but this idea will never work because  you can not keep it updated on all the time and you can not collect and keep all the information so  you have to do some kind of optimization over there  which means that you actually looking for one particular mobile you have to search not in just one cell  but may be in several cells so  that is where location area comes in that location area is collection of cells  we will come to that  refer slide time  48  04 49  02  the other is dynamic location update it uses mobility of the user and call pattern for location update so  if you know the mobility of the user and some call pattern etc  you may be able to predict that where this particular user may be it is more likely that he will be there so  it state-based  performs location update  based on the current state information such as distance travelled  the number of las crossed  etc or user profile based  which is more difficult  not exactly used at the moment maintains a list of las that is location areas that the ms located in at different points of that time usually so  usually during office hours i will be found in my office in that particular area so  that may be known and that may be a guess but then gathering this information and keeping this information for all users  this is not a mean task  refer slide time  49  03-49  58  so,this is the location area based location update so  as you see that a bunch of cells together form a location area so  this is the location area 1 containing 1 2 3 4 5 cells this location area 2 containing 7 cells and so on so  assign a location area identifier to a group of cells la 1  la2 bs broadcasts periodically la identifier so  it is enough to trying to fill a particular cell you are trying to fill it down to a location area so  bs broadcast it  whichever location it is in ms is required to listen for la identifier and make an update to the location if necessary drawback is once again  there may be ping pong effect this fellow is moving like this so  it going from location area 1 to 2,1 to 2 etc that is always the thing you can not eliminate this completely  refer slide time  49  59-50  22  location update in gsm la identity  that is it takes the location based approach identity is used for location updates la consists of a group of cells controlled by bsc and ms performs location update under 3  1  .circumstances upon power up  compares previous la identity with the one currently being broadcast if different  performs update  refer slide time  50  22-50  52   2  when ms crosses la boundary  performs update  3  after a predetermined period of time  performs update to ensure ms is available so that you do all the three things simultaneously so that would make sort of judgment about  what is this time interval  after which it will go automatically or of course  other two are simple  refer slide time  50  53-51  21   and then in for paging schemes  you can do blanket paging  that means when you know the location you just page everything all the cells paging in all cells within an la simultaneously if the la update is current  ms responds immediately advantage is minimum delay in getting paging response and disadvantage is it needs paging in all the cells within la equidistant from the current cells a timer is used to declare the ms is unreachable  refer slide time  51  22-51  39  all it could be that closest cells approach first page the cell where ms was last seen if not successful  page subsequent rings of cells that are so  this is all trying to reduce the overhead and give the maximum response time etc so,all these different schemes are there  refer slide time  51  40-52  52  and finally we will not go in to the details of these as i said that  now everybody want news on their handsets not only news they want to access  to the internet through the handsets  which means we will have to give some data service and that is why service providers also move from  noise  2g to 2.5g systems wherein from the gsm family it,the general packet radio system gprs and cdma to cdma2000 so  gprs is a really ? packet overlay ? network that means on the same network  there is a packet service  which is going on available frequency bands network on top of the existing gsm digital circuit switched voice based network so  it is tcp/ ip based the protocol based is same as the tcp ip which we will learn later it allows data packets to be conveyed across the mobile network using packet switching and it is ? always on ?  ? always connected ? type of thing and after initial ? log-on ?  user is permanently connected to the ip services  that is the gprs  refer slide time  52  54-53  22  instant access  no further log on and usually the rates also gives a flat rate user perceived performance  fluctuates  as gprs users defer to voice users   so  voice users have a preference so  because data may delay that is may be acceptable to a maximum of  noise  50kbps network resources only used when information ready to be exchanged bandwidth on demand so  more utilization of air time that is the gprs  refer slide time  53  23-53  52  so  this provides high speed frequency so  uplink is on the particular frequency band and downlink is on particular frequency band and these are all packet services which provide high speed packet data access this uses modified gsm hardware  different phones or cards  are required that is you have particular kind of set that handle gprs several time slots can be dynamically allocated to transmit a block of data so  if the packet is large  so several time slots may be used for that  refer slide time  53  53-54  25  the uplink channel is shared by a number of mobiles  and its use is allocated by a bsc  base station stream the downlink is of course fully controlled by the serving bsc and random access is not needed in the uplink of course multiple access will still because  so many people want to send the request for data the ms requests use of the channel in ? a packet random access message ?  the bsc allocates an unused channel to the mobile and sends a ? packet access grant message ? etc  refer slide time  54  26-54  49  cdma 2000 is once again is the cdma version of it increasing voice capacity once again this is always on peak packet data rate of 153 kbps which is quite high connectivity to ansi -41and gsm-map  which we need not to bother various bands and bandwidths of operation in support of different operator needs  refer slide time  54  50 55  58  it is expected that actually that  this cdma 2000 1x rtt is backward compatible with cdma1 system  which was the previous original cdma system improved service multiplexing and qos management and variable transmission rates and it is expected that in future what is going to happen is that  as data demand is definitely going to grow  so these will sort of move from these interim 2.5g system to the 3g systems i cdma is already being employed this is part of our big network architecture this converged network architecture  which is slowly emerging and in the next lecture  what we are going to do is that we are going to discuss wireless networking in the lan setup in the sense purely in this  we are talking about voice and voice added to data next  we are going to talk about data and may be data plus wires that is a separate issue thank you computer networks faculty name prof sujoy ghosh dept of computer science & engineering i.i.t  kharagpur lecture name # 23 wireless network  refer slide time  00  39  good day in the last lecture we had discussed about the cellular network and that end of wireless networking ; today we will talk more specifically about data networking and wireless lan  and may be wireless man and things like that actually there has been an explosive interest in wireless technology in just the last few years  and a number of different systems have come up it is not known at this moment what will finally stabilize  but the number of systems have come up and some of them of are on drawing board  some of them are on actual deployment so we will talk about just a few of them  the more important ones today  refer slide time  01  29  today we will talk about wireless networks   refer slide time  01  29  03  36  and specifically if i may say  wireless lan a lan means a local area network that works without wires  which means you do not have to wire up the whole place ; you do not have to have a wire coming into your system ; you can walk into a room with a laptop and you are already on the network but this has some peculiar problems ; we will discuss them this is not as easy since signals are of limited range unlike wired lan  if a can hear b and b can hear c  it is not necessarily true that a can hear c so this is a problem which we have to handle ; secondly in many of the cases  these wireless lans use unlicensed frequencies and low power low power is important because you want to have a small-sized cell so that in the another part of the building there may be another cell just giving services to another group of users as we know that this way  by doing space division multiplexing  we can increase the number of users who are on the network one of the most important lan standards today  wireless lan standard  is 802.11 and there are various versions of 802.11 the speed varies from 2 mbps to 54 mbps we will also talk a little bit about bluetooth  which is a personal area network we will talk a little bit about wireless man  which is 802.16 and just mention of few other emerging technologies  refer slide time  03  07  04  28  there are two modes of operation in a lan ? in the presence of a control module or a cm often called a base station ; just as we have a base station in case of a mobile  similarly here we can have a base station which  in 802.11 parlance  is called an access point or ap so we can have a base station access point or ap ; so we can have a base station or a control module and a number of users that is one mode of operation the other mode of operation is a rather ad hoc network ; that means  we just have some peers there is a peer to peer connectivity and there is no central module so applications could be lan extensions  cross building interconnect  or nomadic access ; that means some body just moves in and gets immediate access to ad hoc networking  refer slide time  04  30  04  42  these are the two modes of operation ? in one we have a base station  which is controlling them this is slightly easier to handle than complete peer to peer ad hoc network  refer slide time  04  43  05  23  what happens is this control module or this access point in the case of 802.11 could be connected to a wired network so that all those stations  which are connected to the control module via wireless link  get connected to the entire network so they may connect straightaway to individual pcs or they may connect to some network hub or switch they may connect to a server and a number of lans so this is the picture of a single cell  wireless lan single cell ? w lan ? and we can have multiple cells of w lan  refer slide time  05  25  05  50  in each of the cells we will have a control module  which will serve some of the user modules you may note that there may be a region where it is possible to connect to either of the cms also that is something the user module will have to handle  refer slide time  05  51  07  33  now we will look at w lan requirement this is some kind of a wish list actually ? what all we would want from wireless lan good use of bandwidth is we want ? high throughput ? every body uses a number of nodes ; it should be large  may be in the hundreds a good connection to lan backbone is required because nowadays just a local network by itself is of limited utility since every body is getting use to be connected to the entire network meaning the internet even all the time so the backbone connectivity is also important ; good service coverage ; ok i mean wherever i am i would like to be connected so this to be a good service coverage or range ; minimal battery power consumption this an important issue in any kind of mobile system because if the battery consumption becomes high  either you have to carry heavier batteries or you have to charge them often so that is not good so we want minimal battery power consumption ; transmission security and robustness ? this may be an issue in many cases ? because you know so in a wireless system the medium is of course open to every body alright including snoopers if any so but you would like your communication to remain somewhat private or protected and in some cases that may even become crucial so we want security and robustness ok and some colocated network operation  refer slide time  07  35  09  15  license free operation  this is another important issue for example  the ism band consists of industrial  scientific and medical bands of frequencies which are free ; there is no license on it that means operation with the unlicensed band is important because then whoever can develop a good system can go ahead and compete in it  and that way the world technology improves fast then people also get cheaper and better quality service that is why ism band is generally preferred ; but it is not that in a wireless network  we always stick to ism band cell hand-off and network roaming  this is another thing we would like to have this is some kind of a wish list ; that is  not all of them are achieved 100 % today  but these are the kinds of things we would like to have  like cell hand-off and network roaming just as in voice network we can roam from one cell to another and our call remains online  similarly in network connection  we would like them to remain online when we move from one cell to another so we require dynamic management  adaptive mac address management  dynamic and automated addition  deletion  relocation of end systems without disruption and then we require a choice of physical solutions ; for example infrared spread spectrum  narrow band microwave  etc  refer slide time  09  16  10  22  as i said there are a number of standards that came up ; here i am just showing some standards in the 802.11 family then there is an 802.15 family ; 802.16 ; and so on this is just one of them 802.11 originally was a 2.4 ghz ism band and used fhss  which is frequency hopping spread spectrum  with 1 ? 2 mbps speed or direct sequence spread spectrum  dsss had 1 or 2 mbps  and then slowly it graduated and then it fell over to three standards  802.11b  which is the most earliest and the most common one ; it was followed by 802.11a ; and 802.11g these two are in the 2.4 ghz ism band  whereas this one is in the 5 ghz ism band  refer slide time  10  23  11  14  we will not go in to the details of all these and what exactly are their differences  etc today what we are trying to do is that we are just trying to get a general idea  because there are too many standards 802.11 lan architecture  by now we know that we will have an access point  which is connected to a hub or a switch or a router this is in one cell ; this is another cell so cells may be called a basic service set  also known as cell in infrastructural mode  it contains wireless hosts ? so these are the wireless hosts it contains an access point in an ad hoc mode  there will not be any access station  so they will all be connecting to each other in a peer-to-peer module  refer slide time  11  15  11  46  and in the physical layer in 802.11 family itself you see that there are so many techniques that are used ? fhss  which is frequency hopping spread spectrum ; direct sequence spread spectrum ; orthogonal frequency division multiplexing  ofdm  ; hrdsss is another one ; ofdm and so on above this we have the data link layer  that is  the llc and the mac sub-layer  and above that we have the upper layers  refer slide time  11  47  12  59  so we do not have the time to go into the details of the physical layer technologies  like  how exactly the multiplexing and multiple access is done  but this is just a very broad and high level view of the system we have the input data  which is encoded so that is a channel encoder ; it uses either fsk  that is  frequency shift keying  or phase shift keying  fsk or psk there are other variations of this we will just get a feel of this this feeds into a modulator and then there is a pseudo random pattern generator on the receiver side this is on the sender side  similarly there is a pseudo random pattern generator on the receiver side and these two are synchronized so this modifies the main carrier  and it then goes into the air or whatever the medium ; then it arises at the other end  plus some noise is also added to it  where it is demodulated and it is decoded and then we get the output data  refer slide time  13  00  14  58  now how do we ? glossing over the physical layer ? how do we handle the multiple access of an 802.11 ? it avoids collisions ; that means  we know that when two or more nodes are transmitting at the same time  their signals will collide  and we will have a collision so 802.11 tries to avoid collision it does csma ? if you remember csma is carrier sense multiple access so it does some carrier sensing ; it senses the channel before transmitting of course it does not collide with the ongoing transmissions by other node  but it does not do any collision detection and the reason it does not do any collision detection is that if it has to do collision detection  first of all what would happen is that not all traffic is apparent to all the nodes in the network due to various reasons it could happen so that is one reason that even if there is a collision and if you are doing collision detection  you may not be able to detect it at all so that is why the stress here is not to do collision detection like you do in a wired lan like ethernet  but to avoid the collision alright so it is difficult to receive sense collision when transmitting due to weak received signal and fading etc and it can not sense all collisions in any case ? hidden terminal fading so goal is to avoid collisions so this is called csma ca instead of csma cd we have csma ca that is csma with collision avoidance  refer slide time  15  00  15  58  so this is a diagram which shows you this problem about hidden terminal for example  we have a  b and c now b can listen to c ; a can listen to b  that means  a b can communicate with each other ; b c can communicate with each other ; but between a and c there is some kind of an obstacle so a and c can not communicate with each other even if there is no obstacle like this  the situation could be something like this suppose this is a ; this is b ; and this is c now at the point b  a and b have fairly high signal  whereas at c  a signal strength is very low ; similarly at a  c signal strength is very low some of the terminals may be hidden from some other terminals this is a problem ; that is why our mac protocol is designed to handle  refer slide time  16  00 ? 18  29  situations like these this is a mac overview ; we have a number of boxes here i will not go in to all the details like radio management ; power management ; management information base ; this is for network management ; there is an addressing ; there is a security part  like shared key and association management ; similarly there is a fragmentation of large frames and so on we will not look into all this ; we will just mention that for addressing we use the similar 48-bit mac address  which is ethernet compliant you remember that the ethernet address or the hardware address or the mac address that we talked about when we discussed ethernet  is a 6-byte or 48-bit address and 48 is of course a very large address space ; that means 248 is 256 trillion  which is a very large number so there is no shortage of addresses so a bunch of addresses may be given to these the same kind of 48-bit addresses are used for this also making it ethernet compliant has its advantage because ethernet is just another ubiquitous kind of network another point is that we have an acknowledgement request kind of a system  where some frames and some fragments  etc are acknowledged so if the acknowledgement does not come we have retransmission we also have some error correction ; and radio link security ; data authentication ; data encryption ; simple scrambling ; or peer-to-peer  etc we will not be discussing these as do not have the time in the radio link  there is a question of quality of service there is this csma ca ? we will look into this channel access mechanism in some more detail dedicated real time support systems are also there ; they are with pcf so there are actually two mechanisms  which may be simultaneously present in the same system ? dcf and pcf ? we will be talking about these the standard provides two modes of  refer slide time  18  36  19  33  operation  dcf  which is mandatory that means every 802.11 system has to be following dcf at least so it is a best effort service that uses csma ca ; that is  csma with collision avoidance and there is another mode  which may optional  which is pcf this is a base station this is a distributed control function and this is a point control function this base station controls access to the medium and uses a polling mechanism with higher priority access to the medium so actually  if pcf is there  what pcf can do is that actually pcf can take precision so for dcf  it can give some guaranteed kind of service or quality of service to some users there are three different types of frames  data frames  control frames  and management frames  refer slide time  19  35  20  09  so one is the point coordination function which is pcf the other is the distributed coordination function which is the dcf ok so and how i mean which one you are using may be you are not using pcf at all so that would be a network administrator ? s choice so the if you are using pcf that would give you some contention free service whereas if you are using dcf you are using a service where there may be contention of course you can use pcf and dcf at the same time alright  refer slide time  20  11  22  10  so how does the protocol work ? from the sender ? s side it senses if the channel is idle for difs difs is the period of time which can be configured ; it then transmits the entire frame so it just can not send some thing as soon as the channel is idle ; it has to wait for at least difs amount of time and it does not do any collision detection how does it know that there will not be any collision ? just because you have waited for difs amount of time does not mean that there will not be any collision ; there may still be collision because somebody else may also be listening to the channel waiting for difs amount of time and start transmitting  and you are not doing any collision detection the point is that you will not get an acknowledgement unlike the ethernet system  where there is no acknowledgement  this is an acknowledgement based system so you will get an acknowledgement ; if you get the acknowledgement you know that there is a collision and if you do not get an acknowledgement you know that there is a problem  so you retransmit if  on the other hand  you sense the channel to be busy  then you start some random back-off time  similar to ethernet where you do binary exponential back-off  etc we start random back-off time the timer counts down while the channel is idle  transmits when timer expires if there is no acknowledgement  we increase random back-off interval and repeat step 2 this is the way system works  if there is no acknowledgement  it means that it has not succeeded so you increase the back-off time and repeat another reason why collision detection is not done in wireless network is that for many of the radio systems  it is difficult to do transmission and reception at the same time so collision detection means you keep on doing collision detection while you are transmitting you just keep on listening whether it is going through or there is some garbled message in the medium but that is difficult to do in many systems ; so that is another reason why cd is not done in the receiver it is simple ; if it gets the frame then it returns the acknowledgement  refer slide time  22  51  23  23  sifs is another time interval  which is defined so after some time  it will send the acknowledgement acknowledgement is needed for the hidden terminal problem so there is the sender ; there is the receiver ; and suppose after difs amount of time the sender has sent some data  the receiver has received it after sifs amount of time  it sends back the acknowledgement  refer slide time  23  26  24  48  there is another scheme which uses this rts cts exchange suppose a wants to communicate ? this is the ap and this is b ? so a wants to communicate and let say b also wants to communicate so a sends a request for transmission ? it is just a reservation request b also sends the reservation request at the same time  and there is a collision since there is a collision  none of them will get it actually they will get it by some signal from ap as we will see after some time a may be sending the request again and may be it is has gone through ; so once it goes through ap will issue a cts that now cts a can be sent and please note that cts a not only reaches a it also reaches b and since now b knows that it has been reserved by a  b will back off or defer for a considerable period of time b will defer for quite a bit of time and a will send its data  then a will get its acknowledgement this is an rts cts based scheme  refer slide time  24  49  25  53  this is another example a wants to send data ; so it sends an rts and gets a cts from b a can now send the data by the way  this rts and cts have been detected by c and d also  so what they do is that now they know that somebody is communicating so this nav or network allocation vector it automatically puts itself off this is a very polite kind of system so it automatically puts itself off till it gets the acknowledgement a wants to talk to b  c is in range of a  but d is in the range of b that is why the nav of c starts here  whereas when b sends a cts meant for a  then d catches it and starts it own nav that means it starts its own blocking time ; this is called virtual channel sensing  refer slide time  25  55  27  17  now just to mention how this point coordination function and distributed coordination function work at the same time ? the pfc and dfc ? and why we use difs and sifs ? these two periods of time in difs there are actually three time intervals  which are configured this is difs ; this is pifs for point control function ; and this is sifs please note that when the medium is busy  after that if somebody wants to send  he can not send immediately he has to wait for difs amount of time if pcf is also operating at the same time and pcf wants to send something  pcf has to start doing that within this pifs amount of time so somebody wanted to send and is waiting for difs ; when he gets this  when the pcf grabs the channel  then this other node will defer for a longer time and there is an sifs  after which acknowledgements are sent and after this difs  there is a contention window where there may be a random back-off and the next frame is sent  refer slide time  27  19  28  17  suppose this was the previous frame within sifs  the acknowledgement and the control frame and next fragment may be sent here ; so either acknowledgement or control frame or next fragment is sent here pcf  frames may be sent here that means after pifs amount of time  the pcf or point coordination function will grab the channel if pcf has not done that  then after difs amount of time  it can be distributed ? that means anybody can try to send anything there is another time which is called eifs  for bad frame recovery so sifs is for short inter frame spacing ; pifs is for pcf inter frame spacing ; difs is for dcf inter frame spacing ; and eifs for extended inter frame spacing these are the different kinds of spacing this way this pcf and dcf can work at the same time another point is that if you have a very large frame  there may be a problem in the sense that  refer slide time  28  38  29  45  if a large frame becomes garbled  a large frame has a larger window  where it puts off every body so for better throughput  it may be a good thing to break up a large frame into smaller fragments after an rts cts  it may send as one small fragment ; then acknowledgement fragment to an acknowledgement ; and so on the other thing is that a large frame is more likely to beget errors and if you just do the calculation  you will find that if you break it up  there may be orders of magnitude difference between the error probability of a large frame and a small frame so overall  your throughput may be much better and in an especially noisy situation  your throughput may be much better if you send smaller fragments for smaller fragments  first of all you can do some error handling locally  and you can handle it ? that is one thing secondly  for a large frame  the probability of error is much higher  refer slide time  29  46  32  09  we will discuss just a little bit about the 802.11 frame addressing if you remember  in an ethernet  we had two addresses  the source address and the destination address here  actually very surprisingly  we have four addresses and just to show you why  address 1 is the mac address of wireless host or ap to receive this frame so this is the destination  immediate wireless destination  that is  wherever you want to land up on this wireless link address 2 is the mac address or wireless host or ap transmitting this frame this is the source address  so to say now the point is that  after all  quite often what you want to do is that you are not always interested in the technology used for this wireless transmission you are trying to connect to a network  which is in the outside world so this is what will happen ? this access point will connect to a router  or it may connect to a lan and that lan may be connected to a router so basically what you have to do for going out of this network altogether ? that means not only this wireless part of the lan or the wire part of the lan ? you will have to know the mac address of that particular port of the router  which you want to reach as a next stop then the router will decide to go next so the mac address of that router must also come from the source itself so address 3 is for that mac address of router interface  to which ap is attached and ap may be attached to a lan and it may have multiple addresses address 4 is used only in ad hoc mode ; we will not discuss it there these are the four addresses ; yet another thing is the payload the payload is from 0 to 2 kb these are all in bytes  all mac addresses are in 6 bytes ; mac addresses are 18 bytes just for 3 addresses ; and for 4 addresses it is 24 bytes  refer slide time  32  10  32  33  so this is the picture ? originally we had a just the routers  mac address and ap mac address these two ? destination and source address ? when you are sending from a wireless host the ap mac address  the host mac address  the router mac address are address 1  address 2 and address 3  refer slide time  32  36  33  25  let us now talk about the other fields ? there is a duration of reserved transmission time in the rts cts system that we were talking about  and that we showed you there is a duration of reserved time then there is a sequence control ? this is the frame sequence number for reliable arq since you are doing acknowledgement with retransmission request  you require a 6-sum sequence number for that window we have discussed this and now we have a sequence control number over here then of course  there are other fields it could be frame type ; it could be rts type ; cts type ; or the acknowledgement data subtype we need not go into all of these  refer slide time  33  27  34  23  and then we talk a little bit about the mobility within this  because whenever we are in wireless we want to be mobile if we are going from one from under one ap to under another ap  that means from one bss to another bss there is the basic service set that is from one cell to another  so what the mobile host we will do is that it will sense whoever is stronger and he will connect there so there is some chance of confusion in this but since he handles it  as he moves he will connect from ap 1 to ap 2 but this is assuming that these two aps are in the same network if these two aps are in different networks  then the situation is a little more difficult and we can not handle it at this layer  refer slide time  34  25  37  00  directly we have quickly covered 802.11  which is the most common kind of wireless lan that we see today in many places  we have 802.11 ; actually in some places they are also called hot spots that means this is under some ap  so that if a person is in that hot spot he can connect to the network and there are some campuses  at least some places  where a large number of aps have been deployed so that you are continuously ? wherever you are in that whole campus ? always in the network that is one kind of system  that is  802.11 next we come to another kind of wireless systems  namely wireless man ; that means wireless metropolitan area network what we want to do is that we want to connect an entire metropolis with this ; obviously this 802.11 is no longer sufficient first of all  the power is low actually in 802.11  in order to handle more number of users  we keep the power low so that we have smaller sized cells  etc  but in this metropolitan area network there will be many users in the same cell ; working in that 2.4 ghz ism band will not be sufficient any more so we have to go for a much wider range of frequencies  and for this  we need to go to a higher frequency in the so-called millimeter wave region millimeter wave means when the wavelength is at the millimeter order there is a standard for this wireless man ; this is called 802.16 what we might do is that we might have a large tower because these millimeter waves usually travel in straight lines so what we have to do is that we have to have a line of sight to the base station we have to have a large tower so that everybody can be on the line of sight  and these different base stations may be connected through a wired network  or this base station would be connected to the general network through may be a fiber optic line or something  refer slide time  37  02  37  44  this is the 802.16 protocol stack ; this is orthogonal phase shift keying or quadrature amplitude modulation qm 16 or qm 64 we are not going into these or the different kinds of modulation techniques  which are used there is a transmission convergence sub-layer ; that means how to handle it from here ? once again we do not bother about this we will just talk a little bit about the mac sub-layer common part and the service specific convergence layer we will just talk a little bit about it as i said  so many systems are coming up these days that it will not be possible to handle all of them this is  refer slide time  37  46  39  03  just the frame format there may be a data frame and the control frame the control frame is the bandwidth request frame there is a connection id ; this binds the end points to the system there is a connection id  through which any particular system would get a chance to communicate the first bit defines if it is a data or a control frame ; if it is a data frame  the first bit is 0  if it is the control frame  the first bit is 1 then it says whether the payload is encrypted or not ; 1 or 0 type is the type of the frame there are management frames and things like that ; so c1 is the check sum there is a check sum indication key that is used once again  we need not go in to all the details but it uses crc error correction so header is the header portion ; for the header portion there is a crc and the data connection id etc basically the access to the medium is controlled through this connection id  refer slide time  39  04  39  00  there are different service classes  which are defined in this  one is the constant bit rate service for voice real time ; variable bit rate service  this is a vbr  ; rtvbr or a non-real time variable bit rate service  that means  nrtvbr  for high quality data ; and for ordinary data  email  http  etc  this is the best efforts service there are different service classes in 802.16  and all these are possible because here the mac is simply controlled by the base station the key architectural principle  refer slide time  39  53  41  09  is traffic control by the base station the base station controls the traffic totally it creates frames of time slots and allocates timeslots to connection ids so time slots are allocated by service class this means that if there is a constant bit rate service  what the base station would do is that in every frame it is going to allot one or more slots to this constant bit rate service  so that it gets constant rate updates so whoever reserves or requests that constant bit rate service  if he is not using it at any particular point of time  then it is going empty that is why he has to pay higher for this constant bit rate service similarly there are variable bit rate services  and finally  with just a slightly higher priority than the non-real time one and just the available bit rate service  whatever else is left may be given to those connection ids  which are only getting available bit rate service these are just  refer slide time  41  11  42  07  pictures showing frames and each of the frames will have some slot there are some guard times between the frames some of the slots are reserved for upstream traffic  whereas some of the other slots are for the downstream traffic quite often  what happens is that in this metropolitan area networks or in many networks  the downstream traffic turns out to be much higher than the upstream traffic we all know  for example  if you are surfing the net  which is a very popular activity  you just send one request  which is a very small thing  and in response to your http request  a large page with a lot of graphics  etc  may be downloaded so the downstream traffic turns to be much larger there is a lot of asymmetry here ; that is why there are a few upstream slots and a lot of downstream slots  refer slide time  42  08  42  55  so frames and time slots are for time division multiplexing or duplexing actually it is for time division duplexing  because both upstream and downstream traffics are given some slots duplexing means it is going in both directions base station allocates time slots in frames to connections there are some connection ids  and to a particular connection id  the base station may allocate time slots cbr as i said  constant bit rate services  are of the highest priority rtvbr  that is  real time variable bit rate has the next highest priority ; nrtvbr has the third highest priority this can be delayed and anything remaining is the best efforts contention based access of unallocated timeslots to other kinds of traffic this is how it is done next we move on to  refer slide time  42  56  44  55  another end of the spectrum first we talked about wireless lans ; that means 802.11  and as i mentioned  it has a lot of variations like 802.11 a  b  g  etc so 802.11 is the lan side then we talked about man  metropolitan area network  and now we are going to the other end of the scale  which means very small networks  let us say  personal area networks that means a small area is covered under a network ? between whatever i have in this pocket and this pocket  and my in my hand we will talk about one thing  which is quite popular  namely bluetooth  which is 802.15 so 802.15 is for the personal area network group ; 802.11 is for local area network ; .16 is for metropolitan area network ; and .15 is for personal area network this is less than 10 m in diameter ; so you see this is very small it has a replacement for cables  mouse  keyboard  headphones  etc so whatever i am using may be replaced by wireless links ? that was the idea this is ad hoc ; that means there no infrastructure is necessary this works with the idea of master and slaves ; that means slaves request permission to send to master  and master grants the request so in any such cell or radius of coverage  there will be a master and then there will be some slaves m is the master device  s are the slave devices  and p are the parked devices that means these are inactive at the moment  so they are called parked devices in bluetooth  refer slide time  44  57  46  52  so bluetooth and 802.15 are almost the same there are some small differences  but this not very important it operates in the 2.4 ghz industrial scientific  that is  ism band  and is unlicensed  packet switched  and 1 milliwatt this is a very important issue ? that this uses a very small amount of power as opposed to  let ? s say  500 milliwatt for a cell phone this is low cost ; that means up to 10 m to 100 m range and uses frequency hop spread spectrum ; so fhss is used we will see what kind of an fhss  which divides a frequency band into a number of hop channels  is used during connection  devices hop from one channel to another 1600 times per second ; so you see it is hopping the frequencies very fast so that is one good thing because if some part of the frequency band has noise  it has got better noise immunity because it is hopping such a large number of times there are a large number of channels ? why a large number of channels ? we are talking about a personal area network ; but nowadays i may be using so many different gadgets  etc  when i am using my pc  i may be having a cell phone ; i may be having a laptop ; i may also have a desktop in front of me each of them will have a mouse and all these peripherals ? let ? s say it has a monitor and all these peripherals may be connected in some way through wireless so there may be so many things ; altogether about 79 channels are possible in bluetooth and so they go on hopping in the frequency  refer slide time  46  53  47  28  bandwidth is 1 ? 2 mbps ; we are not looking for a very large bandwidth over here  but this is just more for control and function rather than downloading files it supports up to eight devices in a piconet what is a piconet ? two or more bluetooth units sharing a channel is called a piconet it has some built-in security line of sight transmission through walls and briefcases because of the frequency band which it uses it uses integration of tcp/ip for networking  refer slide time  47  30  47  54  so piconet is a small area network it is ad hoc  which means that a network with no predefined structure there is no predefined structure ; it is based on available nodes and their locations ; it is formed and changed in real time as you can see  these networks are being formed and being changed in real time ; so they may be changing all the time  refer slide time  47  56  48  38  the basic connectivity is point-to-point ; that means from the master to the slave piconet is point-to-multipoint master multiple slaves ; two or more piconets can be connected to form a scatternet by the way  how does a piconet start ? anybody can start it and claim himself to be a master  and the other devices  which are coming in later  will become the slaves so anybody can start and become a master this is one piconet ; this is another piconet ; and they may be connected the two piconets may be connected to a scatternet if you want to have a scatternet  then we have to have a bridge from this piconet to this other piconet so we have a bridge slave  refer slide time  48  39  49  26  so 802.15 version of the bluetooth protocol architecture ? these two are slightly different  but we will not bother about it we have the application profiles ; then we have the physical radio base band and the link manager link manager means the radio link manager  and then there is a middle layer  which is the service discovery  telephony  rf communication  and so on once again  we do not have the time to go into the details of this the idea is that you can switch from one kind of service to another kind of service  depending on the context and situation  refer slide time  49  27  49  38  this is a more detailed picture of the different kinds of protocol let us skip this also  refer slide time  49  39  50  29  in the physical layer  it has 79 channels  each 1 mhz  using frequency shift keying with 1 bit per symbol so it comes out to about 1 mbps per channel of course  this is 1 mbps the individual devices finally do not get a 1 mbps throughput for the payload part  because the efficiency is quite low much of the 1 mbps is taken up with protocol overheads caused by the frequency hopping so this takes about 250 to 260 micro seconds needed to stabilize the radio after the hop so this leaves about 366 bits for actual data  of which 126 bits are headers  leaving only 240 bits for data per slot so what was supposed to be 1000 bits has become 240 bits but for small devices  which are getting locally connected to each other  even 240 bits per second kind of speed may be more than enough but so many different channels are possible ; 79 channels are possible this is just a little bit about the bluetooth frame structure ; we have the access code  and then the header  and then the data  refer slide time  50  49  51  16  and the header will contain the address type  etc  and some flags and some checksum ; also it is an 18-bit header it is repeated three times for a total of 54 bits the access code identifies the master to its slaves ; one master and upto seven active slaves some slaves are in parked mode  refer slide time  51  17  51  28  so these are the system blocks  we have a bluetooth radio ; a bluetooth link controller ; and a bluetooth link manager  refer slide time  51  29  52  00  so two physical link types have been defined  one is synchronous connection oriented link ? between the master and a single slave for audio and data ? and the asynchronous connectionless acl link  point-to-multipoint between the master and all those slaves on the piconet for data only this is for data and this is used for others if some voice channel is there  you can get a synchronous connection oriented link there so that you get acceptable quality of service  refer slide time  52  08  52  24  multiple access scheme is based on fh cdma  that is  frequency hopping cdma high speed of hops and code division multiple access offers the best properties for ad hoc radio systems as i said  79 hop carriers have been defined at a 1 mhz spacing  refer slide time  52  26  52  58  the bluetooth has been designed to allow a large number of independent channels  each channel having only a limited number of participants theoretically  the spectrum with 79 carriers can support 79 mbps  but as we have seen  the efficiency may be something of the order of 25 %  so it will be much less than that different channels have different masters and therefore  they also have different hopping sequences and phases  refer slide time  52  59  53  38  by definition  the unit that establishes the piconet becomes the master as i said  anybody can start a piconet and become his master in bluetooth  the master implements centralized control ; once again we do not try to do any distributed control it is a small system so we do a centralized control by the master communication is possible only between the master and one or more slaves  which means that the slaves do not communicate with each other directly it has to go through by the master the master unit schedules the traffic in both the uplink and the downlink  refer slide time  53  39  54  08  there are various types of error corrections  which are possible this includes both fec and packet retransmission schemes at the base band level bluetooth makes use of three types of error correction schemes  one-third rate fec  sending three copies of each bit with a majority logic ; two-third rate fec  a form of some kind of hamming code ; or automatic repeat request or arq so this is the error correction scheme that is used  refer slide time  54  10  55  54  just now we have talked about three different ends of the spectrum i will just mention one or two more  just to show that there are all kinds of other possibilities for example  after this bluetooth became somewhat popular  there was a group who wondered why not make the radius of operation of this even smaller but here the main emphasis would be on long battery life  so that you put a small battery in a small device and it will just work till the battery ? s shelf life is over it will have a very low power we have the 802.15.4 similarly  there is an 802.15.2 and 802.15.3 we are not covering any of them ; this is just to give you a feeling of the kinds of things  which are going on 802.15.4 is a simple packet data protocol for low rate ; it has no quality of service ; has wireless personal area network ; is a low power  low cost  device so low power and low cost are the most important things naturally you will get low rate also  but for many applications  this may be quite fine the channel access is via carrier sense multiple access with collision avoidance  and optional time slotting it has message acknowledgement and an optional beacon structure ? beacon means the signal  which may be sent centrally to synchronize other systems so three bands and 27 channels are specified  2.4 ghz and 16 channels ; 868.3 mhz and so on  refer slide time  55  56  56  37  it works well for long battery life ; it has selectable latency for controllers  sensors  remote monitoring  and portable electronics for example  a sensor just stays there ; it is supposed to do its work  which is sensing  and may be send little bits of data from time to time so it has a low rate  no quality of service guaranty  etc is required  but low power and low cost are very important that is the focus of this particular group it is configured for maximum battery life ; has the potential to last as long as the shelf life of most batteries  refer slide time  56  40  56  59  so mac uses 64-bit ieee or 16-bit short addresses  using local addressing that means  if it is just locally  you can have your own 16-bit or you can use the full 64-bit ieee address ; it has a simple frame structure  reliable delivery of data  etc  refer slide time  57  01  57  29  so as i said  there are two channel access mechanisms  one is the non-beacon type  where it uses a standard aloha with csma ca  that is collision avoidance  and positive acknowledgement ; or we can have a beacon enabled network  where it is synchronized it has a super frame structure for dedicated bandwidth and low latency setup by network coordinator to transmit beacons at predetermined intervals  refer slide time  57  30  58  14  let us now compare quickly between 802.15.4  which is the low rate and low power one  and 15.1  which is the standard bluetooth  it transmits smaller packets over large network and larger packets over small network they are mostly static networks with many infrequently used devices this is an ad hoc network  which is more dynamic you can do things like file transfer here  which you do not look forward to doing here this may be used for home automation  toys  remote control sensing  etc this may be used for screen graphics  pictures  hands-free  etc so this is a somewhat different niche of application  which is the two groups  but both use wireless with different emphases  refer slide time  58  15  58  55  as i said  there are many standards ? i just listed some of them there are many more  which i have not put over here  802.11 b  which gives 11 mbps ; a  which gives 54 mbps ; g  which gives 54 mbps  but this is backward compatible with b  because b was the one which was most widely deployed in the beginning 802.16 is for a man ; bluetooth has about 30-feet radius ; we have talked about gsm gprs when we talked about cell phones ; it is going to 3g people also talk about of 4g  but nobody knows when even 3g will actually get widely deployed we have just seen uwb  and there are so many others  refer slide time  58  59  59  06  the one last point is that if you have a wireless lan  you would want to have a bridge for connecting the tcp/ip stack  etc we will talk about tcp/ip later on to transmit from one to another  we require a bridge in-between this wlan may be a plain wireless lan extension and the application will sit on top of this we require a seamless support for this bridge ; that is very important there are a large number of such protocols  because there is a lot of interest over there some of these protocols  etc  will tie up some of them and naturally become very widely used and this is one of the most important areas of networking today thank you computer networks prof sujoy ghosh dept of computer science & engineering department iit kharagpur lecture no 24 atm  asynchronous transfer mode  refer slide time  00  44  in this lecture we will start our discussion on another very important technology  namely  asynchronous transfer mode or atm  refer slide time  00  57  00  59  slide time  02  25  03  35 the atm was originally envisioned as a technology  which will solve all problems it is present in the lan  wan and it gives very good quality of service when introduced  it was considered a very ambitious plan unfortunately  it did not work out that way because the standardisation took a lot of time when people from computer world and people from communication world start discussing things and come up with a standard  it becomes very complex and also the cost becomes quite high although the atm made its debut in some local area networks  slowly it has been replaced in most of the local area networks but still it is a very strong and important technology in the wide area network so atm remains in operation in a lot of places today and we will look into this atm  asynchronous transfer mode  now  refer slide time  02  25  03  35  slide time  03  04  03  35 why atm networks ? it is driven by the integration of services  i.e  wires  data  and everything else are integrated into the same kind of network this is the vision of the performance requirements of both telephony and data networking this was called broadband integrated service vision or b isdn telephone networks support a single quality of service and are expensive to boot internet supports no quality of service ; but it is flexible and cheap the atm was developed to utilize the best of both  refer slide time  03  04  03  35  slide time  03  37  04  45 atm networks were meant to support a range of service qualities at a reasonable cost and hence intended to subsume both telephone network and the internet but the cost and complexity turned out to be high and now ip-based technology is going to fill the above role but as we have seen  in many service providers  atm is still present and people are deploying atm networks even today so atm will remain in existence for quite some time  refer slide time  03  37  04  45  slide time  04  47  05  15 let us see in brief the history of atm in the 1980s  a packet research began and in 1986  it adopted the b isdn approach in 1989  a 53-byte cell was permitted  which was a rather small value the communication experts wanted a small value  but computer experts wanted a large value and there was a dispute in 1991  the atm forum was set up in 1992  the atm forum issued its first spec and added user committees in 1996  it approved the anchorage that occurred from then on  death of atm in the enterprise and rollouts in the carrier networks occurred but it is still important today  refer slide time  04  47  05  15  slide time  06  27-06  45 the basic points of atm are that it transmits all information in small  fixed-size packets called cells since they are of fixed size  the switch design becomes easier cells are transmitted asynchronously at high speeds this is basically statistical multiplexing in tdm we saw that one of the advantages of packet networks is that it was more efficient in terms of bandwidth utilization the circuit switch network was less efficient because when there is no communication  the circuit is remaining idle and bandwidth is wasted so the atm tried to address that using statistical multiplexing that means  the size of cell is fixed and these cells can be pushed in any order by the end stations  but the network will be connection-oriented this was necessary in order to accommodate the quality of service that everybody wanted this is asynchronous unlike sdh  which is a synchronous system nevertheless  each cell is 53 bytes long with 5 bytes of header and 48 bytes of payload  refer slide time  06  27-06  45  slide time  07  49  08  05 to make an atm call  a message is to be sent first to set up a connection subsequently all cells follow the same path to the destination so this is just like circuit switching first of all  you have to set up a connection where the connection is not physical but they are virtual circuits that means the path should be found first and then along the path all the atm switches  etc  would reserve some resources for the connection this reservation of the resources in all the nodes along the way constitutes the virtual circuit all the cells would flow through this same path this is a connection-oriented system  but cells are switched for better efficiency it can handle both constant rate traffic and variable rate traffic thus it can carry multiple types of traffic with end-to-end quality of service  refer slide time  07  49  08  05  slide time  09  14  10  01 atm is independent of transmission medium ; we will see later about the different transmission media that are possible it does not prescribe any particular rule for transmission medium they may be sent on a wire or fibre by themselves or they may also be packaged inside the payload of other carrier systems this is a very interesting situation for example  when you are carrying just atm traffic and in-between you have a wan segment which has sdh  the atm cells can be pushed into some sdh container and sent along correctly reversal of this process is also possible suppose there is some sdh traffic and in-between there is an atm link  the vcs can take some constant bit rate service on an atm link so atm transmitted on sdh is possible and sdh transmitted on atm is also possible atm by itself can be used as a transport network so the carriers or the service providers have employed a lot of atm in their backbone so atm is still prevalent  although it is not present in lan or enterprise network  refer slide time  09  14  10  01  the delivery of packets is not guaranteed but the order is as this is circuit-oriented or is a set of virtual circuits  the order of the cells will remain the same  so that the higher layer cells need not be changed for example  ibm suggested 25 mbps for atm nics for taking it to the desktop  but it did not survive one of the reasons for this was the cost the atm nics were more costly the atm switches are costlier than the ordinary  ethernet  switches there were few or no software for atm as most of the software developed was based on ip people were also not ready to move all the software into atm  which would involve high cost and since the market did not expand as expected  the cost remained high for quite some time so this was the difficulty of this approach much of the atm devices operated at 155 mbps  oc 3  or  even higher  622 mbps  oc 12  speeds the standardization process took too long and the resulting technology was too complex  costly  to remain in the cutting edge the basic atm concepts are  virtual circuits  fixed-size packets  cells   which allow fast hardware switching  small packet size  statistical multiplexing and integrated services that means different qualities of services can coexist at the same time with good management and traffic engineering features scalability in speed and network sizes is possible we will look at a few of these in the next lecture  refer slide time  11  03 ? 11  35  slide time  11  03 ? 11  35 atm applications could be atm deployments in frame relay backbones frame relay is one kind of wide area network connectivity  which is now slowly going out  but atms give connectivity to backbones it is also deployed in internet backbones and aggregating residential broadband networks  cable  dsl  isdn  etc   they can feed into an atm switch and then get transported carrier infrastructure for the telephone and private line networks deploys atm  and this is one area where it is still going strong  refer slide time  10  36  12  23  slide time  10  36  12  23 the failed market tests of atm were the atm workgroup and campus networks  atm enterprise network consolidation  and end-to-end atm these did not happen because of software and these did not take off because of cost  refer slide time  12  25  13  36  slide time  12  25  13  36 now we will compare the synchronous  i.e  telephone networks and atm telephone networks are synchronous and we know it because 125 ? s is the frame rate  which is very sacrosanct in this world atm is asynchronous transfer mode phone networks use circuit switching  whereas atm networks use packet or cell switching with virtual circuits in a telephone network  cells from a particular source or information or payload from a particular source will come periodically as shown  whereas in atm they can come any time if the line is free  refer slide time  12  48  13  26  slide time  12  48  13  26 in telephone networks all rates are in multiples of 64 kbps  but with atm service you can get any rate and you can vary the rate with time by programming for the required rate if you require a constant bit rate service of 10 kbps in a data service  it is possible to have a virtual circuit where the reservation of resources would be in that fashion this kind of service is used with current phone networks and all high speed circuits are manually set up atm allows dialling at any speed and rapid provisioning since this is done through software and signalling ; atm allows this as far as telephone networks are concerned  there are lots of advantages of using atm  refer slide time  14  09  14  33  slide time  14  09  14  33 now let us compare atm with data networks atm is ? virtual circuit ? based the path  and optionally resources on the path  is reserved before transmission ip on the other hand is connectionless and end-to-end resource reservation is not possible directly indirectly people are still trying to do that because quality of service remains an important issue rsvp is a new signalling protocol in this ip domain in the internet  which tries to reserve resources there are other ways to do this and one way which has become quite popular is mpls ; and we will talk about mpls in a different lecture  refer slide time  14  39  15  14  slide time  14  39  15  14 atm cells are fixed and are small in size and there is a trade-off between voice and data but ip packets are in variable sizes atm provides qos routing coupled to signalling called pnni internet provides ? best-effort ? service  aiming only for connectivity  refer slide time  15  15-15  41  slide time  15  15-15  41 for addressing  atm uses a 20-byte global nsap addresses for signalling and 32-bit locally assigned labels in cells actually when we are talking about atm  there are two kinds of addresses that are referred one is the atm address  which is 20-byte  160 bits  long it is a huge address and it requires a large address space ; this address space is divided in a particular way  which will be discussed later there are different schemes of addresses  which people tried to subsume in this atm addressing ; this is one kind of atm addressing for setting of a path  this 20-byte address is required but once a path has been set up this address is not required any longer because the path has been set up the only thing is that since this is a virtual path in-between when a node gets a cell  it must know to which particular virtual circuit this belongs so some kind of virtual circuit identifier is required and it is a much smaller address this is another kind of addressing but ip uses 32-bit global address in all packets atm offers sophisticated traffic management and this is one of the strong points of atm and still remains strong in it but in tcp/ip  congestion control is packet-loss based whether the packet is lost or not  atm gives much more sophisticated qos  refer slide time  15  43  17  26  slide time  15  43  17  26 let us see the pros and cons of fixed-size packets pros are that it uses simpler buffer hardware  i.e packet arrival and departure requires us to manage fixed buffer sizes  simpler line scheduling  i.e each cell takes a constant chunk of bandwidth to transmit  and it is easier to build large parallel packet switches  refer slide time  17  29  17  55  slide time  17  29  17  55 the disadvantage is the overhead  i.e for sending small amounts of data at the same time for each cell you have to have this 5-byte header on only 48 bytes so 10 % is already gone on the header and if a large amount of data  may be several megabytes  is to be sent  you need a lot of cells hence overhead becomes important large frames  which are to be sent  have to be broken up into small cells all these cells are to be put together to form the original large frame this segmentation is on one side and the reassembly is on the other side the overhead and the cost will also come in and the last unfilled cells  after segmentation  waste the bandwidth this is not very important  refer slide time  17  56  18  56  slide time  17  56  18  56 when the cell is smaller  an endpoint has to wait for lesser time to fill it so there is low packetization delay when the packet is smaller  the header overhead is larger standard body balances the two to prescribe 48 bytes + 5 bytes  which is equal to 53 bytes therefore the maximal efficiency could be about 90 % only  refer slide time  18  58  19  25  slide time  18  58  19  25 now we will discuss atm layers it was done by a committee in which there was a dispute and the ultimate result was that the atm protocol and its layers  etc were framed these are quite complex atm is the three-dimensional figure and now we will talk about some of the important sub-layers in it on the control and management side of it  there are number of layers and on data side there are number of them  refer slide time  19  26  21  18  slide time  21  19  22  23 the layers are  cs  the convergence sub-layer  sar  the segmentation and reassembly sub-layer these two layers put together is the atm adaptation layer  which is called aal there are different kinds of aals aal 1,2,3,4,5  etc but they all have these two sub-layers then we have the atm layer and this is somewhat in-between the data link layer and the network layer the transmission convergence sub-layer  in which the transmission will come and will be put back  and the physical medium dependent sub-layer  pmd  together form the physical layer  refer slide time  21  19  22  23  slide time  22  23  23  03 in the above slide  there is an atm adaptation layer  an atm layer and a physical layer in the end system this is a very simplistic view of the atm layers there are other layers for control and management function  which will be dealt with later there are two end systems communicating from the atm adaptation layer the atm adaptation layer will readily communicate with other higher layers of the software it will come through this aal  physical layer  then go only up to the atm layer and then go to the other side this is a simple view of a stack  refer slide time  22  23  23  03  slide time  23  03  23  27 atm layer ? s adaptation is mapping of application  e.g  voice  data  etc  to atm cells the physical layer could be sonet or it could simply be a dwdm system atm layer handles transmission/switching/reception  congestion control  cell header processing  sequential delivery  etc  refer slide time  23  03  23  27  slide time  24  40  25  03 now let us discuss about the layers in detail the top one is the top sub-layer of the aal  atm adaptation layer   the convergence sub-layer it offers different kinds of services to different applications here the different types of services are supposed to converge and all of them are supposed to do atm so for convergence this atm adaptation layer is used for example  for a voice channel  constant bit rate traffic is required ; and similarly for data  some other kind of traffic is required so different classes of services were defined depending on the kind of aal  aal 1,2,3,4,5  etc  and the convergence sub-layer negotiated that and came to a bandwidth contract so the different services that are offered are the cbr  which is constant bit rate or bandwidth guarantee  and which is suitable for real time traffic abr is for available bit rate  suitable for bursty traffic and feedback  bout congestion ubr  which is unspecified bit rate  is the cheapest of all and suitable for bursty traffic  may be data traffic it provides a specific aal service at an aal network service access point  nsap    refer slide time  24  40  25  03  slide time  25  34  26  16 nsap refers to network service access point the other sub-layer of aal is the segmentation and reassembly sub-layer it segments higher level user data into 48-byte cells at the sending node and reassembles cells at the receiving node this sub-layer is usually implemented with asic one of the reasons atm was envisioned as a system  which will really scale to very high speed  is that cell segmentation and reassembly is to be done very fast usually it is done with the help of asic asic is an application specific ic for doing the segmentation and reassembling it tears down messages passed from the upper layer and converts them to cells some padding may be necessary to make it a multiple of 48 bytes at the destination the stream of cells are reassembled  refer slide time  25  34  26  16  slide time  26  30  26  50 the different types of aal are aal 1,2,3,4  and 5  which give different classes of service  class a  class b  class c and class d class a is connection-oriented cbr  e.g voice  and it is supported by aal1 class b is connection-oriented vbr  e.g packet based video  supported by aal2 class c/d may be connection-oriented vbr  e.g file transfer   connectionless vbr  e.g lan data  supported by aal 3/4  i.e aal 3/4 may be connection oriented vbr or connectionless vbr aal 5 is a simple and efficient adaptation layer  seal  supporting class c/d for bursty error control at higher-layer protocol these aals are complex since atm got into the service providers ? backbone but many of these aals  etc were never widely deployed  refer slide time  26  30  26  50  slide time  27  03  27  53 the convergence sub-layer  cs  interprets the type and format of incoming information based on 1 to 4 classes of service assigned by the application class a is constant bit rate  cbr   it is connection-oriented and there is strict timing relationship between source and destination  i.e voice if such a very sensitive quality of service like voice is required  class a service can be used but class a service is more costly  refer slide time  27  03  27  53  slide time  27  54  28  15 class b is variable bit rate  vbr  service and connection oriented it has strict timing  e.g packet mode video for video conferencing class c is connection oriented vbr but without a strict timing service so there is a slight difference between class b and class c ; e.g lan data transfer applications class d is connectionless vbr with no strict timing ; e.g lan data transfer applications such as ip for example if it is frame relay  then the person who had taken this frame relay service should have some original negotiation about the speed so class c is a little better than class d  but not better than class a or b  refer slide time  27  54  28  15  slide time  28  17  2  32 aal 5 was introduced for data services it supports both message mode and stream mode in the message mode  a packet of length up to 65 kb may be passed to the aal layer to have it delivered to the destination either on a guaranteed or ? best-effort ? basis  refer slide time  28  17  2  32  slide time  29  53  30  20 the service categories available are abr  ubr  cbr and vbr abr is available bit rate in this source bit rate  source follows network feedback and there is maximum throughput with minimum loss hence the network gives some feedback this is just to give you an idea about how quality of service is handled in atm because a lot of things which were learned in atm are also employed today in some other guise in mpls or some kind of very new ip technology how quality of service can be guaranteed still remains a very important issue in networking today as people are talking about convergence of voice  data  video  etc  into the same network  we require some guarantee about quality of service whatever happens in the pure data network like delay or jitter etc may not be acceptable for this kind of service so for convergence  quality of service is important and atm offered a good quality of service ubr  unspecified bit rate  is of course the cheapest of all the user sends anything with no feedback and no guarantee cells are dropped during congestion between ubr cells  refer slide time  29  53  30  20  slide time  30  20  31  00 cbr  constant bit rate  is one in which the user declares the required rate for this  throughput delay and delay variation are guaranteed in vbr the average and maximum rates are declared it has two different types one is real time vbr for voice  conferencing  etc with maximum delay guaranteed and the other is non-real time vbr for stored video  refer slide time  30  20  31  00  slide time  31  01  31  35 let ? s compare abr and ubr in abr  the queue is in the source because the source takes the feedback from the network and adjusts the rate in ubr  the queue is in the network in abr  if the queue gets filled it gets dropped and pushes congestion to the edges in ubr  there is no backpressure because if there is pressure  the ubr will be dropped abr is good if the network is end-to-end atm ubr is the same whether it is end-to-end atm or backbone to atm abr is very fair and good for the provider and ubr is simple for the user but ubr is generally unfair even though it is simple for the user  refer slide time  31  01  31  35  slide time  31  38  31  45 there is also a concept of guaranteed frame rate  gfr   it is a ubr with a minimum cell rate  mcr   it will try to guarantee this minimum cell rate but beyond that  it is ubr so gfr is a frame-based service or guaranteed frame rate service in this  complete frames are accepted or discarded in the switch  and traffic shaping is frame-based all cells of the frame have the same cell loss priority  clp   whether they are inside the mcr or not  refer slide time  31  38  31  45  slide time  31  47  33  10 all frames below mcr are given clp = 0 service  and all frames above mcr are given best effort clp  i.e clp = 1 service  refer slide time  31  47  33  10  slide time  33  10  34  01 having talked about the different types of quality of service that are available in atm  now let us look at the atm layer and then we will look at the data link layer of atm atm layer is akin to the network layer of osi  although it has data link layer characteristics as seen already  this is somewhere in-between network layer and data link layer atm uses globally unique addresses using the nsap format of iso this is used for setting up connections path and circuit identifiers are used once a connection is established  refer slide time  33  10  34  01  slide time  34  05  34  15 atm interfaces are different types of interfaces designated in the standards one is a computer connecting to a private switch there is a hierarchy of switches like private switches and public switches here computer in the lan may be connecting to a private atm switch for this there is a private uni or private user network interface similarly when a private switch is connected to public switch there is a public uni  that is  a public user network interface public switches talk to each other using the interface called nni  network node interface    refer slide time  34  05  34  15  slide time  34  40  35  08 uni is the user network interface  public and private   nni is the network node interface  private and public   pnni is public nni b ici is broadband inter carrier interface between two carriers so if there are two different carriers  there is an isi defined for that dxi is data exchange interface with a router  etc different interfaces were defined but some were not fully defined because they were not very widely deployed  refer slide time  34  40  35  08  slide time  35  33  35  55 there is a hierarchy of switches in the carrier  there are the carrier backbone switches and carrier edge switches in the service provider frame or central office enterprise switches  which stopped at the carrier edge switches  lan or campus backbone switches and the workgroup switches are in the customer frame actually the hierarchy of switches means they are all basically atm switches with different interfaces ; different software and different protocols are given and these links differ depending on where that switch is  refer slide time  35  33  35  55  slide time  35  56  36  29 let ? s see the physical layer functions of atm it transports atm cells on communication channels and defines mechanical specs like connectors  etc there are two sub-layers one is the pmd or physical medium dependent sub-layer it has medium dependent functions like bit transfer  bit alignment  optically electrical optical  oeo  functions  etc  refer slide time  35  56  36  29  slide time  36  48  37  08 the other sub-layer is the transmission convergence sub-layer it maps cells into the physical layer frame format like ds 1 or sts 3 on transmit and delineates atm cells in the received bit stream it is a wavelength  which generates hec  i.e header of cells for transmission it generates idle cells for cell rate decoupling or speed matching based on the kind of transport it is using  all these speed matching  etc  have to be done and hence  this sub-layer is called transmission convergence sub-layer  refer slide time  36  48  37  08  slide time  37  12  37  20 let ? s see the physical layers of atm in atm no particular medium was specified and so many media are possible starting from multimode fibre  100 mbps using 4b/5b   155 mbps sonet sts-3c  155 mbps using 8 b/10 b  single mode fibre using 155 mbps sts-3 c  622 mbps  plastic optical fibre using 155 mbps  shielded twisted pair using 155 mbps 8 b/10 b to coaxial using 45 mbps  ds3  155 mbps  refer slide time  37  12  37  20  slide time  37  23  37  40 other media starting from unshielded twisted pair  utp 3  phone wire  at 25.6  51.84  155 mbps  utp 5  data grade utp  at 155 mbps to ds1  ds3  etc  are also possible  refer slide time  37  23  37  40  slide time  37  41  38  43 actually a serious attempt was made to inter-operate with several l1  l2 and l3 technologies however  since atm survived only in the service provider ? s backbone and at the edge fibre  the single-mode fibre remains the most important medium today  refer slide time  37  41  38  43  slide time  38  45  38  56 how is atm sonet mapping done ? atm sonet mapping is done because atm may finally get carried by a sonet transport at some point in the wan in a good and easy manner in a sonet there is a pointer pointing to the beginning of the payload and this payload can actually be anywhere in the frame these cells are packed in the frame so cells are mapped row-wise into the frame cells could contain data or be empty some empty cells might have been put over there for late matching  refer slide time  38  45  38  56  slide time  41  08  41  45 since atm is coming at a particular rate  depending on what rate it is  the atm is connected to the next using an sdh transport at the user end atm has to give some guarantee about bandwidth  etc it has to do some provisioning and for that it carries the provisioning across this sdh link sdh is not very difficult because  depending on what speed or what rate is required  the next higher-sized container is chosen sdh  as you know  can accommodate various types of containers like vc 1  vc 2  etc so it can have various types of containers  various rates  etc  and tributaries you take the kind of container that gives guarantee about the rate this is how the service provider provides the virtual link the container may be in the infrastructure of the same service provider or it may be in the infrastructure of some other service provider then we can negotiate and configure the sdh switch so that the atm stream will get the kind of bandwidth across the sdh part of the backbone so this link is a virtual one the atm contains a number of virtual paths and each virtual path contains a number of virtual circuits one particular pair of users is using one particular virtual circuit so that virtual circuit would be identified with a vc number known as a virtual circuit identifier and a vp number or the virtual path identifier for good management function  atm is divided into virtual paths and virtual circuits  refer slide time  41  08  41  45  slide time  42  07  42  54 atm cell structure has 48 bytes of payload and 5 bytes of header the header contains so many fields there are 16 bits or 2 bytes for the virtual circuit identifier  vci  and 8 bits or 1 byte for the virtual path identifier  vpi   the virtual path and the virtual circuit together will define a particular stream  a particular atm stream coming from a particular virtual circuit which is originating from some particular user somewhere then there is an 8-bit hec  refer slide time  42  07  42  54  slide time  42  55  43  35 this structure of the cell header shown is not constant across all interfaces gfc is present in uni  but in nni this gfc has been dropped and vpi is increased vpi is only 8 bits in uni but is 12 bits in nni when you are doing network node interface  a lot of paths  etc are coming ; you require more bits for identifying the path and so there is 12 bit of path identifier in uni there is 12 bit of vci identifier  but only 8 bit of path identifier is present in nni  refer slide time  42  55  43  35  slide time  43  35  43  56 now let us discuss about atm cell format the first one is generic flow control  gfc   once again this was put there with some idea but it was not used much this has 4 bits and is used for local flow control between the network access point  typically a switch belonging to the network provider   and one or more end stations this is used for multiple access for more than one station and for reducing the transmission rate for single nodes  etc this is used to do some local flow control at the lan end between the switch and the users but this is usually ignored  refer slide time  43  35  43  56  slide time  45  45  46  06 vpi  the virtual path identifier  has 8 bits ; but since gfc is irrelevant within the network  12 bits are used these may be thought of as the high order bits for the virtual channel identifiers a virtual path contains a number of virtual channels the switches store per path parameters so that individual channels do not need any signalling so  one pair of users is using one channel  one virtual circuit this virtual circuit has to be identified and then given some kind of bandwidth contract some kind of class of service will be negotiated for this in a big atm network  thousands or even millions of circuits may be set up and toned down at a very high rate as many people are using millions of switched circuits under a service provider these virtual circuits may be set up and toned down in a very short time theoretically with each of these virtual circuits  some kinds of quality of service parameters have been negotiated but these are grouped together for the similar kind of services and these virtual channels are put together so that only paths are to be stored to avoid implications in finding and routing  some of these virtual circuits are put together to form virtual paths we have the vpi identifier for this this vpi has the higher order bits specifying the channel  and the lower order bit specifying the vci  refer slide time  45  45  46  06  slide time  46  12  46  42 however  if a virtual path is already set up and is scantily used  then resources are wasted so  dynamic renegotiation of vp capacity can be used vci  the virtual channel identifier  is 16 bits vc 0 to 15 are reserved for special purpose  and others are used for actual communication  refer slide time  46  12  46  42  slide time  47  05  47  10 pt is the payload type  which is of 3 bits if high order bit is 0  the second bit indicates congestion and third bit indicates end of aal 5 frame 100 and 101 are reserved for link management clp  cell loss priority  bit is used by the source for making priority intermediate switches may mark it for violating agreements depending on whether clp = 0 or clp = 1  the cells may be dropped or not dropped in an intermediate switch hec is an 8-bit header checksum this is very important in checking whether the header has an error this has some other function  which will be dealt with in data link functions in atm  refer slide time  47  05  47  10  slide time  47  18  47  38 the next sub-topic is data link layer in atm this consists of the transmission control layer  refer slide time  47  18  47  38  slide time  47  40  48  06 each atm cell has a 5-byte header  in which the last field  hec  is a checksum for just the header the tc takes the cells from the atm layer  adds an hec to them and sends them as bit streams to the pmd on the transmission side the bit streams may or may not have a separate transport  refer slide time  47  40  48  06  slide time  49  17  49  44 on the receiving side  the incoming bit streams are formed into cells and passed on to the atm layer here the cell boundaries are to be detected it also discards cells with invalid headers and processes oam cells for administration management and control one problem which came up was the atm forum wanted the atm to be deployed everywhere from the backbone  provide a switch right down to the user so nothing much was specified about the physical layer since they wanted neutral to the kind of physical medium through which the atm will pass  another problem came up with receiving the bit streams cell starting and cell ending couldn ? t be identified on the receiving side  refer slide time  49  17  49  44  slide time  51  00  51  12 in some cases  the underlying physical layer helps for example  when atm cells are carried over sonet or sdh  the spe pointer in the sonet header points to the first full cell so we immediately know where it starts in other cases every 40-bit sequence is tested for being a valid header the 8 bits at the extreme right will be valid hec for the remaining 32 bits hec has two functions one is that it gives you some checking mechanism on whether the header is correct or not and the other is for synchronization function when a bit stream is coming and if it is 40-bit long  it is taken now if these 40 bits happen to be the header  the last 8 bits will be the checksum  assuming that the entire header has come correctly so the last 8 bits would be a checksum for the other 32 bits in the header if it is a header with an error  it is neglected then  the next 40 bits are taken and tested again  assuming that a header has come correctly  refer slide time  51  00  51  12  slide time  52  40  53  27 the tc goes through a hunt ; this is the hunting phase and once it gets a header it gets into the presynch stage it has one header but  out of 40 bits  8 bits are the checksum of the other 32 bits so the probability is that this was not a header but a user payload and was wrongly interpreted as a header because these 8 bits matched the checksum for the other 32 bits so  now it goes into the presynch stage if this is indeed the header  then the first 5 bytes would be the header  the next 48 bytes would be data and the next 5 bytes would again be a header and you continue checking this for some time this is a presynch stage when this synchronization is done for some time and you are reasonably sure that this can not be a coincidence in the data given by the user  then we are indeed locked on to the header and now tc is synchronized the tc goes through the hunt  presynch and synch stages to detect the cell boundaries if the number of hecs is found to be incorrect then tc is said to have lost synchronization then it has to be resynchronized this heuristic defies the layered architecture  refer slide time  52  40  53  27  in this simple state diagram  the signal is in the hunting stage at this stage the signal looks at every 40 bits and tries to figure out whether it could be a possible header or not when correct hec is detected it goes to the presynch stage if correct hec is not detected  the signal goes back to the hunting stage if a few consecutive correct hecs are found  then it is synchronized if a few consecutive incorrect hecs are found  then the tc will determine that it has lost synchronization and it will go back to the hunting phase in the next lecture we will talk first about atm addresses  atm routing  etc preview of the next lecture lecture no 25 atm signalling routing and lan emulation in the last lecture we discussed atm technology we saw  how it handles cells  how it make cells  etc now  in the first half of this lecture we will discuss atm signalling and routing ethernet networks and other kinds of networks are ubiquitous in the second part  we will discuss about how an ip network and an atm network will interoperate when we use atm as the backbone  refer slide time  55  03  55  09  slide time  55  11 ? 55  36 next we will discuss atm signalling  routing and lan emulation  refer slide time  55  11 ? 55  36  slide time  55  38  55  42 atm connections are of various types  the most predominant being the switched virtual circuit  in which a path is set up and taken to the destination the other one is permanent virtual circuit which is pre-coded there are also other connection types like simple point-to-point connection  symmetric or asymmetric bandwidth connection  uni or bi-directional   point-to-multi point connection  uni-directional  and data replicated by the network  refer slide time  55  38  55  42  slide time  55  43  56  53 this is an example of a point-to-multi point network  refer slide time  55  43  56  53  slide time  56  54  57  28 in an atm connection set up  a signal is set up where the source and the destination are shown there are intermediate switches in between from the source there is a set up signal which goes to the intermediate switch the switch sends back some kind of an acknowledgement saying that the call is proceeding and sends the set up signal to the next hop and so on each of them will immediately send back some kind of acknowledgement and then when the call is accepted a connect signal will start flowing in the opposite direction when it reaches the source then a connect acknowledgement will flow and for this connect signal the circuit is set up alternatively the destination may reject the signal and then it will send a region release signal back  refer slide time  56  54  57  28  slide time  57  29  57  31 on the other hand  when the circuit is as shown above  for taking it down the source will send a release when it finishes sending it will send a release till it reaches the destination the destination will then send a release all the way back the release could be initiated by the sender or the release could be initiated by the destination  refer slide time  57  29  57  31  slide time  57  33 ? 58  13 then connection gets terminated and the release is completed  refer slide time  57  33 ? 58  13  slide time  58  15 -51  20 min there is another approach to this not using lan but using classical ip over atm the definitions for implementations of classical ip over atm are described in rfc 177 this rfc considers only the application of atm as a direct replacement of the ? wires ?  lan segments connecting ip end-stations  members  and routers operating in the classical lan-based paradigm issues raised by mac level bridging and lan emulation are not covered here  refer slide time  58  15 -51  20 min  when we look at classical ip over atm  address resolution and encapsulation are the two issues which are to be considered encapsulation consists of putting appropriate atm header/trailer to a packet  converting it to a number of cells and then sending it this means that when you have an atm packet and a classical ip is running over atm and you have got a big packet  you have to break the cells up and put a proper header on each of them and then send them atm features are not utilized and inter network traffic handling is clunky computer networks prof sujoy ghosh department of computer science and engineering iit  kharagpur lecture-25 atm signaling  routing and lan emulation  refer slide time  00  35  we have looked at atm technology in the box  in the sense that how it handles cells  how it makes cells today  in the first half of this lecture or first part of this lecture  we will discuss atm signaling and routing since ethernet networks and other kinds of networks are ubiquitous  everywhere  if atm is used in a backbone  how they would interoperate between an ip network and an atm network we will talk about that in the second part of this lecture  refer slide time  01  23  01  30min  so today we talk about atm signaling  routing  and lan emulations  refer slide time  01  31  04  43 min  the first concept is that atm uses virtual circuits ; that means there are two ways to use packets  carry entire destination address in header  or carry only an identifier  also known as label labels have local significance  addresses have global significance signaling protocol fundamentally maps global addresses or paths or sequence of addresses to local labels we will discuss this in much more detail when we discuss routing of ip packets  which we will take up after this lecture usually when you have a packet switching network  then each packet is considered in one extreme  that is  in the ip end each packet is considered on its own that means each packet must contain the destination address at the very least it also contains the source address that is different ; so it must contain the destination address  so that looking at each packet  an intermediate router would know where it should go that is one end of the spectrum  whereas in the connection-oriented system we know that the physical connection is set up in atm we set virtual circuits or virtual paths in virtual circuits or virtual paths  what happens is that these atm cells are very small  only 53 bytes long each of the cells will contain some local label ; so a path is set up now setting up a path in atm means that each of the intermediate switches would know that a flow of cells is going to go through them ? from one source to some destination they make provision to accommodate this flow ; they make provision for the virtual circuit  and then  once they do that  they set up this virtual circuit in the starting phase after that  each of the cells need not contain any specific identifier or specific address for the destination it just needs a small address  which tells the intermediate switches which virtual circuit to use it contains a virtual circuit identifier actually it is divided into two parts as we have seen in the cell header  we have the vpi part and the vci part simply looking at that label  the intermediate switch would know which virtual circuit to use  refer slide time  04  44  05  10 min  before this virtual circuit  we see that we have the samples suppose we have the data in the atm cell  the data would be preceded by simply the virtual circuit identifier and this might have two parts  vpi and vci  whereas in a regular datagram the entire address may have to be there in each packet  refer slide time  05  11  06  57 min  in vpi/vci assignment used in this case  all packets must follow the same path unlike a datagram  because this virtual circuit is set up before any actual flow of packets begins there is a time for the circuit set up and this circuit is not a physical circuit we have in a telephone network ; but this is a virtual circuit  that means each of the intermediate nodes simply knows that a flow is about to begin so this has to be set up once this is set up  all packets would flow through the same path switches store per vci state  e.g qos  quality of service  information about this particular vci signaling implies separation of data and control when we do atm signaling  we are talking about setting up the entire path we will come to that ; small ids can be looked up exactly much quickly in hardware ? that is one good thing if you have a small vci  that means  virtual circuit identifier  it can be looked up very quickly in a hardware ? this is a bottle neck in a router this can be handled very fast  it is harder to do this with ip address that means this longest prefix match ? we will come to that later on the setup must precede data transfer this is the other disadvantage of this ? the vpi and vci must be set up  which means it delays short messages there are two types of virtual circuits  switched and permanent virtual circuits  refer slide time  06  58  07  43 min  this is an example  the switch knows in the input ports say 1 and 2  1/37 if these are the vpi or vci identifiers  out will be through port 3  1/35 similarly port 1 for 34 will go to 4  2/56 and so on there is a table which simply quickly matches the vpi/vci values and puts it on another vci/vpi pair on the other side this is how vpi/vcis are assigned and used  refer slide time  07  44 10  16 min  we now come to atm addresses this address is different from the vpi/vci ; that is  the virtual circuit identifier/virtual path identifier  which is simply local but for setting up the path  initially you require an address  and you can not do with a local address you have to do with a globally consistent address this global address of atm is 20 bytes long there is a 20-byte long atm address  which you use for setting up a circuit i mentioned previously that there are two types of circuits  switched virtual circuits and permanent virtual circuits in permanent virtual circuits  a path is set up initially manually the path remains a permanent virtual circuit whenever there are two end points between which a lot of traffic will flow  you may skip this overhead of path set up and set up a permanent virtual circuit ; this is like a leased line whenever there is something to go from this source to that destination  it will simply use the pre-existing permanent virtual circuit or otherwise  we may have a switched virtual circuit that means this virtual circuit is set up on the fly  as the network is being used in an atm switch  hundreds of thousands or may be millions of virtual circuits may be set up or taken down every second this is a very fast process for setting up this virtual circuit  we require an atm format and this is 20-byte long address unlike an ip address  which is only 4 bytes  this is 20 bytes this is a very long address  left to right hierarchical in this  there are level 1  level 2 level 3 and level 4 the first two levels have a 13-byte prefix  this are the levels of hierarchy this part is usually used for the actual network addressing inside since it is such a long address   refer slide time  10  17 11  56 min  it can accommodate various schemes atm was conceived as a technology  which will subsume and absorb all pre-existing technologies the people who designed atm tried to accommodate different kinds of addressing schemes in one super addressing scheme  which they say is atm addressing scheme as you see here  there are different types of addresses possible since there are 20 bytes  it is possible to have more number of schemes these are the schemes 1 byte + 2 byte 3 + 10  13 ? this is supplied by the network these 6 bytes are end-system supplied and not used in routing this may be used inside the host ; 1 byte for maybe de-multiplexing inside these network supplied parts are 1 byte  which indicates the scheme the three nsap  network service access point address  formats are dcc  icd  and e.164 or icd number or dcc number this is a data country code  which uses 2 bytes and 10 are used for the other part of the network  refer slide time  11  57  13  07 min  actually here  authority and format identifier is the first thing so 39 is iso dcc ; 47 is british standards institute icd ; and 45 is itu isdn  which means that this e.164 is actually an isdn number isdn uses 15 characters  i.e 15 binary coded decimals  that is  7 ? bytes this entire isdn number  which again can subsume telephone numbers  can be put over here isdn uses e.164 numbers atm forum extended e.164 addresses to nsap format and e.164 number is filled with leading 0s to make 15 digits  that is  af16 is padded to make 8 bytes instead of 7 ? bytes end system identifier is the other part this is the end system identifier part  and these 6 bytes could be various things  specifically  refer slide time  13  08  13  42 min  this 6 byte could be 48-bit ieee mac address remember the mac address that we used in the data link layer is 6 bytes  supplied by ieee the entire 6 bytes can straightaway be incorporated in the low order bits of the address selector is for use inside the host ; all atm addresses are thus 20 bytes long there are various ways you can route this atm ; given an atm address there are various schemes possible  refer slide time  13  43  14  03 min  since various schemes are possible  atm addresses could be of variable lengths and have an initial domain part and a domain specific part the initial domain part consists of two fields as we have already mentioned  afi  that is  the authority and format indicator   refer slide time  14  04  14  15 min  and idi  that is  initial domain identifier this identifies the domain within the purview of a given addressing authority  refer slide time  14  16  16  18 min  in a particular format  say icd  international code designator   all addresses have a unique fixed length prefix the high order dsp or the high order bits of domain specific parts roughly correspond to the low order part of network number in ip ; esi is the second this particular scheme can subsume a lot of other schemes  which were possible the reason for showing this in this fashion is that a similar thing was tried later on in ip version 6 we have a very large address field where a lot of previous schemes could be subsumed in this one of the difficulties with this ip addressing scheme was that it was done in a very haphazard manner  unlike the telephone number for example  the telephone numbers are geographically distributed that means  you put particular first few digits and that will immediately indicate which country and region you are calling it is easy for the router to just look at the first few digits and send it to the trunk but that is not possible in the ip version 4 which is used  because it has no geographic correlation you have to take keep a very long table and look into the table once again when people developed this atm addresses or the ip version 6  they tried to bring back some order into this addressing scheme  refer slide time  16  19  16  36 min  for setting up connections  ip atm supports both permanent virtual circuits and switched virtual circuits pvcs are pre-coded in each switch along the way and are always present they are like leased lines  which do not need any connection setup  refer slide time  16  37  17  06 min  for connection setup there is a user network interface or uni  and the network interface  which is the nni there is a part called q.2931  which is an itu protocol for setting up paths and this sscop means service specific connection oriented protocol you have the aal and atm these layers have already been talked about earlier  refer slide time  17  07  17  49 min  unfortunately this whole scheme turned out to be quite a complex one we will not go into all the details we have already seen the atm layer and the aal layer  which is in the user plane today we are going to talk a little bit on this control plane  which has one service aal and three parts  sscf  sscop and aalcp or aal common part for setting up the circuits  etc  we have q.2931  bisup and pnni or public network-to-network interface  refer slide time  17  50  18  30 min  uni is the user interface of the atm networks and consists of signaling protocol for setting up circuits of a certain quality and the format of the cells the nni deals with the issue of signaling and data transfer as well as routing  data transfer  operations and management remember there is also a slight difference between the cells which go through in the uni part and this nni part in the nni part  the gfc is dropped and we use the whole thing to accommodate more number of virtual circuits ; but that is a small technical point  refer slide time  18  31  19  01 min  if you look at the control stack  that is  control plane stack  we have this q.2931 sitting on this sscf  this saal  that is  service atm adaptation layer  which sits on the atm layer  which again is on some physical layer  there is a virtual link between two atms  aalcps and so on between a stack from the source to the destination or from one hop to the other  refer slide time  19  02  21  14 min  let us see what q.2931 is we will not go into this  once again the protocol is quite complex we will just touch upon some aspects of it this is an itu protocol for setting up a connection first it sends a request in the meta signaling channel 0 to negotiate a quality of service for a signaling channel what is done is that  for setting up the circuit  you have to do some communication this communication again will be through atm actually for that  it will require some kind of virtual path and virtual circuit atm is quite strong on quality of service there is a question of quality of service of the service channel also although the service channel would be used for a very short time  once the circuit is set up  that service channel may be released there is a meta signaling channel called 0  where you can negotiate the quality of service for the weak signal channel with the quality of service otherwise  there is a default which is vp0  vc5  that means  virtual path number 0 in virtual path number 0  which is a bundle of circuits  take the vc 5  which is a standard channel  where you put your request for signal  for setting up the path now if this is successful  then a new vc is assigned for connection setup requests and replies then you first make the request in this channel then a new vc would be assigned for this particular connection setup q.2931  if you remember  is at the top of the control plane protocol stack  which initiates at the setting up of the circuit and handles setting up of circuits  refer slide time  21  15  21  59 min  below the q.2931 we have the signaling aal ; that means  signaling atm adaptation layer  which again contains three parts  service specific coordination function  which provides interface q.2931 ; interface between q.2931 and the atm stack ; service specific connection-oriented protocol  which is the sscop ? this handles error  loss and recovery all these are communications for setting up circuit for communication for the control purpose and the aal common part  which handles error detection this is roughly the stack  refer slide time  22  00  23  59 min  there are various kinds of parameters in the forward direction and in the backward direction there are various parameters that you can specify for the quality of service with atm  when it was introduced  a serious attempt to handle the issue of quality of service was made it has now become so important that in the ip domain also  which is turning out to be the dominant technology  quality of service has become important people have thought of various schemes for handling quality of service many of the schemes that people had already thought about with atm have been adopted in various ways we will talk in detail about quality of service later on today  we will just touch upon it ; there are various parameters like peak cell rate ? that means the peak rate at which you will be pumping inside ; sustainable cell rate ; maximum burst size ; etc all these different parameters can be negotiated for one particular virtual circuit when a path is set up along the way  each of the atm switches on the way makes some provision for supporting that particular new virtual circuit with that kind of service if it can not handle that  may be some negotiation about it can be handled leaky bucket is some kind of congestion control algorithm we will discuss it later  refer slide time  24  00  24  29 min  atm connection types are of various types ; the most pre-dominant ones are the switched virtual circuits  where you set up a path and take it down ; or permanent virtual circuit  which is pre-coded there are other connection types  e.g simple point-to-point connection  symmetric or asymmetric bandwidth connection  point-to-multipoint connection  data flow in one direction only  or data is replicated by the network  refer slide time  24  30  24  35 min  so this is an example of a point-to-multipoint network  refer slide time  24  36  25  45 min  when you do an atm connection setup  you set up signal and maybe this is the source and this is the destination these are the intermediate switches from the source  there is a set up signal  which goes through the intermediate switch  which sends back an acknowledgement saying that the call is proceeding and sends a set up signal to the next hop the set up signal is then sent to the next hop and each of them immediately will send back an acknowledgement when the call is accepted  a connect signal will start flowing in the other direction and when it reaches the source  a connect acknowledgement will flow and each of them will give this connect acknowledgement for this connect signal the circuit has now been set up or alternatively  the destination may reject it ; then it simply sends a region release kind of a signal  refer slide time  25  46  26  23 min  for circuit setting up and for taking down a circuit  the source will send a release ; that means he has finished sending release and release complete will go on then finally the destination will send a release all the way back a release could be initiated by the sender or the release could be initiated by the destination also  refer slide time  26  24  26  28 min  the connection gets terminated and release is completed  refer slide time  26  29  28  14 min  pnni is the private network-to-network interface ; that means between the end system and the switch  we have the uni and we have the nni pnni is a private network-to-network interface and this could be between two switches or two entire networks pnni uses link state routing protocol for atm networks we will look into the details of link state routing when we deal with ospf in the ip worlds since ip is the more prevalent technology  we will discuss it in detail when we do it here each node will periodically broadcast the state of the link to which it is connected to all parts of the network this way all the switches get some global picture about the status of the various links  so that they can run some algorithm locally in a centralized fashion and find out all the possible paths they use this for setting up the path later on  refer slide time  28  15 30  17 min  actually the situation is a little more complex than what i have just said  because there is a hierarchy mechanism that ensures that this protocol scales well for large  world wide atm networks a key feature of the pnni hierarchy mechanism is its ability to automatically configure itself in networks in which the address structure reflects the topology there are two things here  one is this hierarchy we are talking about  and the same kind of thing is used in ospf in the ip domain when we discuss ospf  we will go into the details of this ; but there is a hierarchy over there imagine what would happen if all were atm switches  which they are not  but suppose they all were that was the vision ; and if the atm switches were communicating with everybody else with their link states  the database and everything would become huge in order to scale to a very large network  it goes through in a hierarchical fashion  meaning you can have a hierarchy of networks and at each hierarchy  the peers run some kind of pnni for routing within that level of hierarchy and at a lower level  they will again run pnni for that level and various hierarchy levels are possible you have seen that the atm address is given in such a way that we have only shown the broad boundaries but within that boundaries  it can be further divided into a number of hierarchies and again different designated authorities can break it up in a different way all these flexibilities are possible ; pnni allows that in some plane  in some hierarchy  one kind of addressing scheme is used and in another  a different kind of addressing scheme is used  refer slide time  30  18 31  36min  the substance is that it scales to very large networks  supports hierarchical routing  supports quality of service  supports multiple routing metrics and attributes  because when you broadcast the link state  i.e  the state of the link  you may also broadcast all different kinds of parameters about the links that can be handled in that link or how much can be handled by the switches  etc can be propagated throughout the network if you have a fair idea about what is possible and what is not possible  then you can plan your route in the source in a particular fashion use of source routed connection setup  since the source has the global picture  it will use that global picture to compute the route and set up the connection once it decides on the route  it used the q.2931 to give all the connection setup that set up request  acknowledgement and release etc will be used it operates in the presence of partitioned areas  refer slide time  31  37  32  16min  pnni features provide dynamic routing ; that means  the link states may change from time to time each of the switches are going to broadcast their link states ; it is responsive to changes in resource availability ; separates the routing protocol used within a peer group from that used among peer groups various hierarchies are possible  interoperates with external routing domains  which are not necessarily using pnni and supports both physical links and tunneling over virtual circuits  refer slide time  32  17  33  44min  this is an example of hierarchy this big network  which is again a network of networks  is represented by one node in the top level of the hierarchy similarly  you use pnni to plan a route like this within the network you might have to again do a planning and each node may again be corresponding to another network at a lower level at each higher level of the hierarchy  you can use pnni to plan the route if there is a.1.1 its view of a.1.1 is something below a.1.1  a.1.2  a.1.3 are explicit these have abstracted notions of a.1.2 and then you come to b ; these are b and c although when the call setup is passing through b  it may come all the way down and do the actual path setup that is how the hierarchy works  refer slide time  33  45  34  10min  at any level of the hierarchy  a.1.1 will make a source route  which goes through a.1.2  then b and c so the source specifies the route as a list of all intermediate systems in the route this was the original idea also in the token ring  refer slide time  34  11  34  30min  for this  it uses a designated transit list  dtl   which is in the form of a stack  as i will show you source route is across each level of hierarchy ; there is an entry switch for each peer group ; it specifies complete route through that group ; and set of dtl manipulations is implemented as a stack  refer slide time  34  32 34  45min  a and b may be at the bottom of the stack ; a.1 is at the top level of the hierarchy and this is how it is put in a stack and the path is completed  refer slide time  34  46 35  32min  we now discuss the quality of service parameters i will just mention some of the metrics  etc we will not go again very deep into this because we do not have that much time but it will give you some idea about what we mean when we say quality of service one such parameter metric is maximum cell transfer delay ; that means  the delay from the beginning of the first bit of the first cell to the last bit of the cell others include maximum cell delay variation ; the variation of this time ; maximum cell loss ratio ; whether the cells could be lost  and if so  what is the maximum cell loss ratio ; administrative weight  etc  refer slide time  35  33  35  55min  the attributes of the parameters are available cell rate or its capacity  whether it is available ; cell rate margin is allocated minus actual ; variation factor ; branching flag ; restricted transit flag these are all different parameters and their attributes ? qos parameters and their attributes  refer slide time  35  56  37  27min  one way this is handled is the generic call admission control  which happens when you are on the source side  i.e  when you are deciding on the route and you are doing a source routing  at that point whether you can admit a request  which has finally come from the user  from the uni  etc but at that particular point of time before making the request  there is an admission control  which is a generic cell admission control run by a switch for choosing a source route it determines which path can probably support the call ; that way it will try to route the call setup actual call admission control is run by each switch in the beginning we will run a gcac as well as acac and the intermediate switch simply runs an acac or the actual call admission control to check whether that request has come to this switch  whether it can handle this request or not ; this is the protocol which is running  refer slide time  37  28 38  06min  there are traffic management functions ; the call admission control is a kind of traffic management traffic shaping means limit burst length  space out cells  etc for getting a maximum throughput ; usage parameter control is to monitor and control traffic at the network entrance of various traffic management systems both quality of service management and traffic management are possible in atm  and there are extensive protocols for negotiating these various parameters and for setting it up  refer slide time  38  07 38  39 min  the functions of traffic management are as follows  there is selective cell discard with clp or cell loss priority if clp is 1  the cells may be dropped if the situation warrants it is something like an unspecified bit rate and it may have a very low priority cells from non-compliant connections may be dropped there is also frame discarding one example of feed back control is an abr scheme  refer slide time  38  40 38  46 min  we will just quickly look at the peak cell rate i am not going into the details of these  cell transfer delay  cell delay variation  cell delay variation tolerance  cell loss ratio  etc are the parameters  refer slide time  38  47 39  21min  explicit forward congestion indicator  we will just have a quick look at this abr system  which is a binary rate system  which sends an efci this is explicit forward congestion indicator  which is set to 0 at source and congested switch is set to 1 every nth cell destination sends a resource management cell to the source  refer slide time  39  22 39  43 min  what happens is that somewhere in-between if an intermediate source  or efci  is congested  this may set it to 1 and then that information may flow back finally to the source and the source may try to restrict its requests  refer slide time  39  44  40  16 min  sources send 1 rm cell every nth cells  the rm cells contain the explicit rate that has been asked for ; the destination returns the rm cell to the source the switches adjust the rate down ; that means if it is congested  it may adjust the rate down and the source adjusts to the specified rate whatever rate comes through this  going up and coming down through this negotiation  is what the source finally has to accept  refer slide time  40  17  41  38 min  we will talk a little bit about lan emulation  which is emulating a local area network when the backbone is of an atm or when you use an atm but still want to use the ethernet and ip  specifically ip  in the nodes and one very specific reason this is required is as follows one of the reasons atm was not successful in the lan segment  although it was put as a lan solution also in enterprise lan solutions  was that there was hardly any software which was developed on atm whereas a huge amount of software has been developed using ip and so much of software has been developed in ip  you can not throw it up nor can you translate it to an atm software overnight ; that is very difficult people took a more pragmatic approach and thought the backbone network technology be that of atm or have an atm let us emulate the lan so that your software ip based software can still run  refer slide time  41  39  42  02 min  problem  it needs new networking software for atm solution let atm network appear as a virtual lan how can an atm network appear as a virtual lan ? lan emulation is implemented as a device driver below the network layer these are lan emulation bridges actually ; if there is an atm  this will look like a lan  refer slide time  42  03 42  41 min  for this  1 atm lan can be n virtual lans many virtual lans can be there in the same atm lan only one of them may be sufficient  this is a logical subnet interconnected via routers this is the abstraction  this is the picture that we want to give to the world it needs drivers in hosts to support each lan ; so in actual practice  only ieee 802.3 and 802.5 were supported  although fddi could also be done  refer slide time  42  42  43  21 min  this is the picture  we have an atm switch  we have some lane servers  we have multiple lans on this  we have a lane server a and a lane server b the logical view would be as if a router is also connected to the atm switch the logical view looks like an ip network we have a1  a2 connected via this network a and b1  b2 and there is a network b  which is connected these two ip networks are connected via routers this is the logical view  although the actual view is emulated here  refer slide time  43  22  45  55 min  it requires several components ; one component is that we require a lan emulation client in each host each host must have lec or lan emulation client  which is a small software  which can be loaded in each host lan emulation configuration server or lecs will be in one central server  it will be taken as the lan emulation configuration server whenever somebody wants to join the lan or leave the lan  the lan emulation client will first ask for the parameters from the lecs it has to know the address of the lecs and here is a lan emulation server itself  the les  and a broadcast and unknown server if there is something  like the broadcasting in a network  which is done  we know that it is in a particular network for an arp we want to do an address resolution protocol what we do is that we broadcast a request  i.e  the ip address ; what is the data link address ? remember that this atm works on point to point  mostly  as a point-to-point connection although point-to-multipoint is possible  but it is not in both directions instead of trying to do the broadcast from the host itself  what it does is that if each host in this lan emulation client has to broadcast anything  it will send it to another server called bus ; there is a virtual connection between every host and the bus  and the bus will send the broadcast to each of the hosts that way in an indirect fashion  the broadcast takes place similarly there is an unknown server ; that means i do not know the address of the server like arp once again  you send the request to this bus and the bus will find out and finally give you the address these are the main components of lane  namely lec  lecs  les and bus  refer slide time  46  00  46  51 min  what does the les do ? the basic function of the le server is to provide directory  multicast  and address resolution services to the le layers in the work stations that is what the lan emulation server does it also provides a connectionless data transfer service to the le layers in the workstation if needed the parameters for setting up a server  etc  will be known to the lecs  which will communicate to the lec as the lec joins the network  refer slide time  46  52  47  44 min  initialization  the client gets the address of lecs from its switch  uses well-known lecs address  or well-known lecs pvc there has to be a particular pvc  which it starts using automatically the client gets server ? s address from lecs it also discovers its own atm address if required for direct vcs that means if it wants to do some direct communication between two nodes  it has to get the atm address of the other side if it wants to set up a direct vc instead of going via the servers in that case it will require its own atm address also  refer slide time  47  45  48  00 min  it does a registration ; client sends a list of its mac addresses to the server ; declares whether it wants arp requests these have to be known to the server so that the server can give the service to the other nodes connected to that network client sends arp request to server  refer slide time  48  01  48  19 min  address resolution  client sends arp request to server ; unresolved requests are sent to clients  bridges  servers and the arp ; client sets up a direct connection this is how a connection is set up  refer slide time  48  20  48  40 min  broadcast to unknown server or bus  as i said  it forwards multicast traffic to all members clients can also send unicast frames for unknown addresses there suppose some address is not known  you send it to bus and then bus will try to find out  refer slide time  48  41  49  54 min  there is a flush protocol that means clients can send unicast packets via bus while trying to resolve the address what might happen is that client may try to get the address  then get some address  maybe send it directly what might happen is that something which was not sent directly here  the packets may come out of order remember i mentioned that in atm  one guarantee is that cells will not come out of order cells may get lost  but cells will not come out of order  unlike pure datagram services but in this particular case this may happen because we are not talking about one particular vc in one particular virtual circuit  the packets will indeed not go out of order but in this particular case  they might when direct vcc is set up  client sends a flush message to the destination  destination returns it to source  can then send packets on vc this is a flush message that this problem is solved  refer slide time  49  55 ? 50  38 min  there is another approach to this  which does not use lan but uses classical ip over atm what is classical ip of our atm ? the definitions for implementations of classical ip over atm are described in rfc 1577 all the details are here ; once again  we will just simply mention it very quickly this rfc considers only the application of atm as a direct replacement of the wires ; local lan segments connecting ip end stations which are the members ; and routers operating in the classical lan based paradigm ; issues raised by mac level bridging and lan emulation are not covered  refer slide time  50  39 -51  20 min  if you want to look at classical ip over atm  you have to do address resolution and encapsulation these are the two issues to be considered here encapsulation consists of putting appropriate atm header trailer to a packet  converting it to a number of cells and then sending them this is encapsulation  which means that you have an atm packet this is classical ip running over atm when you have a big packet you know that cells have to break it up  and put a proper header on each one and then send them atm features are not utilized and inter network traffic handling is clunky  refer slide time  51  21  52  21 min  each of the ip sub-networks is a logical ip sub-network all members of a logical ip sub-network are able to communicate via atm with all other members in the same lis  which means that if two nodes are in the same logical ip sub-network  i.e  same lis  you would set up a vc on there is a vc between every pair within or amongst all nodes in a particular logical ip sub-network there is a vc mesh ; everybody can communicate to everybody else communication to hosts outside the lis  local lis  is provided via an ip router this router is an atm endpoint attached to the atm network that is configured as a member of one or more lis  refer slide time  52  22  52  49 min  naturally  a router may be a member of more than one network similarly  the network is configured as a member of one or more lis you have to do an address resolution the valid question is that  if the ip address is this  what is the atm address ? you have to do an atm arp  ip address to atm address translation  address resolution protocol is used inverse atm arp means vc to ip address ; solution  use atm arp servers there are atm arp servers there  refer slide time  52  50  53  49 min  this is a diagram  suppose this is a logical ip sub-network number 1 and this is logical ip sub network number 2  each of them has its own atm arp server for doing arp  that means  ip to atm address translation and vice versa nodes are connected ; if a1 wants to communicate to b2  naturally at the top level  you give the ip address previously we were breaking it up into data link address finally what is the route to take if it is in some other list ? if it is in the same list  you have a direct vc to it and you have a direct virtual circuit ; you take that each lis has an atm arp server for resolution ; clients are configured with the server ? s atm address and clients register at start up periodically  refer slide time  53  50  55  08 min  in atm  arp protocol is used to resolve a host ip address for a known hardware address it is the inverse atm arp as you can understand  this atm is a rather complex technology and this is one of the reasons it was not so successful as you will find later on  many of the ideas which were used in atm  namely  about this quality of service  about setting up flows and setting up virtual circuits with vci vpi labels  these ideas were later on adopted in ip and we will discuss it a lecture called mpls  that is  multi protocol label switching  where the similar ideas have been used to give this kind of services later on also  atm is used quite extensively in big backbone networks because of the various facilities although it has moved out of the lan segment  these days the gigabit ethernet has replaced it simply because of the host thank you preview of the next lecture  refer slide time  55  11-55  12  so today we will start our discussion on routing actually we have already talked about routing a little bit in different context specifically in the context of atm how the atm virtual path are set up today  we will talk about the major area we will start our discussion on the major area of routing which is how and specially with reference to the tcp ip stack that is how packets are routed in a ip network  refer slide time  55  54 -56  04  we will talk about today  we start the introduction and to routing  we will take up the discussion about different routing protocols in next set of lectures  refer slide time  56  09  56  48  let us just recollect what the job of the network layer or what is routing this is to carry data end to end  i.e from source to destination perhaps through a number of intermediate subnets depending on whether connection oriented or connectionless services are used other functionalities may be incorporated at this layer  we will talk about this later on we are talking about ip routing of ip packets and how you can have a virtually connection oriented system on that we will discuss it later on  the point is unlike data link layer remembering the next hop just the link which is immediately adjacent that has some advantages in the sense that whatever information you require about it are locally available here routing is the major problem  we are talking about routing over multiple networks and towards a very remote system the packet might have to take many hops maybe 10  20 even 30 hops to reach the end point and when you take naturally let say 20 hops  the area you are sort of serving becomes so large with so many machines connected to it how to keep track and naturally switch so many machines with so many links is the problem some of the link may go down some of the machines  may come up and when i say machines it may refer to actual either pcs servers etc they may also refer to the network boxes like other routers  refer slide time  58  03-58  29  calculate the check sum which is for your connection as we know can transmit to the next hop and send an icmp packet if necessary icmp is for internet control message protocol if the routers may use icmp packets for sort of talking to each other and sending various messages if necessary we will see 1 example  